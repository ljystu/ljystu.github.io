(window.webpackJsonp=window.webpackJsonp||[]).push([[121,55,66,102],{3042:function(e,t,n){"use strict";n.r(t);n(92);var o=n(45),a=(n(166),n(31)),r=n(0),i=n.n(r),c=n(2),l=n.n(c),u=n(106),m=n.n(u),d=n(570),s=n(84),f=n.n(s),p=n(1365),b=n(2951),y=n(2950),g=n(2912),v=n(2946),h=n(2246),C=n(33),E=n(44),_=n(264),O=n(30),w=n(147),S=n(446),A=n(2970),j="DocActionMenu-module_wrap_oZQ06",k="DocActionMenu-module_menuItemContainer_pMpjo",P="DocActionMenu-module_iconContainer_QaDi2",I="DocActionMenu-module_menu_6Bn5J",T=n(1333),D=m()("doc:actionMenu"),N=function(e){var t,n,r,c=Object(T.a)(e),l=c.cmd,u=c.sendAlimail,m=c.mailSending,d=c.reset,s=c.doAction,w=c.contextHolder,N=c.setSendAlimail,M=c.setMailSending,R=e.book,x=e.className,L=e.doc,V=e.commandParams;return D("render, currect action",l,V),i.a.createElement("div",{className:"".concat(j," ").concat(x)},i.a.createElement(a.a,{className:I,selectable:!1,onClick:function(t){var n=t.key;e.onSelect({key:n}),s(n),Object(S.a)("c34619.d69461",{create_type:n})}},(t=e.commands,n=e.disabledCommands,r={},n.forEach((function(e){r[e.cmd]=!0})),t.slice(0).map((function(e,t){if("divide"===e.cmd)return i.a.createElement(a.a.Divider,{key:"".concat(t,"-divider")});var n=e.menuTitle||e.title;return i.a.createElement(a.a.Item,{key:e.cmd,disabled:r[e.cmd]||!1,className:"doc-action-menu-item-".concat(e.cmd),"data-testid":"doc-action-menu-item-".concat(e.cmd)},i.a.createElement("div",{className:k,"data-aspm-click":e.aspm},e.icon&&i.a.createElement(O.b,{className:P,name:e.icon,width:20,height:20}),e.tip_id?i.a.createElement(p.a,{tip_id:e.tip_id},n):n))})))),w,l===E.a.DOC.export_doc.cmd&&i.a.createElement(g.a,{doc:L,bookId:R.id,onCancel:d,exportParams:V,canExportMultiple:V.can_export_multiple}),l===E.a.BOOK.export_book.cmd&&i.a.createElement(h.a,{visible:!0,book:R,exportParams:V,onCancel:d}),l===E.a.DOC.import_to_doc.cmd&&i.a.createElement(v.a,{book:R,formats:_.a.getImportFormats({multi:!1}),importType:f.a.IMPORT_TYPE.PARSE,onCancel:d,onSuccess:function(t){e.onCommandsExecuted({cmd:l,result:t})}}),l===E.a.DOC.import_to_book.cmd&&i.a.createElement(v.a,{book:R,importParams:V,formats:_.a.getImportFormats({multi:!0}),importType:f.a.IMPORT_TYPE.CREATE,onCancel:d,onSuccess:function(t){e.onCommandsExecuted({cmd:l,result:t})},group:window.appData.group}),l===E.a.DOC.save_as_template.cmd&&i.a.createElement(y.a,{visible:l===E.a.DOC.save_as_template.cmd,onCancel:d,modalTitle:__("另存为模板"),book:R,doc:e.doc,group:window.appData.group,organization:window.appData.organization,docletType:e.doc.type,onOpenTemplateSelector:function(){return s(E.a.DOC.create_from_template.cmd)},inEdit:e.inEdit}),l===E.a.DOC.save_published_as_version.cmd&&i.a.createElement(b.a,{doc:L,docDomain:"Doc",type:"published",onCancel:d,docVersionProxy:C.a.docVersions}),i.a.createElement(o.a,{width:500,visible:u,footer:null,closable:!m,maskClosable:!1,onCancel:function(){N(!1)}},u&&i.a.createElement(A.a,{onMailSended:function(){M(!1)},onMailSending:function(){M(!0)},doc:L})))};N.defaultProps={className:"",disabledCommands:[],onSelect:function(){},onCommandsExecuted:function(){},commandParams:{}},N.propTypes={className:l.a.string,group:l.a.object.isRequired,book:l.a.object.isRequired,doc:l.a.object,commands:l.a.array.isRequired,commandParams:l.a.object,disabledCommands:l.a.array,onSelect:l.a.func,onCommandsExecuted:l.a.func,dispatch:l.a.func,onSelectTemplate:l.a.func,inEdit:l.a.bool,onCreateDoc:l.a.func,menuId:l.a.string};t.default=Object(d.d)()(Object(w.b)(N))},320:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var o=n(356),a=n.n(o),r=a()(window.appData&&window.appData.defaultSpaceHost).host;r=r.split(".").slice(-2).join(".");var i={relocate:function(e,t){t?setTimeout((function(){window.location.href=i.normalize(e)}),t):window.location.href=i.normalize(e)},normalize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=a()(e).host||"";if(t){if(t===window.location.host)return e;if(t===r)return e;if(!t.endsWith(r))return"/";var n=t.slice(0,-r.length);return/^[.a-zA-Z0-9_-]+\.$/.test(n)?e:"/"}return"/"!==e[0]&&(e="/".concat(e)),e}},c=(i.normalize,i.relocate);function l(){var e=window.location.hash,t=decodeURIComponent(e.split("#")[1]),n=document.getElementById(t);n&&n.scrollIntoView()}},3391:function(e,t,n){"use strict";t.a={modal:"CatalogMenuEditNode-module_modal_4focI",modalTitle:"CatalogMenuEditNode-module_modalTitle_ZgYhp",modalDescription:"CatalogMenuEditNode-module_modalDescription_-7x6D",btnCloseModal:"CatalogMenuEditNode-module_btnCloseModal_ESRS+",menu:"CatalogMenuEditNode-module_menu_IUmmu",menuItem:"CatalogMenuEditNode-module_menuItem_AuSRR",icon:"CatalogMenuEditNode-module_icon_9R6mY",iconBeta:"CatalogMenuEditNode-module_iconBeta_KHwCd",menuItemContent:"CatalogMenuEditNode-module_menuItemContent_Lf9nF",iconWrapper:"CatalogMenuEditNode-module_iconWrapper_IoV7X"}},3622:function(e,t,n){"use strict";n(279);var o=n(136),a=(n(166),n(31)),r=n(0),i=n.n(r),c=n(2),l=n.n(c),u=n(30),m=n(2912),d=n(2263),s=n(3105),f=n(44),p=n(363),b=n(3391),y=n(3165);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==g(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,c=[],l=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(c.push(o.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var O=function(e){var t=e.book,n=e.item,o=e.setEditItem,a=e.hideCopyWithChildren,i=E(Object(r.useState)(!1),2),c=i[0],l=i[1],u=function(){l(!c)},m=y.a.useViewModel(h(h({},e),{},{showRepoSelector:!0,hideCopyWithChildren:a}));return{state:{exportModalVisible:c},handleMenuClick:function(a,r){switch(a.domEvent.stopPropagation(),r){case f.a.DOC.copyLink.cmd:m.copyLink();break;case f.a.CATALOG.copy.cmd:m.showCopyToModal();break;case f.a.CATALOG.move.cmd:m.showMoveToModal();break;case f.a.CATALOG.edit_link.cmd:m.showLinkNodeModal();break;case f.a.CATALOG.remove.cmd:m.showRemoveConfirmModal();break;case f.a.CATALOG.destroy.cmd:m.showDestroyConfirmModal();break;case f.a.DOC.unshare.cmd:m.showUnshareConfirmModal();break;case f.a.CATALOG.rename.cmd:o(n.uuid);break;case f.a.CATALOG.export.cmd:u();break;case f.a.CATALOG.view_doc.cmd:Object(p.b)("/".concat(t.namespace,"/").concat(n.url));break;case f.a.DOC.edit.cmd:Object(p.b)("/".concat(t.namespace,"/").concat(n.url,"/edit"))}e.onMenuItemClick(a,r)},toggleExportModalVisible:u}},w=function(e){var t=e.item,n=e.mode,c=e.book,l=e.placement,f=e.align,p=e.visible,y=e.onVisibleChange,g=e.children,v=O(e),h=Object(r.useRef)(),C=d.a.actionsForEdit(t,n,c.abilities);return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{type:"menu",overlayStyle:{minWidth:126},trigger:["click"],arrowPointAtCenter:!0,hideWhenInactive:!0,visible:p,onVisibleChange:y,align:f,placement:l,getPopupContainer:function(){var e;return(null===(e=h.current)||void 0===e?void 0:e.closest("[".concat(s.c,"]")))||document.body},content:i.a.createElement(a.a,null,C.map((function(e){return"divide"===e.cmd?i.a.createElement(a.a.Divider,{key:e.cmd}):i.a.createElement(a.a.Item,{key:e.cmd,onClick:function(t){v.handleMenuClick(t,e.cmd)}},i.a.createElement("div",{className:b.a.menuItemContent},i.a.createElement("span",{className:b.a.iconWrapper},i.a.createElement(u.b,{name:e.icon,width:16,height:16})),i.a.createElement("span",null,e.title)))})))},i.a.cloneElement(g,{ref:h})),v.state.exportModalVisible&&i.a.createElement(m.a,{visible:!0,bookId:c.id,exportParams:{doc_id:t.doc_id,toc_node_uuid:t.uuid,toc_node_url:t.url,toc_node_title:t.title,create_from:"doc_toc"},onCancel:v.toggleExportModalVisible,canExportMultiple:!0}))};w.defaultProps={mode:"lite",onMenuItemClick:function(){},hideCopyWithChildren:!1},w.propTypes={group:l.a.object.isRequired,book:l.a.object.isRequired,catalog:l.a.array,item:l.a.object.isRequired,mode:l.a.oneOf(["full","lite","desktop"]),placement:l.a.string,align:l.a.object,children:l.a.node.isRequired,visible:l.a.bool,onVisibleChange:l.a.func,onAction:l.a.func,setEditItem:l.a.func,onMove:l.a.func,onCopy:l.a.func,isActive:l.a.bool,onMenuItemClick:l.a.func,onUnshare:l.a.func,hideCopyWithChildren:l.a.bool},t.a=w},363:function(e,t,n){"use strict";var o=n(320);n.d(t,"a",(function(){return o.a})),n.d(t,"b",(function(){return o.b}))},3908:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));n(279);var o=n(136),a=n(0),r=n.n(a),i=n(3622),c=n(9),l=n.n(c),u=n(30),m=n(264),d=n(3042),s=n(3105),f=n(44),p=n(396),b=n(3639);function y(e){var t=e.book,n=e.group,c=e.treeItemData,y=e.onAction,g=e.onCreateCatalogLink,v=e.setEditingItemId,h=e.onMove,C=e.onCopy,E=e.onDestroy,_=e.createMenuVisible,O=e.setCreateMenuVisible,w=e.editMenuVisible,S=e.setEditMenuVisible,A=Object(a.useRef)(null);return r.a.createElement("span",{className:b.a.catalogItemActions},r.a.createElement(i.a,{group:n,book:t,catalog:t.toc,item:c,onAction:y,onMove:h,onCopy:C,onDestroy:E,setEditItem:v,visible:w,onVisibleChange:function(e){S(e)},onMenuItemClick:function(){S(!1)},mode:"lite",placement:"bottomLeft",align:{offset:[-22,-3]}},r.a.createElement("span",{className:l()(b.a.btnItem,b.a.btnGap)},r.a.createElement(u.b,{name:"more",width:16}))),r.a.createElement(o.a,{type:"menu",trigger:["click"],arrowPointAtCenter:!0,hideWhenInactive:!0,autoAdjustOverflow:!0,visible:_,onVisibleChange:function(e){O(e)},placement:"bottomLeft",align:{offset:[-22,-3]},getPopupContainer:function(){var e;return(null===(e=A.current)||void 0===e?void 0:e.closest("[".concat(s.c,"]")))||document.body},content:r.a.createElement(d.default,{book:t,commands:m.a.additionalActionsForNewDoc({canImport:!0,canCreateCatalogGroup:!0,canCreateCatalogLink:!0}),commandParams:{toc_node_uuid:c.uuid,toc_node_url:c.url,toc_node_title:c.title,create_from:"doc_toc",insert_to_catalog:!0,action:"prependChild",target_uuid:c.uuid},onCommandsExecuted:function(e){var t=e.cmd;O(!1),t===f.a.CATALOG.create_title.cmd&&y({target_uuid:c.uuid,action:p.ACTIONS.insert,type:p.TYPES.title}),t===f.a.CATALOG.create_link.cmd&&g({target_uuid:c.uuid,action:p.ACTIONS.insert,type:p.TYPES.link})}})},r.a.createElement("span",{className:b.a.btnItem,ref:A},r.a.createElement(u.b,{name:"add",width:16}))))}},4328:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ye}));n(1508);var o=n(1340),a=(n(3792),n(3906)),r=(n(2299),n(1530)),i=n(0),c=n.n(i),l=n(3230),u=n(3221),m=n(4329),d=n(9),s=n.n(d),f=n(30),p=n(3666),b=(n(3908),n(3793)),y=n(3907),g=(n(104),n(38)),v=n(396),h=n(111),C=n(264),E=n(272),_="catalogItemTitle-module_title_GhXzs",O="catalogItemTitle-module_dashline_9S9EN",w="catalogItemTitle-module_date_t1aj2",S=n(3639);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function j(e,t,n){return t=function(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==A(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=c.a.memo((function(e){var t,n=e.doc,o=e.tailType,a=e.node,r=e.contributors;if(!n||!o)return null;if(a.type===v.TYPES.title||a.type===v.TYPES.link)return null;var i,l,u=(t={},j(t,h.TOC_TAIL_TYPES.AUTHOR,(i=C.a.getDocShowAuthorId(n),l=-1!==i?null==r?void 0:r.find((function(e){return e.id===i||e.id===n.user_id})):null,l?l.name:null)),j(t,h.TOC_TAIL_TYPES.UPDATED_AT,c.a.createElement("span",{className:w},c.a.createElement(E.a,{time:null==n?void 0:n.content_updated_at}))),j(t,h.TOC_TAIL_TYPES.CREATED_AT,c.a.createElement("span",{className:w},c.a.createElement(E.a,{time:null==n?void 0:n.created_at}))),j(t,h.TOC_TAIL_TYPES.SLUG,null==a?void 0:a.url),t)[o];return u?c.a.createElement("span",{className:S.a.slug},c.a.createElement("span",{className:S.a.tailInfo},u)):null}));function P(e){var t,n=e.treeItemData,o=e.isEditing,a=e.rename,r=e.itemId,l=e.book,u=n.title,m=Object(i.useRef)(u),d=Object(i.useCallback)((function(){a(r,m.current)}),[r,a]),s=Object(i.useCallback)((function(e){m.current=e.target.value}),[]);return o?c.a.createElement("div",{className:S.a.titleWrapper},c.a.createElement(g.a,{autoFocus:!0,defaultValue:u,onPressEnter:d,onChange:s,onBlur:d,onFocus:function(e){e.target.select()},onClick:function(e){e.stopPropagation(),e.preventDefault()},onDoubleClick:function(e){e.stopPropagation(),e.preventDefault()}})):c.a.createElement("div",{className:S.a.titleWrapper},c.a.createElement("span",{className:_},u),"DOC"===n.type&&c.a.createElement("span",{className:O}),c.a.createElement(k,{node:n,tailType:l.catalog_tail_type,doc:null==l||null===(t=l.docs)||void 0===t?void 0:t.find((function(e){return e.id===n.doc_id})),contributors:l.contributors}))}var I="catalogTreeItem-module_content_J3D5T";function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},D.apply(this,arguments)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,c=[],l=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(c.push(o.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t=function(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==T(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===T(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=c.a.memo((function(e){var t=e.depth,n=e.item,o=n.id,a=n.isExpanded,r=n.data,l=n.hasChildren,u=e.provided,m=e.snapshot,d=e.isClone,g=e.offsetPerLevel,v=e.isScrolling,h=Object(i.useContext)(b.a),C=h.book,E=(h.canEditCatalog,h.currentDocSlug),_=h.editingItemId,O=(h.setEditingItemId,h.clearEditing),w=(h.tempCode,h.handleToggleCollapse),A=h.handleItemClick,j=h.handleRename,k=h.handleItemDoubleClick,T=c.a.useContext(p.a).ref,M=_===o,R=E===r.url,V=Boolean(m.combineTargetFor),W="/".concat(C.namespace,"/").concat(r.url),z=u.draggableProps.style&&u.draggableProps.style.transform;z=d&&z?z.concat(" translateZ(1px)"):z;var H=Object(i.useMemo)((function(){return x(x({},u.draggableProps.style),{},{transform:z,cursor:"pointer"})}),[u.draggableProps.style,z]),B=Object(i.useMemo)((function(){return{paddingLeft:t*g}}),[t,g]),G=N(Object(i.useState)(!1),2),Y=(G[0],G[1],N(Object(i.useState)(!1),2)),U=(Y[0],Y[1],Object(i.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),O(),w(o)}),[o,w,O])),F=Object(i.useCallback)((function(){M||O()}),[M,O]),Q=Object(i.useCallback)((function(){A(o),"DOC"===r.type&&setTimeout((function(){var e;T.current&&(null===(e=T.current.current)||void 0===e||e.revealDoc({slug:r.url}))}),200)}),[A,o]),q=Object(i.useCallback)((function(){k(o)}),[k,o]);Object(i.useCallback)((function(e){O(),e.stopPropagation()}),[O]);return c.a.createElement("div",D({ref:u.innerRef,className:s()(S.a.CatalogItem,L({},S.a.cloned,d))},u.draggableProps,u.dragHandleProps,{style:H,onClick:F}),c.a.createElement(y.a,{docUrl:W,style:B,treeItemData:r,isEditing:M,isDragHovered:V,isClone:d,isSelected:R,isScrolling:v,onClick:Q,onDoubleClick:q,className:I},c.a.createElement("div",{className:s()(S.a.collapseContent,L({},S.a.hasChildren,l)),onClick:U},c.a.createElement("div",{className:s()(S.a.collapseIconWrapper,L({},S.a.collapsed,!a))},l&&c.a.createElement(f.b,{name:"mini-dropdown",width:16,height:16,className:S.a.collapseIcon}))),c.a.createElement(P,{itemId:o,treeItemData:r,isEditing:M,rename:j,book:C}),!1))}));function W(e){var t=e.book;return React.createElement(m.default,{enableDrag:!1,book:t,renderItem:function(e){return React.createElement(V,e)}})}var z=n(3256),H=n(57),B="cardStyle-module_cardItem_0zpVC",G="cardStyle-module_wrapper_-Cdxb",Y="cardStyle-module_content_1seC0",U="cardStyle-module_bottom_HE9Ie",F="cardStyle-module_title_47tVW",Q="cardStyle-module_date_dFort",q=n(3233);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t=function(e){var t=function(e,t){if("object"!==J(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==J(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===J(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=function(e){var t=e.columnIndex,n=e.rowIndex,o=e.style,a=e.data,r=a.dataSource,i=a.columnCout,l=a.totalRowCount,u=a.group,m=a.book,d=t%i==0,s=t%i==2,f=0===n,p=n===l,b=r[i*n+t];return b?c.a.createElement(H.NavLink,{to:Object(q.b)(u,m,b.slug)},c.a.createElement("div",{className:B,style:Z(Z({},o),{},{paddingLeft:d?0:12,paddingRight:s?0:12,paddingTop:f?0:12,paddingBottom:p?0:12})},c.a.createElement("div",{className:G},c.a.createElement("div",{className:Y,style:null!=b&&b.cover?{backgroundImage:"url(".concat(null==b?void 0:b.cover,")"),backgroundSize:"100%"}:{backgroundImage:"url(".concat("https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*88KSQLz9PJwAAAAAAAAAAAAAARQnAQ",")"),backgroundSize:"50%"}}),c.a.createElement("div",{className:U},c.a.createElement("div",{className:F},null==b?void 0:b.title),c.a.createElement("div",{className:Q},c.a.createElement(E.a,{time:null==b?void 0:b.content_updated_at})))))):null};function ee(e){var t=Object(i.useContext)(u.a),n=t.virtualWidth,o=t.virtualHeight,a=t.virtualContainerRef,r=t.virtualComponentRef,l=t.virtualContainerStyle,m=e.docs,d=e.group,s=e.book,f=2;n>=960&&(f=3),n>=1288&&(f=4);var p=n/f;p>320&&(p=Math.min(320,p)),p<300&&(p=Math.max(300,p));var b=Math.ceil(m.length/f),y=.75*p;return c.a.createElement(z.a,{ref:r,outerRef:a,style:l,width:n,height:o,columnCount:f,columnWidth:p,rowCount:b,rowHeight:y,itemData:{dataSource:m,columnCout:f,totalRowCount:b,group:d,book:s}},X)}var te="column-module_columnItem_zzhvS",ne="column-module_content_C+IlX",oe="column-module_left_ViMW5",ae="column-module_title_6wV1M",re="column-module_desc_HT7qJ",ie="column-module_date_uBxlq",ce="column-module_right_pp6ET",le=function(e){var t=e.style,n=e.data,o=e.index,a=n.dataSource,r=n.group,i=n.book,l=n.imgWidth,u=a[o];return u?c.a.createElement(H.NavLink,{to:Object(q.b)(r,i,u.slug)},c.a.createElement("div",{className:te,style:t},c.a.createElement("div",{className:ne},c.a.createElement("div",{className:oe},c.a.createElement("div",{className:ae},null==u?void 0:u.title),c.a.createElement("div",{className:re},(null==u?void 0:u.custom_description)||(null==u?void 0:u.description)),c.a.createElement("div",{className:ie},c.a.createElement(E.a,{time:null==u?void 0:u.content_updated_at}))),c.a.createElement("div",{className:ce,style:null!=u&&u.cover?{backgroundImage:"url(".concat(null==u?void 0:u.cover,")"),backgroundSize:"100%",width:l}:{backgroundImage:"url(".concat("https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*88KSQLz9PJwAAAAAAAAAAAAAARQnAQ",")"),backgroundSize:"50%",width:l}})))):null};function ue(e){var t=Object(i.useContext)(u.a),n=t.virtualWidth,o=t.virtualHeight,a=t.virtualContainerRef,r=t.virtualComponentRef,l=t.virtualContainerStyle,m=e.docs,d=e.book,s=e.group,f=204;return n>=960&&(f=304),n>=1288&&(f=404),c.a.createElement(z.b,{ref:r,outerRef:a,style:l,width:n,height:o,itemSize:172,itemCount:m.length,itemData:{dataSource:m,group:s,book:d,imgWidth:f}},le)}var me=n(3904),de=n(3905);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function fe(e,t,n){return t=function(e){var t=function(e,t){if("object"!==se(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==se(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===se(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,c=[],l=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(c.push(o.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function ye(e){var t,n=e.book,m=e.inTocDocs,d=e.catalogLoading,s=e.layout,f=e.group,p=e.isEdit,b=pe(Object(i.useState)(window.innerHeight),2),y=b[0],g=b[1];return Object(i.useEffect)((function(){var e=function(){g(window.innerHeight)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),p&&(s===me.a.Book&&0===(null===(t=n.toc)||void 0===t?void 0:t.length)||s!==me.a.Book&&0===m.length)?c.a.createElement(a.a,{className:de.a.empty,image:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*wPMVTriBo40AAAAAAAAAAAAAARQnAQ",description:c.a.createElement(r.a,null,__("暂无文档"))}):c.a.createElement(o.a,{className:de.a.mt_26,title:!1,paragraph:{rows:6,width:"100%"},active:!0,loading:d},c.a.createElement(l.a,{disableHeight:!0},(function(e){var t,o=e.width,a=(n.toc||[]).length,r=(fe(t={},me.a.Book,34*a>y?y:34*a),fe(t,me.a.Card,320*a>y?y:320*a),fe(t,me.a.Column,172*a>y?y:172*a),t)[s];return c.a.createElement(u.b,{useScrolling:!0,gridLayout:s===me.a.Card,virtualContainerStyle:{height:void 0,overflow:"hidden"},virtualHeight:r,virtualWidth:o},(function(){return c.a.createElement("div",{className:de.a.tocContainer},s===me.a.Book&&c.a.createElement(W,{group:f,book:n,docs:n.docs}),s===me.a.Card&&c.a.createElement(ee,{group:f,book:n,docs:m}),s===me.a.Column&&c.a.createElement(ue,{group:f,book:n,docs:m}))}))})))}}}]);