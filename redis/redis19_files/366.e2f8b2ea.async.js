/*! For license information please see 366.e2f8b2ea.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[366,12,15,79,133],{1078:function(e,t,r){var n=r(175),o=r(99);e.exports=function(e){return o(e)&&n(e)}},1085:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function o(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(o=e[r],a=t[r],!(o===a||n(o)&&n(a)))return!1;var o,a;return!0}function a(e,t){void 0===t&&(t=o);var r=null;function n(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var a=e.apply(this,n);return r={lastResult:a,lastArgs:n,lastThis:this},a}return n.clear=function(){r=null},n}},1089:function(e,t,r){var n=r(480),o=r(175);e.exports=function(e,t){var r=-1,a=o(e)?Array(e.length):[];return n(e,(function(e,n,o){a[++r]=t(e,n,o)})),a}},113:function(e,t,r){"use strict";e.exports={ICON_SELECTOR:{URL_TYPE_LIST:["book-type-default","book-type-sheet","book-type-blog","book-icon-topic","group-type-project","book-type-manual","book-type-design","book-type-thread","group-type-interest","book-type-travel","group-type-default","book-type-reports","book-type-import","group-type-department","book-type-project","book-type-notes","book-type-resource","book-icon-yuque","book-icon-alibaba","book-icon-taobao","book-icon-alipay"],LEGACY_URL_TYPE_LIST:["books-url-wendangzhishiku","books-url-biaogezhishiku","books-url-boke","books-url-bokebeifen","books-url-bumen","books-url-chanpinshouce","books-url-huabanzhishiku","books-url-huati","books-url-lanqiubeifen","books-url-lvhanggonglve","books-url-morentuandui","books-url-tuanduizhoubao","books-url-wenjianjiabeifen","books-url-xiangmu","books-url-xiangmufangan","books-url-xuexibiji","books-url-ziyuanzhishiku","books-url-ali","books-url-taobao","books-url-zhifubao","books-url-yuque"],ICON_TYPE_LIST:["books-icon-default","books-icon-aixin","books-icon-baozhi","books-icon-biaoge","books-icon-biaoqian","books-icon-bikan","books-icon-boke","books-icon-chanpinwendang","books-icon-chucun","books-icon-dabiaowenjian","books-icon-dengpao","books-icon-duihua","books-icon-gerendangan","books-icon-huabao","books-icon-huati","books-icon-huati2","books-icon-hudun","books-icon-huojian","books-icon-huowu","books-icon-jiami","books-icon-jiangbei","books-icon-jihua","books-icon-lanqiu","books-icon-lingdang","books-icon-liucheng","books-icon-mubiao","books-icon-penzai","books-icon-qiqiu","books-icon-qunzu","books-icon-renwuliebiao","books-icon-rili","books-icon-suozhu","books-icon-tongxunlu","books-icon-tuandui","books-icon-wengao","books-icon-wenjiandai","books-icon-wenjiandai-2","books-icon-wenjianjia","books-icon-xiezuo","books-icon-xinfeng","books-icon-xingquxiaozu","books-icon-xuexibiji","books-icon-yingyuxuexi","books-icon-zhiding"],LEGACY_ICON_TYPE_LIST:["books-icon-wendang"],EMOJI_TYPE_LIST:[],BOOK_ICON_TYPE_MAP:{"books-icon-aixin":"group-type-interest","books-icon-baozhi":"book-type-blog","books-icon-biaoge":"book-type-sheet","books-icon-alibaba":"book-icon-alibaba","books-icon-bianzu":"book-icon-taobao","books-icon-bianzu-15":"book-icon-alipay","books-icon-biaoqian":"book-type-manual","books-icon-bikan":"group-type-project","books-icon-boke":"book-type-notes","books-icon-chanpinwendang":"book-type-project","books-icon-chucun":"book-type-resource","books-icon-dabiaowenjian":"book-type-travel","books-icon-default":"book-type-default","books-icon-dengpao":"group-type-project","books-icon-duihua":"book-icon-topic","books-icon-gerendangan":"book-type-manual","books-icon-huabao":"book-type-design","books-icon-huati":"group-type-department","books-icon-huati2":"book-type-thread","books-icon-hudun":"group-type-project","books-icon-huojian":"book-type-sheet","books-icon-huowu":"book-type-notes","books-icon-jiami":"book-type-import","books-icon-jiangbei":"group-type-project","books-icon-jihua":"book-type-reports","books-icon-lanqiu":"book-type-default","books-icon-lingdang":"group-type-department","books-icon-liucheng":"book-type-sheet","books-icon-mubiao":"group-type-project","books-icon-penzai":"book-type-default","books-icon-qiqiu":"book-type-default","books-icon-qunzu":"group-type-default","books-icon-renwuliebiao":"book-type-manual","books-icon-rili":"book-type-manual","books-icon-suozhu":"book-type-default","books-icon-tongxunlu":"group-type-interest","books-icon-tuandui":"group-type-default","books-icon-wendang":"book-type-default","books-icon-wengao":"book-type-blog","books-icon-wenjiandai":"book-type-project","books-icon-wenjiandai-2":"book-type-resource","books-icon-wenjianjia":"book-type-blog","books-icon-xiezuo":"book-type-blog","books-icon-xinfeng":"book-type-manual","books-icon-xingquxiaozu":"group-type-interest","books-icon-xuexibiji":"book-type-notes","books-icon-yingyuxuexi":"book-type-default","books-icon-yuque-logo":"book-icon-yuque","books-icon-zhiding":"book-type-default"}},BOOK_ICON_MAP:{default:"book-type-default",book:"book-type-default",sheet:"book-type-sheet",design:"book-type-design",thread:"book-type-thread",resource:"book-type-resource",column:"book-type-blog",notes:"book-type-notes",blog:"book-type-blog",travel:"book-type-travel",project:"book-type-project",manual:"book-type-manual",reports:"book-type-reports",team_blog:"book-type-blog"},USER_ICON_MAP:{default:"group-type-default",project:"group-type-project",department:"group-type-department",interest:"group-type-interest",commerce:"group-type-default",official_doc:"group-type-department"},DOC_ICON_MAP:{doc:"doc-type-default",sheet:"doc-type-sheet",table:"doc-type-table",mind:"doc-type-mind",board:"doc-type-board",show:"file-ppt",thread:"book-type-thread",artboardgroup:"book-type-design",artboard:"book-type-design",note:"doc-type-note",actiontag:"book-type-resource",issue:"doc-type-task"},THREAD_ICON_MAP:{default:"book-type-thread",daily:"book-type-thread",weekly:"book-type-thread"},DOC_FORMAT_ICON_MAP:{markdown:"doc-type-default",asl:"doc-type-default",lake:"doc-type-default",spreadjs:"doc-type-sheet",lakesheet:"doc-type-sheet",lakemind:"doc-type-mind",lakeboard:"doc-type-board",lakeshow:"file-ppt"}}},1146:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(n=r(1575))&&n.__esModule?n:{default:n};t.default=o,e.exports=o},1147:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(n=r(1577))&&n.__esModule?n:{default:n};t.default=o,e.exports=o},1149:function(e,t,r){"use strict";r(103);var n=r(60),o=r(0),a=r.n(o),i=["textRef","visible","onVisibleChange"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}t.a=function(e){var t=e.textRef,r=(e.visible,e.onVisibleChange),l=s(e,i),f=u(Object(o.useState)(!1),2),d=f[0],p=f[1];return a.a.createElement(n.a,c({},l,{visible:d,onVisibleChange:function(e){var n=e;null!=t&&t.current&&n&&(n=void 0!==t.current.offsetWidth&&void 0!==t.current.scrollWidth&&t.current.offsetWidth<t.current.scrollWidth),p(n),r&&r(n)}}))}},117:function(e,t,r){"use strict";t.a={shareChannels:"ShareChannels-module_shareChannels_Fj7uz",shareDetailSettingPanel:"ShareChannels-module_shareDetailSettingPanel_Tb1-J",collaborator:"ShareChannels-module_collaborator_zwUr+",inviteSelector:"ShareChannels-module_inviteSelector_MLpeR",bookPublicSetting:"ShareChannels-module_bookPublicSetting_g9ss9",bookPublicTitle:"ShareChannels-module_bookPublicTitle_ibP+w",title:"ShareChannels-module_title_XlZJC",backIcon:"ShareChannels-module_backIcon_83Ws3",titleDesc:"ShareChannels-module_titleDesc_qZGRV",bookPublicSet:"ShareChannels-module_bookPublicSet_nx19k",contentArea:"ShareChannels-module_contentArea_Z-Tnr",copyLinkWrapper:"ShareChannels-module_copyLinkWrapper_Q2A7Y",linkTitleDesc:"ShareChannels-module_linkTitleDesc_FeSu0",linkContentArea:"ShareChannels-module_linkContentArea_GKWjT",copyLink:"ShareChannels-module_copyLink_IlZgW",inviteCopyBtn:"ShareChannels-module_inviteCopyBtn_epAMy",moreConfigSettings:"ShareChannels-module_moreConfigSettings_JKYYT",moreConfigToggler:"ShareChannels-module_moreConfigToggler_mqaMJ",moreConfigsTip:"ShareChannels-module_moreConfigsTip_jTlCz",expandIcon:"ShareChannels-module_expandIcon_bV3yc",pwdBlock:"ShareChannels-module_pwdBlock_KfYSH",pwdLink:"ShareChannels-module_pwdLink_SegcP",pwdBtn:"ShareChannels-module_pwdBtn_gg7wH",passwordText:"ShareChannels-module_passwordText_n3Bh0",resetBtn:"ShareChannels-module_resetBtn_nZPwm",resetIcon:"ShareChannels-module_resetIcon_3V6MB",selectorItem:"ShareChannels-module_selectorItem_r0I84",selectorIcon:"ShareChannels-module_selectorIcon_vvFr+",disabledItem:"ShareChannels-module_disabledItem_A7eGW",switchTitle:"ShareChannels-module_switchTitle_+qovl",selectOption:"ShareChannels-module_selectOption_vwHzR",collaboratorContent:"ShareChannels-module_collaboratorContent_sFMAJ",shareQrCodeContent:"ShareChannels-module_shareQrCodeContent_1az6h",shareQrCodeArea:"ShareChannels-module_shareQrCodeArea_fIAQp",shareQrCodeButton:"ShareChannels-module_shareQrCodeButton_Gq3TN"}},1181:function(e,t,r){!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},r=e.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,o=function(){for(var e,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,o=r.length,a={};n<o;n++)if((e=r[n])&&e[1]in t){for(n=0;n<e.length;n++)a[r[0][n]]=e[n];return a}return!1}(),a={change:o.fullscreenchange,error:o.fullscreenerror},i={request:function(e){var r=o.requestFullscreen;e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[r]():e[r](n?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){t[o.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,r){var n=a[e];n&&t.addEventListener(n,r,!1)},off:function(e,r){var n=a[e];n&&t.removeEventListener(n,r,!1)},raw:o};o?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[o.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[o.fullscreenEnabled])}}}),r?e.exports=i:window.screenfull=i):r?e.exports=!1:window.screenfull=!1}()},1192:function(e,t,r){var n=r(366);e.exports=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?n(e,void 0,t):[]}},120:function(e,t,r){var n=r(54),o=r(86);e.exports=function(e,t,r){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(r)&&(a="leading"in r?!!r.leading:a,i="trailing"in r?!!r.trailing:i),n(e,t,{leading:a,maxWait:t,trailing:i})}},1326:function(e,t,r){"use strict";r.d(t,"a",(function(){return z})),r.d(t,"i",(function(){return W})),r.d(t,"e",(function(){return V})),r.d(t,"p",(function(){return q})),r.d(t,"c",(function(){return K})),r.d(t,"n",(function(){return Y})),r.d(t,"o",(function(){return $})),r.d(t,"l",(function(){return Z})),r.d(t,"h",(function(){return X})),r.d(t,"j",(function(){return Q})),r.d(t,"b",(function(){return te})),r.d(t,"m",(function(){return re})),r.d(t,"k",(function(){return oe})),r.d(t,"f",(function(){return ae})),r.d(t,"g",(function(){return ie})),r.d(t,"d",(function(){return ce})),r.d(t,"q",(function(){return ue}));r(466);var n=r(253),o=(r(166),r(31)),a=(r(1511),r(1357)),i=(r(279),r(136)),c=(r(559),r(200)),u=(r(103),r(60)),l=r(0),s=r.n(l),f=r(2),d=r.n(f),p=r(9),h=r.n(p),m=r(490),v=r(93),y=r(18),b=r(379),g=r(868),w=g.b,_=r(30),O=r(951),E={wrap:"index-module_wrap_iKZPE",close:"index-module_close_mZbMN",icon:"index-module_icon_gxtpV",closeIcon:"index-module_closeIcon_kM1zW"};function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=function(e){var t=e.icon,r=e.content,n=e.style,o=e.showClose,a=S(Object(l.useState)(!0),2),i=a[0],c=a[1];return i?s.a.createElement("div",{className:E.wrap,style:n},t&&s.a.createElement("div",{className:E.icon},t),s.a.createElement("div",{className:E.content},r),o&&s.a.createElement("div",{className:E.close,onClick:function(){c(!1)}},s.a.createElement("span",{className:h()("lake-icon","lake-icon-close",E.closeIcon)}))):null};j.propTypes={icon:d.a.node,content:d.a.node.isRequired,style:d.a.object,showClose:d.a.bool};var k=j,P=r(163),C=r(205),T=r(961),L=r(248),A=r(352),I={articleTitle:"index-module_articleTitle_VJTLJ",popover:"index-module_popover_nfMC3",belongMenu:"index-module_belongMenu_2QmLB",belongText:"index-module_belongText_TkCAl",belongMenuOverlay:"index-module_belongMenuOverlay_ua9Uh",belongMenuLabel:"index-module_belongMenuLabel_Eor0q",privacy:"index-module_privacy_QkaFB"};function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function D(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==N(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===N(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z={},W=function(e){var t=e.className,r=e.type,n=void 0===r?"doc":r,o=e.width,a=void 0===o?20:o;return s.a.createElement(_.b,{className:"doc-icon ".concat(t),name:A.b.getName("Doc",{type:n}),width:a})};z.getTypeText=function(e){var t=e;return"Doc"===e?t=__("文档#lower_case"):"Sheet"===e?t=__("表格#lower_case"):"Table"===e?t=__("数据表#lower_case"):"Board"===e&&(t=__("画板#lower_case")),t},z.getTypeTextOfBook=function(e){var t=e;return"Book"===e?t=__("文档"):"Sheet"===e&&(t=__("表格")),t},z.getFormalTitle=function(e){return e.title},z.getDefaultTitle=L.a.getDefaultTitle;var V=function(e){var t=e.doc,r=e.showType,n=e.showAuthor,o=void 0===n||n,a=L.a.getDocShowAuthorOption(t);return o&&a!==v.SHOW_AUTHOR_OPTION.hide?"sheet"===r?s.a.createElement("div",{"data-testid":"doc-contributors-wrapper-sheet"},s.a.createElement("span",{className:"larkicon larkicon-user"}),s.a.createElement("span",{className:I.label},__("参与编辑：")," "),s.a.createElement(H,{doc:t,showAuthor:!0})):"doc"===r?s.a.createElement("div",{"data-testid":"doc-contributors-wrapper-doc",className:"meta-item"},s.a.createElement(u.a,{title:__("参与编辑")},s.a.createElement("span",{className:"author larkicon larkicon-user"})),s.a.createElement(H,{doc:t,showAuthor:o})):s.a.createElement(H,{doc:t,showAuthor:o}):null};V.propTypes={doc:d.a.object.isRequired,showAuthor:d.a.bool.isRequired,showType:d.a.oneOf(["sheet","doc"])};var H=function(e){var t=e.doc,r=L.a.getDocShowAuthorOption(t);if(r===v.SHOW_AUTHOR_OPTION.hide)return null;if(r===v.SHOW_AUTHOR_OPTION.custom_text){var n=L.a.getDocShowAuthorCustomText(t);return n?s.a.createElement("span",{"data-testid":"doc-contributors-custom-text"},n):null}var o=L.a.getDocContributors(t);if(!o||0===o.length)return null;var a=o.slice(0,3);return s.a.createElement("span",{"data-testid":"doc-contributors",className:"doc-contributors"},a.map((function(e,t){return e&&s.a.createElement("span",{key:e.id},s.a.createElement(w,{user:e,type:window.appData.organization?g.a.text:g.a.link,withCard:!0,className:I.popover}),t!==a.length-1&&__("、"))})),o.length>3&&s.a.createElement("span",null,__("等")))};H.propTypes={doc:d.a.object.isRequired};var q=function(e){var t=e.doc,r=e.hasDraftSign,n=z.getFormalTitle(t);return r&&0===t.status?s.a.createElement("span",{className:"doc-title",title:n},s.a.createElement("span",{className:"doc-title-draft"},"[",__("草稿"),"]"),n):s.a.createElement("span",{className:"doc-title",title:n},n)};q.propTypes={hasDraftSign:d.a.bool,doc:d.a.object};var K=function(e){var t=e.title;return s.a.createElement("h1",{id:"article-title",className:h()(I.articleTitle,"doc-article-title")},t)},Y=function(e){return"YUQUE_TEMPLATE"===e.tag?s.a.createElement(c.a,{className:"doc-template-tag"},__("模板")):null},$=function(e){var t=e.doc;return t.content_updated_at&&t.content_updated_at!==t.created_at?s.a.createElement("span",{className:"doc-time"},__("更改于"),s.a.createElement(b.a,{time:new Date(t.content_updated_at)})):s.a.createElement("span",{className:"doc-time"},__("创建于"),s.a.createElement(b.a,{time:new Date(t.created_at)}))},Z=function(e){var t=e.doc,r=t[e.showBy]||t.content_updated_at;return s.a.createElement("span",{className:"doc-time"},s.a.createElement(b.a,{time:new Date(r)}))},J=function(){return s.a.createElement("div",{className:"doc-draft-tip-content"},s.a.createElement("p",null,__("有内容未更新，请去编辑页更新")))},X=function(e){var t=e.doc,r=e.className;return t.content_modified?"Sheet"===t.type||"Table"===t.type?s.a.createElement("div",{className:r,title:__("当前展示不是最新版本，可点击编辑按钮查看最新内容，并进行发布或更新")},s.a.createElement(_.b,{name:"doc-has-new-content",height:18,width:18}),s.a.createElement("p",null,__("当前展示不是最新版本，可点击编辑按钮查看最新内容，并进行发布或更新"))):s.a.createElement(k,{style:{marginBottom:"Doc"===t.type?24:0},icon:s.a.createElement(_.b,{name:"edit-border",height:18,width:18}),content:s.a.createElement(J,{doc:t}),showClose:"Doc"===t.type}):null};X.propTypes={doc:d.a.object.isRequired,className:d.a.string};d.a.object.isRequired;var Q=function(e){var t=e.doc,r=e.url,n=e.target,o=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp||window.appData.isYuqueMobileApp?"_blank":"_self";return s.a.createElement("a",{href:r,target:n||o,className:"doc-link"},s.a.createElement(q,{doc:t}))};Q.propTypes={doc:d.a.object,url:d.a.string,target:d.a.string};var ee=function(e){var t=e.organization,r=e.doc,n=e.book,o=e.group,a=e.getPopupContainer,i=e.placement,c=void 0===i?"top":i;if(window.appData.sharePage)return null;if(null==r||!r.id)return null;if(n){var l=Object(P.d)({type:"doc",target:r,group:o,book:n});return s.a.createElement(u.a,{title:Object(P.e)(l,"doc",t),getPopupContainer:a,placement:c},s.a.createElement("span",{className:"doc-access-scope"},s.a.createElement(_.b,{name:l===y.PRIVACY.private?"permission-private":"icon-public",width:14})))}return null},te=function(e){return s.a.createElement(C.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return s.a.createElement("span",{"data-test-id":"doc-access-scope"})}},s.a.createElement(ee,e))};te.propTypes={group:d.a.object.isRequired,book:d.a.object.isRequired,doc:d.a.object.isRequired,organization:d.a.object,getPopupContainer:d.a.func,placement:d.a.string};var re=function(e){var t=e.doc,r=e.withTip,n=void 0===r||r;if(0!==t.status)return null;var o=s.a.createElement("div",{className:"doc-draft-tip",style:{width:"360px"}},s.a.createElement(J,{doc:t})),a=s.a.createElement(c.a,{className:"doc-draft-tag","data-testid":"doc-draft-tag",onClick:function(e){e.stopPropagation(),e.preventDefault()}},t.published_at?__("未更新"):__("未发布"));return n?s.a.createElement(i.a,{placement:"bottomLeft",content:o},a):a};re.displayName="LarkDocStatus";var ne=function(e){var t=e.doc,r=e.group,n=e.book;if(Object(P.d)({type:"doc",target:t,group:r,book:n})!==y.PRIVACY.private){var o=Object(T.a)(t,"DOC",r,n);return s.a.createElement(c.a,{className:"doc-share-tag"},s.a.createElement("a",{href:o.url,target:"_blank"},__("分享中")))}return null},oe=function(e){return s.a.createElement(C.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return s.a.createElement("span",{"data-test-id":"doc-ShareLink-tag"})}},s.a.createElement(ne,e))};oe.propTypes={group:d.a.object.isRequired,book:d.a.object.isRequired,doc:d.a.object.isRequired},oe.displayName="LarkShareLink";var ae=function(e){var t=e.doc,r=e.size,n=void 0===r?{}:r,o=e.placeholder,a=t.cover||o;return a?s.a.createElement("div",{style:{width:"100%",height:"100%",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:'url("'.concat(Object(O.a)(a,B({},n)),'")')}}):s.a.createElement(_.b,{name:t.type.toLowerCase(),width:48})},ie=function(e){var t=e.doc,r=e.highlightUsers;if(L.a.getDocShowAuthorOption(t)===v.SHOW_AUTHOR_OPTION.hide)return s.a.createElement("span",{className:"info-not-show-creator"},__("不显示作者"));var n=L.a.getDocContributors(t);return n?(Array.isArray(n)||(n=[n]),s.a.createElement(u.a,{title:function(){return n.map((function(e){return e.name})).join("、")}},s.a.createElement("span",null,n.reduce((function(e,t,n){return null!=r&&r.includes(String(t.id))?(e.unshift.apply(e,[s.a.createElement("a",{href:"/".concat(t.login)},s.a.createElement("b",null,t.name)),"、"]),e):(e.push.apply(e,[s.a.createElement("a",{href:"/".concat(t.login)},t.name),"、"]),e)}),[]).slice(0,-1)))):null},ce=function(e){var t=e.belongs,r=e.onChange,n=e.overlayClassName,o=e.overlayPlacement;function i(e){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=M(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.text||(n.text=n.label,n.label=s.a.createElement("span",{className:I.belongMenuLabel},s.a.createElement(m.a,null),s.a.createElement("span",null,n.label)),n.children&&n.children.length&&i(n.children))}}catch(e){r.e(e)}finally{r.f()}return e}var c=R(s.a.useState(""),2),u=c[0],l=c[1],f=R(s.a.useState(D(t)),2),d=f[0],p=f[1];s.a.useEffect((function(){p(i(D(t)))}),[t]);return!d||d.length<=1?s.a.createElement("span",{className:I.belongText},u||__("归属")):s.a.createElement(a.a,{defaultValue:[null],popupClassName:h()(I.belongMenuOverlay,n),popupPlacement:o||"bottomLeft",options:d,onChange:function(e,t){r(e),e&&e[0]?l(t.map((function(e){return e.text})).join(" / ")):l("")},changeOnSelect:!0},s.a.createElement("span",{className:I.belongMenu},s.a.createElement("span",{className:I.belongText},u||__("归属")),s.a.createElement(_.b,{name:"arrow-down",width:16})))};ce.propTypes={belongs:d.a.array.isRequired,onChange:d.a.func.isRequired,overlayClassName:d.a.string,overlayPlacement:d.a.string};var ue=function(e){var t=e.current,r=e.onChange,a=e.overlayClassName,i=e.overlayPlacement,c=[{name:__("所有"),value:""},{name:__("文档"),value:"Doc"},{name:__("表格"),value:"Sheet"},{name:__("画板"),value:"Board"},{name:__("数据表"),value:"Table"}];t||(t="");var u=c.find((function(e){return e.value===t}));return s.a.createElement(n.a,{trigger:"click",placement:i||"bottomLeft",overlay:s.a.createElement(o.a,null,c.map((function(e){return s.a.createElement(o.a.Item,{key:e.value,onClick:function(){r(e.value)}},t===e.value&&s.a.createElement(m.a,null),e.name)}))),overlayClassName:a},s.a.createElement("span",null,u.value?u.name:__("类型")," ",s.a.createElement(_.b,{name:"arrow-down",width:16})))};ue.propTypes={current:d.a.string.isRequired,onChange:d.a.func.isRequired,overlayClassName:d.a.string,overlayPlacement:d.a.string}},1333:function(e,t,r){"use strict";r(92);var n=r(45),o=(r(63),r(23)),a=r(0),i=r.n(a),c=r(106),u=r.n(c),l=r(1181),s=r.n(l),f=r(84),d=r.n(f),p=r(46),h=r(54),m=r.n(h),v=r(1343),y=r(44),b=r(264),g=r(771),w=r(964),_=r(134);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function E(){E=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(P([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==O(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==O(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===O(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){k(a,n,o,i,c,"next",e)}function c(e){k(a,n,o,i,c,"throw",e)}i(void 0)}))}}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var L=u()("doc:useDocAction"),A=window.appData.isYuqueMobileApp,I=function(e,t,r){if(window.__engine&&window.__engine.execCommand)return window.__engine[e](t,r)},N=m()((function(e){I("execCommand","defaultFontsize",e),I("execCommand","clearDefaultFontsize")}),200),D=m()((function(e){I("execCommand","paragraphSpacing",e)}));t.a=function(e){var t=e.book,r=e.doc,c=e.commandParams,u=e.dispatch,l=e.onCommandsExecuted,f=e.onSelectTemplate,h=e.onCreateDoc,m=C(Object(a.useState)(null),2),O=m[0],S=m[1],j=C(Object(a.useState)(!1),2),k=j[0],T=j[1],R=C(Object(a.useState)(!1),2),M=R[0],F=R[1],G=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return I("queryCommandValue","defaultFontsize",e)},B=C(Object(a.useState)(I("queryCommandValue","typography")),2),U=B[0],z=B[1],W=C(Object(a.useState)(G(!1)),2),V=W[0],H=W[1],q=C(Object(a.useState)(I("queryCommandValue","paragraphSpacing")),2),K=q[0],Y=q[1],$=function(){S(null)},Z=function(){var e=P(E().mark((function e(){var r,n,a,i,u,l,s=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x(x({},r=s.length>0&&void 0!==s[0]?s[0]:{}),c),n=r.slug||b.a.createSlug(),r.slug=n,r.book_id=t.id,r.format||(r.format=v.a.getDefaultDocumentFormat(r.type)),a=null,window.location.pathname.endsWith("/edit")&&(a=window.open("/creating?book_id=".concat(t.id,"&slug=").concat(n),"_blank")),e.prev=8,e.next=11,b.a.createDoc(r);case 11:if(i=e.sent,L("doc created",{cmd:O,doc:i}),u="/".concat(t.namespace,"/").concat(i.slug,"/edit"),l=new URL(u,window.location.origin),a=a||window,"doc_toc"===r.create_from&&l.searchParams.set("toc_node_uuid",r.toc_node_uuid),$(),!h){e.next=21;break}return h(i),e.abrupt("return");case 21:a.location.href=l.href,e.next=27;break;case 24:e.prev=24,e.t0=e.catch(8),"limit_exceeded"===e.t0.code?o.a.error(e.t0.message):e.t0.code!==p.LIMIT_RULE_CODE.max_doc_note_number&&a&&a.close();case 27:return e.prev=27,a=null,e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[8,24,27,30]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=__("确认删除 {title}？",{title:r.title});n.a.confirm({title:e,content:__(""),onOk:function(){u({type:"proxy.web/docs.destroy",payload:{data:{id:r.id}}}).then((function(e){l({cmd:y.a.DOC.delete.cmd,result:e})}))}})},X=Object(w.a)(),Q=X.loadTemplateSelector,ee=X.showTemplateSelector,te=X.contextHolder,re=function(){var e=P(E().mark((function e(){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee({book:t});case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",$());case 5:return e.abrupt("return",Object(g.e)(t,r,c));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(n,a){var i=c;switch(L("exec",{cmd:n,params:i}),S(n),n){case y.a.DOC.delete.cmd:J();break;case y.a.DOC.print.cmd:window.print();break;case y.a.DOC.fullscreen.cmd:case y.a.DOC.exit_fullscreen.cmd:s.a.enabled?s.a.toggle():o.a.error(__("你的浏览器不支持全屏功能"));break;case y.a.DOC.raw.cmd:window.location.href="".concat(window.location.pathname.replace(/\/+$/,""),"/html");break;case y.a.DOC.view_markdown.cmd:window.location.href="".concat(window.location.pathname.replace(/\/+$/,""),"/markdown");break;case y.a.DOC.presentation.cmd:window.open("".concat(window.location.pathname.replace(/\/+$/,""),"/present"));break;case y.a.DOC.create_doc.cmd:Z({type:"Doc",format:d.a.FORMAT.LAKE,title:i.title,slug:i.slug});break;case y.a.DOC.create_doc_template.cmd:Z({title:__("自定义模板"),type:d.a.TYPE.DOC,format:d.a.FORMAT.LAKE,tag:"YUQUE_TEMPLATE"});break;case y.a.DOC.create_from_template.cmd:f&&f(),re();break;case y.a.DOC.create_markdown.cmd:Z({type:"Doc",format:d.a.FORMAT.MARKDOWN,title:i.title,slug:i.slug});break;case y.a.DOC.create_sheet.cmd:Z({type:"Sheet",title:i.title,slug:i.slug});break;case y.a.DOC.create_mind.cmd:case y.a.DOC.create_board.cmd:Z({type:"Board",title:i.title,slug:i.slug});break;case y.a.DOC.create_table.cmd:Z({type:"Table",title:i.title,slug:i.slug});break;case y.a.DOC.create_thread.cmd:window.location.href="/".concat(t.namespace,"/new");break;case y.a.DOC.edit.cmd:var p="/".concat(t.namespace,"/").concat(r.slug,"/edit");A?_.a.pushWebWindow({url:"".concat(window.location.origin).concat(p)}):window.location.href=p;break;case y.a.DOC.manage_table.cmd:case y.a.DOC.manage_doc.cmd:window.location.href="/".concat(t.namespace,"/toc?tempStore=1");break;case y.a.DOC.modify_toc.cmd:window.location.href="/".concat(t.namespace,"/toc?from=").concat(r.slug);break;case y.a.DOC.exit.cmd:window.location.href="/dashboard";break;case y.a.DOC.archive.cmd:u({type:"proxy.web/docs.archive",payload:{data:{id:r.id}}}).then((function(e){o.a.success(__("话题已归档")),l({cmd:y.a.DOC.archive.cmd,result:e})}));break;case y.a.DOC.unarchive.cmd:u({type:"proxy.web/docs.unarchive",payload:{data:{id:r.id}}}).then((function(e){o.a.success(__("已取消归档")),l({cmd:y.a.DOC.unarchive.cmd,result:e})}));break;case y.a.DOC.pin.cmd:u({type:"proxy.web/docs.pin",payload:{data:{id:r.id}}}).then((function(e){o.a.success(__("置顶成功")),l({cmd:y.a.DOC.pin.cmd,result:e})}));break;case y.a.DOC.unpin.cmd:u({type:"proxy.web/docs.unpin",payload:{data:{id:r.id}}}).then((function(e){o.a.success(__("已取消置顶")),l({cmd:y.a.DOC.unpin.cmd,result:e})}));break;case y.a.DOC.send_mail.cmd:T(!0);break;case y.a.DOC.document_layout_select.cmd:case y.a.DOC.document_layout.cmd:!function(e){I("execCommand","layout",e)}(a);break;case y.a.DOC.document_typography.cmd:!function(e){z(e),I("execCommand","typography",e),G()||H(G(!1))}(a);break;case y.a.DOC.document_fontsize.cmd:!function(e){H(e),N(e)}(a);break;case y.a.DOC.document_paragraph_spacing.cmd:!function(e){Y(e),D(e)}(a);break;default:e.onCommandsExecuted({cmd:n})}};return i.a.useEffect((function(){O&&(null==O?void 0:O.cmd)===y.a.DOC.create_from_template.cmd&&Q()}),[O]),i.a.useEffect((function(){window.__execAction=function(t,r){[y.a.DOC.history.cmd,y.a.DOC.save_published_as_version.cmd,y.a.DOC.save_editing_as_version.cmd].includes(t)&&(ne(t,r),e.onSelect({key:t}))}}),[]),{cmd:O,sendAlimail:k,mailSending:M,typography:U,defaultFontSize:V,paragraphSpacing:K,reset:$,doAction:ne,setSendAlimail:T,setMailSending:F,getEditorLayout:function(){return I("queryCommandValue","layout")},getWordCount:function(){return I("queryCommandValue","wordCount")},contextHolder:te}}},1335:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(9),i=r.n(a),c=r(252),u=r(162),l=r(352);t.a=function(e){var t=window.appData.isPublicCloud,r=e.group,n=e.size,a=e.showOrgLabel,s=void 0!==a&&a,f=e.iconSize,d=e.radius,p=null==r?void 0:r.organization,h=l.b.getName("User",r);return o.a.createElement("div",{className:"group-avatar",style:{width:"".concat(n,"px"),height:"".concat(n,"px")}},t&&s&&p&&o.a.createElement("span",{className:"lock"},o.a.createElement(u.b,{src:p.logo,size:n>32?20:13,radius:100})),r?o.a.createElement(c.a,{src:r.avatar||r.avatar_url||r.avatarUrl,size:n,className:i()({"group-type-default":"group-type-default"===h}),name:r.name,icon:h,iconSize:f||Math.floor(.9*n),radius:d}):o.a.createElement("span",{className:"default-group-avatar"},o.a.createElement("span",{className:"larkicon larkicon-group-avatar"})))}},1339:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));r(103);var n=r(60),o=r(0),a=r.n(o),i=r(18),c=r(30),u=r(163),l=r(205),s=["group","size","placement","getPopupContainer"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=function(e){var t=e.group,r=e.size,o=e.placement,l=e.getPopupContainer,p=d(e,s);o=o||"top",r=r||14;var h=Object(u.d)({type:"group",target:t,group:t});return a.a.createElement(n.a,{title:Object(u.e)(h,"group"),getPopupContainer:l,placement:o},a.a.createElement(c.b,f({},p,{className:"name-lock",name:h===i.PRIVACY.private?"permission-private":"icon-public",width:r})))},h=function(e){return a.a.createElement(l.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement("span",{"data-test-id":"group-access-scope"})}},a.a.createElement(p,e))}},1340:function(e,t,r){"use strict";r(1388);var n=r(394),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(9),l=r.n(u),s=r(69),f=r.n(s);r(1508);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var p=["className","title"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}function b(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var g=a.a.forwardRef((function(e,t){var r=e.className,o=e.title,i=b(e,p),c={},u=l()("larkui-skeleton",r);return o?(o.size&&(u=l()(u,{"larkui-skeleton-title-sm":"sm"===o.size})),o.width&&(c.title={width:o.width})):c.title=o,a.a.createElement(n.a,y({className:u,ref:t},c,i))}));g.propTypes=m(m({},n.a.SkeletonProps),{},{className:c.a.string}),f()(g,n.a),t.a=g},1341:function(e,t,r){"use strict";r(63);var n=r(23),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(570),l=r(981),s=r(777),f=r(893),d=r(75),p=r.n(d),h=r(962),m=r.n(h),v=r(33),y=r(85),b=r(299);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(){O=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(P([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==g(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function E(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){E(a,n,o,i,c,"next",e)}function c(e){E(a,n,o,i,c,"throw",e)}i(void 0)}))}}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var o=T(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return P(this,r)}}function P(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function L(e,t,r){return(t=A(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g(t)?t:String(t)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(a,e);var t,r,n,o=k(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),L(C(t=o.call(this,e)),"enableDepthAll",(function(){return!1})),L(C(t),"getIconUrl",(function(){var e=window.appData,t=e.isYuque,r=e.corp,n=e.organization,o={buc:"https://gw.alipayobjects.com/zos/bmw-prod/8d7f7670-2c26-4ba5-bb0f-fb124e7f9fc8.svg",dingtalk:"https://gw.alipayobjects.com/zos/bmw-prod/4c033358-95df-4e2a-b468-89fe697fc03d.svg",wechat:"https://gw.alipayobjects.com/zos/bmw-prod/8f2f3dae-cc7c-455c-9579-ed042085da7d.svg"};return t?r?o[r.type]:n&&n.logo:o.buc})),L(C(t),"getInitData",S(O().mark((function e(){var r,n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.mine.department({self:!0});case 2:if((n=e.sent)&&0!==n.length){e.next=9;break}return e.next=6,t.getTopData();case 6:r=e.sent,e.next=10;break;case 9:r=t.getData(n[n.length-1]);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))),L(C(t),"fetchCache",function(){var e=S(O().mark((function e(r,n){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cacheFetch[r]){e.next=5;break}return e.next=4,n();case 4:t.cacheFetch[r]=e.sent;case 5:return e.abrupt("return",p()(t.cacheFetch[r]));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),L(C(t),"getData",S(O().mark((function e(){var r,n,o,a,i,c,u,l=arguments;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>0&&void 0!==l[0]?l[0]:{},n={},o=r.id,!r.getTop){e.next=9;break}return e.next=6,t.getTopData();case 6:return a=e.sent,n.users=t.adpatUIListData(a),e.abrupt("return",n);case 9:if(!(t.enableDepthAll()&&t.isDepartment(r))&&!t.cacheDepthRes[o]){e.next=15;break}return e.next=13,t.getDataWithDepth(r);case 13:return i=e.sent,e.abrupt("return",i);case 15:return c={id:o},e.next=18,t.fetchCache(o,S(O().mark((function e(){var t;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.users.department(c);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))));case 18:return(u=e.sent).parents&&u.parents.forEach((function(e){e&&(t.cacheParent[e.id]=e)})),n=t.serialize(u),t.cacheDeps[o]=n,e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))),L(C(t),"getDataWithDepth",S(O().mark((function e(){var r,n,o,a,i,c,u,l=arguments;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>0&&void 0!==l[0]?l[0]:{},n=r.id,o={id:n,depth:"all"},a=p()(t.cacheDepthRes),a[n]){e.next=12;break}return e.next=8,v.a.users.department(o);case 8:i=e.sent,t.cacheDepthRes=p()(_(_({},t.cacheDepthRes),i)),e.next=13;break;case 12:i=p()(a);case 13:return t.includeUserCount(i),(c=Object.keys(i)).forEach((function(e){var r=i[e].parent;r&&(t.cacheParent[e]=r)})),c.forEach((function(e){var r=i[e];r.parent=t.cacheParent[e],t.cacheDeps[e]=t.serialize(r)})),u=t.cacheDeps[n],r.name&&(u._name=r._name||r.name,u.name="".concat(u._name," (").concat(u.user_count,")")),e.abrupt("return",u);case 20:case"end":return e.stop()}}),e)})))),L(C(t),"adpatUIListData",(function(e){return e.map((function(e){var r=t.cacheDeps[e.id];t.setUid(e);var n={uid:e.uid,id:e.id,avatar_url:e.avatar_url,name:e.name,_name:e._name||e.name,user_id:e.user_id,work_id:e.work_id,login:e.login,type:e.type||"User",provider_type:e.provider_type,provider_userid:e.provider_userid,iconName:e.iconName,isTop:e.isTop,lastName:e.lastName};return r&&"user_count"in r&&(n.user_count=r.user_count,n.name="".concat(n._name," (").concat(n.user_count,")")),!e.isTop&&t.isDepartment(e)?n.sub=e:e.manageDepartment&&(n.sub=e.manageDepartment),n}))})),L(C(t),"adpatUINavData",(function(e){if(e){var r=[];if(Array.isArray(e))r=e;else{r.push(e);!function e(n){if(n.parentDepId){var o=t.cacheParent[n.parentDepId];if(!o)return;Array.isArray(o)?r=o.concat(r):(r.unshift(o),e(o))}}(e)}return r.map((function(e){return e.manageDepartment?{uid:"nav_".concat(e.manageDepartment.id),id:e.manageDepartment.id,name:e.manageDepartment.name,type:"Department"}:{uid:"nav_".concat(e.id),id:e.id,name:e.name,type:"Department"}}))}})),L(C(t),"getTopData",S(O().mark((function e(){var t,r,n,o,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.mine.department({self:!0});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return t=e.t0,window.appData.isYuque||(o=[],0===(null===(r=window.appData.me)||void 0===r?void 0:r.zone_id)&&(o=[{id:"12503",name:__("阿里巴巴"),iconName:"organization",type:"Department"}]),1===(null===(n=window.appData.me)||void 0===n?void 0:n.zone_id)&&(o=[{id:"8430",name:__("蚂蚁金服"),iconName:"organization",type:"Department"},{id:"134318",name:__("网商银行"),iconName:"organization",type:"Department"}]),(a=t[0])&&(a.iconName="department",a.type="Department",o.push(a)),t=o),t=t.map((function(e){return e.isTop=!0,e.type="Department",e})),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))),L(C(t),"getAllDepUsers",function(){var e=S(O().mark((function e(r){var n,o,a,i,c,u,l;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.id,!(o=t.cacheDeps[n])){e.next=4;break}return e.abrupt("return",o);case 4:return e.next=6,v.a.user.searchAllDepUsers({id:n});case 6:for(a=e.sent,i=Object.keys(a.data),c=0,u=i;c<u.length;c++)l=u[c],t.cacheDeps[l]=a.data[l];return e.abrupt("return",a.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L(C(t),"getDepUsers",function(){var e=S(O().mark((function e(r){var n,o,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.id,!(o=t.cacheDeps[n])){e.next=4;break}return e.abrupt("return",o);case 4:return e.next=6,v.a.user.userServices.searchDepUsers({id:n});case 6:return a=e.sent,t.cacheDeps[n]=a.data,e.abrupt("return",a.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L(C(t),"getRealUsers",(function(e){return m()(e,"uid")})),t.cacheDeps={},t.cacheParent={},t.cacheFetch={},t.cacheDepthRes={},t.enable=!1,t}return t=a,r=[{key:"check",value:function(){y.a.enableAddressbook()&&!y.a.enableContacts()&&(this.enable=!0)}},{key:"includeUserCount",value:function(e){var t=this;Object.keys(this.cacheDeps).forEach((function(e){t.cacheDeps[e].user_count=0})),Object.keys(e).forEach((function(r){var n=e[r];if(!Array.isArray(n)){if(n.user_count=(n.user_count||0)+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.users.filter((function(e){return"user"===e.type}));if(!e.depthUsers||!e.depthUsers.length)return t.length;var r=e.depthUsers.reduce((function(e,t){return e[t.uid]=t,e}),{});return t.filter((function(e){return!r[e.uid]})).length}(n),n.parent){var o=e[n.parent.parentDepId]||t.cacheDeps[n.parent.parentDepId];o&&(o.user_count=(o.user_count||0)+n.user_count,o.depthUsers=(o.depthUsers||[]).concat(n.users.filter((function(e){return t.isUser(e)}))),e[n.parent.parentDepId]=o,t.cacheDeps[n.parent.parentDepId]=o)}t.cacheDeps[r]=n}}))}}],n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],r&&x(t.prototype,r),n&&x(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(b.a);L(I,"id","addrbook"),L(I,"title",__("组织架构")),L(I,"iconName","architecture");var N=I;function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function R(){R=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==D(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function M(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function F(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){M(a,n,o,i,c,"next",e)}function c(e){M(a,n,o,i,c,"throw",e)}i(void 0)}))}}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K(n.key),n)}}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=H(e);if(t){var o=H(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}function W(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return V(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function q(e,t,r){return(t=K(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K(e){var t=function(e,t){if("object"!==D(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===D(t)?t:String(t)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(a,e);var t,r,n,o=z(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return G(this,a),q(V(e=o.call(this,t)),"getIconUrl",(function(){return e.organization.logo})),q(V(e),"getInitData",F(R().mark((function t(){var r;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),q(V(e),"getData",F(R().mark((function t(){var r,n;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cache){t.next=2;break}return t.abrupt("return",e.cache);case 2:return t.next=4,v.a.organizationUsers.find({organization_id:e.organization.id,user_role:2,status:1,offset:0,limit:500});case 4:return r=t.sent,n=e.serialize({users:r}),e.cache=n,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))),q(V(e),"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.organization=t.organization||window.appData.organization,e}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){this.organization&&this.organization.abilities&&this.organization.abilities.read||(this.enable=!1)}}])&&B(t.prototype,r),n&&B(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(b.a);q(Y,"id","outsourcer"),q(Y,"title",__("外部联系人")),q(Y,"iconName","external-contacts");var $=Y;function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function J(){J=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Z(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function X(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Q(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){X(a,n,o,i,c,"next",e)}function c(e){X(a,n,o,i,c,"throw",e)}i(void 0)}))}}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ue(n.key),n)}}function re(e,t){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},re(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ie(e);if(t){var o=ie(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return oe(this,r)}}function oe(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ae(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function ce(e,t,r){return(t=ue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ue(e){var t=function(e,t){if("object"!==Z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Z(t)?t:String(t)}var le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(a,e);var t,r,n,o=ne(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ee(this,a),ce(ae(e=o.call(this,t)),"getIconUrl",(function(){return e.organization.logo})),ce(ae(e),"getInitData",Q(J().mark((function t(){var r;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),ce(ae(e),"getData",Q(J().mark((function t(){var r,n;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cache){t.next=2;break}return t.abrupt("return",e.cache);case 2:return t.next=4,v.a.organizationUsers.find({organization_id:e.organization.id,user_role:"0,1",status:1,offset:0,limit:500});case 4:return r=t.sent,n=e.serialize({users:r}),e.cache=n,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))),ce(ae(e),"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.organization=t.organization||window.appData.organization,e.cache=null,e}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){this.organization&&this.organization.abilities&&this.organization.abilities.read&&!y.a.enableContacts()||(this.enable=!1)}}])&&te(t.prototype,r),n&&te(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(b.a);ce(le,"id","orgMember"),ce(le,"title",__("空间成员"));var se=le,fe=r(95),de=r(879),pe=r(158);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function me(){me=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==he(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function ve(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function ye(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ve(a,n,o,i,c,"next",e)}function c(e){ve(a,n,o,i,c,"throw",e)}i(void 0)}))}}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,je(n.key),n)}}function we(e,t){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},we(e,t)}function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Se(e);if(t){var o=Se(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Oe(this,r)}}function Oe(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ee(e)}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Se(e)}function xe(e,t,r){return(t=je(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e){var t=function(e,t){if("object"!==he(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==he(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===he(t)?t:String(t)}var ke=pe.memberSelectorType.SIMPLE_WITH_ROLE,Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&we(e,t)}(a,e);var t,r,n,o=_e(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return be(this,a),xe(Ee(e=o.call(this,t)),"getIconUrl",(function(){return e.group.avatar_url})),xe(Ee(e),"getIconName",(function(){return e.group.name})),xe(Ee(e),"getFilterRoles",(function(){var t=Object(de.c)("group");return t.unshift(e.allRoleObj),t})),xe(Ee(e),"getInitData",ye(me().mark((function t(){var r;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),xe(Ee(e),"getData",ye(me().mark((function t(){var r,n,o,a,i,c=arguments;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=c.length>0&&void 0!==c[0]?c[0]:{},n="role_".concat(r.role),!e.cache[n]){t.next=4;break}return t.abrupt("return",e.cache[n]);case 4:return o={id:e.group.id,offset:0,limit:500},"role"in r&&(o.role=r.role),t.next=8,v.a.groups.users(o);case 8:return a=t.sent,i=e.serialize({users:a}),e.cache[n]=i,t.abrupt("return",i);case 12:case"end":return t.stop()}}),t)})))),xe(Ee(e),"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.group=t.group||window.appData.group,e.cache={},e.allRoleObj={key:-1,label:__("全部")},e}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){this.group&&this.group.abilities&&this.group.abilities.read&&this.type!==ke||(this.enable=!1)}}])&&ge(t.prototype,r),n&&ge(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(b.a);xe(Pe,"id","groupuser"),xe(Pe,"title",fe.a.isPublication(window.appData.group)?__("知识小组成员"):__("团队成员")),xe(Pe,"iconName","nav-team1");var Ce=Pe,Te=r(80),Le=r(433);function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,De(n.key),n)}}function Ne(e,t,r){return(t=De(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e){var t=function(e,t){if("object"!==Ae(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ae(t)?t:String(t)}var Re=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ne(this,"getUploadProps",(function(){return{name:"file",action:r.action,headers:{"x-csrf-token":Object(Le.a)(window,!0)},onChange:function(e){var t=this;if("done"===e.file.status){var r=e.file.response.data;n.a.success(__("通过 {mobiles} 手机号码成功邀请 {members} 位注册用户，还有 {temp_members} 位用户没有注册语雀",{mobiles:r.mobiles,members:r.members,temp_members:r.temp_members})),setTimeout((function(){window.location.href=t.goto}),3e3)}else"error"===e.file.status&&n.a.error(e.file.response.message||"".concat(e.file.name," file upload failed."))}}})),Ne(this,"getBtnText",(function(){return r.btnText})),this.options=t,this.type=t.type,this.organization=t.organization,this.role=t.supportRoles&&t.supportRoles[0],this.target=t[this.type],this.enable=!1}var t,r,o;return t=e,o=[{key:"create",value:function(t){var r=new e(t);return r.check(),r.enable&&r.init(),r}}],(r=[{key:"init",value:function(){if("organization"===this.type){this.action="/api/organization_users/import?role=".concat(this.role,"&organization_id=").concat(this.organization.id);var e=this.role===Te.default.ROLE.outsourcer?"external":"all";this.goto="/r/organizations/dashboard/members?role=".concat(e),this.btnText=this.role===Te.default.ROLE.outsourcer?__("批量导入外部联系人"):__("批量导入空间成员")}}},{key:"check",value:function(){this.target&&this.target.enableAdvancedFeature&&(this.enable=!0)}}])&&Ie(t.prototype,r),o&&Ie(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();Ne(Re,"id","import"),Ne(Re,"title",__("导入"));var Me=Re,Fe=r(206);function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Be(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ue(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(){Ve=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ge(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function He(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function qe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){He(a,n,o,i,c,"next",e)}function c(e){He(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,et(n.key),n)}}function Ye(e,t){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ye(e,t)}function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Xe(e);if(t){var o=Xe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}function Ze(e,t){if(t&&("object"===Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Je(e)}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(e){return Xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xe(e)}function Qe(e,t,r){return(t=et(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e){var t=function(e,t){if("object"!==Ge(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ge(t)?t:String(t)}var tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}(a,e);var t,r,n,o=$e(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Qe(Je(t=o.call(this,e)),"getIconUrl",(function(){var e=window.appData.organization;return e&&e.logo})),Qe(Je(t),"enableDepthAll",(function(){return!0})),Qe(Je(t),"getInitData",qe(Ve().mark((function e(){var r,n,o,a,i,c,u,l,s,f,d;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.appData.organization,e.next=3,v.a.mine.department({self:!0},{useOriginResp:!0});case 3:if(n=e.sent,o={id:0,name:r.name,type:"Department",parents:[],getTop:!0},n.length)for(o=n[0],null!==(a=n[0])&&void 0!==a&&a.dept_full_path&&(o.parents=null===(c=n[0])||void 0===c?void 0:c.dept_full_path),u=null===(i=o)||void 0===i?void 0:i.parents.findIndex((function(e){return e.id===o.id})),u>=0&&o.parents.splice(u,1),l=0;l<(null===(s=o)||void 0===s||null===(f=s.parents)||void 0===f?void 0:f.length);l++)o.parents[l].parents=o.parents.slice(0,l);return e.next=8,t.getData(o);case 8:return d=e.sent,e.abrupt("return",d);case 10:case"end":return e.stop()}}),e)})))),Qe(Je(t),"fetchCache",function(){var e=qe(Ve().mark((function e(r,n){return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cacheFetch[r]){e.next=5;break}return e.next=4,n();case 4:t.cacheFetch[r]=e.sent;case 5:return e.abrupt("return",p()(t.cacheFetch[r]));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Qe(Je(t),"getDepUsers",function(){var e=qe(Ve().mark((function e(r){var n,o,a,i;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.id,o=r.organization_id,!(a=t.cacheDeps[n])){e.next=4;break}return e.abrupt("return",a);case 4:return e.next=6,v.a.departmentUser.find({department_id:n,organization_id:o,onlyMember:1});case 6:return i=e.sent,t.cacheDeps[n]=i.data,e.abrupt("return",i.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Qe(Je(t),"getData",qe(Ve().mark((function e(){var r,n,o,a,i,c,u,l,s,f=arguments;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>0&&void 0!==f[0]?f[0]:{},n=We({},r),r){e.next=4;break}return e.abrupt("return",[]);case 4:if(o=r.id,r.getTop&&(o=0),!t.cacheDeps[o]){e.next=8;break}return e.abrupt("return",t.cacheDeps[o]);case 8:return a=window.appData.organization,i=void 0===a?{}:a,e.next=11,v.a.departments.find({parent_id:o,depth:1,withMemberCount:1});case 11:if(c=e.sent,u=r.users){e.next=17;break}return e.next=16,v.a.departmentUser.find({department_id:o,organization_id:i.id,onlyMember:1});case 16:u=e.sent;case 17:return e.next=19,Promise.all(c.map(function(){var e=qe(Ve().mark((function e(t){return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.type="Department",t.parents=r.parents.concat(r),void 0!==t.member_count&&(t._name=t.name,t.name="".concat(t.name),t.login="(".concat(__("{num} 人",{num:t.member_count}),")"));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:l=Be(u);try{for(l.s();!(s=l.n()).done;)s.value.type="User"}catch(e){l.e(e)}finally{l.f()}return n.users=c.concat(u),n.parents=r.parents.concat(r),n._name||void 0===n.member_count||(n._name=n.name,n.name="".concat(n.name,"(").concat(__("{num} 人",{num:n.member_count}),")")),((n=t.serialize(n)).member_count||0===o)&&(t.cacheDeps[o]=n),e.abrupt("return",n);case 27:case"end":return e.stop()}}),e)})))),Qe(Je(t),"adpatUIListData",(function(e){return e.map((function(e){t.setUid(e);var r=t.isUser(e)&&void 0!==e.status&&e.status!==Te.STATUS.joined;t.disableDepSelect&&t.isDepartment(e)&&(r=!0);var n={uid:t.isDepartment(e)?"nav_".concat(e.id):e.uid,id:e.id,avatar_url:t.isUser(e)?e.avatar||"//gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png?x-oss-process=image%2Fresize%2Cm_fill%2Cw_64%2Ch_64%2Fformat%2Cpng":Fe.avatar.department,name:e.name,_name:e._name,user_id:e.user_id,login:e.login,type:e.type||"User",iconName:e.iconName,isTop:e.isTop,disabled:r,parents:e.parents,_login:e.login,users:e.users,organization_id:e.organization_id,member_count:e.member_count};return!e.isTop&&t.isDepartment(e)?n.sub=e:e.manageDepartment&&(n.sub=e.manageDepartment),n}))})),Qe(Je(t),"adpatUINavData",(function(e){if(e){var r=[];if(Array.isArray(e))r=e;else{r.push(e);!function e(n){if(n.parentDepId){var o=t.cacheParent[n.parentDepId];if(!o)return;Array.isArray(o)?r=o.concat(r):(r.unshift(o),e(o))}}(e)}return r.map((function(e){return{uid:"nav_".concat(e.id),id:e.id,name:e._name||e.name,type:"Department",parents:e.parents}}))}})),Qe(Je(t),"getUserCount",(function(e){var r,n=0,o=Be(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;t.isDepartment(a)?a.member_count&&(n+=a.member_count):n+=1}}catch(e){o.e(e)}finally{o.f()}return n})),Qe(Je(t),"getRealUsers",function(){var e=qe(Ve().mark((function e(r){var n,o,a,i,c,u,l;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],o=Be(r),e.prev=2,o.s();case 4:if((a=o.n()).done){e.next=22;break}if(i=a.value,!t.isDepartment(i)){e.next=19;break}if(!i.depthUsers&&!i.users){e.next=11;break}n=n.concat(i.depthUsers||i.users),e.next=17;break;case 11:return c=i.id,u=i.organization_id,e.next=14,v.a.departmentUser.getAllSubDepartmentUsers({department_id:c,organization_id:u});case 14:l=e.sent,t.setUid(l),n=n.concat(l);case 17:e.next=20;break;case 19:n.push(i);case 20:e.next=4;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),o.e(e.t0);case 27:return e.prev=27,o.f(),e.finish(27);case 30:return e.abrupt("return",m()(n,"uid"));case 31:case"end":return e.stop()}}),e,null,[[2,24,27,30]])})));return function(t){return e.apply(this,arguments)}}()),t.cacheDeps={},t.cacheParent={},t.cacheFetch={},t.cacheDepthRes={},t.enable=!1,t.disableDepSelect=e.disableDepSelect,t}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){y.a.enableContacts()&&(this.enable=!0)}}])&&Ke(t.prototype,r),n&&Ke(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(b.a);Qe(tt,"id","yuque_contacts"),Qe(tt,"title",__("组织架构")),Qe(tt,"iconName","architecture");var rt=tt,nt=r(167),ot=r(1348);function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach((function(t){ut(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ut(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==at(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===at(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return st(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return st(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ft=pe.memberSelectorType.ORGANIZATION,dt=pe.memberSelectorType.GROUP,pt=pe.memberSelectorType.BOOK,ht=pe.memberSelectorType.DOC,mt=pe.memberSelectorType.SIMPLE_WITH_ROLE,vt=pe.memberSelectorType.LIST,yt=pe.memberSelectorType.SIMPLE;var bt=a.a.forwardRef((function(e,t){var r=a.a.useRef(null),i=function(e,t){var r,i={type:e.type};e.organization&&(i.organization=e.organization),e.group&&(i.group=e.group),e.book&&(i.book=e.book),e.doc&&(i.doc=e.doc),e.list&&(i.list=e.list),e.role&&(i.supportRoles=[e.role]),e.members&&(i.members=e.members),e.disableDepSelect&&(i.disableDepSelect=e.disableDepSelect);var c,u=lt(Object(o.useState)(null),2),l=u[0],d=u[1],p=lt(Object(o.useState)(null),2),h=p[0],m=p[1],v=e.group&&"User"===e.group.type,y=Object(o.useMemo)((function(){return e.type===ft?null:N.create(i)}),[i]),b=Object(o.useMemo)((function(){return e.type===ft?null:rt.create(i)}),[i]),g=Object(o.useMemo)((function(){var t=ct(ct({},i),{},{dataSourceServices:[]});return y&&y.enable&&t.dataSourceServices.push(y),b&&b.enable&&t.dataSourceServices.push(b),e.type===mt&&(t.me=e.me),s.a.create(t)}),[i]),w=Object(o.useMemo)((function(){return f.a.create(i)}),[i]),_=Object(o.useMemo)((function(){return e.type===ft?null:$.create(i)}),[i]),O=Object(o.useMemo)((function(){return e.type===ft?null:se.create(i)}),[i]),E=Object(o.useMemo)((function(){return e.type===dt||e.type===ft?null:Ce.create(i)}),[i]),S=Object(o.useMemo)((function(){return e.type!==ft?null:Me.create(i)}),[i]),x=[],j=[];if(y&&y.enable&&(!e.disableSelectors||!e.disableSelectors.includes("addrbook"))){var k=null!=e.enableDepSelect?e.enableDepSelect:y.enableDepSelect();y.componentType="ListSelector",y.componentProps={id:N.id,title:N.title,iconName:N.iconName,getData:y.getData,getInitData:y.getInitData,getIconUrl:y.getIconUrl,getIconName:y.getIconName,enableDepthAll:y.enableDepthAll(),enableSelectNav:k,checkValid:g.checkValid,enableMemberTypeSwitch:!window.appData.isYuque},j.push(y)}if(!b||!b.enable||e.disableSelectors&&e.disableSelectors.includes("yuque_contacts_selector")||(b.componentType="ListSelector",b.componentProps={id:rt.id,title:rt.title,iconName:rt.iconName,getData:b.getData,getInitData:b.getInitData,getIconUrl:b.getIconUrl,getIconName:b.getIconName,enableDepthAll:b.enableDepthAll(),checkValid:g.checkValid,disableNavTop:!0},j.push(b)),O&&O.enable&&(O.componentType="ListSelector",O.componentProps={id:se.id,title:se.title,getData:O.getData,getInitData:O.getInitData,getIconUrl:O.getIconUrl,getIconName:O.getIconName,checkValid:g.checkValid},j.push(O)),_&&_.enable&&(_.componentType="ListSelector",_.componentProps={id:$.id,title:$.title,iconName:$.iconName,getData:_.getData,getInitData:_.getInitData,getIconUrl:_.getIconUrl,getIconName:_.getIconName,checkValid:g.checkValid},j.push(_)),E&&E.enable&&!v&&(E.componentType="ListSelector",E.componentProps={id:Ce.id,title:Ce.title,iconName:Ce.iconName,getData:E.getData,getInitData:E.getInitData,getIconUrl:E.getIconUrl,getIconName:E.getIconName,getFilterRoles:E.getFilterRoles,checkValid:g.checkValid},j.push(E)),w&&w.enable&&(w.componentType="InviteSelector",w.componentProps={id:f.a.id,title:f.a.title,inviteSelectorType:e.type,inviteTarget:e[e.type],group:e.group,organization:e.organization,roleSelectorType:"radio",getJoinUrl:w.getUrl,getToken:w.getToken,updateToken:w.updateToken,deleteTokens:w.deleteTokens,roles:w.validRoles,inviteRoles:h,getCopyText:w.getCopyText,tipContent:l,actionTipText:"book"===e.type?__("访问链接即可获得权限："):null,moreSettingOptions:w.getMoreSettingOptions(),toggleTitle:function(e){t&&t.current&&t.current.toggleTitle(e)}},x.push(w)),g&&g.enable){var P;window.appData.organization&&(P=a.a.createElement(ot.a,null));var C=e.roleSelector;g.componentType="SearchSelector",g.componentProps={id:s.a.id,title:s.a.title,searchUser:g.searchUser,getUserCount:g.getUserCount,checkValid:g.checkValid,onSubmit:g.submit,roles:g.validRoles,inviteRoles:h,quickSelectors:j,notFoundContent:P,actionTipText:"book"===e.type?__("权限："):null,roleSelector:C,getDefaultUsers:e.getDefaultUsers||g.searchUsersByIds,afterSubmit:e.afterSubmit},e.type===yt&&(g.componentProps.disableMeta=y.enableDepSelect(),g.componentProps.onSubmit=e.onSubmit),window.appData.isYuque||(g.componentProps.disableMeta=y.enableDepSelect()),e.type===mt&&(g.componentProps.title=e.title,g.componentProps.roles=e.roles,g.componentProps.onSubmit=e.onSubmit,e.initialValues&&(g.componentProps.initialValues=e.initialValues)),x.push(g)}return S&&S.enable&&(S.componentType="ImportSelector",S.componentProps={id:Me.id,title:Me.title,role:S.role,getUploadProps:S.getUploadProps,getBtnText:S.getBtnText},x.push(S)),Object(o.useEffect)((function(){w&&w.enable&&(window.appData.organization&&[dt,pt,ht].includes(e.type)&&w.orgDataReady().then((function(){d(a.a.createElement("div",null,a.a.createElement("span",null,w.getOrgTipText()),a.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/csb5nu",target:"_blank"},w.canPublic?__("关闭邀请空间外人员?"):__("邀请空间外成员?"))))})),w.getInviteAddRoles().then((function(e){m(e)})).catch((function(e){n.a.error(e.message)})))}),[]),null!==(r=e.organization)&&void 0!==r&&r.id||!Object(nt.a)()||[yt,mt,dt].includes(e.type)?c=s.a.id:[pt,ht,ft,vt].includes(e.type)&&(c=f.a.id),{selectors:x,quickSelectors:j,defaultTabKey:c,wideTabKey:s.a.id,addrbookSelectorBiz:y,searchSelectorBiz:g,inviteSelectorBiz:w,outsourcerSelectorBiz:_,orgMemberSelectorBiz:O,groupUserSelectorBiz:E,importSelectorBiz:S,yuqueContactsSelectorBiz:b}}(e,r),c=i.selectors,u=i.quickSelectors,d=i.defaultTabKey,p=i.wideTabKey,h=i.searchSelectorBiz;if(a.a.useImperativeHandle(t,(function(){return{searchSelectorBiz:h}}),[]),!c.length)return null;var m=c.map((function(e){var t=l.a[e.componentType];return t?(e.componentProps.quickSelectors&&(e.componentProps.quickSelectors=e.componentProps.quickSelectors.map((function(e){var t=l.a[e.componentType];return t?a.a.createElement(t,e.componentProps):null})).filter((function(e){return!!e}))),a.a.createElement(t,e.componentProps)):null})).filter((function(e){return!!e}));return a.a.createElement(l.a,{titleRef:r,selectors:m,getWidth:function(e){return e===p&&u&&u.length>0?720:420},defaultTabKey:d,onCancel:e.onCancel,onClose:e.onClose,visible:e.visible})}));bt.defaultProps={disableSelectors:[]},bt.propTypes={type:c.a.string,organization:c.a.object,role:c.a.oneOf([0,1,2]),onCancel:c.a.func,onClose:c.a.func,visible:c.a.bool,disableSelectors:c.a.array,disableDepSelect:c.a.bool};t.a=Object(u.d)((function(e){return{organization:e.organization,group:e.group,book:e.book,doc:e.doc,me:e.me}}),null,null,{forwardRef:!0})(bt)},1342:function(e,t,r){"use strict";var n=r(352);r.d(t,"b",(function(){return n.b})),r.d(t,"a",(function(){return n.a}))},1343:function(e,t,r){"use strict";var n=r(84),o=r.n(n),a={_bookGrayscaleConfig:null,getDefaultDocumentFormat:function(e,t,r){return t=t||"",r=r||{},o.a.DOC_DEFAULT_FORMAT[e]||o.a.FORMAT.LAKE}};t.a=a},1346:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={TEMPLATE_USAGE:"c100045.d210978"}},1348:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(30),i="OrgSearchNotFound-module_container_MlZtJ",c="OrgSearchNotFound-module_icon_oJoZx",u="OrgSearchNotFound-module_content_CgmVs",l="OrgSearchNotFound-module_goToContacts_mFsnK";t.a=function(e){var t,r=window.appData.organization;return o.a.createElement("div",{className:i},o.a.createElement("div",{className:c},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*lzOXRp21hVEAAAAAAAAAAAAAARQnAQ",width:80})),o.a.createElement("p",{className:u},__("空间内无相关搜索结果")),(null==r||null===(t=r.abilities)||void 0===t?void 0:t.destroy)&&o.a.createElement("a",{className:l,target:"_blank",href:"/r/organizations/dashboard/contacts"},__("管理空间通讯录"),o.a.createElement(a.b,{name:"arrow-right",size:16})))}},1352:function(e,t,r){"use strict";var n=r(0);t.a=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}},1354:function(e,t,r){"use strict";var n={number:function(e){return"number"!=typeof(e=Number(e))||e<1e3?e:"".concat((e/1e3).toFixed(1),"K")},maxNumber:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999;return"number"!=typeof e||e<=t?e:"".concat(t,"+")}};t.a=n},1355:function(e,t,r){"use strict";r(62);var n=r(21),o=(r(63),r(23)),a=r(0),i=r.n(a),c=r(2),u=r.n(c),l=r(33),s=r(446),f=r(1354),d="index-module_count_pDHQn";function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(){h=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function m(){}function v(){}var y={};u(y,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(P([])));g&&g!==t&&r.call(g,a)&&(y=g);var w=v.prototype=d.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==p(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function m(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=function(e){var t=v(Object(a.useState)(!1),2),r=t[0],c=t[1],u=v(Object(a.useState)(!1),2),p=u[0],y=u[1],b=e.me,g=e.user,w=e.onStatusChange,_=e.isPrimary,O=e.size,E=e.showCount,S=g.meta&&g.meta.is_followed,x=v(Object(a.useState)(null==g?void 0:g.followers_count),1)[0],j=function(){var e,t=(e=h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,l.a.actions.findOne({target_type:"User",target_id:t,action_type:"follow"},{ignoreGlobalMessage:!0});case 3:return r=e.sent,y(!1),e.abrupt("return",Boolean(r.actioned));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){m(a,n,o,i,c,"next",e)}function c(e){m(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();if(Object(a.useEffect)((function(){void 0===e.isFollowing?j(g.id).then(c):c(e.isFollowing)}),[e.isFollowing,g.id]),b.id===g.id)return null;var k=__("关注");return r&&(k=S?__("互相关注"):__("已关注")),i.a.createElement(n.a,{className:"btn-follow",type:!r&&_?"primary":"",disabled:p,onClick:function(){var e=r?"destroy":"create";y(!0),Object(s.a)("c62147",{action:e}),l.a.actions[e]({target_type:"User",target_id:g.id,action_type:"follow"}).then((function(){y(!1),o.a.success(r?__("已取消关注"):__("关注成功")),c(!r),w&&w(g.id,!r)})).catch((function(e){y(!1)}))},size:window.h5||"small"===O?"small":"default",style:e.style},i.a.createElement("span",null,k),E&&x>0&&i.a.createElement("span",{className:d},f.a.number(x)))};b.defaultProps={me:window.appData.me,showCount:!1},b.propTypes={me:u.a.object,size:u.a.string,user:u.a.object,onStatusChange:u.a.func,isFollowing:u.a.bool,showCount:u.a.bool};t.a=b},1357:function(e,t,r){"use strict";r(2258);var n=r(1266);r(1511);t.a=n.a},1359:function(e,t,r){"use strict";r(251);var n=r(116),o=(r(62),r(21)),a=(r(104),r(38)),i=(r(950),r(468)),c=(r(63),r(23)),u=r(0),l=r.n(u),s=r(2),f=r.n(s),d=r(9),p=r.n(d),h=r(30),m=r(198),v=r.n(m),y=r(996),b=r.n(y),g=r(125),w=r(167),_=r(141),O=r(984),E=(r(103),r(60)),S=(r(953),r(443)),x=(r(270),r(64)),j=r(33),k=r(342),P=r(169),C=r(117);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t=e.organization,r=e.panelType,n=e.panelTitle,o=e.state,a=e.moreSettingOptions,i=e.handleRoleTypeChange,c=e.handleMemberTypeChange,l=e.handleAllowOutsiderChange,s=e.handleCheckChange,f=e.onBack,d=T(u.useState(!1),2),m=d[0],v=d[1];u.useEffect((function(){!(!t||null==t||!t.id)&&j.a.organizations.getPermissions({id:t.id}).then((function(e){v(e.indirect_add_org_member)}))}),[t]);var y;return u.createElement("div",{className:C.a.shareDetailSettingPanel},u.createElement("div",{className:C.a.title,onClick:f},u.createElement(h.b,{className:C.a.backIcon,name:"arrow-down",width:20}),(y=n,"needCheckSet"===r?__("审批确认"):y)),function(e){switch(e){case"groupMemberSet":return r=k.a.action,n=k.a.desc,u.createElement(u.Fragment,null,u.createElement("p",{className:C.a.titleDesc},n),r.map((function(e){return u.createElement("div",{className:p()(C.a.contentArea,C.a.selectorItem),key:e.key,onClick:function(){i(e.value)}},u.createElement("span",null,e.label),o.roleType===e.value&&u.createElement(h.b,{className:C.a.selectorIcon,name:"check",width:16}))})));case"collaborationSet":return function(){var e=k.e.action,t=k.e[o.targetType.toUpperCase()];return u.createElement(u.Fragment,null,u.createElement("p",{className:C.a.titleDesc},t),e.map((function(e){return u.createElement("div",{className:p()(C.a.contentArea,C.a.selectorItem),key:e.key,onClick:function(){i(e.value)}},u.createElement("span",null,e.label),o.roleType===e.value&&u.createElement(h.b,{className:C.a.selectorIcon,name:"check",width:16}))})))}();case"allowOutsiderSet":return function(){var e,t=["Book","Doc"].includes(o.targetType)?k.g.descBookDoc:k.g.descGroup,r=x.a.Option;1===(null==a?void 0:a.length)?e=u.createElement("span",null,a[0].label):(null==a?void 0:a.length)>1&&(e=u.createElement(x.a,{defaultValue:o.memberType,bordered:!1,onChange:c},null==a?void 0:a.map((function(e){return u.createElement(r,{value:e.value},e.label)}))));var n=u.createElement("div",{className:C.a.contentArea},u.createElement("span",{className:C.a.switchTitle},k.g.action),u.createElement(S.a,{disabled:!m,onChange:l,checked:o.allowOutsider===P.ALLOW_OUTSIDER.ALLOW}));return u.createElement(u.Fragment,null,u.createElement("p",{className:C.a.titleDesc},t),u.createElement(E.a,{title:m?"":k.g.tip,placement:"bottomRight",autoAdjustOverflow:!0},n),(null==a?void 0:a.length)&&o.allowOutsider===P.ALLOW_OUTSIDER.ALLOW&&u.createElement("div",{className:C.a.selectOption},__("空间外人员将自动成为"),e))}();case"needCheckSet":return t=["Book","Doc"].includes(o.targetType)?k.i.descBookDoc:k.i.descGroup,u.createElement(u.Fragment,null,u.createElement("p",{className:C.a.titleDesc},t),u.createElement("div",{className:C.a.contentArea},u.createElement("span",{className:C.a.switchTitle},k.i.action),u.createElement(S.a,{onChange:s,checked:o.approve===P.APPROVE.need})));default:return null}var t,r,n}(r))},I=r(343),N=r(90),D=r(288),R=r.n(D),M=r(187),F=r(108),G=r(80),B=r(158);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function z(){z=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==U(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function W(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function q(e,t,r,n,o){if("get"===e)try{return JSON.parse(g.a.get("joinToken"))["".concat(t,"-").concat(r,"-").concat(n)]}catch(e){return null}if("save"===e){var a=JSON.parse(g.a.get("joinToken"))||{},i=Object.keys(a);20!==i.length||"".concat(t,"-").concat(r,"-").concat(n)in a||delete a[i[0]],a["".concat(t,"-").concat(r,"-").concat(n)]=v()(o,["role","approve","allow_outsider","organization_user_role"]),g.a.set("joinToken",JSON.stringify(a))}}function K(e){var t,r,n=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.isEditing;if(t)return e.getJoinUrl(t,r)},o=b()(e.inviteSelectorType),a=null===(t=e.inviteTarget)||void 0===t?void 0:t.id,i=q("get",o,a,e.inviteModalContent);r=e.inviteSelectorType===B.memberSelectorType.GROUP?F.ROLE.member:e.isEditing||"inviteModal"===e.inviteModalContent?M.ROLE.edit:M.ROLE.readonly;var u=V(l.a.useState(i?i.role:r),2),s=u[0],f=u[1],d=V(l.a.useState(i?i.allow_outsider:P.ALLOW_OUTSIDER.NORMAL),2),p=d[0],h=d[1],m=P.APPROVE.noneed,v=V(l.a.useState(i?i.approve:m),2),y=v[0],g=v[1],w=V(l.a.useState(),2),_=w[0],O=w[1],E=V(l.a.useState(!1),2),S=E[0],x=E[1],j=V(l.a.useState(i?i.organization_user_role:G.ROLE.member),2),k=j[0],C=j[1],T=l.a.useRef(!1),L=function(t){return x(!0),e.getToken({approve:y,force:t,role:s,allow_outsider:p,organization_user_role:k}).then((function(t){return g(t.approve),f(t.role),h(t.allow_outsider),C(t.organization_user_role),O(n(t)),q("save",o,a,e.inviteModalContent,t),x(!1),t})).catch((function(e){x(!1),c.a.error(e.message)}))};l.a.useEffect((function(){L()}),[]);var A=function(){var t,r=(t=z().mark((function t(){return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),t.next=3,e.deleteTokens();case 3:return t.abrupt("return",L(!0).then((function(){setTimeout((function(){x(!1),c.a.success(__("重置邀请链接成功"))}),500)})).catch((function(){x(!1)})));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){W(a,n,o,i,c,"next",e)}function c(e){W(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return{state:{joinUrl:_,loading:S,targetType:o,roleType:s,allowOutsider:p,approve:y,memberType:k},onCopyUrl:function(t){var r=e.getCopyText(_,s);t.currentTarget&&t.currentTarget.setAttribute("data-url",r),R()(r,{format:"text/plain"}),c.a.success(__("链接已复制"))},onRefreshLink:A,onCheckChange:function(t){var r=t?P.APPROVE.need:P.APPROVE.noneed;e.updateToken({approve:r,role:s,allow_outsider:p,organization_user_role:k}).then((function(){g(r),q("save",o,a,e.inviteModalContent,{allow_outsider:p,approve:r,organization_user_role:k,role:s}),T.current=!0})).catch((function(e){c.a.error(e.message)}))},onAllowOutsiderChange:function(t){var r=t?P.ALLOW_OUTSIDER.ALLOW:P.ALLOW_OUTSIDER.NORMAL;e.getToken({approve:y,role:s,allow_outsider:r,organization_user_role:k}).then((function(t){h(t.allow_outsider),O(n(t)),q("save",o,a,e.inviteModalContent,t),T.current=!0})).catch((function(e){c.a.error(e.message)}))},onMemberTypeChange:function(t){e.getToken({approve:y,role:s,allow_outsider:p,organization_user_role:t}).then((function(t){C(t.organization_user_role),O(n(t)),q("save",o,a,e.inviteModalContent,t),T.current=!0})).catch((function(e){c.a.error(e.message)}))},onRoleTypeChange:function(t){e.getToken({approve:y,role:t,allow_outsider:p,organization_user_role:k}).then((function(t){f(t.role),O(n(t)),q("save",o,a,e.inviteModalContent,t),T.current=!0})).catch((function(e){c.a.error(e.message)}))},triggerFakeLoading:function(){T.current&&(x(!0),setTimeout((function(){x(!1)}),500),T.current=!1)}}}function Y(e){var t,r,c,u,s=e.moreSettingOptions,f=e.inviteModalContent,d=e.onBackShare,m=e.toggleTitle,v=e.toggleCollaboratorList,y=e.organization,b=e.group,g=e.inviteSelectorType,E=K(e),S=E.state,x=E.onCopyUrl,j=E.onRefreshLink,k=E.onCheckChange,T=E.onAllowOutsiderChange,L=E.onMemberTypeChange,D=E.onRoleTypeChange,R=E.triggerFakeLoading,G=V(l.a.useState(!1),2),U=G[0],z=G[1],W=V(l.a.useState(""),2),H=W[0],q=W[1],Y=V(l.a.useState(""),2),$=Y[0],Z=Y[1],J=V(l.a.useState(!1),2),X=J[0],Q=J[1],ee=l.a.useMemo((function(){var e=null!=y&&y.id?N.a.ORG:N.a.PERSON;return Object(w.a)()?e:N.a.INTERNAL}),[y]),te=[{type:"collaborationSet",title:__("协作权限"),defaultValue:S.roleType===M.ROLE.edit?__("可编辑"):__("可阅读"),icon:"icon-limits"},{type:"allowOutsiderSet",title:__("邀请空间外人员"),hidden:!(ee===N.a.ORG&&g===B.memberSelectorType.BOOK),defaultValue:S.allowOutsider===P.ALLOW_OUTSIDER.NORMAL?__("关闭"):__("已开启"),icon:"icon-range"},{type:"needCheckSet",title:__("需要审批确认加入"),defaultValue:S.approve===P.APPROVE.need?__("已开启"):__("关闭"),icon:"icon-verify"},{type:"resetLinkSet",title:__("重置邀请链接"),noDetail:!0,icon:"antd-sync"}],re=[{type:"groupMemberSet",title:__("人员角色"),defaultValue:S.roleType===F.ROLE.member?__("成员"):__("只读成员"),icon:"icon-limits"},{type:"allowOutsiderSet",title:__("邀请空间外人员"),hidden:Object(_.f)(b,y)||ee===N.a.INTERNAL,defaultValue:S.allowOutsider===P.ALLOW_OUTSIDER.NORMAL?__("关闭"):__("已开启"),icon:"icon-range"},{type:"needCheckSet",title:__("需要审批确认加入"),defaultValue:S.approve===P.APPROVE.need?__("已开启"):__("关闭"),icon:"icon-approval"},{type:"resetLinkSet",title:__("重置邀请链接"),noDetail:!0,icon:"antd-sync"}],ne=function(e,t){"inviteModal"===f&&m(!1),"collaboratorPanel"===f&&v(!1),z(!0),q(e),Z(t)};return l.a.createElement("div",{className:I.a.sharePanel},U?l.a.createElement(A,{organization:y,panelType:H,panelTitle:$,state:S,moreSettingOptions:s,handleRoleTypeChange:D,handleMemberTypeChange:L,handleAllowOutsiderChange:T,handleCheckChange:k,onBack:function(){"inviteModal"===f&&m(!0),"collaboratorPanel"===f&&v(!0),z(!1),R()}}):l.a.createElement(l.a.Fragment,null,"inviteModal"===f&&(r=g===B.memberSelectorType.GROUP,c=r?__("通过链接邀请添加成员"):__("通过链接邀请参与协作"),u=r?__("拿到链接的人可成为团队成员、只读成员"):__("拿到链接的人可获得编辑、阅读等权限"),l.a.createElement("div",{className:I.a.main},l.a.createElement("div",{className:I.a.mainIntro},l.a.createElement(i.a.Item,{className:I.a.inviteItem},l.a.createElement(i.a.Item.Meta,{avatar:l.a.createElement(h.b,{className:p()(I.a.itemIcon,I.a.appointIcon),name:"nav-invite",width:40}),title:c,description:u}))),l.a.createElement("div",{className:I.a.moreConfigs},l.a.createElement(n.a,{spinning:S.loading,delay:150},l.a.createElement("div",{className:I.a.shareLinkSet},l.a.createElement(a.a,{className:I.a.shareLinkShow,disabled:!0,placeholder:S.joinUrl}),l.a.createElement(o.a,{className:I.a.shareButton,onClick:function(e){S.loading||x(e)}},__("复制链接")))),l.a.createElement(O.a,{settings:r?re:te,onClick:function(e,t){"resetLinkSet"===e?j():ne(e,t)}})))),"inviteSharePanel"===f&&(t=__("拿到链接的人可获得{linkAbility}权限",{linkAbility:S.roleType===M.ROLE.edit?__("编辑"):__("阅读")}),l.a.createElement("div",{className:C.a.shareDetailSettingPanel},l.a.createElement("div",{className:C.a.title,onClick:function(){return d()}},l.a.createElement(h.b,{className:C.a.backIcon,name:"arrow-down",width:20}),__("通过链接分享给指定人")),l.a.createElement("p",{className:C.a.linkTitleDesc},t),l.a.createElement(n.a,{spinning:S.loading,delay:150},l.a.createElement("div",{className:C.a.linkContentArea},l.a.createElement(a.a,{className:C.a.copyLink,disabled:!0,placeholder:S.joinUrl}),l.a.createElement(o.a,{className:C.a.inviteCopyBtn,size:"large",type:"primary",onClick:function(e){S.loading||x(e)}},__("复制链接")))),l.a.createElement("div",{className:C.a.moreConfigSettings},l.a.createElement(O.a,{settings:te,onClick:function(e,t){"resetLinkSet"===e?j():ne(e,t)}})))),"collaboratorPanel"===f&&function(){var e=__("拿到链接的人可获得{linkAbility}权限",{linkAbility:S.roleType===M.ROLE.edit?__("编辑"):__("阅读")});return l.a.createElement("div",{className:p()(C.a.shareDetailSettingPanel,I.a.inviteSelector)},l.a.createElement("p",{className:C.a.linkTitleDesc,style:{marginTop:0}},e),l.a.createElement(n.a,{spinning:S.loading,delay:150},l.a.createElement("div",{className:C.a.linkContentArea},l.a.createElement(a.a,{className:C.a.copyLink,disabled:!0,placeholder:S.joinUrl}),l.a.createElement(o.a,{className:C.a.inviteCopyBtn,size:"large",type:"primary",onClick:function(e){S.loading||x(e)}},__("复制链接")))),l.a.createElement("div",{className:C.a.moreConfigToggler},l.a.createElement("span",{className:C.a.moreConfigsTip,onClick:function(){return Q((function(e){return!e}))}},__("高级设置"),l.a.createElement(h.b,{name:"arrow-down",className:C.a.expandIcon,"data-activated":X,size:16}))),X&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:C.a.moreConfigSettings},l.a.createElement(O.a,{settings:te,onClick:function(e,t){"resetLinkSet"===e?j():ne(e,t)}}))))}()))}Y.propTypes={getJoinUrl:f.a.func,getToken:f.a.func,updateToken:f.a.func,deleteTokens:f.a.func,getCopyText:f.a.func,inviteSelectorType:f.a.string,inviteModalContent:f.a.oneOf(["inviteModal","inviteSharePanel","collaboratorPanel"]),onBackShare:f.a.func,toggleCollaboratorList:f.a.func,toggleTitle:f.a.func,moreSettingOptions:f.a.array,organization:f.a.object,group:f.a.object,isEditing:f.a.bool,inviteTarget:f.a.object},Y.defaultProps={inviteModalContent:"inviteModal"};t.a=Y},1365:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(570),i=r(896),c=r(147),u=r(1378);t.a=Object(c.b)(Object(a.d)((function(e){return{guide:e.guide}}))((function(e){var t=e.guide,r=e.tip_id;return Object(n.useEffect)((function(){var e=i.a.findFeatureGuide({tip_id:r,type:"lite"});e&&i.a.readLiteFeatureGuide(e)}),[]),o.a.createElement("div",{className:e.className||"",style:e.style,"data-testid":"guide_".concat(r),onClick:function(){var t=i.a.findFeatureGuide({tip_id:r,type:"mini"});i.a.readMiniFeatureGuide(t,e.dispatch)}},e.children,("#guide"===window.location.hash||!t.readTip[r])&&o.a.createElement(u.a.Mini,null))})),!1)},1368:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){return e?(e=e.toLowerCase(),{organization:__("空间"),group:__("团队"),book:__("知识库"),doc:__("文档"),thread:__("话题"),sheet:__("表格"),resource:__("资源知识库"),design:__("图集"),column:__("专栏")}[e]||__("文档")):""}},1378:function(e,t,r){"use strict";r(103);var n=r(60),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(36),l=r.n(u),s=r(616);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){return a.a.createElement("span",{className:"larkui-feature-guide-sign",style:t,onClick:e,"data-testid":"feature-guide-sign"},a.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-outer"}),a.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-inner"}))}function b(e){var t=e.type,r=void 0===t?"lite":t,i=e.tip,c=e.enableMultiLines,u=e.guideSignContainerStyle,f=m(Object(o.useState)(!0),2),d=f[0],h=f[1];if(!d)return null;var v=document.querySelector(e.containerSelector);if(!v)return null;var b=function(){h(!1),e.onRead()},g=function(){var t=v.querySelector(".larkui-feature-guide");if(t)return t;(t=document.createElement("div")).classList.add("larkui-feature-guide");if(t.classList.add({lite:"larkui-feature-guide-lite",mini:"larkui-feature-guide-mini",custom:"larkui-feature-guide-custom"}[r]),t.setAttribute("data-testid","feature-guide"),["lite","custom"].includes(r)){v.style.position="relative";var n=v.getBoundingClientRect();switch(e.placement){case"right":t.style.left="".concat(n.width+2,"px");break;case"left":t.style.left="-14px";break;case"top":t.style.bottom="".concat((e.offsetY?parseInt(e.offsetY,10):0)+n.height,"px"),t.style.left="".concat(n.width/2-6,"px");break;default:t.style.left="".concat((n.width-12)/2,"px"),t.style.bottom=e.offsetY||"0"}e.styleFix&&e.styleFix(t)}var o=e.readTrigger||[],a=function t(r){r.target.closest(".larkui-feature-guide")&&(r.preventDefault(),r.stopPropagation()),h(!1),e.onRead(),o.forEach((function(r){v.removeEventListener(r,e.closeGuide||t)}))};return o.forEach((function(t){v.addEventListener(t,e.closeGuide||a)})),v.appendChild(t),t}(),w=y(b,u),_=c?"larkui-feature-guide-lite-close-multi-line":"larkui-feature-guide-lite-close";if("mini"===r)return l.a.createPortal(w,g);var O="center"!==e.placement&&"top"!==e.placement;return"custom"===r?l.a.createPortal(a.a.createElement(e.customRender,p(p({},e),{},{sign:w,visible:d,arrowPointAtCenter:O,portalDom:g,onReadGuide:b,setVisible:h})),g):"lite"===r?l.a.createPortal(a.a.createElement(n.a,{overlayClassName:"larkui-feature-guide-lite-tip",arrowPointAtCenter:O,autoAdjustOverflow:!1,defaultVisible:!0,title:a.a.createElement(a.a.Fragment,null,c?a.a.createElement("div",{className:"larkui-feature-guide-content",onClick:b},i):a.a.createElement("span",{className:"larkui-feature-guide-lite-content"},a.a.createElement("strong",null,i)),a.a.createElement("span",{onClick:b,className:_},a.a.createElement(s.a,{width:16,height:16}))),placement:e.placement,visible:d,align:{targetOffset:[0,4]}},w),g):void 0}b.Mini=function(){return a.a.createElement("span",{className:"larkui-feature-guide-mini","data-testid":"standalone-mini-guide"},y((function(){})))},b.defaultProps={enableMultiLines:!1},b.propTypes={type:c.a.oneOf(["lite","mini","custom"]),tip:c.a.oneOfType([c.a.string,c.a.node]),containerSelector:c.a.string.isRequired,readTrigger:c.a.array,placement:c.a.oneOf(["bottomRight","bottomLeft","bottom","right","left","top"]),offsetY:c.a.string,onRead:c.a.func.isRequired,guideSignContainerStyle:c.a.object,enableMultiLines:c.a.bool,customRender:c.a.element,styleFix:c.a.func,closeGuide:c.a.func};t.a=b},1411:function(e,t,r){var n=r(290),o=r(224),a=r(1089),i=r(76);e.exports=function(e,t){return(i(e)?n:a)(e,o(t,3))}},1457:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(a=o.key,i=void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===n(i)?i:String(i)),o)}var a,i}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}e.exports=function(e){for(var t=function(e,t){Object.getOwnPropertyNames(t).forEach((function(r){if("constructor"!==r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n)}}))},r=function(e){c(r,e);var t=l(r);function r(){return i(this,r),t.apply(this,arguments)}return a(r)}(e),n=arguments.length,o=new Array(n>1?n-1:0),u=1;u<n;u++)o[u-1]=arguments[u];return o.forEach((function(e){t(r.prototype,e.prototype)})),r}},1461:function(e,t,r){"use strict";var n=r(10),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 708c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm62.9-219.5a48.3 48.3 0 00-30.9 44.8V620c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-21.5c0-23.1 6.7-45.9 19.9-64.9 12.9-18.6 30.9-32.8 52.1-40.9 34-13.1 56-41.6 56-72.7 0-44.1-43.1-80-96-80s-96 35.9-96 80v7.6c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V420c0-39.3 17.2-76 48.4-103.3C430.4 290.4 470 276 512 276s81.6 14.5 111.6 40.7C654.8 344 672 380.7 672 420c0 57.8-38.1 109.8-97.1 132.5z"}}]},name:"question-circle",theme:"filled"},i=r(27),c=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))};c.displayName="QuestionCircleFilled";t.a=o.forwardRef(c)},1507:function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},1522:function(e,t,r){e.exports=r(1079)},1525:function(e,t,r){"use strict";r(466);var n=r(253),o=(r(104),r(38)),a=(r(166),r(31)),i=r(0),c=r.n(i),u=r(2),l=r.n(u),s=r(421),f=r(490),d=r(573),p=r(617),h=r(574),m=r(141);r(2205);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e){var t,r,u=e.isOfficial,l=e.isDesktop,y=e.newTemplateName,b=e.onSetNewTemplateName,g=e.onSetSelectedScope,w=e.group,_=e.organization,O=l?w&&Object(m.e)(w):w&&Object(m.e)(w)&&(null===(t=w.abilities)||void 0===t?void 0:t.read_private),E=!!_,S=v(Object(i.useState)(O||E||u?0:1),2),x=S[0],j=S[1];r=O?[{header:__("本知识库可用"),icon:c.a.createElement(d.a,{width:20,height:20}),desc:__("仅在本知识库中可以使用"),type:0},{header:__("本团队可用"),icon:c.a.createElement(p.a,{width:20,height:20}),desc:__("成员在团队中新建文档时均可使用"),type:2},{header:__("仅自己可用"),icon:c.a.createElement(h.a,{width:20,height:20}),desc:__("可以在你参与的所有知识库中使用"),type:3}]:[{header:__("本知识库可用"),icon:c.a.createElement(d.a,{width:20,height:20}),desc:__("仅在本知识库中可以使用"),type:0},{header:__("仅自己可用"),icon:c.a.createElement(h.a,{width:20,height:20}),desc:__("可以在你参与的所有知识库中使用"),type:3}];var k=[{header:__("官方模板"),icon:c.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*KnODQ5KXlh4AAAAAAAAAAABjAQAAAQ/original",alt:"语雀logo",height:20}),desc:__("所有知识库中都可以使用"),type:1}];u&&(r=k);var P=r[x];Object(i.useEffect)((function(){return g(r[x].type)}),[]);var C=c.a.createElement(a.a,null,r.map((function(e,t){var n=c.a.createElement("div",{"data-testid":"dropdown-item-".concat(e.type),className:"template-scope-menu-item"},c.a.createElement("div",{className:"template-scope-icon"},e.icon),c.a.createElement("div",{className:"template-scope-text"},c.a.createElement("h4",null,e.header),c.a.createElement("p",null,e.desc)),t===x&&c.a.createElement("div",{className:"template-scope-more-icon"},c.a.createElement(f.a,{width:20})));return c.a.createElement(a.a.Item,{key:e.header,onClick:function(){j(t),g(r[t].type)}},n)})));return c.a.createElement("div",{"data-testid":"creator-view",className:"template-creator-content"},c.a.createElement("p",null,__("模板名称")),c.a.createElement(o.a,{value:y||"",onChange:function(e){return b(e.target.value)},onFocus:function(e){return e.target.setSelectionRange(0,e.target.value.length)}}),c.a.createElement("p",null,__("可用范围")),c.a.createElement(n.a,{trigger:["click"],overlay:C},c.a.createElement("div",{"data-testid":"dropdown-trigger",className:"template-scope"},c.a.createElement("div",{className:"template-scope-icon"},P.icon),c.a.createElement("div",{className:"template-scope-text"},c.a.createElement("h4",null,P.header),c.a.createElement("p",null,P.desc)),c.a.createElement("div",{className:"template-scope-more-icon"},c.a.createElement(s.a,null)))))}b.defaultProps={isOfficial:!1},b.propTypes={newTemplateName:l.a.string,onSetNewTemplateName:l.a.func,onSetSelectedScope:l.a.func,isOfficial:l.a.bool,isDesktop:l.a.bool,group:l.a.object,organization:l.a.object},t.a=b},1575:function(e,t,r){"use strict";var n=r(255),o=r(68);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(341)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(n,i,c):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),c=n(r(1576)),u=n(r(560));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}var s=function(e,t){return i.createElement(u.default,(0,a.default)((0,a.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="CheckOutlined";var f=i.forwardRef(s);t.default=f},1576:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},1577:function(e,t,r){"use strict";var n=r(255),o=r(68);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(341)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(n,i,c):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),c=n(r(1578)),u=n(r(560));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}var s=function(e,t){return i.createElement(u.default,(0,a.default)((0,a.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="DownOutlined";var f=i.forwardRef(s);t.default=f},1578:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"}},158:function(e,t){e.exports={memberSelectorType:{GROUP:"group",BOOK:"book",DOC:"doc",SIMPLE_WITH_ROLE:"simpleWithRole",SIMPLE:"simple",LIST:"list"}}},1702:function(e,t,r){e.exports=r(84)},1856:function(e,t,r){"use strict";function n(){return window.appData.isDesktopApp&&!window.appData.interest?{interests:{open_ocr:!window.appData.isYuque||(window.appData.currentOrganization&&0!==window.appData.currentOrganization.id?null===(a=window.appData.currentOrganization)||void 0===a?void 0:a.isPremium:"Group"===(null===(n=window.appData.group)||void 0===n?void 0:n.type)||(null===(o=window.appData.me)||void 0===o?void 0:o.isPaid)),create_public_resource:!window.appData.isYuque||(window.appData.currentOrganization&&0!==window.appData.currentOrganization.id?(null===(r=window.appData.currentOrganization)||void 0===r?void 0:r.isPremium)&&window.appData.currentOrganization.share_to_outside_enable:"Group"===(null===(e=window.appData.group)||void 0===e?void 0:e.type)||(null===(t=window.appData.me)||void 0===t?void 0:t.isPaid))}}:window.appData.interest||{interests:{}};var e,t,r,n,o,a}r.r(t),r.d(t,"getInterest",(function(){return n}))},1864:function(e,t,r){var n=r(224),o=r(175),a=r(157);e.exports=function(e){return function(t,r,i){var c=Object(t);if(!o(t)){var u=n(r,3);t=a(t),r=function(e){return u(c[e],e,c)}}var l=e(t,r,i);return l>-1?c[u?t[l]:l]:void 0}}},191:function(e,t,r){e.exports=r(345)},192:function(e,t,r){"use strict";r.d(t,"a",(function(){return S})),r.d(t,"c",(function(){return x}));var n=r(206),o=r(34),a=r.n(o),i=r(230),c=r(141);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=[{key:"all",label:__("类型不限")},{key:"doc",label:__("文档#compact")},{key:"sheet",label:__("表格")},{key:"board",label:__("画板")},{key:"table",label:__("数据表")},{key:"show",label:__("演示文稿")},{key:"thread",label:__("话题")},{key:"artboard",label:__("图集")},{key:"resource",label:__("文件")}],p=[{key:"all",label:__("时间不限")},{key:"1d",label:__("24 小时内")},{key:"7d",label:__("7 天内")},{key:"30d",label:__("30 天内")},{key:"183d",label:__("半年内")}],h=[{key:"content",label:__("内容#compact")},{key:"book",label:__("知识库#compact")},{key:"group",label:c.b.isPublication()?__("知识小组#nav"):__("团队#nav")},{key:"user",label:__("用户#nav")}],m={book:"book",group:"group",related:"related",public:"public",organization:"organization"},v=[{key:m.organization,label:__("空间")},{key:m.public,label:window.appData.isYuque?__("公开语雀"):__("内网公开")},{key:m.related,label:__("与我相关")},{key:m.group,label:c.b.isPublication()?__("当前知识小组#nav"):__("当前团队#nav")},{key:m.book,label:__("当前知识库")}],y={CONTENT_TYPES:d,TIMES:p,SEARCH_TYPES:h,SEARCH_TAB_LIST:v};function b(e){var t;return"modal"===e&&"dashboard"===(null===(t=window.appData.matchCondition)||void 0===t?void 0:t.page)||window&&window.location&&"/search"===window.location.pathname}function g(e,t){if(!e||"/"===e)return m.public;"/"===e.charAt(0)&&(e=e.slice(1));var r=l(e.split("/").map((function(e){return e.trim()})),2),n=r[0],o=void 0===n?"":n,a=r[1];return(void 0===a?"":a)||t?m.book:o?m.group:void 0}function w(e){var t,r={},n=u(e);try{for(n.s();!(t=n.n()).done;){var o=l(t.value,2),a=o[0],i=o[1];r[a]=i}}catch(e){n.e(e)}finally{n.f()}return r}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"public",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.embed,o=t.isDocCollaborator,a=(t.search,t.organization),i=t.group,u=t.me,l=t.share,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dropdown",f=u&&u.id,d=l&&l.token,p=[m.public,m.related],h=JSON.parse(JSON.stringify(v));if(r||e!==m.group||(p=[m.group]),f?([m.public,m.related].includes(e)&&(p=[m.public,m.related]),e===m.group&&(p=[m.group,m.public,m.related]),e===m.book&&(p=[m.book,m.group,m.public,m.related],(o||d)&&(p=[m.book,m.public,m.related]))):([m.public,m.related].includes(e)&&(p=[]),e===m.group&&(p=[m.group]),e===m.book&&(p=[m.book,m.group]),e===m.book&&d&&(p=[m.book])),null!=a&&a.id){var y,b=a.abilities&&a.abilities.read_home,g=window.appData.organizations,w=null==g||null===(y=g.find((function(e){return e.id===a.id})))||void 0===y?void 0:y.member,_=n.organizationUser.ROLE,O=(null==w?void 0:w.role)===_.outsourcer;p=p.map((function(e){return e===m.public?O?null:b?m.organization:null:e===m.related?b?m.related:null:e===m.group?b?m.group:null:e})).filter((function(e){return e})),h=h.map((function(e){return e.key===m.organization&&(e.label=a.name),e}))}return p.includes(m.group)&&(h=h.map((function(e){return e.key===m.group&&("User"===(null==i?void 0:i.type)?e.label=__("当前用户"):e.label=c.b.isPublication()?__("当前知识小组#nav"):__("当前团队#nav")),e}))),"dropdown"===s?p.map((function(e){return h.find((function(t){return t.key===e}))})):h.map((function(e){return p.includes(e.key)&&e})).filter((function(e){return e}))}var O={create_doc:{key:"create_doc",icon:"doc-type-default",label:__("新建文档"),label_en:"create doc"},create_sheet:{key:"create_sheet",icon:"doc-type-sheet",label:__("新建表格"),label_en:"create sheet"},create_board:{key:"create_board",icon:"doc-type-board",label:__("新建画板"),label_en:"create board"},create_table:{key:"create_table",icon:"doc-type-table",label:__("新建数据表"),label_en:"create table"},create_repo:{key:"create_repo",icon:"book-type-default",label:__("新建知识库"),label_en:"create repo"},edit_doc:{key:"edit_doc",icon:"edit-border",label:__("编辑文档"),url:"/:group_login/:book_slug/:doc_slug/edit"},enter_ppt:{key:"enter_ppt",icon:"present",label:__("进入演示模式"),noJump:!0,label_en:"ppt show"},view_notification:{key:"notification",icon:"nav-bell",label:__("查看消息"),noJump:!0,label_en:"open notification"},switch_theme:{key:"switch_theme",icon:"nav-night",label:__("切换主题模式"),noJump:!0,label_en:"switch dark mode theme"},sep:{key:"seperator",isSep:!0}},E={book_home:{key:"book_home",icon:"knowledge-base-home",label:__("知识库首页"),url:"/:group_login/:book_slug",label_en:"repo home page"},book_settings:{key:"book_settings",icon:"more-settings",label:__("知识库设置"),url:"/:group_login/:book_slug/settings/basic",label_en:"repo setting page"},group_home:{key:"group_home",icon:"left-arrow",label:":group_name",url:"/:group_login",label_en:"group home"},group_activity:{key:"group_activity",icon:"dynamic2",label:__("动态"),url:"/r/:group_login/activities",label_en:"group activity"},group_book:{key:"group_book",icon:"helpdoc",label:__("知识库"),url:"/r/:group_login/books",label_en:"my books"},dashboard:{key:"dashboard",icon:"nav-clock",label:__("开始"),url:"/dashboard",label_en:"dashboard"},back_dashboard:{key:"back_dashboard",icon:"left-arrow",label:__("工作台"),url:"/dashboard"},note:{key:"note",icon:"note",label:__("小记"),url:"/dashboard/notes",label_en:"create note"},wiki:{key:"wiki",icon:"wiki",label:__("公共区"),url:"/dashboard/org_wiki",label_en:"common wiki"}};var S={GROUP_SELECT:"GROUP_SELECT",DOC_SELECT:"DOC_SELECT"},x=new a.a;t.b={SEARCH_TOOL_EVENTS:S,CONTENT_TYPES:d,TIMES:p,SEARCH_TABS:m,searchToolEvent:x,getLabelByKey:function(e,t){return((y[e.toUpperCase()]||[]).filter((function(e){return e.key===t}))[0]||{}).label||null},getQueryByString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.share,n={},o=new URLSearchParams(e);o.get("p")>250&&o.set("p",250);var a,i=u(o);try{for(i.s();!(a=i.n()).done;){var c=l(a.value,2),s=c[0],f=c[1];"false"!==f&&(n[s]=f)}}catch(e){i.e(e)}finally{i.f()}return r&&"Book"===r.target_type&&(n.token=r.token),n.type=n.type||"content",n.tab||(n.tab=g(n.scope,n.token)),n},gotoSearchPage:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.history,o=r.forceOpen,a=r.overwrite,i=r.handleMobileTabChange,c=r.sence,s=b(c);t.tab!==m.public&&t.tab!==m.related||(t.scope="/"),a?e=new URLSearchParams(t):(e=s?new URLSearchParams(window.location.search):new URLSearchParams({}),Object.keys(t).forEach((function(r){e.set(r,t[r])})));var f,d=u(e);try{for(d.s();!(f=d.n()).done;){var p=l(f.value,2),h=p[0],v=p[1];"false"===v&&e.delete(h)}}catch(e){d.e(e)}finally{d.f()}return i?i(w(e)):o?window.open("/search?".concat(e.toString())):void(window.h5||s?n?n.push("/search?".concat(e.toString())):window.location.href="/search?".concat(e.toString()):window.open("/search?".concat(e.toString())))},clacTabByScope:g,getSearchTypesByTab:function(e){var t=[];return e===m.book&&(t=["content"]),e===m.group&&(t=["content","book","topic"]),e===m.public&&(t=["content","book","topic","group","user"]),[m.related,m.organization].includes(e)&&(t=["content","book","topic","group"]),h.filter((function(e){return t.includes(e.key)}))},getShowTabs:_,isSearchEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=e.isYuque,n=e.settings,o=void 0===n?{}:n,a=e.search,c=e.share&&e.share.token;return!(!a||!a.display)&&((!r||!1!==o.public_space_doc_search_enable)&&((!o||!1!==o.enable_search)&&(!i.a.shouldHiddenFeature("search")&&((a.scope||c)&&(t=g(a.scope,c)),_(t,e).length>0))))},isSearchPage:function(e){return window&&window.location&&"/search"===window.location.pathname},isSinglePage:b,generateMenuList:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=t.organization,a=t.group,i=t.book,c=t.doc,u=t.me,l=null==o?void 0:o.id,s=(null==u?void 0:u.id)&&(!l||(null==o||null===(e=o.abilities)||void 0===e?void 0:e.read));if("command"===r){var f,d,p=[];if("book"===n&&null!=c&&c.id)p.push.apply(p,[O.sep,(null==c||null===(d=c.abilities)||void 0===d?void 0:d.update)&&O.edit_doc,"Doc"===(null==c?void 0:c.type)&&O.enter_ppt]);else if("book"===n)p.push.apply(p,[O.sep]);else if("group"===n){var h;p.push.apply(p,[(null==a||null===(h=a.abilities)||void 0===h?void 0:h.create_book)&&O.create_repo,O.sep])}else p.push.apply(p,[(null==u?void 0:u.id)&&O.create_repo,O.sep]);var m,v,y=[O.create_doc,O.create_sheet,O.create_board,O.create_table];if(("book"===n&&null!=i&&null!==(f=i.abilities)&&void 0!==f&&f.create_doc||"book"!==n&&null!=u&&u.id)&&p.unshift.apply(p,y),null!=u&&u.id)p.push.apply(p,[(!l||(null==o||null===(m=o.abilities)||void 0===m?void 0:m.read))&&O.view_notification,(!l||(null==o||null===(v=o.abilities)||void 0===v?void 0:v.read))&&O.switch_theme]);return 1===p.length&&p[0].isSep&&p.pop(),p.filter(Boolean)}var b,g,w=[];if("book"===n&&null!=c&&c.id)w.push.apply(w,[E.book_home,(null==i||null===(b=i.abilities)||void 0===b?void 0:b.update)&&E.book_settings,(null==a||null===(g=a.abilities)||void 0===g?void 0:g.read)&&E.group_home,s&&E.back_dashboard]);else if("book"===n){var _,S;w.push.apply(w,[(null==i||null===(_=i.abilities)||void 0===_?void 0:_.update)&&E.book_settings,(null==a||null===(S=a.abilities)||void 0===S?void 0:S.read)&&E.group_home,s&&E.back_dashboard])}else if("group"===n)"Group"===(null==a?void 0:a.type)&&w.push.apply(w,[E.group_activity,E.group_book]);else{var x;w.push.apply(w,[s&&E.dashboard,(null==u?void 0:u.id)&&(l?(null==o||null===(x=o.abilities)||void 0===x?void 0:x.read)&&E.wiki:E.note)])}return w.length&&w.push(O.sep),w.filter(Boolean)}}},200:function(e,t,r){"use strict";r(1389);var n=r(624);r(559);t.a=n.a},2204:function(e,t,r){"use strict";r(2366);var n=r(1527);r(2271);t.a=n.a},2205:function(e,t,r){},2243:function(e,t,r){"use strict";r(279);var n=r(136),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(30),l="index-module_more_sDgGm",s=["data-testid","visible","onVisibleChange","getPopupContainer","isHover","iconName","placement"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=function(e){return e.parentNode};function h(e){var t=e["data-testid"],r=void 0===t?"more-actions":t,o=e.visible,i=e.onVisibleChange,c=e.getPopupContainer,h=void 0===c?p:c,m=e.isHover,v=e.iconName,y=e.placement,b=d(e,s),g={horizontal:"more-horizontal",vertical:"more-vertical",circle:"more-circle"},w={};void 0!==o&&(w.visible=e.visible),void 0!==i&&(w.onVisibleChange=e.onVisibleChange);var _=e.iconWidth||16,O={lineHeight:"".concat(_,"px"),padding:(24-_)/2},E=["click"];return m&&(E[0]="hover"),a.a.createElement(n.a,f({className:e.className,overlayClassName:e.overlayClassName,type:"menu",getPopupContainer:h,placement:y||"bottomRight",arrowPointAtCenter:!0,destroyTooltipOnHide:e.destroyTooltipOnHide,trigger:E,content:e.content,hideWhenInactive:!0},w,b),a.a.createElement("span",{className:l,style:O,"data-testid":r},a.a.createElement(u.b,{name:v||g[e.direction]||g.horizontal,width:_})))}h.defaultProps={direction:"horizontal"},h.propTypes={className:c.a.string,overlayClassName:c.a.string,direction:c.a.oneOf(["horizontal","vertical","circle"]),iconWidth:c.a.number,visible:c.a.bool,content:c.a.node.isRequired,onVisibleChange:c.a.func,"data-testid":c.a.string,getPopupContainer:c.a.func,iconName:c.a.string,destroyTooltipOnHide:c.a.bool,placement:c.a.string};t.a=h},2263:function(e,t,r){"use strict";var n=r(485),o=r(1009),a=r(396),i=r(111),c=r(314),u=r(105),l=r(44);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function h(){}function m(){}function v(){}var y={};u(y,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(P([])));g&&g!==t&&r.call(g,a)&&(y=g);var w=v.prototype=h.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=d(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==s(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=d(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){m(a,n,o,i,c,"next",e)}function c(e){m(a,n,o,i,c,"throw",e)}i(void 0)}))}}function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g={limitExceeded:function(e){return e&&e.length>=a.MAX_NODES_COUNT},shouldShowToc:function(e){return!!e&&"Book"===e.layout},shouldShowColumnToc:function(e){return!!e&&"Column"===e.layout},parseCatalogVersions:function(e){if(!e)return[];var t,r=[],o=y(e);try{for(o.s();!(t=o.n()).done;){var a=t.value,i=a.item.toc_yml;if(i)try{var c=Object(n.ymlToToc)(i),u=c[0];u&&u.published&&(a.meta=c[0],a.toc=c.slice(1),a.catalog_tree=Object(n.generateTreeFromYml)(i),r.push(a))}catch(e){}}}catch(e){o.e(e)}finally{o.f()}return r},parseVersion:function(e){if(e){try{var t,r=e.item.toc_yml,o=Object(n.ymlToToc)(r),a=y(o);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.key=i.uuid}}catch(e){a.e(e)}finally{a.f()}var c=o[0];c?(e.meta=c,e.toc=o.slice(1)):e.toc=o,e.catalog_tree=Object(n.generateTreeByTocItems)(e.toc)}catch(e){console.error(e)}return e}},updateNode:function(e){var t=arguments,r=this;return v(f().mark((function o(){var i,c,l;return f().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=t.length>1&&void 0!==t[1]?t[1]:{},c=t.length>2&&void 0!==t[2]?t[2]:{catalog_tree:!0},e){o.next=4;break}return o.abrupt("return");case 4:if(!e.should_manually_create_uid){o.next=8;break}return o.next=7,u.webProxy.catalogNodes.ensureUpdateTocYml({book_id:e.id,toc_yml:Object(n.tocToYml)(e.toc)});case 7:e.should_manually_create_uid=!1;case 8:return o.prev=8,o.next=11,u.webProxy.catalogNodes.update(p({book_id:e.id,format:"list"},i),{ignoreGlobalMessage:!0,useOriginResp:!0});case 11:l=o.sent,o.next=18;break;case 14:throw o.prev=14,o.t0=o.catch(8),"limit_exceeded"===o.t0.code&&(o.t0.message=__("目录节点数超过最大限制 {MAX_NODES_COUNT}，无法新增",{MAX_NODES_COUNT:a.MAX_NODES_COUNT})),o.t0;case 18:return o.abrupt("return",r._returnWithCatalogTree(p(p({},l.meta),{},{toc:l.data}),c));case 19:case"end":return o.stop()}}),o,null,[[8,14]])})))()},_returnWithCatalogTree:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.catalog_tree&&e.toc&&(e.catalog_tree=Object(n.generateTreeByTocItems)(e.toc)),e},getCatalogNodes:function(e){var t=arguments;return v(f().mark((function r(){var o,a,i,c,l;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.length>1&&void 0!==t[1]?t[1]:{},e){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,u.webProxy.catalogNodes.find(p({book_id:e},o),{useOriginResp:!0});case 5:a=r.sent,i=y(a.data);try{for(i.s();!(c=i.n()).done;)(l=c.value).key=l.uuid}catch(e){i.e(e)}finally{i.f()}return r.abrupt("return",p({catalog_tree:Object(n.generateTreeByTocItems)(a.data),toc:a.data},a.meta));case 9:case"end":return r.stop()}}),r)})))()},actionsInReaderPage:function(e,t){var r=[];return e.type!==a.TYPES.link?r.push(l.a.CATALOG.rename):r.push(l.a.CATALOG.edit_link),t.create_doc&&e.type===a.TYPES.doc&&r.push(l.a.DOC.edit),e.type!==a.TYPES.title&&e.type!==a.TYPES.uncreated_doc&&r.push(l.a.DOC.copyLink),t.create_doc&&(r.push(l.a.DOC.divide),r.push(l.a.CATALOG.remove),r.push(l.a.DOC.divide),r.push(l.a.CATALOG.copy),r.push(l.a.CATALOG.move)),t.export&&e.type===a.TYPES.doc&&r.push(l.a.CATALOG.export),t.create_doc&&(r.push(l.a.DOC.divide),r.push(l.a.CATALOG.destroy)),r},actionsForEdit:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[];return"desktop"===t?(n.push(l.a.CATALOG.move),n):(e.type===a.TYPES.link?n.push(l.a.CATALOG.edit_link):n.push(l.a.CATALOG.rename),"lite"===t?this.actionsInReaderPage(e,r):("full"===t&&(e.type===a.TYPES.doc&&(n.push(l.a.CATALOG.view_doc),n.push(l.a.CATALOG.remove),n.push(l.a.DOC.edit)),n.push(l.a.CATALOG.copy),n.push(l.a.CATALOG.move),r.export&&e.type===a.TYPES.doc&&n.push(l.a.CATALOG.export),e.share&&e.share.status===c.STATUS.active&&(n.push(l.a.DOC.divide),n.push(l.a.DOC.unshare)),n.push(l.a.DOC.divide),n.push(l.a.CATALOG.destroy)),n))},formatNode:function(e){return{type:e.type||i.TOC_TYPES.DOC,title:e.title,uuid:e.uuid||Object(o.nanoid)(16),url:e.url||null,prev_uuid:e.prev_uuid||null,sibling_uuid:e.sibling_uuid||null,child_uuid:e.child_uuid||null,parent_uuid:e.parent_uuid||null,doc_id:e.doc_id||null,level:e.level||0,id:e.doc_id||null,open_window:0===e.open_window?0:1,visible:0===e.visible?0:1}},insertNodeToCatalog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{catalog_tree:!0},n=g.formatNode(t),o=t.target_uuid,a=t.action,i=e.findIndex((function(e){return e.uuid===o}));if(i>=0){var c=e[i];n.level="insertSibling"===a?c.level:c.level+1,e.splice(i+1,0,n)}else e.unshift(n);return this._returnWithCatalogTree({toc:e,node_uuid:n.uuid},r)},getRedirectURL:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.group,o=r.book,a=r.currentItem,i=e.filter((function(e){return"DOC"===e.type&&e.id}));if(!a)return i&&i[0]?"/".concat(n.login,"/").concat(o.slug,"/").concat(i[0].url):"";var c,u=i.findIndex((function(e){return e.url&&e.url===a.url}));return i=t.filter((function(e){return"DOC"===e.type&&e.id})),u<0?c=i[0]:(c=i[u]||null)||(c=i[u-1]||null),c?"/".concat(n.login,"/").concat(o.slug,"/").concat(c.url):""}};t.a=g},2269:function(e,t,r){"use strict";r(62);var n=r(21),o=(r(870),r(365)),a=(r(2261),r(1899)),i=(r(63),r(23)),c=r(0),u=r.n(c),l=r(2),s=r.n(l),f=r(726),d=r(241),p=r(9),h=r.n(p),m=r(30),v="index-module_coverUploaderWrapper_JM8NQ",y="index-module_miniCoverUploaderWrapper_VBkGu",b="index-module_cropper_FJZMe",g="index-module_miniCropperWrapper_kKArf",w="index-module_miniCropper_x-fcL",_="index-module_placeholderWrapper_I8JnT",O="index-module_miniPlaceholderWrapper_CXNui",E="index-module_placeholder_fRP2-",S="index-module_placeholderImg_RI3Xy",x="index-module_preview_0S38r",j="index-module_uploadWrapper_Lddj1",k="index-module_miniUploadWrapper_kA5F2",P="index-module_uploadAction_IvY3J",C="index-module_miniUploadAction_zkhyc",T="index-module_uploadBtn_3NoLt",L="index-module_clearBtn_Jvd1P",A="index-module_btnRemove_ewCeL",I="index-module_btnRemoveIcon_Kaa0G";function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D.apply(this,arguments)}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W(n.key),n)}}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=U(e);if(t){var o=U(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return G(this,r)}}function G(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}function z(e,t,r){return(t=W(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e){var t=function(e,t){if("object"!==N(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===N(t)?t:String(t)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(p,e);var t,r,l,s=F(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),z(B(t=s.call(this,e)),"onSubmit",(function(){return new Promise((function(e,r){t.cropper?t.handleUpload().then((function(t){return e(t&&t.url)}),(function(e){try{var t;if(null!==(t=e.xhr)&&void 0!==t&&t.response){var n,o=JSON.parse(e.xhr.response),a=window.__member_message_ref&&(null===(n=window.__member_message_ref.current)||void 0===n?void 0:n.getMessage(o.code,{isOwner:!0},o))||{},c=a.msg,u=a.alwaysOpen,l=a.level,s=a.callback;c?s(i.a[l||"info"](c,u?0:void 0)):i.a.error(__("封面上传失败，请重试"))}}catch(e){}finally{r(e)}})):e(t.state.cover)}))})),z(B(t),"getUploadProps",(function(){return{beforeUpload:function(e){var r=t.props.fileSizeLimit;if(e.size/1024/1024>r)return i.a.error(__("图片大小不能超过 {size}M",{size:r})),!1;var n=new FileReader;return n.addEventListener("load",(function(){t.setState({cover:n.result}),t.coverRef.current.focus(),"function"==typeof t.props.beforeUpload&&t.props.beforeUpload(n.result)}),!1),e&&n.readAsDataURL(e),!1},showUploadList:!1,accept:"image/*"}})),z(B(t),"handleUpload",(function(){if(t.cropper&&void 0!==t.cropper.getCroppedCanvas())return new Promise((function(e,r){t.cropper.getCroppedCanvas({imageSmoothingQuality:"high"}).toBlob((function(n){var o=new FormData;t.props.attachable_type&&o.append("attachable_type",t.props.attachable_type),t.props.attachable_id&&o.append("attachable_id",t.props.attachable_id),o.append("file",n,"image.png"),o.append("ocr","off"),Object(d.ajax)({url:"/api/upload/attach",method:"POST",data:o,dataType:"json",processData:!1,success:function(t){e(t.data)},error:function(e){r(e)}})}),"image/png",1)}))})),z(B(t),"handleRemoveImg",(function(){t.setState({cover:""});var e=t.props.onRemove;e&&"function"==typeof e&&e()})),z(B(t),"renderCropper",(function(){var e=t.props,r=e.miniMode,n=e.cropperStyle,i=e.aspectRatio,c=e.previewKey,l=e.placeholder,s=e.cropperClassName,f=e.getCropper,d=t.state.cover,m=n.containerWidth,v=n.containerHeight,y=n.cropWidth;return r?u.a.createElement("div",{className:g},u.a.createElement("div",{className:h()(w,s)},u.a.createElement(o.a.Dragger,D({},t.getUploadProps(),{openFileDialogOnClick:!d}),d?u.a.createElement(a.a,{ref:function(e){t.cropper=e,f(t.cropper)},src:d,containerWidth:263,containerHeight:v,aspectRatio:i,preview:c?".".concat(c):".image-preview",cropWidth:y}):u.a.createElement(p.MiniPlaceholder,{placeholder:l})))):u.a.createElement("div",{className:h()(b,s),"data-testid":"cover-uploader-cropper"},u.a.createElement(o.a.Dragger,D({},t.getUploadProps(),{openFileDialogOnClick:!d}),d?u.a.createElement(a.a,{ref:function(e){t.cropper=e,f(t.cropper)},src:d,containerWidth:m,containerHeight:v,aspectRatio:i,preview:c?".".concat(c):".image-preview",cropWidth:y}):u.a.createElement(p.Placeholder,{placeholder:l})))})),z(B(t),"renderUploader",(function(){var e=t.props,r=e.miniMode,a=e.previewClassName,i=e.previewKey,c=t.state.cover;return r?u.a.createElement("div",{className:k},u.a.createElement("div",{className:C},u.a.createElement(o.a,t.getUploadProps(),c?u.a.createElement(n.a,{className:T},__("重新上传")):u.a.createElement(n.a,null,u.a.createElement(f.a,null)," ",__("上传图片"))),c&&u.a.createElement(n.a,{className:L,onClick:t.handleRemoveImg},__("清除")))):u.a.createElement("div",{className:j},c&&u.a.createElement("div",{className:h()("image-preview",x,a,i),"data-testid":"cover-uploader-previewKey"}),u.a.createElement("div",{className:P},u.a.createElement(o.a,t.getUploadProps(),c?u.a.createElement(n.a,null,__("重新上传")):u.a.createElement(n.a,null,u.a.createElement(f.a,null)," ",__("上传图片"))),c&&u.a.createElement("span",{className:A,onClick:t.handleRemoveImg},u.a.createElement("span",{className:I},u.a.createElement(m.b,{name:"icon-delete",width:16})),u.a.createElement("span",null,__("清除")))))}));var r=e.defaultPreviewImage,l=e.cover;return t.state={cover:l||r},t.coverRef=Object(c.createRef)(),t.cropper=null,t}return t=p,(r=[{key:"componentDidUpdate",value:function(e){e.cover!==this.props.cover&&this.setState({cover:this.props.cover})}},{key:"componentWillUnmount",value:function(){this.coverRef=null,this.cropper=null}},{key:"render",value:function(){var e=this.props.miniMode;return u.a.createElement("div",{className:h()(e?y:v,this.props.className),ref:this.coverRef,tabIndex:"-1"},this.renderCropper(),this.renderUploader())}}])&&R(t.prototype,r),l&&R(t,l),Object.defineProperty(t,"prototype",{writable:!1}),p}(c.Component);V.Placeholder=function(e){var t=e.placeholder;return u.a.createElement("div",{className:_},u.a.createElement("div",{className:E},u.a.createElement("div",{className:S}),u.a.createElement("p",null,t||__("添加封面有助于吸引读者"))))},V.MiniPlaceholder=function(e){var t=e.placeholder;return u.a.createElement("div",{className:O},u.a.createElement("div",{className:E},u.a.createElement("div",{className:S}),u.a.createElement("p",null,t||__("添加封面有助于吸引读者"))))},V.Placeholder.propTypes={placeholder:s.a.string},V.propTypes={cover:s.a.string,beforeUpload:s.a.func,aspectRatio:s.a.number,cropperStyle:s.a.shape({containerWidth:s.a.number,containerHeight:s.a.number,cropWidth:s.a.number}),defaultPreviewImage:s.a.string,fileSizeLimit:s.a.number,cropperClassName:s.a.string,previewClassName:s.a.string,previewKey:s.a.string,onRemove:s.a.func,placeholder:s.a.string,attachable_type:s.a.string,attachable_id:s.a.number,miniMode:s.a.bool,getCropper:s.a.func},V.defaultProps={cropperStyle:{containerWidth:240,containerHeight:150,cropWidth:400},aspectRatio:1.6,fileSizeLimit:20,getCropper:function(){}};t.a=V},2302:function(e,t,r){"use strict";r.r(t),r.d(t,"auditLogs",(function(){return h})),r.d(t,"block",(function(){return m})),r.d(t,"blockForSecurityOps",(function(){return v})),r.d(t,"hardDestroy",(function(){return y})),r.d(t,"find",(function(){return b})),r.d(t,"setPublic",(function(){return g})),r.d(t,"findOne",(function(){return w})),r.d(t,"unblock",(function(){return _})),r.d(t,"unblockForSecurityOps",(function(){return O})),r.d(t,"update",(function(){return E}));var n=r(11),o=["id"],a=["id"],i=["id"],c=["id"],u=["id"],l=["id"],s=["id"],f=["id"],d=["id"];function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,a=p(e,o),i="/api/adminpro/docs/".concat(r,"/audit_logs");return Object(n.c)(i,a,t).then((function(e){return t.useOriginResp?e:e.data}))}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,a),i="/api/adminpro/docs/".concat(r,"/block");return Object(n.e)(i,o,t).then((function(e){return t.useOriginResp?e:e.data}))}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,i),a="/api/adminpro/securityops/blockDoc/".concat(r);return Object(n.e)(a,o,t).then((function(e){return t.useOriginResp?e:e.data}))}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,c),a="/api/adminpro/docs/".concat(r,"/hard_destroy");return Object(n.e)(a,o,t).then((function(e){return t.useOriginResp?e:e.data}))}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="/api/adminpro/docs";return Object(n.c)(r,e,t).then((function(e){return t.useOriginResp?e:e.data}))}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,u),a="/api/adminpro/docs/".concat(r,"/set_public");return Object(n.e)(a,o,t).then((function(e){return t.useOriginResp?e:e.data}))}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,l),a="/api/adminpro/docs/".concat(r);return Object(n.c)(a,o,t).then((function(e){return t.useOriginResp?e:e.data}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,s),a="/api/adminpro/docs/".concat(r,"/unblock");return Object(n.e)(a,o,t).then((function(e){return t.useOriginResp?e:e.data}))}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,f),a="/api/adminpro/securityops/unblockDoc/".concat(r);return Object(n.e)(a,o,t).then((function(e){return t.useOriginResp?e:e.data}))}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,d),a="/api/adminpro/docs/".concat(r);return Object(n.f)(a,o,t).then((function(e){return t.useOriginResp?e:e.data}))}},2303:function(e,t,r){"use strict";r.r(t),r.d(t,"block",(function(){return o})),r.d(t,"blockForSecurityOps",(function(){return a})),r.d(t,"find",(function(){return i})),r.d(t,"unblock",(function(){return c})),r.d(t,"unblockForSecurityOps",(function(){return u}));var n=r(11);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="/api/adminpro/notes/block";return Object(n.e)(r,e,t).then((function(e){return t.useOriginResp?e:e.data}))}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="/api/adminpro/securityops/blockNote";return Object(n.e)(r,e,t).then((function(e){return t.useOriginResp?e:e.data}))}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="/api/adminpro/notes";return Object(n.c)(r,e,t).then((function(e){return t.useOriginResp?e:e.data}))}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="/api/adminpro/notes/unblock";return Object(n.e)(r,e,t).then((function(e){return t.useOriginResp?e:e.data}))}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="/api/adminpro/securityops/unblockNote";return Object(n.e)(r,e,t).then((function(e){return t.useOriginResp?e:e.data}))}},2352:function(e,t,r){var n=r(213),o=r(1507),a=r(2353),i=r(189);e.exports=function(e,t){return t=n(t,e),null==(e=a(e,t))||delete e[i(o(t))]}},2353:function(e,t,r){var n=r(249),o=r(933);e.exports=function(e,t){return t.length<2?e:n(e,o(t,0,-1))}},253:function(e,t,r){"use strict";r(923);var n=r(245),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(9),l=r.n(u),s=r(69),f=r.n(s);r(2252);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var p=["className","overlayClassName"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}function b(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var g=a.a.forwardRef((function(e,t){var r=e.className,o=e.overlayClassName,i=b(e,p);return a.a.createElement(n.a,y({className:l()(r,"larkui-dropdown-trigger"),overlayClassName:l()(o,"larkui-dropdown"),ref:t},i))}));g.propTypes=m(m({},n.a.DropDownProps),{},{className:c.a.string,overlayClassName:c.a.string}),f()(g,n.a);var w=g;function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}var O=["className","overlayClassName","overlay","children"];function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j.apply(this,arguments)}function k(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var P=a.a.forwardRef((function(e,t){var r=e.className,o=e.overlayClassName,i=e.overlay,c=e.children,u=k(e,O),s=i?i.props:{};return a.a.createElement(n.a.Button,j({className:l()(r,"larkui-dropdown-trigger"),overlay:a.a.cloneElement(i,{className:l()(s.className,o,"larkui-dropdown-menu")}),ref:t},u),c)}));P.propTypes=S(S({},n.a.DropdownButtonProps),{},{className:c.a.string,overlayClassName:c.a.string,overlay:c.a.node,children:c.a.any}),f()(P,n.a.Button);var C=P,T=r(1147),L=r.n(T),A=r(1146),I=r.n(A),N=r(776),D=r(31),R=r(60);r(2253);function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M.apply(this,arguments)}var F=function(e){var t=e.className,r=e.overlayClassName,n=e.currentValue,o=e.menus,i=e.disableMenus,c=void 0===i?[]:i,u=e.disableTip,s=e.handleChange,f=e.triggerPrefix,d=o.find((function(e){return e.value===n}));return a.a.createElement(w,M({},e,{trigger:["click"],className:l()("larkui-dropdown-selector",t),overlayClassName:l()("larkui-dropdown-selector-menu",r),overlay:a.a.createElement(D.a,{selectedKeys:[n]},o.map((function(e){var t=c.some((function(t){return t.value===e.value})),r=a.a.createElement("span",{className:"larkui-dropdown-selector-option"},a.a.createElement("span",{className:"larkui-dropdown-selector-option-name"},e.name),e.value===n&&a.a.createElement("span",{className:"larkui-dropdown-selector-option-checked"},a.a.createElement(I.a,null)));return a.a.createElement(D.a.Item,{key:e.value,disabled:t,onClick:function(){s(e.value)}},t&&u?a.a.createElement(R.a,{title:u,placement:"right"},r):r)})),e.externalActions&&a.a.createElement(D.a.Divider,null),e.externalActions&&e.externalActions())}),a.a.createElement("span",{className:"larkui-dropdown-selector-trigger"},a.a.createElement("span",null,f),a.a.createElement("span",null,d?d.name:Object(N.a)("请选择")),a.a.createElement("span",{className:"larkui-dropdown-selector-trigger-icon"},a.a.createElement(L.a,null))))};F.propTypes={className:c.a.string,overlayClassName:c.a.string,currentValue:c.a.string.isRequired,menus:c.a.arrayOf(c.a.shape({name:c.a.string.isRequired,value:c.a.string.isRequired})).isRequired,disableMenus:c.a.array,disableTip:c.a.node,handleChange:c.a.func.isRequired,externalActions:c.a.func,triggerPrefix:c.a.node};var G=F;w.Selector=G,w.Button=C;t.a=w},2742:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("string"==typeof e||e instanceof String)){var t;throw t=null===e?"null":"object"===(t=n(e))&&e.constructor&&e.constructor.hasOwnProperty("name")?e.constructor.name:"a ".concat(t),new TypeError("Expected string but received ".concat(t,"."))}},e.exports=t.default,e.exports.default=t.default},2746:function(e,t){e.exports={WORKFLOW_EVENT:{error:"error",message:"message",change:"change",saveTitle:"saveTitle",miniExpand:"miniExpand",editableChange:"editableChange",collabUsersChange:"collabUsersChange",editModeChange:"editModeChange",docStatusChange:"docStatusChange",netStatusChange:"netStatusChange",afterSaveSuccess:"afterSaveSuccess",afterPublishSuccess:"afterPublishSuccess",started:"started",afterEditorActive:"afterEditorActive",onPublishSuccess:"onPublishSuccess"},ACTION:{save:"save",publish:"publish"},SAVE_TYPE:{FORCE:1,AUTO:2,USER_SAVE:3,USER_PUBLISH:4,USER_SAVE_AS_VERSION:5,USER_SAVE_AS_TEMPLATE:6},ERROR_CODE:{INIT_FAILED:"INIT_FAILED",SAVE_BEFORE_FAILED:"SAVE_BEFORE_FAILED",SAVE_FAILED:"SAVE_FAILED",PUBLISH_FAILED:"PUBLISH_FAILED",DOC_DELETED:"DOC_DELETED",DOC_NOT_EXIST:"DOC_NOT_EXIST",DOC_SAVE_CONFLICT:"DOC_SAVE_CONFLICT",CACHE_FAILED:"CACHE_FAILED",CONTENT_UNREADY:"CONTENT_UNREADY",RENDER_FAILED:"RENDER_FAILED",DISCONNECTED:"DISCONNECTED",CONNECT_COLLAB_SERVER_FAILED:"CONNECT_COLLAB_SERVER_FAILED",LOCK_FAILED:"LOCK_FAILED",LOCKED_BY_COLLAB:"LOCKED_BY_COLLAB",LOCKED_BY_SELF_COLLAB:"LOCKED_BY_SELF_COLLAB",LOCKED_BY_COLLAB_DISCONNECT:"LOCKED_BY_COLLAB_DISCONNECT",LOCKED_BY_DESKTOP:"LOCKED_BY_DESKTOP",LOCKED_BY_OTHER:"LOCKED_BY_OTHER",LOCKED_BY_VERSIONCONFLICT:"LOCKED_BY_VERSIONCONFLICT",DATA_ERROR:"DATA_ERROR",COLLAB_DATA_INIT_ERROR:"COLLAB_DATA_INIT_ERROR",COMMAND_ERROR:"COMMAND_ERROR"},MESSAGE:{DOC_PUBLISHED:"DOC_PUBLISHED",DOC_DELETED:"DOC_DELETED",DOC_CACHE_SAVED:"DOC_CACHE_SAVED",SAVE_FAILED:"SAVE_FAILED",SAVING:"SAVING",PUBLISHING:"PUBLISHING",DISCONNECT:"DISCONNECT",UNREADY:"UNREADY",CACHE_FAILED:"CACHE_FAILED",RENDER_BIG_DOCUMENT:"RENDER_BIG_DOCUMENT",BUZY:"BUZY",CLEAR:"CLEAR",EDIT_DISABLE:"EDIT_DISABLE"},DOC_STATUS:{loading:"loading",loaded:"loaded",saving:"saving",saved:"saved",publishing:"publishing",published:"published",changed:"changed",deleted:"deleted"},NET_STATUS:{offline:"offline",online:"online",congestion:"congestion"},DOC_DOMAIN:{DOCLET:"Doclet",DOC:"Doc"},DOC_VERSION:{ORIGIN:{manual:1,cache:2}},DOCLET_CATEGORY:{BOOK_INDEX_PAGE:"book_index_page",NOTE:"note",ORG_BOARD:"org_board"},SUMMARY_NODES_COUNT:50,SUMMARY_PARAGRAPH_MAX_COUNT:10,BIG_DOCUMENT_BLOCK_COUNT:200,EDIT_MODE:{LOCK:"lock",COLLAB:"collab",OFFLINE:"offline",COLLAB_CUSTOM:"collab_custom"},EDIT_SCENE:{NOTE:"note",DESKTOP:"desktop",WEB:"web"},REPORT_ACTION_ERROR:["DATA_ERROR","COLLAB_DATA_INIT_ERROR","SAVE_FAILED","PUBLISH_FAILED","DOC_DELETED","DOC_SAVE_CONFLICT","LOCKED_BY_OTHER","LOCKED_BY_DESKTOP"],EDITOR_NAME:{LAKEX:"lakex",SHEET:"sheet",BOARD:"board",TABLE:"table"}}},2748:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e},e.exports=t.default,e.exports.default=t.default},2752:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,o.default)(t),!(r=String(r)))return e(t,4)||e(t,6);if("4"===r){if(!a.test(t))return!1;var n=t.split(".").sort((function(e,t){return e-t}));return n[3]<=255}if("6"===r){var c=t.split(":"),u=!1,l=e(c[c.length-1],4),s=l?7:8;if(c.length>s)return!1;if("::"===t)return!0;"::"===t.substr(0,2)?(c.shift(),c.shift(),u=!0):"::"===t.substr(t.length-2)&&(c.pop(),c.pop(),u=!0);for(var f=0;f<c.length;++f)if(""===c[f]&&f>0&&f<c.length-1){if(u)return!1;u=!0}else if(l&&f===c.length-1);else if(!i.test(c[f]))return!1;return u?c.length>=1:c.length===s}return!1};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,i=/^[0-9A-F]{1,4}$/i;e.exports=t.default,e.exports.default=t.default},2753:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commaDecimal=t.dotDecimal=t.arabicLocales=t.englishLocales=t.decimal=t.alphanumeric=t.alpha=void 0;var n={"en-US":/^[A-Z]+$/i,"bg-BG":/^[А-Я]+$/i,"cs-CZ":/^[A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[A-ZÆØÅ]+$/i,"de-DE":/^[A-ZÄÖÜß]+$/i,"el-GR":/^[Α-ω]+$/i,"es-ES":/^[A-ZÁÉÍÑÓÚÜ]+$/i,"fr-FR":/^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[A-ZÀÉÈÌÎÓÒÙ]+$/i,"nb-NO":/^[A-ZÆØÅ]+$/i,"nl-NL":/^[A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[A-ZÆØÅ]+$/i,"hu-HU":/^[A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"pl-PL":/^[A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]+$/i,"ru-RU":/^[А-ЯЁ]+$/i,"sl-SI":/^[A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[A-ZÅÄÖ]+$/i,"tr-TR":/^[A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[А-ЩЬЮЯЄIЇҐі]+$/i,"ku-IQ":/^[ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,ar:/^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/};t.alpha=n;var o={"en-US":/^[0-9A-Z]+$/i,"bg-BG":/^[0-9А-Я]+$/i,"cs-CZ":/^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[0-9A-ZÆØÅ]+$/i,"de-DE":/^[0-9A-ZÄÖÜß]+$/i,"el-GR":/^[0-9Α-ω]+$/i,"es-ES":/^[0-9A-ZÁÉÍÑÓÚÜ]+$/i,"fr-FR":/^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[0-9A-ZÀÉÈÌÎÓÒÙ]+$/i,"hu-HU":/^[0-9A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"nb-NO":/^[0-9A-ZÆØÅ]+$/i,"nl-NL":/^[0-9A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[0-9A-ZÆØÅ]+$/i,"pl-PL":/^[0-9A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[0-9A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]+$/i,"ru-RU":/^[0-9А-ЯЁ]+$/i,"sl-SI":/^[0-9A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[0-9A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[0-9A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[0-9А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[0-9A-ZÅÄÖ]+$/i,"tr-TR":/^[0-9A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[0-9А-ЩЬЮЯЄIЇҐі]+$/i,"ku-IQ":/^[٠١٢٣٤٥٦٧٨٩0-9ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,ar:/^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/};t.alphanumeric=o;var a={"en-US":".",ar:"٫"};t.decimal=a;var i=["AU","GB","HK","IN","NZ","ZA","ZM"];t.englishLocales=i;for(var c,u=0;u<i.length;u++)n[c="en-".concat(i[u])]=n["en-US"],o[c]=o["en-US"],a[c]=a["en-US"];var l=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"];t.arabicLocales=l;for(var s,f=0;f<l.length;f++)n[s="ar-".concat(l[f])]=n.ar,o[s]=o.ar,a[s]=a.ar;var d=[];t.dotDecimal=d;var p=["bg-BG","cs-CZ","da-DK","de-DE","el-GR","es-ES","fr-FR","it-IT","ku-IQ","hu-HU","nb-NO","nn-NO","nl-NL","pl-PL","pt-PT","ru-RU","sl-SI","sr-RS@latin","sr-RS","sv-SE","tr-TR","uk-UA"];t.commaDecimal=p;for(var h=0;h<d.length;h++)a[d[h]]=a["en-US"];for(var m=0;m<p.length;m++)a[p[m]]=",";n["pt-BR"]=n["pt-PT"],o["pt-BR"]=o["pt-PT"],a["pt-BR"]=a["pt-PT"],n["pl-Pl"]=n["pl-PL"],o["pl-Pl"]=o["pl-PL"],a["pl-Pl"]=a["pl-PL"]},2760:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),e=Date.parse(e),isNaN(e)?null:new Date(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2761:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"object"===n(e)&&null!==e?e="function"==typeof e.toString?e.toString():"[object Object]":(null==e||isNaN(e)&&!e.length)&&(e="");return String(e)},e.exports=t.default,e.exports.default=t.default},2762:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,n.default)(e),(t=(0,o.default)(t,i)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));for(var r=e.split("."),a=0;a<r.length;a++)if(r[a].length>63)return!1;if(t.require_tld){var c=r.pop();if(!r.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(c))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20]/.test(c))return!1}for(var u,l=0;l<r.length;l++){if(u=r[l],t.allow_underscores&&(u=u.replace(/_/g,"")),!/^[a-z\u00a1-\uffff0-9-]+$/i.test(u))return!1;if(/[\uff01-\uff5e]/.test(u))return!1;if("-"===u[0]||"-"===u[u.length-1])return!1}return!0};var n=a(r(2742)),o=a(r(2748));function a(e){return e&&e.__esModule?e:{default:e}}var i={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};e.exports=t.default,e.exports.default=t.default},2763:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){return e.some((function(e){return t===e}))};t.default=n,e.exports=t.default,e.exports.default=t.default},2766:function(e,t,r){"use strict";var n=".lake-sheet-scrollbar-x .lake-sheet-scrollbar-trigger",o=".lake-sheet-scrollbar-y .lake-sheet-scrollbar-trigger",a={storePosition:function(e,t){if(sessionStorage){var r=this._getStorageKey(e);sessionStorage.setItem(r,"".concat(t))}},storeSheetPosition:function(e,t){if(sessionStorage){var r=this._getStorageKey(e);sessionStorage.setItem("".concat(r,"-x"),"".concat(t.x)),sessionStorage.setItem("".concat(r,"-y"),"".concat(t.y))}},getStoredPosition:function(e){if(!sessionStorage)return-1;var t=this._getStorageKey(e),r=sessionStorage.getItem(t);return r?parseInt(r,10):-1},getSheetStoredPosition:function(e){if(!sessionStorage)return null;var t=this._getStorageKey(e),r=sessionStorage.getItem("".concat(t,"-x")),n=sessionStorage.getItem("".concat(t,"-y"));return r&&n?{x:parseFloat(r),y:parseFloat(n)}:null},clearStorage:function(e){if(sessionStorage){var t=this._getStorageKey(e);sessionStorage.removeItem(t)}},clearSheetStorage:function(e){if(sessionStorage){var t=this._getStorageKey(e);sessionStorage.removeItem("".concat(t,"-x")),sessionStorage.removeItem("".concat(t,"-y"))}},_getStorageKey:function(e){return"content-position-offset-".concat(e)}},i={saveReadPosition:function(e){var t,r=(null===(t=document.scrollingElement)||void 0===t?void 0:t.scrollTop)||document.body.scrollTop;r&&r>=32?a.storePosition(e,r):a.clearStorage(e)},letReaderFocusToMemorizedPosition:function(e){var t=a.getStoredPosition(e);t<=0||(window.scrollTo(0,t),a.clearStorage(e))},letEditorFocusToReadPosition:function(e){var t=a.getStoredPosition(e);if(!(t<=0)){var r=this.getScrollContainer();r&&(r.scrollTop=t,a.clearStorage(e))}},getScrollContainer:function(){return document.querySelector(".ne-editor-wrap")||document.querySelector(".lake-editor-scroll-container")},saveEditPosition:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lake";if("lakesheet"!==t){var r=this.getScrollContainer();if(r){var n=r.scrollTop;n>=32&&a.storePosition(e,n)}}else i.saveSheetPosition(e)},saveSheetPosition:function(e){var t=document.querySelector(n),r=document.querySelector(o);if(t&&r){var i={x:t.getAttribute("data-scroll"),y:r.getAttribute("data-scroll")};a.storeSheetPosition(e,i)}},getSheetStoredPosition:function(e){var t=a.getSheetStoredPosition(e);return t?(a.clearSheetStorage(e),t):null}};t.a=i},2768:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));r(953);var n=r(443),o=r(0),a=r.n(o),i=r(342),c=r(90),u=r(18),l=r(167),s=r(2791);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(){d=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function h(){}function m(){}function v(){}var y={};u(y,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(P([])));g&&g!==t&&r.call(g,a)&&(y=g);var w=v.prototype=h.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==f(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function p(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var h=function(e){e.type;var t=e.checked,r=e.organization,o=e.onChangePermission,f=a.a.useMemo((function(){var e=null!=r&&r.id?c.a.ORG:c.a.PERSON;return Object(l.a)()?e:c.a.INTERNAL}),[r]),h=function(){var e,t=(e=d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t?f===c.a.PERSON?u.PRIVACY.public:u.PRIVACY.intranet:u.PRIVACY.private,o(r);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){p(a,n,o,i,c,"next",e)}function c(e){p(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:s.a.contentArea},a.a.createElement("span",{className:s.a.switchTitle},i.l[f]),a.a.createElement("div",{className:s.a.switchButton},a.a.createElement(n.a,{size:"small",onChange:h,checked:t}))))}},2770:function(e,t,r){"use strict";r.d(t,"e",(function(){return i}));var n=r(289),o=r.n(n),a=r(2746);r.d(t,"i",(function(){return a.WORKFLOW_EVENT})),r.d(t,"h",(function(){return a.SAVE_TYPE})),r.d(t,"d",(function(){return a.ERROR_CODE})),r.d(t,"f",(function(){return a.MESSAGE})),r.d(t,"a",(function(){return a.DOC_STATUS})),r.d(t,"g",(function(){return a.NET_STATUS})),r.d(t,"b",(function(){return a.EDIT_MODE})),r.d(t,"c",(function(){return a.EDIT_SCENE}));var i={edit:{key:"e",title:"E"},publish:{key:["⌘+enter","ctrl+enter"],title:o.a.mac?"⌘+Enter":"Ctrl+Enter"}};a.WORKFLOW_EVENT,a.ACTION,a.SAVE_TYPE,a.ERROR_CODE,a.MESSAGE,a.DOC_STATUS,a.NET_STATUS,a.EDIT_MODE},2771:function(e,t,r){"use strict";var n=r(1335);r.d(t,"a",(function(){return n.a}))},2779:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(a=o.key,i=void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===n(i)?i:String(i)),o)}var a,i}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__=t}var t,r,n;return t=e,(r=[{key:"_stringify",value:function(e){return null==e||"number"==typeof e&&isNaN(e)?e="":"string"!=typeof e&&(e=String(e)),e}}])&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.BaseValidatorClass=a},2780:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),parseFloat(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2781:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r,n;(0,o.default)(e),"object"===a(t)?(r=t.min||0,n=t.max):(r=arguments[1],n=arguments[2]);var i=encodeURI(e).split(/%..|./).length-1;return i>=r&&(void 0===n||i<=n)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}e.exports=t.default,e.exports.default=t.default},2782:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(e);var r=(t=t||{}).hasOwnProperty("allow_leading_zeroes")&&!t.allow_leading_zeroes?a:i,n=!t.hasOwnProperty("min")||e>=t.min,c=!t.hasOwnProperty("max")||e<=t.max,u=!t.hasOwnProperty("lt")||e<t.lt,l=!t.hasOwnProperty("gt")||e>t.gt;return r.test(e)&&n&&c&&u&&l};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,i=/^[-+]?[0-9]+$/;e.exports=t.default,e.exports.default=t.default},2783:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)},t.fullWidth=void 0;var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;t.fullWidth=a},2784:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)},t.halfWidth=void 0;var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;t.halfWidth=a},2785:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^[0-9A-F]+$/i;e.exports=t.default,e.exports.default=t.default},2786:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(e);var r=t?new RegExp("^[".concat(t,"]+"),"g"):/^\s+/g;return e.replace(r,"")};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2787:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(e);for(var r=t?new RegExp("[".concat(t,"]")):/\s/,n=e.length-1;n>=0&&r.test(e[n]);n--);return n<e.length?e.substr(0,n+1):e};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2788:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.default)(e),e.replace(new RegExp("[".concat(t,"]+"),"g"),"")};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2790:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(a=o.key,i=void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===n(i)?i:String(i)),o)}var a,i}var a=r(2835),i=r(206),c=r(1457),u=r(2779).BaseValidatorClass,l=r(2833).MobileValidatorClass,s=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/,f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"httpURL",value:function(e){e=this._stringify(e);try{var t=new URL(e);if("https:"!==t.protocol&&"http:"!==t.protocol)throw new Error("protocol error")}catch(e){return this.__("请输入正确的 HTTP(s) URL 地址")}}},{key:"alphanumeric",value:function(e){if(!(e=this._stringify(e))||!a.isAlphanumeric(e))return this.__("必须都是字符和数字")}},{key:"numeric",value:function(e){if(!(e=this._stringify(e))||!a.isNumeric(e))return this.__("必须都是数字字符")}},{key:"decimal",value:function(e){if(!(e=this._stringify(e))||!a.isDecimal(e))return this.__("必须是小数或者整数")}},{key:"mobileCode",value:function(e,t){if("string"!=typeof e)return this.__("必须是字符串");if(!a.isNumeric(e))return this.__("必须都是数字字符");var r=t&&t.min||4;return e.length<r?this.__("至少 {s} 个数字",{s:r}):void 0}},{key:"IP",value:function(e){if(!(e=this._stringify(e))||!a.isIP(e))return this.__("必须是 IP v4 或者 v6 格式")}},{key:"IPv4",value:function(e){if(!(e=this._stringify(e))||!a.isIP(e,4))return this.__("必须是 IP v4 格式")}},{key:"IPv6",value:function(e){if(!(e=this._stringify(e))||!a.isIP(e,6))return this.__("必须是 IP v6 格式")}},{key:"bookPublic",value:function(e){if("number"!=typeof e){if(!(e=this._stringify(e))||!a.isNumeric(e))return this.__("public 参数只允许是 0、1 或者 2");e=parseInt(e)}var t=i.book.PUBLIC;if(e!==t.public&&e!==t.private&&e!==t.intranet)return this.__("public 参数只允许是 0、1 或者 2")}},{key:"starType",value:function(e){if(e){var t=["Book","Design"];return t.includes(e)?void 0:this.__("type 参数只允许为 {s}",{s:t.join(", ")})}}},{key:"searchPage250",value:function(e){if("number"!=typeof e){if(!(e=this._stringify(e))||!a.isNumeric(e))return this.__("只允许是正整数并且要小于等于 250");e=parseInt(e)}if(e<1||e>250||isNaN(e))return this.__("只允许是正整数并且要小于等于 250")}},{key:"isEmail",value:function(e){return e=this._stringify(e),a.isEmail(e)}},{key:"isUser",value:function(e){return e=this._stringify(e),/^[A-Za-z0-9][A-Za-z0-9\-_\.]{1,64}$/.test(e)}},{key:"isoDate",value:function(e){if(!e||!s.test(e))return this.__("必须是符合 ISO Date 格式的字符串")}},{key:"looseUrl",value:function(e){e=this._stringify(e);var t=this.__("请输入正确的 URL 地址");if(!e)return t;if(!/^\//.test(e)){if(/^\s*javascript:\/\//i.test(e))return t;try{new URL(e)}catch(e){return t}}}},{key:"stringArr",value:function(e,t){if(e&&t.values&&(e=e.split(",").map((function(e){return e.trim()})),e.some((function(e){return!t.values.includes(e)}))))return this.__("必须是 {type} 其中的值",{type:t.values.join("、")})}}])&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d=c.apply(void 0,[u].concat([l,f]));t.Validator=d,"undefined"!=typeof window&&"function"==typeof window.__&&(t.validator=new d(window.__))},2791:function(e,t,r){"use strict";t.a={contentArea:"index-module_contentArea_wf4Pe",switchTitle:"index-module_switchTitle_7k-8X",switchButton:"index-module_switchButton_zitq8",tip:"index-module_tip_9Yp4f"}},2802:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(2),i=r.n(a),c=r(9),u=r.n(c),l=r(2771),s=r(141),f=r(1339),d="index-module_groupName_DppYx",p="index-module_groupNameText_XYhrt",h="index-module_groupNameScope_qP0XF",m=function(e){var t=e.group,r=e.size,n=e.nameStyleCls,a=e.linkStyleCls,i=e.showName,c=void 0===i||i,m=e.isLink,v=void 0===m||m,y=e.iconSize,b=e.radius,g=Object(s.d)(t)||Object(s.f)(t),w=c?o.a.createElement("a",{"data-testid":"group-name-link",href:"/".concat(t.login),title:t.name,className:u()(d,n)},o.a.createElement("span",{"data-testid":"group-name-text",className:u()(p,"group-name-text")},t.name),g&&o.a.createElement("span",{className:h},o.a.createElement(f.a,{group:t,size:16}))):null;return!v&&w&&(w=o.a.createElement("span",{title:t.name,className:u()(d,n)},o.a.createElement("span",{"data-testid":"group-name-text",className:u()(p,"group-name-text")},t.name),g&&o.a.createElement("span",{className:h},o.a.createElement(f.a,{group:t,size:16})))),o.a.createElement(o.a.Fragment,null,v?o.a.createElement("a",{"data-testid":"group-avatar-link",href:"/".concat(t.login),title:t.name,className:a},o.a.createElement(l.a,{group:t,size:r,iconSize:y,radius:b})):o.a.createElement(l.a,{group:t,size:r,iconSize:y,radius:b}),w)};m.propTypes={organization:i.a.object,group:i.a.object.isRequired,size:i.a.number,showName:i.a.bool,isLink:i.a.bool,nameStyleCls:i.a.string,iconSize:i.a.number,radius:i.a.number};t.a=m},2805:function(e,t,r){"use strict";r(270);var n=r(64),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(176),l=r.n(u),s=r(490),f=r(141),d=r(2802),p=r(2834),h="index-module_name_2g47z";function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=n.a.Option;function b(e){var t=e.current,r=e.disabled,i=e.groups,c=e.placeholder,u=e.size,v=Object(f.f)()?__("知识小组"):__("团队"),b=m(Object(o.useState)(!1),2),g=b[0],w=b[1];function _(){w(!0)}return a.a.createElement("div",{className:"group-selector ".concat(e.className||""),"data-testid":"group-selector"},a.a.createElement(n.a,{size:u,showSearch:!0,disabled:r,getPopupContainer:function(e){return e.parentNode},placeholder:c,dropdownMatchSelectWidth:!1,notFoundContent:a.a.createElement("div",{className:"blankslate"},a.a.createElement("span",null,Object(f.f)()?__("没有{groupTitle}信息",{create:a.a.createElement("a",{onClick:_},__("新建")),groupTitle:v}):__("没有{groupTitle}信息，快去{create}一个吧",{create:a.a.createElement("a",{onClick:_},__("新建")),groupTitle:v}))),value:t&&t.login,onChange:function(t){if(i&&i.length){var r=i.find((function(e){return e.login===t}));e.onChange&&e.onChange(r)}},filterOption:function(e,t){if(!t.group)return!1;var r=t.group,n=r.login,o=r.name,a=e.toLowerCase();return n.toLowerCase().indexOf(a)>=0||o.toLowerCase().indexOf(a)>=0},placement:"bottomLeft"},i&&i.length?l()(i,"id").map((function(e){return a.a.createElement(y,{"data-testid":"group-selector-".concat(e.login),key:e.login,value:e.login,group:e,title:e.name},a.a.createElement("div",{className:"group-selector-item"},a.a.createElement(d.a,{organization:e.organization,group:e,size:24,showCard:!1,nameStyleCls:h,isLink:!1})),a.a.createElement(s.a,null))})):null),a.a.createElement(p.default,{isModalVisible:g,handleCancel:function(){w(!1)}}))}b.defaultProps={size:"middle",placeholder:__("请选择{groupTitle}",{groupTitle:Object(f.f)()?__("知识小组"):__("团队")}),groups:[],current:{},onChange:function(){}},b.propTypes={groups:c.a.arrayOf(c.a.object),current:c.a.shape({login:c.a.string,name:c.a.string}),onChange:c.a.func,className:c.a.string,placeholder:c.a.string,disabled:c.a.bool,size:c.a.string};t.a=b},2806:function(e,t,r){"use strict";var n=r(0),o=r(2),a=r(2903);function i(){}i.prototype=Object.create(n.Component.prototype),i.displayName="DocumentTitle",i.propTypes={title:o.string.isRequired},i.prototype.render=function(){return this.props.children?n.Children.only(this.props.children):null},e.exports=a((function(e){var t=e[e.length-1];if(t)return t.title}),(function(e){var t=e||"";t!==document.title&&(document.title=t)}))(i)},2816:function(e,t,r){var n=r(403),o=r(791),a=r(792),i=r(290),c=r(237),u=r(404);e.exports=function(e,t,r,l){var s=-1,f=o,d=!0,p=e.length,h=[],m=t.length;if(!p)return h;r&&(t=i(t,c(r))),l?(f=a,d=!1):t.length>=200&&(f=u,d=!1,t=new n(t));e:for(;++s<p;){var v=e[s],y=null==r?v:r(v);if(v=l||0!==v?v:0,d&&y==y){for(var b=m;b--;)if(t[b]===y)continue e;h.push(v)}else f(t,y,l)||h.push(v)}return h}},2833:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(a=o.key,i=void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===n(i)?i:String(i)),o)}var a,i}var a=r(1457),i=r(2779).BaseValidatorClass,c=/^(13\d|14\d|15[012356789]|16[567]|17[01235678]|18\d|19\d)\d{8}(\+\d+)?$/,u=/^\+[1-9]\d{0,2}? \d{1,20}$/,l=/^\+86 /,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"chinaMobilePhone",value:function(e){if(!(e=this._stringify(e))||!c.test(e))return this.__("输入正确手机号")}},{key:"globalMobilePhone",value:function(e){return(e=this._stringify(e))&&u.test(e)?l.test(e)?this.__("中国手机号码不需要添加 +86"):void 0:this.__("必须是合法的手机号码")}},{key:"mobilePhone",value:function(e){if(this.globalMobilePhone(e))return l.test(e)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(e)}},{key:"mobilePhoneForNonChinese",value:function(e){if(this.globalMobilePhone(e))return l.test(e)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(e)?this.__("必须是合法的手机号码"):void 0}}])&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.MobileValidatorClass=s,t.chinaMobilePhoneRE=c,t.globalMobilePhoneRE=u,t.MobileValidator=a.apply(void 0,[i].concat([s]))},2834:function(e,t,r){"use strict";r.r(t);r(63);var n=r(23),o=(r(92),r(45)),a=(r(104),r(38)),i=(r(62),r(21)),c=(r(305),r(61)),u=r(0),l=r.n(u),s=r(2),f=r.n(s),d=r(621),p=r.n(d),h=r(962),m=r.n(h),v=r(725),y=r(2801),b=r(1341),g=r(570),w=r(981),_=r(777),O=r(1348),E=w.a.LiteSearchSelector,S=function(e){var t,r,n={type:e.type,me:e.me},o=Object(u.useMemo)((function(){return _.a.create(n)}),[n]);return null!==(t=e.organization)&&void 0!==t&&t.id&&(r=l.a.createElement(O.a,null)),l.a.createElement(E,{type:e.type,userClassType:"normal",isLiteSearchSelector:!0,searchUser:o.searchUser,getDefaultUsers:e.getDefaultUsers||o.searchUsersByIds,checkValid:o.checkValid,onChange:e.onChange,initialValues:e.initialValues,notFoundContent:r})};S.propTypes={type:f.a.string,onChange:f.a.func,initialValues:f.a.array,getDefaultUsers:f.a.func};var x=Object(g.d)((function(e){return{organization:e.organization,me:e.me}}))(S),j=r(33),k=r(2768),P=r(18),C=r(299),T=r(955),L=r(2242),A={newGroupModal:"index-module_newGroupModal_An+Qw",title:"index-module_title_gTevv",titleDesc:"index-module_titleDesc_EmDkC",newGroupModalContent:"index-module_newGroupModalContent_LFB42",nameWrapper:"index-module_nameWrapper_OFOD6",avatarGroup:"index-module_avatarGroup_olnac",addMember:"index-module_addMember_i0kI8",addMemberBtn:"index-module_addMemberBtn_nvC2a",btnText:"index-module_btnText_6V0fp",submitBtn:"index-module_submitBtn_ZJkHv"};function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t=function(e){var t=function(e,t){if("object"!==I(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===I(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(){F=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==I(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function G(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function B(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){G(a,n,o,i,c,"next",e)}function c(e){G(a,n,o,i,c,"throw",e)}i(void 0)}))}}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,t):void 0}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var V=c.a.Item,H=function(e){var t=e.isModalVisible,r=e.handleCancel,s=e.group,f=e.organization,d=U(Object(u.useState)(),2),h=d[0],g=d[1],w=U(Object(u.useState)(null==s?void 0:s.avatar),2),_=w[0],O=w[1],E=U(Object(u.useState)("group-type-default"),2),S=E[0],I=E[1],N=U(Object(u.useState)(!0),2),D=N[0],R=N[1],G=U(Object(u.useState)(!1),2),z=G[0],W=G[1],H=U(Object(u.useState)(!1),2),q=H[0],K=H[1],Y=U(Object(u.useState)([]),2),$=Y[0],Z=Y[1],J=U(Object(u.useState)(P.PRIVACY.private),2),X=J[0],Q=J[1],ee=Object(u.useRef)(),te=Object(u.useRef)(null),re=Object(u.useMemo)((function(){return $.map((function(e){return e.user_id||e.id}))}),[$]);Object(u.useEffect)((function(){var e;null===(e=ee.current)||void 0===e||e.focus()}),[]);var ne=U(c.a.useForm(),1)[0],oe=function(e){e&&e.preventDefault(),K((function(e){return!e}))};function ae(){return(ae=B(F().mark((function t(r){var o,a,i,c,u,l,s,d;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),W(!0),o=ne.getFieldsValue(),_&&(o.avatar=_),$&&(o.members=$),a={name:h,description:o.description,avatar:o.avatar,public:X,scene:"default"},null!=f&&f.id&&(a.organization_id=f.id),t.prev=7,t.next=10,j.a.groups.createGroup(a);case 10:if(i=t.sent){if(o.members)try{l=null===(u=o.members.find(C.a.isDepartment))||void 0===u?void 0:u.id,s=o.members.filter((function(e){return!C.a.isDepartment(e)})),d=p()({group_id:i.id,role:1,users:C.a.serializeUserPostBody(s),department_id:l}),j.a.groupUsers.create(d)}catch(e){n.a.error(e.message)}n.a.success(__("新建成功"),1e3),T.a?(Object(L.b)(),e.handleCancel()):window.location.href="/".concat(i.login),null===(c=e.handleSuccess)||void 0===c||c.call(e)}return W(!1),t.abrupt("return",i);case 16:t.prev=16,t.t0=t.catch(7),W(!1),n.a.error(t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[7,16]])})))).apply(this,arguments)}var ie=Object(u.useCallback)(B(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$);case 1:case"end":return e.stop()}}),e)}))),[$]),ce=function(){var t=B(F().mark((function t(r){var n,o,a,i;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=te&&te.current){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,te.current.searchSelectorBiz.getRealUsers(r);case 4:n=t.sent,o=e.me,a=o.user_id||o.id,i=n.filter((function(e){return(e.user_id||e.id)!==a})),Z((function(e){var t=e.findIndex(C.a.isDepartment);return[t,i.findIndex(C.a.isDepartment)].every((function(e){return e>-1}))&&e.splice(t,1),m()([].concat(M(e),M(i)),(function(e){return e.user_id||e.id}))})),oe();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{className:A.newGroupModal,title:l.a.createElement("div",{className:A.title},l.a.createElement("p",null,__("新建团队")),l.a.createElement("p",{className:A.titleDesc},__("和成员一起进行项目协作和知识管理"))),width:432,visible:t,onCancel:r,footer:[l.a.createElement(i.a,{className:A.submitBtn,key:"submit",type:"primary",disabled:D,loading:z,onClick:function(e){return ae.apply(this,arguments)}},__("新建"))]},l.a.createElement("div",{className:A.newGroupModalContent},l.a.createElement(c.a,{form:ne,layout:"vertical",onValuesChange:function(e){ne.setFieldsValue(e)}},l.a.createElement(V,{name:"name",colon:!1,label:__("基本信息")},l.a.createElement("div",{className:A.nameWrapper},l.a.createElement(y.a,{className:A.avatarGroup,avatarUrl:_,avatarName:h,avatarIcon:S,handleUploaded:function(e){e&&(O(e),I(null))},onlyAvatar:!0}),l.a.createElement(a.a,{type:"text",autoComplete:"off",maxLength:36,placeholder:__("团队名称"),onChange:function(e){g(e.target.value),e.target.value.trim()?R(!1):R(!0)},ref:ee}))),l.a.createElement(V,{colon:!1,name:"description"},l.a.createElement(a.a.TextArea,{className:"group-form-desc",autoComplete:"off",autoSize:{minRows:4},maxLength:100,placeholder:__("团队")+__("简介")})),l.a.createElement(V,{colon:!1,label:l.a.createElement("div",{className:A.addMember},l.a.createElement("div",{className:A.addMemberText},__("添加成员")),l.a.createElement("div",{onClick:oe},l.a.createElement("div",{className:A.addMemberBtn},l.a.createElement(v.a,null),l.a.createElement("span",{className:A.btnText},__("批量添加"))))),name:"users"},!q&&l.a.createElement(x,{getDefaultUsers:window.appData.isYuque?null:ie,type:"simple",initialValues:re,onChange:function(e){Z(e)}})),l.a.createElement(V,{colon:!1,label:__("公开性")},l.a.createElement(k.a,{type:"group",checked:X!==P.PRIVACY.private,onChangePermission:function(e){Q(e)},organization:f}))))),q&&l.a.createElement(b.a,{ref:te,type:"simpleWithRole",visible:q,title:__("批量添加"),roles:[{key:"member",label:__("成员"),value:2}],onCancel:oe,onSubmit:ce,initialValues:re,getDefaultUsers:window.appData.isYuque?null:ie}))};H.propTypes={isModalVisible:f.a.bool,handleCancel:f.a.func,handleSuccess:f.a.func,group:f.a.object,organization:f.a.object};t.default=function(e){var t=window.appData,r=t.me,n=t.organization,o=D(D({},e),{},{me:r,organization:n});return l.a.createElement(H,o)}},2835:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=Ee(r(2760)),o=Ee(r(2780)),a=Ee(r(2841)),i=Ee(r(2842)),c=Ee(r(2843)),u=Ee(r(2844)),l=Ee(r(2845)),s=Ee(r(2846)),f=Ee(r(2847)),d=Ee(r(2848)),p=Ee(r(2752)),h=Ee(r(2849)),m=Ee(r(2762)),v=Ee(r(2850)),y=Oe(r(2851)),b=Oe(r(2852)),g=Ee(r(2853)),w=Ee(r(2854)),_=Ee(r(2855)),O=Ee(r(2856)),E=Ee(r(2857)),S=Ee(r(2783)),x=Ee(r(2784)),j=Ee(r(2858)),k=Ee(r(2859)),P=Ee(r(2860)),C=Ee(r(2782)),T=Oe(r(2861)),L=Ee(r(2862)),A=Ee(r(2785)),I=Ee(r(2863)),N=Ee(r(2864)),D=Ee(r(2865)),R=Ee(r(2866)),M=Ee(r(2867)),F=Ee(r(2868)),G=Ee(r(2869)),B=Ee(r(2870)),U=Ee(r(2871)),z=Ee(r(2781)),W=Ee(r(2872)),V=Ee(r(2873)),H=Ee(r(2874)),q=Ee(r(2875)),K=Ee(r(2876)),Y=Ee(r(2877)),$=Ee(r(2878)),Z=Ee(r(2879)),J=Ee(r(2880)),X=Ee(r(2881)),Q=Oe(r(2882)),ee=Ee(r(2883)),te=Ee(r(2884)),re=Ee(r(2885)),ne=Ee(r(2886)),oe=Ee(r(2887)),ae=Ee(r(2888)),ie=Ee(r(2889)),ce=Ee(r(2890)),ue=Ee(r(2891)),le=Ee(r(2892)),se=Oe(r(2893)),fe=Ee(r(2786)),de=Ee(r(2787)),pe=Ee(r(2894)),he=Ee(r(2895)),me=Ee(r(2896)),ve=Ee(r(2897)),ye=Ee(r(2898)),be=Ee(r(2788)),ge=Ee(r(2899)),we=Ee(r(2900)),_e=Ee(r(2761));function Oe(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function Ee(e){return e&&e.__esModule?e:{default:e}}var Se={version:"10.11.0",toDate:n.default,toFloat:o.default,toInt:a.default,toBoolean:i.default,equals:c.default,contains:u.default,matches:l.default,isEmail:s.default,isURL:f.default,isMACAddress:d.default,isIP:p.default,isIPRange:h.default,isFQDN:m.default,isBoolean:v.default,isAlpha:y.default,isAlphaLocales:y.locales,isAlphanumeric:b.default,isAlphanumericLocales:b.locales,isNumeric:g.default,isPort:w.default,isLowercase:_.default,isUppercase:O.default,isAscii:E.default,isFullWidth:S.default,isHalfWidth:x.default,isVariableWidth:j.default,isMultibyte:k.default,isSurrogatePair:P.default,isInt:C.default,isFloat:T.default,isFloatLocales:T.locales,isDecimal:L.default,isHexadecimal:A.default,isDivisibleBy:I.default,isHexColor:N.default,isISRC:D.default,isMD5:R.default,isHash:M.default,isJWT:F.default,isJSON:G.default,isEmpty:B.default,isLength:U.default,isByteLength:z.default,isUUID:W.default,isMongoId:V.default,isAfter:H.default,isBefore:q.default,isIn:K.default,isCreditCard:Y.default,isIdentityCard:$.default,isISIN:Z.default,isISBN:J.default,isISSN:X.default,isMobilePhone:Q.default,isMobilePhoneLocales:Q.locales,isPostalCode:se.default,isPostalCodeLocales:se.locales,isCurrency:ee.default,isISO8601:te.default,isRFC3339:re.default,isISO31661Alpha2:ne.default,isISO31661Alpha3:oe.default,isBase64:ae.default,isDataURI:ie.default,isMagnetURI:ce.default,isMimeType:ue.default,isLatLong:le.default,ltrim:fe.default,rtrim:de.default,trim:pe.default,escape:he.default,unescape:me.default,stripLow:ve.default,whitelist:ye.default,blacklist:be.default,isWhitelisted:ge.default,normalizeEmail:we.default,toString:_e.default};t.default=Se,e.exports=t.default,e.exports.default=t.default},2841:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.default)(e),parseInt(e,t||10)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2842:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,o.default)(e),t)return"1"===e||"true"===e;return"0"!==e&&"false"!==e&&""!==e};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2843:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.default)(e),e===t};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2844:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,n.default)(e),e.indexOf((0,o.default)(t))>=0};var n=a(r(2742)),o=a(r(2761));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},2845:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){(0,o.default)(e),"[object RegExp]"!==Object.prototype.toString.call(t)&&(t=new RegExp(t,r));return t.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2846:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e),(t=(0,o.default)(t,l)).require_display_name||t.allow_display_name){var r=e.match(s);if(r)e=r[1];else if(t.require_display_name)return!1}var u=e.split("@"),v=u.pop(),y=u.join("@"),b=v.toLowerCase();if(t.domain_specific_validation&&("gmail.com"===b||"googlemail.com"===b)){var g=(y=y.toLowerCase()).split("+")[0];if(!(0,a.default)(g.replace(".",""),{min:6,max:30}))return!1;for(var w=g.split("."),_=0;_<w.length;_++)if(!d.test(w[_]))return!1}if(!(0,a.default)(y,{max:64})||!(0,a.default)(v,{max:254}))return!1;if(!(0,i.default)(v,{require_tld:t.require_tld})){if(!t.allow_ip_domain)return!1;if(!(0,c.default)(v)){if(!v.startsWith("[")||!v.endsWith("]"))return!1;var O=v.substr(1,v.length-2);if(0===O.length||!(0,c.default)(O))return!1}}if('"'===y[0])return y=y.slice(1,y.length-1),t.allow_utf8_local_part?m.test(y):p.test(y);for(var E=t.allow_utf8_local_part?h:f,S=y.split("."),x=0;x<S.length;x++)if(!E.test(S[x]))return!1;return!0};var n=u(r(2742)),o=u(r(2748)),a=u(r(2781)),i=u(r(2762)),c=u(r(2752));function u(e){return e&&e.__esModule?e:{default:e}}var l={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0},s=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\,\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,f=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,d=/^[a-z\d]+$/,p=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,h=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,m=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;e.exports=t.default,e.exports.default=t.default},2847:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e),!e||e.length>=2083||/[\s<>]/.test(e))return!1;if(0===e.indexOf("mailto:"))return!1;var r,c,f,d,p,h,m,v;if(t=(0,i.default)(t,u),m=e.split("#"),e=m.shift(),m=e.split("?"),e=m.shift(),(m=e.split("://")).length>1){if(r=m.shift().toLowerCase(),t.require_valid_protocol&&-1===t.protocols.indexOf(r))return!1}else{if(t.require_protocol)return!1;if("//"===e.substr(0,2)){if(!t.allow_protocol_relative_urls)return!1;m[0]=e.substr(2)}}if(""===(e=m.join("://")))return!1;if(m=e.split("/"),""===(e=m.shift())&&!t.require_host)return!0;if((m=e.split("@")).length>1){if(t.disallow_auth)return!1;if((c=m.shift()).indexOf(":")>=0&&c.split(":").length>2)return!1}d=m.join("@"),h=null,v=null;var y=d.match(l);y?(f="",v=y[1],h=y[2]||null):(f=(m=d.split(":")).shift(),m.length&&(h=m.join(":")));if(null!==h&&(p=parseInt(h,10),!/^[0-9]+$/.test(h)||p<=0||p>65535))return!1;if(!((0,a.default)(f)||(0,o.default)(f,t)||v&&(0,a.default)(v,6)))return!1;if(f=f||v,t.host_whitelist&&!s(f,t.host_whitelist))return!1;if(t.host_blacklist&&s(f,t.host_blacklist))return!1;return!0};var n=c(r(2742)),o=c(r(2762)),a=c(r(2752)),i=c(r(2748));function c(e){return e&&e.__esModule?e:{default:e}}var u={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1},l=/^\[([^\]]+)\](?::([0-9]+))?$/;function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(e===n||(o=n,"[object RegExp]"===Object.prototype.toString.call(o)&&n.test(e)))return!0}var o;return!1}e.exports=t.default,e.exports.default=t.default},2848:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,o.default)(e),t&&t.no_colons)return i.test(e);return a.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/,i=/^([0-9a-fA-F]){12}$/;e.exports=t.default,e.exports.default=t.default},2849:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,n.default)(e);var t=e.split("/");if(2!==t.length)return!1;if(!i.test(t[1]))return!1;if(t[1].length>1&&t[1].startsWith("0"))return!1;return(0,o.default)(t[0],4)&&t[1]<=32&&t[1]>=0};var n=a(r(2742)),o=a(r(2752));function a(e){return e&&e.__esModule?e:{default:e}}var i=/^\d{1,2}$/;e.exports=t.default,e.exports.default=t.default},2850:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),["true","false","1","0"].indexOf(e)>=0};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2851:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if((0,o.default)(e),t in a.alpha)return a.alpha[t].test(e);throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var n,o=(n=r(2742))&&n.__esModule?n:{default:n},a=r(2753);var i=Object.keys(a.alpha);t.locales=i},2852:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if((0,o.default)(e),t in a.alphanumeric)return a.alphanumeric[t].test(e);throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var n,o=(n=r(2742))&&n.__esModule?n:{default:n},a=r(2753);var i=Object.keys(a.alphanumeric);t.locales=i},2853:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,o.default)(e),t&&t.no_symbols)return i.test(e);return a.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^[+-]?([0-9]*[.])?[0-9]+$/,i=/^[0-9]+$/;e.exports=t.default,e.exports.default=t.default},2854:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e,{min:0,max:65535})};var n,o=(n=r(2782))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2855:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),e===e.toLowerCase()};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2856:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),e===e.toUpperCase()};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2857:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^[\x00-\x7F]+$/;e.exports=t.default,e.exports.default=t.default},2858:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.fullWidth.test(e)&&i.halfWidth.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n},a=r(2783),i=r(2784);e.exports=t.default,e.exports.default=t.default},2859:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/[^\x00-\x7F]/;e.exports=t.default,e.exports.default=t.default},2860:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;e.exports=t.default,e.exports.default=t.default},2861:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(e),t=t||{};var r=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(t.locale?a.decimal[t.locale]:".","[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));if(""===e||"."===e||"-"===e||"+"===e)return!1;var n=parseFloat(e.replace(",","."));return r.test(e)&&(!t.hasOwnProperty("min")||n>=t.min)&&(!t.hasOwnProperty("max")||n<=t.max)&&(!t.hasOwnProperty("lt")||n<t.lt)&&(!t.hasOwnProperty("gt")||n>t.gt)},t.locales=void 0;var n,o=(n=r(2742))&&n.__esModule?n:{default:n},a=r(2753);var i=Object.keys(a.decimal);t.locales=i},2862:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,o.default)(e),(t=(0,n.default)(t,u)).locale in i.decimal)return!(0,a.default)(l,e.replace(/ /g,""))&&function(e){var t=new RegExp("^[-+]?([0-9]+)?(\\".concat(i.decimal[e.locale],"[0-9]{").concat(e.decimal_digits,"})").concat(e.force_decimal?"":"?","$"));return t}(t).test(e);throw new Error("Invalid locale '".concat(t.locale,"'"))};var n=c(r(2748)),o=c(r(2742)),a=c(r(2763)),i=r(2753);function c(e){return e&&e.__esModule?e:{default:e}}var u={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},l=["","-","+"];e.exports=t.default,e.exports.default=t.default},2863:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,n.default)(e),(0,o.default)(e)%parseInt(t,10)==0};var n=a(r(2742)),o=a(r(2780));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},2864:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i;e.exports=t.default,e.exports.default=t.default},2865:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;e.exports=t.default,e.exports.default=t.default},2866:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^[a-f0-9]{32}$/;e.exports=t.default,e.exports.default=t.default},2867:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.default)(e),new RegExp("^[a-f0-9]{".concat(a[t],"}$")).test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};e.exports=t.default,e.exports.default=t.default},2868:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^([A-Za-z0-9\-_~+\/]+[=]{0,2})\.([A-Za-z0-9\-_~+\/]+[=]{0,2})(?:\.([A-Za-z0-9\-_~+\/]+[=]{0,2}))?$/;e.exports=t.default,e.exports.default=t.default},2869:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,o.default)(e);try{var t=JSON.parse(e);return!!t&&"object"===a(t)}catch(e){}return!1};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}e.exports=t.default,e.exports.default=t.default},2870:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,n.default)(e),0===((t=(0,o.default)(t,i)).ignore_whitespace?e.trim().length:e.length)};var n=a(r(2742)),o=a(r(2748));function a(e){return e&&e.__esModule?e:{default:e}}var i={ignore_whitespace:!1};e.exports=t.default,e.exports.default=t.default},2871:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r,n;(0,o.default)(e),"object"===a(t)?(r=t.min||0,n=t.max):(r=arguments[1],n=arguments[2]);var i=e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],c=e.length-i.length;return c>=r&&(void 0===n||c<=n)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}e.exports=t.default,e.exports.default=t.default},2872:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";(0,o.default)(e);var r=a[t];return r&&r.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};e.exports=t.default,e.exports.default=t.default},2873:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.default)(e),(0,o.default)(e)&&24===e.length};var n=a(r(2742)),o=a(r(2785));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},2874:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String(new Date);(0,n.default)(e);var r=(0,o.default)(t),a=(0,o.default)(e);return!!(a&&r&&a>r)};var n=a(r(2742)),o=a(r(2760));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},2875:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String(new Date);(0,n.default)(e);var r=(0,o.default)(t),a=(0,o.default)(e);return!!(a&&r&&a<r)};var n=a(r(2742)),o=a(r(2760));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},2876:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r;if((0,n.default)(e),"[object Array]"===Object.prototype.toString.call(t)){var a=[];for(r in t)({}).hasOwnProperty.call(t,r)&&(a[r]=(0,o.default)(t[r]));return a.indexOf(e)>=0}if("object"===i(t))return t.hasOwnProperty(e);if(t&&"function"==typeof t.indexOf)return t.indexOf(e)>=0;return!1};var n=a(r(2742)),o=a(r(2761));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}e.exports=t.default,e.exports.default=t.default},2877:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,o.default)(e);var t=e.replace(/[- ]+/g,"");if(!a.test(t))return!1;for(var r,n,i,c=0,u=t.length-1;u>=0;u--)r=t.substring(u,u+1),n=parseInt(r,10),c+=i&&(n*=2)>=10?n%10+1:n,i=!i;return!(c%10!=0||!t)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11}|6[27][0-9]{14})$/;e.exports=t.default,e.exports.default=t.default},2878:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";if((0,o.default)(e),t in a)return a[t](e);if("any"===t){for(var r in a)if(a.hasOwnProperty(r)){var n=a[r];if(n(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a={ES:function(e){(0,o.default)(e);var t={X:0,Y:1,Z:2},r=e.trim().toUpperCase();if(!/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/.test(r))return!1;var n=r.slice(0,-1).replace(/[X,Y,Z]/g,(function(e){return t[e]}));return r.endsWith(["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"][n%23])}};e.exports=t.default,e.exports.default=t.default},2879:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,o.default)(e),!a.test(e))return!1;for(var t,r,n=e.replace(/[A-Z]/g,(function(e){return parseInt(e,36)})),i=0,c=!0,u=n.length-2;u>=0;u--)t=n.substring(u,u+1),r=parseInt(t,10),i+=c&&(r*=2)>=10?r+1:r,c=!c;return parseInt(e.substr(e.length-1),10)===(1e4-i)%10};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;e.exports=t.default,e.exports.default=t.default},2880:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,o.default)(t),!(r=String(r)))return e(t,10)||e(t,13);var n,u=t.replace(/[\s-]+/g,""),l=0;if("10"===r){if(!a.test(u))return!1;for(n=0;n<9;n++)l+=(n+1)*u.charAt(n);if("X"===u.charAt(9)?l+=100:l+=10*u.charAt(9),l%11==0)return!!u}else if("13"===r){if(!i.test(u))return!1;for(n=0;n<12;n++)l+=c[n%2]*u.charAt(n);if(u.charAt(12)-(10-l%10)%10==0)return!!u}return!1};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^(?:[0-9]{9}X|[0-9]{10})$/,i=/^(?:[0-9]{13})$/,c=[1,3];e.exports=t.default,e.exports.default=t.default},2881:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(e);var r=a;if(r=t.require_hyphen?r.replace("?",""):r,!(r=t.case_sensitive?new RegExp(r):new RegExp(r,"i")).test(e))return!1;for(var n=e.replace("-","").toUpperCase(),i=0,c=0;c<n.length;c++){var u=n[c];i+=("X"===u?10:+u)*(8-c)}return i%11==0};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a="^\\d{4}-?\\d{3}[\\dX]$";e.exports=t.default,e.exports.default=t.default},2882:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if((0,o.default)(e),r&&r.strictMode&&!e.startsWith("+"))return!1;if(Array.isArray(t))return t.some((function(t){if(a.hasOwnProperty(t)&&a[t].test(e))return!0;return!1}));if(t in a)return a[t].test(e);if(!t||"any"===t){for(var n in a){if(a.hasOwnProperty(n))if(a[n].test(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a={"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-EG":/^((\+?20)|0)?1[012]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)[569]\d{7}$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/\+?(88)?0?1[356789][0-9]{8}\b/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^(\+49)?0?1(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7}$/,"el-GR":/^(\+?30|0)?(69\d{8})$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28)\d{7}$/,"en-HK":/^(\+?852\-?)?[456789]\d{3}\-?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-KE":/^(\+?254|0)?[7]\d{8}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PK":/^((\+92)|(0092))-{0,1}\d{3}-{0,1}\d{7}$|^\d{11}$|^\d{4}-\d{7}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[89]\d{7}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"es-ES":/^(\+?34)?(6\d{1}|7[1234])\d{7}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4(0|1|2|4|5|6)?|50)\s?(\d\s?){4,8}\d$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36)(20|30|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"ja-JP":/^(\+?81|0)[789]0[ \-]?[1-9]\d{2}[ \-]?\d{5}$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"ms-MY":/^(\+?6?01){1}(([0145]{1}(\-|\s)?\d{7,8})|([236789]{1}(\s|\-)?\d{7}))$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"nl-BE":/^(\+?32|0)4?\d{8}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?[5-8]\d ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/(?=^(\+?5{2}\-?|0)[1-9]{2}\-?\d{4}\-?\d{4}$)(^(\+?5{2}\-?|0)[1-9]{2}\-?[6-9]{1}\d{3}\-?\d{4}$)|(^(\+?5{2}\-?|0)[1-9]{2}\-?9[6-9]{1}\d{3}\-?\d{4}$)/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"ro-RO":/^(\+?4?0)\s?7\d{2}(\/|\s|\.|\-)?\d{3}(\s|\.|\-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"vi-VN":/^(\+?84|0)((3([2-9]))|(5([689]))|(7([0|6-9]))|(8([1-5]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/};a["en-CA"]=a["en-US"],a["fr-BE"]=a["nl-BE"],a["zh-HK"]=a["en-HK"];var i=Object.keys(a);t.locales=i},2883:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.default)(e),function(e){var t="\\d{".concat(e.digits_after_decimal[0],"}");e.digits_after_decimal.forEach((function(e,r){0!==r&&(t="".concat(t,"|\\d{").concat(e,"}"))}));var r="(\\".concat(e.symbol.replace(/\./g,"\\."),")").concat(e.require_symbol?"":"?"),n="-?",o="[1-9]\\d{0,2}(\\".concat(e.thousands_separator,"\\d{3})*"),a="(".concat(["0","[1-9]\\d*",o].join("|"),")?"),i="(\\".concat(e.decimal_separator,"(").concat(t,"))").concat(e.require_decimal?"":"?"),c=a+(e.allow_decimal||e.require_decimal?i:"");e.allow_negatives&&!e.parens_for_negatives&&(e.negative_sign_after_digits?c+=n:e.negative_sign_before_digits&&(c=n+c));e.allow_negative_sign_placeholder?c="( (?!\\-))?".concat(c):e.allow_space_after_symbol?c=" ?".concat(c):e.allow_space_after_digits&&(c+="( (?!$))?");e.symbol_after_digits?c+=r:c=r+c;e.allow_negatives&&(e.parens_for_negatives?c="(\\(".concat(c,"\\)|").concat(c,")"):e.negative_sign_before_digits||e.negative_sign_after_digits||(c=n+c));return new RegExp("^(?!-? )(?=.*\\d)".concat(c,"$"))}(t=(0,n.default)(t,i)).test(e)};var n=a(r(2748)),o=a(r(2742));function a(e){return e&&e.__esModule?e:{default:e}}var i={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};e.exports=t.default,e.exports.default=t.default},2884:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(e);var r=a.test(e);return t&&r&&t.strict?function(e){var t=e.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);if(t){var r=Number(t[1]),n=Number(t[2]);return r%4==0&&r%100!=0?n<=366:n<=365}var o=e.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number),a=o[1],i=o[2],c=o[3],u=i?"0".concat(i).slice(-2):i,l=c?"0".concat(c).slice(-2):c,s=new Date("".concat(a,"-").concat(u||"01","-").concat(l||"01"));if(isNaN(s.getUTCFullYear()))return!1;if(i&&c)return s.getUTCFullYear()===a&&s.getUTCMonth()+1===i&&s.getUTCDate()===c;return!0}(e):r};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;e.exports=t.default,e.exports.default=t.default},2885:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),d.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/([01][0-9]|2[0-3])/,i=/[0-5][0-9]/,c=new RegExp("[-+]".concat(a.source,":").concat(i.source)),u=new RegExp("([zZ]|".concat(c.source,")")),l=new RegExp("".concat(a.source,":").concat(i.source,":").concat(/([0-5][0-9]|60)/.source).concat(/(\.[0-9]+)?/.source)),s=new RegExp("".concat(/[0-9]{4}/.source,"-").concat(/(0[1-9]|1[0-2])/.source,"-").concat(/([12]\d|0[1-9]|3[01])/.source)),f=new RegExp("".concat(l.source).concat(u.source)),d=new RegExp("".concat(s.source,"[ tT]").concat(f.source));e.exports=t.default,e.exports.default=t.default},2886:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.default)(e),(0,o.default)(i,e.toUpperCase())};var n=a(r(2742)),o=a(r(2763));function a(e){return e&&e.__esModule?e:{default:e}}var i=["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"];e.exports=t.default,e.exports.default=t.default},2887:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.default)(e),(0,o.default)(i,e.toUpperCase())};var n=a(r(2742)),o=a(r(2763));function a(e){return e&&e.__esModule?e:{default:e}}var i=["AFG","ALA","ALB","DZA","ASM","AND","AGO","AIA","ATA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BES","BIH","BWA","BVT","BRA","IOT","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHL","CHN","CXR","CCK","COL","COM","COG","COD","COK","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","FLK","FRO","FJI","FIN","FRA","GUF","PYF","ATF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HMD","VAT","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MYT","MEX","FSM","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PSE","PAN","PNG","PRY","PER","PHL","PCN","POL","PRT","PRI","QAT","REU","ROU","RUS","RWA","BLM","SHN","KNA","LCA","MAF","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SGS","SSD","ESP","LKA","SDN","SUR","SJM","SWZ","SWE","CHE","SYR","TWN","TJK","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","UMI","URY","UZB","VUT","VEN","VNM","VGB","VIR","WLF","ESH","YEM","ZMB","ZWE"];e.exports=t.default,e.exports.default=t.default},2888:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,o.default)(e);var t=e.length;if(!t||t%4!=0||a.test(e))return!1;var r=e.indexOf("=");return-1===r||r===t-1||r===t-2&&"="===e[t-1]};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/[^A-Z0-9+\/=]/i;e.exports=t.default,e.exports.default=t.default},2889:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,o.default)(e);var t=e.split(",");if(t.length<2)return!1;var r=t.shift().trim().split(";"),n=r.shift();if("data:"!==n.substr(0,5))return!1;var u=n.substr(5);if(""!==u&&!a.test(u))return!1;for(var l=0;l<r.length;l++)if(l===r.length-1&&"base64"===r[l].toLowerCase());else if(!i.test(r[l]))return!1;for(var s=0;s<t.length;s++)if(!c.test(t[s]))return!1;return!0};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^[a-z]+\/[a-z0-9\-\+]+$/i,i=/^[a-z\-]+=[a-z0-9\-]+$/i,c=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;e.exports=t.default,e.exports.default=t.default},2890:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e.trim())};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^magnet:\?xt=urn:[a-z0-9]+:[a-z0-9]{32,40}&dn=.+&tr=.+$/i;e.exports=t.default,e.exports.default=t.default},2891:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)||i.test(e)||c.test(e)};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+]{1,100}$/i,i=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,c=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;e.exports=t.default,e.exports.default=t.default},2892:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,o.default)(e),!e.includes(","))return!1;var t=e.split(",");return a.test(t[0])&&i.test(t[1])};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,i=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/;e.exports=t.default,e.exports.default=t.default},2893:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,o.default)(e),t in u)return u[t].test(e);if("any"===t){for(var r in u){if(u.hasOwnProperty(r))if(u[r].test(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var n,o=(n=r(2742))&&n.__esModule?n:{default:n};var a=/^\d{4}$/,i=/^\d{5}$/,c=/^\d{6}$/,u={AD:/^AD\d{3}$/,AT:a,AU:a,BE:a,BG:a,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:a,CZ:/^\d{3}\s?\d{2}$/,DE:i,DK:a,DZ:i,EE:i,ES:i,FI:i,FR:/^\d{2}\s?\d{3}$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,HR:/^([1-5]\d{4}$)/,HU:a,IL:i,IN:c,IS:/^\d{3}$/,IT:i,JP:/^\d{3}\-\d{4}$/,KE:i,LI:/^(948[5-9]|949[0-7])$/,LT:/^LT\-\d{5}$/,LU:a,LV:/^LV\-\d{4}$/,MX:i,NL:/^\d{4}\s?[a-z]{2}$/i,NO:a,PL:/^\d{2}\-\d{3}$/,PT:/^\d{4}\-\d{3}?$/,RO:c,RU:c,SA:i,SE:/^\d{3}\s?\d{2}$/,SI:a,SK:/^\d{3}\s?\d{2}$/,TN:a,TW:/^\d{3}(\d{2})?$/,UA:i,US:/^\d{5}(-\d{4})?$/,ZA:a,ZM:i},l=Object.keys(u);t.locales=l},2894:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,n.default)((0,o.default)(e,t),t)};var n=a(r(2787)),o=a(r(2786));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},2895:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2896:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),e.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`")};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2897:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,n.default)(e);var r=t?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return(0,o.default)(e,r)};var n=a(r(2742)),o=a(r(2788));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},2898:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.default)(e),e.replace(new RegExp("[^".concat(t,"]+"),"g"),"")};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2899:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(e);for(var r=e.length-1;r>=0;r--)if(-1===t.indexOf(e[r]))return!1;return!0};var n,o=(n=r(2742))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},2900:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t=(0,o.default)(t,a);var r=e.split("@"),n=r.pop(),f=[r.join("@"),n];if(f[1]=f[1].toLowerCase(),"gmail.com"===f[1]||"googlemail.com"===f[1]){if(t.gmail_remove_subaddress&&(f[0]=f[0].split("+")[0]),t.gmail_remove_dots&&(f[0]=f[0].replace(/\.+/g,s)),!f[0].length)return!1;(t.all_lowercase||t.gmail_lowercase)&&(f[0]=f[0].toLowerCase()),f[1]=t.gmail_convert_googlemaildotcom?"gmail.com":f[1]}else if(i.indexOf(f[1])>=0){if(t.icloud_remove_subaddress&&(f[0]=f[0].split("+")[0]),!f[0].length)return!1;(t.all_lowercase||t.icloud_lowercase)&&(f[0]=f[0].toLowerCase())}else if(c.indexOf(f[1])>=0){if(t.outlookdotcom_remove_subaddress&&(f[0]=f[0].split("+")[0]),!f[0].length)return!1;(t.all_lowercase||t.outlookdotcom_lowercase)&&(f[0]=f[0].toLowerCase())}else if(u.indexOf(f[1])>=0){if(t.yahoo_remove_subaddress){var d=f[0].split("-");f[0]=d.length>1?d.slice(0,-1).join("-"):d[0]}if(!f[0].length)return!1;(t.all_lowercase||t.yahoo_lowercase)&&(f[0]=f[0].toLowerCase())}else l.indexOf(f[1])>=0?((t.all_lowercase||t.yandex_lowercase)&&(f[0]=f[0].toLowerCase()),f[1]="yandex.ru"):t.all_lowercase&&(f[0]=f[0].toLowerCase());return f.join("@")};var n,o=(n=r(2748))&&n.__esModule?n:{default:n};var a={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},i=["icloud.com","me.com"],c=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],u=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"],l=["yandex.ru","yandex.ua","yandex.kz","yandex.com","yandex.by","ya.ru"];function s(e){return e.length>1?e:""}e.exports=t.default,e.exports.default=t.default},2903:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var o=r(0),a=n(o),i=n(r(347));function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,r){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==r&&"function"!=typeof r)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(n){if("function"!=typeof n)throw new Error("Expected WrappedComponent to be a React component.");var l,s=[];function f(){l=e(s.map((function(e){return e.props}))),d.canUseDOM?t(l):r&&(l=r(l))}var d=function(e){var t,r;function o(){return e.apply(this,arguments)||this}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o.peek=function(){return l},o.rewind=function(){if(o.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=l;return l=void 0,s=[],e};var c=o.prototype;return c.shouldComponentUpdate=function(e){return!i(e,this.props)},c.componentWillMount=function(){s.push(this),f()},c.componentDidUpdate=function(){f()},c.componentWillUnmount=function(){var e=s.indexOf(this);s.splice(e,1),f()},c.render=function(){return a.createElement(n,this.props)},o}(o.Component);return c(d,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")"),c(d,"canUseDOM",u),d}}},2908:function(e,t,r){"use strict";r(279);var n=r(136),o=r(0),a=r.n(o),i=r(9),c=r.n(i),u=r(2),l=r.n(u),s=r(570),f=r(30),d=r(1342),p={bookIconPopover:"BookIcon-module_bookIconPopover_-uyNA",bookTitle:"BookIcon-module_bookTitle_hK56I",bookIconSelector:"BookIcon-module_bookIconSelector_yaICm",iconSelectorTab:"BookIcon-module_iconSelectorTab_SP0xx",iconSelectorTabActive:"BookIcon-module_iconSelectorTabActive_l6Wg3",iconSelectorContent:"BookIcon-module_iconSelectorContent_3acOH",iconSelectorContentTab2:"BookIcon-module_iconSelectorContentTab2_sapYE",iconSelectorColorPicker:"BookIcon-module_iconSelectorColorPicker_W+uxH",spanActive:"BookIcon-module_spanActive_zUcmt"};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function E(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}var x=d.b.getSelectorIcons().URL_TYPE_LIST,j=["book-icon-alipay","book-icon-alibaba","book-icon-taobao"],k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(u,e);var t,r,o,i=g(u);function u(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),E(_(r=i.call(this,e,t)),"updateIcon",(function(e,t){var n=r.state.bookIcon;if(n[e]!==t){var o=v({},n);if(o[e]=t,"type"===e)switch(t){case"icon":case"url":o.symbol=x[0];break;default:return}o.type="url",r.setState({bookIcon:o}),r.props.updateIcon(o,r.props.book)}}));var n=e.value,o=e.icon;return r.state={bookIcon:null!=n&&n.type?n:{type:"url",symbol:o||x[0]}},r}return t=u,(r=[{key:"render",value:function(){var e=this,t=this.state.bookIcon,r=this.props.value,o=t.type||r.type||"url";return a.a.createElement(n.a,{trigger:this.props.disabled?"":"click",noArrow:!0,getPopupContainer:function(e){return e.parentNode},overlayClassName:p.bookIconPopover,placement:"bottomLeft",content:a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:p.bookIconSelector},a.a.createElement("ul",{className:p.iconSelectorTab},a.a.createElement("li",{onClick:function(){return e.updateIcon("type","url")},"data-testid":"bookicon-url",className:"url"===o?p.iconSelectorTabActive:""},__("默认"))),a.a.createElement("div",null,a.a.createElement("ul",{className:p.iconSelectorContent},x.filter((function(e){return!j.includes(e)})).map((function(t,r){return a.a.createElement("li",{key:r,onClick:function(){return e.updateIcon("symbol",t)}},a.a.createElement(f.b,{className:p.bookIcon,name:t,width:24}))}))))))},a.a.createElement("div",{tabIndex:"0","data-testid":"popover-bookicon",style:v({},this.props.style),className:this.props.className},a.a.createElement(f.b,{className:c()(p.bookIcon,E({},p.iconSize,"icon"===t.type)),size:this.props.size,width:this.props.width,height:this.props.height,name:d.b.getSymbolName(t)||r.symbol})))}}])&&y(t.prototype,r),o&&y(t,o),Object.defineProperty(t,"prototype",{writable:!1}),u}(o.Component);k.defaultProps={value:{}},k.propTypes={value:l.a.object,book:l.a.object,icon:l.a.string,updateIcon:l.a.func.isRequired,disabled:l.a.bool,className:l.a.string,size:l.a.number,width:l.a.number,height:l.a.number};t.a=Object(s.d)((function(e){return e}))(k)},2909:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}));var n=r(18),o=r(163),a=function(e,t,r){var a=window.appData.note;return a?1===a.public:(e=e||window.appData.group,t=t||window.appData.book,r=r||window.appData.doc,!(!e||!t)&&(r?Object(o.d)({type:"doc",target:r,group:e,book:t}):Object(o.d)({type:"book",target:t,group:e}))===n.PRIVACY.public)},i=function(e,t,r){var n=window.appData.note;return n?n.is_public:(e=e||window.appData.share,t=t||window.appData.book,r=r||window.appData.doc,!!(e&&t&&r&&r.book_id===t.id)&&(0===e.status&&0===e.scope&&(e.target_id===r.book_id||e.target_id===r.id)))}},2912:function(e,t,r){"use strict";r(92);var n=r(45),o=(r(62),r(21)),a=(r(251),r(116)),i=r(0),c=r.n(i),u=r(2),l=r.n(u),s=r(2654),f=r(585),d=r(2244),p=r(167),h=r(312),m=r(1702),v=r.n(m),y=r(205),b=r(287),g=r(2245),w=r(1259),_="DocExport-module_docExport_zwx9b",O="DocExport-module_title_eGdGG",E="DocExport-module_entry_qjwYu",S="DocExport-module_hide_+Vz7A",x="DocExport-module_setting_yai1Y",j="DocExport-module_settingTitle_IjcSw",k="DocExport-module_settingUpload_3ymtX";function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===P(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(){A=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==P(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function I(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){I(a,n,o,i,c,"next",e)}function c(e){I(a,n,o,i,c,"throw",e)}i(void 0)}))}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=Object(b.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(6),r.e(76)]).then(r.bind(null,3106))}),{suspense:!0}),F=w.a.STATUS,G=function(e){var t=e.bookId,r=e.exportParams,u=e.onCancel,l=function(e){var t=e.doc,r=e.bookId,n=e.exportParams,o=D(Object(i.useState)(t||null),2),a=o[0],c=o[1],u=D(Object(i.useState)(!1),2),l=u[0],s=u[1],f=D(Object(i.useState)(t?v.a.SUPPORTED_EXPORT_FORMATS[t.type]:[]),2),d=f[0],p=f[1];return Object(i.useEffect)((function(){var e=function(){var e=N(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.doc_id){e.next=11;break}return s(!0),e.next=5,h.a.docs.findOne({id:n.toc_node_url,book_id:r});case 5:t=e.sent,c(t),s(!1),p(v.a.SUPPORTED_EXPORT_FORMATS[t.type]),e.next=12;break;case 11:p([v.a.THIRD_PARTY_FORMAT.LAKE]);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a||e()}),[]),{state:{currentDoc:a,loading:l,formats:d}}}(e),m=l.state,y=m.currentDoc,b=m.loading,P=m.formats,C=D(Object(i.useState)(),2),L=C[0],I=C[1],R=D(Object(i.useState)(),2),G=R[0],B=R[1],U=D(Object(i.useState)(),2),z=U[0],W=U[1],V=D(Object(i.useState)(F.INIT),2),H=V[0],q=V[1],K=D(Object(i.useState)(""),2),Y=K[0],$=K[1],Z=Object(i.useRef)(),J=Object(i.useRef)(),X={markdown:[[{label:__("导出 LaTeX 公式图片"),name:"latexType",default:!0,value:1},{label:__("导出 LaTeX 公式为 Markdown 语法"),name:"latexType",value:2}],{label:__("导出保持语雀的锚点"),name:"enableAnchor",value:1},{label:__("导出保持语雀的换行"),name:"enableBreak",value:1}],pdf:[{label:__("导出文档大纲"),default:!0,name:"enableToc",value:1}]},Q=function(){var e=N(A().mark((function e(n){var o,a,i,c,u,l;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={type:n,force:0},Z.current&&(a=Z.current.getValue())&&(o.options=JSON.stringify(a)),c=66e4/(i=5e3),u=0;case 5:if(!(u<c)){e.next=33;break}if(e.prev=6,"lakebook"!==n){e.next=13;break}return e.next=10,h.a.books.exports(T(T({},o),{},{id:t,title:r.toc_node_title,toc_node_uuid:r.toc_node_uuid,toc_node_url:r.toc_node_url,with_children:!0}));case 10:l=e.sent,e.next=17;break;case 13:if(!y){e.next=17;break}return e.next=16,h.a.docs.exports(T(T({},o),{},{id:y.id}));case 16:l=e.sent;case 17:if("success"!==l.state){e.next=19;break}return e.abrupt("return",l);case 19:if("error"!==l.state){e.next=23;break}if(!l.error){e.next=22;break}return e.abrupt("return",l.error);case 22:return e.abrupt("return",{error:l.message});case 23:return e.next=25,Object(f.a)(i);case 25:u++,e.next=31;break;case 28:return e.prev=28,e.t0=e.catch(6),e.abrupt("return",{error:e.t0.message});case 31:e.next=5;break;case 33:throw new Error("处理超时，请重试...");case 34:case"end":return e.stop()}}),e,null,[[6,28]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=N(A().mark((function e(t){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y||v.a.SUPPORTED_EXPORT_FORMATS[y.type]){e.next=2;break}return e.abrupt("return");case 2:return I(t),q(F.PROCESSING),W(null),e.prev=5,e.next=8,Q(t);case 8:if(!(r=e.sent).error){e.next=13;break}return q(F.ERROR),$(r.error),e.abrupt("return");case 13:I(t),q(F.SUCCESS),W(r.url),p.b.download(r.url),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),q(F.ERROR),$(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(t){return e.apply(this,arguments)}}(),te=y&&("Mind"===y.type||"Board"===y.type),re=function(){var e=N(A().mark((function e(t,r){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J.current&&(null===(n=J.current)||void 0===n||n.export(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ne=function(e){B(v.a.THIRD_PARTY_FORMAT[e.toUpperCase()]),!te||e!==v.a.THIRD_PARTY_FORMAT.JPG.key&&e!==v.a.THIRD_PARTY_FORMAT.PNG.key?("Show"!==(null==y?void 0:y.type)||"pdf"!==e)&&X[e]?(I(e),q(F.SETTING)):ee(e):re(e,{filename:y.title})},oe=null;return H===F.PROCESSING?oe=G?c.a.createElement("div",{className:x},c.a.createElement("h1",{className:j},__("导出 {type}",{type:G.name})),c.a.createElement(w.a.Processing,{tip:__("正在导出中...")})):null:H===F.SUCCESS?oe=G?c.a.createElement("div",{className:x},c.a.createElement("h1",{className:j},__("导出 {type}",{type:G.name})),c.a.createElement(w.a.Success,{tip:__("文件生成成功"),action:c.a.createElement(d.a,{href:z,target:"_blank"},__("点击下载"))})):null:H===F.ERROR?oe=c.a.createElement(w.a.Error,{tip:__("文件生成失败"),error:Y,action:c.a.createElement(o.a,{icon:c.a.createElement(s.a,null),size:"small",onClick:function(){ee(L)}},__("重新生成"))}):H===F.INIT&&(oe=c.a.createElement("div",{className:E},c.a.createElement("div",{className:O},__("导出文档")),b?c.a.createElement(a.a,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{mode:"export",types:P,onSelect:ne})))),c.a.createElement(n.a,{title:null,onCancel:u,visible:!0,footer:null,width:640,maskClosable:!1},c.a.createElement("div",{className:_},te&&c.a.createElement(M,{className:S,onLoad:function(e){J.current=e},content:y.content}),oe,function(){if(!G||!y)return null;var e=X[G.key];return e?c.a.createElement("div",{className:x,style:{display:H===F.SETTING?"block":"none"}},c.a.createElement("h1",{className:j},__("{type} 导出配置",{type:G.name})),c.a.createElement(w.a.AdvanceSetting,{wrappedComponentRef:Z,target:y,type:G,settings:e,actions:c.a.createElement(o.a,{type:"primary",className:k,onClick:function(){return ee(L)}},__("导出"))})):null}()))};G.defaultProps={exportParams:{}},G.propTypes={doc:l.a.object,exportParams:l.a.object,bookId:l.a.number.isRequired,onCancel:l.a.func.isRequired};t.a=Object(y.b)(G,!0)},2924:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));r(62);var n=r(21),o=(r(92),r(45)),a=(r(104),r(38)),i=(r(305),r(61)),c=r(0),u=r.n(c),l=r(2),s=r.n(l),f=r(147),d="SaveAsVersion-module_nameVersion_VphI2";function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(){h=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function m(){}function v(){}var y={};u(y,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(P([])));g&&g!==t&&r.call(g,a)&&(y=g);var w=v.prototype=d.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==p(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function m(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e){var t=e.version,r=v(i.a.useForm(),1)[0],n=function(){var n,o=(n=h().mark((function n(){var o,a;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.validateFields();case 3:return o=n.sent,n.next=6,e.docVersionProxy.name({id:t.id,name:o.name});case 6:a=n.sent,e.onCreated(a),e.onCancel(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})),function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){m(a,r,o,i,c,"next",e)}function c(e){m(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return o.apply(this,arguments)}}();return u.a.createElement(o.a,{"data-testid":"history-name-model",closable:!1,maskClosable:!1,onClose:e.onCancel,onCancel:e.onCancel,onOk:n,title:__("保存为版本"),visible:!0},u.a.createElement(i.a,{"data-testid":"history-name-form",className:d,form:r,layout:"vertical"},u.a.createElement(i.a.Item,{label:__("版本名称"),name:"name",rules:[{required:!0,message:__("请输入版本名称")},{max:40,message:__("最多 40 个字符")}]},u.a.createElement(a.a,{placeholder:__("最多 40 个字符"),"data-testid":"version-name-input"}))))}function g(e){var t=v(Object(c.useState)(!1),2),r=t[0],o=t[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement(n.a,{"data-testid":"save-as-version",onClick:function(){o(!0)}},__("保存为版本")),r&&u.a.createElement(b,{version:e.version,onCreated:e.onCreated,docVersionProxy:e.docVersionProxy,onCancel:function(){o(!1)}}))}b.propTypes={version:s.a.object.isRequired,onCreated:s.a.func.isRequired,onCancel:s.a.func.isRequired,docVersionProxy:s.a.object.isRequired},g.propTypes={version:s.a.object.isRequired,onCreated:s.a.func.isRequired,docVersionProxy:s.a.object.isRequired};t.b=Object(f.b)(b,!1)},2925:function(e,t,r){"use strict";var n=r(0),o=r.n(n);t.a=function(){return o.a.createElement("div",null)}},2928:function(e,t,r){"use strict";r(62);var n=r(21),o=(r(251),r(116)),a=r(0),i=r.n(a),c=r(2),u=r.n(c),l=r(485),s=r(2263),f=r(2954),d=(r(557),r(216)),p=(r(126),r(65)),h=(r(271),r(73)),m=(r(103),r(60)),v=r(9),y=r.n(v),b=r(2953),g=r(30),w=(r(270),r(64)),_="SearchCatalogTrigger-module_actionItem_rk-NO",O="SearchCatalogTrigger-module_searchContainer_Zv6BH",E="SearchCatalogTrigger-module_searchInput_4Tgor",S="SearchCatalogTrigger-module_prefixIconWrapper_Ub-Vo",x="SearchCatalogTrigger-module_searchIcon_RK482";function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e){var t=function(e){var t=e.listData,r=e.onSelectOption,n=e.isLoading,o=j(Object(a.useState)(!1),2),i=o[0],c=o[1];return{state:{inputVisible:i,searchOptions:Object(a.useMemo)((function(){return t.map((function(e){return{label:e.title,value:e.uuid}}))}),[t]),isLoading:n},handleTriggerClick:function(){c(!0)},handleBlur:function(){c(!1)},handleOptionSelect:function(e){e&&("function"==typeof r&&r({tocItemUuid:e}),c(!1))}}}(e),r=t.state,n=r.inputVisible,c=r.searchOptions,u=r.isLoading,l=t.handleTriggerClick,s=t.handleBlur,f=t.handleOptionSelect;return i.a.createElement(i.a.Fragment,null,n?i.a.createElement("div",{className:O},i.a.createElement(w.a,{getPopupContainer:function(e){return e.parentElement},className:E,notFoundContent:u?i.a.createElement(o.a,{size:"small",delay:100}):null,showArrow:!1,autoFocus:!0,allowClear:!0,showSearch:!0,optionFilterProp:"label",options:c,placeholder:__("目录搜索"),onBlur:s,onChange:f}),i.a.createElement("span",{className:S},i.a.createElement(g.b,{name:"help-search",width:16,height:16,className:x}))):i.a.createElement(m.a,{title:__("目录搜索"),getPopupContainer:function(e){return e}},i.a.createElement("span",{className:_,onClick:l},i.a.createElement(g.b,{name:"help-search",width:16,height:16,className:x}))))}var C=P;P.defaultProps={listData:[],isLoading:!1},P.propTypes={listData:u.a.arrayOf(u.a.object),isLoading:u.a.object,onSelectOption:u.a.func};var T=r(934),L=r.n(T),A=r(106);function I(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=r.n(A)()("CatalogSelecter:viewModel"),F=["child","sibling"];var G={useViewModel:function(e,t){var r,n,o=e.catalog,i=e.disableItems,c=void 0===i?[]:i,u=e.submitType,l=e.currentSelectedUId,s=e.currentSelectedAction,f=c.map((function(e){return e.uuid})),d=N(Object(a.useState)(null),2),p=d[0],h=d[1],m=N(Object(a.useState)("child"),2),v=m[0],y=m[1],b=N(Object(a.useState)("top"),2),g=b[0],w=b[1],_=N(Object(a.useState)("auto"),2),O=_[0],E=_[1],S=N(Object(a.useState)("copy"!==u),2),x=S[0],j=S[1],k=Object(a.useRef)(),P="all"===(r=e.catalogLevel)||r===1/0?1/0:parseInt(r,10)+1,C=N(Object(a.useState)((n=P)===1/0?o.map((function(e){return e.uuid})):o.filter((function(e){return e.level<n-1})).map((function(e){return e.uuid}))),2),T=C[0],A=C[1],D=function(){var e=I(T),t=[];if(p){!function e(r){if(r){var n=function(e){return o.find((function(t){return t.uuid===e.parent_uuid}))}(r);n&&(t.push(n.uuid),n.level>0&&e(n))}}(o.find((function(e){return e.uuid===p})))}return t.length&&e.push.apply(e,t),e};Object(a.useEffect)((function(){A(D())}),[p]);var R=function(e,t){var r=I(T),n=r.findIndex((function(t){return t===e.uuid}));"sibling"===t?(n>=0&&r.splice(n,1),A(r)):n<0&&A([e.uuid].concat(I(r)))},G=function(e,t,r,n){L()(n)||F.includes(n)?e&&f.includes(e.uuid)||(e?(h(e.uuid),w(null),y(n||"child"),R(e,n||"child")):(h(null),w(r),E("auto"))):M("invalid insert action type",n)},B=function(){if(!e.disable&&!f.includes(p)){var t={action:"prependChild",target_uuid:p,insert_to_catalog:!0,with_children:x};return"top"===g?(t.action="prependChild",t.target_uuid=null):"bottom"===g?(t.action="appendChild",t.target_uuid=null):t.action="sibling"===v?"moveAfter":"prependChild",t}};return Object(a.useEffect)((function(){var e=o.find((function(e){return e.uuid===l}));e&&G(e,0,null,s)}),[l,s]),Object(a.useImperativeHandle)(t,(function(){return{getSubmitParams:B}})),{state:{selectItemUId:p,action:v,position:g,expandedKeys:T,placeholderTop:O,level:P,withChildren:x,catalogTreeRef:k},onSelectItem:G,onChangeAction:function(e,t){if(!f.includes(t.uuid)){e.stopPropagation(),e.preventDefault();var r=e.target.value;y(r),R(t,r),"child"===r&&E("auto")}},onExpand:function(e,t){var r=t.expanded,n=t.node;if(A(e),"sibling"===v&&n.props.uuid===p)if(r){var o=document.querySelector(".ant-tree-treenode-selected");o&&setTimeout((function(){E(o.getBoundingClientRect().height)}),200)}else T.includes(n.props.uuid)||E("auto")},handleChangeWithChildren:function(e,t){j(e.target.checked)},getSubmitParams:B,handleCatalogSearchSelect:function(e){var t=e.tocItemUuid,r=o.find((function(e){return e.uuid===t}));G(r,0,null,"sibling");var n=setTimeout((function(){var e;null===(e=k.current)||void 0===e||e.scrollTo({key:r.uuid,align:"top",offset:100}),clearTimeout(n)}),300)},handleInsertToTop:function(e){return G(null,0,"top")},handleInsertToBottom:function(e){return G(null,0,"bottom")}}}},B={card:"CatalogSelector-module_card_EnAh7",disabled:"CatalogSelector-module_disabled_DdXXq",titleWrapper:"CatalogSelector-module_titleWrapper_mcDOG",title:"CatalogSelector-module_title_ixnVK",docCatalogItem:"CatalogSelector-module_docCatalogItem_yI0aV",emptyViewInner:"CatalogSelector-module_emptyViewInner_FIALf",placeholder:"CatalogSelector-module_placeholder_topjs",caret:"CatalogSelector-module_caret_jxv72",placeholderSibling:"CatalogSelector-module_placeholderSibling_-rdTP",placeholderChild:"CatalogSelector-module_placeholderChild_uP7D6",actions:"CatalogSelector-module_actions_HKHke",topSimulator:"CatalogSelector-module_topSimulator_t0qhG",bottomSimulator:"CatalogSelector-module_bottomSimulator_HSsiS",textTip:"CatalogSelector-module_textTip_LK8n1",selected:"CatalogSelector-module_selected_JDZUv",wrapper:"CatalogSelector-module_wrapper_tsHiF",submitOptions:"CatalogSelector-module_submitOptions_Om8RW",submitOptionItem:"CatalogSelector-module_submitOptionItem_oqA8J",shortcutArea:"CatalogSelector-module_shortcutArea_AgvQv",shortcutTip:"CatalogSelector-module_shortcutTip_BR+Yo",shortcutActionCont:"CatalogSelector-module_shortcutActionCont_l0Ug2",shortcutAction:"CatalogSelector-module_shortcutAction_u+U2K",shortcutActionDisabled:"CatalogSelector-module_shortcutActionDisabled_+nyVB"};function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z.apply(this,arguments)}function W(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==U(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===U(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V=i.a.forwardRef((function(e,t){var r=e.catalog,n=e.disableItems,o=e.submitType,c=e.currentSelectedUId,u=e.showChildrenOptions,s=e.extraOptions,f=e.maxHeight,v=e.hideCopyWithChildren,w=void 0!==v&&v,_=G.useViewModel(e,t),O=Object(l.generateTreeByTocItems)(r),E=_.state,S=E.selectItemUId,x=E.action,j=E.position,k=E.expandedKeys,P=E.placeholderTop,T=E.level,L=E.withChildren,A=E.catalogTreeRef,I=__("插入");switch(o){case"move":I=__("移动");break;case"copy":I=__("复制");break;default:I=__("插入")}var N=[{label:__("同级"),value:"sibling"},{label:__("子级"),value:"child"}],D=function(){var e;return i.a.createElement("div",{"data-testid":"catalog-selector-tree-placeholder",className:y()([B.placeholder],(e={},W(e,B.placeholderChild,S&&"child"===x),W(e,B.placeholderSibling,S&&"sibling"===x),e)),style:{top:P}},i.a.createElement(g.b,{name:"catalog-caret",width:13,height:6,className:B.caret}))};Object(a.useEffect)((function(){if(c&&A.current){var e=A.current;setTimeout((function(){e.scrolled||e.scrollTo({key:c,align:"top",offset:100})}),300)}}),[c]);var R={data:O,listData:r,editable:!1,catalogLevel:T,disabledKeys:n.map((function(e){return e.uuid})),selectedKeys:S&&[S],expandedKeys:k,onSelect:_.onSelectItem,onExpand:_.onExpand,size:"normal"};r.length>10&&(R.height=f);var M=!r.length;return i.a.createElement("div",{className:B.wrapper},i.a.createElement("div",{className:B.shortcutArea},i.a.createElement("div",{className:B.shortcutTip},__("请选择要放置的目录位置")),i.a.createElement("div",{className:B.shortcutActionCont},i.a.createElement(C,{listData:r,onSelectOption:_.handleCatalogSearchSelect}),i.a.createElement(m.a,{title:__("置顶")},i.a.createElement("span",{className:y()([B.shortcutAction,W({},B.shortcutActionDisabled,M)]),onClick:function(e){M||_.handleInsertToTop(e)}},i.a.createElement(g.b,{name:"move-top",width:9,height:13,style:{fill:"red"}}))),i.a.createElement(m.a,{title:__("置底")},i.a.createElement("span",{className:y()([B.shortcutAction,W({},B.shortcutActionDisabled,M)]),onClick:function(e){M||_.handleInsertToBottom(e)}},i.a.createElement(g.b,{name:"move-bottom",width:9,height:13}))))),i.a.createElement(p.a,{className:y()([B.card])},i.a.createElement("div",{"data-testid":"catalog-selector-tree-top-simulator",className:B.topSimulator},"top"===j&&D()),r.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,z({},R,{ref:A,renderTitle:function(e){return i.a.createElement("div",{className:B.titleWrapper,"data-testid":"catalog-selector-tree-title-".concat(e.uuid)},i.a.createElement("div",{className:B.title},e.title),S===e.uuid&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:B.actions,"data-testid":"catalog-selector-insert-actions-".concat(e.uuid),onClick:function(e){e.stopPropagation()}},i.a.createElement("span",null,__("{actionType}为",{actionType:I})),i.a.createElement(h.a.Group,{value:_.state.action,onChange:function(t){_.onChangeAction(t,e)},options:N})),D()))}})),i.a.createElement("div",{"data-testid":"catalog-selector-tree-bottom-simulator",className:B.bottomSimulator},"bottom"===j&&D())):i.a.createElement("div",{className:B.emptyView},i.a.createElement("div",{className:B.emptyViewInner},i.a.createElement("p",null,__("插入第一个目录节点"))))),i.a.createElement("div",{className:y()(e.optionClassnames,B.submitOptions)},u&&!w&&i.a.createElement("div",{className:B.submitOptionItem},i.a.createElement(d.a,{checked:L,onChange:_.handleChangeWithChildren},__("包含子文档"))),s))}));V.defaultProps={catalog:[],catalogLevel:1/0,disableItems:[],maxHeight:326,hideCopyWithChildren:!1},V.propTypes={catalog:u.a.array,catalogLevel:u.a.oneOfType([u.a.number,u.a.string]),submitType:u.a.oneOf(["create","move","copy"]),disableItems:u.a.array,showChildrenOptions:u.a.bool,optionClassnames:u.a.string,extraOptions:u.a.node,currentSelectedUId:u.a.string,maxHeight:u.a.number,hideCopyWithChildren:u.a.bool},V.displayName="CatalogSelector";var H=V,q="CatalogTransfer-module_wrapper_PCdb1",K="CatalogTransfer-module_repoSelector_xEuzZ",Y="CatalogTransfer-module_selectBookTip_Ju7F8",$="CatalogTransfer-module_emptyIcon_tkaXF",Z="CatalogTransfer-module_loading_MvRPo",J="CatalogTransfer-module_footer_XgWWv",X="CatalogTransfer-module_actions_3DruK",Q="CatalogTransfer-module_selectorOptions_evk3C";function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ee(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ee(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oe(){oe=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==ee(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function ae(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function ie(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ae(a,n,o,i,c,"next",e)}function c(e){ae(a,n,o,i,c,"throw",e)}i(void 0)}))}}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){if(e){if("string"==typeof e)return se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?se(e,t):void 0}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fe(e,t){var r,n=[],o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=le(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(t);try{for(o.s();!(r=o.n()).done;){var a=r.value,i=Object(l.findAllChildrenByParentNode)(e,a,!0)||[];n.push.apply(n,ue(i))}}catch(e){o.e(e)}finally{o.f()}return n}var de=i.a.forwardRef((function(e,t){var r=e.currentGroup,c=e.currentBook,u=e.disableSelectorBooks,l=e.showRepoSelector,d=e.submitType,p=e.hideCopyWithChildren,h=void 0!==p&&p,m=function(e){var t,r=e.currentGroup,n=e.currentBook,o=e.items,i=e.showRepoSelector,c=e.submitType,u=ce(Object(a.useState)(r),2),l=u[0],f=u[1],d=ce(Object(a.useState)(n),2),p=d[0],h=d[1],m=ce(Object(a.useState)([]),2),v=m[0],y=m[1],b=ce(Object(a.useState)([]),2),g=b[0],w=b[1],_=ce(Object(a.useState)(!0),2),O=_[0],E=_[1],S=ce(Object(a.useState)(!1),2),x=S[0],j=S[1],k=o&&Array.isArray(o)&&1===o.length,P="child";if(p.id===n.id&&k){var C=o[0].uuid,T=o[0].doc_id,L=(A=v.find((function(e){return e.uuid===C||e.doc_id===T})),I=t,N=P,A&&(I=A.prev_uuid,A.prev_uuid&&A.parent_uuid!==A.prev_uuid?(I=A.prev_uuid,N="sibling"):I=A.parent_uuid),{uuid:I,actionType:N});t=L.uuid,P=L.actionType}var A,I,N;var D,R=Object(a.useMemo)((function(){return o.reduce((function(e,t){var r=g.find((function(e){return e.uuid===t.uuid||e.doc_id===t.doc_id}));return r&&e.push(r),e}),[])}),[o,g]),M=Object(a.useMemo)((function(){return Array.isArray(R)&&R.length&&"move"===c&&p.id===n.id?[].concat(R,fe(v,R)):[]}),[v,n.id,p.id,R]),F=function(){var e=ie(oe().mark((function e(t){var r,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,s.a.getCatalogNodes(t.id);case 3:r=e.sent,o=r?r.toc:[],y(o),t.id===n.id&&w(o),E(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return i||F(n),j(!1)}),[i,n]),{state:{targetGroup:l,targetBook:p,toc:v,items:R,disableItemsInToc:M,loading:O,submitting:x,defaultSelectedCatalogNodeUid:t,defaultSelectedNodeActionType:P},handleSelect:(D=ie(oe().mark((function e(t){var r,n=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{},t&&f(t),r&&h(r),!t||!r){e.next=6;break}return e.next=6,F(r);case 6:case"end":return e.stop()}}),e)}))),function(e){return D.apply(this,arguments)}),setSubmitting:j}}(e),v=m.state,y=v.targetGroup,b=v.targetBook,g=v.toc,w=v.disableItemsInToc,_=v.loading,O=v.submitting,E=v.defaultSelectedCatalogNodeUid,S=v.defaultSelectedNodeActionType,x=v.items,j=m.setSubmitting,k=i.a.useRef(),P=Array.isArray(x)&&x.some((function(e){return!!e.child_uuid})),C=function(){var t=ie(oe().mark((function t(){var r,n,o,a;return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!O){t.next=2;break}return t.abrupt("return");case 2:return j(!0),r={targetGroup:y,targetBook:b},Array.isArray(x)&&x.length&&(n=x.map((function(e){return e.uuid})),r.node_uuid=n[0]),o={},k&&k.current&&(o=k.current.getSubmitParams()),t.prev=7,t.next=10,e.onSubmit(re(re({},o),r));case 10:return a=t.sent,j(!1),t.abrupt("return",a);case 15:t.prev=15,t.t0=t.catch(7),j(!1);case 18:case"end":return t.stop()}}),t,null,[[7,15]])})));return function(){return t.apply(this,arguments)}}(),T=(b.toc||[]).length,L=48+(T>10?326:32*T);return i.a.createElement("div",{className:q},l&&i.a.createElement("div",{className:K},i.a.createElement(f.a,{defaultGroup:r,defaultBook:c,disableBooks:u,onSelected:m.handleSelect})),_?i.a.createElement(o.a,{className:Z,size:"large",style:{height:L}}):i.a.createElement(i.a.Fragment,null,y&&b&&b.id?i.a.createElement(H,{currentSelectedUId:E,currentSelectedAction:S,submitType:d,targetBook:b,catalog:g,catalogLevel:b.catalog_display_level,disableItems:w,ref:k,optionClassnames:Q,showChildrenOptions:P,hideCopyWithChildren:h}):i.a.createElement("div",{className:Y},i.a.createElement("img",{className:$,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*9iSQTaU_i9kAAAAAAAAAAAAAARQnAQ"}),i.a.createElement("span",null,__("暂无目录，选择知识库后可查看")))),i.a.createElement("div",{className:J},i.a.createElement("div",{className:X},i.a.createElement(n.a,{onClick:e.onCancel},__("取消")),i.a.createElement(n.a,{type:"primary",onClick:C,loading:O,disabled:!y||!b||!b.id||O,"data-testid":"catalog-transfer-btn-submit"},__("确认")))))}));de.defaultProps={showRepoSelector:!0,items:[]},de.propTypes={currentGroup:u.a.object,currentBook:u.a.object.isRequired,disableSelectorBooks:u.a.array,items:u.a.array,onSubmit:u.a.func.isRequired,onCancel:u.a.func.isRequired,submitType:u.a.oneOf(["create","move","copy"]).isRequired,showRepoSelector:u.a.bool,hideCopyWithChildren:u.a.bool},de.displayName="CatalogTransfer";t.a=de},2931:function(e,t,r){var n=r(568),o=r(224),a=r(582),i=Math.max;e.exports=function(e,t,r){var c=null==e?0:e.length;if(!c)return-1;var u=null==r?0:a(r);return u<0&&(u=i(c+u,0)),n(e,o(t,3),u)}},2935:function(e,t,r){var n=r(2816),o=r(393),a=r(445),i=r(1078),c=a((function(e,t){return i(e)?n(e,o(t,1,i,!0)):[]}));e.exports=c},2940:function(e,t,r){"use strict";r(92);var n=r(45),o=(r(104),r(38)),a=(r(62),r(21)),i=(r(305),r(61)),c=r(0),u=r.n(c),l=r(2),s=r.n(l),f=r(105),d="CollectionModal-module_collectionModal_sJKOy",p="CollectionModal-module_collectionModalContent_6NiUd";function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(){m=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function v(){}var y={};u(y,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(P([])));g&&g!==t&&r.call(g,a)&&(y=g);var w=v.prototype=d.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==h(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function v(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){v(a,n,o,i,c,"next",e)}function c(e){v(a,n,o,i,c,"throw",e)}i(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e){var t=e.isModalVisible,r=e.handleOk,l=e.handleCancel,s=e.type,h=e.value,v=b(i.a.useForm(),1)[0],g=b(Object(c.useState)(!0),2),w=g[0],_=g[1];function O(){return(O=y(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.webProxy.actionTags.create({name:t,action_type:"mark"});case 2:(n=e.sent)&&(r("CREATE",n),l());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=y(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.webProxy.actionTags.update({id:h.id,name:t});case 2:(n=e.sent)&&(r("UPDATE",n),l());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){var e=v.getFieldsValue(),t=null==e?void 0:e.name;!t||t.length>50||("CREATE"===s?function(e){O.apply(this,arguments)}(t):function(e){E.apply(this,arguments)}(t))}return Object(c.useEffect)((function(){v.setFieldsValue({name:"EDIT"===s?h.name:null}),_("EDIT"!==s)}),[]),u.a.createElement("div",null,u.a.createElement(n.a,{title:"CREATE"===s?__("新建分组"):__("编辑分组"),width:400,visible:t,onCancel:l,className:d,zIndex:9999,footer:[u.a.createElement(a.a,{key:"back",onClick:l},__("取消")),u.a.createElement(a.a,{key:"submit",type:"primary",onClick:S,disabled:w},__("确定"))]},u.a.createElement("div",{className:p},u.a.createElement(i.a,{form:v,onValuesChange:function(e){e&&e.name&&e.name.trim()?_(!1):_(!0),v.setFieldsValue(e)},layout:"vertical"},u.a.createElement(i.a.Item,{label:__("分组名称"),name:"name",rules:[{max:50,message:__("请调整分组名称，不要超过50个字")}]},u.a.createElement(o.a,{className:"collection-input",placeholder:__("请输入分组名称"),onKeyDown:function(e){13===(e.keyCode||e.which)&&(e.preventDefault(),S())},autocomplete:"off"}))))))}w.propTypes={isModalVisible:s.a.bool,handleOk:s.a.func,handleCancel:s.a.func,type:s.a.string,value:s.a.object};t.a=w},2946:function(e,t,r){"use strict";r(62);var n=r(21),o=(r(251),r(116)),a=(r(279),r(136)),i=(r(63),r(23)),c=(r(204),r(70)),u=(r(219),r(50)),l=(r(92),r(45)),s=r(0),f=r.n(s),d=r(2),p=r.n(d),h=r(679),m=r(756),v=r(671),y=r(53),b=r.n(y),g=r(289),w=r.n(g),_=r(2990),O=r(1702),E=r.n(O),S=r(273);var x=function(e,t){var r=Object(s.useRef)();Object(s.useEffect)((function(){r.current=e}),[e]),Object(s.useEffect)((function(){if(null!==t){var e=setInterval((function(){r.current()}),t);return function(){return clearInterval(e)}}}),[t])},j=r(2974),k=r(205),P=r(954),C=(r(1325),r(2244)),T=r(167),L=r(312),A=r(2245),I=r(1259),N="DocImport-module_docImport_uDZWD",D="DocImport-module_title_vylxD",R="DocImport-module_tips_gx2+N",M="DocImport-module_help_YDms4",F="DocImport-module_processingModal_5vLO+",G="DocImport-module_setting_6ttU6",B="DocImport-module_settingTitle_EsA43",U="DocImport-module_settingUpload_WXf0g",z="DocImport-module_processing_K3nVL",W="DocImport-module_processingTitle_UzLg1",V="DocImport-module_processingFooter_xOxG5",H="DocImport-module_fileList_jRvlw",q="DocImport-module_fileItem_gtT95",K="DocImport-module_fileItemIcon_SdTY-",Y="DocImport-module_fileItemTitle_qprAi",$="DocImport-module_spin_aEZeg",Z="DocImport-module_uploadingStatus_UWCen",J="DocImport-module_hr_nD0TF",X="DocImport-module_footerTitle_2O1eI";function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function ee(){ee=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Q(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function te(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function re(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){te(a,n,o,i,c,"next",e)}function c(e){te(a,n,o,i,c,"throw",e)}i(void 0)}))}}function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Q(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Q(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||ue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){if(e){if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(e,t):void 0}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var se=l.a.confirm,fe=I.a.STATUS,de=window.appData.settings&&window.appData.settings.max_import_task_count||2,pe=function(e){var t=e.visible,r=e.book,d=e.group,p=e.formats,y=e.importType,g=e.importParams,O=ce(Object(s.useState)(fe.INIT),2),E=O[0],k=O[1],Q=ce(Object(s.useState)([]),2),te=Q[0],ne=Q[1],ae=ce(Object(s.useState)(0),2),le=ae[0],pe=ae[1],he=ce(Object(s.useState)(0),2),me=he[0],ve=he[1],ye=ce(Object(s.useState)(0),2),be=ye[0],ge=ye[1],we=ce(Object(s.useState)(),2),_e=we[0],Oe=we[1],Ee=ce(Object(s.useState)(!1),2),Se=Ee[0],xe=Ee[1],je=ce(Object(s.useState)(!0),2),ke=je[0],Pe=je[1],Ce=ce(Object(s.useState)(!1),2),Te=Ce[0],Le=Ce[1],Ae=ce(Object(s.useState)([]),2),Ie=Ae[0],Ne=Ae[1],De=Object(s.useRef)();Object(j.a)(!Te&&E===fe.PROCESSING,__("还没导入完成，确认关闭窗口吗？"));var Re=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t){if(Ie.length>0)return Ie.push(e),void Ne(ie(Ie));Ie.push(e)}var r=e.data,n=e.file,o=e.filename,a=e.onError,i=e.onSuccess;e.__uploaded=!0;var c=oe(oe(oe({},g),r),{},{filename:o,path:n.path});n.uploading=!0,T.b.upload({requestData:c,params:e,onError:a,onSuccess:function(e){i(e,n)}})},Me={gitbook:[{default:w.a.windows,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],markdown:[{default:!0,name:"enableLatex",label:__("识别 Markdown 文件中 LaTeX 公式语法"),value:1},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],confluence:[{type:"text",label:f.a.createElement(c.a,{type:"flex",justify:"space-between"},f.a.createElement(u.a,null,__("批量替换链接")),f.a.createElement(u.a,null,f.a.createElement(C.a,{href:"https://www.yuque.com/yuque/eaghk3/bu0hnd",target:"_blank"},__("如何从 Confluence 导出？")))),colon:!1,placeholder:__("请输入 Confluence 地址"),name:"host",autoFocus:!0,validateOnBlur:!0,validator:function(e,t,r){var n=_.validator.httpURL(t);Pe(!n),r(n)}},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],zip:[[{default:"html",name:"fileFormat",label:__("html 文件，即 .html, .htm 文件"),value:"html"},{name:"fileFormat",label:__("markdown 文件，即 .md, .markdown, .mark 文件"),value:"markdown"}],{default:!0,name:"overrideExistsNode",label:__("是否覆盖相同节点的已有内容，否则自动重命名"),value:!0},{default:!0,name:"useFilenameAsTitle",label:__("是否使用文件名作为目录节点名称，否则会取内容中的标题作为名称"),value:!0},{default:!0,name:"enableLatex",label:__("识别 Markdown 文件中 LaTeX 公式语法"),value:1},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}]};Object(s.useEffect)((function(){E!==fe.PROCESSING||Se||k(fe.SUCCESS)}),[E,Se]);var Fe=function(e){return e.response&&e.response.data&&e.response.data.status},Ge=function(e){var t={};if(e){var n,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ue(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;t[a.id]=a}}catch(e){o.e(e)}finally{o.f()}}var c=te.map((function(e){if(!e.response||!e.response.data)return e;var r=t[e.response.data.id];if(!r)return e;var n=b()(r,"error.limitError");if(n&&400===n.status&&n.code){if(window.appData.isDesktopApp)return i.a.error(__("桌面端不支持此操作，请去 web 端完成"));var o=P.a.getMessage(n.code,{isImport:!0},n)||{},a=o.msg,c=o.alwaysOpen,u=o.level,l=o.callback;if(a)return l(i.a[u||"error"](a,c?0:void 0)),Le(!0),e}return e.response.data=oe(oe({},e.response.data),r),r.status===fe.SUCCESS?(e.status=fe.SUCCESS,e.url=r.url):(r.status===fe.ERROR||r.error)&&(e.status=fe.ERROR),e})),u=0,l=0;c.forEach((function(e){var t=Fe(e);e.status!==fe.ERROR&&t!==fe.ERROR&&t!==fe.SUCCESS||u++,e.status!==fe.ERROR&&t!==fe.ERROR||l++})),c.filter((function(e){var t=Fe(e);return t===fe.PENDING||!(null!=t||!e.uploading&&"done"!==e.status&&100!==e.percent)})).length<de&&function(){for(var e=Ie.shift();e&&e.__uploaded;)e=Ie.shift();e&&Re(e,!0),Ne(ie(Ie))}(),u>me&&ve(u),ge(l),ne(c),le===u?(xe(!1),function(){if(r.toc){var e="highlightBookImport_".concat(r.slug,"_").concat(r.id),t=r.toc[0];S.a.set(e,t?t.uuid:"_")}}()):k(fe.PROCESSING)};x(re(ee().mark((function e(){var r,n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=te.filter((function(e){return e.response&&e.response.data}))).length){e.next=3;break}return e.abrupt("return",Ge());case 3:if(t){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,L.a.import.getImportResult({files:JSON.stringify(r.map((function(e){return{convertTaskId:e.response.data.convertTaskId,id:e.response.data.id,type:e.response.data.type,name:e.name}}))),toc_node_uuid:g&&g.toc_node_uuid});case 7:n=e.sent,Ge(n);case 9:case"end":return e.stop()}}),e)}))),Se?5e3:null);var Be,Ue,ze,We=function(e){Oe(p.find((function(t){return t.key===e}))),Me[e]&&k(fe.SETTING),"confluence"===e&&Pe(!1)},Ve=function(){return De.current.getValue()},He=function(e){return!!Me[e.key]},qe=function(e){var t=ie(e.fileList),r=t.length;r!==t.filter((function(e){var t=Fe(e);return t===fe.ERROR||t===fe.SUCCESS})).length&&k(fe.PROCESSING),xe(!0),ne(t),pe(r)},Ke=function(){xe(!1),k((function(t){if(t!==fe.PROCESSING)return e.onCancel(),t;ne((function(t){return e.onCancel(),t}))}))},Ye=function(){var t,n;if(g&&"doc_toc"===g.create_from)return Ke(),te.forEach((function(e){if(!t){var o=e.response&&e.response.data||{};o.import_toc&&o.import_toc[0]&&o.import_toc[0].url?(t="/".concat(d.login,"/").concat(r.slug,"/").concat(o.import_toc[0].url),n=o.import_toc[0]):"doc"!==o.type&&"Doc"!==o.type||"success"!==o.status||!o.slug||(t="/".concat(d.login,"/").concat(r.slug,"/").concat(o.slug),n=o)}})),void(t&&(e.onRead?e.onRead(n):T.b.changeHref(t)));T.b.changeHref("/".concat(d.login,"/").concat(r.slug))};return f.a.createElement(f.a.Fragment,null,f.a.createElement(l.a,{title:null,onCancel:function(e){E!==fe.INIT&&E!==fe.DONE?(e.preventDefault(),e.stopPropagation(),E===fe.PROCESSING?se({title:__("导入尚未完成，确认要停止导入?"),content:f.a.createElement("div",null,__("处理中的文件无法取消，请稍后从知识库中删除。")),okText:__("确认"),okType:"danger",cancelText:__("取消"),centered:!0,onOk:Ke,onCancel:function(){}}):Ke()):Ke()},visible:t,footer:null,centered:!0,width:E===fe.INIT?160*Math.min(p.length,5):406,maskClosable:!1,className:E!==fe.INIT&&F},f.a.createElement("div",{className:N},(Be=window.appData.isYuque?"https://www.yuque.com/yuque/eaghk3":"https://yuque.antfin.com/lark/non1k6",Ue=p.filter((function(e){return e.key.startsWith("lake")})),ze=p.filter((function(e){return!e.key.startsWith("lake")})),f.a.createElement("div",{className:"entry",style:{display:E===fe.INIT?"block":"none"}},f.a.createElement("div",{className:D},__("导入")),f.a.createElement("div",{className:R},__("点击下方格式进行导入，可一次导入多个文件，导入非语雀格式的文件可能存在样式不兼容、耗时较长的情况，请耐心等待。"),f.a.createElement("a",{href:Be,target:"_blank",className:M},__("帮助文档"))),f.a.createElement("div",null,f.a.createElement("h4",null,__("三方格式")),f.a.createElement(A.a,{mode:"import",book:r,types:ze,importType:y,disableUpload:He,onSelect:We,onUploadChange:qe,customRequest:Re,maxCount:0})),f.a.createElement("div",null,f.a.createElement("h4",null,__("语雀格式")),f.a.createElement(A.a,{mode:"import",book:r,types:Ue,importType:y,disableUpload:He,onSelect:We,onUploadChange:qe,customRequest:Re,maxCount:0})))),function(){if(!_e)return null;var e=Me[_e.key];return e?f.a.createElement("div",{className:G,style:{display:E===fe.SETTING?"block":"none"}},f.a.createElement("h1",{className:B},__("{type} 导入配置",{type:_e.name})),f.a.createElement(I.a.AdvanceSetting,{wrappedComponentRef:De,type:_e,settings:e,actions:f.a.createElement(A.a.FileUpload,{mode:"import",book:r,getParamsOption:Ve,fileOption:_e,importType:y,customRequest:Re,onUploadChange:qe,maxCount:0},f.a.createElement(n.a,{type:"primary",disabled:!ke,className:U},__("选择本地文件")))})):null}(),E!==fe.INIT&&E!==fe.SETTING?f.a.createElement("div",{className:z},f.a.createElement("h1",{className:W},E===fe.DONE?__("导入完成"):__("导入中")),f.a.createElement("div",{className:H},te.map((function(e){return f.a.createElement(c.a,{type:"flex",justify:"space-between",align:"middle",className:q,key:e.uid},f.a.createElement(u.a,null,f.a.createElement(c.a,{type:"flex",align:"middle"},f.a.createElement(u.a,null,f.a.createElement("img",{src:_e.icon,className:K}),function(e){var t,r=e.name,n=Fe(e);return t=e.url?f.a.createElement("a",{className:Y,href:e.url,target:"_blank"},r):f.a.createElement("h2",{className:Y},r),e.status!==fe.ERROR&&n!==fe.ERROR||(t=f.a.createElement(a.a,{placement:"right",content:__("文件处理失败，请重新上传。")},t)),t}(e)))),f.a.createElement(u.a,null,function(e){var t=Fe(e);if(e.status===fe.ERROR||t===fe.ERROR){var r=e.error&&e.error.response&&e.error.response.data&&e.error.response.data.message;r||(r=e.response&&e.response.data&&e.response.data.error&&e.response.data.error.message);var n=e.response&&e.response.data&&e.response.data.id;return n&&(r="".concat(r," [id: ").concat(n,"]")),r?r+=__("（请重新上传，如果持续失败，请反馈到语雀）"):r=__("文件处理失败，请重新上传，如果持续失败，请反馈到语雀。"),f.a.createElement("span",null,f.a.createElement(a.a,{placement:"right",content:r},f.a.createElement(h.a,null)))}return e.status===fe.SUCCESS||t===fe.SUCCESS?f.a.createElement("span",null,f.a.createElement(m.a,null)):f.a.createElement("span",null,f.a.createElement("span",{className:Z},0===e.percent&&__("等待中"),100===e.percent&&__("处理中"),0!==e.percent&&100!==e.percent&&f.a.createElement("span",null,parseInt(e.percent,10),"%")),f.a.createElement(o.a,{indicator:f.a.createElement(v.a,{style:{fontSize:16},spin:!0}),className:$}))}(e)))}))),f.a.createElement("div",{className:J}),function(){var e;if(0!==me&&le===me){var t;te.forEach((function(e){if(!t){e.status===fe.ERROR&&((t=e.error&&e.error.response&&e.error.response.data&&e.error.response.data.message)||(t=e.response&&e.response.data&&e.response.data.error&&e.response.data.error.message));var r=e.response&&e.response.data&&e.response.data.id;t&&r&&(t="".concat(t," [id: ").concat(r,"]"))}}));var r=be?__("导入结束，有文件导入失败"):__("导入完成");t&&(r="".concat(r," (").concat(t,")")),e=f.a.createElement(c.a,{type:"flex",justify:"space-between",align:"middle"},f.a.createElement(u.a,null,be?f.a.createElement(h.a,null):f.a.createElement(m.a,null),f.a.createElement("span",{className:X},r)),f.a.createElement(u.a,null,f.a.createElement(n.a,{type:"primary",onClick:Ye},__("查看"))))}else E!==fe.PROCESSING&&E!==fe.UPLOADING&&E!==fe.PENDING||(e=f.a.createElement("div",null,f.a.createElement(o.a,{indicator:f.a.createElement(v.a,{style:{fontSize:16},spin:!0})}),f.a.createElement("span",{className:X},__("文件导入中")),"(".concat(me,"/").concat(le,")")));return f.a.createElement("div",{className:V},e)}()):null)))};pe.defaultProps={visible:!0,importType:E.a.IMPORT_TYPE.PARSE},pe.propTypes={visible:p.a.bool,book:p.a.object.isRequired,formats:p.a.array.isRequired,importType:p.a.oneOf([E.a.IMPORT_TYPE.CREATE,E.a.IMPORT_TYPE.PARSE]),onCancel:p.a.func.isRequired,onRead:p.a.func,importParams:p.a.object,group:p.a.object.isRequired};t.a=Object(k.b)(pe,!0)},2947:function(e,t,r){"use strict";r(251);var n=r(116),o=(r(63),r(23)),a=(r(557),r(216)),i=r(0),c=r.n(i),u=r(2),l=r.n(u),s=r(725),f=r(105),d=r(1149),p=r(2940),h="SelectGroup-module_selectGroup_PPbXd",m="SelectGroup-module_title_62QjW",v="SelectGroup-module_p1_iKXf5",y="SelectGroup-module_p2_vn1NJ",b="SelectGroup-module_content_J8Ejd",g="SelectGroup-module_empty_k0F6W",w="SelectGroup-module_checkContent_hhsnD",_="SelectGroup-module_checkboxWrapper_5aHCt",O="SelectGroup-module_footer_09b+K";function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function S(){S=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(P([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==E(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function x(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function j(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){x(a,n,o,i,c,"next",e)}function c(e){x(a,n,o,i,c,"throw",e)}i(void 0)}))}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var o=I(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return L(this,r)}}function L(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function N(e,t,r){return(t=D(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}var R=function(e){var t=e.collection,r=e.onSelectChange,n=Object(i.useRef)(null);return c.a.createElement(a.a,{className:_,checked:t.checked,onChange:r},c.a.createElement(d.a,{textRef:n,title:t.name,placement:"bottom"},c.a.createElement("span",{className:"ellipsis-wrapper"},c.a.createElement("span",{ref:n,className:"ellipsis-text"},t.name))))},M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(u,e);var t,r,a,i=T(u);function u(){var e;k(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return N(A(e=i.call.apply(i,[this].concat(r))),"state",{collectionList:[],modalVisible:!1,loading:!1}),N(A(e),"getCollectionList",j(S().mark((function t(){var r,n,o,a,i,c,u=arguments;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>0&&void 0!==u[0]?u[0]:"OTHER",n=u.length>1&&void 0!==u[1]?u[1]:null,e.setState({loading:!0}),o=e.props.record,a=o.action_tags,i=a&&a.split(","),t.next=8,f.webProxy.actionTags.list({action_type:"mark",v:new Date});case 8:(c=t.sent)&&(c.forEach((function(e){i&&i.includes(String(e.id))?e.checked=!0:e.checked=!1})),"CREATE"===r&&(c&&c.find((function(e){return e.id===n.id}))||c.unshift(n),c[0].checked=!0,e.setTags(c)),e.setState({collectionList:c,loading:!1}));case 10:case"end":return t.stop()}}),t)})))),N(A(e),"onUnMarks",j(S().mark((function t(){var r,n,a,i,c;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.collectionList,n=e.props,a=n.record,i=n.refetch,c=null==r?void 0:r.filter((function(e){return e.checked})),t.next=5,f.webProxy.mine.marks.destroy({action_id:a.id});case 5:t.sent&&(o.a.success(__("已取消收藏")),i&&i({type:"CANCEL",value:c,actionInfo:a}));case 7:case"end":return t.stop()}}),t)})))),N(A(e),"onSelectChange",(function(t,r){var n=e.state.collectionList;(null==n?void 0:n.find((function(e){return e.id===t.id}))).checked=r,e.setState({collectionList:n}),e.setTags(n)})),N(A(e),"setTags",function(){var t=j(S().mark((function t(r){var n,o,a,i;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null==r?void 0:r.filter((function(e){return e.checked})),o=e.props,a=o.record,i=o.refetch,t.next=4,f.webProxy.actionTags.setTags({action_id:a.id,tags:n});case 4:t.sent&&i({type:"SET_TAG",value:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),N(A(e),"createHandleOk",(function(t,r){var n=e.state.collectionList,o=e.props.refetch,a=null==n?void 0:n.filter((function(e){return e.checked}));e.getCollectionList(t,r),e.setState({modalVisible:!1}),o&&o({type:"CREATE",value:a}),document.getElementById("scrollContent").scrollTop=0})),e}return t=u,(r=[{key:"componentDidMount",value:function(){this.getCollectionList()}},{key:"render",value:function(){var e=this,t=this.state,r=t.collectionList,o=t.modalVisible;return c.a.createElement("div",null,c.a.createElement("div",{className:h},c.a.createElement("div",null,c.a.createElement("div",{className:m},c.a.createElement("p",{className:v},__("选择分组")),c.a.createElement("p",{className:y},__("你可以选择分组或直接")," ",c.a.createElement("a",{onClick:this.onUnMarks},__("取消收藏")))),c.a.createElement("div",{className:b,id:"scrollContent"},c.a.createElement(n.a,{spinning:this.state.loading},!(null!=r&&r.length)&&c.a.createElement("div",{className:g},__("暂无分组")),r.length>0&&(null==r?void 0:r.map((function(t){return c.a.createElement("div",{key:t.id,className:w},c.a.createElement(R,{collection:t,onSelectChange:function(r){return e.onSelectChange(t,r.target.checked)}}))}))))),c.a.createElement("div",{className:O,onClick:function(){e.setState({modalVisible:!0})}},c.a.createElement(s.a,{style:{marginRight:"4px"}}),__("新建分组")))),o&&c.a.createElement(p.a,{type:"CREATE",isModalVisible:o,handleOk:this.createHandleOk,handleCancel:function(){e.setState({modalVisible:!1})}}))}}])&&P(t.prototype,r),a&&P(t,a),Object.defineProperty(t,"prototype",{writable:!1}),u}(c.a.Component);M.propTypes={isModalVisible:l.a.bool,refetch:l.a.func,record:l.a.object};t.a=M},2948:function(e,t,r){var n=r(2816),o=r(393),a=r(224),i=r(445),c=r(1078),u=r(1507),l=i((function(e,t){var r=u(t);return c(r)&&(r=void 0),c(e)?n(e,o(t,1,c,!0),a(r,2)):[]}));e.exports=l},2950:function(e,t,r){"use strict";r(92);var n=r(45),o=(r(62),r(21)),a=(r(63),r(23)),i=r(0),c=r.n(i),u=r(2),l=r.n(u),s=r(205),f=r(191),d=r(771),p=r(1525);r(2205);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(){m=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function v(){}var y={};u(y,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(P([])));g&&g!==t&&r.call(g,a)&&(y=g);var w=v.prototype=d.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==h(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function v(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e){var t=y(Object(i.useState)(e.doc.title),2),r=t[0],u=t[1],l=y(Object(i.useState)(-1),2),s=l[0],h=l[1],b=function(){var t,n=(t=m().mark((function t(){var n,o,i,u,l,p,h;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.book,o=e.doc,i=e.docletType,u=e.onOpenTemplateSelector,l=e.inEdit,s===f.TYPE.BOOK?(p=n.id,h=f.TARGET_TYPE.BOOK):s===f.TYPE.PERSONAL?(p=window.appData.me.id,h=f.TARGET_TYPE.USER):(p=n.user_id,h=f.TARGET_TYPE.USER),Object(d.f)(p,h,s,i,r,o.id,l).then((function(){var t=c.a.createElement("span",null,__("模板已创建")," ",c.a.createElement("a",{onClick:u},__("查看全部模板")));a.a.success(t),e.onCancel()})).catch((function(e){console.error(e)}));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){v(a,n,o,i,c,"next",e)}function c(e){v(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),g=e.group,w=e.organization,_=e.isDesktop;return c.a.createElement(n.a,{className:"modal-without-padding",visible:e.visible,style:{top:78},width:"368px",onCancel:e.onCancel,title:e.modalTitle,footer:c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,{onClick:e.onCancel},__("取消")),c.a.createElement(o.a,{type:"primary",onClick:b},__("确定")))},c.a.createElement(p.a,{newTemplateName:r,onSetNewTemplateName:u,onSetSelectedScope:h,group:g,organization:w,isDesktop:_}))}g.propTypes={visible:l.a.bool,onCancel:l.a.func,modalTitle:l.a.string,docletType:l.a.string,doc:l.a.object,book:l.a.object,group:l.a.object,organization:l.a.object,isDesktop:l.a.bool,onOpenTemplateSelector:l.a.func,templateProxy:l.a.object,docProxy:l.a.object,inEdit:l.a.bool},t.a=Object(s.b)(g,!0)},2951:function(e,t,r){"use strict";r(63);var n=r(23),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(2924);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(){s=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function f(e,t,r,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function m(){}function v(){}var y={};u(y,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(P([])));g&&g!==t&&r.call(g,a)&&(y=g);var w=v.prototype=h.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=d(e[n],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==l(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=d(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(f(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function f(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e){var t=e.doc,r=e.docDomain,i=e.type,c=d(Object(o.useState)(null),2),l=c[0],p=c[1],h=d(Object(o.useState)(!1),2),m=h[0],v=h[1],y=function(){var o,a=(o=s().mark((function o(){var a,c;return s().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.docVersionProxy.find({doc_id:t.id,doc_type:r,draft:"published"===i?0:1,limit:1});case 2:1===(a=o.sent).length?p(a[0]):(c="published"===i?__("文档尚未发布"):__("暂无历史记录，请先保存文档"),n.a.warning(c)),v(!1);case 5:case"end":return o.stop()}}),o)})),function(){var e=this,t=arguments;return new Promise((function(r,n){var a=o.apply(e,t);function i(e){f(a,r,n,i,c,"next",e)}function c(e){f(a,r,n,i,c,"throw",e)}i(void 0)}))});return function(){return a.apply(this,arguments)}}();return Object(o.useEffect)((function(){y()}),[]),m||!l?null:a.a.createElement(u.b,{version:l,docVersionProxy:e.docVersionProxy,onCancel:e.onCancel,onCreated:e.onCreated||function(e){n.a.success(__("保存版本成功，点击查看 {link}",{link:a.a.createElement("a",{href:"/r/doc_versions/".concat(e.id),target:"_blank","data-testid":"version-link"},e.name)}))}})}h.propTypes={doc:c.a.object.isRequired,docDomain:c.a.string.isRequired,type:c.a.oneOf(["draft","published"]),onCancel:c.a.func.isRequired,onCreated:c.a.func,docVersionProxy:c.a.object.isRequired},t.a=h},2952:function(e,t,r){"use strict";r(279);var n=r(136),o=(r(103),r(60)),a=(r(63),r(23)),i=r(0),c=r.n(i),u=r(2),l=r.n(u),s=r(1e3),f=r.n(s),d=r(9),p=r.n(d),h=r(105),m=r(2947),v=r(30),y=r(156),b=r(955),g="index-module_icon_hhi0u",w="index-module_markedHover_PaCO8",_="index-module_markedNormal_lQdFH",O="index-module_smallMark_FfS6d",E="index-module_mark_3qbSl",S="index-module_markIconContent_GN4G+",x="index-module_isMiniTypeMark_Q9Bf6",j="index-module_iconMarked_vNmDS";function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C=function(e){var t=e.target,r=e.isMiniType,u=e.me,l=void 0===u?{}:u,s=e.reGetData,f=e.size,d=void 0===f?"normal":f,P=e.iconSize,C=e.getPopupContainer,T=Object(y.b)().isDarkMode,L=k(Object(i.useState)(!1),2),A=L[0],I=L[1],N=k(Object(i.useState)(),2),D=N[0],R=N[1],M=k(Object(i.useState)(!1),2),F=M[0],G=M[1],B=k(Object(i.useState)(t.action_tags||null),2),U=B[0],z=B[1];Object(i.useEffect)((function(){G(!!t.id)}),[t.id]),Object(i.useEffect)((function(){z(t.action_tags)}),[t.action_tags]);var W={target_type:e.targetType,id:D||t&&t.id,target_id:t&&t.target_id,action_tags:U},V=c.a.createElement(m.a,{record:W,refetch:function(e){var t=e.type,r=e.value,n=r&&r.map((function(e){return e.id})).join();z(n),"CANCEL"===t&&(G(!1),I(!1),z(null),s&&s())}}),H="small"===d?O:E,q=T?c.a.createElement(v.b,{name:"icon-collected",width:"12",height:"12",color:"#D2A638",style:{marginRight:"4px"}}):c.a.createElement("img",{width:"12",height:"12",style:{marginRight:"4px"},src:"https://gw.alipayobjects.com/mdn/rms_a6038f/afts/img/A*LpjOSJolIloAAAAAAAAAAAAAARQnAQ",alt:"avatar"}),K=T?c.a.createElement(v.b,{name:"icon-collect",width:"12",height:"12",style:{marginRight:"4px"}}):c.a.createElement("img",{width:"12",height:"12",style:{marginRight:"4px"},src:"https://gw.alipayobjects.com/mdn/rms_a6038f/afts/img/A*s0VKTqCIM0EAAAAAAAAAAAAAARQnAQ",alt:"avatar"});return c.a.createElement(n.a,{type:"menu",trigger:["click"],content:V,visible:A,onVisibleChange:function(e){if(!l||!l.id)return null;I(e)},destroyPopupOnHide:!0,getPopupContainer:C,placement:r?"bottomRight":"bottomLeft"},c.a.createElement("div",{className:r?x:H},c.a.createElement(o.a,{title:r?__("收藏"):null,placement:"bottom"},c.a.createElement("div",{className:p()(A&&r?w:_,"select-group-mark-wrapper")},F?c.a.createElement("div",{className:S,"data-testid":"already-mark",onClick:function(){I(!0)}},window.h5?q:c.a.createElement(v.b,{name:"star",className:p()(g,j),size:P||12}),!r&&c.a.createElement("span",null,__("已收藏"))):c.a.createElement("div",{className:S,"data-testid":"select-group-mark-entry",onClick:function(){!function(){var r,n=e.targetType,o=e.goLogin,i=window.appData,u=i.sharePage,f=i.share;i.isCollaborationPage&&(r=n),l.id||!o?h.webProxy.mine.marks.create({target_type:n,target_id:t.target_id,share_target_type:u&&f&&f.target_type,collaboration_target_type:r}).then((function(e){G(!0),R(e.id),setTimeout((function(){I(!0)}),100);var t=window.appData,r=t.organization,n=t.defaultSpaceHost,o=r&&r.id,i="/dashboard/collections",u=i;0===e.organization_id&&o&&(u="".concat(n).concat(i));var l=c.a.createElement("a",{href:u},"收藏");b.a?a.a.success(c.a.createElement("span",null,__("收藏成功"))):a.a.success(c.a.createElement("span",null,__("收藏成功，前往 {toastText} 查看",{toastText:l}))),s&&s()})).catch((function(e){a.a.error(e.message)})):o()}()}},window.h5?K:c.a.createElement(v.b,{name:"star-outlined",className:g,size:P||12}),!r&&c.a.createElement("span",null,__("收藏")))))))};C.defaultProps={me:window.appData.me,isMobile:window.h5,getPopupContainer:function(e){return e.parentNode}},C.propTypes={isMiniType:l.a.bool,target:l.a.object,targetType:l.a.oneOf(f.a.ALLOW_MARK_TARGET_TYPES).isRequired,style:l.a.object,onStatusChange:l.a.func,me:l.a.object,isMobile:l.a.bool,iconSize:l.a.number,getPopupContainer:l.a.func};var T=C,L=r(570);function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(this,arguments)}t.a=Object(L.d)()((function(e){var t=e.dispatch;return React.createElement(T,A({},e,{goLogin:function(){t({type:"error/toggleLoginModal",payload:{visible:!0}})}}))}))},2953:function(e,t,r){"use strict";r(2271);var n=r(2204),o=r(0),a=r.n(o),i=r(671),c=r(106),u=r.n(c),l=r(9),s=r.n(l),f=r(2),d=r.n(f),p=r(127),h=r.n(p),m=r(2935),v=r.n(m),y=r(396),b=r(485),g={loading:"index-module_loading_6Xjs9",titleWrapper:"index-module_titleWrapper_NRfy4",wrapper:"index-module_wrapper_G8dbv",scrolled:"index-module_scrolled_ZXFD1",topScrolled:"index-module_topScrolled_8VE-9",bottomScrolled:"index-module_bottomScrolled_G+APF",dragging:"index-module_dragging_fFNee",normalWrapper:"index-module_normalWrapper_9CiWJ",largeWrapper:"index-module_largeWrapper_SUwil",ListTocWrapper:"index-module_ListTocWrapper_4wy2S"};function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=j(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function x(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(){P=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new j(o||[]);return n(i,"_invoke",{value:O(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(k([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==w(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function O(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function C(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var o=D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return I(this,r)}}function I(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return N(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function R(e,t,r){return(t=M(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){var t=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===w(t)?t:String(t)}var F="catalog-tree",G="".concat(F,"-drag-container"),B=u()(F),U=n.a.DirectoryTree,z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(c,e);var t,r,n,o=A(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),R(N(t=o.call(this,e)),"initScrollValue",(function(){t.scrolled=!0})),R(N(t),"initScrollMask",(function(){if(t.props.showScrollMask){var e=t.getCurrentScrollElement();if(e){var r=t.containerElem.getBoundingClientRect().height;t.virtualListEnabled()&&(r=t.props.height);var n=e.childNodes[0].offsetHeight,o=!1,a=!1;n>r&&(o=!0,a=!0,e.scrollTop<=0?o=!1:e.scrollTop>=n-r&&(a=!1));var i={};o!==t.state.showTopScrollMask&&(i.showTopScrollMask=o),a!==t.state.showBottomScrollMask&&(i.showBottomScrollMask=a),t.setState(i)}}})),R(N(t),"onExpand",(function(e,r){var n=r.expanded,o=r.node;t.expandLocked||t.setState({expandedKeys:e,currentNodeExpanded:n,autoExpandParent:!1},(function(){t.props.onExpand&&t.props.onExpand(e,{expanded:n,node:o}),t.timer&&clearTimeout(t.timer),t.timer=setTimeout(t.initScrollMask,200)}))})),R(N(t),"onSelect",(function(e,r){var n=e[0],o=r.node.props,a=o.type,i=t.props.toggleTitleOnSelect,c=t.state.expandedKeys.slice(),u=c.findIndex((function(e){return e===n}));u<0?c.push(n):a===y.TYPES.title&&i&&c.splice(u,1),t.setState({expandedKeys:c,selectedKeys:[n]});var l=t.props.onSelect;l&&([y.TYPES.doc,y.TYPES.link,y.TYPES.uncreated_doc,y.TYPES.title].includes(a)&&l(o,r.nativeEvent))})),R(N(t),"onCheck",(function(e,r){t.props.onCheck&&t.props.onCheck(e,r)})),R(N(t),"getAction",(function(e){var t=e.node.pos.split("-");return-1===e.dropPosition-Number(t[t.length-1])?y.ACTIONS.moveBefore:e.dropToGap?y.ACTIONS.moveAfter:y.ACTIONS.prependChild})),R(N(t),"onDrop",function(){var e,r=(e=P().mark((function e(r){var n,o,a,i,c,u;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.node.key,o=r.dragNode.key,t._showLoading(),a=t.getAction(r),B("发出 Action",i={action:a,target_uuid:n,node_uuid:o}),e.next=8,t.props.onAction(i);case 8:[y.ACTIONS.prependChild].includes(a)&&(c=t.state.expandedKeys,(u=c.slice()).includes(n)||(u.push(n),t.setState({expandedKeys:u}))),t.props.onDragEnd&&t.props.onDragEnd(r.dragNode),t.setState({draggingNode:null}),t._hideLoading();case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){C(a,n,o,i,c,"next",e)}function c(e){C(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}()),R(N(t),"onDragEnd",(function(e){if(t.props.onDragEnd&&t.props.onDragEnd(e.dragNode),t._hideLoading(),t.cacheExpandedKey){var r=x(t.state.expandedKeys);if(!r.includes(t.cacheExpandedKey)){var n=x(new Set([].concat(x(r),[t.cacheExpandedKey])));t.setState({draggingNode:null,expandedKeys:n}),t.props.onExpand(n)}t.collapseTimer&&clearTimeout(t.collapseTimer),t.cacheExpandedKey=null}else t.setState({draggingNode:null})})),R(N(t),"onDragStart",(function(e){var r=e.event,n=e.node;if(n.expanded?(t.collapseTimer&&clearTimeout(t.collapseTimer),t.collapseTimer=setTimeout((function(){var e=x(t.state.expandedKeys);if(e.includes(n.uuid)){t.cacheExpandedKey=n.uuid;var r=v()(e,[n.uuid]);t.setState({draggingNode:n,expandedKeys:r}),t.props.onExpand(x(new Set(r)))}}),10)):t.setState({draggingNode:n}),r.dataTransfer){var o=document.getElementById(G);o&&document.body.removeChild(o);var a=document.createElement("div");a.style.position="fixed";var i=t.props.offscreenRendering;a.style.top=i?"-100px":"0px",a.style.left="0px",a.style.cursor="grabbing",a.id=G,a.innerText=r.target.innerText,document.body.appendChild(a),r.dataTransfer.setDragImage(a,16,10),r.dataTransfer.dropEffect="none"}t.props.onDragStart&&t.props.onDragStart(n)})),R(N(t),"_showLoading",(function(){if(t.loadingElem){var e=t.containerElem.getBoundingClientRect(),r=e.x,n=e.width;t.loadingElem.style.left="".concat(r,"px"),t.loadingElem.style.width="".concat(n,"px"),t.loadingElem.style.display="block"}})),R(N(t),"_hideLoading",(function(){t.loadingElem&&(t.loadingElem.style.display="none")})),R(N(t),"scrollTo",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.virtualListEnabled()){if(!t.treeRef)return;t.treeRef.scrollTo(e)}else{var r=t.containerElem.querySelector('[data-uuid="catalog-'.concat(e.key,'"]'));if(!r)return;var n=r.closest(".ant-tree-treenode");t.containerElem.scrollTop=n.offsetTop-e.offset}})),R(N(t),"_getChildNodeUIds",(function(e){return e&&e.child_uuid?Object(b.findAllChildrenByParentNode)(t.props.listData,e,!0).map((function(e){return e.uuid})):[]})),R(N(t),"getTreeData",(function(){var e=t.props,r=e.data,n=e.disabledKeys,o=e.disabledCheckedKeys,i=e.highlightKeys,c=e.renderTitle,u=e.visibleFilter,l=0,f=x(n);if(t.state.draggingNode){var d=t._getChildNodeUIds(t.state.draggingNode);d&&d.length&&f.push.apply(f,x(d))}return function e(t){var r,n=[],d=S(t=t.filter(u));try{for(d.s();!(r=d.n()).done;){var p=r.value,h=f.includes(p.uuid),m=i.includes(p.uuid),v=o&&o.includes(p.uuid);p.index=l,l++;var y=E(E({},p),{},{disableCheckbox:v,"data-tree-index":p.index,"data-uuid":"catalog-".concat(p.uuid),key:p.uuid,className:s()(["catalog-treenode-level-".concat(p.level+1)],{"catalog-item-highlight":m,"catalog-item-disabled":h}),title:a.a.createElement("div",{className:s()(g.titleWrapper,R({},g.titleDisabled,h))},c(p,p.index))});p.children&&p.children.length&&(y.children=e(p.children)),n.push(y)}}catch(e){d.e(e)}finally{d.f()}return n}(r)})),t.maxNodeLengthForLoading=100,t.scrolled=!1;var r=e.expandedKeys||t.getExpandKeysByLevel(e);return t.state={draggingNode:null,expandedKeys:r,selectedKeys:e.selectedKeys||[],currentNodeExpanded:!0,autoExpandParent:!0,showTopScrollMask:!1,showBottomScrollMask:!1},t}return t=c,r=[{key:"componentDidMount",value:function(){var e=this.getCurrentScrollElement();e&&e.addEventListener("scroll",this.initScrollValue,!1),this.props.showScrollMask&&(this.initScrollMask(),e&&e.addEventListener("scroll",this.initScrollMask,!1));var t=this.containerElem;t&&this.props.enableScrollHelper&&t.addEventListener("dragover",this.dragoverEdgeToScroll)}},{key:"componentWillUnmount",value:function(){var e=this.getCurrentScrollElement();e&&(e.removeEventListener("scroll",this.initScrollValue,!1),e.removeEventListener("scroll",this.initScrollMask,!1));var t=this.containerElem;t&&t.removeEventListener("dragover",this.dragoverEdgeToScroll)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,r=this.props,n=r.catalogLevel,o=r.expandedKeys,a=e.catalogLevel,i=e.expandedKeys,c=e.selectedKeys;if(!h()(i,o)){var u=i||this.lastExpandedKeys;return this.lastExpandedKeys=this.state.expandedKeys,void this.setState({expandedKeys:u})}if(i&&!h()(i,this.state.expandedKeys))return this.lastExpandedKeys=this.state.expandedKeys,void this.setState({expandedKeys:i});a!==n&&this.setState((function(r){return{expandedKeys:t.getExpandKeysByLevel(e,r.currentNodeExpanded)}})),c&&!h()(c,this.state.selectedKeys)&&this.setState({selectedKeys:c})}},{key:"shouldComponentUpdate",value:function(e,t){return!this.props.editable||!(e.catalogLevel===this.props.catalogLevel&&e.rerenderString===this.props.rerenderString&&e.height===this.props.height&&h()(e.highlightKeys,this.props.highlightKeys)&&h()(e.listData,this.props.listData)&&h()(e.checkedKeys,this.props.checkedKeys)&&h()(e.disabledCheckedKeys,this.props.disabledCheckedKeys)&&h()(t,this.state))}},{key:"dragoverEdgeToScroll",value:function(e){var t=e.clientY,r=document.documentElement,n=r.scrollTop;n>199&&t<150&&r.scrollTop>0?r.scrollTop=n-10:t>window.innerHeight-150&&r.scrollTop<r.scrollHeight-r.offsetHeight&&(r.scrollTop=n+10)}},{key:"getCurrentScrollElement",value:function(){var e=this.containerElem;return this.virtualListEnabled()&&(e=document.querySelector(".ant-tree-list-holder")),e}},{key:"virtualListEnabled",value:function(){var e=this.props,t=e.listData,r=void 0===t?[]:t,n=e.height;return r.length>this.maxNodeLengthForLoading&&n}},{key:"lockExpand",value:function(){var e=this;this.expandLocked=!0,setTimeout((function(){e.expandLocked=!1}),100)}},{key:"foldAll",value:function(){this.setState({expandedKeys:[],autoExpandParent:!1}),this.props.onExpand&&this.props.onExpand([])}},{key:"unfoldAll",value:function(){var e=this.getExpandKeysByLevel(E(E({},this.props),{},{catalogLevel:1/0}));this.setState({expandedKeys:e}),this.props.onExpand&&this.props.onExpand(e)}},{key:"getExpandKeysByLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.catalogLevel,n=e.listData,o=e.selectedKeys;if(r===1/0)return n.map((function(e){return e.uuid}));var a,i=[],c=S(n);try{for(c.s();!(a=c.n()).done;){var u=a.value;u.level<r-1&&i.push(u.uuid)}}catch(e){c.e(e)}finally{c.f()}return o&&o.length&&t&&i.push.apply(i,x(o)),i}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.listData,o=r.editable,c=void 0!==o&&o,u=r.wrapperClassName,l=void 0===u?"":u,f=r.size,d=r.height,p=r.onRightClick,h=r.checkable,m=r.checkStrictly,v=r.checkedKeys,y={},b={};this.virtualListEnabled()?(y.virtual=!0,y.height="large"===f?d-32:d):(y.virtual=!1,d&&(b.height=d,b.overflow="hidden auto")),p&&(y.onRightClick=function(e){return p(e.node.props)});var w=this.state,O=w.expandedKeys,E=void 0===O?[]:O,S=w.selectedKeys,j=w.autoExpandParent,k=w.showTopScrollMask,P=w.showBottomScrollMask,C=w.draggingNode,T=this.getTreeData();return a.a.createElement("div",{"data-testid":F,className:s()(l,g.wrapper,(e={},R(e,g.largeWrapper,"large"===f),R(e,g.normalWrapper,"normal"===f),R(e,g.editable,c),R(e,g.dragging,!!C),R(e,g.scrolled,k||P),R(e,g.topScrolled,k),R(e,g.bottomScrolled,P),e))},a.a.createElement("div",{style:b,ref:function(e){t.containerElem=e}},a.a.createElement(U,_({switcherIcon:a.a.createElement("span",{className:"lake-icon lake-icon-catalog-switcher",style:{fontSize:"16px",fontWeight:"500"}}),showIcon:!1,showLine:!1,draggable:c,expandedKeys:x(new Set(E)),selectedKeys:x(new Set(S)),blockNode:!0,expandAction:"click",autoExpandParent:j,onExpand:this.onExpand,onSelect:this.onSelect,onDrop:this.onDrop,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onCheck:this.onCheck,treeData:T,checkable:h,checkStrictly:m,checkedKeys:v,ref:function(e){t.treeRef=e}},y)),n.length>this.maxNodeLengthForLoading&&a.a.createElement("div",{className:g.loading,ref:function(e){t.loadingElem=e}},a.a.createElement(i.a,null))))}}],r&&T(t.prototype,r),n&&T(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.Component);z.defaultProps={listData:[],highlightKeys:[],selectedKeys:[],disabledKeys:[],size:"normal",toggleTitleOnSelect:!1,visibleFilter:function(){return!0},enableScrollHelper:!1,onExpand:function(){}},z.propTypes={autoExpandParent:d.a.bool,size:d.a.oneOf(["normal","large"]),toggleTitleOnSelect:d.a.bool,data:d.a.array.isRequired,listData:d.a.array,editable:d.a.bool.isRequired,offscreenRendering:d.a.bool,onRightClick:d.a.func,onAction:d.a.func,renderTitle:d.a.func.isRequired,catalogLevel:d.a.number,wrapperClassName:d.a.string,onSelect:d.a.func,onDragStart:d.a.func,onDragEnd:d.a.func,onExpand:d.a.func,visibleFilter:d.a.func,highlightKeys:d.a.array,expandedKeys:d.a.array,selectedKeys:d.a.array,disabledKeys:d.a.array,checkedKeys:d.a.object,height:d.a.number,showScrollMask:d.a.bool,rerenderString:d.a.string,enableScrollHelper:d.a.bool,checkable:d.a.bool,checkStrictly:d.a.bool,onCheck:d.a.func,disabledCheckedKeys:d.a.array};t.a=z},2954:function(e,t,r){"use strict";r(204);var n=r(70),o=(r(270),r(64)),a=r(0),i=r.n(a),c=r(2),u=r.n(c),l=r(2948),s=r.n(l),f=r(111),d=r(33),p=r(1513),h=r(2805),m="index-module_repoSelector_2Z0BO",v="index-module_repoSelectorGroup_0chHn",y="index-module_repoSelectorRepo_nq0Ar",b="index-module_repoSelectorItem_-+1uF";function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(){w=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(P([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==g(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function _(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function O(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){_(a,n,o,i,c,"next",e)}function c(e){_(a,n,o,i,c,"throw",e)}i(void 0)}))}}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e){var t=window.appData,r=t.me,n=t.organization,o=e.defaultBook,i=e.defaultGroup,c=j(Object(a.useState)([S(S({},o),{},{user:i})]),2),u=c[0],l=c[1],p=j(Object(a.useState)([i]),2),h=p[0],m=p[1],v=j(Object(a.useState)(i||{}),2),y=v[0],b=v[1],g=j(Object(a.useState)(o||{}),2),_=g[0],E=g[1],x=j(Object(a.useState)(!1),2),k=x[0],P=x[1],C=499;function T(e){return L.apply(this,arguments)}function L(){return(L=O(w().mark((function t(r){var a,i,c,u,l,p,h;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==(null===(a=r.abilities)||void 0===a?void 0:a.read)){t.next=2;break}return t.abrupt("return",o.user_id===r.id?[o]:[]);case 2:return i=e.bookLayout,c=e.disableBooks,u=void 0===c?[]:c,l=f.MIXING_BOOK_TYPES.join(","),p={organization_id:n?n.id:0,type:l,filterByAbility:"create_doc",offset:0,limit:C,group_id:r.id,sence:"collaborate",enable_group_filter:!0},t.next=7,d.a.mine.books(p);case 7:return h=t.sent,h=i?h.filter((function(e){return i.includes(e.layout)})):f.MIXING_BOOK_TYPES.includes(o.type)?h.filter((function(e){return f.MIXING_BOOK_TYPES.includes(e.type)})):h.filter((function(e){return e.type===o.type})),h=s()(h,u,"id"),t.abrupt("return",h);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return(A=O(w().mark((function t(r){var n,o;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r||!y||r.id!==y.id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,T(r);case 4:n=t.sent,o=n?n[0]:{},l(n),b(r),E(o),e.onSelected(r,o);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(){return(I=O(w().mark((function t(){var n,a,c,u,s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k){t.next=10;break}return a=f.MIXING_BOOK_TYPES.join(","),t.next=4,d.a.mine.groupsAll({offset:0,limit:C,filterByAbility:"create_doc",type:a});case 4:(c=t.sent)&&Array.isArray(c)&&c.unshift(r),m(c),P(!0),n=i||c[0],i||b(n);case 10:return t.next=12,T(n);case 12:u=t.sent,l(u),s=o||(u?u[0]:{}),o||E(s),e.onSelected(n,s);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){I.apply(this,arguments)}()}),[]),{state:{currentGroup:y,currentBook:_,groups:h,books:u},onRepoSelect:function(t){var r=u.find((function(e){return e.id===t}))||{};E(r),e.onSelected(y,r)},onGroupSelect:function(e){return A.apply(this,arguments)}}}function C(e){var t=e.disabled,r=P(e),a=r.state,c=a.currentGroup,u=a.currentBook,l=a.groups,s=a.books;return i.a.createElement(n.a,{className:m,type:"flex","data-testid":"repo-selector"},i.a.createElement("div",{className:v},i.a.createElement(h.a,{current:c,disabled:t,groups:l,onChange:r.onGroupSelect})),i.a.createElement("span",{style:{margin:"0 12px",lineHeight:"32px"}},"/"),i.a.createElement(o.a,{showSearch:!0,style:{width:"240px"},className:y,disabled:t,value:u&&u.id,placeholder:__("请选择知识库"),onSelect:r.onRepoSelect,filterOption:function(e,t){if(e&&t.book)return t.book.name.toLowerCase().includes(e.toLowerCase())}},s.map((function(e){return i.a.createElement(o.a.Option,{key:e.id,value:e.id,book:e},i.a.createElement("div",{className:b},i.a.createElement(p.h,{group:e.user,book:e,iconSize:20})))}))))}C.defaultProps={onSelected:function(){},disableBooks:[]},C.propTypes={defaultGroup:u.a.object,defaultBook:u.a.object,bookLayout:u.a.array,disabled:u.a.bool,onSelected:u.a.func,disableBooks:u.a.array};t.a=C},2965:function(e,t,r){"use strict";var n=r(1352);r.d(t,"a",(function(){return n.a}))},2970:function(e,t,r){"use strict";r(251);var n=r(116),o=(r(62),r(21)),a=(r(104),r(38)),i=(r(63),r(23)),c=r(0),u=r.n(c),l=r(2),s=r.n(l),f=r(198),d=r.n(f),p=r(33),h=(r(270),r(64)),m=r(54),v=r.n(m),y=r(1192),b=r.n(y),g=r(2790),w=r(147),_=r(254);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=O(Object(c.useState)([]),2),r=t[0],n=t[1];return Object(c.useEffect)((function(){p.a.users.mailHistories({}).then((function(e){n(e)}))}),[e]),{mailHistory:r}},x="RecipientSelector-module_recipient_Ds5UW",j="RecipientSelector-module_mention_5r6oN",k="RecipientSelector-module_userForCheck_a4ZZP",P="RecipientSelector-module_mailHistory_-ft0g",C="RecipientSelector-module_title_-yKJG",T="RecipientSelector-module_users_ZwnLM",L="RecipientSelector-module_info_eM40g",A="RecipientSelector-module_avatar_lGHzI",I="RecipientSelector-module_name_HeaN7",N="RecipientSelector-module_dep_B2T89";function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=["alibaba-inc.com","antfin.com","list.alibaba-inc.com","cainiao.com"];function F(e){var t=D(Object(c.useState)(!1),2),r=t[0],n=t[1],o=D(Object(c.useState)(e.defaultValue||[]),2),a=o[0],l=o[1],s=S(window.appData.me).mailHistory,f=D(Object(c.useState)([]),2),d=f[0],m=f[1],y=Object(c.useRef)(),w=null,O=__("最多只能选择100个邮箱地址，建议请使用邮件组"),E=__("收件人有重复，已自动去重"),R=function(t){var r=t.length,o=(t=b()(t,(function(e,t){return e.email&&t.email?e.email===t.email:!(!e.login||!t.login)&&e.login===t.login}))).length;o>100?(i.a.warning(O),t.splice(100)):o!==r&&i.a.warning(E),l(t),e.onChange(t),n(!1),m([]),setTimeout((function(){y&&y.current&&y.current.focus()}),100)};Object(c.useEffect)((function(){return function(){w&&(clearTimeout(w),w=null)}}));var F=v()((function(e){(function(e){e=e.split(";");var t=[];if(e.forEach((function(e){if(g.validator.isEmail(e))t.push({name:e,email:e});else{var r=e.match(/([^<]+)<([^>]+)>/);r&&g.validator.isEmail(r[2])&&t.push({name:r[1],email:r[2]})}})),t.length>0){var r=a.concat(t);return R(r),y.current.blur(),!0}return!1})(e)||function(e){if(-1!==e.indexOf("@")){var t=e.split("@"),r=t[1],n=M.filter((function(e){return e.startsWith(r)})).map((function(e){return{name:"".concat(t[0],"@").concat(e),email:"".concat(t[0],"@").concat(e)}}));return m(n),!0}return!1}(e)||(n(!1),p.a.users.complete({q:e.trim(),include_unconfirmed_corp_account:!0}).then((function(e){m(e),y.current.focus()})))}),300),G=a.map((function(e){return e.name}));return u.a.createElement("div",{className:x},u.a.createElement("span",{className:j,onClick:function(){if(window.__engine&&window.__engine.extractMention){var e=window.__engine.extractMention();if(0===(e=e.filter((function(e){return e.name&&e.name.trim()&&e.login&&e.login.trim()}))).length)return void i.a.warn(__("文档中没有 @ 人"));var t=a.concat(e);R(t)}}},__("添加文档中 @ 的人")),u.a.createElement(h.a,{mode:"multiple",style:{width:"100%"},placeholder:__("请输入花名或邮箱地址"),onChange:function(e){var t=a.filter((function(t){return e.includes(t.name)}));R(t)},onFocus:function(){0===a.length&&n(!0)},onSearch:F,onBlur:function(){w&&clearTimeout(w),w=setTimeout((function(){n(!1),m([])}),500)},allowClear:!0,value:G,notFoundContent:null,ref:y}),d.length>0&&u.a.createElement("div",{className:k},d.map((function(e){return u.a.createElement("p",{key:e.email,onClick:function(){!function(e){if(100!==a.length)if(0===a.filter((function(t){return t.email===e.email})).length){var t=a.concat(e);R(t)}else i.a.warning(E);else i.a.warning(O)}(e)}},e.avatar_url&&u.a.createElement(_.a,{className:A,src:e.avatar_url,size:32}),u.a.createElement("span",{className:I},e.name),e.dep&&u.a.createElement("span",{className:N},e.dep))}))),r&&s&&s.length>0&&u.a.createElement("div",{className:P,"data-testid":"mail-history"},u.a.createElement("div",{className:C},__("历史记录")),u.a.createElement("ul",null,s.map((function(e){return u.a.createElement("li",{onClick:function(){!function(e){R(e.mail_list)}(e)},key:e.id},u.a.createElement("p",{className:T},e.mail_list.map((function(e){return e.name})).join(",")),u.a.createElement("p",null,u.a.createElement("span",{className:L},__("标题："),e.title)))})))))}F.propTypes={onChange:s.a.func.isRequired,defaultValue:s.a.array};var G=Object(w.b)(F,!1),B="DocSendMail-module_sendMail_QBA+O",U="DocSendMail-module_recipient_zqM9E",z="DocSendMail-module_title_Af2FA",W="DocSendMail-module_submitButton_HEsW-",V="DocSendMail-module_mailResult_AhaV4";function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q(n.key),n)}}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=J(e);if(t){var o=J(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $(this,r)}}function $(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Z(e)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}function X(e,t,r){return(t=Q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e){var t=function(e,t){if("object"!==H(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===H(t)?t:String(t)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(s,e);var t,r,c,l=Y(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),X(Z(t=l.call(this,e)),"ready",(function(){0!==t.state.receiver.length?"sending"!==t.state.mailStatus&&(t.setState({mailStatus:"sending"},(function(){t.props.onMailSending(),t.startClock(5)})),t.timer=setTimeout(t.sendMail,5e3)):i.a.error(__("请选择收件人"))})),X(Z(t),"startClock",(function(e){t.setState({seconds:e}),0!==e&&"sending"===t.state.mailStatus&&(t.clocker=setTimeout((function(){t.startClock(e-1)}),1e3))})),X(Z(t),"sendMail",(function(){var e=t.state,r=e.receiver,n=e.title,o={id:t.props.doc.id,title:n||t.props.doc.title,content:window.__engine?window.__engine.getDocument("text/html",{mode:"inline"}):""};try{o.mail_list=t.normalizeMail(r)}catch(e){return void i.a.error(e.message)}p.a.docs.sendMail(o,{ignoreGlobalMessage:!0}).then((function(e){t.setState({mailStatus:"success",receiver:[]}),t.props.onMailSended()})).catch((function(e){e.status&&e.status>=400&&e.status<500?t.setState({mailStatus:"block",mailBlockMessage:e.message}):t.setState({mailStatus:"failed"})}))})),X(Z(t),"retry",(function(){t.setState({mailStatus:"normal",mailBlockMessage:""})})),X(Z(t),"normalizeMail",(function(e){return e.map((function(e){return d()(e,["email","login","user_id","name"])}))})),X(Z(t),"onChangeReceiver",(function(e){t.setState({receiver:e})})),X(Z(t),"onChangeTitle",(function(e){t.setState({title:e.target.value})})),X(Z(t),"renderMailSelector",(function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:z},u.a.createElement("h5",null,__("标题")),u.a.createElement(a.a,{onChange:t.onChangeTitle,defaultValue:t.props.doc.title})),u.a.createElement("div",{className:U},u.a.createElement("h5",null,__("收件人")),u.a.createElement(G,{onChange:t.onChangeReceiver,defaultValue:t.state.receiver})),u.a.createElement("div",{className:W},u.a.createElement(o.a,{onClick:t.ready,type:"primary"},__("发送"))))})),X(Z(t),"cancel",(function(){t.timer&&(clearTimeout(t.timer),t.timer=null),t.clocker&&(clearTimeout(t.clocker),t.clocker=null),t.setState({mailStatus:"normal",mailBlockMessage:""}),i.a.warning(__("已取消发送")),t.props.onMailSended()})),X(Z(t),"renderSending",(function(){return u.a.createElement("div",{className:V},u.a.createElement(n.a,{justify:"block"}),u.a.createElement("p",null,__("邮件即将在 {seconds} 秒后发送，{cancel}",{cancel:u.a.createElement("a",{href:"#",onClick:t.cancel},__("撤销")),seconds:t.state.seconds||0})))})),X(Z(t),"renderSuccess",(function(){return u.a.createElement("div",{className:V},u.a.createElement("span",{className:"larkicon larkicon-check-o"}),u.a.createElement("p",null,__("发送成功")))})),X(Z(t),"renderFailed",(function(){return u.a.createElement("div",{className:V},u.a.createElement("span",{className:"larkicon larkicon-error"}),u.a.createElement("p",null,__("发送失败, 请{retry}",{retry:u.a.createElement("a",{href:"#",onClick:t.retry},__("重新发送"))})))})),X(Z(t),"renderBlock",(function(){return u.a.createElement("div",{className:V},u.a.createElement("span",{className:"larkicon larkicon-error"}),u.a.createElement("p",null,t.state.mailBlockMessage))})),X(Z(t),"renderCanceled",(function(){return u.a.createElement("div",{className:V},u.a.createElement("p",null,__("已取消发送")))})),t.state={receiver:[]},t}return t=s,(r=[{key:"componentDidMount",value:function(){this.setState({mailStatus:"normal",mailBlockMessage:""})}},{key:"render",value:function(){var e;switch(this.state.mailStatus){case"sending":e=this.renderSending();break;case"success":e=this.renderSuccess();break;case"failed":e=this.renderFailed();break;case"block":e=this.renderBlock();break;case"canceled":e=this.renderCanceled();break;default:e=this.renderMailSelector()}return u.a.createElement("div",{className:B,"data-testid":"send-mail-modal"},u.a.createElement("h4",null,__("发送到邮箱")),u.a.createElement("p",null,__("将文档内容发送到指定邮箱")),e)}}])&&q(t.prototype,r),c&&q(t,c),Object.defineProperty(t,"prototype",{writable:!1}),s}(c.PureComponent);ee.defaultProps={},ee.propTypes={onMailSended:s.a.func,onMailSending:s.a.func,doc:s.a.object};t.a=ee},2974:function(e,t,r){"use strict";var n=r(0);t.a=function(e,t){Object(n.useEffect)((function(){if(e){var r=function(e){return e.preventDefault(),t&&(e.returnValue=t),t};return window.addEventListener("beforeunload",r),function(){return window.removeEventListener("beforeunload",r)}}}),[t,e])}},2985:function(e,t,r){"use strict";var n=r(192);r.d(t,"a",(function(){return n.a})),r.d(t,"c",(function(){return n.c})),r.d(t,"b",(function(){return n.b}))},299:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(198),i=r.n(a),c=r(1368),u=r(871),l=r(95),s=r(85),f=r(169),d=r(879),p=r(593),h=r(158);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(){b=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var v={};u(v,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(P([])));g&&g!==t&&r.call(g,a)&&(v=g);var w=h.prototype=d.prototype=Object.create(v);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==m(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(w,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function g(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){g(a,n,o,i,c,"next",e)}function c(e){g(a,n,o,i,c,"throw",e)}i(void 0)}))}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function E(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}var x=h.memberSelectorType.GROUP,j=h.memberSelectorType.BOOK,k=h.memberSelectorType.SIMPLE_WITH_ROLE,P=h.memberSelectorType.SIMPLE,C=h.memberSelectorType.DOC,T=h.memberSelectorType.LIST,L=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_(this,e),E(this,"serializeUserPostBody",(function(t){return e.serializeUserPostBody(t)})),E(this,"enableDepthAll",(function(){return!1})),E(this,"enableDepSelect",(function(){var e=window.appData.isYuque;return t.type===P||!e&&[x,j,k].includes(t.type)})),E(this,"adpatUIListData",function(){var e=w(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E(this,"adpatUINavData",function(){var e=w(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E(this,"getRoles",(function(e){return Object(d.c)(e)})),E(this,"isDepartment",(function(t){return e.isDepartment(t)})),E(this,"isUser",(function(t){return e.isUser(t)})),E(this,"getRealUsers",(function(e){return e})),E(this,"getAddRoles",(function(){var e=t.getRoles(t.type),r=t.getSupportRoles();return e.filter((function(e){return r.includes(e.value)}))})),E(this,"getInviteAddRoles",w(b().mark((function e(){var r,n,a,i,c,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.appData.isYuque,a=t.getRoles(t.type),i=t.getSupportRoles(),c=a.filter((function(e){return i.includes(e.value)})),!t.organization||!t.organization.id){e.next=8;break}return e.next=7,s.a.canIndirectAddOrgMember(t.organization);case 7:u=e.sent;case 8:return c=n&&null!==(r=t.organization)&&void 0!==r&&r.id?(c=c.map((function(e){return y(y({},e),{},{roleTip:t.type===j?__("仅空间内获得链接的人可获得权限"):__("仅空间内获得链接的人可成为"),allow_outsider:f.ALLOW_OUTSIDER.NORMAL,disabled:!1,unique:"".concat(e.key,"-NOT-ALLOW_OUTSIDER")})}))).concat(c.map((function(e){return y(y({},e),{},{roleTip:t.type===j?__("所有获得链接的人可获得权限"):__("所有获得链接的人可成为"),allow_outsider:f.ALLOW_OUTSIDER.ALLOW,disabled:!u,disabled_text:o.a.createElement(o.a.Fragment,null,__("管理员已关闭空间外人员添加权限，请联系管理员开启。"),o.a.createElement("a",{target:"_blank",href:"https://www.yuque.com/yuque/rvzzxz/csb5nu"},__("查看帮助"))),unique:"".concat(e.key,"-ALLOW_OUTSIDER")})}))):c.map((function(e){return y(y({},e),{},{roleTip:t.type===j?__("访问链接即可获得权限"):__("通过链接邀请成为"),allow_outsider:f.ALLOW_OUTSIDER.NORMAL,disabled:!1,unique:"".concat(e.key,"-NOT-ALLOW_OUTSIDER")})})),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))),E(this,"getUserCount",(function(e){var t=0;return e.forEach((function(e){e.user_count?t+=e.user_count:t+=1})),t})),this.options=r,this.type=r.type,this.list=r.list,this.doc=r.doc,this.book=r.book,this.group=r.group,this.organization=r.organization,this.target=r[this.type],this.typeName=Object(c.a)(this.target?this.target.type:this.type),this.type===x&&this.target&&l.a.isPublication(this.target)&&(this.typeName=__("知识小组")),r.members&&r.members.length&&this.setUid(r.members),this.members=r.members||[],[k,P].includes(this.type)&&(this.me=r.me),this.selected=[],this.enable=!0,this.validRoles=this.getAddRoles(),this.inviteValidRoles=this.getInviteAddRoles()}var t,r,n,a;return t=e,r=[{key:"check",value:(a=w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.warn("not implement");case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"getIconUrl",value:function(){return null}},{key:"getIconName",value:function(){return null}},{key:"setUid",value:function(e){if(e)return Array.isArray(e)?Object(u.format)(e):Object(u.formatOne)(e)}},{key:"serialize",value:function(e){var t=y(y({},e),{},{users:this.adpatUIListData(this.setUid(e.users)),navs:this.adpatUINavData(this.setUid(e.parent||e.parents))});return this.enableDepthAll()&&(void 0!==e.user_count&&(t.user_count=e.user_count),e.depthUsers&&(t.depthUsers=this.adpatUIListData(this.setUid(e.depthUsers)))),t}},{key:"getSupportRoles",value:function(){var e=[],t=d.a[this.type];return this.type===x?e=[t.member,t.readonly]:this.type===j||this.type===C?e=[t.edit,t.readonly]:this.type===T&&(e=[t.member]),this.options.supportRoles||e}},{key:"getMembers",value:function(e){return e?this.members.filter((function(t){return t.role===e})):this.members}},{key:"getMemberByUser",value:function(e){return this.members?this.members.find((function(t){return Object(p.b)(t.user,e)})):null}},{key:"isOwner",value:function(){return!1}},{key:"isMember",value:function(){return!1}},{key:"isMemberOwner",value:function(){return!1}}],n=[{key:"serializeUserPostBody",value:function(e){var t=["id","user_id","role","login","workid","work_id","name","provider_type","provider_userid"];if(Array.isArray(e))return e.map((function(e){return i()(e,t)})).map((function(e){return e.workid=e.workid||e.work_id,e}));var r=i()(e,t);return r.workid=e.workid||e.work_id,r}}],r&&O(t.prototype,r),n&&O(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();E(L,"isDepartment",(function(e){return e.type&&"department"===e.type.toLowerCase()})),E(L,"isUser",(function(e){return!e.type||"user"===e.type.toLowerCase()})),t.a=L},2990:function(e,t,r){e.exports=r(2790)},2997:function(e,t,r){var n=r(1864)(r(2931));e.exports=n},301:function(e,t,r){"use strict";var n=r(584);r.d(t,"a",(function(){return n.a}))},3037:function(e,t,r){"use strict";var n=r(1375);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}t.a=function(e){var t=window.appData,r=t.isYuque,a=t.organization;return React.createElement(n.a,o({},e,{isYuque:r,organization:a}))}},3039:function(e,t,r){"use strict";var n=r(3047),o=r.n(n),a=r(3048),i=r.n(a),c=r(1411),u=r.n(c),l=r(2997),s=r.n(l),f=r(1362),d=r.n(f),p=r(120),h=r.n(p),m=r(999);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(){g=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(P([])));b&&b!==t&&r.call(b,a)&&(m=b);var w=h.prototype=d.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==v(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(w,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function w(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){O(a,n,o,i,c,"next",e)}function c(e){O(a,n,o,i,c,"throw",e)}i(void 0)}))}}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function x(e,t,r){return t&&S(e.prototype,t),r&&S(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e,t,r){return(t=k(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}var P=x((function e(t){var r=this,n=t.tagProxy;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,"isLongTag",(function(e){return e&&e.length>m.MAX_SHOW_TEXT_LENGTH})),j(this,"getShowText",(function(e){return"".concat(e.slice(0,m.MAX_SHOW_TEXT_LENGTH),"...")})),j(this,"createTag",h()(function(){var e=E(g().mark((function e(t){var n,o,a,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTags,o=t.docId,a=d()(t.title)){e.next=4;break}return e.abrupt("return");case 4:if(m.TAG_RULES_REG.test(a)){e.next=6;break}return e.abrupt("return",{error:__("标签只能输入中文、数字、字母、-_@#/ 等符号")});case 6:if(!(a.length>m.MAX_LENGTH)){e.next=8;break}return e.abrupt("return",{error:__("标签最多{length}字",{length:m.MAX_LENGTH})});case 8:if(!s()(n,(function(e){return e.title===a}))){e.next=10;break}return e.abrupt("return",{error:__("不允许添加重复的标签")});case 10:return e.next=12,r.tagProxy.create({docId:o,title:a});case 12:if(!(i=e.sent)||!i.id){e.next=15;break}return e.abrupt("return",{data:[].concat(w(n),[i])});case 15:return e.abrupt("return",{error:__("标签新增失败")});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),200)),j(this,"getSuggest",function(){var e=E(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tagProxy.suggest(t);case 2:return n=e.sent,e.abrupt("return",u()(n,(function(e){return{value:e.title}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j(this,"destroy",function(){var e=E(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tagProxy.destroy(t);case 2:return e.sent&&i()(n,(function(e){return e.id===t.id})),e.abrupt("return",w(n));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),j(this,"arrangeResultTags",(function(e,t,r){var n=r.reduce((function(e,t){return b(b({},e),{},j({},t.title,t.count))}),{});return u()(e,(function(e){var r=e.tags.split(",").filter((function(e){return o()(t,e)<0})),a=function(e,t){return n[t]-n[e]},i=[].concat(w(t.sort(a)),w(r.sort(a)));return b(b({},e),{},{tags:i.map((function(e){return{title:e}}))})}))})),j(this,"tagsToString",(function(e){var t=e.tags,r=void 0===t?[]:t;return b(b({},e),{},{tags:r.join(",")})})),j(this,"findDocs",function(){var e=E(g().mark((function e(t,n){var o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tagProxy.findDocs(r.tagsToString(t));case 2:return o=e.sent,e.abrupt("return",r.arrangeResultTags(o,t.tags,n.tagGroup));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),j(this,"countDocs",function(){var e=E(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tagProxy.countDocs(r.tagsToString(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.tagProxy=n}));t.a=P},3047:function(e,t,r){var n=r(478),o=r(582),a=Math.max;e.exports=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var c=null==r?0:o(r);return c<0&&(c=a(i+c,0)),n(e,t,c)}},3048:function(e,t,r){var n=r(224),o=r(3049);e.exports=function(e,t){var r=[];if(!e||!e.length)return r;var a=-1,i=[],c=e.length;for(t=n(t,3);++a<c;){var u=e[a];t(u,a,e)&&(r.push(u),i.push(a))}return o(e,i),r}},3049:function(e,t,r){var n=r(2352),o=r(227),a=Array.prototype.splice;e.exports=function(e,t){for(var r=e?t.length:0,i=r-1;r--;){var c=t[r];if(r==i||c!==u){var u=c;o(c)?a.call(e,c,1):n(e,c)}}return e}},3057:function(e,t,r){"use strict";r(2659),r(2672);var n=r(2300).a,o=(r(559),r(200)),a=(r(280),r(102)),i=(r(63),r(23)),c=r(0),u=r.n(c),l=r(2),s=r.n(l),f=r(999),d=r(730),p=r(725),h=r(54),m="Tag-module_wrapper_hMv3z",v="Tag-module_add_2EgPb";function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(){b=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(P([])));g&&g!==t&&r.call(g,a)&&(m=g);var w=h.prototype=d.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==y(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(w,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function g(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){g(a,n,o,i,c,"next",e)}function c(e){g(a,n,o,i,c,"throw",e)}i(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=r.n(h)()((function(e,t){t(e)}),400),S=function(e){var t=e.docId,r=e.group,n=e.tagBiz,o=e.onChange,a=_(Object(c.useState)([]),2),u=a[0],l=a[1],s=_(Object(c.useState)([]),2),f=s[0],d=s[1],p=_(Object(c.useState)(""),2),h=p[0],m=p[1],v=_(Object(c.useState)(!1),2),y=v[0],g=v[1];function O(e,t){return E.apply(this,arguments)}function E(){return(E=w(b().mark((function e(r,a){var c,s,f;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.createTag({title:r,currentTags:u,docId:t});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(c=e.t0,s=c.error,f=c.data,!s){e.next=12;break}if(i.a.error(s),"blur"===a){e.next=12;break}return e.abrupt("return");case 12:g(!1),m(""),d([]),f&&(l(f),o(f));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=w(b().mark((function e(r){var a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.destroy({docId:t,id:r},u);case 2:a=e.sent,l(a),o(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=w(b().mark((function e(o){var a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getSuggest({target:r.login,query:o,docId:t});case 2:a=e.sent,d(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=w(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!==(t.keyCode||t.which)){e.next=6;break}return t.preventDefault(),t.stopPropagation(),e.next=6,O(t.target.value);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{state:{tagsArray:u,suggestOptions:f,showInput:y,inputValue:h},setTagsArray:l,deleteTag:function(e){return S.apply(this,arguments)},createTag:O,getSuggest:function(e){return x.apply(this,arguments)},setInputShowStatus:g,handleKeydown:function(e){return j.apply(this,arguments)},setInputValue:m}},x=function(e){var t=e.tagsArray,r=e.group,n=e.editable,i=e.deleteTag;return t.map((function(e){var t=e.title,c=e.id;return u.a.createElement(o.a,{className:"doc-tag",key:c},u.a.createElement("span",{className:"tag-title",onClick:function(){window.location.href="/r/".concat(r.login,"/tags?tag=").concat(encodeURIComponent(t))}},t),n&&u.a.createElement(a.a,{title:__("确认删除标签"),onConfirm:function(){i(c)},okText:__("确认"),cancelText:__("取消"),placement:"bottom"},u.a.createElement(d.a,{width:8})))}))},j=function(e){var t=e.tags,r=e.editable,o=e.docId,a=e.group,i=e.tagBiz,l=e.onChange,s=S({docId:o,group:a,tagBiz:i,onChange:l}),d=s.state,h=d.tagsArray,y=d.showInput,b=d.suggestOptions,g=d.inputValue,w=s.getSuggest,_=s.deleteTag,O=s.setInputShowStatus,j=s.handleKeydown,k=s.setTagsArray,P=s.setInputValue,C=s.createTag,T=(h?h.length:0)>=f.MAX_COUNT,L=r&&!y&&!T,A=r&&y;Object(c.useEffect)((function(){k(t),l(t)}),[k,t]);var I=u.a.createElement(x,{tagsArray:h,group:a,editable:r,deleteTag:_,tagBiz:i});return r?u.a.createElement("div",{className:m,"data-testid":"editable-tag"},I,L&&u.a.createElement("span",{className:v,onClick:function(){return O(!0)},"data-testid":"edit-btn"},u.a.createElement(p.a,null)),A&&u.a.createElement(n,{"data-testid":"tag-suggest",defaultActiveFirstOption:!1,className:"doc-tag-auto-complete",autoFocus:!0,options:b,onChange:function(e){P(e),E(e,w)},onSelect:C,style:{width:"200px"},backfill:!0,value:g,onBlur:function(e){C(e.target.value,"blur")},onInputKeyDown:j})):u.a.createElement("div",{className:m,"data-testid":"only-read-tag"},I)};j.useViewModel=S,j.propTypes={tags:s.a.array.isRequired,docId:s.a.number,editable:s.a.bool,group:s.a.object,tagBiz:s.a.object,onChange:s.a.func},j.defaultProps={onChange:function(){}};t.a=j},3067:function(e,t,r){"use strict";r(62);var n=r(21),o=(r(104),r(38)),a=(r(263),r(67)),i=r(0),c=r.n(i),u=r(2),l=r.n(u),s=r(93),f=r(3057),d=r(3039),p=r(421),h=r(2269),m=r(147),v=r(264),y=r(95),b=r(33),g=(r(204),r(70)),w=(r(219),r(50)),_=(r(270),r(64));function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t=function(e){var t=function(e,t){if("object"!==O(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===O(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var P=function(e){var t=e.value,r=e.contributors,n=e.onChange,a=j(Object(i.useState)(t.showAuthorOption),2),u=a[0],l=a[1],f=j(Object(i.useState)(t.showAuthorId),2),d=f[0],p=f[1],h=j(Object(i.useState)(t.showAuthorCustomText),2),m=h[0],v=h[1],y=function(t){n&&"function"==typeof n&&n(S(S({},e.value),t))};return c.a.createElement(g.a,{gutter:16},c.a.createElement(w.a,{span:10},c.a.createElement(_.a,{"data-testid":"show-author-option-selector",value:u,onChange:function(e){l(Number(e));var t=Number(e);y({showAuthorOption:e,showAuthorId:t!==s.SHOW_AUTHOR_OPTION.specific_user?0:d,showAuthorCustomText:t!==s.SHOW_AUTHOR_OPTION.custom_text?"":m})},getPopupContainer:function(e){return e.parentNode}},c.a.createElement(_.a.Option,{value:s.SHOW_AUTHOR_OPTION.all},__("显示所有编辑者")),c.a.createElement(_.a.Option,{"data-testid":"show-author-option-selector-user",value:s.SHOW_AUTHOR_OPTION.specific_user,disabled:r.length<=1},__("显示指定编辑者")),c.a.createElement(_.a.Option,{"data-testid":"show-author-option-selector-hide",value:s.SHOW_AUTHOR_OPTION.hide},__("不显示编辑者")),c.a.createElement(_.a.Option,{"data-testid":"show-author-option-selector-text",value:s.SHOW_AUTHOR_OPTION.custom_text},__("自定义")))),u===s.SHOW_AUTHOR_OPTION.specific_user&&c.a.createElement(w.a,{span:14},c.a.createElement(_.a,{"data-testid":"show-author-option-user-selector",value:d,onChange:function(e){p(Number(e)),y({showAuthorId:e})},placeholder:__("选择编辑者")},r.map((function(e){return c.a.createElement(_.a.Option,{value:e.id,key:String(e.id)},e.name)})))),u===s.SHOW_AUTHOR_OPTION.custom_text&&c.a.createElement(w.a,{span:14},c.a.createElement(o.a,{"data-testid":"show-author-option-custom-input",value:m,type:"text",autoComplete:"off",maxLength:20,placeholder:__("请输入（最多 20 个字符）"),onChange:function(e){var t=e.target.value;v(t),y({showAuthorCustomText:t})}})))};P.propTypes={value:l.a.shape({showAuthorCustomText:l.a.string,showAuthorId:l.a.number,showAuthorOption:l.a.number}).isRequired,contributors:l.a.array,onChange:l.a.func.isRequired};var C=P,T={tagWrapper:"DocMetaEdit-module_tagWrapper_H2QK1",tagTip:"DocMetaEdit-module_tagTip_ThFbG",cover:"DocMetaEdit-module_cover_JaV7l",coverPlaceholder:"DocMetaEdit-module_coverPlaceholder_c80Dd",coverActions:"DocMetaEdit-module_coverActions_CZ+Ed",btnRemoveCover:"DocMetaEdit-module_btnRemoveCover_RF2fK",btnRemoveCoverIcon:"DocMetaEdit-module_btnRemoveCoverIcon_ec2SG",moreBtn:"DocMetaEdit-module_moreBtn_c8CgD"};function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function A(){A=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==L(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function I(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){I(a,n,o,i,c,"next",e)}function c(e){I(a,n,o,i,c,"throw",e)}i(void 0)}))}}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z(n.key),n)}}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=B(e);if(t){var o=B(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return F(this,r)}}function F(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function U(e,t,r){return(t=z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e){var t=function(e,t){if("object"!==L(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===L(t)?t:String(t)}var W=a.a.Item,V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(l,e);var t,r,i,u=M(l);function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),U(G(t=u.call(this,e)),"onSubmit",(function(e){e.preventDefault(),(0,t.props.form.validateFields)((function(e,r){e||t.handleUploadCover((function(){var e=t.state,n=e.showAuthorOptionData,o=e.description,a=e.cover,i={title:r.title,slug:r.slug,show_author_id:n.showAuthorId,public:t.state.public,custom_description:o,cover:a,custom_cover:a,show_author_option:n.showAuthorOption,show_author_custom_text:n.showAuthorCustomText};t.setState({submitting:!0},N(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.save(i);case 2:t.setState({submitting:!1});case 3:case"end":return e.stop()}}),e)}))))}))}))})),U(G(t),"handleUploadCover",(function(e){t.coverUploader.current?t.coverUploader.current.onSubmit().then((function(r){t.setState({cover:r||""},e)})):e()})),U(G(t),"onChangePermission",(function(e){t.setState({public:e})})),U(G(t),"handleChangeDesc",(function(e){t.setState({description:e.target.value})})),U(G(t),"showMore",(function(){var e;t.setState({showMore:!0});var r=t.props,n=r.doc,o=r.group,a=o&&o.abilities&&o.abilities.read_tag,i=null==n||null===(e=n.abilities)||void 0===e?void 0:e.update;(a||i)&&b.a.tags.find({docId:n.id}).then((function(e){t.setState({tags:e})}))})),U(G(t),"onAuthorShowOptionChange",(function(e){t.setState({showAuthorOptionData:e})}));var r=e.doc,n=v.a.getDocShowAuthorId(r),o=v.a.getDocShowAuthorOption(r),a=v.a.getDocShowAuthorCustomText(r);return t.state={public:r.public,cover:r.cover||"",description:null!=r.custom_description?r.custom_description:r.description||"",submitting:!1,showAuthorOptionData:{showAuthorId:n||void 0,showAuthorOption:o,showAuthorCustomText:a},showMore:!1,tags:[]},t.coverUploader=c.a.createRef(),t.tagBiz=new d.a({tagProxy:b.a.tags}),t}return t=l,(r=[{key:"componentDidMount",value:function(){var e=this;"function"==typeof this.props.getSummary&&this.props.getSummary((function(t){var r=t.summary,n=t.cover;e.props.doc.custom_description||e.setState({description:r}),e.props.doc.cover||""===e.props.doc.cover||e.setState({cover:n})})),this.props.hideMoreInfo||this.showMore()}},{key:"componentWillUnmount",value:function(){this.coverUploader=null}},{key:"shouldSubmitDisabled",value:function(){var e=this.state,t=e.showAuthorOptionData,r=t.showAuthorId,n=t.showAuthorOption,o=t.showAuthorCustomText,a=e.submitting,i=n===s.SHOW_AUTHOR_OPTION.specific_user&&!r||n===s.SHOW_AUTHOR_OPTION.custom_text&&!o;return a||i}},{key:"canEditDoc",value:function(){if(window.appData.sharePage)return!1;var e=this.props.doc;return"Thread"!==e.type&&e.abilities&&e.abilities.update}},{key:"renderTags",value:function(){var e=this.props,t=e.doc,r=e.group,n=this.state.tags,o=this.canEditDoc()&&t&&t.abilities&&t.abilities.destroy,a=o||n&&n.length,i=r&&"User"===r.type,u=__("标签用于管理，仅{desc}可见",{desc:i?__("自己"):y.a.memberTitle(r)});if(a)return c.a.createElement(W,null,c.a.createElement("div",{className:T.tagWrapper},c.a.createElement("p",{className:T.title},__("标签"),c.a.createElement("span",{className:T.tagTip},u)),c.a.createElement(f.a,{tags:n||[],editable:o,group:r,docId:t.id,tagBiz:this.tagBiz})))}},{key:"render",value:function(){var e=this.props,t=e.doc,r=e.book,i=e.hideMoreInfo,u=e.hideTitle,l=this.props.form.getFieldDecorator,s="/".concat(r.namespace,"/"),f={xs:{span:24},sm:{span:14}},d=t.contributors||[],m=this.state.showMore,v=!i||m;return c.a.createElement("div",{className:"doc-meta-edit"},c.a.createElement(a.a,{layout:"vertical"},!u&&c.a.createElement(W,{label:__("标题"),colon:!1,wrapperCol:f},l("title",{initialValue:t.title,rules:[{type:"string",required:!0,message:__("请输入标题")}]})(c.a.createElement(o.a,{type:"text",autoComplete:"off"}))),c.a.createElement(W,{label:__("摘要"),colon:!1},c.a.createElement(o.a.TextArea,{value:this.state.description,onChange:this.handleChangeDesc,autoSize:{minRows:3,maxRows:6},maxLength:150})),c.a.createElement(W,{label:__("封面"),colon:!1},c.a.createElement("div",{className:T.cover},c.a.createElement(h.a,{attachable_type:"Doc",attachable_id:t.id,cover:this.state.cover,ref:this.coverUploader}))),v?c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{label:__("作者"),colon:!1},c.a.createElement(C,{value:this.state.showAuthorOptionData,onChange:this.onAuthorShowOptionChange,contributors:d})),c.a.createElement(W,{label:__("路径"),colon:!1,wrapperCol:f},l("slug",{initialValue:t.slug,rules:[{type:"string",required:!0,pattern:/^[a-z0-9\-_\.]{2,190}$/,message:__("访问路径为 2～190 个字符，只能输入小写字母、数字、横线、下划线和点")}]})(c.a.createElement(o.a,{type:"text",addonBefore:s,autoComplete:"off"}))),this.renderTags()):c.a.createElement("div",{className:T.moreBtn,onClick:this.showMore},__("高级选项")," ",c.a.createElement(p.a,null)),c.a.createElement(n.a,{className:"doc-meta-edit-submit",type:"primary",onClick:this.onSubmit,disabled:this.shouldSubmitDisabled()},__("确定"))))}}])&&D(t.prototype,r),i&&D(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.Component);V.propTypes={group:l.a.object.isRequired,book:l.a.object.isRequired,doc:l.a.object,save:l.a.func,getSummary:l.a.func,hideMoreInfo:l.a.bool,hideTitle:l.a.bool};t.a=Object(m.b)(a.a.create()(V),!0)},3072:function(e,t,r){"use strict";r(2201);var n=r(1109);r(2660);t.a=n.a},3097:function(e,t,r){"use strict";r(92);var n=r(45),o=(r(953),r(443)),a=(r(166),r(31)),i=r(0),c=r.n(i),u=r(2),l=r.n(u),s=r(106),f=r.n(s),d=r(570),p=r(84),h=r.n(p),m=r(9),v=r.n(m),y=r(1365),b=r(2951),g=r(2950),w=r(2912),_=r(2946),O=r(2246),E=(r(2660),r(3072)),S="Slider-module_slideTitle_jDMWk",x="Slider-module_slideContainer_5puOR";function j(e){var t=e.title,r=e.onChange,n=e.value,o=e.min,a=e.max,u=e.marks,l=e.className,s=e.valueMap,f=e.labelMap,d=e.unit,p=Object(i.useCallback)((function(e){r(s?s[e]:e)}),[s,r]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:S},c.a.createElement("span",null,t)),c.a.createElement("div",{className:x},c.a.createElement(E.a,{className:l,onChange:p,min:o,max:a,value:f?f[n]:n,tooltipVisible:!1,marks:u})),c.a.createElement("div",null,n,d))}j.propTypes={title:u.PropTypes.string.required,onChange:u.PropTypes.func.required,value:u.PropTypes.number.required,min:u.PropTypes.number.required,max:u.PropTypes.number.required,marks:u.PropTypes.array.required,labelMap:u.PropTypes.object,valueMap:u.PropTypes.object,className:u.PropTypes.string,unit:u.PropTypes.string},j.defaultProps={unit:"px"};var k=r(30),P="Select-module_selectTitle_o273v",C="Select-module_selectOptions_iZn-b",T="Select-module_optionAction_KeaaB",L="Select-module_iconSvg_3tsh1",A="Select-module_optionActive_HTKqR",I="Select-module_optionTitle_ZbDCu";function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function D(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==N(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===N(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){var t=e.title,r=e.value,n=e.options,o=e.onChange;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:P},t),c.a.createElement("div",{className:C},n.map((function(e){return c.a.createElement("div",{key:e.value,className:v()(T,D({},A,r===e.value)),"data-aspm-click":e.asp||null,onClick:function(){o(e.value)}},c.a.createElement(k.a,{className:L,width:38,height:28,name:r===e.value?e.selectedIcon:e.icon}),c.a.createElement("div",{className:I},e.title))}))))}R.propTypes={title:u.PropTypes.string.required,value:u.PropTypes.number.required,options:u.PropTypes.array.required,onChange:u.PropTypes.func.required},R.defaultProps={};var M="Switch-module_switchTitle_WJKZB",F="Switch-module_switchContainer_Ajcua";function G(e){var t=e.title,r=e.onChange,n=e.defaultChecked;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:M},t),c.a.createElement("div",{className:F},c.a.createElement(o.a,{size:"large",onChange:r,defaultChecked:n})))}G.propTypes={title:u.PropTypes.string.required,value:u.PropTypes.number.required,defaultChecked:u.PropTypes.bool.required,onChange:u.PropTypes.func.required},G.defaultProps={};var B=r(33),U=r(44),z=r(264),W=r(147),V=r(446),H=r(1522),q=r.n(H),K=r(2970),Y="DocActionMore-module_wrap_le9aB",$="DocActionMore-module_sceneItem_sDxCm",Z="DocActionMore-module_selectItem_Ga0F3",J="DocActionMore-module_submenuSwitchItem_AK8z3",X="DocActionMore-module_slideItem_zrnG8",Q="DocActionMore-module_switchItem_vBijY",ee="DocActionMore-module_infoItem_pGDVA",te="DocActionMore-module_submenuContainer_mgSTF",re="DocActionMore-module_submenuIcon_BidTJ",ne="DocActionMore-module_sceneAction_KTXPK",oe="DocActionMore-module_sceneTitle_GJRbH",ae="DocActionMore-module_switchTitle_oFkGc",ie="DocActionMore-module_switchDesc_pWX8R",ce="DocActionMore-module_switchAction_Yfn-p",ue="DocActionMore-module_infoContent_PBXyF",le="DocActionMore-module_menuItemContainer_sQ4rU",se="DocActionMore-module_menuDescribe_g8JML",fe="DocActionMore-module_iconContainer_Jwqih",de="DocActionMore-module_menu_+zp+S",pe="DocActionMore-module_iconBeta_hbg2z",he=r(1333);function me(e){return function(e){if(Array.isArray(e))return ve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ve(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ye=f()("doc:actionMenu"),be=function(e){var t=Object(he.a)(e),r=t.cmd,i=t.sendAlimail,u=t.mailSending,l=t.typography,s=t.defaultFontSize,f=t.paragraphSpacing,d=t.reset,p=t.doAction,m=t.getEditorLayout,E=t.getWordCount,S=t.setSendAlimail,x=t.setMailSending,P=t.contextHolder,C=function(t,r){e.onSelect({key:t}),p(t,r),Object(V.a)("c34619.d69461",{create_type:t})},T=function(e){return c.a.createElement(a.a.Item,{key:e.cmd,className:"doc-action-menu-item-".concat(e.cmd),"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(){C(e.cmd)}},c.a.createElement("div",{className:le,"data-aspm-click":e.asp||null},c.a.createElement("div",{className:fe},e.icon&&c.a.createElement(k.b,{name:e.icon,width:16})),e.tip_id?c.a.createElement(y.a,{tip_id:e.tip_id},e.title):e.title,e.isBeta&&c.a.createElement("span",{className:pe},"Beta")))},L=function(e){var t=me(e.actions);return c.a.createElement(a.a.Item,{key:"scene",className:$},t.map((function(e){return c.a.createElement("div",{key:e.cmd,scene:e.cmd,className:ne,"data-aspm-click":e.asp||null,onClick:function(){C(e.cmd)}},c.a.createElement(k.b,{name:e.sceneIcon,width:36,height:36}),c.a.createElement("div",{className:oe},e.title))})))},A=function(e){var t=me(e.options),r="";return e.cmd===U.a.DOC.document_typography.cmd?r=l:e.cmd===U.a.DOC.document_layout_select.cmd&&(r=m()),c.a.createElement(a.a.Item,{key:e.cmd,className:Z,onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement(R,{title:e.title,options:t,value:r,onChange:function(t){return C(e.cmd,t)}}))},I=function(e){var t=v()("doc-action-menu-item-".concat(e.cmd),J),r="";return e.cmd===U.a.DOC.document_paragraph_spacing.cmd&&(r=f===h.a.PARAGRAPH_SPACING.relax),c.a.createElement(a.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-submenu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement(G,{title:e.title,defaultChecked:r,onChange:function(t){C(e.cmd,t?h.a.PARAGRAPH_SPACING.relax:h.a.PARAGRAPH_SPACING.default)}}))},N=function(e){var t=v()("doc-action-menu-item-".concat(e.cmd),Q),r="";return e.cmd===U.a.DOC.document_layout.cmd&&(r=m()),c.a.createElement(a.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement("div",{className:ae},c.a.createElement("span",null,e.title),c.a.createElement("div",{className:ie},e.describe)),c.a.createElement(o.a,{onChange:function(t){C(e.cmd,t?h.a.VIEWPORT.adapt:h.a.VIEWPORT.fixed)},size:"small",defaultChecked:r===h.a.VIEWPORT.adapt,className:ce}))},D=function(e){var t=v()("doc-action-menu-item-".concat(e.cmd),X),r="",n="";return e.cmd===U.a.DOC.document_fontsize.cmd&&(n=l,r=s),c.a.createElement(a.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement(j,{className:n,title:e.title,min:e.min,max:e.max,value:r,marks:e.marks,labelMap:e.labelMap,valueMap:e.valueMap,onChange:function(t){return C(e.cmd,t)}}))},M=function(){return null},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.map((function(e,r){return"scene"===e.type?e.actions.length>0?L(e):null:"select"===e.type?A(e):"switch"===e.type?t?I(e):N(e):"slider"===e.type?D(e):"submenu"===e.type?M(e):"divide"===e.cmd?c.a.createElement(a.a.Divider,{key:r}):T(e)}));return r};M=function(e){var t=v()("doc-action-menu-item-".concat(e.cmd));return c.a.createElement(a.a.SubMenu,{key:e.cmd,popupClassName:Y,className:t,title:c.a.createElement("div",{className:te,onClick:function(e){return e.stopPropagation()}},c.a.createElement("div",{className:le,"data-aspm-click":e.asp||null},c.a.createElement("div",{className:fe},e.icon&&c.a.createElement(k.b,{name:e.icon,width:16})),e.tip_id?c.a.createElement(y.a,{tip_id:e.tip_id},e.title):e.title,e.isBeta&&c.a.createElement("span",{className:pe},"Beta"),c.a.createElement(k.b,{className:re,name:"arrow-right",width:16})),c.a.createElement("div",{className:se},e.describe)),onTitleClick:function(e){e.domEvent.stopPropagation()},"data-testid":"doc-action-menu-item-".concat(e.cmd)},F(e.subcmds,!0))};var W=e.book,H=e.className,ve=e.doc,be=e.commandParams,ge=e.commands;return ye("render, currect action",r,be),c.a.createElement("div",{className:"".concat(Y," ").concat(H)},c.a.createElement(a.a,{className:de,selectable:!1,multiple:!0,mode:"vertical"},F(ge),c.a.createElement(a.a.Divider,null),function(){var t,r,n=e.doc;return c.a.createElement(a.a.Item,{key:"info",className:ee,onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement("div",{className:ue},"Doc"===n.type?c.a.createElement("div",null,__("字数统计：{count}",{count:E()||0})):c.a.createElement("div",null,__("阅读数：{count}",{count:n.hits||0})),c.a.createElement("div",null,__(n.user?"{user} 创建于 {timer}":"创建于 {timer}",{user:null===(t=n.user)||void 0===t?void 0:t.name,timer:q.a.format(n.created_at,{onlyDate:!0})})),c.a.createElement("div",null,__(n.last_editor?"{user} 更新于 {time}":"更新于 {time}",{user:null===(r=n.last_editor)||void 0===r?void 0:r.name,time:q.a.format(n.content_updated_at)})),c.a.createElement("div",null,__("编辑者："),n.contributors.map((function(e){return e.name})).join("、"))))}()),P,r===U.a.DOC.export_doc.cmd&&c.a.createElement(w.a,{doc:ve,bookId:W.id,onCancel:d,exportParams:be}),r===U.a.BOOK.export_book.cmd&&c.a.createElement(O.a,{visible:!0,book:W,exportParams:be,onCancel:d}),r===U.a.DOC.import_to_doc.cmd&&c.a.createElement(_.a,{book:W,formats:z.a.getImportFormats({multi:!1}),importType:h.a.IMPORT_TYPE.PARSE,onCancel:d,onSuccess:function(t){e.onCommandsExecuted({cmd:r,result:t})}}),r===U.a.DOC.import_to_book.cmd&&c.a.createElement(_.a,{book:W,importParams:be,formats:z.a.getImportFormats({multi:!0}),importType:h.a.IMPORT_TYPE.CREATE,onCancel:d,onSuccess:function(t){e.onCommandsExecuted({cmd:r,result:t})},group:window.appData.group}),r===U.a.DOC.save_as_template.cmd&&c.a.createElement(g.a,{visible:r===U.a.DOC.save_as_template.cmd,onCancel:d,modalTitle:__("另存为模板"),book:W,doc:e.doc,group:window.appData.group,organization:window.appData.organization,docletType:e.doc.type,onOpenTemplateSelector:function(){return p(U.a.DOC.create_from_template.cmd)},templateProxy:B.a.templates.v1,docProxy:B.a.docs,inEdit:e.inEdit}),r===U.a.DOC.save_published_as_version.cmd&&c.a.createElement(b.a,{doc:ve,docDomain:"Doc",type:"published",onCancel:d,docVersionProxy:B.a.docVersions}),c.a.createElement(n.a,{width:500,visible:i,footer:null,closable:!u,maskClosable:!1,onCancel:function(){S(!1)}},i&&c.a.createElement(K.a,{onMailSended:function(){x(!1)},onMailSending:function(){x(!0)},doc:ve})))};be.defaultProps={className:"",onSelect:function(){},onCommandsExecuted:function(){},commandParams:{}},be.propTypes={className:l.a.string,group:l.a.object.isRequired,book:l.a.object.isRequired,doc:l.a.object,commands:l.a.array.isRequired,commandParams:l.a.object,onSelect:l.a.func,onCommandsExecuted:l.a.func,dispatch:l.a.func,onSelectTemplate:l.a.func,inEdit:l.a.bool};t.a=Object(d.d)()(Object(W.b)(be))},31:function(e,t,r){"use strict";r(1182);var n=r(190),o=r(0),a=r.n(o),i=r(69),c=r.n(i);r(166);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var l=["onKeyDown"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var h=[37,38,39,40],m=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],v=function(e){var t,r=e.onKeyDown,n=p(e,l),i=Object(o.useCallback)((t=r,function(e){return!(!m.includes(e.key)&&!h.includes(e.keyCode))||t(e)}),[r]);return a.a.createElement("ul",d({},n,{onKeyDown:i}))},y=a.a.forwardRef((function(e){var t=d({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return a.a.createElement(n.a,d({component:v},t))}));y.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n.a.MenuProps),c()(y,n.a),t.a=y},3101:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));r(103);var n=r(60),o=r(0),a=r(30),i=r(9),c=r.n(i),u="styles-module_iconAction_3ZFFk",l=["iconName","className"],s=["tooltip"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=function(e){var t=e.iconName,r=e.className,n=d(e,l);return o.createElement("button",f({type:"button"},n,{className:c()(u,r)}),o.createElement(a.b,{name:t,size:20}))},h=function(e){var t=e.tooltip,r=d(e,s);return t?o.createElement(n.a,{placement:"bottom",title:t},o.createElement(p,r)):o.createElement(p,r)}},3105:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return a}));var n="data-lark-popup-container",o="data-lark-doc-embed",a="doc_embed"},3107:function(e,t,r){"use strict";var n=r(0),o=r(324),a=r.n(o),i=r(2766),c=r(2770);t.a=function(e,t){Object(n.useEffect)((function(){var r=new URLSearchParams(window.location.search);if("doc_embed"!==r.get("view")&&!r.get("inner")&&"Thread"!==t.type)return t.abilities&&t.abilities.update&&a()(c.e.edit.key,(function(r){var n=r.target;"INPUT"!==n.tagName&&(n.isContentEditable&&!n.classList.contains("textarea-cell")||("Sheet"===t.type||"Table"===t.type?i.a.saveSheetPosition(t.id):i.a.saveReadPosition(t.id),window.location.href="/".concat(e.namespace,"/").concat(t.slug,"/edit")))})),function(){a.a.unbind(c.e.edit.key)}}),[])}},3116:function(e,t,r){"use strict";t.a={logoWrapper:"ViewerHeader-module_logoWrapper_nnDzf",navigation:"ViewerHeader-module_navigation_opJY6",logoWrapperActive:"ViewerHeader-module_logoWrapperActive_Ptc2p",logo:"ViewerHeader-module_logo_-rHiY",wrapper:"ViewerHeader-module_wrapper_vhIJ4",mark:"ViewerHeader-module_mark_c28hV",collaborate:"ViewerHeader-module_collaborate_VW8td",iconWrapper:"ViewerHeader-module_iconWrapper_Wis4F",icon:"ViewerHeader-module_icon_TPz6f",playButton:"ViewerHeader-module_playButton_3Qm5h",skylink:"ViewerHeader-module_skylink_toi1A",popoverMore:"ViewerHeader-module_popoverMore_JrUsz",editorBtn:"ViewerHeader-module_editorBtn_Sb8OT",versionSelector:"ViewerHeader-module_versionSelector_Gx9Eb",versionName:"ViewerHeader-module_versionName_4oYUk",logoOnboardingWrapper:"ViewerHeader-module_logoOnboardingWrapper_VyXtw",search:"ViewerHeader-module_search_fw9Jl",collabEntry:"ViewerHeader-module_collabEntry_XfPGf",larkDotZoom:"ViewerHeader-module_larkDotZoom_NeG+z"}},3119:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));r(62);var n=r(21),o=r(0),a=r.n(o),i=r(30),c="index-module_playBtn_5wHuG";function u(){return a.a.createElement(n.a,{className:c,onClick:function(){return window.postMessage("show:play")}},a.a.createElement(i.b,{name:"play",width:8,height:12}),__("播放"))}},312:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(33),o={datasheetRecord:n.a.datasheetRecord,docs:{exports:n.a.docs.exports,findOne:n.a.docs.findOne,addToCatalog:n.a.docs.addToCatalog,cloneSheetData:n.a.docs.cloneSheetData},books:{exports:n.a.books.exports},import:{getImportResult:n.a.import.getImportResult},templates:{v2:n.a.templates.v2},editor:n.a.editor}},3123:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(2925),o=r(633),a=Object(o.a)({loader:function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(6),r.e(105)]).then(r.bind(null,3157)).then((function(e){return e.PresentationRender}))},loading:n.a}),i=Object(o.a)({loader:function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(6),r.e(105)]).then(r.bind(null,3157))},loading:n.a});t.b=i},3155:function(e,t,r){"use strict";t.a={modal:"CatalogViewModel-module_modal_rJNDk",modalTitle:"CatalogViewModel-module_modalTitle_AJ8tO",modalDescription:"CatalogViewModel-module_modalDescription_n0icU",btnCloseModal:"CatalogViewModel-module_btnCloseModal_j2eMP"}},3161:function(e,t,r){"use strict";r(2259);var n=r(1143),o=r.n(n),a=(r(62),r(21)),i=(r(557),r(216)),c=(r(263),r(67)),u=(r(104),r(38)),l=r(0),s=r.n(l),f=r(2),d=r.n(f),p="CatalogLinkForm-module_formItem_NxeJR",h="CatalogLinkForm-module_actions_Y-0Ny";function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=function(e){var t=e.item,r=e.form.getFieldDecorator,n=function(e){var t=e.form,r=e.item,n=!r||0!==r.open_window,o=v(Object(l.useState)(n),2),a=o[0],i=o[1];return{state:{openWindow:a},onSubmit:function(){t.validateFields((function(t,r){t||e.onSubmit({title:r.title,url:r.url,open_window:!1===a?0:1})}))},handleChangeOpenWindow:function(e){i(e.target.checked)}}}(e),f={colon:!1,className:p};return s.a.createElement(o.a,{autoInsertSpaceInButton:!1},s.a.createElement(c.a,null,s.a.createElement(c.a.Item,m({label:__("标题")},f),r("title",{initialValue:t&&t.title,rules:[{required:!0,message:__("请输入标题")}]})(s.a.createElement(u.a,null))),s.a.createElement(c.a.Item,m({label:__("网页链接")},f),r("url",{initialValue:t&&t.url,rules:[{required:!0,message:__("请输入链接")}]})(s.a.createElement(u.a,null))),s.a.createElement(c.a.Item,null,s.a.createElement(i.a,{checked:n.state.openWindow,onChange:n.handleChangeOpenWindow},__("在新标签页打开"))),s.a.createElement("div",{className:h},s.a.createElement(c.a.Item,null,s.a.createElement(a.a,{onClick:e.onCancel},__("取消"))),s.a.createElement(c.a.Item,null,s.a.createElement(a.a,{type:"primary",htmlType:"submit",onClick:n.onSubmit},__("确认"))))))};b.propTypes={item:d.a.object,onCancel:d.a.func.isRequired,onSubmit:d.a.func.isRequired,form:d.a.object.isRequired};t.a=c.a.create()(b)},3165:function(e,t,r){"use strict";r(63);var n=r(23),o=(r(92),r(45)),a=r(0),i=r.n(a),c=r(2),u=r.n(c),l=r(288),s=r.n(l),f=r(396),d=r(9),p=r.n(d),h=r(33),m=r(2263),v=r(2928),y=r(3161),b=r(3155);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(){w=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(P([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==g(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){S(a,n,o,i,c,"next",e)}function c(e){S(a,n,o,i,c,"throw",e)}i(void 0)}))}}function j(e){u.a.checkPropTypes(j.propTypes,e,"prop","CatalogViewModel");var t=e.item,r=e.group,a=e.book,c=e.doc,l=e.catalog,d=e.disableSelectorBooks,g=e.showRepoSelector,_=void 0===g||g,E=e.onCopy,S=e.onMove,k=e.onAction,P=e.onDestroy,C=e.onUnshare,T=e.hideCopyWithChildren,L=void 0!==T&&T,A=function(e){t&&k({node_uuid:t.uuid,action:"edit",title:e.title,url:e.url,type:f.TYPES.link,open_window:e.open_window})};return{handleEditLinkNode:A,showCopyToModal:function(){var e=o.a.confirm(),u=function(){var r=x(w().mark((function r(){var o,u,s,f,d,p,m,v,y,b,g=arguments;return w().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=g.length>0&&void 0!==g[0]?g[0]:{},r.prev=1,r.next=4,h.a.catalogNodes.copy({book_id:a.id,node_uuid:t&&t.uuid,target_uuid:o.target_uuid,action:o.action,target_book_id:o.targetBook.id,with_children:o.with_children,insert_to_catalog:o.insert_to_catalog,doc_id:c&&c.id},{useOriginResp:!0});case 4:if(u=r.sent,s=u.data,f=u.meta,d=f.toc_updated_at,p=f.docIds,e.destroy(),m=o.targetBook,v=o.targetGroup,m.id!==a.id?(y=p[0],b=y?"/go/doc/".concat(p[0]):"/".concat(v.login,"/").concat(m.slug),n.a.success(__("已复制到：{target}",{target:i.a.createElement("a",{href:b,target:"_blank"},m.name)}),3)):n.a.success(__("复制成功")),!E){r.next=12;break}return r.next=12,E(l,s,O(O({},o),{},{currentItem:t,toc_updated_at:d,doc_ids:p}));case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(1),console.error(r.t0);case 17:return r.prev=17,e.destroy(),r.finish(17);case 20:case"end":return r.stop()}}),r,null,[[1,14,17,20]])})));return function(){return r.apply(this,arguments)}}();e.update({className:p()(b.a.modalCatalog,b.a.modal),icon:null,closable:!0,width:600,footer:null,centered:!0,title:i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",{className:b.a.modalTitle},__("复制到...")),_&&i.a.createElement("p",{className:b.a.modalDescription},__("可复制到有创建文档权限的知识库"))),content:i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{currentGroup:r,currentBook:a,disableSelectorBooks:d,showRepoSelector:_,items:t?[t]:[],submitType:"copy",onSubmit:u,onCancel:function(){e.destroy()},hideCopyWithChildren:L}))})},showMoveToModal:function(){var e=o.a.confirm(),u=function(){var r=x(w().mark((function r(){var o,u,s,f,d,p,m,v=arguments;return w().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=v.length>0&&void 0!==v[0]?v[0]:{},u=o.targetGroup,s=o.targetBook,f="/".concat(u.login,"/").concat(s.slug),r.prev=3,r.next=6,h.a.catalogNodes.move({book_id:a.id,node_uuid:t&&t.uuid,target_uuid:o.target_uuid,action:o.action,target_book_id:o.targetBook.id,with_children:o.with_children,insert_to_catalog:o.insert_to_catalog,doc_id:c&&c.id},{useOriginResp:!0,ignoreGlobalMessage:!0});case 6:if(d=r.sent,p=d.data,m=d.meta.docIds,e.destroy(),s.id!==a.id?n.a.success(__("已移动到：{target}",{target:i.a.createElement("a",{href:f,target:"_blank"},s.name)}),3):n.a.success(__("移动成功")),!S){r.next=14;break}return r.next=14,S(l,p,O(O({},o),{},{currentItem:t,docIds:m}));case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(3),"limit_exceeded"===r.t0.code?n.a.error(r.t0.message):n.a.error(__("出错了，可尝试在 {targetBookNode} 找到文档",{targetBookNode:i.a.createElement("a",{href:"".concat(f,"/toc?tempStore=1"),target:"_blank"},__("全部文档"))}));case 19:case"end":return r.stop()}}),r,null,[[3,16]])})));return function(){return r.apply(this,arguments)}}();e.update({className:p()(b.a.modalCatalog,b.a.modal),icon:null,closable:!0,width:600,footer:null,centered:!0,title:i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",{className:b.a.modalTitle},__("移动到...")),_&&i.a.createElement("p",{className:b.a.modalDescription},__("可移动到有创建文档权限的知识库"))),content:i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{currentGroup:r,currentBook:a,disableSelectorBooks:d,showRepoSelector:_,items:t?[t]:[],submitType:"move",onSubmit:u,onCancel:function(){e.destroy()}}))})},showLinkNodeModal:function(){var e=o.a.confirm();e.update({className:b.a.modal,icon:null,closable:!0,width:520,centered:!0,title:i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",{className:b.a.modalTitle},__("添加链接")),i.a.createElement("p",{className:b.a.modalDescription},__("通过添加网页链接，可插入非本知识库的内容"))),content:i.a.createElement(y.a,{item:t,onSubmit:function(t){A(t),e.destroy()},onCancel:function(){return e.destroy()}})})},showRemoveConfirmModal:function(){if(t){var e=o.a.confirm(),c=t.child_uuid?"removeWithChildren":"remove";e.update({className:b.a.removeModal,width:437,centered:!0,title:__("确认要移出目录吗？",{name:t.title}),content:t.child_uuid?__("将同时移出 {name} 下的所有节点",{name:t.title}):null,onOk:function(){k({node_uuid:t.uuid,action:c}),n.a.success(i.a.createElement(i.a.Fragment,null,__("移出成功！"),i.a.createElement("a",{href:"/".concat(r.login,"/").concat(a.slug,"/toc?tempStore=1&status=notInTOC")},__("查看"))))},okText:__("确认"),cancelText:__("取消")})}},showDestroyConfirmModal:function(){var e;t&&o.a.confirm().update({className:b.a.removeModal,width:437,centered:!0,title:__("确认删除 {name} 吗？",{name:t.title}),content:t.child_uuid?__("同时删除 {name} 下的所有文档",{name:t.title}):null,onOk:(e=x(w().mark((function e(){var r,n,o,i;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.updateNode(a,{node_uuid:t.uuid,action:"destroyWithChildren",has_child:!!t.child_uuid});case 2:r=e.sent,n=r.toc,o=r.deletedDocIds,i=void 0===o?[]:o,P&&P(l,n,{currentItem:t,docIds:i});case 7:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),okText:__("确认"),cancelText:__("取消")})},showUnshareConfirmModal:function(){if(t){var e=__("你正在取消《{title}》的分享链接，取消后用户将无法通过原有链接浏览",{title:t.title});o.a.confirm({title:__("关闭分享"),content:e,onOk:function(){C(t)}})}},copyLink:function(){var e;if(t.type===f.TYPES.link)e=t.url;else{var o=window.location,i=o.protocol,c=o.host;e="".concat(i,"//").concat(c,"/").concat(r.login,"/").concat(a.slug,"/").concat(t.url)}s()(e),n.a.success(__("链接复制成功"))}}}j.propTypes={group:u.a.object.isRequired,book:u.a.object.isRequired,doc:u.a.object,catalog:u.a.array.isRequired,item:u.a.object,disableSelectorBooks:u.a.array,showRepoSelector:u.a.bool,onCopy:u.a.func,onMove:u.a.func,onAction:u.a.func,onDestroy:u.a.func,onUnshare:u.a.func},t.a={useViewModel:j}},3175:function(e,t,r){"use strict";r.d(t,"a",(function(){return Wo})),r.d(t,"c",(function(){return $a})),r.d(t,"b",(function(){return Ba})),r.d(t,"d",(function(){return fo})),r.d(t,"e",(function(){return bo}));var n=r(0),o=r.n(n);function a(e,t){}var i=a.bind(null,"warn");a.bind(null,"error");function c(){}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t,r){var n=t.map((function(t){var n=function(e,t){return l(l({},e),t)}(r,t.options);return e.addEventListener(t.eventName,t.fn,n),function(){e.removeEventListener(t.eventName,t.fn,n)}}));return function(){n.forEach((function(e){e()}))}}var d="Invariant failed";function p(e){this.message=e}function h(e,t){if(!e)throw new p(d)}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}p.prototype.toString=function(){return this.message};var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(a,e);var t,r,n,o=g(a);function a(){var e;v(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).callbacks=null,e.unbind=c,e.onWindowError=function(t){var r=e.getCallbacks();r.isDragging()&&(r.tryAbort(),i("\n        An error was caught by our window 'error' event listener while a drag was occurring.\n        The active drag has been aborted.\n      ")),t.error instanceof p&&t.preventDefault()},e.getCallbacks=function(){if(!e.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return e.callbacks},e.setCallbacks=function(t){e.callbacks=t},e}return t=a,(r=[{key:"componentDidMount",value:function(){this.unbind=f(window,[{eventName:"error",fn:this.onWindowError}])}},{key:"componentDidCatch",value:function(e){if(!(e instanceof p))throw e;this.setState({})}},{key:"componentWillUnmount",value:function(){this.unbind()}},{key:"render",value:function(){return this.props.children(this.setCallbacks)}}])&&y(t.prototype,r),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.a.Component),E=function(e){return e+1},S=function(e,t){var r=e.droppableId===t.droppableId,n=E(e.index),o=E(t.index);return r?"\n      You have moved the item from position ".concat(n,"\n      to position ").concat(o,"\n    "):"\n    You have moved the item from position ".concat(n,"\n    in list ").concat(e.droppableId,"\n    to list ").concat(t.droppableId,"\n    in position ").concat(o,"\n  ")},x=function(e,t,r){return t.droppableId===r.droppableId?"\n      The item ".concat(e,"\n      has been combined with ").concat(r.draggableId):"\n      The item ".concat(e,"\n      in list ").concat(t.droppableId,"\n      has been combined with ").concat(r.draggableId,"\n      in list ").concat(r.droppableId,"\n    ")},j=function(e){return"\n  The item has returned to its starting position\n  of ".concat(E(e.index),"\n")},k={dragHandleUsageInstructions:"\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",onDragStart:function(e){return"\n  You have lifted an item in position ".concat(E(e.source.index),"\n")},onDragUpdate:function(e){var t=e.destination;if(t)return S(e.source,t);var r=e.combine;return r?x(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},onDragEnd:function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      ".concat(j(e.source),"\n    ");var t=e.destination,r=e.combine;return t?"\n      You have dropped the item.\n      ".concat(S(e.source,t),"\n    "):r?"\n      You have dropped the item.\n      ".concat(x(e.draggableId,e.source,r),"\n    "):"\n    The item has been dropped while not over a drop area.\n    ".concat(j(e.source),"\n  ")}},P=r(1217),C=r(570);function T(e,t){var r=Object(n.useState)((function(){return{inputs:t,result:e()}}))[0],o=Object(n.useRef)(!0),a=Object(n.useRef)(r),i=o.current||Boolean(t&&a.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(t,a.current.inputs))?a.current:{inputs:t,result:e()};return Object(n.useEffect)((function(){o.current=!1,a.current=i}),[i]),i.result}var L=T,A=function(e,t){return T((function(){return e}),t)};function I(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R={x:0,y:0},M=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},F=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},G=function(e,t){return e.x===t.x&&e.y===t.y},B=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},U=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return D(r={},e,t),D(r,"x"===e?"y":"x",n),r},z=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},W=function(e,t){return Math.min.apply(Math,I(t.map((function(t){return z(e,t)}))))},V=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},H=r(374),q=function(e){var t=e.top,r=e.right,n=e.bottom,o=e.left;return{top:t,right:r,bottom:n,left:o,width:r-o,height:n-t,x:o,y:t,center:{x:(r+o)/2,y:(n+t)/2}}},K=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},Y=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},$={top:0,right:0,bottom:0,left:0},Z=function(e){var t=e.borderBox,r=e.margin,n=void 0===r?$:r,o=e.border,a=void 0===o?$:o,i=e.padding,c=void 0===i?$:i,u=q(K(t,n)),l=q(Y(t,a)),s=q(Y(l,c));return{marginBox:u,borderBox:q(t),paddingBox:l,contentBox:s,margin:n,border:a,padding:c}},J=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var r=Number(t);return isNaN(r)&&Object(H.default)(!1),r},X=function(e,t){var r,n,o=e.borderBox,a=e.border,i=e.margin,c=e.padding,u=(n=t,{top:(r=o).top+n.y,left:r.left+n.x,bottom:r.bottom+n.y,right:r.right+n.x});return Z({borderBox:u,border:a,margin:i,padding:c})},Q=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),X(e,t)},ee=function(e,t){var r={top:J(t.marginTop),right:J(t.marginRight),bottom:J(t.marginBottom),left:J(t.marginLeft)},n={top:J(t.paddingTop),right:J(t.paddingRight),bottom:J(t.paddingBottom),left:J(t.paddingLeft)},o={top:J(t.borderTopWidth),right:J(t.borderRightWidth),bottom:J(t.borderBottomWidth),left:J(t.borderLeftWidth)};return Z({borderBox:e,margin:r,padding:n,border:o})},te=function(e){var t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return ee(t,r)},re=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},ne=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]};function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ce=function(e,t){return t&&t.shouldClipSubject?function(e,t){var r=q({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r}(t.pageMarginBox,e):q(e)},ue=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,o=e.frame,a=function(e,t){return t?re(e,t.scroll.diff.displacement):e}(t.marginBox,o),i=function(e,t,r){return r&&r.increasedBy?ae(ae({},e),{},ie({},t.end,e[t.end]+r.increasedBy[t.line])):e}(a,n,r);return{page:t,withPlaceholder:r,active:ce(i,o)}};function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var de=function(e,t){h(e.frame);var r=e.frame,n=F(t,r.scroll.initial),o=B(n),a=se(se({},r),{},{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:o},max:r.scroll.max}}),i=ue({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return se(se({},e),{},{frame:a,subject:i})},pe=r(1085);function he(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function me(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function ve(e,t){if(e.find)return e.find(t);var r=me(e,t);return-1!==r?e[r]:void 0}function ye(e){return Array.prototype.slice.call(e)}var be=Object(pe.a)((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),ge=Object(pe.a)((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),we=Object(pe.a)((function(e){return he(e)})),_e=Object(pe.a)((function(e){return he(e)})),Oe=Object(pe.a)((function(e,t){return _e(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}))}));function Ee(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function Se(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var xe=Object(pe.a)((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))}));function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){Pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ce=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Te={point:R,value:0},Le={invisible:{},visible:{},all:[]},Ae={displaced:Le,displacedBy:Te,at:null},Ie=function(e,t){return function(r){return e<=r&&r<=t}},Ne=function(e){var t=Ie(e.top,e.bottom),r=Ie(e.left,e.right);return function(n){if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;var o=t(n.top)||t(n.bottom),a=r(n.left)||r(n.right);if(o&&a)return!0;var i=n.top<e.top&&n.bottom>e.bottom,c=n.left<e.left&&n.right>e.right;return!(!i||!c)||(i&&a||c&&o)}},De=function(e){var t=Ie(e.top,e.bottom),r=Ie(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&r(e.left)&&r(e.right)}},Re={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Me={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){Be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ue=function(e){var t=e.target,r=e.destination,n=e.viewport,o=e.withDroppableDisplacement,a=e.isVisibleThroughFrameFn,i=o?function(e,t){var r=t.frame?t.frame.scroll.diff.displacement:R;return re(e,r)}(t,r):t;return function(e,t,r){return!!t.subject.active&&r(t.subject.active)(e)}(i,r,a)&&function(e,t,r){return r(t)(e)}(i,n,a)},ze=function(e){return Ue(Ge(Ge({},e),{},{isVisibleThroughFrameFn:De}))};function We(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,o=e.viewport,a=e.forceShouldAnimate,i=e.last;return t.reduce((function(e,t){var c=function(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return q(K(r,n))}(t,n),u=t.descriptor.id;if(e.all.push(u),!Ue(Ge(Ge({},{target:c,destination:r,viewport:o,withDroppableDisplacement:!0}),{},{isVisibleThroughFrameFn:Ne})))return e.invisible[t.descriptor.id]=!0,e;var l=function(e,t,r){if("boolean"==typeof r)return r;if(!t)return!0;var n=t.invisible,o=t.visible;if(n[e])return!1;var a=o[e];return!a||a.shouldAnimate}(u,i,a),s={draggableId:u,shouldAnimate:l};return e.visible[u]=s,e}),{all:[],visible:{},invisible:{}})}function Ve(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,o=e.destination,a=function(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}(t,{inHomeList:r});return{displaced:Le,displacedBy:n,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:a}}}}function He(e){var t=e.draggable,r=e.insideDestination,n=e.destination,o=e.viewport,a=e.displacedBy,i=e.last,c=e.index,u=e.forceShouldAnimate,l=Ce(t,n);if(null==c)return Ve({insideDestination:r,inHomeList:l,displacedBy:a,destination:n});var s=ve(r,(function(e){return e.descriptor.index===c}));if(!s)return Ve({insideDestination:r,inHomeList:l,displacedBy:a,destination:n});var f=xe(t,r),d=r.indexOf(s);return{displaced:We({afterDragging:f.slice(d),destination:n,displacedBy:a,last:i,viewport:o.frame,forceShouldAnimate:u}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:c}}}}function qe(e,t){return Boolean(t.effected[e])}var Ke=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,o=e.draggables,a=e.destination,i=e.insideDestination,c=e.previousImpact,u=e.viewport,l=e.afterCritical,s=c.at;if(h(s),"REORDER"===s.type){var f=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,o=e.location;if(!n.length)return null;var a=o.index,i=t?a+1:a-1,c=n[0].descriptor.index,u=n[n.length-1].descriptor.index;return i<c||i>(r?u:u+1)?null:i}({isMovingForward:t,isInHomeList:r,location:s.destination,insideDestination:i});return null==f?null:He({draggable:n,insideDestination:i,destination:a,viewport:u,last:c.displaced,displacedBy:c.displacedBy,index:f})}var d=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,o=e.combine,a=e.afterCritical;if(!r.isCombineEnabled)return null;var i=o.draggableId,c=n[i].descriptor.index;return qe(i,a)?t?c:c-1:t?c+1:c}({isMovingForward:t,destination:a,displaced:c.displaced,draggables:o,combine:s.combine,afterCritical:l});return null==d?null:He({draggable:n,insideDestination:i,destination:a,viewport:u,last:c.displaced,displacedBy:c.displacedBy,index:d})},Ye=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,o=Se(r);h(o);var a=o.draggableId,i=n[a].page.borderBox.center,c=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,o=e.displacedBy,a=Boolean(t.visible[n]||t.invisible[n]);return qe(n,r)?a?R:B(o.point):a?o.point:R}({displaced:r.displaced,afterCritical:t,combineWith:a,displacedBy:r.displacedBy});return M(i,c)},$e=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},Ze=function(e,t,r){return t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2},Je=function(e){var t=e.axis,r=e.moveRelativeTo,n=e.isMoving;return U(t.line,r.marginBox[t.end]+$e(t,n),Ze(t,r.marginBox,n))},Xe=function(e){var t=e.axis,r=e.moveRelativeTo,n=e.isMoving;return U(t.line,r.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,n),Ze(t,r.marginBox,n))},Qe=function(e){var t=e.impact,r=e.draggable,n=e.draggables,o=e.droppable,a=e.afterCritical,i=Oe(o.descriptor.id,n),c=r.page,u=o.axis;if(!i.length)return function(e){var t=e.axis,r=e.moveInto,n=e.isMoving;return U(t.line,r.contentBox[t.start]+$e(t,n),Ze(t,r.contentBox,n))}({axis:u,moveInto:o.page,isMoving:c});var l=t.displaced,s=t.displacedBy,f=l.all[0];if(f){var d=n[f];if(qe(f,a))return Xe({axis:u,moveRelativeTo:d.page,isMoving:c});var p=X(d.page,s.point);return Xe({axis:u,moveRelativeTo:p,isMoving:c})}var h=i[i.length-1];if(h.descriptor.id===r.descriptor.id)return c.borderBox.center;if(qe(h.descriptor.id,a)){var m=X(h.page,B(a.displacedBy.point));return Je({axis:u,moveRelativeTo:m,isMoving:c})}return Je({axis:u,moveRelativeTo:h.page,isMoving:c})},et=function(e,t){var r=e.frame;return r?M(t,r.scroll.diff.displacement):t},tt=function(e){var t=function(e){var t=e.impact,r=e.draggable,n=e.droppable,o=e.draggables,a=e.afterCritical,i=r.page.borderBox.center,c=t.at;return n&&c?"REORDER"===c.type?Qe({impact:t,draggable:r,draggables:o,droppable:n,afterCritical:a}):Ye({impact:t,draggables:o,afterCritical:a}):i}(e),r=e.droppable;return r?et(r,t):t},rt=function(e,t){var r=F(t,e.scroll.initial),n=B(r);return{frame:q({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){at(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function at(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function it(e,t){return e.map((function(e){return t[e]}))}var ct=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=function(e,t){return M(e.scroll.diff.displacement,t)}(e.viewport,t),o=F(n,r.page.borderBox.center);return M(r.client.borderBox.center,o)},ut=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,o=e.viewport,a=e.withDroppableDisplacement,i=e.onlyOnMainAxis,c=void 0!==i&&i,u=F(n,t.page.borderBox.center),l={target:re(t.page.borderBox,u),destination:r,withDroppableDisplacement:a,viewport:o};return c?function(e){return Ue(Ge(Ge({},e),{},{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var r=Ie(e.top,e.bottom),n=Ie(e.left,e.right);return function(e){return t===Re?r(e.top)&&r(e.bottom):n(e.left)&&n(e.right)}})}));var t}(l):ze(l)},lt=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,o=e.draggables,a=e.previousImpact,i=e.viewport,c=e.previousPageBorderBoxCenter,u=e.previousClientSelection,l=e.afterCritical;if(!n.isEnabled)return null;var s=Oe(n.descriptor.id,o),f=Ce(r,n),d=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,o=e.insideDestination,a=e.previousImpact;if(!n.isCombineEnabled)return null;if(!Ee(a))return null;function i(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:n.descriptor.id}};return ke(ke({},a),{},{at:t})}var c=a.displaced.all,u=c.length?c[0]:null;if(t)return u?i(u):null;var l=xe(r,o);if(!u)return l.length?i(l[l.length-1].descriptor.id):null;var s=me(l,(function(e){return e.descriptor.id===u}));h(-1!==s);var f=s-1;return f<0?null:i(l[f].descriptor.id)}({isMovingForward:t,draggable:r,destination:n,insideDestination:s,previousImpact:a})||Ke({isMovingForward:t,isInHomeList:f,draggable:r,draggables:o,destination:n,insideDestination:s,previousImpact:a,viewport:i,afterCritical:l});if(!d)return null;var p=tt({impact:d,draggable:r,droppable:n,draggables:o,afterCritical:l});if(ut({draggable:r,destination:n,newPageBorderBoxCenter:p,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:ct({pageBorderBoxCenter:p,draggable:r,viewport:i}),impact:d,scrollJumpRequest:null};var m=F(p,c),v=function(e){var t=e.impact,r=e.viewport,n=e.destination,o=e.draggables,a=e.maxScrollChange,i=rt(r,M(r.scroll.current,a)),c=n.frame?de(n,M(n.frame.scroll.current,a)):n,u=t.displaced,l=We({afterDragging:it(u.all,o),destination:n,displacedBy:t.displacedBy,viewport:i.frame,last:u,forceShouldAnimate:!1}),s=We({afterDragging:it(u.all,o),destination:c,displacedBy:t.displacedBy,viewport:r.frame,last:u,forceShouldAnimate:!1}),f={},d={},p=[u,l,s];return u.all.forEach((function(e){var t=function(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}(e,p);t?d[e]=t:f[e]=!0})),ot(ot({},t),{},{displaced:{all:u.all,invisible:f,visible:d}})}({impact:d,viewport:i,destination:n,draggables:o,maxScrollChange:m});return{clientSelection:u,impact:v,scrollJumpRequest:m}},st=function(e){var t=e.subject.active;return h(t),t},ft=function(e,t){var r=e.page.borderBox.center;return qe(e.descriptor.id,t)?F(r,t.displacedBy.point):r},dt=function(e,t){var r=e.page.borderBox;return qe(e.descriptor.id,t)?re(r,B(t.displacedBy.point)):r},pt=Object(pe.a)((function(e,t){var r=t[e.line];return{value:r,point:U(e.line,r)}}));function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){vt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yt=function(e,t){return mt(mt({},e),{},{scroll:mt(mt({},e.scroll),{},{max:t})})},bt=function(e,t,r){var n=e.frame;h(!Ce(t,e)),h(!e.subject.withPlaceholder);var o=pt(e.axis,t.displaceBy).point,a=function(e,t,r){var n=e.axis;if("virtual"===e.descriptor.mode)return U(n.line,t[n.line]);var o=e.subject.page.contentBox[n.size],a=Oe(e.descriptor.id,r).reduce((function(e,t){return e+t.client.marginBox[n.size]}),0)+t[n.line]-o;return a<=0?null:U(n.line,a)}(e,o,r),i={placeholderSize:o,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){var c=ue({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return mt(mt({},e),{},{subject:c})}var u=a?M(n.scroll.max,a):n.scroll.max,l=yt(n,u),s=ue({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:l});return mt(mt({},e),{},{subject:s,frame:l})},gt=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,o=e.isOver,a=e.draggables,i=e.droppables,c=e.viewport,u=e.afterCritical,l=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,o=e.droppables,a=e.viewport,i=n.subject.active;if(!i)return null;var c=n.axis,u=Ie(i[c.start],i[c.end]),l=we(o).filter((function(e){return e!==n})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return Ne(a.frame)(st(e))})).filter((function(e){var r=st(e);return t?i[c.crossAxisEnd]<r[c.crossAxisEnd]:r[c.crossAxisStart]<i[c.crossAxisStart]})).filter((function(e){var t=st(e),r=Ie(t[c.start],t[c.end]);return u(t[c.start])||u(t[c.end])||r(i[c.start])||r(i[c.end])})).sort((function(e,r){var n=st(e)[c.crossAxisStart],o=st(r)[c.crossAxisStart];return t?n-o:o-n})).filter((function(e,t,r){return st(e)[c.crossAxisStart]===st(r[0])[c.crossAxisStart]}));if(!l.length)return null;if(1===l.length)return l[0];var s=l.filter((function(e){return Ie(st(e)[c.start],st(e)[c.end])(r[c.line])}));return 1===s.length?s[0]:s.length>1?s.sort((function(e,t){return st(e)[c.start]-st(t)[c.start]}))[0]:l.sort((function(e,t){var n=W(r,ne(st(e))),o=W(r,ne(st(t)));return n!==o?n-o:st(e)[c.start]-st(t)[c.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:r,source:o,droppables:i,viewport:c});if(!l)return null;var s=Oe(l.descriptor.id,a),f=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,o=e.insideDestination,a=e.afterCritical;return o.filter((function(e){return ze({target:dt(e,a),destination:n,viewport:r.frame,withDroppableDisplacement:!0})})).sort((function(e,r){var o=z(t,et(n,ft(e,a))),i=z(t,et(n,ft(r,a)));return o<i?-1:i<o?1:e.descriptor.index-r.descriptor.index}))[0]||null}({pageBorderBoxCenter:r,viewport:c,destination:l,insideDestination:s,afterCritical:u}),d=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,o=e.draggable,a=e.draggables,i=e.destination,c=e.viewport,u=e.afterCritical;if(!r){if(n.length)return null;var l={displaced:Le,displacedBy:Te,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},s=tt({impact:l,draggable:o,droppable:i,draggables:a,afterCritical:u}),f=Ce(o,i)?i:bt(i,o,a);return ut({draggable:o,destination:f,newPageBorderBoxCenter:s,viewport:c.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?l:null}var d,p=Boolean(t[i.axis.line]<=r.page.borderBox.center[i.axis.line]),h=(d=r.descriptor.index,r.descriptor.id===o.descriptor.id||p?d:d+1),m=pt(i.axis,o.displaceBy);return He({draggable:o,insideDestination:n,destination:i,viewport:c,displacedBy:m,last:Le,index:h})}({previousPageBorderBoxCenter:r,destination:l,draggable:n,draggables:a,moveRelativeTo:f,insideDestination:s,viewport:c,afterCritical:u});if(!d)return null;var p=tt({impact:d,draggable:n,droppable:l,draggables:a,afterCritical:u});return{clientSelection:ct({pageBorderBoxCenter:p,draggable:n,viewport:c}),impact:d,scrollJumpRequest:null}},wt=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},_t=function(e){var t=e.state,r=e.type,n=function(e,t){var r=wt(e);return r?t[r]:null}(t.impact,t.dimensions.droppables),o=Boolean(n),a=t.dimensions.droppables[t.critical.droppable.id],i=n||a,c=i.axis.direction,u="vertical"===c&&("MOVE_UP"===r||"MOVE_DOWN"===r)||"horizontal"===c&&("MOVE_LEFT"===r||"MOVE_RIGHT"===r);if(u&&!o)return null;var l="MOVE_DOWN"===r||"MOVE_RIGHT"===r,s=t.dimensions.draggables[t.critical.draggable.id],f=t.current.page.borderBoxCenter,d=t.dimensions,p=d.draggables,h=d.droppables;return u?lt({isMovingForward:l,previousPageBorderBoxCenter:f,draggable:s,destination:i,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):gt({isMovingForward:l,previousPageBorderBoxCenter:f,draggable:s,isOver:i,draggables:p,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function Ot(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function Et(e){var t=Ie(e.top,e.bottom),r=Ie(e.left,e.right);return function(e){return t(e.y)&&r(e.x)}}function St(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,o=we(n).filter((function(e){if(!e.isEnabled)return!1;var r,n,o=e.subject.active;if(!o)return!1;if(n=o,!((r=t).left<n.right&&r.right>n.left&&r.top<n.bottom&&r.bottom>n.top))return!1;if(Et(o)(t.center))return!0;var a=e.axis,i=o.center[a.crossAxisLine],c=t[a.crossAxisStart],u=t[a.crossAxisEnd],l=Ie(o[a.crossAxisStart],o[a.crossAxisEnd]),s=l(c),f=l(u);return!s&&!f||(s?c<i:u>i)}));return o.length?1===o.length?o[0].descriptor.id:function(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,o=r.page.borderBox.center,a=n.map((function(e){var r=e.axis,n=U(e.axis.line,t.center[r.line],e.page.borderBox.center[r.crossAxisLine]);return{id:e.descriptor.id,distance:z(o,n)}})).sort((function(e,t){return t.distance-e.distance}));return a[0]?a[0].id:null}({pageBorderBox:t,draggable:r,candidates:o}):null}var xt=function(e,t){return q(re(e,t))};function jt(e){var t=e.displaced,r=e.id;return Boolean(t.visible[r]||t.invisible[r])}var kt=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,o=e.droppables,a=e.previousImpact,i=e.viewport,c=e.afterCritical,u=xt(r.page.borderBox,t),l=St({pageBorderBox:u,draggable:r,droppables:o});if(!l)return Ae;var s,f,d=o[l],p=Oe(d.descriptor.id,n),h=(s=u,(f=d.frame)?xt(s,f.scroll.diff.value):s);return function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,o=e.destination,a=e.insideDestination,i=e.afterCritical;if(!o.isCombineEnabled)return null;var c=o.axis,u=pt(o.axis,t.displaceBy),l=u.value,s=r[c.start],f=r[c.end],d=ve(xe(t,a),(function(e){var t=e.descriptor.id,r=e.page.borderBox,o=r[c.size]/4,a=qe(t,i),u=jt({displaced:n.displaced,id:t});return a?u?f>r[c.start]+o&&f<r[c.end]-o:s>r[c.start]-l+o&&s<r[c.end]-l-o:u?f>r[c.start]+l+o&&f<r[c.end]+l-o:s>r[c.start]+o&&s<r[c.end]-o}));return d?{displacedBy:u,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:d.descriptor.id,droppableId:o.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:h,draggable:r,previousImpact:a,destination:d,insideDestination:p,afterCritical:c})||function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,o=e.insideDestination,a=e.last,i=e.viewport,c=e.afterCritical,u=n.axis,l=pt(n.axis,r.displaceBy),s=l.value,f=t[u.start],d=t[u.end],p=function(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}({draggable:r,closest:ve(xe(r,o),(function(e){var t=e.descriptor.id,r=e.page.borderBox.center[u.line],n=qe(t,c),o=jt({displaced:a,id:t});return n?o?d<=r:f<r-s:o?d<=r+s:f<r})),inHomeList:Ce(r,n)});return He({draggable:r,insideDestination:o,destination:n,viewport:i,last:a,displacedBy:l,index:p})}({pageBorderBoxWithDroppableScroll:h,draggable:r,destination:d,insideDestination:p,last:a.displaced,viewport:i,afterCritical:c})};function Pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(r),!0).forEach((function(t){Tt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lt=function(e,t){return Ct(Ct({},e),{},Tt({},t.descriptor.id,t))},At=function(e){var t=e.previousImpact,r=e.impact,n=e.droppables,o=wt(t),a=wt(r);if(!o)return n;if(o===a)return n;var i=n[o];if(!i.subject.withPlaceholder)return n;var c=function(e){var t=e.subject.withPlaceholder;h(t);var r=e.frame;if(!r){var n=ue({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return mt(mt({},e),{},{subject:n})}var o=t.oldFrameMaxScroll;h(o);var a=yt(r,o),i=ue({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return mt(mt({},e),{},{subject:i,frame:a})}(i);return Lt(n,c)};function It(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?It(Object(r),!0).forEach((function(t){Dt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rt=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,o=e.viewport,a=e.impact,i=e.scrollJumpRequest,c=o||t.viewport,u=n||t.dimensions,l=r||t.current.client.selection,s=F(l,t.initial.client.selection),f={offset:s,selection:l,borderBoxCenter:M(t.initial.client.borderBoxCenter,s)},d={selection:M(f.selection,c.scroll.current),borderBoxCenter:M(f.borderBoxCenter,c.scroll.current),offset:M(f.offset,c.scroll.diff.value)},p={client:f,page:d};if("COLLECTING"===t.phase)return Nt(Nt({phase:"COLLECTING"},t),{},{dimensions:u,viewport:c,current:p});var h=u.draggables[t.critical.draggable.id],m=a||kt({pageOffset:d.offset,draggable:h,draggables:u.draggables,droppables:u.droppables,previousImpact:t.impact,viewport:c,afterCritical:t.afterCritical}),v=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,o=e.previousImpact,a=e.impact,i=At({previousImpact:o,impact:a,droppables:n}),c=wt(a);if(!c)return i;var u=n[c];if(Ce(t,u))return i;if(u.subject.withPlaceholder)return i;var l=bt(u,t,r);return Lt(i,l)}({draggable:h,impact:m,previousImpact:t.impact,draggables:u.draggables,droppables:u.droppables});return Nt(Nt({},t),{},{current:p,dimensions:{draggables:u.draggables,droppables:v},impact:m,viewport:c,scrollJumpRequest:i||null,forceShouldAnimate:!i&&null})};function Mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(r),!0).forEach((function(t){Gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bt=function(e){var t=e.impact,r=e.viewport,n=e.draggables,o=e.destination,a=e.forceShouldAnimate,i=t.displaced,c=function(e,t){return e.map((function(e){return t[e]}))}(i.all,n),u=We({afterDragging:c,destination:o,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:i});return Ft(Ft({},t),{},{displaced:u})},Ut=function(e){var t=e.impact,r=e.draggable,n=e.droppable,o=e.draggables,a=e.viewport,i=e.afterCritical,c=tt({impact:t,draggable:r,draggables:o,droppable:n,afterCritical:i});return ct({pageBorderBoxCenter:c,draggable:r,viewport:a})},zt=function(e){var t=e.state,r=e.dimensions,n=e.viewport;h("SNAP"===t.movementMode);var o=t.impact,a=n||t.viewport,i=r||t.dimensions,c=i.draggables,u=i.droppables,l=c[t.critical.draggable.id],s=wt(o);h(s);var f=u[s],d=Bt({impact:o,viewport:a,destination:f,draggables:c}),p=Ut({impact:d,draggable:l,droppable:f,draggables:c,viewport:a,afterCritical:t.afterCritical});return Rt({impact:d,clientSelection:p,state:t,dimensions:i,viewport:a})},Wt=function(e){var t=e.draggable,r=e.home,n=e.draggables,o=e.viewport,a=pt(r.axis,t.displaceBy),i=Oe(r.descriptor.id,n),c=i.indexOf(t);h(-1!==c);var u,l=i.slice(c+1),s=l.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),f={inVirtualList:"virtual"===r.descriptor.mode,displacedBy:a,effected:s};return{impact:{displaced:We({afterDragging:l,destination:r,displacedBy:a,last:null,viewport:o.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:(u=t.descriptor,{index:u.index,droppableId:u.droppableId})}},afterCritical:f}};function Vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(r),!0).forEach((function(t){qt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kt=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,o=n.scroll.diff.value;return t.map((function(e){var t=e.descriptor.droppableId,a=function(e){var t=e.frame;return h(t),t}(r[t]).scroll.diff.value,i=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,o=X(t.client,r),a=Q(o,n);return Ht(Ht({},t),{},{placeholder:Ht(Ht({},t.placeholder),{},{client:o}),client:o,page:a})}({draggable:e,offset:M(o,a),initialWindowScroll:n.scroll.initial});return i}))};function Yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(r),!0).forEach((function(t){Zt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jt=function(e){var t=e.state,r=e.published,n=r.modified.map((function(e){var r=t.dimensions.droppables[e.droppableId];return de(r,e.scroll)})),o=$t($t({},t.dimensions.droppables),be(n)),a=ge(Kt({additions:r.additions,updatedDroppables:o,viewport:t.viewport})),i=$t($t({},t.dimensions.draggables),a);r.removals.forEach((function(e){delete i[e]}));var c={droppables:o,draggables:i},u=wt(t.impact),l=u?c.droppables[u]:null,s=c.draggables[t.critical.draggable.id],f=c.droppables[t.critical.droppable.id],d=Wt({draggable:s,home:f,draggables:i,viewport:t.viewport}),p=d.impact,h=d.afterCritical,m=l&&l.isCombineEnabled?t.impact:p,v=kt({pageOffset:t.current.page.offset,draggable:c.draggables[t.critical.draggable.id],draggables:c.draggables,droppables:c.droppables,previousImpact:m,viewport:t.viewport,afterCritical:h}),y=$t($t({phase:"DRAGGING"},t),{},{phase:"DRAGGING",impact:v,onLiftImpact:p,dimensions:c,afterCritical:h,forceShouldAnimate:!1});return"COLLECTING"===t.phase?y:$t($t({phase:"DROP_PENDING"},y),{},{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})};function Xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(r),!0).forEach((function(t){er(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function er(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tr=function(e){return"SNAP"===e.movementMode},rr=function(e,t,r){var n=function(e,t){return{draggables:e.draggables,droppables:Lt(e.droppables,t)}}(e.dimensions,t);return!tr(e)||r?Rt({state:e,dimensions:n}):zt({state:e,dimensions:n})};function nr(e){return e.isDragging&&"SNAP"===e.movementMode?Qt(Qt({phase:"DRAGGING"},e),{},{scrollJumpRequest:null}):e}var or={phase:"IDLE",completed:null,shouldFlush:!1},ar=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:or,t=arguments.length>1?arguments[1]:void 0;if("FLUSH"===t.type)return Qt(Qt({},or),{},{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){h("IDLE"===e.phase);var r=t.payload,n=r.critical,o=r.clientSelection,a=r.viewport,i=r.dimensions,c=r.movementMode,u=i.draggables[n.draggable.id],l=i.droppables[n.droppable.id],s={selection:o,borderBoxCenter:u.client.borderBox.center,offset:R},f={client:s,page:{selection:M(s.selection,a.scroll.initial),borderBoxCenter:M(s.selection,a.scroll.initial),offset:M(s.selection,a.scroll.diff.value)}},d=we(i.droppables).every((function(e){return!e.isFixedOnPage})),p=Wt({draggable:u,home:l,draggables:i.draggables,viewport:a}),m=p.impact,v=p.afterCritical,y={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:c,dimensions:i,initial:f,current:f,isWindowScrollAllowed:d,impact:m,afterCritical:v,onLiftImpact:m,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return y}if("COLLECTION_STARTING"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;h("DRAGGING"===e.phase,"Collection cannot start from phase ".concat(e.phase));var b=Qt(Qt({phase:"COLLECTING"},e),{},{phase:"COLLECTING"});return b}if("PUBLISH_WHILE_DRAGGING"===t.type)return h("COLLECTING"===e.phase||"DROP_PENDING"===e.phase,"Unexpected ".concat(t.type," received in phase ").concat(e.phase)),Jt({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;h(Ot(e),"".concat(t.type," not permitted in phase ").concat(e.phase));var g=t.payload.client;return G(g,e.current.client.selection)?e:Rt({state:e,clientSelection:g,impact:tr(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return nr(e);if("COLLECTING"===e.phase)return nr(e);h(Ot(e),"".concat(t.type," not permitted in phase ").concat(e.phase));var w=t.payload,_=w.id,O=w.newScroll,E=e.dimensions.droppables[_];if(!E)return e;var S=de(E,O);return rr(e,S,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;h(Ot(e),"Attempting to move in an unsupported phase ".concat(e.phase));var x=t.payload,j=x.id,k=x.isEnabled,P=e.dimensions.droppables[j];h(P,"Cannot find Droppable[id: ".concat(j,"] to toggle its enabled state")),h(P.isEnabled!==k,"Trying to set droppable isEnabled to ".concat(String(k),"\n      but it is already ").concat(String(P.isEnabled)));var C=Qt(Qt({},P),{},{isEnabled:k});return rr(e,C,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;h(Ot(e),"Attempting to move in an unsupported phase ".concat(e.phase));var T=t.payload,L=T.id,A=T.isCombineEnabled,I=e.dimensions.droppables[L];h(I,"Cannot find Droppable[id: ".concat(L,"] to toggle its isCombineEnabled state")),h(I.isCombineEnabled!==A,"Trying to set droppable isCombineEnabled to ".concat(String(A),"\n      but it is already ").concat(String(I.isCombineEnabled)));var N=Qt(Qt({},I),{},{isCombineEnabled:A});return rr(e,N,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;h(Ot(e),"Cannot move by window in phase ".concat(e.phase)),h(e.isWindowScrollAllowed);var D=t.payload.newScroll;if(G(e.viewport.scroll.current,D))return nr(e);var F=rt(e.viewport,D);return tr(e)?zt({state:e,viewport:F}):Rt({state:e,viewport:F})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!Ot(e))return e;var B=t.payload.maxScroll;if(G(B,e.viewport.scroll.max))return e;var U=Qt(Qt({},e.viewport),{},{scroll:Qt(Qt({},e.viewport.scroll),{},{max:B})});return Qt(Qt({phase:"DRAGGING"},e),{},{viewport:U})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;h("DRAGGING"===e.phase,"".concat(t.type," received while not in DRAGGING phase"));var z=_t({state:e,type:t.type});return z?Rt({state:e,impact:z.impact,clientSelection:z.clientSelection,scrollJumpRequest:z.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var W=t.payload.reason;h("COLLECTING"===e.phase);var V=Qt(Qt({phase:"DROP_PENDING"},e),{},{phase:"DROP_PENDING",isWaiting:!0,reason:W});return V}if("DROP_ANIMATE"===t.type){var H=t.payload,q=H.completed,K=H.dropDuration,Y=H.newHomeClientOffset;h("DRAGGING"===e.phase||"DROP_PENDING"===e.phase,"Cannot animate drop from phase ".concat(e.phase));var $={phase:"DROP_ANIMATING",completed:q,dropDuration:K,newHomeClientOffset:Y,dimensions:e.dimensions};return $}if("DROP_COMPLETE"===t.type){var Z=t.payload.completed;return{phase:"IDLE",completed:Z,shouldFlush:!1}}return e},ir=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},cr=function(){return{type:"COLLECTION_STARTING",payload:null}},ur=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},lr=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},sr=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},fr=function(e){return{type:"MOVE",payload:e}},dr=function(){return{type:"MOVE_UP",payload:null}},pr=function(){return{type:"MOVE_DOWN",payload:null}},hr=function(){return{type:"MOVE_RIGHT",payload:null}},mr=function(){return{type:"MOVE_LEFT",payload:null}},vr=function(e){return{type:"DROP_COMPLETE",payload:e}},yr=function(e){return{type:"DROP",payload:e}},br=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var gr="cubic-bezier(0.2, 0, 0, 1)",wr="cubic-bezier(.2,1,.1,1)",_r={drop:0,combining:.7},Or={drop:.75},Er=.33,Sr=.55,xr="".concat(.2,"s ").concat(gr),jr={fluid:"opacity ".concat(xr),snap:"transform ".concat(xr,", opacity ").concat(xr),drop:function(e){var t="".concat(e,"s ").concat(wr);return"transform ".concat(t,", opacity ").concat(t)},outOfTheWay:"transform ".concat(xr),placeholder:"height ".concat(xr,", width ").concat(xr,", margin ").concat(xr)},kr=function(e){return G(e,R)?null:"translate(".concat(e.x,"px, ").concat(e.y,"px)")},Pr=kr,Cr=function(e,t){var r=kr(e);return r?t?"".concat(r," scale(").concat(Or.drop,")"):r:null},Tr=Er,Lr=Sr,Ar=Lr-Tr;function Ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(r),!0).forEach((function(t){Dr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rr=function(e){var t=e.getState,r=e.dispatch;return function(e){return function(n){if("DROP"===n.type){var o=t(),a=n.payload.reason;if("COLLECTING"!==o.phase){if("IDLE"!==o.phase){h(!("DROP_PENDING"===o.phase&&o.isWaiting)),h("DRAGGING"===o.phase||"DROP_PENDING"===o.phase,"Cannot drop in phase: ".concat(o.phase));var i=o.critical,c=o.dimensions,u=c.draggables[o.critical.draggable.id],l=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,o=e.home,a=e.viewport,i=e.onLiftImpact;return n.at&&"DROP"===r?"REORDER"===n.at.type?{impact:n,didDropInsideDroppable:!0}:{impact:Nr(Nr({},n),{},{displaced:Le}),didDropInsideDroppable:!0}:{impact:Bt({draggables:t,impact:i,destination:o,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:a,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),s=l.impact,f=l.didDropInsideDroppable,d=f?Ee(s):null,p=f?Se(s):null,m={index:i.draggable.index,droppableId:i.droppable.id},v={draggableId:u.descriptor.id,type:u.descriptor.type,source:m,reason:a,mode:o.movementMode,destination:d,combine:p},y=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,o=e.viewport,a=e.afterCritical,i=n.draggables,c=n.droppables,u=wt(t),l=u?c[u]:null,s=c[r.descriptor.droppableId],f=Ut({impact:t,draggable:r,draggables:i,afterCritical:a,droppable:l||s,viewport:o});return F(f,r.client.borderBox.center)}({impact:s,draggable:u,dimensions:c,viewport:o.viewport,afterCritical:o.afterCritical}),b={critical:o.critical,afterCritical:o.afterCritical,result:v,impact:s};if(!G(o.current.client.offset,y)||Boolean(v.combine)){var g=function(e){var t=e.current,r=e.destination,n=e.reason,o=z(t,r);if(o<=0)return Tr;if(o>=1500)return Lr;var a=Tr+Ar*(o/1500);return Number(("CANCEL"===n?.6*a:a).toFixed(2))}({current:o.current.client.offset,destination:y,reason:a});r(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:y,dropDuration:g,completed:b}))}else r(vr({completed:b}))}}else r(function(e){return{type:"DROP_PENDING",payload:e}}({reason:a}))}else e(n)}}},Mr=function(e){var t=[],r=null,n=function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t=o,r||(r=requestAnimationFrame((function(){r=null,e.apply(void 0,t)})))};return n.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},n},Fr=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Gr(e){var t=e.onWindowScroll;var r,n=Mr((function(){t(Fr())})),o=(r=n,{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(e){e.target!==window&&e.target!==window.document||r()}}),a=c;function i(){return a!==c}return{start:function(){h(!i()),a=f(window,[o])},stop:function(){h(i()),n.cancel(),a(),a=c},isActive:i}}var Br=function(e){var t=Gr({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(r){t.isActive()||"INITIAL_PUBLISH"!==r.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r)&&t.stop(),e(r)}}};function Ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Wr=function(){var e=[];return{add:function(t){var r=setTimeout((function(){return function(t){var r=me(e,(function(e){return e.timerId===t}));h(-1!==r),Ur(e.splice(r,1),1)[0].callback()}(r)})),n={timerId:r,callback:t};e.push(n)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}};function Vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(r),!0).forEach((function(t){qr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kr=function(e,t){t()},Yr=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},$r=function(e,t,r,n){if(e){var o=function(e){var t=!1,r=!1,n=setTimeout((function(){r=!0})),o=function(o){t?i("Announcement already made. Not making a second announcement"):r?i("\n        Announcements cannot be made asynchronously.\n        Default message has already been announced.\n      "):(t=!0,e(o),clearTimeout(n))};return o.wasCalled=function(){return t},o}(r);e(t,{announce:o}),o.wasCalled()||r(n(t))}else r(n(t))},Zr=function(e,t){var r=function(e,t){var r=Wr(),n=null,o=function(r){h(n),n=null,Kr(0,(function(){return $r(e().onDragEnd,r,t,k.onDragEnd)}))};return{beforeCapture:function(t,r){h(!n),Kr(0,(function(){var n=e().onBeforeCapture;n&&n({draggableId:t,mode:r})}))},beforeStart:function(t,r){h(!n),Kr(0,(function(){var n=e().onBeforeDragStart;n&&n(Yr(t,r))}))},start:function(o,a){h(!n);var i=Yr(o,a);n={mode:a,lastCritical:o,lastLocation:i.source,lastCombine:null},r.add((function(){Kr(0,(function(){return $r(e().onDragStart,i,t,k.onDragStart)}))}))},update:function(o,a){var i=Ee(a),c=Se(a);h(n);var u=!function(e,t){if(e===t)return!0;var r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n}(o,n.lastCritical);u&&(n.lastCritical=o);var l,s,f=(s=i,!(null==(l=n.lastLocation)&&null==s||null!=l&&null!=s&&l.droppableId===s.droppableId&&l.index===s.index));f&&(n.lastLocation=i);var d=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(n.lastCombine,c);if(d&&(n.lastCombine=c),u||f||d){var p=Hr(Hr({},Yr(o,n.mode)),{},{combine:c,destination:i});r.add((function(){Kr(0,(function(){return $r(e().onDragUpdate,p,t,k.onDragUpdate)}))}))}},flush:function(){h(n),r.flush()},drop:o,abort:function(){if(n){var e=Hr(Hr({},Yr(n.lastCritical,n.mode)),{},{combine:null,destination:null,reason:"CANCEL"});o(e)}}}}(e,t);return function(e){return function(t){return function(n){if("BEFORE_INITIAL_CAPTURE"!==n.type){if("INITIAL_PUBLISH"===n.type){var o=n.payload.critical;return r.beforeStart(o,n.payload.movementMode),t(n),void r.start(o,n.payload.movementMode)}if("DROP_COMPLETE"===n.type){var a=n.payload.completed.result;return r.flush(),t(n),void r.drop(a)}if(t(n),"FLUSH"!==n.type){var i=e.getState();"DRAGGING"===i.phase&&r.update(i.critical,i.impact)}else r.abort()}else r.beforeCapture(n.payload.draggableId,n.payload.movementMode)}}}},Jr=function(e){return function(t){return function(r){if("DROP_ANIMATION_FINISHED"===r.type){var n=e.getState();h("DROP_ANIMATING"===n.phase),e.dispatch(vr({completed:n.completed}))}else t(r)}}},Xr=function(e){var t=null,r=null;return function(n){return function(o){if("FLUSH"!==o.type&&"DROP_COMPLETE"!==o.type&&"DROP_ANIMATION_FINISHED"!==o.type||(r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)),n(o),"DROP_ANIMATE"===o.type){var a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};r=requestAnimationFrame((function(){r=null,t=f(window,[a])}))}}}},Qr=function(e){return function(t){return function(r){if(t(r),"PUBLISH_WHILE_DRAGGING"===r.type){var n=e.getState();"DROP_PENDING"===n.phase&&(n.isWaiting||e.dispatch(yr({reason:n.reason})))}}}},en=P.d,tn=function(e){var t,r=e.dimensionMarshal,n=e.focusMarshal,o=e.styleMarshal,a=e.getResponders,i=e.announce,c=e.autoScroller;return Object(P.e)(ar,en(Object(P.a)((t=o,function(){return function(e){return function(r){"INITIAL_PUBLISH"===r.type&&t.dragging(),"DROP_ANIMATE"===r.type&&t.dropping(r.payload.completed.result.reason),"FLUSH"!==r.type&&"DROP_COMPLETE"!==r.type||t.resting(),e(r)}}}),function(e){return function(){return function(t){return function(r){"DROP_COMPLETE"!==r.type&&"FLUSH"!==r.type&&"DROP_ANIMATE"!==r.type||e.stopPublishing(),t(r)}}}}(r),function(e){return function(t){var r=t.getState,n=t.dispatch;return function(t){return function(o){if("LIFT"===o.type){var a=o.payload,i=a.id,c=a.clientSelection,u=a.movementMode,l=r();"DROP_ANIMATING"===l.phase&&n(vr({completed:l.completed})),h("IDLE"===r().phase),n({type:"FLUSH",payload:null}),n({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:i,movementMode:u}});var s={draggableId:i,scrollOptions:{shouldPublishImmediately:"SNAP"===u}},f=e.startPublishing(s),d=f.critical,p=f.dimensions,m=f.viewport;n({type:"INITIAL_PUBLISH",payload:{critical:d,dimensions:p,clientSelection:c,movementMode:u,viewport:m}})}else t(o)}}}}(r),Rr,Jr,Xr,Qr,function(e){return function(t){return function(r){return function(n){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n))return e.stop(),void r(n);if("INITIAL_PUBLISH"===n.type){r(n);var o=t.getState();return h("DRAGGING"===o.phase),void e.start(o)}r(n),e.scroll(t.getState())}}}}(c),Br,function(e){var t=!1;return function(){return function(r){return function(n){if("INITIAL_PUBLISH"===n.type)return t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),void e.tryRestoreFocusRecorded();if(r(n),t){if("FLUSH"===n.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===n.type){t=!1;var o=n.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(n),Zr(a,i))))};var rn=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,o=e.width,a=F({x:r,y:t},{x:o,y:n});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},nn=function(){var e=document.documentElement;return h(e),e},on=function(){var e=nn();return rn({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},an=function(e){var t,r,n,o,a,i,c,u=e.critical,l=e.scrollOptions,s=e.registry,f=(t=Fr(),r=on(),n=t.y,o=t.x,a=nn(),i=a.clientWidth,c=a.clientHeight,{frame:q({top:n,left:o,right:o+i,bottom:n+c}),scroll:{initial:t,current:t,max:r,diff:{value:R,displacement:R}}}),d=f.scroll.current,p=u.droppable,h=s.droppable.getAllByType(p.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(d,l)})),m=s.draggable.getAllByType(u.draggable.type).map((function(e){return e.getDimension(d)}));return{dimensions:{draggables:ge(m),droppables:be(h)},critical:u,viewport:f}};function cn(e,t,r){return r.descriptor.id!==t.id&&(r.descriptor.type===t.type&&("virtual"===e.droppable.getById(r.descriptor.droppableId).descriptor.mode||(i("\n      You are attempting to add or remove a Draggable [id: ".concat(r.descriptor.id,"]\n      while a drag is occurring. This is only supported for virtual lists.\n\n      See https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/patterns/virtual-lists.md\n    ")),!1)))}var un,ln,sn=function(e,t){var r=null,n=function(e){var t=e.registry,r=e.callbacks,n={additions:{},removals:{},modified:{}},o=null,a=function(){o||(r.collectionStarting(),o=requestAnimationFrame((function(){o=null;var e=n,a=e.additions,i=e.removals,c=e.modified,u=Object.keys(a).map((function(e){return t.draggable.getById(e).getDimension(R)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),l=Object.keys(c).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),s={additions:u,removals:Object.keys(i),modified:l};n={additions:{},removals:{},modified:{}},r.publish(s)})))};return{add:function(e){var t=e.descriptor.id;n.additions[t]=e,n.modified[e.descriptor.droppableId]=!0,n.removals[t]&&delete n.removals[t],a()},remove:function(e){var t=e.descriptor;n.removals[t.id]=!0,n.modified[t.droppableId]=!0,n.additions[t.id]&&delete n.additions[t.id],a()},stop:function(){o&&(cancelAnimationFrame(o),o=null,n={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=function(t){h(r);var o=r.critical.draggable;"ADDITION"===t.type&&cn(e,o,t.value)&&n.add(t.value),"REMOVAL"===t.type&&cn(e,o,t.value)&&n.remove(t.value)};return{updateDroppableIsEnabled:function(n,o){h(e.droppable.exists(n),"Cannot update is enabled flag of Droppable ".concat(n," as it is not registered")),r&&t.updateDroppableIsEnabled({id:n,isEnabled:o})},updateDroppableIsCombineEnabled:function(n,o){r&&(h(e.droppable.exists(n),"Cannot update isCombineEnabled flag of Droppable ".concat(n," as it is not registered")),t.updateDroppableIsCombineEnabled({id:n,isCombineEnabled:o}))},scrollDroppable:function(t,n){r&&e.droppable.getById(t).callbacks.scroll(n)},updateDroppableScroll:function(n,o){r&&(h(e.droppable.exists(n),"Cannot update the scroll on Droppable ".concat(n," as it is not registered")),t.updateDroppableScroll({id:n,newScroll:o}))},startPublishing:function(t){h(!r);var n=e.draggable.getById(t.draggableId),a=e.droppable.getById(n.descriptor.droppableId),i={draggable:n.descriptor,droppable:a.descriptor},c=e.subscribe(o);return r={critical:i,unsubscribe:c},an({critical:i,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(r){n.stop();var t=r.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),r.unsubscribe(),r=null}}}},fn=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},dn=function(e){window.scrollBy(e.x,e.y)},pn=Object(pe.a)((function(e){return we(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),hn=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var o=n[r];return o.frame?o:null}var a=function(e,t){return ve(pn(t),(function(t){return h(t.frame),Et(t.frame.pageMarginBox)(e)}))}(t,n);return a},mn={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},vn=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,o=r-t;return 0===o?(i("\n      Detected distance range of 0 in the fluid auto scroller\n      This is unexpected and would cause a divide by 0 issue.\n      Not allowing an auto scroll\n    "),0):(n-t)/o},yn=mn.durationDampening.accelerateAt,bn=mn.durationDampening.stopDampeningAt,gn=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,o=e.shouldUseTimeDampening,a=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return mn.maxPixelScroll;if(e===t.startScrollingFrom)return 1;var r=1-vn({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=mn.maxPixelScroll*mn.ease(r);return Math.ceil(n)}(t,r);return 0===a?0:o?Math.max(function(e,t){var r=t,n=bn,o=Date.now()-r;if(o>=bn)return e;if(o<yn)return 1;var a=vn({startOfRange:yn,endOfRange:n,current:o}),i=e*mn.ease(a);return Math.ceil(i)}(a,n),1):a},wn=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,o=e.axis,a=e.shouldUseTimeDampening,i=function(e,t){return{startScrollingFrom:e[t.size]*mn.startFromPercentage,maxScrollValueAt:e[t.size]*mn.maxScrollAtPercentage}}(t,o);return r[o.end]<r[o.start]?gn({distanceToEdge:r[o.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a}):-1*gn({distanceToEdge:r[o.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a})},_n=V((function(e){return 0===e?0:e})),On=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,o=e.center,a=e.shouldUseTimeDampening,i={top:o.y-r.top,right:r.right-o.x,bottom:r.bottom-o.y,left:o.x-r.left},c=wn({container:r,distanceToEdges:i,dragStartTime:t,axis:Re,shouldUseTimeDampening:a}),u=wn({container:r,distanceToEdges:i,dragStartTime:t,axis:Me,shouldUseTimeDampening:a}),l=_n({x:u,y:c});if(G(l,R))return null;var s=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,o=r.height>t.height,a=r.width>t.width;return a||o?a&&o?null:{x:a?0:n.x,y:o?0:n.y}:n}({container:r,subject:n,proposedScroll:l});return s?G(s,R)?null:s:null},En=V((function(e){return 0===e?0:e>0?1:-1})),Sn=(un=function(e,t){return e<0?e:e>t?e-t:0},function(e){var t=e.current,r=e.max,n=e.change,o=M(t,n),a={x:un(o.x,r.x),y:un(o.y,r.y)};return G(a,R)?null:a}),xn=function(e){var t=e.max,r=e.current,n=e.change,o={x:Math.max(r.x,t.x),y:Math.max(r.y,t.y)},a=En(n),i=Sn({max:o,current:r,change:a});return!i||(0!==a.x&&0===i.x||0!==a.y&&0===i.y)},jn=function(e,t){return xn({current:e.scroll.current,max:e.scroll.max,change:t})},kn=function(e,t){var r=e.frame;return!!r&&xn({current:r.scroll.current,max:r.scroll.max,change:t})},Pn=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,o=e.scrollWindow,a=e.scrollDroppable,i=t.current.page.borderBoxCenter,c=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var u=function(e){var t=e.viewport,r=e.subject,n=e.center,o=e.dragStartTime,a=e.shouldUseTimeDampening,i=On({dragStartTime:o,container:t.frame,subject:r,center:n,shouldUseTimeDampening:a});return i&&jn(t,i)?i:null}({dragStartTime:r,viewport:t.viewport,subject:c,center:i,shouldUseTimeDampening:n});if(u)return void o(u)}var l=hn({center:i,destination:wt(t.impact),droppables:t.dimensions.droppables});if(l){var s=function(e){var t=e.droppable,r=e.subject,n=e.center,o=e.dragStartTime,a=e.shouldUseTimeDampening,i=t.frame;if(!i)return null;var c=On({dragStartTime:o,container:i.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:a});return c&&kn(t,c)?c:null}({dragStartTime:r,droppable:l,subject:c,center:i,shouldUseTimeDampening:n});s&&a(l.descriptor.id,s)}},Cn=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,o=function(e,t){if(!kn(e,t))return t;var n=function(e,t){var r=e.frame;return r&&kn(e,t)?Sn({current:r.scroll.current,max:r.scroll.max,change:t}):null}(e,t);if(!n)return r(e.descriptor.id,t),null;var o=F(t,n);return r(e.descriptor.id,o),F(t,o)},a=function(e,t,r){if(!e)return r;if(!jn(t,r))return r;var o=function(e,t){if(!jn(e,t))return null;var r=e.scroll.max,n=e.scroll.current;return Sn({current:n,max:r,change:t})}(t,r);if(!o)return n(r),null;var a=F(r,o);return n(a),F(r,a)};return function(e){var r=e.scrollJumpRequest;if(r){var n=wt(e.impact);h(n);var i=o(e.dimensions.droppables[n],r);if(i){var c=e.viewport,u=a(e.isWindowScrollAllowed,c,i);u&&function(e,r){var n=M(e.current.client.selection,r);t({client:n})}(e,u)}}}},Tn=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,o=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=Mr(t),o=Mr(r),a=null,i=function(e){h(a);var t=a,r=t.shouldUseTimeDampening,i=t.dragStartTime;Pn({state:e,scrollWindow:n,scrollDroppable:o,dragStartTime:i,shouldUseTimeDampening:r})};return{start:function(e){h(!a);var t=Date.now(),r=!1,n=function(){r=!0};Pn({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:n,scrollDroppable:n}),a={dragStartTime:t,shouldUseTimeDampening:r},r&&i(e)},stop:function(){a&&(n.cancel(),o.cancel(),a=null)},scroll:i}}({scrollWindow:r,scrollDroppable:t}),a=Cn({move:n,scrollWindow:r,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&a(e):o.scroll(e))},start:o.start,stop:o.stop}},Ln="data-rbd",An={base:ln="".concat(Ln,"-drag-handle"),draggableId:"".concat(ln,"-draggable-id"),contextId:"".concat(ln,"-context-id")},In=function(){var e="".concat(Ln,"-draggable");return{base:e,contextId:"".concat(e,"-context-id"),id:"".concat(e,"-id")}}(),Nn=function(){var e="".concat(Ln,"-droppable");return{base:e,contextId:"".concat(e,"-context-id"),id:"".concat(e,"-id")}}(),Dn=("".concat(Ln,"-placeholder-context-id"),{contextId:"".concat(Ln,"-scroll-container-context-id")}),Rn=function(e,t){return e.map((function(e){var r=e.styles[t];return r?"".concat(e.selector," { ").concat(r," }"):""})).join(" ")},Mn="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n.useLayoutEffect:n.useEffect,Fn=function(){var e=document.querySelector("head");return h(e),e},Gn=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Bn(e,t){var r=L((function(){return function(e){var t,r,n,o=(t=e,function(e){return"[".concat(e,'="').concat(t,'"]')}),a=(r="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:o(An.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:r,dragging:"pointer-events: none;",dropAnimating:r}}),i=[(n="\n      transition: ".concat(jr.outOfTheWay,";\n    "),{selector:o(In.contextId),styles:{dragging:n,dropAnimating:n,userCancel:n}}),a,{selector:o(Nn.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Rn(i,"always"),resting:Rn(i,"resting"),dragging:Rn(i,"dragging"),dropAnimating:Rn(i,"dropAnimating"),userCancel:Rn(i,"userCancel")}}(e)}),[e]),o=Object(n.useRef)(null),a=Object(n.useRef)(null),i=A(Object(pe.a)((function(e){var t=a.current;h(t),t.textContent=e})),[]),c=A((function(e){var t=o.current;h(t),t.textContent=e}),[]);Mn((function(){h(!o.current&&!a.current);var n=Gn(t),u=Gn(t);return o.current=n,a.current=u,n.setAttribute("".concat(Ln,"-always"),e),u.setAttribute("".concat(Ln,"-dynamic"),e),Fn().appendChild(n),Fn().appendChild(u),c(r.always),i(r.resting),function(){var e=function(e){var t=e.current;h(t),Fn().removeChild(t),e.current=null};e(o),e(a)}}),[t,c,i,r.always,r.resting,e]);var u=A((function(){return i(r.dragging)}),[i,r.dragging]),l=A((function(e){i("DROP"!==e?r.userCancel:r.dropAnimating)}),[i,r.dropAnimating,r.userCancel]),s=A((function(){a.current&&i(r.resting)}),[i,r.resting]);return L((function(){return{dragging:u,dropping:l,resting:s}}),[u,l,s])}var Un=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function zn(e){return e instanceof Un(e).HTMLElement}function Wn(e,t){var r="[".concat(An.contextId,'="').concat(e,'"]'),n=ye(document.querySelectorAll(r));if(!n.length)return i('Unable to find any drag handles in the context "'.concat(e,'"')),null;var o=ve(n,(function(e){return e.getAttribute(An.draggableId)===t}));return o?zn(o)?o:(i("drag handle needs to be a HTMLElement"),null):(i('Unable to find drag handle with id "'.concat(t,'" as no handle with a matching id was found')),null)}function Vn(){var e={draggables:{},droppables:{}},t=[];function r(e){t.length&&t.forEach((function(t){return t(e)}))}function n(t){return e.draggables[t]||null}function o(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,r({type:"ADDITION",value:t})},update:function(t,r){var n=e.draggables[r.descriptor.id];n&&n.uniqueId===t.uniqueId&&(delete e.draggables[r.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var o=t.descriptor.id,a=n(o);a&&t.uniqueId===a.uniqueId&&(delete e.draggables[o],r({type:"REMOVAL",value:t}))},getById:function(e){var t=n(e);return h(t,"Cannot find draggable entry with id [".concat(e,"]")),t},findById:n,exists:function(e){return Boolean(n(e))},getAllByType:function(t){return he(e.draggables).filter((function(e){return e.descriptor.type===t}))}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var r=o(t.descriptor.id);r&&t.uniqueId===r.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=o(e);return h(t,"Cannot find droppable entry with id [".concat(e,"]")),t},findById:o,exists:function(e){return Boolean(o(e))},getAllByType:function(t){return he(e.droppables).filter((function(e){return e.descriptor.type===t}))}},subscribe:function(e){return t.push(e),function(){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var Hn=o.a.createContext(null),qn=function(){var e=document.body;return h(e),e},Kn={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var Yn=0,$n={separator:"::"};function Zn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$n;return L((function(){return"".concat(e).concat(t.separator).concat(Yn++)}),[t.separator,e])}var Jn=o.a.createContext(null);function Xn(e){0}function Qn(e,t){Xn()}function eo(){Qn()}function to(e){var t=Object(n.useRef)(e);return Object(n.useEffect)((function(){t.current=e})),t}var ro;function no(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oo=(no(ro={},13,!0),no(ro,9,!0),ro),ao=function(e){oo[e.keyCode]&&e.preventDefault()},io=function(){var e="visibilitychange";return"undefined"==typeof document?e:ve([e,"ms".concat(e),"webkit".concat(e),"moz".concat(e),"o".concat(e)],(function(e){return"on".concat(e)in document}))||e}(),co=io;var uo,lo={type:"IDLE"};function so(e){var t=e.cancel,r=e.completed,n=e.getPhase,o=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,r=e.clientX,a=e.clientY;if(0===t){var i={x:r,y:a},c=n();if("DRAGGING"===c.type)return e.preventDefault(),void c.actions.move(i);h("PENDING"===c.type);var u=c.point;if(l=u,s=i,Math.abs(s.x-l.x)>=5||Math.abs(s.y-l.y)>=5){var l,s;e.preventDefault();var f=c.actions.fluidLift(i);o({type:"DRAGGING",actions:f})}}}},{eventName:"mouseup",fn:function(e){var o=n();"DRAGGING"===o.type?(e.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===n().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==n().type)return 27===e.keyCode?(e.preventDefault(),void t()):void ao(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===n().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var r=n();h("IDLE"!==r.type),r.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:co,fn:t}]}function fo(e){var t=Object(n.useRef)(lo),r=Object(n.useRef)(c),o=L((function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var n=e.findClosestDraggableId(t);if(n){var o=e.tryGetLock(n,u,{sourceEvent:t});if(o){t.preventDefault();var a={x:t.clientX,y:t.clientY};r.current(),d(o,a)}}}}}}),[e]),a=L((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var n=e.findOptionsForDraggable(r);n&&(n.shouldRespectForcePress||e.canGetLock(r)&&t.preventDefault())}}}}}),[e]),i=A((function(){r.current=f(window,[a,o],{passive:!1,capture:!0})}),[a,o]),u=A((function(){"IDLE"!==t.current.type&&(t.current=lo,r.current(),i())}),[i]),l=A((function(){var e=t.current;u(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[u]),s=A((function(){var e=so({cancel:l,completed:u,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});r.current=f(window,e,{capture:!0,passive:!1})}),[l,u]),d=A((function(e,r){h("IDLE"===t.current.type),t.current={type:"PENDING",point:r,actions:e},s()}),[s]);Mn((function(){return i(),function(){r.current()}}),[i])}function po(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ho(){}var mo=(po(uo={},34,!0),po(uo,33,!0),po(uo,36,!0),po(uo,35,!0),uo);function vo(e,t){function r(){t(),e.cancel()}return[{eventName:"keydown",fn:function(n){return 27===n.keyCode?(n.preventDefault(),void r()):32===n.keyCode?(n.preventDefault(),t(),void e.drop()):40===n.keyCode?(n.preventDefault(),void e.moveDown()):38===n.keyCode?(n.preventDefault(),void e.moveUp()):39===n.keyCode?(n.preventDefault(),void e.moveRight()):37===n.keyCode?(n.preventDefault(),void e.moveLeft()):void(mo[n.keyCode]?n.preventDefault():ao(n))}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:co,fn:r}]}var yo={type:"IDLE"};function bo(e){var t=Object(n.useRef)(yo),r=Object(n.useRef)(c),o=A((function(){return t.current}),[]),a=A((function(e){t.current=e}),[]),i=L((function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var o=e.tryGetLock(n,l,{sourceEvent:t});if(o){var a=t.touches[0],i={x:a.clientX,y:a.clientY},c=e.findClosestDragHandle(t);h(c),r.current(),m(o,i,c)}}}}}}),[e]),u=A((function(){r.current=f(window,[i],{capture:!0,passive:!1})}),[i]),l=A((function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),a(yo),r.current(),u())}),[u,a]),s=A((function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[l]),d=A((function(e){var t={capture:!0,passive:!1},n={cancel:s,completed:l,getPhase:o},a=f(e,function(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var r=n();if("DRAGGING"===r.type){r.hasMoved=!0;var o=e.touches[0],a={x:o.clientX,y:o.clientY};e.preventDefault(),r.actions.move(a)}else t()}},{eventName:"touchend",fn:function(e){var o=n();"DRAGGING"===o.type?(e.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===n().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var r=n();h("IDLE"!==r.type);var o=e.touches[0];if(o&&o.force>=.15){var a=r.actions.shouldRespectForcePress();if("PENDING"!==r.type)return a?r.hasMoved?void e.preventDefault():void t():void e.preventDefault();a&&t()}}},{eventName:co,fn:t}]}(n),t),i=f(window,function(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===r().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:co,fn:t}]}(n),t);r.current=function(){a(),i()}}),[s,o,l]),p=A((function(){var e=o();h("PENDING"===e.type,"Cannot start dragging from phase ".concat(e.type));var t=e.actions.fluidLift(e.point);t.move({x:e.point.x,y:e.point.y+1e-4}),a({type:"DRAGGING",actions:t,hasMoved:!1})}),[o,a]),m=A((function(e,t,r){h("IDLE"===o().type);var n=setTimeout(p,300);a({type:"PENDING",point:t,actions:e,longPressTimerId:n}),d(r)}),[d,o,a,p]);Mn((function(){return u(),function(){r.current();var e=o();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),a(yo))}}),[o,u,a]),Mn((function(){return f(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}var go={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function wo(e,t){if(null==t)return!1;if(Boolean(go[t.tagName.toLowerCase()]))return!0;var r=t.getAttribute("contenteditable");return"true"===r||""===r||t!==e&&wo(e,t.parentElement)}function _o(e,t){var r=t.target;return!!zn(r)&&wo(e,r)}var Oo=function(e){return q(e.getBoundingClientRect()).center};var Eo=function(){var e="matches";return"undefined"==typeof document?e:ve([e,"msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||e}();function So(e,t){return null==e?null:e[Eo](t)?e:So(e.parentElement,t)}function xo(e,t){return e.closest?e.closest(t):So(e,t)}function jo(e,t){var r,n=t.target;if(!((r=n)instanceof Un(r).Element))return i("event.target must be a Element"),null;var o=function(e){return"[".concat(An.contextId,'="').concat(e,'"]')}(e),a=xo(n,o);return a?zn(a)?a:(i("drag handle must be a HTMLElement"),null):null}function ko(e){return function(e){if(Array.isArray(e))return Po(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Po(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Po(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Po(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Co(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function To(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(r),!0).forEach((function(t){Lo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Co(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ao(e){e.preventDefault()}function Io(e){var t=e.expected,r=e.phase,n=e.isLockActive,o=e.shouldWarn;return n()?t===r||(o&&i("\n        Cannot perform action.\n        The actions you used belong to an outdated phase\n\n        Current phase: ".concat(t,"\n        You called an action from outdated phase: ").concat(r,"\n\n        Tips:\n\n        - Do not use preDragActions actions after calling preDragActions.lift()\n      ")),!1):(o&&i("\n        Cannot perform action.\n        The sensor no longer has an action lock.\n\n        Tips:\n\n        - Throw away your action handlers when forceStop() is called\n        - Check actions.isActive() if you really need to\n      "),!1)}function No(e){var t=e.lockAPI,r=e.store,n=e.registry,o=e.draggableId;if(t.isClaimed())return!1;var a=n.draggable.findById(o);return a?!!a.options.isEnabled&&!!fn(r.getState(),o):(i("Unable to find draggable with id: ".concat(o)),!1)}function Do(e){var t=e.lockAPI,r=e.contextId,n=e.store,o=e.registry,a=e.draggableId,u=e.forceSensorStop,l=e.sourceEvent;if(!No({lockAPI:t,store:n,registry:o,draggableId:a}))return null;var s=o.draggable.getById(a),d=function(e,t){var r="[".concat(In.contextId,'="').concat(e,'"]'),n=ve(ye(document.querySelectorAll(r)),(function(e){return e.getAttribute(In.id)===t}));return n?zn(n)?n:(i("Draggable element is not a HTMLElement"),null):null}(r,s.descriptor.id);if(!d)return i("Unable to find draggable element with id: ".concat(a)),null;if(l&&!s.options.canDragInteractiveElements&&_o(d,l))return null;var p=t.claim(u||c),m="PRE_DRAG";function v(){return s.options.shouldRespectForcePress}function y(){return t.isActive(p)}var b=function(e,t){Io({expected:e,phase:m,isLockActive:y,shouldWarn:!0})&&n.dispatch(t())}.bind(null,"DRAGGING");function g(e){function r(){t.release(),m="COMPLETED"}function o(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shouldBlockNextClick:!1};if(e.cleanup(),o.shouldBlockNextClick){var a=f(window,[{eventName:"click",fn:Ao,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(a)}r(),n.dispatch(yr({reason:t}))}return"PRE_DRAG"!==m&&(r(),h("PRE_DRAG"===m,"Cannot lift in phase ".concat(m))),n.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),m="DRAGGING",To({isActive:function(){return Io({expected:"DRAGGING",phase:m,isLockActive:y,shouldWarn:!1})},shouldRespectForcePress:v,drop:function(e){return o("DROP",e)},cancel:function(e){return o("CANCEL",e)}},e.actions)}return{isActive:function(){return Io({expected:"PRE_DRAG",phase:m,isLockActive:y,shouldWarn:!1})},shouldRespectForcePress:v,fluidLift:function(e){var t=Mr((function(e){b((function(){return fr({client:e})}))}));return To(To({},g({liftActionArgs:{id:a,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}})),{},{move:t})},snapLift:function(){var e={moveUp:function(){return b(dr)},moveRight:function(){return b(hr)},moveDown:function(){return b(pr)},moveLeft:function(){return b(mr)}};return g({liftActionArgs:{id:a,clientSelection:Oo(d),movementMode:"SNAP"},cleanup:c,actions:e})},abort:function(){Io({expected:"PRE_DRAG",phase:m,isLockActive:y,shouldWarn:!0})&&t.release()}}}var Ro=[fo,function(e){var t=Object(n.useRef)(ho),r=L((function(){return{eventName:"keydown",fn:function(r){if(!r.defaultPrevented&&32===r.keyCode){var n=e.findClosestDraggableId(r);if(n){var a=e.tryGetLock(n,u,{sourceEvent:r});if(a){r.preventDefault();var i=!0,c=a.snapLift();t.current(),t.current=f(window,vo(c,u),{capture:!0,passive:!1})}}}function u(){h(i),i=!1,t.current(),o()}}}}),[e]),o=A((function(){t.current=f(window,[r],{passive:!1,capture:!0})}),[r]);Mn((function(){return o(),function(){t.current()}}),[o])},bo];function Mo(e){var t=e.contextId,r=e.store,o=e.registry,a=e.customSensors,i=e.enableDefaultSensors,c=[].concat(ko(i?Ro:[]),ko(a||[])),u=Object(n.useState)((function(){return function(){var e=null;function t(){h(e),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){h(!e);var r={abandon:t};return e=r,r},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],l=A((function(e,t){e.isDragging&&!t.isDragging&&u.tryAbandon()}),[u]);Mn((function(){var e=r.getState();return r.subscribe((function(){var t=r.getState();l(e,t),e=t}))}),[u,r,l]),Mn((function(){return u.tryAbandon}),[u.tryAbandon]);var s=A((function(e){return No({lockAPI:u,registry:o,store:r,draggableId:e})}),[u,o,r]),f=A((function(e,n,a){return Do({lockAPI:u,registry:o,contextId:t,store:r,draggableId:e,forceSensorStop:n,sourceEvent:a&&a.sourceEvent?a.sourceEvent:null})}),[t,u,o,r]),d=A((function(e){return jo(t,e)}),[t]),p=A((function(e){return function(e,t){var r=jo(e,t);return r?r.getAttribute(An.draggableId):null}(t,e)}),[t]),m=A((function(e){var t=o.draggable.findById(e);return t?t.options:null}),[o.draggable]),v=A((function(){u.isClaimed()&&(u.tryAbandon(),"IDLE"!==r.getState().phase&&r.dispatch({type:"FLUSH",payload:null}))}),[u,r]),y=A(u.isClaimed,[u]),b=L((function(){return{canGetLock:s,tryGetLock:f,findClosestDraggableId:p,findClosestDragHandle:d,findOptionsForDraggable:m,tryReleaseLock:v,isLockClaimed:y}}),[s,f,p,d,m,v,y]);Xn();for(var g=0;g<c.length;g++)c[g](b)}function Fo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Go(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bo(e){return h(e.current),e.current}function Uo(e){var t=e.contextId,r=e.setCallbacks,a=e.sensors,c=e.nonce,u=e.dragHandleUsageInstructions,l=Object(n.useRef)(null);eo();var s=to(e),f=A((function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(s.current)}),[s]),d=function(e){var t=L((function(){return function(e){return"rbd-announcement-".concat(e)}(e)}),[e]),r=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=document.createElement("div");return r.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),Object.assign(e.style,Kn),qn().appendChild(e),function(){setTimeout((function(){var t=qn();t.contains(e)&&t.removeChild(e),e===r.current&&(r.current=null)}))}}),[t]),A((function(e){var t=r.current;t?t.textContent=e:i('\n      A screen reader message was trying to be announced but it was unable to do so.\n      This can occur if you unmount your <DragDropContext /> in your onDragEnd.\n      Consider calling provided.announce() before the unmount so that the instruction will\n      not be lost for users relying on a screen reader.\n\n      Message not passed to screen reader:\n\n      "'.concat(e,'"\n    '))}),[])}(t),p=function(e){var t=e.contextId,r=e.text,o=Zn("hidden-text",{separator:"-"}),a=L((function(){return function(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-".concat(t,"-").concat(r)}({contextId:t,uniqueId:o})}),[o,t]);return Object(n.useEffect)((function(){var e=document.createElement("div");return e.id=a,e.textContent=r,e.style.display="none",qn().appendChild(e),function(){var t=qn();t.contains(e)&&t.removeChild(e)}}),[a,r]),a}({contextId:t,text:u}),h=Bn(t,c),m=A((function(e){Bo(l).dispatch(e)}),[]),v=L((function(){return Object(P.b)({publishWhileDragging:ir,updateDroppableScroll:ur,updateDroppableIsEnabled:lr,updateDroppableIsCombineEnabled:sr,collectionStarting:cr},m)}),[m]),y=function(){var e=L(Vn,[]);return Object(n.useEffect)((function(){return function(){requestAnimationFrame(e.clean)}}),[e]),e}(),b=L((function(){return sn(y,v)}),[y,v]),g=L((function(){return Tn(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fo(Object(r),!0).forEach((function(t){Go(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({scrollWindow:dn,scrollDroppable:b.scrollDroppable},Object(P.b)({move:fr},m)))}),[b.scrollDroppable,m]),w=function(e){var t=Object(n.useRef)({}),r=Object(n.useRef)(null),o=Object(n.useRef)(null),a=Object(n.useRef)(!1),i=A((function(e,r){var n={id:e,focus:r};return t.current[e]=n,function(){var r=t.current;r[e]!==n&&delete r[e]}}),[]),c=A((function(t){var r=Wn(e,t);r&&r!==document.activeElement&&r.focus()}),[e]),u=A((function(e,t){r.current===e&&(r.current=t)}),[]),l=A((function(){o.current||a.current&&(o.current=requestAnimationFrame((function(){o.current=null;var e=r.current;e&&c(e)})))}),[c]),s=A((function(e){r.current=null;var t=document.activeElement;t&&t.getAttribute(An.draggableId)===e&&(r.current=e)}),[]);return Mn((function(){return a.current=!0,function(){a.current=!1;var e=o.current;e&&cancelAnimationFrame(e)}}),[]),L((function(){return{register:i,tryRecordFocus:s,tryRestoreFocusRecorded:l,tryShiftRecord:u}}),[i,s,l,u])}(t),_=L((function(){return tn({announce:d,autoScroller:g,dimensionMarshal:b,focusMarshal:w,getResponders:f,styleMarshal:h})}),[d,g,b,w,f,h]);l.current=_;var O=A((function(){var e=Bo(l);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})}),[]),E=A((function(){var e=Bo(l).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);r(L((function(){return{isDragging:E,tryAbort:O}}),[E,O]));var S=A((function(e){return fn(Bo(l).getState(),e)}),[]),x=A((function(){return Ot(Bo(l).getState())}),[]),j=L((function(){return{marshal:b,focus:w,contextId:t,canLift:S,isMovementAllowed:x,dragHandleUsageInstructionsId:p,registry:y}}),[t,b,p,w,S,x,y]);return Mo({contextId:t,store:_,registry:y,customSensors:a,enableDefaultSensors:!1!==e.enableDefaultSensors}),Object(n.useEffect)((function(){return O}),[O]),o.a.createElement(Jn.Provider,{value:j},o.a.createElement(C.a,{context:Hn,store:_},e.children))}var zo=0;function Wo(e){var t=L((function(){return"".concat(zo++)}),[]),r=e.dragHandleUsageInstructions||k.dragHandleUsageInstructions;return o.a.createElement(O,null,(function(n){return o.a.createElement(Uo,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var Vo=r(36),Ho=r.n(Vo),qo=function(e){return function(t){return e===t}},Ko=qo("scroll"),Yo=qo("auto"),$o=(qo("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),Zo=function(e){var t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return $o(r,Ko)||$o(r,Yo)},Jo=function e(t){return null==t||t===document.body||t===document.documentElement?null:Zo(t)?t:e(t.parentElement)},Xo=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Qo=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},ea=function(e){return{closestScrollable:Jo(e),isFixedOnPage:Qo(e)}},ta=function(e){var t=e.ref,r=e.descriptor,n=e.env,o=e.windowScroll,a=e.direction,i=e.isDropDisabled,c=e.isCombineEnabled,u=e.shouldClipSubject,l=n.closestScrollable,s=function(e,t){var r=te(e);if(!t)return r;if(e!==t)return r;var n=r.paddingBox.top-t.scrollTop,o=r.paddingBox.left-t.scrollLeft,a=n+t.scrollHeight,i=o+t.scrollWidth,c=K({top:n,right:i,bottom:a,left:o},r.border);return Z({borderBox:c,margin:r.margin,border:r.border,padding:r.padding})}(t,l),f=Q(s,o),d=function(){if(!l)return null;var e=te(l),t={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:e,page:Q(e,o),scroll:Xo(l),scrollSize:t,shouldClipSubject:u}}(),p=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,o=e.isFixedOnPage,a=e.direction,i=e.client,c=e.page,u=e.closest,l=function(){if(!u)return null;var e=u.scrollSize,t=u.client,r=rn({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:u.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:u.shouldClipSubject,scroll:{initial:u.scroll,current:u.scroll,max:r,diff:{value:R,displacement:R}}}}(),s="vertical"===a?Re:Me;return{descriptor:t,isCombineEnabled:n,isFixedOnPage:o,axis:s,isEnabled:r,client:i,page:c,frame:l,subject:ue({page:c,withPlaceholder:null,axis:s,frame:l})}}({descriptor:r,isEnabled:!i,isCombineEnabled:c,isFixedOnPage:n.isFixedOnPage,direction:a,client:s,page:f,closest:d});return p},ra={passive:!1},na={passive:!0},oa=function(e){return e.shouldPublishImmediately?ra:na};function aa(e){var t=Object(n.useContext)(e);return h(t),t}var ia=function(e){return e&&e.env.closestScrollable||null};function ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ua(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ua(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ua(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function la(){}var sa={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},fa=function(e){var t=e.isAnimatingOpenOnMount,r=e.placeholder,n=e.animate,o=function(e){var t=e.isAnimatingOpenOnMount,r=e.placeholder,n=e.animate;return t||"close"===n?sa:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin}}({isAnimatingOpenOnMount:t,placeholder:r,animate:n});return{display:r.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==n?jr.placeholder:null}};function da(e){var t=Object(n.useRef)(null),r=A((function(){t.current&&(clearTimeout(t.current),t.current=null)}),[]),a=e.animate,i=e.onTransitionEnd,c=e.onClose,u=e.contextId,l=ca(Object(n.useState)("open"===e.animate),2),s=l[0],f=l[1];Object(n.useEffect)((function(){return s?"open"!==a?(r(),f(!1),la):t.current?la:(t.current=setTimeout((function(){t.current=null,f(!1)})),r):la}),[a,s,r]);var d=A((function(e){"height"===e.propertyName&&(i(),"close"===a&&c())}),[a,c,i]),p=fa({isAnimatingOpenOnMount:s,animate:e.animate,placeholder:e.placeholder});return o.a.createElement(e.placeholder.tagName,{style:p,"data-rbd-placeholder-context-id":u,onTransitionEnd:d,ref:e.innerRef})}var pa=o.a.memo(da),ha=o.a.createContext(null);function ma(e){return ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma(e)}function va(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ya(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ba(e,t){return ba=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ba(e,t)}function ga(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_a(e);if(t){var o=_a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return wa(this,r)}}function wa(e,t){if(t&&("object"===ma(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _a(e){return _a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_a(e)}var Oa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ba(e,t)}(a,e);var t,r,n,o=ga(a);function a(){var e;va(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).state={isVisible:Boolean(e.props.on),data:e.props.on,animate:e.props.shouldAnimate&&e.props.on?"open":"none"},e.onClose=function(){"close"===e.state.animate&&e.setState({isVisible:!1})},e}return t=a,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}}}],(r=[{key:"render",value:function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}])&&ya(t.prototype,r),n&&ya(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.a.PureComponent),Ea=5e3,Sa=4500,xa=function(e,t){return t?jr.drop(t.duration):e?jr.snap:jr.fluid},ja=function(e,t){return e?t?_r.drop:_r.combining:null};function ka(e){return"DRAGGING"===e.type?(n=(r=e).dimension.client,o=r.offset,a=r.combineWith,i=r.dropping,c=Boolean(a),u=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(r),l=Boolean(i),s=l?Cr(o,c):Pr(o),{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:xa(u,i),transform:s,opacity:ja(c,l),zIndex:l?Sa:Ea,pointerEvents:"none"}):{transform:Pr((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t,r,n,o,a,i,c,u,l,s}function Pa(e){var t=Zn("draggable"),r=e.descriptor,o=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,c=e.shouldRespectForcePress,u=e.isEnabled,l=L((function(){return{canDragInteractiveElements:i,shouldRespectForcePress:c,isEnabled:u}}),[i,u,c]),s=A((function(e){var t=a();return h(t),function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R,n=window.getComputedStyle(t),o=t.getBoundingClientRect(),a=ee(o,n),i=Q(a,r),c={client:a,tagName:t.tagName.toLowerCase(),display:n.display},u={x:a.marginBox.width,y:a.marginBox.height},l={descriptor:e,placeholder:c,displaceBy:u,client:a,page:i};return l}(r,t,e)}),[r,a]),f=L((function(){return{uniqueId:t,descriptor:r,options:l,getDimension:s}}),[r,s,l,t]),d=Object(n.useRef)(f),p=Object(n.useRef)(!0);Mn((function(){return o.draggable.register(d.current),function(){return o.draggable.unregister(d.current)}}),[o.draggable]),Mn((function(){if(p.current)p.current=!1;else{var e=d.current;d.current=f,o.draggable.update(f,e)}}),[f,o.draggable])}function Ca(e,t,r){Qn()}function Ta(e){e.preventDefault()}var La=function(e,t){return e===t},Aa=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null};function Ia(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Na={mapped:{type:"SECONDARY",offset:R,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Ia(null)}};var Da={dropAnimationFinished:br},Ra=Object(C.d)((function(){var e,t,r,n=(e=Object(pe.a)((function(e,t){return{x:e,y:t}})),t=Object(pe.a)((function(e,t,r,n,o){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(o),dropAnimation:o,mode:e,draggingOver:r,combineWith:n,combineTargetFor:null}})),r=Object(pe.a)((function(e,r,n,o,a,i,c){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:a,combineWith:i,mode:r,offset:e,dimension:n,forceShouldAnimate:c,snapshot:t(r,o,a,i,null)}}})),function(n,o){if(n.isDragging){if(n.critical.draggable.id!==o.draggableId)return null;var a=n.current.client.offset,i=n.dimensions.draggables[o.draggableId],c=wt(n.impact),u=(s=n.impact).at&&"COMBINE"===s.at.type?s.at.combine.draggableId:null,l=n.forceShouldAnimate;return r(e(a.x,a.y),n.movementMode,i,o.isClone,c,u,l)}var s;if("DROP_ANIMATING"===n.phase){var f=n.completed;if(f.result.draggableId!==o.draggableId)return null;var d=o.isClone,p=n.dimensions.draggables[o.draggableId],h=f.result,m=h.mode,v=Aa(h),y=function(e){return e.combine?e.combine.draggableId:null}(h),b={duration:n.dropDuration,curve:wr,moveTo:n.newHomeClientOffset,opacity:y?_r.drop:null,scale:y?Or.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:p,dropping:b,draggingOver:v,combineWith:y,mode:m,forceShouldAnimate:null,snapshot:t(m,d,v,y,b)}}}return null}),o=function(){var e=Object(pe.a)((function(e,t){return{x:e,y:t}})),t=Object(pe.a)(Ia),r=Object(pe.a)((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{mapped:{type:"SECONDARY",offset:e,combineTargetFor:r,shouldAnimateDisplacement:arguments.length>2?arguments[2]:void 0,snapshot:t(r)}}})),n=function(e){return e?r(R,e,!0):null},o=function(t,o,a,i){var c=a.displaced.visible[t],u=Boolean(i.inVirtualList&&i.effected[t]),l=Se(a),s=l&&l.draggableId===t?o:null;if(!c){if(!u)return n(s);if(a.displaced.invisible[t])return null;var f=B(i.displacedBy.point),d=e(f.x,f.y);return r(d,s,!0)}if(u)return n(s);var p=a.displacedBy.point,h=e(p.x,p.y);return r(h,s,c.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:o(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var r=e.completed;return r.result.draggableId===t.draggableId?null:o(t.draggableId,r.result.draggableId,r.impact,r.afterCritical)}return null}}();return function(e,t){return n(e,t)||o(e,t)||Na}}),Da,null,{context:Hn,pure:!0,areStatePropsEqual:La})((function(e){var t=Object(n.useRef)(null),r=A((function(e){t.current=e}),[]),o=A((function(){return t.current}),[]),a=aa(Jn),i=a.contextId,c=a.dragHandleUsageInstructionsId,u=a.registry,l=aa(ha),s=l.type,f=l.droppableId,d=L((function(){return{id:e.draggableId,index:e.index,type:s,droppableId:f}}),[e.draggableId,e.index,s,f]),p=e.children,h=e.draggableId,m=e.isEnabled,v=e.shouldRespectForcePress,y=e.canDragInteractiveElements,b=e.isClone,g=e.mapped,w=e.dropAnimationFinished;Ca(),Xn(),b||Pa(L((function(){return{descriptor:d,registry:u,getDraggableRef:o,canDragInteractiveElements:y,shouldRespectForcePress:v,isEnabled:m}}),[d,u,o,y,v,m]));var _=L((function(){return m?{tabIndex:0,role:"button","aria-describedby":c,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:Ta}:null}),[i,c,h,m]),O=A((function(e){"DRAGGING"===g.type&&g.dropping&&"transform"===e.propertyName&&w()}),[w,g]),E=L((function(){var e=ka(g),t="DRAGGING"===g.type&&g.dropping?O:null;return{innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":h,style:e,onTransitionEnd:t},dragHandleProps:_}}),[i,_,h,g,O,r]),S=L((function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}}),[d.droppableId,d.id,d.index,d.type]);return p(E,g.snapshot,S)})),Ma=Ra;function Fa(){return Fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fa.apply(this,arguments)}function Ga(e){return aa(ha).isUsingCloneFor!==e.draggableId||e.isClone?o.a.createElement(Ma,e):null}function Ba(e){var t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,r=Boolean(e.disableInteractiveElementBlocking),n=Boolean(e.shouldRespectForcePress);return o.a.createElement(Ga,Fa({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function Ua(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function za(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ua(Object(r),!0).forEach((function(t){Wa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ua(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Va=function(e,t){return e===t.droppable.type},Ha=function(e,t){return t.draggables[e.draggable.id]},qa={updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}};var Ka={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return h(document.body),document.body}},Ya=Object(C.d)((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=za(za({},e),{},{shouldAnimatePlaceholder:!1}),r=Object(pe.a)((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),n=Object(pe.a)((function(n,o,a,i,c,u){var l=c.descriptor.id;if(c.descriptor.droppableId===n){var s=u?{render:u,dragging:r(c.descriptor)}:null,f={isDraggingOver:a,draggingOverWith:a?l:null,draggingFromThisWith:l,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!1,snapshot:f,useClone:s}}if(!o)return t;if(!i)return e;var d={isDraggingOver:a,draggingOverWith:l,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!0,snapshot:d,useClone:null}}));return function(r,o){var a=o.droppableId,i=o.type,c=!o.isDropDisabled,u=o.renderClone;if(r.isDragging){var l=r.critical;if(!Va(i,l))return t;var s=Ha(l,r.dimensions),f=wt(r.impact)===a;return n(a,c,f,f,s,u)}if("DROP_ANIMATING"===r.phase){var d=r.completed;if(!Va(i,d.critical))return t;var p=Ha(d.critical,r.dimensions);return n(a,c,Aa(d.result)===a,wt(d.impact)===a,p,u)}if("IDLE"===r.phase&&r.completed&&!r.shouldFlush){var h=r.completed;if(!Va(i,h.critical))return t;var m=wt(h.impact)===a,v=Boolean(h.impact.at&&"COMBINE"===h.impact.at.type),y=h.critical.droppable.id===a;return m?v?e:t:y?e:t}return t}}),qa,null,{context:Hn,pure:!0,areStatePropsEqual:La})((function(e){var t=Object(n.useContext)(Jn);h(t);var r=t.contextId,a=t.isMovementAllowed,c=Object(n.useRef)(null),u=Object(n.useRef)(null),l=e.children,s=e.droppableId,f=e.type,d=e.mode,p=e.direction,m=e.ignoreContainerClipping,v=e.isDropDisabled,y=e.isCombineEnabled,b=e.snapshot,g=e.useClone,w=e.updateViewportMaxScroll,_=e.getContainerForClone,O=A((function(){return c.current}),[]),E=A((function(e){c.current=e}),[]),S=(A((function(){return u.current}),[]),A((function(e){u.current=e}),[]));Qn();var x=A((function(){a()&&w({maxScroll:on()})}),[a,w]);!function(e){var t=Object(n.useRef)(null),r=aa(Jn),o=Zn("droppable"),a=r.registry,c=r.marshal,u=to(e),l=L((function(){return{id:e.droppableId,type:e.type,mode:e.mode}}),[e.droppableId,e.mode,e.type]),s=Object(n.useRef)(l),f=L((function(){return Object(pe.a)((function(e,r){h(t.current);var n={x:e,y:r};c.updateDroppableScroll(l.id,n)}))}),[l.id,c]),d=A((function(){var e=t.current;return e&&e.env.closestScrollable?Xo(e.env.closestScrollable):R}),[]),p=A((function(){var e=d();f(e.x,e.y)}),[d,f]),m=L((function(){return Mr(p)}),[p]),v=A((function(){var e=t.current,r=ia(e);h(e&&r),e.scrollOptions.shouldPublishImmediately?p():m()}),[m,p]),y=A((function(e,n){h(!t.current);var o=u.current,a=o.getDroppableRef();h(a);var i=ea(a),c={ref:a,descriptor:l,env:i,scrollOptions:n};t.current=c;var s=ta({ref:a,descriptor:l,env:i,windowScroll:e,direction:o.direction,isDropDisabled:o.isDropDisabled,isCombineEnabled:o.isCombineEnabled,shouldClipSubject:!o.ignoreContainerClipping}),f=i.closestScrollable;return f&&(f.setAttribute(Dn.contextId,r.contextId),f.addEventListener("scroll",v,oa(c.scrollOptions))),s}),[r.contextId,l,v,u]),b=A((function(){var e=t.current,r=ia(e);return h(e&&r),Xo(r)}),[]),g=A((function(){var e=t.current;h(e);var r=ia(e);t.current=null,r&&(m.cancel(),r.removeAttribute(Dn.contextId),r.removeEventListener("scroll",v,oa(e.scrollOptions)))}),[v,m]),w=A((function(e){var r=t.current;h(r);var n=ia(r);h(n),n.scrollTop+=e.y,n.scrollLeft+=e.x}),[]),_=L((function(){return{getDimensionAndWatchScroll:y,getScrollWhileDragging:b,dragStopped:g,scroll:w}}),[g,y,b,w]),O=L((function(){return{uniqueId:o,descriptor:l,callbacks:_}}),[_,l,o]);Mn((function(){return s.current=O.descriptor,a.droppable.register(O),function(){t.current&&(i("Unsupported: changing the droppableId or type of a Droppable during a drag"),g()),a.droppable.unregister(O)}}),[_,l,g,O,c,a.droppable]),Mn((function(){t.current&&c.updateDroppableIsEnabled(s.current.id,!e.isDropDisabled)}),[e.isDropDisabled,c]),Mn((function(){t.current&&c.updateDroppableIsCombineEnabled(s.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,c])}({droppableId:s,type:f,mode:d,direction:p,isDropDisabled:v,isCombineEnabled:y,ignoreContainerClipping:m,getDroppableRef:O});var j=o.a.createElement(Oa,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(function(e){var t=e.onClose,n=e.data,a=e.animate;return o.a.createElement(pa,{placeholder:n,onClose:t,innerRef:S,animate:a,contextId:r,onTransitionEnd:x})})),k=L((function(){return{innerRef:E,placeholder:j,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":r}}}),[r,s,j,E]),P=g?g.dragging.draggableId:null,C=L((function(){return{droppableId:s,type:f,isUsingCloneFor:P}}),[s,P,f]);return o.a.createElement(ha.Provider,{value:C},l(k,b),function(){if(!g)return null;var e=g.dragging,t=g.render,r=o.a.createElement(Ga,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(r,n){return t(r,n,e)}));return Ho.a.createPortal(r,_())}())}));Ya.defaultProps=Ka;var $a=Ya},3179:function(e,t,r){"use strict";r(279);var n=r(136),o=(r(62),r(21)),a=r(0),i=r.n(a),c=r(9),u=r.n(c),l=r(3101),s="index-module_container_cvFEw",f="index-module_descImg_yuOS4",d="index-module_title_xRvvb",p="index-module_firstLine_1EISJ",h="index-module_description_DuIJN",m="index-module_footer_W9yDd",v="index-module_detailBtn_GSAtM",y="index-module_shareBtn_vdQ5k";function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t,r=e.onShare,c=e.noButton,w=e.overlayClassName,_=e.type,O=e.onChangeShareStatus,E=e.restProps,S=g(Object(a.useState)(!1),2),x=S[0],j=S[1],k=function(e,t){"function"==typeof O&&t&&O(e,t),j(e)};return t=c?i.a.createElement("span",{onClick:function(){return j(!0)},style:{display:"block"}},__("分享到花园")):i.a.createElement(l.a,b({iconName:"digitalgarden",tooltip:__("分享到花园")},E)),i.a.createElement(i.a.Fragment,null,i.a.createElement(n.a,{content:i.a.createElement("div",{className:s},i.a.createElement("img",{className:f,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*ljInRZpwD6UAAAAAAAAAAAAAARQnAQ",alt:""}),i.a.createElement("p",{className:d},__("分享到花园")),i.a.createElement("p",{className:u()(h,p)},__("推送内容会出现在粉丝的「逛逛-关注」里")),i.a.createElement("p",{className:h},__("并同步到你的"),i.a.createElement("a",{href:"/".concat(window.appData.me.login),target:"_blank"},__("我的花园")),__("的「更新」模块")),i.a.createElement("div",{className:m},i.a.createElement(o.a,{className:v,onClick:function(){window.open(window.appData.isYuque?"https://www.yuque.com/yuque/mgcsc6/xtgy5c":"https://yuque.antfin.com/lark/xwhu77/lhqpnw")}},__("查看介绍")),i.a.createElement(o.a,{className:y,type:"primary",onClick:function(){k(!1,!0),r()}},__("确认")))),trigger:"click",noArrow:!0,visible:x,placement:"bottomRight",overlayClassName:u()(w),onVisibleChange:k,getPopupContainer:function(e){return"note"===_?e.closest(".note-list-item").querySelector(".note-item"):e.parentNode}},t))}},3182:function(e,t,r){"use strict";var n=r(585);t.a=n.a},3202:function(e,t,r){"use strict";var n=r(633),o=Object(n.a)({loader:function(){return r.e(369).then(r.bind(null,575))}});t.a=o},3216:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),o=r(3395);function a(){var e=Object(n.useContext)(o.a);if(!e)throw new Error("Managers not found, please use ManagersProvider");return e}},3221:function(e,t,r){"use strict";r.d(t,"b",(function(){return h})),r.d(t,"a",(function(){return l}));var n=r(0),o=r.n(n),a=r(120),i=r.n(a),c=r(54),u=r.n(c),l=Object(n.createContext)(null);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e,t,r){return r?"x"===t?window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0:"x"===t?e.scrollLeft||0:e.scrollTop||0},p=function(e,t){return t?window:e.current};function h(e){var t=e.useFullScreenMode,r=void 0===t||t,a=e.useScrolling,c=void 0!==a&&a,f=e.gridLayout,h=void 0!==f&&f,m=e.style,v=e.virtualWidth,y=e.virtualHeight,b=e.virtualContainerStyle,g=e.children,w=Object(n.useRef)(),_=Object(n.useRef)(),O=Object(n.useRef)(),E=Object(n.useRef)(!1),S=s(Object(n.useReducer)((function(e){return e+1}),0),2)[1];Object(n.useEffect)((function(){var e=u()((function(){E.current=!1,S()}),150),t=i()((function(){c&&(E.current=!0,e());var t=O.current,n=p(w,r),o=_.current;if(t&&n&&o){var a=t.getBoundingClientRect(),i=a.top,u=void 0===i?0:i,l=a.left,s=void 0===l?0:l,f=u>=0?0:-u,m=d(n,"x",r)-s;h?o.scrollTo({scrollLeft:m,scrollTop:f}):o.scrollTo(f)}}),10),n=p(w,r);return null==n||n.addEventListener("scroll",t),function(){null==n||n.removeEventListener("scroll",t),t.cancel(),e.cancel()}}),[S,h,r,c]);var x=function(e){if(e.scrollUpdateWasRequested){var t=O.current;if(t){var n=p(w,r);if(h){var o=e.scrollLeft,a=e.scrollTop;if(o>0||a>0){var i=d(n,"x",r),c=d(n,"y",r),u=t.getBoundingClientRect(),l=u.top,s=void 0===l?0:l,f=u.left,m={top:s,left:void 0===f?0:f},v=m.top>0?m.top+a:c,y=m.left>0?m.left+i:i;v===c&&y===i||n.scrollTo(y,v)}}else{var b=e.scrollOffset;if(b>0){var g=d(n,"y",r),_=t.getBoundingClientRect(),E=_.top,S=void 0===E?0:E,x=_.left,j={top:S,left:void 0===x?0:x},k=j.top>0?j.top+b:g;g!==k&&n.scrollTo(0,k)}}}}};return o.a.createElement(l.Provider,{value:{virtualComponentRef:_,virtualContainerRef:O,onScroll:x,virtualWidth:v,virtualHeight:y,virtualContainerStyle:b,isScrollingRef:E}},r?g({virtualComponentRef:_,virtualContainerRef:O,onScroll:x,virtualWidth:v,virtualHeight:y,virtualContainerStyle:b,isScrollingRef:E}):o.a.createElement("div",{ref:w,style:m},g({virtualComponentRef:_,virtualContainerRef:O,onScroll:x,virtualWidth:v,virtualHeight:y,virtualContainerStyle:b,isScrollingRef:E})))}},3230:function(e,t,r){"use strict";(function(e){var n=r(0),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=void 0;l="undefined"!=typeof window?window:"undefined"!=typeof self?self:e;var s=null,f=null,d=l.clearTimeout,p=l.setTimeout,h=l.cancelAnimationFrame||l.mozCancelAnimationFrame||l.webkitCancelAnimationFrame,m=l.requestAnimationFrame||l.mozRequestAnimationFrame||l.webkitRequestAnimationFrame;function v(e){var t=void 0,r=void 0,n=void 0,o=void 0,a=void 0,i=void 0,c=void 0,u="undefined"!=typeof document&&document.attachEvent;if(!u){i=function(e){var t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,o=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,o.style.width=r.offsetWidth+1+"px",o.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},a=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},c=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;i(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=f((function(){a(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(r){r.call(t,e)})))}))}};var d=!1,p="";n="animationstart";var h="Webkit Moz O ms".split(" "),m="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),v=document.createElement("fakeelement");if(void 0!==v.style.animationName&&(d=!0),!1===d)for(var y=0;y<h.length;y++)if(void 0!==v.style[h[y]+"AnimationName"]){p="-"+h[y].toLowerCase()+"-",n=m[y],d=!0;break}t="@"+p+"keyframes "+(r="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",o=p+"animation: 1ms "+r+"; "}return{addResizeListener:function(a,s){if(u)a.attachEvent("onresize",s);else{if(!a.__resizeTriggers__){var f=a.ownerDocument,d=l.getComputedStyle(a);d&&"static"===d.position&&(a.style.position="relative"),function(r){if(!r.getElementById("detectElementResize")){var n=(t||"")+".resize-triggers { "+(o||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',a=r.head||r.getElementsByTagName("head")[0],i=r.createElement("style");i.id="detectElementResize",i.type="text/css",null!=e&&i.setAttribute("nonce",e),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(r.createTextNode(n)),a.appendChild(i)}}(f),a.__resizeLast__={},a.__resizeListeners__=[],(a.__resizeTriggers__=f.createElement("div")).className="resize-triggers";var p=f.createElement("div");p.className="expand-trigger",p.appendChild(f.createElement("div"));var h=f.createElement("div");h.className="contract-trigger",a.__resizeTriggers__.appendChild(p),a.__resizeTriggers__.appendChild(h),a.appendChild(a.__resizeTriggers__),i(a),a.addEventListener("scroll",c,!0),n&&(a.__resizeTriggers__.__animationListener__=function(e){e.animationName===r&&i(a)},a.__resizeTriggers__.addEventListener(n,a.__resizeTriggers__.__animationListener__))}a.__resizeListeners__.push(s)}},removeResizeListener:function(e,t){if(u)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",c,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(n,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}null==h||null==m?(s=d,f=function(e){return p(e,20)}):(s=function(e){var t=u(e,2),r=t[0],n=t[1];h(r),d(n)},f=function(e){var t=m((function(){d(r),e()})),r=p((function(){h(t),e()}),20);return[t,r]});var y=function(e){function t(){var e,r,n;o(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return r=n=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={height:n.props.defaultHeight||0,width:n.props.defaultWidth||0},n._onResize=function(){var e=n.props,t=e.disableHeight,r=e.disableWidth,o=e.onResize;if(n._parentNode){var a=n._parentNode.offsetHeight||0,i=n._parentNode.offsetWidth||0,c=window.getComputedStyle(n._parentNode)||{},u=parseInt(c.paddingLeft,10)||0,l=parseInt(c.paddingRight,10)||0,s=parseInt(c.paddingTop,10)||0,f=parseInt(c.paddingBottom,10)||0,d=a-s-f,p=i-u-l;(!t&&n.state.height!==d||!r&&n.state.width!==p)&&(n.setState({height:a-s-f,width:i-u-l}),o({height:a,width:i}))}},n._setRef=function(e){n._autoSizer=e},c(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=v(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.className,o=e.disableHeight,a=e.disableWidth,c=e.style,u=this.state,l=u.height,s=u.width,f={overflow:"visible"},d={},p=!1;return o||(0===l&&(p=!0),f.height=0,d.height=l),a||(0===s&&(p=!0),f.width=0,d.width=s),Object(n.createElement)("div",{className:r,ref:this._setRef,style:i({},f,c)},!p&&t(d))}}]),t}(n.PureComponent);y.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}},t.a=y}).call(this,r(135))},3233:function(e,t,r){"use strict";r.d(t,"a",(function(){return $e})),r.d(t,"d",(function(){return ht})),r.d(t,"c",(function(){return De})),r.d(t,"b",(function(){return ze}));var n=r(0),o=r.n(n),a=r(36),i=r.n(a),c=r(3230),u=r(1085),l=r(3175),s=r(3256);function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=function(e,t){return e===t||e.length===t.length&&e.every((function(e,r){return e===t[r]}))},h=function(e,t){return p(m(e),m(t))},m=function(e){return e.slice(0,e.length-1)},v=function(e,t){return p(e,m(t))},y=function(e){return e[e.length-1]},b=function(e,t){return e.slice(0,t)},g=function(e,t){var r=f(e);return w(r,t)||(r[r.length-1]+=1),r},w=function(e,t){return h(e,t)&&y(e)>y(t)};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.items[e.rootId]?e.items[e.rootId].children.reduce((function(r,n,o){var a=e.items[n],i=[].concat(S(t),[o]),c=P(a,i),u=C(e,a,i);return[].concat(S(r),[c],S(u))}),[]):[]};function P(e,t){return{item:e,path:t}}function C(e,t,r){return t.isExpanded?k({rootId:t.id,items:e.items},r):[]}var T=function(e,t,r){var n=e.items[t];return n?{rootId:e.rootId,items:O(O({},e.items),{},E({},t,O(O({},n),r)))}:e},L=function(e,t){var r,n=e.items[e.rootId],o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=x(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;n=e.items[n.children[a]]}}catch(e){o.e(e)}finally{o.f()}return n},A=function(e,t){var r=function(e,t){var r=m(t);return L(e,r)}(e,t),n=y(t);return{parentId:r.id,index:n}},I=function(e,t,r){var n=function(e,t){var r=e.items[t.parentId],n=S(r.children),o=n.splice(t.index,1)[0];return{tree:T(e,t.parentId,{children:n,hasChildren:n.length>0,isExpanded:n.length>0&&r.isExpanded}),itemRemoved:o}}(e,t);return function(e,t,r){var n=e.items[t.parentId],o=S(n.children);return void 0===t.index?(function(e){return!!e.hasChildren&&e.children.length>0}(n)||function(e){return!e.hasChildren}(n))&&o.push(r):o.splice(t.index,0,r),T(e,t.parentId,{children:o,hasChildren:!0})}(n.tree,r,n.itemRemoved)},N=function(){},D=function(e,t,r){return Math.min(t,Math.max(e,r))},R=function(e,t){return e[t].path},M=function(e,t,r,n){var o,a,i=r>t,c=R(e,t),u=r===t,l=i?e[r].path:e[r-1]&&e[r-1].path,s=i||u?e[r+1]&&e[r+1].path:e[r].path;if(u){var f=c.length-1,d=f+n+1<=0?1:f+n+1;if(!l)return c;var p=s?s.length:1,m=Math.max(c.length,l.length),y=D(p,m,d);if(y===c.length)return c;var w=b(l,y);return g(w,c)}if(s&&(o=s,!(a=l)||v(a,o)))return s;if(l&&s&&h(l,s))return i&&h(l,c)?l:s;if(l){var _=i?l.length+n:s.length+n,O=s?s.length:1,E=D(O,l.length,_),S=b(l,E);return g(S,c)}return c},F=function(e,t){return e.find((function(e){return e.item.id===t}))};function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var U=function(e,t,r){var n=r.source,o=r.destination,a=r.combine,i=r.placeholderIndicatorProps,c=R(t,n.index),u=A(e,c);if(a)return{sourcePosition:u,destinationPosition:{parentId:a.draggableId}};if(!o)return{sourcePosition:u,destinationPosition:void 0};var l=M(t,n.index,o.index,i?i.dragOffset:0),s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},A(e,l));return{sourcePosition:u,destinationPosition:s}};function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){H(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=J(e);if(t){var o=J(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Z(this,r)}}function Z(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(a,e);var t,r,n,o=$(a);function a(){var e;q(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).patchDraggableProps=function(t,r){var n=t.style&&t.style.transition?[t.style.transition]:[];r.dropAnimation;var o=n.join(", ");return V(V({},t),{},{style:V(V(V({},t.style),e.props.style),{},{transition:o})})},e}return t=a,(r=[{key:"shouldComponentUpdate",value:function(e){return t=this.props,r=e,!(void 0===["item","provided","snapshot","onCollapse","onExpand","destination","placeholderIndicatorProps","placeholderDraggableId"].find((function(e){return t[e]!==r[e]}))&&p(this.props.path,e.path)&&null!==this.props.provided.dragHandleProps);var t,r}},{key:"render",value:function(){var e=this.props,t=e.item,r=e.path,n=e.onExpand,o=e.onCollapse,a=e.renderItem,i=e.provided,c=e.snapshot,u=e.placeholderDraggableId,l=e.placeholderIndicatorProps,s=e.offsetPerLevel,f={draggableProps:this.patchDraggableProps(i.draggableProps,c),dragHandleProps:i.dragHandleProps,innerRef:function(e){i.innerRef(e)}};return a({item:t,path:r,depth:r.length-1,onExpand:function(e){return n(e,r)},onCollapse:function(e){return o(e,r)},offsetPerLevel:s,provided:f,snapshot:c,placeholderDraggableId:u,placeholderIndicatorProps:l})}}])&&K(t.prototype,r),n&&K(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.Component);function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.delay=void 0,this.timeoutId=void 0,this.fn=void 0,this.delay=t}var t,r,n;return t=e,(r=[{key:"start",value:function(e){this.stop(),this.timeoutId=window.setTimeout(e,this.delay)}},{key:"stop",value:function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}}])&&Q(t.prototype,r),n&&Q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}var re=["style","children"];function ne(){ne=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,o){var a=new RegExp(e,n);return t.set(a,o||t.get(e)),ce(a,r.prototype)}function n(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){var o=n[r];if("number"==typeof o)t[r]=e[o];else{for(var a=0;void 0===e[o[a]]&&a+1<o.length;)a++;t[r]=e[o[a]]}return t}),Object.create(null))}return ie(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);return r&&(r.groups=n(r,this)),r},r.prototype[Symbol.replace]=function(r,o){if("string"==typeof o){var a=t.get(this);return e[Symbol.replace].call(this,r,o.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+a[t]})))}if("function"==typeof o){var i=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=te(e[e.length-1])&&(e=[].slice.call(e)).push(n(e,i)),o.apply(this,e)}))}return e[Symbol.replace].call(this,r,o)},ne.apply(this,arguments)}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}function ce(e,t){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ce(e,t)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=se(e);if(t){var o=se(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return le(this,r)}}function le(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function he(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var me=o.a.createContext({collapseHeight:0}),ve=Object(n.forwardRef)((function(e,t){var r=e.style,a=e.children,i=he(e,re),c=Object(n.useContext)(me).collapseHeight;return o.a.createElement("div",de({ref:t,style:de(de({},r),{},{height:"".concat(parseFloat(r.height)+c,"px")})},i),a)})),ye=o.a.memo((function(e){var t=e.data,r=e.index,n=e.style,a=t.isDragEnabled,i=t.listData[r];if(!i)return null;var c=function(e){var r=e.item,a=e.path,i=e.provided,c=e.snapshot,u=t.renderItem,l=t.onExpand,s=t.onCollapse,f=t.offsetPerLevel,d=t.placeholderDraggableId,p=t.placeholderIndicatorProps;return o.a.createElement(X,{key:r.item.id,item:r.item,path:a,onExpand:l,onCollapse:s,renderItem:u,provided:i,snapshot:c,offsetPerLevel:f,style:n,placeholderDraggableId:d,placeholderIndicatorProps:p})};if(!1===a)return c({item:i,path:i.path,provided:{draggableProps:{"data-rbd-draggable-context-id":"","data-rbd-draggable-id":""},innerRef:function(){},dragHandleProps:null},snapshot:{isDragging:!1,isDropAnimating:!1}});var u,s="function"==typeof a?!a(i.item):!a;return o.a.createElement(l.b,{key:i.item.id,draggableId:i.item.id.toString(),index:r,isDragDisabled:s},(u=i,function(e,r){var n=i.path;return r.isDropAnimating&&t.onDropAnimating(),c({item:u,path:n,provided:e,snapshot:r})}))}),s.c);ye.displayName="Row",ye.type.displayName="RowMemo";var be=Object(u.a)((function(e,t){return function(e,t,r){return t.reduce((function(t,n){var o=e.items[n];return o?(t.items[n]=O(O({},o),r),t):t}),{rootId:e.rootId,items:O({},e.items)})}(e,t,{isExpanded:!0})})),ge=Object(u.a)((function(e,t){return t&&e.items[t].isExpanded?T(e,t,{isExpanded:!1}):e})),we=Object(u.a)(k),_e=function(e){ie(i,e);var t,r,n,a=ue(i);function i(){var e;oe(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).state={flattenedTree:[],draggedItemId:void 0,placeholderIndicatorProps:void 0,placeholderDraggableId:void 0,collapseHeight:0},e.dragState=void 0,e.virtualListRef=o.a.createRef(),e.expandTimer=new ee(500),e.onDragStart=function(t){var r=e.props.onDragStart;e.dragState={source:t.source,destination:t.source,mode:t.mode,cloneMove:{x:0,y:0}};var n=e.state.flattenedTree[e.dragState.destination.index-1];e.setState({draggedItemId:t.draggableId}),e.dragState=de(de({},e.dragState),{},{placeholderDraggableId:n?n.item.id:void 0}),r&&r(t.draggableId)},e.onDragUpdate=function(t){if(e.dragState&&(0!==e.dragState.cloneMove.x||0!==e.dragState.cloneMove.y)){var r=e.state.flattenedTree;if(t.destination){var n=r[t.destination.index>t.source.index?t.destination.index:t.destination.index-1];e.dragState=de(de({},e.dragState),{},{placeholderDraggableId:n?n.item.id:void 0})}if(e.expandTimer.stop(),t.combine){var o=t.combine.draggableId,a=F(r,o);a&&e.isExpandable(a)}e.dragState=de(de({},e.dragState),{},{destination:t.destination,combine:t.combine})}},e.onDropAnimating=function(){e.expandTimer.stop()},e.onDragEnd=function(t){var r=e.props,n=r.onDragEnd,o=r.tree,a=e.state.flattenedTree;e.expandTimer.stop();var i=de(de({},e.dragState),{},{source:t.source,destination:t.destination,combine:t.combine});e.setState({draggedItemId:void 0,collapseHeight:0,placeholderIndicatorProps:void 0});var c=U(o,a,i);n(c.sourcePosition,c.destinationPosition),e.dragState=void 0},e.getDroppedLevelOffset=function(t){var r=e.props.offsetPerLevel,n=Math.abs(t);if(!e.dragState||0===t)return 0;var o=Math.floor((n+r/2)/r);return t>0?o:t<0?-o:void 0},e.isExpandable=function(e){return!!e.item.hasChildren&&!e.item.isExpanded},e.patchDroppableProvided=function(e){return de(de({},e),{},{innerRef:function(t){e.innerRef(t)}})},e.renderItem=function(t,r,n){var a=e.props.isDragEnabled;if(!1===a)return e.renderTreeItem({flatItem:t,path:t.path,provided:{draggableProps:{"data-rbd-draggable-context-id":"","data-rbd-draggable-id":""},innerRef:function(){},dragHandleProps:null},snapshot:{isDragging:!1,isDropAnimating:!1},style:n});var i="function"==typeof a?!a(t.item):!a;return o.a.createElement(l.b,{key:t.item.id,draggableId:t.item.id.toString(),index:r,isDragDisabled:i},e.renderDraggableItem(t,n))},e.renderDraggableItem=function(t,r){return function(n,o){var a=t.path;return o.isDropAnimating&&e.onDropAnimating(),e.renderTreeItem({flatItem:t,path:a,provided:n,snapshot:o,style:r})}},e.renderTreeItem=function(t){var r=t.flatItem,n=t.path,a=t.provided,i=t.snapshot,c=t.style,u=e.props,l=u.renderItem,s=u.onExpand,f=u.onCollapse,d=u.offsetPerLevel;return o.a.createElement(X,{key:r.item.id,item:r.item,path:n,onExpand:s,onCollapse:f,renderItem:l,provided:a,snapshot:i,offsetPerLevel:d,style:c})},e.sensor=null,e.scrollableElement=null,e.scrollToItem=function(t,r){var n=e.state.flattenedTree.findIndex((function(e){return e.item.id===t}));if("center"===r){var o=n<3?0:n-3;e.virtualListRef.current.scrollToItem(o,"start")}else e.virtualListRef.current.scrollToItem(n,r)},e}return t=i,n=[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.draggedItemId,n=e.tree,o=be(n,e.expandedKeys),a=ge(o,r),i=we(a),c=r&&i.length-t.flattenedTree.length<0?t.flattenedTree.length-i.length:0;return de(de({},t),{},{flattenedTree:i,collapseHeight:c*e.itemSize})}}],(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.isDragEnabled,n=t.renderItem,a=t.onExpand,i=t.onCollapse,c=t.offsetPerLevel,u=t.isNestingEnabled,f=t.outerElementType,d=t.onScroll,p=t.virtualListStyle,h=t.virtualHeight,m=t.virtualWidth,v=t.itemSize,y=this.state,b=y.flattenedTree,g=y.placeholderIndicatorProps,w=y.placeholderDraggableId;return o.a.createElement(l.a,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDragUpdate:this.onDragUpdate,enableDefaultSensors:!1,sensors:[l.d,l.e,function(t){e.sensor=t}]},o.a.createElement(l.c,{droppableId:"tree",isCombineEnabled:u,ignoreContainerClipping:!0,mode:"virtual",renderClone:function(t,r,n){if(r.isDragging&&!r.isDropAnimating){var o=t.draggableProps.style.transform?t.draggableProps.style.transform.match(ne(/\(((.+)px, (.+)px)\)/,{cloneMoveX:2,cloneMoveY:3})).groups:{cloneMoveX:0,cloneMoveY:0},a=o.cloneMoveX,i=o.cloneMoveY;a=Number(a);var c=e.state.flattenedTree.find((function(e){return e.item.id===n.draggableId})).path.length-1,u=e.getDroppedLevelOffset(a);i=Number(i),e.dragState&&(e.dragState=de(de({},e.dragState),{},{cloneMove:{x:a,y:i},placeholderIndicatorProps:{dragOffset:u,currentDepth:c}}))}return e.props.renderClone(t,r,n,b,e.dragState)}},(function(t){return o.a.createElement(me.Provider,{value:{collapseHeight:e.state.collapseHeight}},o.a.createElement(s.b,{ref:e.virtualListRef,className:"lark-virtual-tree",style:p,width:m,height:h,itemCount:b.length,itemSize:v,outerRef:function(r){t.innerRef(r),e.scrollableElement=r},itemData:{listData:b,onDropAnimating:e.onDropAnimating,isDragEnabled:r,renderItem:n,onExpand:a,onCollapse:i,offsetPerLevel:c,placeholderIndicatorProps:g,placeholderDraggableId:w},innerElementType:ve,outerElementType:f,onScroll:d},ye))})))}}])&&ae(t.prototype,r),n&&ae(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.Component);_e.defaultProps={tree:{children:[]},onExpand:N,onCollapse:N,onDragStart:N,onDragEnd:N,renderItem:N,offsetPerLevel:20,isDragEnabled:!1,isNestingEnabled:!1,expandedKeys:[]};var Oe=r(3221),Ee="indicatorWrapper-module_IndicatorWrapper_RIDo1",Se="indicatorWrapper-module_PrefixOffsetIndent_2zOMI",xe="indicatorWrapper-module_Indicator_+EmfH",je="indicatorWrapper-module_IndicatorLine_wUn2a";function ke(e){var t=new Array(e.prefixOffsetDepth<0?0:e.prefixOffsetDepth).fill(null).map((function(t,r){return{style:{left:(r+1)*-e.offsetPerLevel},id:r+1}}));return o.a.createElement("div",{className:Ee,style:e.style},t.map((function(e){return o.a.createElement("div",{className:Se,key:e.id,style:e.style})})),o.a.createElement("div",{className:xe},o.a.createElement("div",{className:je})))}var Pe=r(485),Ce=r(396);function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function Le(e){return function(e){if(Array.isArray(e))return Ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){if(e){if("string"==typeof e)return Ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ie(e,t):void 0}}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ne(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Te(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Te(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(){}function Re(e,t,r){return e.forEach((function(e){var n,o=(null===(n=e.children)||void 0===n?void 0:n.map((function(e){return e.uuid})))||[];t[e.uuid]={id:e.uuid,parentId:r,children:o,hasChildren:!!o.length,isExpanded:!1,data:e},e.children&&Re(e.children,t,e.uuid)})),t}var Me="VIRTUAL_ROOT";function Fe(e){var t=Object(Pe.generateTreeByTocItems)(e),r={id:Me,children:t.map((function(e){return e.uuid})),hasChildren:!!t.length,isExpanded:!1,isChildrenLoading:!1,data:{},parentId:Me},n=Ne({},Me,r);return Re(t,n,Me),{rootId:Me,items:n}}function Ge(e,t){var r=e.items[t];if(!r)return[];for(var n=[];r.parentId!==Me;)n.push(r.parentId),r=e.items[r.parentId];return n}function Be(e,t){var r=[];if(t){!function t(n){if(n){var o=function(t){return e.find((function(e){return e.uuid===t.parent_uuid}))}(n);o&&(r.push(o.uuid),o.level>0&&t(o))}}(e.find((function(e){return e.uuid===t})))}return r}function Ue(e,t,r){var n,o="all"===(n=t)?1/0:n?parseInt(n,10)+1:Ce.DEFAULT_DISPLAY_LEVEL;if(o===1/0)return e.map((function(e){return e.uuid}));var a,i,c=[],u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ae(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(e);try{for(u.s();!(a=u.n()).done;){var l=a.value;l.level<o-1&&c.push(l.uuid)}}catch(e){u.e(e)}finally{u.f()}r&&r.length&&((i=c).push.apply(i,Le(r)),c=r.reduce((function(t,r){var n=Be(e,r);return t.push.apply(t,Le(n)),t}),c));return Le(new Set(c))}var ze=function(e,t,r){var n;if(null!==(n=window.appData)&&void 0!==n&&n.sharePage){var o,a,i,c=(null===(o=window.appData)||void 0===o||null===(a=o.share)||void 0===a?void 0:a.token)||(null===(i=t.share)||void 0===i?void 0:i.token);return"/books/share/".concat(c,"/").concat(r)}return"/".concat(e.login,"/").concat(t.slug,"/").concat(r)};function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==We(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==We(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===We(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $e=Object(n.forwardRef)((function(e,t){var r=e.tree,a=e.expandedKeys,u=e.isDragEnabled,l=e.onDragStart,s=e.onDragEnd,f=e.renderItem,d=e.bottomNode,p=e.itemSize,h=e.getIndicatorWrapperLeft,m=e.offsetPerLevel,v=Object(n.useContext)(Oe.a),y=Object(n.useRef)(null),b=Object(n.useRef)(0),g=Ke(Object(n.useState)(null),2),w=g[0],_=g[1];function O(e){var t=e.virtualWidth,n=e.virtualHeight,c=e.virtualContainerStyle,d=e.isScrollingRef;return o.a.createElement(o.a.Fragment,null,o.a.createElement(_e,{ref:function(e){if(y.current=e,v){var t,r,n=v.virtualComponentRef,o=v.virtualContainerRef;n.current=null===(t=y.current)||void 0===t?void 0:t.virtualListRef.current,o.current=null===(r=y.current)||void 0===r?void 0:r.scrollableElement}},tree:r,virtualListStyle:c,virtualWidth:t,virtualHeight:n,isNestingEnabled:!0,isDragEnabled:u,expandedKeys:a,itemSize:p,offsetPerLevel:m,renderItem:function(e){var t=He(He({},e),{},{isClone:!1,isScrolling:(null==d?void 0:d.current)||void 0});return f(t)},renderClone:function(e,r,n,a,c){var u=a.find((function(e){return e.item.id===n.draggableId})),l=u.item,s=u.path.length-1,d=null;if(r.isDragging&&!r.isDropAnimating&&!r.combineWith&&r.draggingOver&&c&&c.destination){var p,v=c.placeholderDraggableId,y=c.destination,g=c.source,w=a[y.index],_=document.querySelector('[data-rbd-drag-handle-draggable-id="'.concat(v,'"]'));if(!w)return null;var O=w.path.length-1,E=a[y.index-1],S=E?E.path.length-1:0,x=a[y.index+1],j=x?x.path.length-1:0,k=M(a,g.index,y.index,(null==c||null===(p=c.placeholderIndicatorProps)||void 0===p?void 0:p.dragOffset)||0),P=M(a,g.index,y.index,-Math.max(O,j,S)).length-1,C=k.length-w.path.length,T=h?h(O+C):0,L=t-T;b.current=(k.length-u.path.length)*m;var A=O+C-P;d=o.a.createElement(ke,{style:{left:T,width:L},prefixOffsetDepth:A,offsetPerLevel:m}),d=_?i.a.createPortal(d,_):null}var I=e.draggableProps.style;if(r.isDropAnimating&&r.dropAnimation){var N=r.dropAnimation.moveTo,D="translate(".concat(b.current||N.x,"px, ").concat(N.y,"px)");b.current=0,I=He(He({},I),{},{transform:"".concat(D)})}e.draggableProps.style=I;var R={provided:e,snapshot:r,isClone:!0,item:l,depth:s,path:[],offsetPerLevel:m,onCollapse:De,onExpand:De};return o.a.createElement(o.a.Fragment,null,f(R),d)},onDragEnd:s,onDragStart:l}),w)}return Object(n.useImperativeHandle)(t,(function(){return{scrollToItem:function(e,t){var r;null===(r=y.current)||void 0===r||r.scrollToItem(e,t)}}})),Object(n.useEffect)((function(){u&&setTimeout((function(){var e,t=null!==(e=y.current)&&void 0!==e&&e.scrollableElement?i.a.createPortal(d,y.current.scrollableElement):null;_(t)}))}),[]),v?O({virtualWidth:v.virtualWidth,virtualHeight:v.virtualHeight,virtualContainerStyle:v.virtualContainerStyle,isScrollingRef:v.isScrollingRef}):o.a.createElement(c.a,null,(function(e){var t=e.height;return O({virtualWidth:e.width,virtualHeight:t})}))})),Ze=r(2965),Je=r(2263);function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Qe(){Qe=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Xe(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function et(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function tt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){et(a,n,o,i,c,"next",e)}function c(e){et(a,n,o,i,c,"throw",e)}i(void 0)}))}}var rt=function(){var e=tt(Qe().mark((function e(t,r,n){return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Je.a.updateNode(t,{node_uuid:r,action:Ce.ACTIONS.moveAfter,target_uuid:n},{catalog_tree:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),nt=function(){var e=tt(Qe().mark((function e(t,r,n){return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Je.a.updateNode(t,{node_uuid:r,action:Ce.ACTIONS.prependChild,target_uuid:n},{catalog_tree:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function at(){at=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==ot(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function it(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function ct(e){return function(e){if(Array.isArray(e))return pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){st(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function st(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ot(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ot(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||dt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){if(e){if("string"==typeof e)return pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pt(e,t):void 0}}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ht(e){var t=e.book,r=e.currentDocSlug,o=ft(Object(n.useState)(Fe([])),2),a=o[0],i=o[1],c=Object(n.useRef)(null),u=Object(n.useMemo)((function(){var e=t.toc.find((function(e){return e.url===r}));return null==e?void 0:e.uuid}),[t.toc,r]),l=ft(Object(n.useState)(Ue(t.toc,t.catalog_display_level,u?[u]:[])),2),s=l[0],f=l[1],d=Object(Ze.a)(u),p=Object(Ze.a)(t.catalog_display_level),h=Object(n.useCallback)((function(e){return a.items[e]}),[a]),m=Object(n.useCallback)((function(e,t){var r=a.items[e];i(T(a,e,{data:lt(lt({},r.data),t)}))}),[a]),v=Object(n.useCallback)((function(e){var t=a.items[e],r=a.items[a.items[e].parentId],n=T(a,t.parentId,lt(lt({},r),{},{children:r.children.filter((function(t){return t!==e}))}));delete n[e],i(n)}),[a]),y=Object(n.useCallback)((function(e,t){if(!(e.parentId===t.parentId&&e.index===t.index)){t.index=void 0===t.index?0:t.index;var r=I(a,e,t);i(r),f(ct(new Set([].concat(ct(s),[t.parentId],ct(Ge(a,t.parentId))))))}}),[a,s]),b=Object(n.useCallback)((function(e){f(ct(new Set([].concat(ct(s),[e]))))}),[s]),g=Object(n.useCallback)((function(e){a.items[e].hasChildren&&f(ct(new Set([].concat(ct(s),[e]))))}),[a,s]),w=Object(n.useCallback)((function(e){a.items[e].hasChildren&&f(ct(new Set(s.filter((function(t){return t!==e})))))}),[a,s]),_=Object(n.useCallback)((function(e){s.includes(e)?w(e):g(e)}),[s,w,g]),O=Object(n.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";f(ct(new Set([].concat(ct(s),ct(Ge(a,e))))));var r=setTimeout((function(){var n;null===(n=c.current)||void 0===n||n.scrollToItem(e,t),clearTimeout(r)}))}),[a,s]),E=Object(n.useCallback)((function(){var e=t.toc.find((function(e){return e.url===r}));e&&O(e.uuid,"center")}),[r,t.toc]),S=Object(n.useCallback)((function(){if(t.toc.length>0){var e=t.toc[0];O(e.uuid,"start")}}),[t.toc]),x=Object(n.useCallback)((function(){f([])}),[]),j=Object(n.useCallback)((function(){var e=Ue(t.toc,"all",u?[u]:[]);f(e)}),[t.toc,u]),k=Object(n.useCallback)(function(){var e,r=(e=at().mark((function e(r,n){var o,a,i,c,u,l,s,f,d;return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&(!n||n.parentId!==r.parentId||n.index!==r.index)){e.next=2;break}return e.abrupt("return");case 2:if(y(r,n),o=h(r.parentId).children[r.index],a=h(o),i=h(n.parentId),c=i.children.filter((function(e){return e!==a.data.uuid})),u=c[n.index-1],l=h(u),e.prev=9,s=[],!l){e.next=18;break}return e.next=14,rt(t,a.data.uuid,l.data.uuid);case 14:f=e.sent,s=f.toc,e.next=23;break;case 18:if(!i){e.next=23;break}return e.next=21,nt(t,a.data.uuid,i.data.uuid);case 21:d=e.sent,s=d.toc;case 23:return e.abrupt("return",s);case 26:throw e.prev=26,e.t0=e.catch(9),n.index=n.index||0,y(n,r),e.t0;case 31:case"end":return e.stop()}}),e,null,[[9,26]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){it(a,n,o,i,c,"next",e)}function c(e){it(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),[h,y]);return Object(n.useEffect)((function(){var e=Fe(t.toc);i(e)}),[t.toc]),Object(n.useEffect)((function(){if(d&&u&&d!==u){var e=function(e,t,r){return r.reduce((function(t,r){var n=Be(e,r);return t.push.apply(t,Le(n)),t}),Le(t))}(t.toc,s,u?[u]:[]),r=ct(new Set([].concat(ct(s),ct(e))));f(r)}}),[s,t.toc,d,u]),Object(n.useEffect)((function(){if(p&&p!==t.catalog_display_level){var e=Ue(t.toc,t.catalog_display_level,[]);f(e)}}),[t.catalog_display_level,t.toc,u,s]),{tree:a,currentDocSlug:r,treeRef:c,expandedKeys:s,handleToggleCollapse:_,getTreeItem:h,updateTreeItem:m,deleteTreeItem:v,moveTreeItem:y,scrollToItem:O,scrollToCurrentItem:E,scrollToTop:S,addExpandedKey:b,foldAll:x,unFoldAll:j,handleInternalDragEnd:k}}},3237:function(e,t,r){"use strict";r.d(t,"a",(function(){return $}));r(103);var n=r(60),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(25),l=r(57),s="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function f(e,t,r,n){e.addEventListener?e.addEventListener(t,r,n):e.attachEvent&&e.attachEvent("on".concat(t),(function(){r(window.event)}))}function d(e,t){for(var r=t.slice(0,t.length-1),n=0;n<r.length;n++)r[n]=e[r[n].toLowerCase()];return r}function p(e){"string"!=typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),r=t.lastIndexOf("");r>=0;)t[r-1]+=",",t.splice(r,1),r=t.lastIndexOf("");return t}for(var h={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":s?173:189,"=":s?61:187,";":s?59:186,"'":222,"[":219,"]":221,"\\":220},m={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},v={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},y={16:!1,18:!1,17:!1,91:!1},b={},g=1;g<20;g++)h["f".concat(g)]=111+g;var w=[],_=!1,O="all",E=[],S=function(e){return h[e.toLowerCase()]||m[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function x(e){O=e||"all"}function j(){return O||"all"}var k=function(e){var t=e.key,r=e.scope,n=e.method,o=e.splitKey,a=void 0===o?"+":o;p(t).forEach((function(e){var t=e.split(a),o=t.length,i=t[o-1],c="*"===i?"*":S(i);if(b[c]){r||(r=j());var u=o>1?d(m,t):[];b[c]=b[c].filter((function(e){return!((!n||e.method===n)&&e.scope===r&&function(e,t){for(var r=e.length>=t.length?e:t,n=e.length>=t.length?t:e,o=!0,a=0;a<r.length;a++)-1===n.indexOf(r[a])&&(o=!1);return o}(e.mods,u))}))}}))};function P(e,t,r,n){var o;if(t.element===n&&(t.scope===r||"all"===t.scope)){for(var a in o=t.mods.length>0,y)Object.prototype.hasOwnProperty.call(y,a)&&(!y[a]&&t.mods.indexOf(+a)>-1||y[a]&&-1===t.mods.indexOf(+a))&&(o=!1);(0!==t.mods.length||y[16]||y[18]||y[17]||y[91])&&!o&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function C(e,t){var r=b["*"],n=e.keyCode||e.which||e.charCode;if(T.filter.call(this,e)){if(93!==n&&224!==n||(n=91),-1===w.indexOf(n)&&229!==n&&w.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var r=v[t];e[t]&&-1===w.indexOf(r)?w.push(r):!e[t]&&w.indexOf(r)>-1?w.splice(w.indexOf(r),1):"metaKey"===t&&e[t]&&3===w.length&&(e.ctrlKey||e.shiftKey||e.altKey||(w=w.slice(w.indexOf(r))))})),n in y){for(var o in y[n]=!0,m)m[o]===n&&(T[o]=!0);if(!r)return}for(var a in y)Object.prototype.hasOwnProperty.call(y,a)&&(y[a]=e[v[a]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===w.indexOf(17)&&w.push(17),-1===w.indexOf(18)&&w.push(18),y[17]=!0,y[18]=!0);var i=j();if(r)for(var c=0;c<r.length;c++)r[c].scope===i&&("keydown"===e.type&&r[c].keydown||"keyup"===e.type&&r[c].keyup)&&P(e,r[c],i,t);if(n in b)for(var u=0;u<b[n].length;u++)if(("keydown"===e.type&&b[n][u].keydown||"keyup"===e.type&&b[n][u].keyup)&&b[n][u].key){for(var l=b[n][u],s=l.splitKey,f=l.key.split(s),d=[],p=0;p<f.length;p++)d.push(S(f[p]));d.sort().join("")===w.sort().join("")&&P(e,l,i,t)}}}function T(e,t,r){w=[];var n=p(e),o=[],a="all",i=document,c=0,u=!1,l=!0,s="+",h=!1;for(void 0===r&&"function"==typeof t&&(r=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(a=t.scope),t.element&&(i=t.element),t.keyup&&(u=t.keyup),void 0!==t.keydown&&(l=t.keydown),void 0!==t.capture&&(h=t.capture),"string"==typeof t.splitKey&&(s=t.splitKey)),"string"==typeof t&&(a=t);c<n.length;c++)o=[],(e=n[c].split(s)).length>1&&(o=d(m,e)),(e="*"===(e=e[e.length-1])?"*":S(e))in b||(b[e]=[]),b[e].push({keyup:u,keydown:l,scope:a,mods:o,shortcut:n[c],method:r,key:n[c],splitKey:s,element:i});void 0!==i&&!function(e){return E.indexOf(e)>-1}(i)&&window&&(E.push(i),f(i,"keydown",(function(e){C(e,i)}),h),_||(_=!0,f(window,"focus",(function(){w=[]}),h)),f(i,"keyup",(function(e){C(e,i),function(e){var t=e.keyCode||e.which||e.charCode,r=w.indexOf(t);if(r>=0&&w.splice(r,1),e.key&&"meta"===e.key.toLowerCase()&&w.splice(0,w.length),93!==t&&224!==t||(t=91),t in y)for(var n in y[t]=!1,m)m[n]===t&&(T[n]=!1)}(e)}),h))}var L={setScope:x,getScope:j,deleteScope:function(e,t){var r,n;for(var o in e||(e=j()),b)if(Object.prototype.hasOwnProperty.call(b,o))for(r=b[o],n=0;n<r.length;)r[n].scope===e?r.splice(n,1):n++;j()===e&&x(t||"all")},getPressedKeyCodes:function(){return w.slice(0)},isPressed:function(e){return"string"==typeof e&&(e=S(e)),-1!==w.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,r=t.tagName,n=!0;return!t.isContentEditable&&("INPUT"!==r&&"TEXTAREA"!==r&&"SELECT"!==r||t.readOnly)||(n=!1),n},trigger:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(b).forEach((function(r){var n=b[r].find((function(r){return r.scope===t&&r.shortcut===e}));n&&n.method&&n.method()}))},unbind:function(e){if(void 0===e)Object.keys(b).forEach((function(e){return delete b[e]}));else if(Array.isArray(e))e.forEach((function(e){e.key&&k(e)}));else if("object"==typeof e)e.key&&k(e);else if("string"==typeof e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=r[0],a=r[1];"function"==typeof o&&(a=o,o=""),k({key:e,scope:o,method:a,splitKey:"+"})}},keyMap:h,modifier:m,modifierMap:v};for(var A in L)Object.prototype.hasOwnProperty.call(L,A)&&(T[A]=L[A]);if("undefined"!=typeof window){var I=window.hotkeys;T.noConflict=function(e){return e&&window.hotkeys===T&&(window.hotkeys=I),T},window.hotkeys=T}T.filter=function(){return!0};var N=function(e,t){var r=e.target,n=r&&r.tagName;return Boolean(n&&t&&t.includes(n))};function D(e,t,r,n){r instanceof Array&&(n=r,r=void 0);var a=r||{},i=a.enableOnTags,c=a.filter,u=a.keyup,l=a.keydown,s=a.filterPreventDefault,f=void 0===s||s,d=a.enabled,p=void 0===d||d,h=a.enableOnContentEditable,m=void 0!==h&&h,v=Object(o.useRef)(null),y=Object(o.useCallback)((function(e,r){var n,o;return c&&!c(e)?!f:!!(N(e,["INPUT","TEXTAREA","SELECT"])&&!N(e,i)||null!=(n=e.target)&&n.isContentEditable&&!m)||!!(null===v.current||document.activeElement===v.current||null!=(o=v.current)&&o.contains(document.activeElement))&&(t(e,r),!0)}),n?[v,i,c].concat(n):[v,i,c]);return Object(o.useEffect)((function(){if(p)return u&&!0!==l&&(r.keydown=!1),T(e,r||{},y),function(){return T.unbind(e,y)};T.unbind(e,y)}),[y,e,p]),v}T.isPressed;function R(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],a=t.slice(2);return D.apply(void 0,[n,function(){var e;null!==(e=document.activeElement)&&void 0!==e&&e.closest('[contenteditable="true"]')||o.apply(void 0,arguments)}].concat(R(a)))}var G=r(147),B=r(3123),U=r(30),z="index-module_present_RJR62",W="index-module_btn_nQfFi";function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var q={overlayClassName:"index-module_tooltip_-a6S+",placement:"bottom",title:a.a.createElement(a.a.Fragment,null,__("演示")+__("：")+__("P")),trigger:["hover"]};function K(e){var t=e.doc,r=e.onPresent;function o(e){e.preventDefault(),"Doc"===t.type&&"function"==typeof r&&r()}return F(u.ua.macos?"⌘+shift+p,p":"ctrl+shift+p,p",o),a.a.createElement(n.a,q,a.a.createElement("button",{type:"button","data-aspm-click":"d129827","data-testid":"present-btn",className:W,onClick:o},a.a.createElement(U.b,{name:"present",width:20,height:20})))}function Y(e){var t=e.doc,r=e.onPresent;function o(e){e.preventDefault(),"Doc"===t.type&&"function"==typeof r&&r()}return F(u.ua.macos?"⌘+shift+p,p":"ctrl+shift+p,p",o),a.a.createElement(n.a,q,a.a.createElement("button",{type:"button","data-aspm-click":"d129827","data-testid":"present-btn",className:W,onClick:o},a.a.createElement(U.b,{name:"present",width:20,height:20})))}K.propTypes={doc:c.a.object.isRequired,onPresent:c.a.func.isRequired},Y.propTypes=K.propTypes;var $=function(e){var t=e.doc,r=e.button,n=V(Object(o.useState)(!1),2),i=n[0],c=n[1],u=Object(o.useCallback)((function(){c(!1)}),[]),s=Object(o.useCallback)((function(){var e;c(!0),(e=document.body).requestFullScreen=e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen,e.requestFullScreen&&e.requestFullScreen()}),[]),f=Object(l.useLocation)().hash,d=a.a.useMemo((function(){return f.slice(1)}),[f]);return a.a.createElement("div",{className:z},a.a.createElement(r,{doc:t,onPresent:s}),i&&a.a.createElement(B.b,{headingId:d,doc:t,onCancel:u}))};$.propTypes={doc:c.a.object.isRequired,button:c.a.elementType.isRequired};var Z=function(e){var t=e.doc;return a.a.createElement(G.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement($,{doc:t,button:K})}},a.a.createElement($,{doc:t,button:Y}))};Z.propTypes={doc:c.a.object.isRequired},Z.displayName="ExposedPresentButton";t.b=Z},324:function(e,t,r){!function(t){var r,n={},o={16:!1,18:!1,17:!1,91:!1},a="all",i={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},c={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},u=function(e){return c[e]||e.toUpperCase().charCodeAt(0)},l=[];for(r=1;r<20;r++)c["f"+r]=111+r;function s(e,t){for(var r=e.length;r--;)if(e[r]===t)return r;return-1}function f(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var d={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function p(e){for(r in o)o[r]=e[d[r]]}function h(e,t,r){var o,a;o=v(e),void 0===r&&(r=t,t="all");for(var i=0;i<o.length;i++)a=[],(e=o[i].split("+")).length>1&&(a=y(e),e=[e[e.length-1]]),e=e[0],(e=u(e))in n||(n[e]=[]),n[e].push({shortcut:o[i],scope:t,method:r,key:o[i],mods:a})}for(r in i)h[r]=!1;function m(){return a||"all"}function v(e){var t;return""==(t=(e=e.replace(/\s/g,"")).split(","))[t.length-1]&&(t[t.length-2]+=","),t}function y(e){for(var t=e.slice(0,e.length-1),r=0;r<t.length;r++)t[r]=i[t[r]];return t}function b(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){r(window.event)}))}b(document,"keydown",(function(e){!function(e){var t,r,a,c,u,f;if(t=e.keyCode,-1==s(l,t)&&l.push(t),93!=t&&224!=t||(t=91),t in o)for(a in o[t]=!0,i)i[a]==t&&(h[a]=!0);else if(p(e),h.filter.call(this,e)&&t in n)for(f=m(),c=0;c<n[t].length;c++)if((r=n[t][c]).scope==f||"all"==r.scope){for(a in u=r.mods.length>0,o)(!o[a]&&s(r.mods,+a)>-1||o[a]&&-1==s(r.mods,+a))&&(u=!1);(0!=r.mods.length||o[16]||o[18]||o[17]||o[91])&&!u||!1===r.method(e,r)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)})),b(document,"keyup",(function(e){var t,r=e.keyCode,n=s(l,r);if(n>=0&&l.splice(n,1),93!=r&&224!=r||(r=91),r in o)for(t in o[r]=!1,i)i[t]==r&&(h[t]=!1)})),b(window,"focus",(function(){for(r in o)o[r]=!1;for(r in i)h[r]=!1}));var g=t.key;t.key=h,t.key.setScope=function(e){a=e||"all"},t.key.getScope=m,t.key.deleteScope=function(e){var t,r,o;for(t in n)for(r=n[t],o=0;o<r.length;)r[o].scope===e?r.splice(o,1):o++},t.key.filter=function(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)},t.key.isPressed=function(e){return"string"==typeof e&&(e=u(e)),-1!=s(l,e)},t.key.getPressedKeyCodes=function(){return l.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=g,e},t.key.unbind=function(e,t){var r,o,a,i,c,l=[];for(r=v(e),i=0;i<r.length;i++){if((o=r[i].split("+")).length>1&&(l=y(o),e=o[o.length-1]),e=u(e),void 0===t&&(t=m()),!n[e])return;for(a=0;a<n[e].length;a++)(c=n[e][a]).scope===t&&f(c.mods,l)&&(n[e][a]={})}},e.exports=h}(this)},3242:function(e,t,r){"use strict";r(92);var n=r(45),o=r(0),a=r.n(o),i=r(151),c=r(46),u=r(452),l=r(1856),s="BookStatisticsLimit-module_wrapper_CrRJ2",f="BookStatisticsLimit-module_content_akwox",d="BookStatisticsLimit-module_title_ejahI",p="BookStatisticsLimit-module_desc_c-ita",h="BookStatisticsLimit-module_img_Thh7u";function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(){v=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var y={};u(y,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(P([])));g&&g!==t&&r.call(g,a)&&(y=g);var w=h.prototype=d.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==m(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(w,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function y(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}t.a={hasAbility:function(){return Object(l.getInterest)().interests[u.INTEREST_CODE.book_statistics]},showMemberIntro:function(){var e,t,r,o,u,l,m=null===(e=window)||void 0===e?void 0:e.appData,b=m.organization,g=m.group,w=m.me,_=null==b?void 0:b.id,O=null==b||null===(t=b.abilities)||void 0===t?void 0:t.destroy,E={collab:{title:__("联系知识库所有者")+__("开通会员可享知识库统计功能"),desc:__("联系知识库所有者")+__("开通会员可查看知识库的详细统计，如文档数、点赞数、知识库各文档的阅读点赞数等。"),btnText:__("知道了"),btnAction:function(){}},member:{title:__("开通会员可享知识库统计功能"),desc:__("开通会员可查看知识库的详细统计，如文档数、点赞数、知识库各文档的阅读点赞数等。"),btnText:__("开通会员"),btnAction:function(){var e;return null===(e=window.__member_message_ref)||void 0===e?void 0:e.current.showMemberIntro(c.LIMIT_SCENE.book_statistics)}},organization:{title:__("付费版空间专属功能"),desc:__("知识库统计可以查看知识库内容数据统计和阅读、点赞、评论等访问数据统计。"),btnText:O?i.a.getPaymentActionGuide(null==b?void 0:b.payment_type):__("我知道了"),btnAction:function(){return O&&window.open("/r/organizations/dashboard/cashier?action=renew")}}},S=g&&w&&g.id!==w.id;l=_?E.organization:S?E.collab:E.member,n.a.info({width:480,closable:!0,maskClosable:!0,centered:!0,className:s,content:a.a.createElement("div",null,a.a.createElement("img",{className:h,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*Wl-qQ4teHLUAAAAAAAAAAAAAARQnAQ"}),a.a.createElement("div",{className:f},a.a.createElement("p",{className:d},null===(r=l)||void 0===r?void 0:r.title),a.a.createElement("p",{className:p},null===(o=l)||void 0===o?void 0:o.desc))),okText:null===(u=l)||void 0===u?void 0:u.btnText,onOk:function(){return(e=v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=l)||void 0===t||t.btnAction();case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){y(a,n,o,i,c,"next",e)}function c(e){y(a,n,o,i,c,"throw",e)}i(void 0)}))})();var e}})}}},3256:function(e,t,r){"use strict";r.d(t,"a",(function(){return S})),r.d(t,"b",(function(){return x})),r.d(t,"c",(function(){return C}));var n=r(15),o=r(39),a=r(858),i=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function c(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],o=t[r],!(n===o||i(n)&&i(o)))return!1;var n,o;return!0}var u=function(e,t){var r;void 0===t&&(t=c);var n,o=[],a=!1;return function(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return a&&r===this&&t(i,o)||(n=e.apply(this,i),a=!0,r=this,o=i),n}},l=r(0),s=r(572),f="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function d(e){cancelAnimationFrame(e.id)}function p(e,t){var r=f();var n={id:requestAnimationFrame((function o(){f()-r>=t?e.call(null):n.id=requestAnimationFrame(o)}))};return n}var h=-1;function m(e){if(void 0===e&&(e=!1),-1===h||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),h=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return h}var v=null;function y(e){if(void 0===e&&(e=!1),null===v||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),o=n.style;return o.width="100px",o.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?v="positive-descending":(t.scrollLeft=1,v=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),v}return v}var b=function(e){var t=e.columnIndex;e.data;return e.rowIndex+":"+t};function g(e){var t,r=e.getColumnOffset,i=e.getColumnStartIndexForOffset,c=e.getColumnStopIndexForStartIndex,s=e.getColumnWidth,f=e.getEstimatedTotalHeight,h=e.getEstimatedTotalWidth,v=e.getOffsetForColumnAndAlignment,g=e.getOffsetForRowAndAlignment,_=e.getRowHeight,O=e.getRowOffset,E=e.getRowStartIndexForOffset,S=e.getRowStopIndexForStartIndex,x=e.initInstanceProps,j=e.shouldResetStyleCacheOnItemSizeChange,k=e.validateProps;return(t=function(e){function t(t){var n;return(n=e.call(this,t)||this)._instanceProps=x(n.props,Object(o.a)(n)),n._resetIsScrollingTimeoutId=null,n._outerRef=void 0,n.state={instance:Object(o.a)(n),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:"number"==typeof n.props.initialScrollLeft?n.props.initialScrollLeft:0,scrollTop:"number"==typeof n.props.initialScrollTop?n.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},n._callOnItemsRendered=void 0,n._callOnItemsRendered=u((function(e,t,r,o,a,i,c,u){return n.props.onItemsRendered({overscanColumnStartIndex:e,overscanColumnStopIndex:t,overscanRowStartIndex:r,overscanRowStopIndex:o,visibleColumnStartIndex:a,visibleColumnStopIndex:i,visibleRowStartIndex:c,visibleRowStopIndex:u})})),n._callOnScroll=void 0,n._callOnScroll=u((function(e,t,r,o,a){return n.props.onScroll({horizontalScrollDirection:r,scrollLeft:e,scrollTop:t,verticalScrollDirection:o,scrollUpdateWasRequested:a})})),n._getItemStyle=void 0,n._getItemStyle=function(e,t){var o,a=n.props,i=a.columnWidth,c=a.direction,u=a.rowHeight,l=n._getItemStyleCache(j&&i,j&&c,j&&u),f=e+":"+t;if(l.hasOwnProperty(f))o=l[f];else{var d=r(n.props,t,n._instanceProps),p="rtl"===c;l[f]=o={position:"absolute",left:p?void 0:d,right:p?d:void 0,top:O(n.props,e,n._instanceProps),height:_(n.props,e,n._instanceProps),width:s(n.props,t,n._instanceProps)}}return o},n._getItemStyleCache=void 0,n._getItemStyleCache=u((function(e,t,r){return{}})),n._onScroll=function(e){var t=e.currentTarget,r=t.clientHeight,o=t.clientWidth,a=t.scrollLeft,i=t.scrollTop,c=t.scrollHeight,u=t.scrollWidth;n.setState((function(e){if(e.scrollLeft===a&&e.scrollTop===i)return null;var t=n.props.direction,l=a;if("rtl"===t)switch(y()){case"negative":l=-a;break;case"positive-descending":l=u-o-a}l=Math.max(0,Math.min(l,u-o));var s=Math.max(0,Math.min(i,c-r));return{isScrolling:!0,horizontalScrollDirection:e.scrollLeft<a?"forward":"backward",scrollLeft:l,scrollTop:s,verticalScrollDirection:e.scrollTop<i?"forward":"backward",scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){null!==n._resetIsScrollingTimeoutId&&d(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=p(n._resetIsScrolling,150)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1)}))},n}Object(a.a)(t,e),t.getDerivedStateFromProps=function(e,t){return w(e,t),k(e),null};var P=t.prototype;return P.scrollTo=function(e){var t=e.scrollLeft,r=e.scrollTop;void 0!==t&&(t=Math.max(0,t)),void 0!==r&&(r=Math.max(0,r)),this.setState((function(e){return void 0===t&&(t=e.scrollLeft),void 0===r&&(r=e.scrollTop),e.scrollLeft===t&&e.scrollTop===r?null:{horizontalScrollDirection:e.scrollLeft<t?"forward":"backward",scrollLeft:t,scrollTop:r,scrollUpdateWasRequested:!0,verticalScrollDirection:e.scrollTop<r?"forward":"backward"}}),this._resetIsScrollingDebounced)},P.scrollToItem=function(e){var t=e.align,r=void 0===t?"auto":t,n=e.columnIndex,o=e.rowIndex,a=this.props,i=a.columnCount,c=a.height,u=a.rowCount,l=a.width,s=this.state,d=s.scrollLeft,p=s.scrollTop,y=m();void 0!==n&&(n=Math.max(0,Math.min(n,i-1))),void 0!==o&&(o=Math.max(0,Math.min(o,u-1)));var b=f(this.props,this._instanceProps),w=h(this.props,this._instanceProps)>l?y:0,_=b>c?y:0;this.scrollTo({scrollLeft:void 0!==n?v(this.props,n,r,d,this._instanceProps,_):d,scrollTop:void 0!==o?g(this.props,o,r,p,this._instanceProps,w):p})},P.componentDidMount=function(){var e=this.props,t=e.initialScrollLeft,r=e.initialScrollTop;if(null!=this._outerRef){var n=this._outerRef;"number"==typeof t&&(n.scrollLeft=t),"number"==typeof r&&(n.scrollTop=r)}this._callPropsCallbacks()},P.componentDidUpdate=function(){var e=this.props.direction,t=this.state,r=t.scrollLeft,n=t.scrollTop;if(t.scrollUpdateWasRequested&&null!=this._outerRef){var o=this._outerRef;if("rtl"===e)switch(y()){case"negative":o.scrollLeft=-r;break;case"positive-ascending":o.scrollLeft=r;break;default:var a=o.clientWidth,i=o.scrollWidth;o.scrollLeft=i-a-r}else o.scrollLeft=Math.max(0,r);o.scrollTop=Math.max(0,n)}this._callPropsCallbacks()},P.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&d(this._resetIsScrollingTimeoutId)},P.render=function(){var e=this.props,t=e.children,r=e.className,o=e.columnCount,a=e.direction,i=e.height,c=e.innerRef,u=e.innerElementType,s=e.innerTagName,d=e.itemData,p=e.itemKey,m=void 0===p?b:p,v=e.outerElementType,y=e.outerTagName,g=e.rowCount,w=e.style,_=e.useIsScrolling,O=e.width,E=this.state.isScrolling,S=this._getHorizontalRangeToRender(),x=S[0],j=S[1],k=this._getVerticalRangeToRender(),P=k[0],C=k[1],T=[];if(o>0&&g)for(var L=P;L<=C;L++)for(var A=x;A<=j;A++)T.push(Object(l.createElement)(t,{columnIndex:A,data:d,isScrolling:_?E:void 0,key:m({columnIndex:A,data:d,rowIndex:L}),rowIndex:L,style:this._getItemStyle(L,A)}));var I=f(this.props,this._instanceProps),N=h(this.props,this._instanceProps);return Object(l.createElement)(v||y||"div",{className:r,onScroll:this._onScroll,ref:this._outerRefSetter,style:Object(n.default)({position:"relative",height:i,width:O,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:a},w)},Object(l.createElement)(u||s||"div",{children:T,ref:c,style:{height:I,pointerEvents:E?"none":void 0,width:N}}))},P._callPropsCallbacks=function(){var e=this.props,t=e.columnCount,r=e.onItemsRendered,n=e.onScroll,o=e.rowCount;if("function"==typeof r&&t>0&&o>0){var a=this._getHorizontalRangeToRender(),i=a[0],c=a[1],u=a[2],l=a[3],s=this._getVerticalRangeToRender(),f=s[0],d=s[1],p=s[2],h=s[3];this._callOnItemsRendered(i,c,f,d,u,l,p,h)}if("function"==typeof n){var m=this.state,v=m.horizontalScrollDirection,y=m.scrollLeft,b=m.scrollTop,g=m.scrollUpdateWasRequested,w=m.verticalScrollDirection;this._callOnScroll(y,b,v,w,g)}},P._getHorizontalRangeToRender=function(){var e=this.props,t=e.columnCount,r=e.overscanColumnCount,n=e.overscanColumnsCount,o=e.overscanCount,a=e.rowCount,u=this.state,l=u.horizontalScrollDirection,s=u.isScrolling,f=u.scrollLeft,d=r||n||o||1;if(0===t||0===a)return[0,0,0,0];var p=i(this.props,f,this._instanceProps),h=c(this.props,p,f,this._instanceProps),m=s&&"backward"!==l?1:Math.max(1,d),v=s&&"forward"!==l?1:Math.max(1,d);return[Math.max(0,p-m),Math.max(0,Math.min(t-1,h+v)),p,h]},P._getVerticalRangeToRender=function(){var e=this.props,t=e.columnCount,r=e.overscanCount,n=e.overscanRowCount,o=e.overscanRowsCount,a=e.rowCount,i=this.state,c=i.isScrolling,u=i.verticalScrollDirection,l=i.scrollTop,s=n||o||r||1;if(0===t||0===a)return[0,0,0,0];var f=E(this.props,l,this._instanceProps),d=S(this.props,f,l,this._instanceProps),p=c&&"backward"!==u?1:Math.max(1,s),h=c&&"forward"!==u?1:Math.max(1,s);return[Math.max(0,f-p),Math.max(0,Math.min(a-1,d+h)),f,d]},t}(l.PureComponent)).defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},t}var w=function(e,t){e.children,e.direction,e.height,e.innerTagName,e.outerTagName,e.overscanColumnsCount,e.overscanCount,e.overscanRowsCount,e.width,t.instance},_=function(e,t){return e};function O(e){var t,r=e.getItemOffset,i=e.getEstimatedTotalSize,c=e.getItemSize,s=e.getOffsetForIndexAndAlignment,f=e.getStartIndexForOffset,h=e.getStopIndexForStartIndex,v=e.initInstanceProps,b=e.shouldResetStyleCacheOnItemSizeChange,g=e.validateProps;return t=function(e){function t(t){var n;return(n=e.call(this,t)||this)._instanceProps=v(n.props,Object(o.a)(n)),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:Object(o.a)(n),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=u((function(e,t,r,o){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:r,visibleStopIndex:o})})),n._callOnScroll=void 0,n._callOnScroll=u((function(e,t,r){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:r})})),n._getItemStyle=void 0,n._getItemStyle=function(e){var t,o=n.props,a=o.direction,i=o.itemSize,u=o.layout,l=n._getItemStyleCache(b&&i,b&&u,b&&a);if(l.hasOwnProperty(e))t=l[e];else{var s=r(n.props,e,n._instanceProps),f=c(n.props,e,n._instanceProps),d="horizontal"===a||"horizontal"===u,p="rtl"===a,h=d?s:0;l[e]=t={position:"absolute",left:p?void 0:h,right:p?h:void 0,top:d?0:s,height:d?"100%":f,width:d?f:"100%"}}return t},n._getItemStyleCache=void 0,n._getItemStyleCache=u((function(e,t,r){return{}})),n._onScrollHorizontal=function(e){var t=e.currentTarget,r=t.clientWidth,o=t.scrollLeft,a=t.scrollWidth;n.setState((function(e){if(e.scrollOffset===o)return null;var t=n.props.direction,i=o;if("rtl"===t)switch(y()){case"negative":i=-o;break;case"positive-descending":i=a-r-o}return i=Math.max(0,Math.min(i,a-r)),{isScrolling:!0,scrollDirection:e.scrollOffset<o?"forward":"backward",scrollOffset:i,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,r=t.clientHeight,o=t.scrollHeight,a=t.scrollTop;n.setState((function(e){if(e.scrollOffset===a)return null;var t=Math.max(0,Math.min(a,o-r));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){null!==n._resetIsScrollingTimeoutId&&d(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=p(n._resetIsScrolling,150)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1,null)}))},n}Object(a.a)(t,e),t.getDerivedStateFromProps=function(e,t){return E(e,t),g(e),null};var w=t.prototype;return w.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},w.scrollToItem=function(e,t){void 0===t&&(t="auto");var r=this.props,n=r.itemCount,o=r.layout,a=this.state.scrollOffset;e=Math.max(0,Math.min(e,n-1));var i=0;if(this._outerRef){var c=this._outerRef;i="vertical"===o?c.scrollWidth>c.clientWidth?m():0:c.scrollHeight>c.clientHeight?m():0}this.scrollTo(s(this.props,e,t,a,this._instanceProps,i))},w.componentDidMount=function(){var e=this.props,t=e.direction,r=e.initialScrollOffset,n=e.layout;if("number"==typeof r&&null!=this._outerRef){var o=this._outerRef;"horizontal"===t||"horizontal"===n?o.scrollLeft=r:o.scrollTop=r}this._callPropsCallbacks()},w.componentDidUpdate=function(){var e=this.props,t=e.direction,r=e.layout,n=this.state,o=n.scrollOffset;if(n.scrollUpdateWasRequested&&null!=this._outerRef){var a=this._outerRef;if("horizontal"===t||"horizontal"===r)if("rtl"===t)switch(y()){case"negative":a.scrollLeft=-o;break;case"positive-ascending":a.scrollLeft=o;break;default:var i=a.clientWidth,c=a.scrollWidth;a.scrollLeft=c-i-o}else a.scrollLeft=o;else a.scrollTop=o}this._callPropsCallbacks()},w.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&d(this._resetIsScrollingTimeoutId)},w.render=function(){var e=this.props,t=e.children,r=e.className,o=e.direction,a=e.height,c=e.innerRef,u=e.innerElementType,s=e.innerTagName,f=e.itemCount,d=e.itemData,p=e.itemKey,h=void 0===p?_:p,m=e.layout,v=e.outerElementType,y=e.outerTagName,b=e.style,g=e.useIsScrolling,w=e.width,O=this.state.isScrolling,E="horizontal"===o||"horizontal"===m,S=E?this._onScrollHorizontal:this._onScrollVertical,x=this._getRangeToRender(),j=x[0],k=x[1],P=[];if(f>0)for(var C=j;C<=k;C++)P.push(Object(l.createElement)(t,{data:d,key:h(C,d),index:C,isScrolling:g?O:void 0,style:this._getItemStyle(C)}));var T=i(this.props,this._instanceProps);return Object(l.createElement)(v||y||"div",{className:r,onScroll:S,ref:this._outerRefSetter,style:Object(n.default)({position:"relative",height:a,width:w,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:o},b)},Object(l.createElement)(u||s||"div",{children:P,ref:c,style:{height:E?"100%":T,pointerEvents:O?"none":void 0,width:E?T:"100%"}}))},w._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],r=e[1],n=e[2],o=e[3];this._callOnItemsRendered(t,r,n,o)}if("function"==typeof this.props.onScroll){var a=this.state,i=a.scrollDirection,c=a.scrollOffset,u=a.scrollUpdateWasRequested;this._callOnScroll(i,c,u)}},w._getRangeToRender=function(){var e=this.props,t=e.itemCount,r=e.overscanCount,n=this.state,o=n.isScrolling,a=n.scrollDirection,i=n.scrollOffset;if(0===t)return[0,0,0,0];var c=f(this.props,i,this._instanceProps),u=h(this.props,c,i,this._instanceProps),l=o&&"backward"!==a?1:Math.max(1,r),s=o&&"forward"!==a?1:Math.max(1,r);return[Math.max(0,c-l),Math.max(0,Math.min(t-1,u+s)),c,u]},t}(l.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var E=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},S=g({getColumnOffset:function(e,t){return t*e.columnWidth},getColumnWidth:function(e,t){return e.columnWidth},getRowOffset:function(e,t){return t*e.rowHeight},getRowHeight:function(e,t){return e.rowHeight},getEstimatedTotalHeight:function(e){var t=e.rowCount;return e.rowHeight*t},getEstimatedTotalWidth:function(e){var t=e.columnCount;return e.columnWidth*t},getOffsetForColumnAndAlignment:function(e,t,r,n,o,a){var i=e.columnCount,c=e.columnWidth,u=e.width,l=Math.max(0,i*c-u),s=Math.min(l,t*c),f=Math.max(0,t*c-u+a+c);switch("smart"===r&&(r=n>=f-u&&n<=s+u?"auto":"center"),r){case"start":return s;case"end":return f;case"center":var d=Math.round(f+(s-f)/2);return d<Math.ceil(u/2)?0:d>l+Math.floor(u/2)?l:d;default:return n>=f&&n<=s?n:f>s||n<f?f:s}},getOffsetForRowAndAlignment:function(e,t,r,n,o,a){var i=e.rowHeight,c=e.height,u=e.rowCount,l=Math.max(0,u*i-c),s=Math.min(l,t*i),f=Math.max(0,t*i-c+a+i);switch("smart"===r&&(r=n>=f-c&&n<=s+c?"auto":"center"),r){case"start":return s;case"end":return f;case"center":var d=Math.round(f+(s-f)/2);return d<Math.ceil(c/2)?0:d>l+Math.floor(c/2)?l:d;default:return n>=f&&n<=s?n:f>s||n<f?f:s}},getColumnStartIndexForOffset:function(e,t){var r=e.columnWidth,n=e.columnCount;return Math.max(0,Math.min(n-1,Math.floor(t/r)))},getColumnStopIndexForStartIndex:function(e,t,r){var n=e.columnWidth,o=e.columnCount,a=e.width,i=t*n,c=Math.ceil((a+r-i)/n);return Math.max(0,Math.min(o-1,t+c-1))},getRowStartIndexForOffset:function(e,t){var r=e.rowHeight,n=e.rowCount;return Math.max(0,Math.min(n-1,Math.floor(t/r)))},getRowStopIndexForStartIndex:function(e,t,r){var n=e.rowHeight,o=e.rowCount,a=e.height,i=t*n,c=Math.ceil((a+r-i)/n);return Math.max(0,Math.min(o-1,t+c-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.columnWidth,e.rowHeight}}),x=O({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,r,n,o,a){var i=e.direction,c=e.height,u=e.itemCount,l=e.itemSize,s=e.layout,f=e.width,d="horizontal"===i||"horizontal"===s?f:c,p=Math.max(0,u*l-d),h=Math.min(p,t*l),m=Math.max(0,t*l-d+l+a);switch("smart"===r&&(r=n>=m-d&&n<=h+d?"auto":"center"),r){case"start":return h;case"end":return m;case"center":var v=Math.round(m+(h-m)/2);return v<Math.ceil(d/2)?0:v>p+Math.floor(d/2)?p:v;default:return n>=m&&n<=h?n:n<m?m:h}},getStartIndexForOffset:function(e,t){var r=e.itemCount,n=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(t/n)))},getStopIndexForStartIndex:function(e,t,r){var n=e.direction,o=e.height,a=e.itemCount,i=e.itemSize,c=e.layout,u=e.width,l=t*i,s="horizontal"===n||"horizontal"===c?u:o,f=Math.ceil((s+r-l)/i);return Math.max(0,Math.min(a-1,t+f-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function j(e,t){for(var r in e)if(!(r in t))return!0;for(var n in t)if(e[n]!==t[n])return!0;return!1}var k=["style"],P=["style"];function C(e,t){var r=e.style,n=Object(s.default)(e,k),o=t.style,a=Object(s.default)(t,P);return!j(r,o)&&!j(n,a)}},3305:function(e,t,r){"use strict";var n=r(316);r.d(t,"a",(function(){return n.b}))},3306:function(e,t,r){"use strict";r.d(t,"b",(function(){return T}));r(92);var n=r(45),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(2243),l=r(3097),s=r(44),f=r(2263),d=r(1514),p=r(264),h=r(3165),m=r(3067),v=r(3182),y=r(105),b=r(3116);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}var w=["show_author_custom_text","show_author_id","show_author_option"];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function x(){x=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:O(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(P([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==g(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function O(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function j(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function k(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){j(a,n,o,i,c,"next",e)}function c(e){j(a,n,o,i,c,"throw",e)}i(void 0)}))}}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e){var t=e.group,r=e.book,n=e.doc,a=e.actions,i=e.history,c=e.dispatch,u=P(Object(o.useState)(!1),2),l=u[0],m=u[1],b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)?e.find((function(e){return e.id===n.id||e.url===n.slug})):null},g=b(r.toc),_=!!g,E=f.a.shouldShowToc(r),j=function(){var e=k(x().mark((function e(t,o,a,i){var u,l,s,d;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=[],l=r.docs,u=l,s=a.targetBook,"move"!==i||s.id===r.id){e.next=8;break}return e.next=7,y.webProxy.docs.find({book_id:r.id});case 7:u=e.sent;case 8:if("copy"!==i||s.id!==r.id){e.next=12;break}return e.next=11,y.webProxy.docs.find({book_id:r.id});case 11:u=e.sent;case 12:return"destroy"===i&&(u=l.filter((function(e){return e.id!==n.id}))),e.next=15,c({type:"book/updateDocs",payload:u});case 15:if(o){e.next=23;break}if("destroy"!==i){e.next=19;break}return e.next=19,Object(v.a)(800);case 19:return e.next=21,f.a.getCatalogNodes(r.id);case 21:d=e.sent,o=d.toc;case 23:return c({type:"book/updateToc",payload:o}),e.abrupt("return",{newToc:o,newDocs:u});case 25:case"end":return e.stop()}}),e)})));return function(t,r,n,o){return e.apply(this,arguments)}}(),C=function(){var e=k(x().mark((function e(o,a){var c,u,l,s,p,h,m,v;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.a.isMixingType(r)){e.next=3;break}return window.location.href="/".concat(r.namespace),e.abrupt("return");case 3:E?(h=a.catalog,m=a.newCatalog,v=a.currentItem,c=f.a.getRedirectURL(h,m,{currentItem:v,group:t,book:r})):(u=a.docs,s=(l=void 0===u?[]:u).findIndex((function(e){return e.id===n.id})),(p=l[s+1])&&(c="/".concat(t.login,"/").concat(r.slug,"/").concat(p.slug))),c?i.push(c):window.location.href="/".concat(t.login,"/").concat(r.slug);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),T=function(){var e=k(x().mark((function e(o){var a,i,c;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=o,e.next=e.t0===s.a.DOC.delete.cmd?3:e.t0===s.a.DOC.move.cmd||e.t0===s.a.DOC.copy.cmd?9:e.t0===s.a.DOC.edit_meta.cmd?13:15;break;case 3:return e.next=5,j(null,null,{targetBook:r,currentItem:g},"destroy");case 5:return a=e.sent,i=a.newToc,C("delete",{docs:r.docs,catalog:r.toc,newCatalog:i,currentItem:b(r.toc)}),e.abrupt("break",16);case 9:return c=h.a.useViewModel({item:b(r.toc),group:t,book:r,doc:n,catalog:r.toc,onMove:function(e,t,n){j(e,t,n,"move"),n.targetBook.id!==r.id&&C("move",{docs:r.docs,catalog:e,newCatalog:t,currentItem:n.currentItem})},onCopy:function(e,t,r){j(e,t,r,"copy")},onDestroy:function(e,t,n){j(e,t,n,"destroy"),C("delete",{docs:r.docs,catalog:e,newCatalog:t,currentItem:n.currentItem})}}),o===s.a.DOC.copy.cmd&&c.showCopyToModal(),o===s.a.DOC.move.cmd&&c.showMoveToModal(),e.abrupt("break",16);case 13:return m(!0),e.abrupt("break",16);case 15:return e.abrupt("break",16);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=k(x().mark((function e(o){var a,u,l,s,f,d,h;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.show_author_custom_text,u=o.show_author_id,l=o.show_author_option,s=S(o,w),f=O(O({},s),{},{meta:{show_author_custom_text:a,show_author_id:u,show_author_option:l}}),e.next=4,p.a.updateDocMeta(f,n);case 4:if(d=e.sent){e.next=7;break}return e.abrupt("return");case 7:m(!1),c({type:"doc/update",payload:d}),h=r.docs.map((function(e){return e.id===d.id?d:e})),c({type:"book/updateDocs",payload:h}),i.push("/".concat(t.login,"/").concat(r.slug,"/").concat(d.slug));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{state:{currentCatalogNode:g,isCatalogNode:_,showDocMetaEditor:l},editActions:a,getCatalogNodeByToc:b,doDocAction:T,updateBookDocsAndToc:j,setShowDocMetaEditor:m,saveMeta:L}}function L(e){var t=e.group,r=e.book,o=e.doc,i=e.actions,c=e.history,f=e.dispatch,p=T({group:t,book:r,doc:o,actions:i,history:c,dispatch:f}),h=p.editActions,v=p.doDocAction,y=p.setShowDocMetaEditor,g=p.saveMeta,w=p.state,_=w.showDocMetaEditor,O=w.currentCatalogNode,E=w.isCatalogNode;return a.a.createElement("span",{className:"header-action-item header-action-item-more","data-aspm-click":"d223116"},a.a.createElement(u.a,{"data-testid":"doc-reader-more-actions",overlayClassName:b.a.popoverMore,direction:"circle",iconWidth:20,getPopupContainer:function(){return document.getElementById("header")},content:a.a.createElement(l.a,{commands:h,commandParams:E&&{toc_node_uuid:O.uuid,toc_node_url:O.url,toc_node_title:O.title},book:r,doc:o,onSelect:e.onSelect,onCommandsExecuted:function(t){var n=t.cmd;n!==s.a.DOC.create_review.cmd?d.a.isMixingType(r)&&v(n):e.dispatch({type:"review/update",payload:{showReviewDrawer:!0,showCreateReviewDrawer:!0}})}})}),_&&a.a.createElement(n.a,{width:514,visible:!0,title:__("文档设置"),footer:null,onCancel:function(){return y(!1)},bodyStyle:{maxHeight:"90vh",overflow:"auto",paddingTop:16}},a.a.createElement(m.a,{doc:o,book:r,group:t,save:g,hideMoreInfo:!0})))}L.propTypes={doc:c.a.object.isRequired,book:c.a.object.isRequired,group:c.a.object.isRequired,actions:c.a.array.isRequired,onSelect:c.a.func,dispatch:c.a.func.isRequired,history:c.a.object.isRequired},t.a=L},3307:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r(103);var n=r(60),o=(r(62),r(21)),a=r(0),i=r(57),c=r(163),u=r(562),l=function(e){var t,r,l=e.doc,s=e.book,f=e.group,d=Object(i.useHistory)(),p=a.useMemo((function(){var e,t;return Object(c.d)({type:"book",target:s,group:f})!==u.PRIVACY.private?null!==(t=s.abilities)&&void 0!==t&&t.read_private?__("当前文档归属公开知识库，你和游客都可查看完整的知识库目录"):__("当前文档归属公开知识库，你可查看完整的知识库目录"):null!==(e=s.abilities)&&void 0!==e&&e.read_private?__("你拥有知识库权限，可回到知识库目录中查看，游客不可见该功能"):void 0}),[s,f]),h=a.createElement(o.a,{onClick:function(){var e=new URLSearchParams(d.location.search);e.delete("singleDoc"),d.push({pathname:d.location.pathname,search:"?".concat(e.toString())}),window.location.reload()}},null!==(t=s.abilities)&&void 0!==t&&t.read||null===(r=l.abilities)||void 0===r||!r.update?__("回到知识库"):__("查看原始文档"));return p?a.createElement(n.a,{placement:"bottom",title:p||""},h):h}},3313:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(34),o=r.n(n),a=r(3394);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function s(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"model",{visible:!1,currentPanel:null,containerStyle:{}}),s(this,"_renderInstanceCachedMap",new Map),s(this,"_shouldCachedSet",new Set),s(this,"_contentMap",new Map),s(this,"_renderer",a.b),s(this,"_subscribers",new Set),s(this,"_deferedPanel",{}),s(this,"emitter",void 0),e.inited&&(console.error("[SidePanelManager] manager has been inited, please check usage, e.g. ManagerProvider is used at two different places."),console.error("[SidePanelManager] if it's caused by HMR, ingore this")),e.inited=!0,this.emitter=new o.a}var t,r,n;return t=e,(r=[{key:"render",value:function(e){var t=this;this.model=u(u({},this.model),e),this._renderer(this.model),this._subscribers.forEach((function(e){e({visible:t.model.visible,currentPanel:t.model.currentPanel})}))}},{key:"getPanelContent",value:function(e){var t=this._contentMap.get(e);return t||console.warn("%s Panel not found, you should check registry",e),t||a.a}},{key:"registerContent",value:function(e,t,r){this._contentMap.set(e,t),null!=r&&r.cached&&this._shouldCachedSet.add(e),this._deferedPanel.panel&&(this.show(this._deferedPanel.panel,this._deferedPanel.options),this._deferedPanel={})}},{key:"registerCachedPanelInstance",value:function(e,t){this._shouldCachedSet.has(e)&&this._renderInstanceCachedMap.set(e,t)}},{key:"getCachedPanelInstance",value:function(e){return this._renderInstanceCachedMap.get(e)}},{key:"setRenderer",value:function(e){this._renderer=e}},{key:"show",value:function(e,t){e!==this.model.currentPanel&&(this._contentMap.get(e)?this.render({visible:!0,currentPanel:e,panelProps:null==t?void 0:t.panelProps,containerStyle:null==t?void 0:t.containerStyle}):this._deferedPanel={panel:e,options:t})}},{key:"hide",value:function(e){e?this.flushCacheByPanel(e):this.flushCaches(),e&&this.model.currentPanel!==e||this.render({visible:!1,currentPanel:null,panelProps:{},containerStyle:{}})}},{key:"subscribe",value:function(e){var t=this;return this._subscribers.add(e),function(){t._subscribers.delete(e)}}},{key:"flushCacheByPanel",value:function(e){this._renderInstanceCachedMap.delete(e)}},{key:"flushCaches",value:function(){this._renderInstanceCachedMap.clear()}},{key:"flushPanels",value:function(){this._shouldCachedSet.clear(),this._contentMap.clear()}},{key:"flushSubscribers",value:function(){this._subscribers.clear()}},{key:"flushAll",value:function(){this.flushCaches(),this.flushPanels()}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();s(d,"inited",!1)},3325:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(0),o=r(3101),a=r(205),i=r(3179),c=(r(63),r(23)),u=r(167),l=r(33);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function h(){}function m(){}function v(){}var y={};u(y,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(P([])));g&&g!==t&&r.call(g,a)&&(y=g);var w=v.prototype=h.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=d(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==s(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=d(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function d(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){d(a,n,o,i,c,"next",e)}function c(e){d(a,n,o,i,c,"throw",e)}i(void 0)}))}}var h=["docId","currentUser"];function m(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var v=function(e){var t=e.docId,r=(e.currentUser,m(e,h)),o=function(e){var t=window.appData.me;return{handleShare:n.useCallback(p(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l.a.docs.shareToPersonalFeed({id:e});case 2:c.a.success({content:n.createElement(n.Fragment,null,__("分享成功 "),n.createElement("a",{target:"_blank",href:"".concat(u.b.getHost(),"/").concat(t.login)},__("去查看")))});case 3:case"end":return r.stop()}}),r)}))),[e])}}(t),a=o.handleShare;return n.createElement(n.Fragment,null,n.createElement(i.a,{type:"doc",restProps:r,overlayClassName:"share-note-button",onShare:a}))},y=function(e){return n.createElement(a.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return n.createElement(o.a,{role:"alternative",iconName:"digitalgarden",tooltip:__("我的花园")})}},n.createElement(v,e))}},3330:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return u.a}));var n=r(0),o=r.n(n),a=r(3313),i=r(3395);function c(e){var t=Object(n.useMemo)((function(){return{sidePanelManager:new a.a}}),[]);return o.a.createElement(i.a.Provider,{value:t},e.children)}var u=r(3216)},3367:function(e,t,r){"use strict";r(62);var n=r(21),o=(r(103),r(60)),a=r(0),i=r.n(a),c=r(2),u=r.n(c),l=r(2766),s=r(3107);function f(e){var t=e.book,r=e.doc,a="Sheet"===r.type||"Table"===r.type;return Object(s.a)(t,r),i.a.createElement(n.a,{type:"primary",onClick:function(){a?l.a.saveSheetPosition(r.id):l.a.saveReadPosition(r.id)},href:"/".concat(t.namespace,"/").concat(r.slug,"/edit").concat(a?window.location.hash:"")},i.a.createElement(o.a,{title:i.a.createElement("p",{style:{textAlign:"center"}},__("编辑")+__("：")+__("E")),placement:"bottom"},__("编辑")))}f.propTypes={book:u.a.object.isRequired,doc:u.a.object.isRequired},t.a=f},3394:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n=function(){return null};function o(){}},3395:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0),o=r.n(n).a.createContext(null)},3404:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return u}));var n=r(0),o=r.n(n);var a=Object(n.createContext)({isShare:!1}),i={isShare:!1};function c(e){return o.a.createElement(a.Provider,{value:i},e.children)}function u(){return Object(n.useContext)(a)}},342:function(e,t,r){"use strict";r.d(t,"b",(function(){return b})),r.d(t,"l",(function(){return T})),r.d(t,"o",(function(){return L})),r.d(t,"j",(function(){return A})),r.d(t,"c",(function(){return D})),r.d(t,"r",(function(){return R})),r.d(t,"q",(function(){return M})),r.d(t,"p",(function(){return F})),r.d(t,"h",(function(){return G})),r.d(t,"m",(function(){return B})),r.d(t,"k",(function(){return U})),r.d(t,"n",(function(){return z})),r.d(t,"e",(function(){return W})),r.d(t,"g",(function(){return V})),r.d(t,"i",(function(){return H})),r.d(t,"a",(function(){return q})),r.d(t,"d",(function(){return K})),r.d(t,"f",(function(){return Y}));var n,o,a,i,c,u,l,s,f,d,p,h,m,v,y,b,g=r(0),w=r(18),_=r(90),O=r(961),E=r(151),S=r(167),x=r(1461),j=r(187),k=r(108);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function C(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===P(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e[e.sharePanel=1]="sharePanel",e[e.inviteSelectorChannel=2]="inviteSelectorChannel",e[e.shareChannels=3]="shareChannels",e[e.collaboratorChannel=4]="collaboratorChannel",e[e.shareQrCodeChannel=5]="shareQrCodeChannel"}(b||(b={}));var T=(C(n={},_.a.PERSON,__("公开给互联网所有人")),C(n,_.a.ORG,__("公开给空间所有成员")),C(n,_.a.INTERNAL,__("公开给集团所有正式员工")),n),L=(C(o={},_.a.PERSON,{private:__("互联网公开"),public:__("已开启互联网公开")}),C(o,_.a.ORG,{private:__("公开分享"),public:__("已开启公开分享")}),C(o,_.a.INTERNAL,{private:__("公开分享"),public:__("已开启公开分享")}),o),A={private:__("当前小记为私密，仅自己可访问"),public:__("当前小记为公开")},I=(C(a={},_.a.PERSON,{private:__("当前知识库为私密，仅自己和协作者可访问"),public:__("当前知识库为公开，互联网所有人可访问")}),C(a,_.a.ORG,{private:__("当前知识库为私密，仅自己和协作者可访问"),intranet:__("当前知识库为公开，空间所有成员可访问"),public:__("当前知识库为公开，互联网所有人可访问")}),C(a,_.a.INTERNAL,{private:__("当前知识库为私密，仅自己和协作者可访问"),intranet:__("当前知识库为公开，集团所有正式员工可访问"),public:__("当前知识库为公开，集团所有人可访问")}),a),N=(C(i={},_.a.PERSON,{private:__("当前文档为私密，仅自己和协作者可访问"),public:__("当前文档为公开，互联网所有人可访问")}),C(i,_.a.ORG,{private:__("当前文档为私密，仅自己和协作者可访问"),intranet:__("当前文档为公开，空间所有成员可访问"),public:__("当前文档为公开，互联网所有人可访问")}),C(i,_.a.INTERNAL,{private:__("当前文档为私密，仅自己和协作者可访问"),intranet:__("当前文档为公开，集团所有正式员工可访问"),public:__("当前文档为公开，集团所有人可访问")}),i),D=(C(c={},_.b.BOOK,I),C(c,_.b.DOC,N),c),R=(C(u={},_.a.PERSON,{private:__("开启后，互联网所有人可访问"),public:__("互联网所有人可公开访问内容")}),C(u,_.a.INTERNAL,{private:__("开启后，拿到链接的集团正式员工可访问"),public:__("拿到链接的集团正式员工可访问")}),u),M=(C(l={},_.a.PERSON,{private:__("开启后，互联网所有人可访问"),public:__("互联网所有人可公开访问内容")}),C(l,_.a.ORG,{private:__("开启后，空间内所有成员可访问"),intranet:__("空间内所有成员可公开访问内容"),public:__("互联网所有人可公开访问内容")}),C(l,_.a.INTERNAL,{private:__("开启后，拿到链接的集团正式员工可访问"),intranet:__("拿到链接的集团正式员工可访问"),public:__("拿到链接的集团所有人可访问")}),l),F=(C(s={},w.PRIVACY.private,"private"),C(s,w.PRIVACY.public,"public"),C(s,w.PRIVACY.intranet,"intranet"),s),G=function(e,t,r,n,o){var a=Object(O.d)(e,t,r,n,o).privacy;return F[a]},B=(C(f={},_.a.ORG,{desc:__("默认分享范围是空间所有成员。可以选择分享给互联网所有人，内容需符合相关法律法规及语雀 {terms} 约定。",{terms:g.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6",target:"_blank"},__("服务协议"))}),action:[{label:__("空间所有成员可访问"),value:w.PRIVACY.intranet},{label:__("互联网所有人可访问"),value:w.PRIVACY.public,tip:function(e){var t,r=null==e||null===(t=e.abilities)||void 0===t?void 0:t.destroy;return E.a.isPremium(e)&&0===(null==e?void 0:e.share_to_outside_enable)?__("管理员已关闭空间外人员访问权限，请联系管理员开启。"):E.a.isFree(e)?r?g.createElement(g.Fragment,null,__("升级为付费版后可开启互联网公开"),g.createElement("a",{href:"/r/organizations/dashboard/cashier?action=renew",target:"_blank",style:{marginLeft:"5px"}},E.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):__("试用空间不可以设置互联网所有人可访问"):E.a.isExpired(e)?g.createElement(g.Fragment,null,__("过期空间不可以设置互联网所有人可访问"),r&&g.createElement("a",{href:"/r/organizations/dashboard/cashier?action=renew",target:"_blank",style:{marginLeft:"5px"}},E.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):""}}]}),C(f,_.a.INTERNAL,{desc:__("默认分享范围是集团正式员工。分享给集团所有人（含外包、未签订三方协议的实习生）需审批申请，请注意信息安全。"),action:[{label:__("集团内所有正式员工可访问"),value:w.PRIVACY.intranet},{label:__("集团内所有人可访问"),value:w.PRIVACY.public}]}),f),U=(C(d={},_.b.BOOK,__("开启后，本知识库下的所有公开内容，都需要密码访问。")),C(d,_.b.DOC,__("所属知识库已开启密码，本内容已默认继承该密码。")),d),z=(C(m={},_.b.BOOK,(C(p={},_.a.PERSON,{desc:__("开启后，互联网所有人可搜到知识库里的公开内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许语雀内公开搜索")}),C(p,_.a.ORG,{desc:__("开启后，空间成员可在空间里搜到知识库里的公开内容")+__("（如果开启了密码，则搜索设置无效）"),action:"允许空间内搜索"}),C(p,_.a.INTERNAL,{desc:__("开启后，集团所有人可搜到知识库里的公开内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许内网公开搜索")}),p)),C(m,_.b.DOC,(C(h={},_.a.PERSON,{desc:__("开启后，互联网所有人可在语雀内搜索到当前内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许语雀内公开搜索"),tip:__("所属知识库已允许语雀内公开搜索，文档无法独立设置。{terms}",{terms:g.createElement("a",{href:"https://www.yuque.com/yuque/thyzgp/lk1xr8",target:"_blank"},__("查看帮助"))})}),C(h,_.a.ORG,{desc:__("开启后，空间成员可在空间里搜索到当前内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许空间内搜索"),tip:__("所属知识库已允许空间内搜索，文档无法独立设置。{terms}",{terms:g.createElement("a",{href:"https://www.yuque.com/yuque/thyzgp/lk1xr8",target:"_blank"},__("查看帮助"))})}),C(h,_.a.INTERNAL,{desc:__("开启后，集团内所有人都可在语雀里搜到当前内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许内网公开搜索"),tip:__("所属知识库已允许内网公开搜索，文档无法独立设置。{terms}",{terms:g.createElement("a",{href:"https://yuque.antfin.com/lark/bsgp0v/wpclft",target:"_blank"},__("查看帮助"))})}),h)),m),W=(C(v={},_.b.BOOK,__("可编辑，将拥有知识库的编辑权限。可阅读，仅拥有阅读和评论权限。")),C(v,_.b.DOC,__("可编辑，将拥有文档的编辑权限。可阅读，仅拥有阅读和评论权限。")),C(v,"action",[{label:__("可阅读"),value:j.ROLE.readonly,key:"readonly"},{label:__("可编辑"),value:j.ROLE.edit,key:"edit"}]),v),V={descBookDoc:__("开启后，允许通过邀请链接快速添加空间外人员。通过此方式加入协作的人，将自动加入空间。"),descGroup:__("开启后，允许通过邀请链接快速添加空间外人员。通过此方式加入协作的人，将自动加入团队。"),action:__("邀请空间外成员"),tip:__("管理员已关闭空间外人员添加权限，请联系管理员开启。{terms}",{terms:g.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/csb5nu",target:"_blank"},__("查看帮助"))})},H={descBookDoc:__("开启后，需经过手动审批确认，获得链接的人才能成为协作者。"),descGroup:__("开启后，需经过手动审批确认，获得链接的人才能加入团队。"),action:__("提交申请后需审批确认")},q={desc:__("成员，将拥有团队知识库的编辑权限。只读成员，仅拥有只读权限。"),action:[{label:__("成员"),value:k.ROLE.member,key:"member"},{label:__("只读成员"),value:k.ROLE.readonly,key:"readonly"}]},K=(C(y={},_.a.PERSON,{action:[{label:__("仅协作者可访问"),value:w.PRIVACY.private},{label:__("互联网所有人可访问"),value:w.PRIVACY.public}]}),C(y,_.a.ORG,{action:[{label:__("仅协作者可访问"),value:w.PRIVACY.private},{label:__("空间所有成员可访问"),value:w.PRIVACY.intranet},{label:__("互联网所有人可访问"),value:w.PRIVACY.public,tip:function(e){var t,r=null==e||null===(t=e.abilities)||void 0===t?void 0:t.destroy;return E.a.isPremium(e)&&0===(null==e?void 0:e.share_to_outside_enable)?__("管理员已关闭空间外人员访问权限，请联系管理员开启。"):E.a.isFree(e)?r?g.createElement(g.Fragment,null,__("升级为付费版后可开启互联网公开"),g.createElement("a",{href:"/r/organizations/dashboard/cashier?action=renew",target:"_blank",style:{marginLeft:"5px"}},E.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):__("试用空间不可以设置互联网所有人可访问"):E.a.isExpired(e)?g.createElement(g.Fragment,null,__("过期空间不可以设置互联网所有人可访问"),r&&g.createElement("a",{href:"/r/organizations/dashboard/cashier?action=renew",target:"_blank",style:{marginLeft:"5px"}},E.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):""}}]}),C(y,_.a.INTERNAL,{action:[{label:__("仅协作者可访问"),value:w.PRIVACY.private},{label:__("集团内所有正式员工可访问"),value:w.PRIVACY.intranet},{label:__("集团内所有人可访问"),value:w.PRIVACY.public}]}),y),Y=function(e,t){var r=__("开启后，互联网所有获得链接的人皆可访问知识库下的全部内容。你需对其合法合规性负责，遵守相关法律法规及语雀 {terms} 约定，违规内容可能无法被查看。",{terms:g.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6",target:"_blank"},__("服务协议"))}),n=__("开启后，互联网所有获得链接的人皆可访问。你需对其合法合规性负责，遵守相关法律法规及语雀 {terms} 约定，违规内容可能无法被查看。",{terms:g.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6",target:"_blank"},__("服务协议"))}),o=e===_.b.BOOK?r:n;return Object(S.a)()?new Promise((function(e){t.confirm({icon:g.createElement(x.a,null),width:505,title:__("确认公开给互联网所有人"),content:g.createElement("span",null,o),okText:__("确认"),cancelText:__("取消"),onOk:function(){e(!0)},onCancel:function(){e(!1)}})})):e===_.b.NOTE?Promise.resolve(!0):new Promise((function(e){t.confirm({icon:g.createElement(x.a,null),width:505,title:__("申请开启集团所有人可访问"),content:__("设置 集团所有人可访问 需进行审批申请，主管通过后可对所有外包、未签订三方协议的实习生可见，请注意信息安全。"),okText:__("确认"),cancelText:__("取消"),onOk:function(){e(!0)},onCancel:function(){e(!1)}})}))}},343:function(e,t,r){"use strict";t.a={sharePanel:"styles-module_sharePanel_s5kBA",main:"styles-module_main_TU-q3",mainIntro:"styles-module_mainIntro_ZLSq3",firstItem:"styles-module_firstItem_PMwrF",inviteItem:"styles-module_inviteItem_bvtuN",shareDescText:"styles-module_shareDescText_djXr6",itemTitle:"styles-module_itemTitle_L8kbw",memberBadge:"styles-module_memberBadge_VNook",memberAbleIcon:"styles-module_memberAbleIcon_xgapq",itemIcon:"styles-module_itemIcon_QRd1N",appointIcon:"styles-module_appointIcon_FKaJv",publicIcon:"styles-module_publicIcon_93Lmu",inviteIconLi:"styles-module_inviteIconLi_Yti7e",dot:"styles-module_dot_mUU81",inviteIcon:"styles-module_inviteIcon_0m0Q-",shareLinkSet:"styles-module_shareLinkSet_gw+kY",description:"styles-module_description_mY+Fb",shareLinkShow:"styles-module_shareLinkShow_yHgY+",qrCode:"styles-module_qrCode_S96ih",shareButton:"styles-module_shareButton_9iiSX",sharePublic:"styles-module_sharePublic_NAGqa",shareQrCode:"styles-module_shareQrCode_klQhV",shareQrCodeIcon:"styles-module_shareQrCodeIcon_yeZKy",moreConfigs:"styles-module_moreConfigs_HY+LU",popover:"styles-module_popover_RNBo9"}},352:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(93),o=r(581),a=r(113);function i(e){if(e.symbol){var t=a.ICON_SELECTOR.URL_TYPE_LIST,r=a.ICON_SELECTOR.LEGACY_URL_TYPE_LIST,n=a.ICON_SELECTOR.ICON_TYPE_LIST,o=a.ICON_SELECTOR.LEGACY_ICON_TYPE_LIST,i=a.ICON_SELECTOR.BOOK_ICON_TYPE_MAP;if(Object.keys(i).includes(e.symbol))return i[e.symbol];if("url"===e.type){if(r.includes(e.symbol))return t[r.findIndex((function(t){return t===e.symbol}))||0];if(t.includes(e.symbol))return e.symbol}else if("icon"===e.type){if(o.includes(e.symbol))return n[o.findIndex((function(t){return t===e.symbol}))||0];if(n.includes(e.symbol))return e.symbol}}}var c={book:function(e){var t=(e.type||"").toLowerCase();return a.BOOK_ICON_MAP[t]||a.BOOK_ICON_MAP.default},user:function(e){var t=e.scene||"";return e.avatar?null:a.USER_ICON_MAP[t]||null},doc:function(e){return"Thread"===e.type?this.thread(e):a.DOC_ICON_MAP[e.type.toLowerCase()]||null},template:function(e){return"lakesheet"===e.format?c.doc({type:"Sheet"}):"lake"===e.format?c.doc({type:"Doc"}):"lakemind"===e.format?c.doc({type:"Mind"}):"lakeboard"===e.format?c.doc({type:"Board"}):"lakeshow"===e.format?c.doc({type:"Show"}):"laketable"===e.format?c.doc({type:"Table"}):void 0},thread:function(e){var t=e.sub_type||"";return e.view_status===n.VIEW_STATUS.archive?"thread-archive":a.THREAD_ICON_MAP[t.toLowerCase()]||a.THREAD_ICON_MAP.default},resource:function(e){return Object(o.getFileIcon)(e)},artboardGroup:function(){return a.DOC_ICON_MAP.artboardgroup},docVersion:function(e){return a.DOC_FORMAT_ICON_MAP[e.format]},recycle:function(e){var t=e.target_type,r=e.params;if(!t||!r)return null;if("User"===t)return c.user(r.group)||a.USER_ICON_MAP.default;if("Note"===t)return a.DOC_ICON_MAP.note;if("Issue"===t)return a.DOC_ICON_MAP.issue;if("ArtboardGroup"===t)return a.DOC_ICON_MAP.artboardgroup;if("Artboard"===t)return a.DOC_ICON_MAP.artboard;var n=t.toLowerCase();return c[n]&&r[n]?c[n](r[n]):null},action:function(e){var t=e.target_type,r=e.action_option;if(e.target&&e.target.book_icon){var n=i(e.target.book_icon);if(n)return n}if("Doc"===t){var u=this._entityTypeOfAction(e);return a.DOC_ICON_MAP[u]}if("Book"===t){if(e.target)return c.book(e.target);var l=this._entityTypeOfAction(e);return a.DOC_ICON_MAP[l]}return"User"===t&&e.target?c.user(e.target):"Resource"===t?Object(o.getFileIcon)({type:"file",ext:r}):"ArtboardGroup"===t?a.DOC_ICON_MAP.artboardgroup:"DocVersion"===t&&e.target?c.docVersion(e.target):"ActionTag"===t?a.DOC_ICON_MAP.actiontag:null},_entityTypeOfAction:function(e){var t=e.action_option.split("_"),r=null;return t.length>=1&&(r=t[t.length-1]),r},userActionLog:function(e){var t=e.target_type,r=e.subject_type;if("Book"===t)return e.target?c.book(e.target):a.BOOK_ICON_MAP.default;if("User"===t)return a.USER_ICON_MAP.default;if("Resource"===t)return c.resource({type:"file",ext:e.fileExt});var n="";return"Design"===r?n=a.DOC_ICON_MAP.artboardgroup:"Sheet"===r?n=a.DOC_ICON_MAP.sheet:"Table"===r?n=a.DOC_ICON_MAP.table:"Doc"===r?n=a.DOC_ICON_MAP.doc:"Thread"===r?n=a.DOC_ICON_MAP.thread:"Mind"===r?n=a.DOC_ICON_MAP.mind:"Board"===r?n=a.DOC_ICON_MAP.board:"Show"===r&&(n=a.DOC_ICON_MAP.show),n}},u={getName:function(e,t){if(!e||!t)return null;if(e=e.charAt(0).toLowerCase()+e.slice(1),t.book_icon){var r=i(t.book_icon);if(r)return r}if("resource"===e){var n="file";return"folder"===t.type&&(n="folder"),c.resource({type:n,ext:t.ext,name:t.title||t.name})}return c[e]?c[e](t):null},getStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var r=t.size,n=void 0===r?24:r;return{width:"".concat(n,"px"),height:"".concat(n,"px")}}},getSelectorIcons:function(){return a.ICON_SELECTOR},getSymbolName:i,getColor:function(e){if(e&&e.color)return e.color}};t.b=u},3625:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(106),o=r.n(n),a=(r(0),r(34)),i=r.n(a);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===c(a)?a:String(a)),n)}var o,a}var l=o()("biz.doc_events"),s={rename:"rename"},f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._event=new i.a}var t,r,n;return t=e,(r=[{key:"emit",value:function(e,t){if(!Object.keys(s).includes(e))throw new Error("event type ".concat(e," not support."));if(!t.doc_id)throw new Error("emit data missing data_id, data: ".concat(JSON.stringify(t)));l("".concat(e," emitted")),this._event.emit(e,t)}},{key:"off",value:function(e,t){this._event.off(e,t)}},{key:"on",value:function(e,t){if(!s[e])throw new Error("event type ".concat(e," not support."));this._event.on(e,t)}}])&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d=new f},3644:function(e,t,r){"use strict";r.d(t,"b",(function(){return y})),r.d(t,"a",(function(){return l}));var n=r(0),o=r.n(n),a=r(2965),i=r(287),c=r(3216),u=r(3394),l={Outline:"Outline",WordingComment:"WordingComment",SideComment:"SideComment",MoreFeature:"MoreFeature",EditDocMeta:"EditDocMeta",Review:"Review"},s="PanelLayoutChange",f="sidePanel-module_panel_Vr-DC";function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=Object(i.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(7),r.e(133)]).then(r.bind(null,3742))}),{suspense:!0}),v=Object(i.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(6),r.e(139)]).then(r.bind(null,4365))}),{suspense:!0});function y(e){var t=e.doc,r=Object(c.a)().sidePanelManager,i=p(Object(n.useState)({visible:!1,currentPanel:null,panelProps:{},containerStyle:{}}),2),l=i[0],h=i[1],y=Object(a.a)(t),b=l.visible,g=l.currentPanel,w=l.panelProps,_=l.containerStyle,O=Object(n.useRef)(null),E=function(e){h(e)},S=function(e){r.emitter.emit(s,{width:e.width})},x=g?r.getPanelContent(g):u.a,j=o.a.createElement(x,d({panel:g,hide:function(e){r.hide(e)},maxWidth:305,onLayout:S},w));return Object(n.useEffect)((function(){r.setRenderer(E)}),[r]),Object(n.useEffect)((function(){b||S({width:0})}),[b]),Object(n.useEffect)((function(){(null==y?void 0:y.id)!==(null==t?void 0:t.id)&&(r.flushAll(),r.hide(),r.registerContent("MoreFeature",m),r.registerContent("SideComment",v))}),[y,t,r]),Object(n.useEffect)((function(){return function(){r.flushAll(),r.hide()}}),[r]),o.a.createElement("div",{id:"sidePanel",ref:O,className:f,style:_},j)}r(3313)},365:function(e,t,r){"use strict";r(2248);var n=r(1261);r(870);t.a=n.a},3666:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0),o=r.n(n).a.createContext({ref:{current:null}})},3696:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return i}));var n=850,o=305,a=39,i=305},3697:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"c",(function(){return i}));var n=480,o=236,a=0,i=991},3713:function(e,t,r){"use strict";r.d(t,"a",(function(){return P}));r(63);var n=r(23),o=r(0),a=r.n(o),i=r(30),c=r(9),u=r.n(c),l=r(205),s=r(3330),f=r(3644),d=r(2965),p="style-module_container_5pQ7D",h="style-module_switchContent_FKoVH",m="style-module_iconWrapper_bAMkc",v="style-module_icon_ucXPM",y="style-module_disabled_4E4EI",b="style-module_switchActiveBg_3DMlv",g="style-module_commentActive_dTftF",w="style-module_moreFeatureActive_zPkBd",_="style-module_isPrevNotActive_xWwFe";function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function E(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==O(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===O(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j={WordingComment:f.a.WordingComment,SideComment:f.a.SideComment,MoreFeature:f.a.MoreFeature,Outline:f.a.Outline};function k(){}var P=function(e){var t=e.enableComment,r=e.isWordingComment,n=S(Object(o.useState)(null),2),i=n[0],c=n[1],u=Object(s.b)().sidePanelManager;return Object(o.useEffect)((function(){var e=u.subscribe((function(e){var t=e.currentPanel;e.visible?"EditDocMeta"===t||"Review"===t?c("MoreFeature"):t!==i&&c("MoreFeature"===t||"WordingComment"===t||"SideComment"===t||null===t?t:null):c(null)}));return function(){e()}}),[i]),a.a.createElement(l.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement(C,{enableComment:t,isWordingComment:r,onTabClick:k})}},a.a.createElement(C,{sidePanelManager:u,enableComment:t,isWordingComment:r,activeTab:i,onTabClick:function(e){i===e?(c(null),u.hide()):(c(e),u.show(e))}}))};function C(e){var t,r=e.activeTab,o=e.onTabClick,c=e.enableComment,l=e.isWordingComment,s=e.sidePanelManager,f=null===Object(d.a)(r);return a.a.createElement("div",{className:u()(p,(t={},E(t,g,r===j.WordingComment||r===j.SideComment),E(t,w,r===j.MoreFeature),E(t,_,f),t))},a.a.createElement("div",{className:b}),a.a.createElement("div",{className:h},a.a.createElement("div",{className:u()(m,E({},y,!c)),onMouseOver:function(){s&&s.getPanelContent("SideComment").preload&&s.getPanelContent("SideComment").preload()},onClick:function(){c?o(l?j.WordingComment:j.SideComment):n.a.info(__("请开启知识库设置中的评论功能"))}},a.a.createElement(i.b,{name:"comment-reply",className:v})),a.a.createElement("div",{className:m,onMouseOver:function(){s&&s.getPanelContent("MoreFeature").preload&&s.getPanelContent("MoreFeature").preload()},onClick:function(){return o(j.MoreFeature)}},a.a.createElement(i.b,{name:"rightboard",className:v}))))}},3739:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(){return window.self!==window.top}},3740:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(125);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function l(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}var f=function(e){try{return JSON.parse(e)}catch(e){return{}}},d=function(){function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{tab:"Catalog",sort:"content_updated_at"};c(this,e),this.fallbackValue=o,l(this,"namespace","ACTIVE_TAB_KEY"),l(this,"key",void 0),this.key="".concat(t.id,"/").concat(r.id,"/").concat(n.id)}var t,r,o;return t=e,(r=[{key:"getValue",value:function(){return(f(n.a.get(this.namespace))||{})[this.key]||this.fallbackValue}},{key:"setValue",value:function(e){var t=f(n.a.get(this.namespace))||{};t[this.key]=i(i(i({},this.fallbackValue),t[this.key]||{}),e),n.a.set(this.namespace,JSON.stringify(t))}},{key:"getTab",value:function(){var e,t;return null!==(e=null===(t=this.getValue())||void 0===t?void 0:t.tab)&&void 0!==e?e:this.fallbackValue.tab}},{key:"setTab",value:function(e){this.setValue({tab:e})}},{key:"getSort",value:function(){var e,t;return null!==(e=null===(t=this.getValue())||void 0===t?void 0:t.sort)&&void 0!==e?e:this.fallbackValue.sort}},{key:"setSort",value:function(e){this.setValue({sort:e})}}])&&u(t.prototype,r),o&&u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},3742:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return et})),r.d(t,"MoreFeaturesPanelExtraPropsProvider",(function(){return We})),r.d(t,"useMoreFeaturesPanelExtraProps",(function(){return Ve}));r(1081);var n=r(389),o=(r(103),r(60)),a=r(0),i=r.n(a),c=r(570),u=r(9),l=r.n(u),s=r(30),f=r(44),d=r(287),p=r(3216),h=(r(953),r(443)),m=r(84),v=r.n(m),y={contentContainer:"docOperationTabContent-module_contentContainer_pj-fE",gridContainer:"docOperationTabContent-module_gridContainer_io1zz",adapterPresent:"docOperationTabContent-module_adapterPresent_+zGHc",adapterPresentButton:"docOperationTabContent-module_adapterPresentButton_xjI7S",gridItem:"docOperationTabContent-module_gridItem_auLUI",gridItemIconWrapper:"docOperationTabContent-module_gridItemIconWrapper_3DutZ",gridItemIcon:"docOperationTabContent-module_gridItemIcon_824Rd",gridItemText:"docOperationTabContent-module_gridItemText_BF9we",docWidthSetting:"docOperationTabContent-module_docWidthSetting_uGtPl",docIconWrapper:"docOperationTabContent-module_docIconWrapper_QVEbI",textWrapper:"docOperationTabContent-module_textWrapper_P6TYG",title:"docOperationTabContent-module_title_hZnNH",desc:"docOperationTabContent-module_desc_VxDc1",switchWrapper:"docOperationTabContent-module_switchWrapper_ZQczO",opertaionMenus:"docOperationTabContent-module_opertaionMenus_gctV0",menuHeader:"docOperationTabContent-module_menuHeader_dbQ0h",divide:"docOperationTabContent-module_divide_k2gBv",menuItem:"docOperationTabContent-module_menuItem_lC5io",menuIconWrapper:"docOperationTabContent-module_menuIconWrapper_XiRdx",menuIcon:"docOperationTabContent-module_menuIcon_s1LqR",menuText:"docOperationTabContent-module_menuText_kVtjJ",isDanger:"docOperationTabContent-module_isDanger_xfxaY"};function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e){var t=e.getEditorLayout,r=e.onClick,n=e.cmd,o=b(Object(a.useState)(t()),2),c=o[0];o[1];return i.a.createElement("div",{className:y.docWidthSetting},i.a.createElement("div",{className:y.docIconWrapper},i.a.createElement(s.b,{name:n.icon})),i.a.createElement("div",{className:y.textWrapper},i.a.createElement("div",{className:y.text},__(n.title)),i.a.createElement("div",{className:y.desc},__(n.describe))),i.a.createElement(h.a,{onChange:function(e){r(n.cmd,e?v.a.VIEWPORT.adapt:v.a.VIEWPORT.fixed)},size:"small",defaultChecked:c===v.a.VIEWPORT.adapt}))}var _=r(3237),O=["cmd","onClick"];function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E.apply(this,arguments)}function S(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function x(e){var t=e.cmds,r=e.onClick,n=e.doc,o=e.componentsPreload;return i.a.createElement("div",{className:y.gridContainer},t.map((function(e){return e.cmd===f.a.DOC.enter_presentation_mode.cmd?i.a.createElement("div",{key:e.cmd,className:l()(y.gridItem,y.adapterPresent)},i.a.createElement(_.a,{doc:n,button:function(t){var n=t.onPresent;return i.a.createElement("div",{className:y.adapterPresentButton,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){r(e.cmd),n()}))},i.a.createElement("div",{className:y.gridItemIconWrapper},i.a.createElement(s.b,{name:e.sceneIcon,className:y.gridItemIcon})),i.a.createElement("div",{className:y.gridItemText},e.title))}})):e.cmd===f.a.DOC.show_knowledge_graph.cmd?i.a.createElement(j,{key:e.cmd,cmd:e,onClick:r,onMouseOver:function(){return o.SkylinkModal.preload()},"data-aspm-click":"d223107"}):i.a.createElement(j,{key:e.cmd,cmd:e,onClick:r})})))}function j(e){var t=e.cmd,r=e.onClick,n=S(e,O);return i.a.createElement("div",E({key:t.cmd,className:y.gridItem,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return r(t.cmd)}))},n),i.a.createElement("div",{className:y.gridItemIconWrapper},i.a.createElement(s.b,{name:t.sceneIcon,className:y.gridItemIcon})),i.a.createElement("div",{className:y.gridItemText},t.title))}function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function P(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e){var t=e.cmds,r=e.onClick,n=e.componentsPreload;if(0===t.length)return null;var o=C(t),a=o[0],c=o.slice(1);return i.a.createElement("div",{className:y.opertaionMenus},i.a.createElement("div",{className:y.menuHeader},i.a.createElement("div",{className:y.menuItem,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return r(a.cmd)})),onMouseOver:function(){return n.EditDocMetaPanel.preload()}},i.a.createElement("div",{className:y.menuIconWrapper},i.a.createElement(s.b,{name:a.icon,className:y.menuIcon})),i.a.createElement("div",{className:y.menuText},a.title))),i.a.createElement("div",{className:y.divide}),i.a.createElement("div",{className:y.menuBody},c.map((function(e){return i.a.createElement("div",{key:e.cmd,className:l()(y.menuItem,P({},y.isDanger,"delete"===e.cmd)),onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return r(e.cmd)}))},i.a.createElement("div",{className:y.menuIconWrapper},i.a.createElement(s.b,{name:e.icon,className:y.menuIcon})),i.a.createElement("div",{className:y.menuText},e.title))}))))}function A(e){var t=e.actionsMap,r=e.getEditorLayout,n=e.onItemClick,o=e.doc,a=e.componentsPreload,c=t.gridCmds,u=t.widthSettingCmd,l=t.menuCmds;return i.a.createElement("div",{className:y.contentContainer},(null==c?void 0:c.length)>0?i.a.createElement(x,{cmds:c,onClick:n,doc:o,componentsPreload:a}):null,u?i.a.createElement(w,{cmd:u,onClick:n,getEditorLayout:r}):null,i.a.createElement(L,{cmds:l,onClick:n,componentsPreload:a}))}var I=r(1522),N=r.n(I),D={contentContainer:"docInfoTabContent-module_contentContainer_gsZxS",infoItem:"docInfoTabContent-module_infoItem_SOSOp",infoItemName:"docInfoTabContent-module_infoItemName_QyDuI",infoValueWrapper:"docInfoTabContent-module_infoValueWrapper_STlB+",infoItemValue:"docInfoTabContent-module_infoItemValue_9QlLv",operation:"docInfoTabContent-module_operation_7Z9sK",menuItem:"docInfoTabContent-module_menuItem_R3eoi",menuIconWrapper:"docInfoTabContent-module_menuIconWrapper_5HwgU",menuIcon:"docInfoTabContent-module_menuIcon_LqPGU",menuText:"docInfoTabContent-module_menuText_7I8uM"};function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B(e){var t=e.name,r=e.value,n=e.suffix,c=function(){var e=R(Object(a.useState)(!1),2),t=e[0],r=e[1],n=Object(a.useRef)(null);return Object(a.useEffect)((function(){n.current&&n.current.clientWidth!==n.current.scrollWidth&&r(!0)}),[]),{ellipsisDomRef:n,hasEllipsis:t}}(),u=c.hasEllipsis,l=c.ellipsisDomRef,s=i.a.createElement("div",{className:D.infoValueWrapper},i.a.createElement("div",{ref:l,className:D.infoItemValue},r),i.a.createElement("div",null,n));return i.a.createElement("div",{className:D.infoItem},i.a.createElement("div",{className:D.infoItemName},t),u?i.a.createElement(o.a,{title:r,placement:"bottomRight"},s):s)}function U(e){var t,r=e.cmds,n=e.getWordCount,o=e.doc,a=e.onClick,c=o.contributors,u=o.last_editor,l=i.a.useMemo((function(){var e=c.findIndex((function(e){return e.name===u.name})),t=F(c);-1!==e&&t.splice(e,1);var r=t;return r.unshift(u),r.map((function(e){return e.name})).join("、")}),[c,u]),f=c.length>=2?__("等{count}人",{count:c.length}):null;return i.a.createElement("div",{className:D.contentContainer},i.a.createElement("div",{className:D.docInfo},"Doc"===o.type&&i.a.createElement(B,{name:__("字数统计"),value:n()||0}),i.a.createElement(B,{name:__("创建时间"),value:N.a.format(o.created_at,{onlyDate:!0})}),i.a.createElement(B,{name:__("最后编辑时间"),value:N.a.format(o.content_updated_at)}),i.a.createElement(B,{name:__("创建者"),value:null===(t=o.user)||void 0===t?void 0:t.name}),i.a.createElement(B,{name:__("共同编辑者"),value:l,suffix:f}),i.a.createElement(B,{name:__("阅读数"),value:o.hits||0}),i.a.createElement(B,{name:__("评论数"),value:o.comments_count||0}),i.a.createElement(B,{name:__("点赞数"),value:o.likes_count||0})),i.a.createElement("div",{className:D.operation},r.map((function(e){return i.a.createElement("div",{key:e.cmd,className:D.menuItem,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return a(e.cmd)}))},i.a.createElement("div",{className:D.menuIconWrapper},i.a.createElement(s.b,{name:e.icon,className:D.menuIcon})),i.a.createElement("div",{className:D.menuText},e.title))}))))}var z="moreFeaturesTab-module_container_OYy7d",W="moreFeaturesTab-module_toggleShow_CvZMQ",V="moreFeaturesTab-module_featuresTab_vfMt6",H="moreFeaturesTab-module_tabBar_IP4dl",q="moreFeaturesTab-module_tabNav_PI68Z",K="moreFeaturesTab-module_tabNavContent_gGfBc",Y="moreFeaturesTab-module_icon_pSX83",$="moreFeaturesTab-module_bottomLine_yGW3o",Z="moreFeaturesTab-module_active_byq6q",J=r(264),X=r(1181),Q=r.n(X),ee=r(57),te=r(3305),re=r(2909),ne=r(758),oe=r(2965),ae=r(1333),ie=r(446),ce=r(1514),ue=(r(92),r(45)),le=r(633);function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var de=Object(le.a)({loader:function(){return r.e(108).then(r.bind(null,2988))}});function pe(e){var t=e.contentReportVisible,r=e.contentTargetId,n=e.contentTargetType,o=e.toggleContentReport;return i.a.createElement(ue.a,{destroyOnClose:!0,title:null,footer:null,visible:t,onCancel:function(){return o(!1)}},i.a.createElement(de,{targetId:r,targetType:n,onClose:function(){return o(!1)}}))}var he=r(2302),me=r(2303),ve=r(3202);function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function be(){be=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==ye(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function ge(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function we(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ge(a,n,o,i,c,"next",e)}function c(e){ge(a,n,o,i,c,"throw",e)}i(void 0)}))}}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ee(e){var t=e.blockingDoc,r=e.contentTargetType,n=e.onSubmitBlock,o=e.onCancelBlock;return i.a.createElement(ve.a,{punishType:r,punishSelect:["blocked","banned"],doc:t,onSubmit:n,onCancel:o})}var Se=r(3306);function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function je(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){Ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ce(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==xe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||Le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){if(e){if("string"==typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ae(e,t):void 0}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ie(e){var t=e.doc,r=e.book,n=e.group,o=e.me,i=e.version,u=e.showHistory,l=e.onClickInMoreFeaturesTab,s=Object(c.e)(),d=Object(ee.useHistory)(),p=Object(oe.a)(t),h=Object(a.useRef)(null),m=Object(ne.b)(),v=Te(Object(a.useState)(E(t)),2),y=v[0],b=v[1],g=J.a.adjustCommands(y),w=function(e){var t=e.doc,r=e.note,n=t&&t.id?t.id:r&&r.id,o=t&&t.id?"Doc":"Note",i=se(Object(a.useState)(!1),2),c=i[0],u=i[1];return{contentTargetId:n,contentTargetType:o,contentReportVisible:c,toggleContentReport:function(e){u(e=void 0!==e?e:!c)}}}({doc:t}),_=function(e){var t=e.doc,r=void 0===t?{id:null}:t,n=e.note,o=window.appData.me,i=void 0===o?{}:o,u=Object(c.e)(),l=r&&r.id?"Doc":"Note",s=_e(Object(a.useState)(null),2),f=s[0],d=s[1],p=function(){var e=we(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.id){e.next=3;break}return window.location.reload(),e.abrupt("return");case 3:return e.next=5,u({type:"doc/update",payload:t});case 5:d(null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{blockingDoc:f,contentTargetType:l,onBlock:function(){d(r&&r.id?r:n)},onUnBlock:function(){var e,t=i.isSecurityOperator;ue.a.confirm({content:"确认取消屏蔽文档？",okText:"确认",cancelText:"关闭",onOk:(e=we(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r||!r.id){e.next=10;break}if(!t){e.next=6;break}return e.next=4,Object(he.unblockForSecurityOps)({id:null==r?void 0:r.id});case 4:e.next=7;break;case 6:Object(he.unblock)({id:null==r?void 0:r.id});case 7:p({read_status:1}),e.next=17;break;case 10:if(!t){e.next=15;break}return e.next=13,Object(me.unblockForSecurityOps)({id:null==r?void 0:r.id});case 13:e.next=16;break;case 15:Object(me.unblock)({id:null==n?void 0:n.id});case 16:window.location.reload();case 17:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})},onSubmitBlock:p,onCancelBlock:function(){d(null)}}}({doc:t});function O(){var e=window.appData,a=e.isPublicCloud,i=e.share;return a&&t.user_id!==o.id&&(Object(re.a)(n,r,t)||Object(re.b)(i,r,t))}function E(t){var r,n=e.version,o=e.book,a=e.me,i=e.note,c={disableDocumentCopy:m.settings&&!0===m.settings.disableDocumentCopy,isDocCollaborator:m.isDocCollaborator,page:m.sharePage?"share":"read",isYuque:m.isYuque},u=n?J.a.additionalActionsInVersionReadPage(t):J.a.additionalActionsInReadPage(t,o,c),l=f.a.DOC,s=l.translate_zh,d=l.translate_en,p=l.view_original,v=l.ban_doc,y=l.unban_doc,b=l.content_report,g=l.divide,w=l.fullscreen,_=l.exit_fullscreen;if(t.content&&"Doc"===t.type&&!h.current){var E,S,x=new URLSearchParams(window.location.search),j=Object(te.a)(t.content.replace(/<[^>]+>/g,"")||t.description||t.title),k=x.get("translate")||("zh"===j?"en":"zh");if(h.current={srcLanguage:j,tgtLanguage:k},j!==k&&["en","zh"].includes(k)&&(E=x.has("translate")?p:"en"===k?d:s),null!=a&&a.id)null===(S=u[0].actions)||void 0===S||S.splice(1,0,E)}(O()&&(u.push(g),u.push(b)),a.isAdmin||a.isSecurityOperator)&&(u.push(g),u.push(v),((null==t?void 0:t.read_status)>=99||(null==i||null===(r=i.doclet)||void 0===r?void 0:r.status)>=99)&&u.push(y));if(Q.a.isFullscreen){var P=u.findIndex((function(e){return e.cmd===w.cmd}));-1!==P&&u.splice(P,1,_)}return u}function S(){J.a.translateDoc(Pe(Pe({},h.current),{},{withComment:r.enable_comment}))}Object(a.useEffect)((function(){p!==t&&(h.current=null,b(E(t)))}),[p,t]),Object(a.useEffect)((function(){var e=new URLSearchParams(window.location.search);e.has("translate")&&(h.current=Pe(Pe({},h.current),{},{tgtLanguage:e.get("translate")}),S())}),[]);var x=Object(Se.b)({group:n,book:r,doc:t,actions:g,history:d,dispatch:s}),j=x.doDocAction,k=x.saveMeta,P=x.state,C=P.currentCatalogNode,T=P.isCatalogNode&&{toc_node_uuid:C.uuid,toc_node_url:C.url,toc_node_title:C.title},L=Object(ae.a)({book:r,doc:t,commandParams:T,dispatch:s,onCommandsExecuted:function(e){var t=e.cmd;t!==f.a.DOC.create_review.cmd?ce.a.isMixingType(r)&&j(t):s({type:"review/update",payload:{showReviewDrawer:!0,showCreateReviewDrawer:!0,isFromTab:!0}})}});function A(e){var t=window.location,r=f.a.DOC,n=r.translate_en,o=r.translate_zh,a=r.view_original;e.set("translate",h.current.tgtLanguage),d.push("".concat(t.pathname,"?").concat(e.toString())),S(),setTimeout((function(){var e="zh"===h.current.tgtLanguage?o:n,t=y.find((function(e){return"scene"===e.type}));if(t){var r,i=null===(r=t.actions)||void 0===r?void 0:r.findIndex((function(t){return t.cmd===e.cmd}));-1!==i&&t.actions.splice(i,1,a)}b(je(y))}))}function I(e){var t=je(y);if(e){var r=t.findIndex((function(e){return e.cmd===f.a.DOC.fullscreen.cmd}));-1!==r&&t.splice(r,1,f.a.DOC.exit_fullscreen)}else{var n=t.findIndex((function(e){return e.cmd===f.a.DOC.exit_fullscreen.cmd}));-1!==n&&t.splice(n,1,f.a.DOC.fullscreen)}b(t)}Object(a.useEffect)((function(){function e(){Q.a.isFullscreen?I(!0):I(!1)}return Q.a.onchange(e),function(){Q.a.off(e)}}),[]);return{actions:g,showSkylinkEntry:function(){return!i&&["Doc","Board","Sheet"].includes(t.type)},onClick:function(e,t){!function(e){var t=e.key,r=window.location,n=new URLSearchParams(r.search),o=f.a.DOC,a=o.translate_en,i=o.translate_zh,c=o.view_original,l=o.history,s=o.ban_doc,d=o.unban_doc,p=o.content_report,h=o.fullscreen,m=o.exit_fullscreen;switch(t){case a.cmd:case i.cmd:A(n);break;case h.cmd:I(!0);break;case m.cmd:I(!1);break;case c.cmd:n.delete("translate"),r.replace("".concat(r.pathname,"?").concat(n.toString()));break;case l.cmd:u();break;case s.cmd:_.onBlock();break;case d.cmd:_.onUnBlock();break;case p.cmd:w.toggleContentReport()}}({key:e}),l({key:e}),L.doAction(e,t),Object(ie.a)("c34619.d69461",{create_type:e})},docActionModel:L,contentReportViewModel:w,auditBlockViewModel:_,commandParams:T,saveMeta:k}}var Ne=r(2951),De=r(2950),Re=r(2912),Me=r(2946),Fe=r(2246),Ge=r(33),Be=r(2970);function Ue(e){var t=e.doc,r=e.book,n=e.commandParams,o=e.docActionModel,a=e.contentReportViewModel,i=e.auditBlockViewModel,c=o.cmd,u=o.sendAlimail,l=o.mailSending,s=o.reset,d=o.doAction,p=o.setSendAlimail,h=o.setMailSending,m=o.contextHolder,y=a.contentReportVisible,b=a.contentTargetId,g=a.contentTargetType,w=a.toggleContentReport,_=i.blockingDoc,O=i.onSubmitBlock,E=i.onCancelBlock;return React.createElement(React.Fragment,null,m,c===f.a.DOC.export_doc.cmd&&React.createElement(Re.a,{doc:t,bookId:r.id,onCancel:s,exportParams:n}),c===f.a.BOOK.export_book.cmd&&React.createElement(Fe.a,{visible:!0,book:r,exportParams:n,onCancel:s}),c===f.a.DOC.import_to_doc.cmd&&React.createElement(Me.a,{book:r,formats:J.a.getImportFormats({multi:!1}),importType:v.a.IMPORT_TYPE.PARSE,onCancel:s,onSuccess:function(t){e.onCommandsExecuted({cmd:c,result:t})}}),c===f.a.DOC.import_to_book.cmd&&React.createElement(Me.a,{book:r,importParams:n,formats:J.a.getImportFormats({multi:!0}),importType:v.a.IMPORT_TYPE.CREATE,onCancel:s,onSuccess:function(t){e.onCommandsExecuted({cmd:c,result:t})},group:window.appData.group}),c===f.a.DOC.save_as_template.cmd&&React.createElement(De.a,{visible:c===f.a.DOC.save_as_template.cmd,onCancel:s,modalTitle:__("另存为模板"),book:r,doc:e.doc,group:window.appData.group,organization:window.appData.organization,docletType:e.doc.type,onOpenTemplateSelector:function(){return d(f.a.DOC.create_from_template.cmd)},templateProxy:Ge.a.templates.v1,docProxy:Ge.a.docs,inEdit:e.inEdit}),c===f.a.DOC.save_published_as_version.cmd&&React.createElement(Ne.a,{doc:t,docDomain:"Doc",type:"published",onCancel:s,docVersionProxy:Ge.a.docVersions}),React.createElement(ue.a,{width:500,visible:u,footer:null,closable:!l,maskClosable:!1,onCancel:function(){p(!1)}},u&&React.createElement(Be.a,{onMailSended:function(){h(!1)},onMailSending:function(){h(!0)},doc:t})),y?React.createElement(pe,{contentReportVisible:y,contentTargetId:b,contentTargetType:g,toggleContentReport:w}):null,_?React.createElement(Ee,{blockingDoc:_,contentTargetType:g,onSubmitBlock:O,onCancelBlock:E}):null)}var ze=Object(a.createContext)({showHistory:function(){}});function We(e){return i.a.createElement(ze.Provider,{value:e},e.children)}function Ve(){return Object(a.useContext)(ze)}function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function qe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==He(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===He(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $e=Object(d.b)((function(){return r.e(125).then(r.bind(null,4354))}),{suspense:!0}),Ze=Object(d.b)((function(){return r.e(93).then(r.bind(null,4371))}),{suspense:!0}),Je="DocOpertaion",Xe="DocInfo";var Qe=Object(c.d)((function(e){return{me:e.me,group:e.group,book:e.book,doc:e.doc,skylink:e.skylink}}))((function(e){var t=e.onLayout,r=e.me,u=e.group,d=e.book,h=e.doc,m=e.skylink,v=void 0===m?{}:m,y=Ke(Object(a.useState)(!1),2),b=y[0],g=y[1],w=Object(c.e)(),_=Object(a.useRef)(null),O=Object(p.a)().sidePanelManager,E=Ve().showHistory,S=Ie({me:r,group:u,book:d,doc:h,showHistory:E,onClickInMoreFeaturesTab:function(e){var t=e.key;t===f.a.DOC.show_knowledge_graph.cmd&&w({type:"skylink/update",payload:{modalVisible:!0}}),t===f.a.DOC.edit_meta.cmd&&O.show("EditDocMeta",{panelProps:{doc:h,book:d,group:u,saveMeta:T,onGoBack:N,onClose:D}}),t===f.a.DOC.print.cmd||f.a.DOC.export_doc}}),x=S.actions,j=S.showSkylinkEntry,k=S.onClick,P=S.docActionModel,C=S.commandParams,T=S.saveMeta,L=S.contentReportViewModel,I=S.auditBlockViewModel,N=function(){O.show("MoreFeature")},D=function(){O.hide()},R={SkylinkModal:{preload:function(){return Ze.preload()}},EditDocMetaPanel:{preload:function(){return $e.preload()}}},M=Object(a.useMemo)((function(){var e,t,r=x.filter((function(e){return e.cmd!==f.a.DOC.divide.cmd})).map((function(e){return"scene"===e.type&&("Doc"===h.type&&e.actions.push(f.a.DOC.enter_presentation_mode),j()&&e.actions.push(f.a.DOC.show_knowledge_graph)),e})),n="scene"===(null===(e=r[0])||void 0===e?void 0:e.type),o=n?null===(t=r[0])||void 0===t?void 0:t.actions:[],a=n?r.slice(1):r;return{operationTabActionsMap:{gridCmds:[f.a.DOC.enter_presentation_mode,f.a.DOC.show_knowledge_graph,f.a.DOC.create_review,f.a.DOC.send_mail,f.a.DOC.translate_zh,f.a.DOC.translate_en,f.a.DOC.view_original].filter((function(e){return o.find((function(t){return t.cmd===e.cmd}))})),widthSettingCmd:"Doc"===h.type&&"markdown"!==h.format?f.a.DOC.document_layout:void 0,menuCmds:[f.a.DOC.edit_meta,f.a.DOC.fullscreen,f.a.DOC.exit_fullscreen,f.a.DOC.save_as_template,f.a.DOC.print,f.a.DOC.export_doc,f.a.DOC.copy,f.a.DOC.move,f.a.DOC.delete,f.a.DOC.content_report,f.a.DOC.ban_doc,f.a.DOC.unban_doc].filter((function(e){return a.find((function(t){return t.cmd===e.cmd}))}))},infoActionsMap:{versionCmds:[f.a.DOC.history,f.a.DOC.save_published_as_version].filter((function(e){return a.find((function(t){return t.cmd===e.cmd}))}))}}}),[x]),F=M.operationTabActionsMap,G=M.infoActionsMap;return Object(a.useEffect)((function(){t({width:305})}),[]),Object(a.useEffect)((function(){setTimeout((function(){g(!0)})),O.registerContent("EditDocMeta",$e)}),[]),i.a.createElement("div",{ref:_,className:l()(z,qe({},W,b))},i.a.createElement(n.a,{className:V,defaultActiveKey:Je,renderTabBar:function(e){return i.a.createElement("div",{className:H},i.a.createElement("div",{className:q},i.a.createElement(o.a,{title:__("操作"),mouseEnterDelay:1,placement:"bottom"},i.a.createElement("div",{className:l()(K,qe({},Z,e.activeKey===Je)),onClick:function(){return e.onTabClick(Je)}},i.a.createElement(s.b,{name:"functionboard",width:18,height:18,className:Y}),i.a.createElement("div",{className:$})))),i.a.createElement("div",{className:q},i.a.createElement(o.a,{title:__("信息"),mouseEnterDelay:1,placement:"bottom"},i.a.createElement("div",{className:l()(K,qe({},Z,e.activeKey===Xe)),onClick:function(){return e.onTabClick(Xe)}},i.a.createElement(s.b,{name:"information",width:18,height:18,className:Y}),i.a.createElement("div",{className:$})))))}},i.a.createElement(n.a.TabPane,{key:Je},i.a.createElement(A,{doc:h,actionsMap:F,onItemClick:k,getEditorLayout:P.getEditorLayout,componentsPreload:R})),i.a.createElement(n.a.TabPane,{key:Xe},i.a.createElement(U,{cmds:G.versionCmds,getWordCount:P.getWordCount,doc:h,onClick:k})),i.a.createElement(Ue,{book:d,doc:h,commandParams:C,docActionModel:P,contentReportViewModel:L,auditBlockViewModel:I}),v.modalVisible&&i.a.createElement(Ze,null)))}));Qe.displayName="ConnectedMoreFeaturesTab";var et=Qe},3753:function(e,t,r){"use strict";r.r(t);r(166);var n=r(31),o=r(0),a=r.n(o),i=r(2243),c=r(3242),u={bookOverviewMoreActionsOverlay:"bookOverviewMoreSetting-module_bookOverviewMoreActionsOverlay_LvPUV",memberIcon:"bookOverviewMoreSetting-module_memberIcon_2acB1"},l=r(3037),s=r(30);t.default=function(e){var t,r,o=e.book,f=e.group;if(!o.abilities)return null;var d=null===(t=o.abilities)||void 0===t?void 0:t.create_doc,p=null===(r=o.abilities)||void 0===r?void 0:r.manage;return d?a.a.createElement(i.a,{direction:"horizontal",className:e.className,overlayClassName:u.bookOverviewMoreActionsOverlay,getPopupContainer:e.getPopupContainer||function(e){return e.parentNode},placement:e.placement||"bottomLeft",content:a.a.createElement(n.a,{selectable:!1,mode:"vertical"},e.prepend,[{key:"setting",href:"/".concat(f.login,"/").concat(o.slug,"/settings/basic"),icon:a.a.createElement(s.b,{width:16,className:u.actionIcon,name:"more-settings"}),name:__("设置"),enabled:d},{key:"toc",href:"/".concat(f.login,"/").concat(o.slug,"/toc"),icon:a.a.createElement(s.b,{width:16,className:u.actionIcon,name:"directory"}),name:__("目录管理"),enabled:d},{key:"docs",href:"/".concat(f.login,"/").concat(o.slug,"/toc?tempStore=1"),icon:a.a.createElement(s.b,{width:16,className:u.actionIcon,name:"doc-management"}),name:__("文档管理"),enabled:d},{key:"permission",href:"/r/".concat(f.login,"/").concat(o.slug,"/collaborators"),icon:a.a.createElement(s.b,{width:16,className:u.actionIcon,name:"permission"}),name:__("权限"),enabled:d},{key:"statistics",href:"/r/".concat(f.login,"/").concat(o.slug,"/statistics"),icon:a.a.createElement(s.b,{width:16,className:u.actionIcon,name:"statistics"}),name:__("统计"),enabled:p},{key:"trash",href:"/r/".concat(f.login,"/").concat(o.slug,"/trash"),icon:a.a.createElement(s.b,{width:16,className:u.actionIcon,name:"icon-delete"}),name:__("回收站"),enabled:d}].map((function(e){if(!e.enabled)return null;var t="statistics"===e.key;return a.a.createElement(n.a.Item,{key:e.key,onClick:function(){!t||c.a.hasAbility()?window.location.href=e.href:c.a.showMemberIntro()},icon:e.icon},a.a.createElement("span",null,e.name),t&&a.a.createElement(l.a,{className:u.memberIcon,group:f}))})))}):null}},3802:function(e,t,r){"use strict";r(63);var n=r(23),o=(r(103),r(60)),a=(r(279),r(136)),i=r(0),c=r.n(i),u=r(2),l=r.n(u),s=r(9),f=r.n(s),d=r(120),p=r.n(d),h=r(570),m=r(57),v=r(2806),y=r.n(v),b=r(289),g=r.n(b),w=r(324),_=r.n(w),O=r(369),E=r(3182),S=r(565),x=r(735),j=r(748),k=r(30),P=r(951),C=r(156),T=r(287),L=r(3696),A=r(3666),I=r(3742),N=r(3404),D=r(264),R=r(2263),M=r(3105),F=r(3697),G=(r(62),r(21)),B=r(2909),U=r(33),z=r(2247),W=r(93),V=r(2952),H=r(3325),q=r(878),K=r(3367),Y=r(3237),$=r(3119),Z=r(3307),J=r(3713),X=r(3116);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function ee(){ee=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Q(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function te(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function re(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){te(a,n,o,i,c,"next",e)}function c(e){te(a,n,o,i,c,"throw",e)}i(void 0)}))}}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fe(n.key),n)}}function ae(e,t){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ae(e,t)}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=le(e);if(t){var o=le(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ce(this,r)}}function ce(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ue(e)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},le(e)}function se(e,t,r){return(t=fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e){var t=function(e,t){if("object"!==Q(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Q(t)?t:String(t)}var de=Object(T.d)((function(){return r.e(69).then(r.bind(null,3921))}),{suspense:!0}),pe=Object(T.d)((function(){return r.e(22).then(r.bind(null,3920))}),{suspense:!0}),he=Object(T.d)((function(){return r.e(83).then(r.bind(null,2921))}),{suspense:!0}),me=Object(T.b)((function(){return r.e(78).then(r.bind(null,1356)).then((function(e){return e.default.Login}))}),{suspense:!0}),ve=Object(T.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(26)]).then(r.bind(null,2984)).then((function(e){return e.ShareButton}))}),{suspense:!0}),ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ae(e,t)}(i,e);var t,r,n,a=ie(i);function i(){var e;ne(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return se(ue(e=a.call.apply(a,[this].concat(r))),"showContentReportEntry",(function(){var t=e.props,r=t.doc,n=t.book,o=t.group,a=t.me,i=window.appData,c=i.isPublicCloud,u=i.share;return c&&r.user_id!==a.id&&(Object(B.a)(o,n,r)||Object(B.b)(u,n,r))})),se(ue(e),"isAnonymous",(function(){return!e.props.me.id})),se(ue(e),"showEditEntry",(function(){if(window.appData.sharePage)return!1;var t=e.props,r=t.doc,n=t.version;return!e.isSingleDocMode()&&(!n&&("Thread"!==r.type&&(r.abilities&&r.abilities.update)))})),se(ue(e),"onChangeShare",function(){var t=re(ee().mark((function t(r){var n;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.a.docs.updateMeta(r,{ignoreGlobalMessage:!0});case 2:n=t.sent,e.props.dispatch({type:"doc/update",payload:{public:n.public,password:n.password,indexed_level:n.indexed_level,privacy_migrated:n.privacy_migrated}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}return t=i,(r=[{key:"componentDidMount",value:function(){setTimeout((function(){de.start(),pe.start(),he.start()}),2e3)}},{key:"isSingleDocMode",value:function(){return"singleDoc"in this.props.location.query}},{key:"showBackToToc",value:function(){var e,t,r=this.props,n=r.doc,o=r.book;return!r.version&&!!o&&this.isSingleDocMode()&&((null===(e=o.abilities)||void 0===e?void 0:e.read)||(null===(t=n.abilities)||void 0===t?void 0:t.update))}},{key:"showShareToDigitalGarden",value:function(){var e=this.props.me,t=window.appData,r=t.sharePage,n=t.enableUserFeed,o=t.organization;if(this.isSingleDocMode())return!1;if(r||null!=o&&o.id)return!1;var a=this.props,i=a.group,c=a.doc,u=a.book;if(a.version)return!1;if(!c||!u||!i)return!1;var l=Object(z.c)({type:"doc",target:c,group:i,book:u});return[W.PUBLIC.public,W.PUBLIC.intranet_all,W.PUBLIC.intranet].includes(l)&&u.user_id===e.id&&n}},{key:"showShareEntry",value:function(){var e,t;if(window.appData.sharePage)return!1;var r=this.props,n=r.doc,o=r.version;return!this.isSingleDocMode()&&!o&&((null===(e=n.abilities)||void 0===e?void 0:e.share)||(null===(t=n.abilities)||void 0===t?void 0:t.create_collaborator))}},{key:"showCollaborationEntry",value:function(){if(window.appData.sharePage)return!1;var e=this.props,t=e.doc;return!e.version&&t.abilities&&t.abilities.create_collaborator}},{key:"showSkylinkEntry",value:function(){var e=this.props,t=e.doc;return!e.version&&["Doc","Board","Sheet"].includes(t.type)}},{key:"renderOriginDocEntry",value:function(){var e=this.props,t=e.doc,r=e.book,n=e.group,o=e.version,a={thread:__("查看原始话题"),sheet:__("查看原始表格"),doc:__("查看原始文档")};return o?c.a.createElement("span",{className:"header-action-item"},c.a.createElement(G.a,{href:"/".concat(r.namespace,"/").concat(t.slug)},__("查看最新文档"))):window.appData.sharePage?t.abilities&&t.abilities.read_origin?c.a.createElement("span",{className:"header-action-item"},c.a.createElement(G.a,{href:"/".concat(n.login,"/").concat(r.slug,"/").concat(t.slug),"data-testid":"view-origin-btn"},a[t.type.toLowerCase()]||a.doc)):void 0:null}},{key:"render",value:function(){var e,t,r,n=this.props,a=n.book,i=n.group,u=n.me,l=n.doc,s=n.version,d=n.style,p=n.shouldHideLogo,h=n.shouldShowSeparator,m=n.showBreadcrumb,v=window.appData.organization,y=f()("header",this.props.className,[X.a.wrapper],se({"doc-version-head":!!s},X.a.docTypeHead,"Doc"===l.type)),b={id:l.mark&&l.mark.id,target_id:l&&l.id,target_type:l.mark&&l.mark.target_type,action_tags:l.mark&&l.mark.action_tags};return c.a.createElement("div",{id:"header",className:y,"data-header-mode":"title","data-aspm":"c36321",style:d},c.a.createElement("div",{className:"doc-head-inner"},c.a.createElement("div",{className:f()("header-crumb","title-visible",{"with-separator":h,"only-doc-title":p&&!m})},null!=l&&l.error?null:c.a.createElement(c.a.Fragment,null,c.a.createElement(q.o,{doc:l}),c.a.createElement(q.b,{book:a,group:i,doc:l,organization:v,placement:"bottom"}),"Doc"===(null==l?void 0:l.type)&&c.a.createElement("span",{style:{marginLeft:8}},c.a.createElement(pe,{isTagMode:!0,showClose:!0})),c.a.createElement(de,{doc:l,showClose:!0}),c.a.createElement(he,{doc:l,type:"Doc",tagMode:!0}))),c.a.createElement("div",{className:"header-action"},null!=l&&l.error?null:c.a.createElement(c.a.Fragment,null,l.id&&!s&&c.a.createElement("div",{className:X.a.mark,"data-aspm-click":"d223108"},c.a.createElement(V.a,{iconSize:20,target:b,targetType:"Doc",isMiniType:!0})),this.showCollaborationEntry()&&c.a.createElement("div",{className:X.a.collaborate},c.a.createElement(ve,{shareViewType:"DOC",key:"collaborator-doc-".concat(l.id),targetResource:l,organization:v,book:a,group:i,canCollaborator:null===(e=l.abilities)||void 0===e?void 0:e.create_collaborator,defaultPanel:"collaborator",me:u},c.a.createElement(o.a,{title:__("协作"),placement:"bottom"},c.a.createElement("span",{"data-testid":"doc-action-collaborate","data-aspm-click":"d225876",className:X.a.iconWrapper},c.a.createElement(k.b,{name:"nav-invite",className:X.a.icon}))))),"Doc"===l.type&&c.a.createElement(Y.b,{group:i,book:a,doc:l}),"Show"===l.type&&c.a.createElement("div",{className:[X.a.collaborate,X.a.playButton].join(" "),"data-class":"header-action-item"},c.a.createElement($.a,null)),this.isAnonymous()&&c.a.createElement("span",{className:"header-action-item header-action-anonymous"},c.a.createElement(me,{goto:window.location.href})),this.showShareToDigitalGarden()&&c.a.createElement(H.a,{style:{marginLeft:8},docId:l.id,currentUser:window.appData.me}),this.showBackToToc()&&c.a.createElement("div",{className:"header-action-item"},c.a.createElement(Z.a,{doc:l,book:a,group:i})),this.showShareEntry()&&c.a.createElement("div",{className:"header-action-item"},c.a.createElement(ve,{shareViewType:"DOC",key:"share-doc-".concat(l.id),targetResource:l,onChangeShare:this.onChangeShare,organization:v,book:a,group:i,me:u,canShare:null===(t=l.abilities)||void 0===t?void 0:t.share,canCollaborator:null===(r=l.abilities)||void 0===r?void 0:r.create_collaborator})),this.showEditEntry()&&c.a.createElement("span",{className:"header-action-item",style:{marginLeft:8}},c.a.createElement(K.a,{book:a,doc:l})),this.renderOriginDocEntry(),c.a.createElement("span",{className:"header-action-item",style:{marginLeft:8}},c.a.createElement(J.a,{enableComment:a.enable_comment,isWordingComment:"Doc"===l.type}))))))}}])&&oe(t.prototype,r),n&&oe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(c.a.Component);ye.propTypes={className:l.a.string,me:l.a.object,group:l.a.object,book:l.a.object,doc:l.a.object,note:l.a.object,version:l.a.object,history:l.a.object,showVersion:l.a.func,dispatch:l.a.func.isRequired,style:l.a.object,shouldHideLogo:l.a.bool,shouldShowSeparator:l.a.bool};var be=Object(h.d)((function(e){return{me:e.me,group:e.group,book:e.book,doc:e.doc,review:e.review}}))(Object(m.withRouter)(ye)),ge=r(2908),we={back:"ReaderLayout-module_back_EoSX1",wrapper:"ReaderLayout-module_wrapper_l-8F+",higherBackTop:"ReaderLayout-module_higherBackTop_RpYEv",cornerBubble:"ReaderLayout-module_cornerBubble_NhEGn",commentBubble:"ReaderLayout-module_commentBubble_ku3YV",asidePinned:"ReaderLayout-module_asidePinned_owRmW",crumb:"ReaderLayout-module_crumb_wF-5C",yuqueLogo:"ReaderLayout-module_yuqueLogo_KdpAI",orgLogo:"ReaderLayout-module_orgLogo_JB3fp",miniDropdown:"ReaderLayout-module_miniDropdown_7uya+",crumbText:"ReaderLayout-module_crumbText_l2jpO",bookInfo:"ReaderLayout-module_bookInfo_FivMr",bookName:"ReaderLayout-module_bookName_7LuCC",icon:"ReaderLayout-module_icon_HU4bU",text:"ReaderLayout-module_text_3S3RN",asideWrapper:"ReaderLayout-module_asideWrapper_+Fdu8",aside:"ReaderLayout-module_aside_WX6k7",asideHead:"ReaderLayout-module_asideHead_dVgz0",asideNav:"ReaderLayout-module_asideNav_-Kxml",pinTip:"ReaderLayout-module_pinTip_w+Yhb",pinWrapper:"ReaderLayout-module_pinWrapper_8A7Ri",pinIconWrapper:"ReaderLayout-module_pinIconWrapper_WglAw",arrowRight:"ReaderLayout-module_arrowRight_xXebO",dragbar:"ReaderLayout-module_dragbar_NUlrA",dragging:"ReaderLayout-module_dragging_gY9-f",privateIcon:"ReaderLayout-module_privateIcon_zehlB",navIcon:"ReaderLayout-module_navIcon_eoaa4",nav:"ReaderLayout-module_nav_k8NJg",searchNav:"ReaderLayout-module_searchNav_KneVs",searchBar:"ReaderLayout-module_searchBar_F9DSq",searchHotKey:"ReaderLayout-module_searchHotKey_1i9So",selected:"ReaderLayout-module_selected_sXnrs",asideActions:"ReaderLayout-module_asideActions_3HOeJ",actionItem:"ReaderLayout-module_actionItem_CbOzz",bookOverviewMoreActions:"ReaderLayout-module_bookOverviewMoreActions_fKcZR"},_e=r(752),Oe=r(658),Ee=r(162),Se=r(381),xe=function(e){var t,r=e.me,n=e.org,o=e.group,a=null;null!==(t=o.abilities)&&void 0!==t&&t.read&&(a="User"===o.type&&o.id===r.id?c.a.createElement("a",{className:we.crumbText,href:"/dashboard/books"},__("个人知识库")):c.a.createElement("a",{className:we.crumbText,href:"/".concat(o.login)},o.name));var i=c.a.createElement("a",{href:"/dashboard",className:we.yuqueLogo},c.a.createElement(_e.a,{width:16,height:16}));return n&&n.id&&n.logo&&(i=c.a.createElement("a",{href:"/dashboard",className:f()(we.yuqueLogo,we.orgLogo)},c.a.createElement(Ee.b,{src:n.logo,size:16}))),window.appData.isYuque||(i=c.a.createElement("a",{href:"/dashboard",className:f()(we.yuqueLogo,we.orgLogo)},c.a.createElement(Se.a.MiniYuque,{height:16,useNewLogo:!0}))),c.a.createElement("div",{className:we.crumb},i,o.abilities.read&&c.a.createElement(Oe.a,{className:we.miniDropdown,width:14,height:14}),a)},je=r(1513),ke=r(3753),Pe=r(3330),Ce=(r(251),r(116)),Te=(r(429),r(152)),Le=(r(1081),r(389)),Ae=r(3625),Ie=r(396),Ne=r(368),De=r(44),Re=r(2985),Me=r(147),Fe=r(747),Ge=r(490),Be=r(751),Ue="CatalogTreeCollapseTrigger-module_actionItem_ym+tH",ze="CatalogTreeCollapseTrigger-module_icon_k49Ct",We=r(3233);function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return He(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return He(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qe={whiteSpace:"nowrap"};function Ke(e){return e}var Ye=function(e){var t=e.onFoldAll,r=void 0===t?We.c:t,n=e.onUnfoldAll,a=void 0===n?We.c:n,u=Ve(Object(i.useState)(!1),2),l=u[0],s=u[1],f=Object(i.useCallback)((function(){s(!0),r()}),[r]),d=Object(i.useCallback)((function(){s(!1),a()}),[a]);return c.a.createElement(c.a.Fragment,null,l?c.a.createElement(o.a,{title:__("全部展开"),getPopupContainer:Ke,overlayInnerStyle:qe},c.a.createElement("span",{className:Ue,onClick:d},c.a.createElement(k.b,{name:"catalog-fold",width:16,className:ze}))):c.a.createElement(o.a,{title:__("全部折叠"),getPopupContainer:Ke,overlayInnerStyle:qe},c.a.createElement("span",{className:Ue,onClick:f},c.a.createElement(k.b,{name:"catalog-expand",width:16,className:ze}))))},$e={asiderTab:"BookCatalog-module_asiderTab_0aJLs",tabBar:"BookCatalog-module_tabBar_BKeYX",tabBarPopover:"BookCatalog-module_tabBarPopover_TTy3+",tabItem:"BookCatalog-module_tabItem_CbnYy",subMenuIcon:"BookCatalog-module_subMenuIcon_3FZt3",tabTitle:"BookCatalog-module_tabTitle_Efcqe",asideActionsCont:"BookCatalog-module_asideActionsCont_31lvb",asideActions:"BookCatalog-module_asideActions_NXLy1",actionItem:"BookCatalog-module_actionItem_gOq-V",actionItemGap:"BookCatalog-module_actionItemGap_jbUf6",selectPanel:"BookCatalog-module_selectPanel_F2B3H",selectTitle:"BookCatalog-module_selectTitle_LPXkO",disabled:"BookCatalog-module_disabled_nvCu5",selectItem:"BookCatalog-module_selectItem_Ja1sM",divider:"BookCatalog-module_divider_4+nla",sideCatalog:"BookCatalog-module_sideCatalog_wpCdP"},Ze=r(3740),Je={CATALOG:{value:"Catalog",text:__("目录")},ALLDOCS:{value:"All_Docs",text:__("全部文档")}};function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(r),!0).forEach((function(t){st(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tt(){tt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Xe(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function rt(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function nt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){rt(a,n,o,i,c,"next",e)}function c(e){rt(a,n,o,i,c,"throw",e)}i(void 0)}))}}function ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ft(n.key),n)}}function at(e,t){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},at(e,t)}function it(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=lt(e);if(t){var o=lt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ct(this,r)}}function ct(e,t){if(t&&("object"===Xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ut(e)}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}function st(e,t,r){return(t=ft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ft(e){var t=function(e,t){if("object"!==Xe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xe(t)?t:String(t)}var dt=Object(T.b)((function(){return Promise.all([r.e(24),r.e(56)]).then(r.bind(null,4329))}),{suspense:!0}),pt=Object(T.b)((function(){return r.e(67).then(r.bind(null,4350))}),{suspense:!0}),ht=Le.a.TabPane,mt=[{id:1,value:"created_at",title:__("按创建时间排序")},{id:2,value:"content_updated_at",title:__("按更新时间排序")},{id:3,value:"title",title:__("按标题排序")}],vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&at(e,t)}(u,e);var t,r,o,i=it(u);function u(e){var t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),st(ut(r=i.call(this,e)),"getBookDocs",nt(tt().mark((function e(){var t;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.docs.find({book_id:r.props.book.id,only_order_by_id:!0});case 3:return t=e.sent,r.props.dispatch({type:"searchtool/updateBookToc",payload:{book_id:r.props.book.id,docs:t}}),e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(0),n.a.error(e.t0.msg),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))),st(ut(r),"loadDocListViewerData",nt(tt().mark((function e(){var t,n,o;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===(t=r.props.book)||void 0===t||null===(n=t.docs)||void 0===n?void 0:n.length)>0)){e.next=2;break}return e.abrupt("return");case 2:return r.setState({isDocListLoading:!0}),e.next=5,r.getBookDocs();case 5:return o=e.sent,r.props.dispatch({type:"book/updateDocs",payload:o}),r.setState({isDocListLoading:!1}),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))),st(ut(r),"getSlugFromUrl",(function(e){var t=r.props.book,n=3;t.namespace&&t.namespace.startsWith("books/share/")&&(n=4);var o=e.pathname.split("/")[n];if(o&&o.trim())return o=o.trim()})),st(ut(r),"onCommandsExecuted",(function(e){e===De.a.CATALOG.create_title.cmd&&r.createTitle({activeCatalogTab:!0}),e===De.a.CATALOG.create_link.cmd&&r.createLink({activeCatalogTab:!0})})),st(ut(r),"handleTabChange",function(){var e=nt(tt().mark((function e(t){var n,o,a,i,c,u,l,s;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.setActiveTabKey(t),r.setState({tabVisible:!1}),o=r.props,a=o.currentDocSlug,i=o.book,c=i.docs,u=c.find((function(e){return e.slug===a})),t!==Je.ALLDOCS.value||c.length){e.next=10;break}return e.next=8,r.loadDocListViewerData();case 8:l=e.sent,u=l.find((function(e){return e.slug===a}));case 10:s=setTimeout((function(){r.revealDoc(u),clearTimeout(s)})),null===(n=r.props)||void 0===n||n.onTabChange(t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),st(ut(r),"handleCatalogScrollToTop",(function(){var e;null===(e=r.catalogViewer.current)||void 0===e||e.scrollToTop()})),st(ut(r),"handleCatalogScrollToItem",(function(e){var t,n=r.props.book.toc.find((function(t){return t.doc_id===e.id||t.url===e.slug}));n&&(null===(t=r.catalogViewer.current)||void 0===t||t.scrollToItem(n.uuid))})),st(ut(r),"handleDocListScrollToItem",(function(e){var t;null===(t=r.docListViewer.current)||void 0===t||t.scrollToItem(e.id)})),st(ut(r),"revealDoc",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e&&(e.id||e.slug)){var n=Object(Ne.isDocNotInToc)(e,r.props.book.toc);n&&!t?r.state.activeTabKey!==Je.ALLDOCS.value?r.setActiveTabKey(Je.ALLDOCS.value,nt(tt().mark((function t(){return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.loadDocListViewerData();case 2:r.handleDocListScrollToItem(e);case 3:case"end":return t.stop()}}),t)})))):r.handleDocListScrollToItem(e):r.state.activeTabKey===Je.CATALOG.value?r.handleCatalogScrollToItem(e):r.handleDocListScrollToItem(e)}})),st(ut(r),"handleSearchSelect",(function(e){var t=setTimeout((function(){r.revealDoc(e,!1),clearTimeout(t)}))})),st(ut(r),"handleAddToCatalogSuccess",(function(e){var t="/".concat(r.props.book.namespace,"/").concat(e.slug);r.props.history.push(t),r.setActiveTabKey(Je.CATALOG.value,(function(){r.handleCatalogScrollToItem(e)}))})),st(ut(r),"handleMoveToStagingBoxSuccess",(function(e){var t=r.props.currentDocSlug;if("DOC"===e.type&&t===e.url){var n="/".concat(r.props.book.namespace,"/").concat(t);r.props.history.push(n)}}));var o=e.space,a=e.book,l=e.group;r.catalogActiveTabKeyStorage=new Ze.a(o,l,a);var s=r.catalogActiveTabKeyStorage.getTab()||null;return null===(t=r.props)||void 0===t||t.onTabChange(s),r.state={activeTabKey:s,isDocListLoading:!1,tabVisible:!1},r.catalogViewer=c.a.createRef(),r.docListViewer=c.a.createRef(),r}return t=u,r=[{key:"setActiveTabKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.setState({activeTabKey:e},t),this.catalogActiveTabKeyStorage.setTab(e)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.doc;if(this.state.activeTabKey===Je.ALLDOCS.value)this.loadDocListViewerData().then((function(){var r=setTimeout((function(){e.revealDoc(t),clearTimeout(r)}))}));else var r=setTimeout((function(){e.revealDoc(t),clearTimeout(r)}),200);Re.c.on(Re.a.DOC_SELECT,(function(t){var r=t.doc,n=t.path;e.revealDoc(r,!1),e.props.history.push(n)}))}},{key:"createTitle",value:function(){var e,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.activeCatalogTab;null===(e=this.catalogViewer.current)||void 0===e||e.onAction({target_uuid:null,action:Ie.ACTIONS.insert,type:Ie.TYPES.title}),n&&this.setActiveTabKey(Je.CATALOG.value,(function(){t.handleCatalogScrollToTop()}))}},{key:"createLink",value:function(){var e,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.activeCatalogTab;null===(e=this.catalogViewer.current)||void 0===e||e.showCatalogLinkForm({target_uuid:null,action:Ie.ACTIONS.insert,type:Ie.TYPES.title,onSubmit:function(){n&&t.setActiveTabKey(Je.CATALOG.value,(function(){t.handleCatalogScrollToTop()}))}})}},{key:"handleSortSelectClick",value:function(e){this.setState({tabVisible:!1}),this.catalogActiveTabKeyStorage.setSort(e)}},{key:"canCreateDoc",value:function(){var e=this.props.book;return e.abilities&&e.abilities.create_doc}},{key:"render",value:function(){var e=this,t=this.props,r=t.space,n=t.book,o=t.group,i=t.history,u=t.dispatch,l=t.currentDocSlug;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Le.a,{className:$e.asiderTab,activeKey:this.state.activeTabKey,onChange:this.handleTabChange,renderTabBar:function(t){var r,n;return c.a.createElement("div",{className:$e.tabBar,onMouseOver:function(){dt.preload(),pt.preload()}},c.a.createElement(a.a,{noArrow:!0,getPopupContainer:function(e){return e.parentNode},overlayClassName:$e.tabBarPopover,placement:"bottomLeft",trigger:"click",visible:e.state.tabVisible,onVisibleChange:function(t){return e.setState({tabVisible:t})},content:c.a.createElement("div",{className:$e.selectPanel},c.a.createElement("div",{className:$e.selectList},c.a.createElement("div",{className:$e.selectItem,onClick:function(){return t.onTabClick(Je.CATALOG.value)}},c.a.createElement("span",null,c.a.createElement(Fe.a,{width:16,height:16}),c.a.createElement("span",null,Je.CATALOG.text)),e.state.activeTabKey===Je.CATALOG.value&&c.a.createElement(Ge.a,null)),c.a.createElement("div",{className:$e.selectItem,onClick:function(){return t.onTabClick(Je.ALLDOCS.value)}},c.a.createElement("span",null,c.a.createElement(Be.a,{width:16,height:16}),c.a.createElement("span",null,Je.ALLDOCS.text)),e.state.activeTabKey===Je.ALLDOCS.value&&c.a.createElement(Ge.a,null))),e.state.activeTabKey===Je.ALLDOCS.value&&c.a.createElement(c.a.Fragment,null,c.a.createElement(Te.a,null),c.a.createElement("div",{className:$e.selectTitle},c.a.createElement("span",null,__("排序"))),c.a.createElement("div",{className:f()($e.selectList,st({},$e.disabled,e.state.activeTabKey!==Je.ALLDOCS.value))},mt.map((function(t){return c.a.createElement("div",{key:t.value,className:$e.selectItem,onClick:function(){return e.handleSortSelectClick(t.value)}},c.a.createElement("span",null,t.title),e.state.activeTabKey===Je.ALLDOCS.value&&e.catalogActiveTabKeyStorage.getSort()===t.value&&c.a.createElement(Ge.a,null))})))))},c.a.createElement("span",{className:$e.tabTitle,onClick:function(t){return e.setState((function(e){return{tabVisible:!e.tabVisible}}))}},e.state.activeTabKey===Je.CATALOG.value?c.a.createElement(Fe.a,{width:16,height:16,className:$e.tabIcon}):c.a.createElement(Be.a,{width:16,height:16,className:$e.tabIcon}),c.a.createElement("span",{className:$e.tabName},e.state.activeTabKey===Je.CATALOG.value?Je.CATALOG.text:Je.ALLDOCS.text))),c.a.createElement("div",{className:$e.asideActionsCont},e.state.activeTabKey===Je.CATALOG.value&&c.a.createElement(Ye,{onFoldAll:null===(r=e.catalogViewer.current)||void 0===r?void 0:r.foldAll,onUnfoldAll:null===(n=e.catalogViewer.current)||void 0===n?void 0:n.unFoldAll})))}},c.a.createElement(ht,{key:Je.CATALOG.value},c.a.createElement(dt,{ref:this.catalogViewer,className:$e.sideCatalog,book:n,currentDocSlug:l})),c.a.createElement(ht,{key:Je.ALLDOCS.value},c.a.createElement("div",{style:{minHeight:100,paddingTop:8}},c.a.createElement(Ce.a,{delay:100,spinning:this.state.isDocListLoading},c.a.createElement(pt,{ref:this.docListViewer,currentDocSlug:l,history:i,group:o,book:n,space:r,onAddToCatalogSuccess:this.handleAddToCatalogSuccess}))))),c.a.createElement(bt,{book:n,dispatch:u}))}}],r&&ot(t.prototype,r),o&&ot(t,o),Object.defineProperty(t,"prototype",{writable:!1}),u}(i.PureComponent);vt.propTypes={doc:l.a.object.isRequired,space:l.a.object.isRequired,group:l.a.object.isRequired,book:l.a.object.isRequired,history:l.a.object.isRequired,currentDocSlug:l.a.string,dispatch:l.a.func,onTabChange:l.a.func};var yt=Object(Me.b)((function(e){var t=c.a.createRef(),r=c.a.useContext(A.a).ref,n=Object(m.useParams)().doc;r.current=t;var o=et(et({ref:t},e),{},{currentDocSlug:n});return c.a.createElement(vt,o)}),!0);function bt(e){var t=e.book,r=e.dispatch;return Object(i.useEffect)((function(){function e(e){var n=e.title,o=t.toc.map((function(t){return t.doc_id===e.doc_id?et(et({},t),{},{title:n}):t})),a=(t.docs||[]).map((function(t){return t.id===e.doc_id?et(et({},t),{},{title:n}):t}));Object(h.c)((function(){r({type:"book/updateToc",payload:o}),r({type:"book/updateDocs",payload:a})}))}return Ae.a.on("rename",e),function(){Ae.a.off("rename",e)}}),[t.docs,t.toc]),null}bt.propTypes={book:l.a.object.isRequired,dispatch:l.a.func};var gt=r(3644);function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function _t(){return _t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_t.apply(this,arguments)}function Ot(){Ot=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==wt(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function Et(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function St(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Et(a,n,o,i,c,"next",e)}function c(e){Et(a,n,o,i,c,"throw",e)}i(void 0)}))}}function xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,At(n.key),n)}}function jt(e,t){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jt(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Tt(e);if(t){var o=Tt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Pt(this,r)}}function Pt(e,t){if(t&&("object"===wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ct(e)}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tt(e){return Tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tt(e)}function Lt(e,t,r){return(t=At(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function At(e){var t=function(e,t){if("object"!==wt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===wt(t)?t:String(t)}var It=L.a+L.d,Nt=Object(T.c)((function(){return r.e(74).then(r.bind(null,4346))}),{suspense:!0}),Dt=Object(T.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(6),r.e(8),r.e(89)]).then(r.bind(null,1380))}),{suspense:!0}),Rt=Object(T.b)((function(){return r.e(66).then(r.bind(null,3042))}),{suspense:!0}),Mt=Object(T.b)((function(){return r.e(68).then(r.bind(null,3844))}),{suspense:!0}),Ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jt(e,t)}(l,e);var t,r,i,u=kt(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Lt(Ct(t=u.call(this,e)),"initHotKeys",(function(){t.state.asideWidth&&(_()(g.a.windows?"ctrl+alt+,":"⌘+option+,",(function(e){e.preventDefault(),t.togglePin()})),_()(g.a.windows?"ctrl+j":"⌘+j",(function(e){e.preventDefault(),e.repeat||t.handleSearchClick()})))})),Lt(Ct(t),"getAsideResizable",(function(){return window.innerWidth>F.c})),Lt(Ct(t),"handleTabChange",(function(e){t.setState({activeTabKey:e})})),Lt(Ct(t),"handleCommandsExecuted",(function(e){var r,n;null===(r=t.bookCatalogRef.current)||void 0===r||null===(n=r.current)||void 0===n||n.onCommandsExecuted(e)})),Lt(Ct(t),"handleContentSidebarVisibleChange",(function(e){var r=e.detail.visible;t.setState({contentSidebarVisible:r})})),Lt(Ct(t),"handleResize",p()((function(){t.asideResizable=t.getAsideResizable(),t.asideResizable||t.state.asidePinned||t.togglePin(),!t.asideResizable||t.asideResized||t.state.asidePinned||t.setState({asideWidth:t.getAsideWidth(),asideWrapperWidth:t.getAsideWidth()})}),300)),Lt(Ct(t),"handleMouseOverPinIcon",(function(e){t.state.asidePinned&&(e.stopPropagation(),e.preventDefault())})),Lt(Ct(t),"handleMouseDown",(function(){!0!==t.state.asideResizing&&t.setState({asideResizing:!0})})),Lt(Ct(t),"handleMouseUp",(function(){!1!==t.state.asideResizing&&t.setState({asideResizing:!1})})),Lt(Ct(t),"handleMouseMove",(function(e){t.state.asideResizing&&(t.asideResized=!0,t.setAsideWidth(e),window.dispatchEvent(new Event("resize")))})),Lt(Ct(t),"recalculateHeaderStyle",(function(){t.state.asidePinned&&t.forceUpdate()})),Lt(Ct(t),"setAsideWidth",(function(e){if(t.asideResizable&&t.asideRef&&!t.state.asidePinned){var r=t.asideRef.getBoundingClientRect(),n=r.width,o=e.clientX-r.left;n>=F.a&&e.clientX>r.right?o=F.a:n<=F.b&&e.clientX<r.right&&(o=F.b),t.setState({asidePinned:!1,asideWidth:o,asideWrapperWidth:o})}})),Lt(Ct(t),"togglePin",(function(e){e&&(e.preventDefault(),e.stopPropagation()),t.setState((function(e){var r=e.asideWidth;return e.asidePinned?{asideWrapperWidth:t.asideResizable?r:F.b,asidePinned:!1}:{asideWrapperWidth:F.d,asidePinned:!0}}),(function(){setTimeout((function(){t.recalculateHeaderStyle()}),100)}))})),Lt(Ct(t),"handlePinnedAsideClick",(function(){t.state.asidePinned&&t.togglePin()})),Lt(Ct(t),"bookOverviewNavClick",(function(){t.props.history.push(t.getOverviewPath())})),Lt(Ct(t),"handleSearchCancel",St(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)(500);case 2:t.setState({searchModalVisible:!1});case 3:case"end":return e.stop()}}),e)})))),Lt(Ct(t),"handleSearchClick",(function(){t.setState({searchModalVisible:!0})})),Lt(Ct(t),"getOverviewPath",(function(){var e=t.props,r=e.group,n=e.book;return"/".concat(r.login,"/").concat(n.slug)})),Lt(Ct(t),"isOverviewPage",(function(){var e=t.props,r=e.group,n=e.book,o=window.location.pathname;return o==="/".concat(r.login,"/").concat(n.slug)||o==="/".concat(r.login,"/").concat(n.slug,"/")})),Lt(Ct(t),"updateToc",St(Ot().mark((function e(){var r,n,o,a,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.book,o=r.dispatch,e.next=3,R.a.getCatalogNodes(n.id);case 3:a=e.sent,i=a.toc,o({type:"book/updateToc",payload:i});case 6:case"end":return e.stop()}}),e)})))),Lt(Ct(t),"renderDocAction",(function(){var e=t.props,r=e.book,n=e.doc;if(t.canCreateDoc())return c.a.createElement(a.a,{type:"menu",overlayStyle:{minWidth:126},trigger:["hover"],placement:"bottomLeft",arrowPointAtCenter:!0,hideWhenInactive:!0,content:c.a.createElement(Rt,{book:r,doc:n,commands:D.a.additionalActionsForNewDoc({canImport:!0,canExport:r.abilities&&r.abilities.export,canCreateCatalogGroup:t.state.activeTabKey===Je.CATALOG.value,canCreateCatalogLink:t.state.activeTabKey===Je.CATALOG.value}),commandParams:{insert_to_catalog:!0,action:"prependChild"},onCommandsExecuted:function(e){var r=e.cmd;t.handleCommandsExecuted(r)}})},c.a.createElement("div",{className:f()(we.asideActions),onMouseOver:function(){Rt.preload()}},c.a.createElement(k.b,{name:"add",width:16,height:16,className:we.actionItem})))})),Lt(Ct(t),"renderBookCatlog",(function(){var e=t.props,r=e.doc,n=e.book,o=e.group,a=e.dispatch,i=e.space,u=e.history;return c.a.createElement(yt,{ref:t.bookCatalogRef,doc:r,group:o,book:n,space:i,dispatch:a,history:u,onTabChange:t.handleTabChange})})),Lt(Ct(t),"renderDragBar",(function(){var e=g.a.windows?"Ctrl+Alt+,":"⌘+Option+,";return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:f()([we.dragbar],Lt({},we.dragging,t.state.asideResizing)),onClick:t.handlePinnedAsideClick,onMouseDown:t.handleMouseDown,onContextMenu:function(e){e.preventDefault()}}),c.a.createElement("div",{className:we.pinWrapper},c.a.createElement(o.a,{mouseEnterDelay:.5,placement:"right",title:t.state.asidePinned?c.a.createElement("span",{className:we.pinTip},__("展开"),c.a.createElement("br",null),e):c.a.createElement("span",{className:we.pinTip},__("收起"),c.a.createElement("br",null),e),getTooltipContainer:function(e){return e.parentNode}},c.a.createElement("span",{className:we.pinIconWrapper,onMouseOver:t.handleMouseOverPinIcon,onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onClick:t.togglePin},c.a.createElement("span",{className:we.arrowRight})))))})),Lt(Ct(t),"renderSearch",(function(){if(t.state.searchModalVisible)return c.a.createElement(Dt,{name:"LazyScopedSearch",onCancel:t.handleSearchCancel,visible:t.state.searchModalVisible})})),Lt(Ct(t),"renderImportBookModal",(function(){var e=t.props,r=e.book,n=e.group;return c.a.createElement(Nt,{book:r,group:n,onCommandsExecuted:function(e){var r=e.cmd;t.handleCommandsExecuted(r)},onUpdate:t.updateToc})})),Lt(Ct(t),"renderAsideHead",(function(){var e=t.props,r=e.group,n=e.book,o=e.me,a=e.organization;return c.a.createElement("div",{className:f()(we.asideHead,Lt({},we.bookSharePopover,t.state.bookShareVisible)),id:"asideHead"},c.a.createElement(xe,{me:o,group:r,org:a}),c.a.createElement("div",{className:we.bookInfo},c.a.createElement("div",{className:we.bookName},c.a.createElement(ge.a,{className:we.icon,value:n.book_icon,disabled:!0}),c.a.createElement("div",{className:we.bookName},c.a.createElement("span",{className:we.text},n.name),(null==o?void 0:o.is_admin)&&-1===n.status&&c.a.createElement(k.b,{name:"doc-has-content-risk",width:14,style:{opacity:.375,marginLeft:8}}),c.a.createElement("div",{className:we.privateIcon},c.a.createElement(je.a,{public:n.public,size:14,placement:"bottom"})))),c.a.createElement(ke.default,{group:r,book:n,className:we.bookOverviewMoreActions,getPopupContainer:function(){return document.getElementById("asideHead")}})))})),Lt(Ct(t),"renderNav",(function(){var e,r={willChange:"width",transition:"width 200ms cubic-bezier(0.1, 0, 0, 1) 0s",width:t.state.asideWidth,maxWidth:F.a,minWidth:F.b};return c.a.createElement("nav",{className:we.asideNav,style:r,id:"navBox",ref:function(e){t.asideRef=e}},c.a.createElement("div",{className:we.searchNav},c.a.createElement("div",{className:we.searchBar,onMouseOver:function(){Dt.preload()},onClick:t.handleSearchClick},c.a.createElement(x.a,{className:we.navIcon}),c.a.createElement("span",null,__("搜索#readPage")),c.a.createElement("span",{className:we.searchHotKey},g.a.windows?"Ctrl + J":"⌘ + J")),t.renderDocAction()),c.a.createElement("div",{className:f()((e={},Lt(e,we.nav,!0),Lt(e,we.selected,t.isOverviewPage()),e)),onClick:t.bookOverviewNavClick},c.a.createElement(j.a,{className:we.navIcon}),c.a.createElement("span",null,__("首页#readPage"))),t.renderBookCatlog())})),Lt(Ct(t),"renderAside",(function(){var e,r={willChange:"width",transition:"width 200ms cubic-bezier(0.1, 0, 0, 1) 0s",width:t.state.asideWrapperWidth};return c.a.createElement("div",_t({className:f()((e={},Lt(e,we.asideWrapper,!0),Lt(e,we.asidePinned,t.state.asidePinned),e)),"data-testid":"aside"},Lt({},M.c,!0)),c.a.createElement("div",{className:we.aside,style:r},t.renderAsideHead(),t.renderNav()),t.renderDragBar(),t.renderSearch(),t.renderImportBookModal())})),t.state={historyView:!1,asideWidth:t.getAsideWidth(),asideWrapperWidth:t.getAsideWidth(),asideResizing:!1,asidePinned:!t.getAsideResizable(),contentSidebarVisible:!1,activeTabKey:null,searchModalVisible:!1},t.asideResized=!1,t.asideResizable=t.getAsideResizable(),t.bookCatalogRef={current:null},t}return t=l,(r=[{key:"componentDidMount",value:function(){Object(O.a)("finish-readerlayout-render");var e=this.props,t=e.group,r=e.book,n=e.dispatch;"#import_to_book"===window.location.hash&&Nt.start(),n({type:"search/update",payload:{display:!0,scope:"".concat(t.login,"/").concat(r.slug)}}),this.initHotKeys(),window.addEventListener("resize",this.handleResize),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("contentSidebarVisibleChange",this.handleContentSidebarVisibleChange),document.body.classList.add(we.higherBackTop),document.body.classList.add("with-miniapp-code")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("contentSidebarVisibleChange",this.handleContentSidebarVisibleChange),document.body.classList.remove(we.higherBackTop)}},{key:"canCreateDoc",value:function(){var e=this.props.book;return e.abilities&&e.abilities.create_doc}},{key:"getAsideWidth",value:function(){if(!this.props.withAside)return 0;var e=window.innerWidth;if(e<=F.c)return 0;var t=Math.max(Math.min(Math.floor(.18*e),F.a),F.b);return e-t<=It?F.b:t}},{key:"render",value:function(){var e,t,r=this,o=this.props,a=o.book,i=o.doc,u=o.children,l=o.withAside,s=o.Header,d=o.HeaderProps,p=void 0===d?{}:d,h=o.isDarkMode,m=o.hideHeader,v=o.isBookOverview,b=this.state,g=b.asidePinned,w=b.asideWrapperWidth,_=b.historyView,O=b.contentSidebarVisible,E=f()((Lt(t={"doc-head":!0},"doc-head-".concat(null==i||null===(e=i.type)||void 0===e?void 0:e.toLowerCase()),!0),Lt(t,"doc-type-head","Doc"===(null==i?void 0:i.type)&&!O),Lt(t,we.asidePinned,g),t)),x=s||be,j=null;return this.isOverviewPage()&&(j=h?S.themeDarkToken["@yuque-color-bg-primary"]:S.themeToken["@yuque-color-bg-secondary"],a.cover&&(j=h?"linear-gradient(to bottom, rgba(0, 0, 0, 0.1) 0, rgba(0, 0, 0, 1) 70vh, rgba(0, 0, 0, 1) 100%), url(".concat(Object(P.a)(a.cover,{blur:"r_50,s_2"}),") center top/100% no-repeat"):"linear-gradient(to bottom, rgba(255, 255, 255, 0) 0, rgba(255, 255, 255, 1) 70vh, rgba(255, 255, 255, 1) 100%), url(".concat(Object(P.a)(a.cover,{blur:"r_50,s_2"}),") center top/100% no-repeat"))),c.a.createElement(y.a,{title:this.isOverviewPage()?null==a?void 0:a.name:null==i?void 0:i.title},c.a.createElement("div",{className:"lark","data-testid":"reader-main"},c.a.createElement("div",{className:"main-wrapper"},c.a.createElement(A.a.Provider,{value:{ref:this.bookCatalogRef}},c.a.createElement("div",{className:we.wrapper,style:{paddingLeft:g||w,background:j}},!m&&c.a.createElement(x,_t({className:E,me:this.props.me,group:this.props.group,book:this.props.book,doc:this.props.doc,key:"doc-header-".concat(i.id),shouldHideLogo:l,shouldShowSeparator:g,style:{left:w}},p)),u),_&&c.a.createElement(Mt,{doc:i,docDomain:"Doc",onCancel:function(){r.setState({historyView:!1})},onReverted:function(){n.a.success(__("恢复成功，正在跳转至编辑页，你可以在确认内容无误后更新文档"),3,(function(){window.location.href="/".concat(a.namespace,"/").concat(i.slug,"/edit")}))}}),l&&this.renderAside(),!v&&c.a.createElement(I.MoreFeaturesPanelExtraPropsProvider,{showHistory:function(){r.setState({historyView:!0})}},c.a.createElement(N.a,{isShare:window.appData.sharePage},c.a.createElement(gt.b,{doc:i})))))))}}])&&xt(t.prototype,r),i&&xt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.Component);Ft.propTypes={history:l.a.object,group:l.a.object,book:l.a.object,doc:l.a.object,space:l.a.object,me:l.a.object,children:l.a.node,withAside:l.a.bool,renderHeader:l.a.object,isBookOverview:l.a.bool},Ft.displayName="ReaderLayout";var Gt=c.a.memo((function(e){var t=Object(C.b)().isDarkMode,r=Object(T.e)();return Object(i.useEffect)((function(){r.startRender()}),[]),c.a.createElement(Pe.a,null,c.a.createElement(Ft,_t({},e,{isDarkMode:t})))})),Bt=Object(h.d)((function(e){return{group:e.group,book:e.book,doc:e.doc,space:e.space,me:e.me,organization:e.organization}}))(Object(m.withRouter)(Gt));Bt.displayName="WrapperReaderLayout";t.a=Bt},381:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(338),i=r(440);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function u(e){var t=window.appData.zone,r=window.__CUSTOM_LOGO__||(e?i.DASHBOARD_LOGOS:i.LOGOS),n=r.public;return window.appData.isYuque||(n=r.internal[0],t&&(n=r.internal[t.id]||n)),n}var l={};l.Yuque=function(e){var t=e.height,r=void 0===t?32:t,n=e.className,i=void 0===n?"":n,c=e.useNewLogo,l=u(void 0!==c&&c);return o.a.createElement(a.a,{src:l.full,darkSrc:l.darkFull,style:{height:r},alt:l.alt,className:i})},l.MiniYuque=function(e){var t=e.height,r=void 0===t?32:t,n=e.className,a=void 0===n?"":n,i=e.useNewLogo,c=u(void 0!==i&&i);return o.a.createElement("img",{src:c.icon,alt:c.alt,width:r,height:r,className:a})};l.Text=function(e){var t=u(e);return o.a.createElement(a.a,c({},e,{src:t.text,darkSrc:t.darkText,style:{marginLeft:"2px",height:32},alt:t.alt}))},t.a=l},389:function(e,t,r){"use strict";r(1255);var n=r(596);r(1081);t.a=n.a},4342:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(2),i=r.n(a),c=r(570),u=r(57),l=r(264),s=r(3739),f=r(287),d=r(3802);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=Object(f.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(6),r.e(75)]).then(r.bind(null,4324))}),{suspense:!0}),v=Object(f.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(6),r.e(70)]).then(r.bind(null,4325))}),{suspense:!0}),y=Object(f.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(11),r.e(13),r.e(54)]).then(r.bind(null,4326))}),{suspense:!0}),b=Object(f.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(6),r.e(87)]).then(r.bind(null,4331))}),{suspense:!0}),g=Object(f.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(5),r.e(4),r.e(82)]).then(r.bind(null,3914))}),{suspense:!0});function w(e){var t,r,a,i,c,u,f=e.doc,h=e.book,w=e.location,_=e.isBookOverview,O=l.a.normalizeReadPageQuery(w.query),E=p(Object(n.useReducer)((function(e){return e+1}),0),2),S=(E[0],E[1]),x=Object(n.useRef)(null),j=null===(t=x.current)||void 0===t||null===(r=t.readWriteView)||void 0===r?void 0:r.getHeader();if(Object(n.useEffect)((function(){var e,t;null===(e=x.current)||void 0===e||null===(t=e.readWriteView)||void 0===t||t.renderCtx.registerRerenderHandler((function(){S()}))}),[f.id]),Object(n.useEffect)((function(){var e=setTimeout((function(){b.preload(),y.preload(),g.preload()}),8e3);return function(){clearTimeout(e)}}),[]),"Doc"===f.type&&O.inner)return o.a.createElement(m,e);if("doc_embed"===O.view)return o.a.createElement(v,{from:O.from});var k={ref:x};return!l.a.isRunAtRaw(f)||Object(s.a)()||null!==(a=window.appData)&&void 0!==a&&a.sharePage?u=b:(u=g,k.key=f.id),o.a.createElement(d.a,{withAside:_||!("singleDoc"in w.query)&&(null===(i=h.abilities)||void 0===i?void 0:i.read),hideHeader:_||"need_verify_password"===(null==f||null===(c=f.error)||void 0===c?void 0:c.code),Header:_?null:null==j?void 0:j.getComponent(),HeaderProps:_||null==j?void 0:j.getProps(),isBookOverview:_},_?o.a.createElement(y,null):o.a.createElement(u,k))}w.propTypes={group:i.a.object.isRequired,book:i.a.object.isRequired,doc:i.a.object.isRequired,location:i.a.object,match:i.a.object,history:i.a.object,dispatch:i.a.func,isBookOverview:i.a.bool},w.defaultProps={isBookOverview:!1},t.default=Object(c.d)((function(e){return{group:e.group,book:e.book,doc:e.doc}}))(Object(u.withRouter)(w))},44:function(e,t,r){"use strict";var n=r(16);t.a=n.a},443:function(e,t,r){"use strict";r(1382);var n=r(848);r(953);t.a=n.a},444:function(e,t,r){var n=r(383),o=r(194),a=r(226),i=r(76),c=r(175),u=r(225),l=r(234),s=r(292),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(c(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||s(e)||a(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!n(e).length;for(var r in e)if(f.call(e,r))return!1;return!0}},468:function(e,t,r){"use strict";r(2255);var n=r(852),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(9),l=r.n(u),s=r(69),f=r.n(s),d=r(776),p=r(116);r(950);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var m=["className","emptyView","onLoadMore","dataSource","renderItem","loading","showLoadingMore","pagination","children","justify","customItem","loadMoreText"];function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}function w(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var _=a.a.forwardRef((function(e,t){var r=e.className,o=e.emptyView,i=e.onLoadMore,c=e.dataSource,u=e.renderItem,s=e.loading,f=e.showLoadingMore,h=e.pagination,v=e.children,b=e.justify,_=e.customItem,O=e.loadMoreText,E=void 0===O?Object(d.a)("查看更多"):O,S=w(e,m),x=s;"boolean"==typeof x&&(x={spinning:x});var j=x&&x.spinning,k=c.length&&f?a.a.createElement("div",{className:"larkui-list-block-more"},j&&a.a.createElement(p.a,g({justify:"block"},x)),!j&&a.a.createElement("a",{className:"larkui-list-block-more-btn",onClick:function(e){e.preventDefault(),i&&i()}},E)):null;if(j&&!k)return a.a.createElement("div",{className:l()("larkui-list","larkui-list-loading")},a.a.createElement(p.a,g({justify:"block"},x)));var P=h;return P&&(P=h.total<=h.pageSize?null:y({showSizeChanger:!1},P)),a.a.createElement(n.b,g({ref:t,className:l()(r,"larkui-list",{"larkui-list-justify-block":"block"===b}),loading:!1,loadMore:k,pagination:P,dataSource:c.length>0?c:e.emptyView?["empty"]:[],renderItem:function(e,t){if("empty"===e)return a.a.createElement("div",{className:"blankslate"},o);var r=u(e,t);return r?_?r:a.a.createElement(n.b.Item,{key:e.id},r):a.a.createElement("div",null)}},S),v)}));_.defaultProps={dataSource:[],loading:!1,showLoadingMore:!1,justify:"flex"},_.propTypes=y(y({},n.b.ListProps),{},{className:c.a.string,emptyView:c.a.node,onLoadMore:c.a.func,dataSource:c.a.array,renderItem:c.a.func,loading:c.a.oneOfType([c.a.bool,c.a.object]),showLoadingMore:c.a.bool,pagination:c.a.object,children:c.a.node,justify:c.a.oneOf(["block","flex"]),customItem:c.a.bool}),f()(_,n.b),t.a=_},584:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){switch(t.type){case"init":return{response:null,error:null,loading:!0};case"success":return{response:t.response,error:null,loading:!1};case"error":return{response:null,error:t.error,loading:!1};default:return{response:null,error:null,loading:!1}}}function c(e){var t=Object(n.useRef)(0),r=o(Object(n.useReducer)(i,{response:null,loading:!1,error:null}),2),a=r[0],c=r[1];return{data:a.response,loading:a.loading,request:function(r,n){var o=++t.current;return c({type:"init"}),e(r,n).then((function(e){return o===t.current&&c({type:"success",response:e}),e})).catch((function(e){if(c({type:"error",error:e}),null!=n&&n.ignoreGlobalMessage)throw e;console.error(e)}))},error:a.error}}},585:function(e,t,r){"use strict";function n(e){return new Promise((function(t,r){setTimeout(t,e)}))}r.d(t,"a",(function(){return n}))},586:function(e,t,r){"use strict";r(2260);var n=r(1107);r(1077);t.a=n.a},593:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return a}));var n=r(871);function o(e,t){return!(!e||!t)&&(e.uid&&t.uid?e.uid===t.uid:e.login&&t.login?e.login===t.login:!(!t.provider_userid||!e.provider_userid)&&(e.provider_userid===t.provider_userid&&e.provider_type===t.provider_type))}function a(e){var t=e.members||e.collaborators||e.collaborations;return t?Object(n.format)(t.map((function(e){return e.user}))):[]}},621:function(e,t,r){var n=r(290),o=r(224),a=r(438),i=r(367);e.exports=function(e,t){if(null==e)return{};var r=n(i(e),(function(e){return[e]}));return t=o(t),a(e,r,(function(e,r){return t(e,r[0])}))}},771:function(e,t,r){"use strict";r.d(t,"d",(function(){return b})),r.d(t,"c",(function(){return w})),r.d(t,"g",(function(){return O})),r.d(t,"l",(function(){return S})),r.d(t,"n",(function(){return j})),r.d(t,"f",(function(){return P})),r.d(t,"i",(function(){return T})),r.d(t,"k",(function(){return L})),r.d(t,"e",(function(){return I})),r.d(t,"j",(function(){return R})),r.d(t,"a",(function(){return F})),r.d(t,"b",(function(){return G})),r.d(t,"m",(function(){return B})),r.d(t,"h",(function(){return U}));var n=r(444),o=r.n(n),a=r(191),i=r(111),c=r(312),u=r(167),l=r(98),s=r(1346);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(){m=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function p(){}function h(){}function v(){}var y={};u(y,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(P([])));g&&g!==t&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==f(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:h,configurable:!0}),h.displayName=u(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function v(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){v(a,n,o,i,c,"next",e)}function c(e){v(a,n,o,i,c,"throw",e)}i(void 0)}))}}function b(e,t){return g.apply(this,arguments)}function g(){return g=y(m().mark((function e(t,r){var n,o,a=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{useOriginResp:!1},e.next=3,c.a.templates.v2.useTemplate({template_id:r.id,book_id:t.id,doc_id:n.docId},{useOriginResp:n.useOriginResp});case 3:return o=e.sent,Object(l.spmClick)(s.a.TEMPLATE_USAGE,{id:r.id,type:r.type,format:r.format,name:r.name,platform:n.isDesktop?"desktop":"pc"}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function w(e,t){return _.apply(this,arguments)}function _(){return(_=y(m().mark((function e(t,r){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.docs.cloneSheetData({source_doc_id:t,target_doc_id:r});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return E.apply(this,arguments)}function E(){return(E=y(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.templates.v2.destroy({id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return x.apply(this,arguments)}function x(){return(x=y(m().mark((function e(t,r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.templates.v2.findOne({id:t,usage:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return k.apply(this,arguments)}function k(){return(k=y(m().mark((function e(t,r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.templates.v2.update({id:t,name:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,r,n,o){return C.apply(this,arguments)}function C(){return C=y(m().mark((function e(t,r,n,o,i){var u,l,s,f=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=f.length>5&&void 0!==f[5]?f[5]:null,l=f.length>6&&void 0!==f[6]&&f[6],s={target_id:t,target_type:r,template_type:n,format:a.TYPE_FORMAT_MAP[o],type:o,name:i,in_edit:l},null!==u&&(s.doc_id=u),e.next=6,c.a.templates.v2.create(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function T(e){var t={lakesheet:"https://gw.alipayobjects.com/zos/bmw-prod/766284e3-a150-4438-a294-171a15cf216b.svg",laketable:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*W_NeRqkOsJsAAAAAAAAAAAAAARQnAQ",lake:"https://gw.alipayobjects.com/zos/bmw-prod/7c85db16-e017-4002-b37c-77dcf275d31f.svg",lakemind:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*R1-oT6osRqQAAAAAAAAAAAAAARQnAQ",lakeboard:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*R1-oT6osRqQAAAAAAAAAAAAAARQnAQ",lakeshow:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*-GRzR6CgSGUAAAAAAAAAAAAAARQnAQ"};return e.cover?e.cover:t[e.format]||t.lake}function L(e,t){return A.apply(this,arguments)}function A(){return(A=y(m().mark((function e(t,r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.docs.findOne({book_id:r,id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,r){return N.apply(this,arguments)}function N(){return(N=y(m().mark((function e(t,r,n){var o,a,i,l,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t,r);case 2:if(o=e.sent,a="/go/doc/".concat(o.id,"/edit"),"doc_toc"!==(null==n?void 0:n.create_from)){e.next=12;break}return i=o.id,e.next=8,c.a.docs.addToCatalog({ids:[i],book_id:t.id,target_node_uuid:n.toc_node_uuid,action:"prependChild"});case 8:return(l=new URLSearchParams).set("toc_node_uuid",n.toc_node_uuid),u.b.changeHref("".concat(a,"?").concat(l.toString())),e.abrupt("return");case 12:return s=o.id,e.next=15,c.a.docs.addToCatalog({ids:[s],book_id:t.id,target_node_uuid:null,action:"prependChild"});case 15:u.b.changeHref(a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.book_id,r=e.group_id,n=e.include_personal,o=e.official_channel,i=e.limit,c=e.format,u=[],l={limit:i,format:c,include_types:""};return t&&(u.push(a.TEMPLATE_TYPE_MAP.BOOK),l.book_id=t),r&&(u.push(a.TEMPLATE_TYPE_MAP.GROUP),l.group_id=r),o&&(u.push(a.TEMPLATE_TYPE_MAP.OFFICIAL),l.official_channel=o),n&&u.push(a.TEMPLATE_TYPE_MAP.PERSONAL),u.length&&(l.include_types=u.join(",")),l}function R(){return M.apply(this,arguments)}function M(){return M=y(m().mark((function e(){var t,r,n,o=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,c.a.templates.v2.find(D(t));case 4:return n=e.sent,r.isDesktop&&(n.data=n.data.filter((function(e){return e.format!==a.TYPE_FORMAT_MAP.Table}))),Array.isArray(n.meta.official)&&(n.meta.official=n.meta.official.map((function(e){return p(p({},e),{},{name:"en-us"!==r.locale?e.name_zh:e.name_en})}))),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function F(e){var t;return!(null==e||null===(t=e.abilities)||void 0===t||!t.create_doc)}function G(e){var t;return Boolean("Group"===(null==e?void 0:e.type)&&(null==e||null===(t=e.abilities)||void 0===t?void 0:t.read_private))}function B(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{book_id:F(e)?e.id:void 0,group_id:G(t)?t.id:void 0,include_personal:r}}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.filter((function(e){return!!i.MIXING_BOOK_TYPES.includes(e.type)}));return o()(t)?r:r.filter((function(e){return e.user_id===t.id}))}},773:function(e,t,r){"use strict";r.d(t,"b",(function(){return v})),r.d(t,"a",(function(){return y}));r(103);var n=r(60),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(18),l=r(163),s=r(30),f=r(352),d=["book","width"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}function h(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var m={book:__("文档"),sheet:__("表格"),design:__("图集"),column:__("专栏"),resource:__("资源")},v=function(e){var t,r=e.book,o=e.width,i=void 0===o?24:o,c=h(e,d),u=null===(t=r.type)||void 0===t?void 0:t.toLowerCase(),l=m[u];return a.a.createElement(n.a,{title:l},a.a.createElement(s.b,p({name:f.b.getName("Book",r),style:f.b.getStyle(r),className:"book-icon",width:i},c)))};v.propTypes={book:c.a.object.isRequired,width:c.a.number};var y=function(e){var t=e.size,r=void 0===t?14:t,o=e.placement,i=void 0===o?"top":o,c=e.showTooltip,f=void 0===c||c;return a.a.createElement(n.a,{open:f,placement:i,title:Object(l.e)(e.public,"book",e.organization),getPopupContainer:e.getPopupContainer},a.a.createElement("span",{className:"name-lock"},a.a.createElement(s.b,{name:e.public===u.PRIVACY.private?"permission-private":"icon-public",width:r})))};y.propTypes={public:c.a.number,getPopupContainer:c.a.func,size:c.a.number,placement:c.a.string,organization:c.a.object,showTooltip:c.a.bool}},777:function(e,t,r){"use strict";var n=r(80),o=r(33),a=r(85),i=r(621),c=r.n(i),u=r(299),l=r(108),s=r(187);var f=r(593),d=r(158);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(){y=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function h(){}function m(){}var v={};u(v,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(P([])));g&&g!==t&&r.call(g,a)&&(v=g);var w=m.prototype=d.prototype=Object.create(v);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==p(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=u(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function b(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=g(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function g(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function O(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){_(a,n,o,i,c,"next",e)}function c(e){_(a,n,o,i,c,"throw",e)}i(void 0)}))}}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var o=P(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function C(e,t,r){return(t=T(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}var L=d.memberSelectorType.GROUP,A=d.memberSelectorType.BOOK,I=d.memberSelectorType.DOC,N=d.memberSelectorType.SIMPLE_WITH_ROLE,D=d.memberSelectorType.LIST,R=d.memberSelectorType.SIMPLE,M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(d,e);var t,r,i,u=x(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),C(k(t=u.call(this,e)),"_getSubmitBaseParams",(function(){return t.type===L?{group_id:t.target_id}:t.type===A||t.type===I?{target_id:t.target_id,target_type:t.target_type}:t.type===D?{list_id:t.target_id}:{}})),C(k(t),"getRealUsers",function(){var e=O(y().mark((function e(r){var n,o,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dataSourceServices){e.next=2;break}return e.abrupt("return",r);case 2:n=b(t.dataSourceServices),e.prev=3,n.s();case 5:if((o=n.n()).done){e.next=13;break}if(!(a=o.value).getRealUsers){e.next=11;break}return e.next=10,a.getRealUsers(r);case 10:r=e.sent;case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()),C(k(t),"getUserCount",(function(e){var r;if(t.dataSourceServices){var n,o=b(t.dataSourceServices);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.getUserCount){r=a.getUserCount(e);break}}}catch(e){o.e(e)}finally{o.f()}}return void 0===r&&null!=e&&e.length?e.length:r||0})),C(k(t),"submit",function(){var e=O(y().mark((function e(r,n,o){var a,i,u,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,window.appData.isYuque||(i=r.find(t.isDepartment))&&(r=r.filter((function(e){return!t.isDepartment(e)}))),e.next=4,t.getRealUsers(r);case 4:return r=e.sent,u=c()(v(v({},t._getSubmitBaseParams()),{},{users:t.serializeUserPostBody(r),department_id:null===(a=i)||void 0===a?void 0:a.id,onlyStaff:o})),n&&(u.role=n.value),e.next=9,t.createProxy(u,{ignoreGlobalMessage:!0});case 9:if(!((l=e.sent).success_count<=0&&l.errors&&l.errors.length>0)){e.next=12;break}return e.abrupt("return",{status:"error",message:__("[ {members} ] 添加失败; 错误原因: {message}",{members:l.errors.map((function(e){return e.name})).join(", "),message:l.message}),data:l});case 12:if(0!==l.success_count&&0!==l.length){e.next=14;break}return e.abrupt("return",{status:"warn",message:__("选择的成员已被添加")});case 14:return e.abrupt("return",{status:"success",message:__("成功添加了 {count} 位成员",{count:l.success_count||l.length}),data:l});case 15:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),C(k(t),"checkValid",(function(e){return t.isMember(e)?{status:"error",message:__("成员已存在")}:{status:"success",message:"ok"}})),C(k(t),"searchUser",function(){var e=O(y().mark((function e(r){var n,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={q:r}).include_unconfirmed_corp_account=!0,window.appData.organization&&(n.optional_properties="profile"),e.next=5,o.a.users.complete(n);case 5:return a=e.sent,e.abrupt("return",t.dealUsers(a));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C(k(t),"searchUsersByIds",function(){var e=O(y().mark((function e(r){var n,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={ids:r},e.next=3,o.a.users.listByIds(n);case 3:return a=e.sent,e.abrupt("return",t.dealUsers(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C(k(t),"dealUsers",(function(e){return e=e.map((function(e){return t.setUid(e),e.type="User",e.profile&&e.profile.status===n.STATUS.joined&&(e.dep=e.profile.department||a.a.getMemberRoleName(e.profile.role),e.avatar_url=e.profile.orgAvatar||e.avatar||e.avatar_url),e}))})),t.dataSourceServices=e.dataSourceServices,t}return t=d,i=[{key:"create",value:function(e){var t=new d(e);return t.init(),t}}],(r=[{key:"init",value:function(){var e;this.type===L?(this.group.members&&(this.members=Object(f.a)(this.group)),this.target_id=this.group.id,this.target_type="Group",this.abilities=this.group.abilities,this.createProxy=o.a.groupUsers.create):this.type===A?(this.book.collaborators&&(this.members=Object(f.a)(this.book)),this.target_id=this.book.id,this.target_type="Book",this.abilities=this.book.abilities,this.createProxy=o.a.collaborations.create):this.type===I?(this.doc.collaborations&&(this.members=Object(f.a)(this.doc)),this.target_id=this.doc.id,this.target_type="Doc",this.createProxy=o.a.collaborations.create,this.abilities=this.doc.abilities):[N,R].includes(this.type)&&(this.members=[].concat(h(this.members),[this.me])),this.status="organization"===(e=this.type)?n.default.STATUS:"group"===e?l.default.STATUS:"book"===e||"doc"===e?s.default.STATUS:void 0}},{key:"isOwner",value:function(){return this.abilities.manage}},{key:"isMember",value:function(e){return!(!this.members||0===this.members.length)&&this.members.some((function(t){return Object(f.b)(t,e)}))}}])&&E(t.prototype,r),i&&E(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(u.a);C(M,"id","search"),C(M,"title",__("搜索添加"));t.a=M},868:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(0),o=r.n(n),a=r(2),i=r.n(a),c=r(869),u={link:"Link",text:"Text"},l=function(e){var t,r=e.user,n=void 0===r?{}:r,a=e.type,i=void 0===a?u.text:a,l=e.withCard,s=e.children,f=e.style,d=void 0===f?{}:f,p=e.className,h=void 0===p?"":p,m=e.target,v=n.name,y=n.login;switch(i){case u.link:t=o.a.createElement("a",{href:"/".concat(y),"data-testid":"login-a-tag",target:m,style:d,className:h},s||v);break;case u.text:default:t=s||v}return l?o.a.createElement(c.a,{user:n,style:d,className:h},t):t};l.propTypes={user:i.a.object.isRequired,withCard:i.a.bool,style:i.a.object,className:i.a.string,type:i.a.oneOf([u.link,u.text,u.card]),children:i.a.any,target:i.a.object},t.b=l},869:function(e,t,r){"use strict";r(279);var n=r(136),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(33),l=r(301),s=(r(1508),r(1340)),f=r(206),d=r(956),p=r(1355),h=r(30),m=r(254),v={userCard:"index-module_userCard_NOTbr",body:"index-module_body_20bgh",avatar:"index-module_avatar_OBHFJ",userInfos:"index-module_userInfos_B16Pa",nameContainer:"index-module_nameContainer_elI96",name:"index-module_name_QeZm4",dingtalk:"index-module_dingtalk_kYXBj",badge:"index-module_badge_lsJBP",dingding:"index-module_dingding_l7pi0",infoWithBg:"index-module_infoWithBg_JGcdP",signature:"index-module_signature_aQ+Wz",infoList:"index-module_infoList_Y58li",infoItem:"index-module_infoItem_same7",icon:"index-module_icon_MGwU8",footer:"index-module_footer_FNHCP",follow:"index-module_follow_1HgLb",footerItem:"index-module_footerItem_H0y7j",number:"index-module_number_NahUE",userLink:"index-module_userLink_i0XYI",skeleton:"index-module_skeleton_Z4M4v",infoDetail:"index-module_infoDetail_dKXCO"};function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g={mobile:"user-mobile",email:"user-email",departments:"user-department-opa",job_title:"user-job",location:"user-location-line"},w=function(e){var t=e.style,r=void 0===t?{}:t,n=e.className,i=void 0===n?"":n,c=e.user,l=void 0===c?{}:c,b=e.profile,w=void 0===b?{}:b,_=e.loading,O=e.isInGroup,E=e.userAvatar,S=l.avatar_url,x=l.avatar,j=l.description,k=l.followers_count,P=l.following_count,C=l.name,T=l.id,L=window.appData,A=L.isYuque,I=L.isPublicCloud,N=L.organization,D=y(Object(o.useState)(),2),R=D[0],M=D[1],F=y(Object(o.useState)(null),2),G=F[0],B=F[1],U=y(Object(o.useState)(null),2),z=U[0],W=U[1],V=w.dingtalk_id,H=w.orgName,q=w.role,K=w.status,Y=w.isPublicUser,$=K===f.organizationUser.STATUS.terminated,Z=q===f.organizationUser.ROLE.outsourcer,J=N&&Y,X=N&&(null==N?void 0:N.id);Object(o.useEffect)((function(){B("following_count"in w?w.following_count||0:P||0),W("followers_count"in w?w.followers_count||0:k||0)}),[w]);var Q=function(){R||u.a.users.mobile({id:T}).then(M)},ee=function(e){return e.map((function(e){return{key:e,icon:g[e],value:w[e]}})).filter((function(e){return!!e.value}))},te=[];te=ee(A?N?["mobile","email","departments","job_title"]:["location","job_title"]:["departments","job_title"]);var re=null;J?re=a.a.createElement("div",{className:v.infoWithBg},__("非本空间成员")):$?re=a.a.createElement("div",{className:v.infoWithBg},I?__("已离职"):__("已退隐江湖")):Z&&(re=a.a.createElement("div",{className:v.infoWithBg},__("外部联系人")));var ne=!N&&(!$&&!Z&&!J&&w.enable_home);return a.a.createElement("div",{className:"".concat(i," ").concat(v.userCard),style:r,"data-aspm":"c39373"},a.a.createElement("div",{className:v.body},X?a.a.createElement(m.a,{src:E||S||x,size:48,className:v.avatar,bordered:!0}):a.a.createElement("a",{href:"/".concat(l.login),target:"_blank"},a.a.createElement(m.a,{src:E||S||x,size:48,className:v.avatar,bordered:!0})),a.a.createElement("div",{className:v.userInfos},a.a.createElement("div",{className:v.nameContainer},X?a.a.createElement("span",{className:v.name},H||C):a.a.createElement("a",{href:"/".concat(l.login),target:"_blank",className:v.name},H||C),V&&a.a.createElement("a",{href:"dingtalk://dingtalkclient/action/sendmsg?dingtalk_id=".concat(V),className:v.dingtalk,"data-testid":"dingtalk","data-aspm-click":"d001"},a.a.createElement(h.b,{name:"dingding-filled",className:v.dingding})),a.a.createElement(d.a,{user:l,useMobile:!0,className:v.badge}),re),a.a.createElement("div",{className:v.signature},j||""),_&&a.a.createElement("div",{className:v.skeleton},a.a.createElement(s.a,{active:!0,title:!1})),te&&te.length>0?a.a.createElement("div",{className:v.infoList,style:{marginTop:O?0:10}},te.map((function(e){return function(e){return"departments"===e.key?e.value.map((function(t,r){return a.a.createElement("div",{className:v.infoItem,key:e.key+r,"data-testid":e.key},a.a.createElement(h.b,{name:e.icon,width:16,className:v.icon}),a.a.createElement("span",{className:v.infoDetail},t))})):a.a.createElement("div",{className:v.infoItem,key:e.key,"data-testid":e.key},a.a.createElement(h.b,{name:e.icon,width:16,className:v.icon}),"mobile"===e.key?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:v.infoDetail},R||e.value),!R&&a.a.createElement("a",{onClick:Q},__("查看"))):a.a.createElement("span",{className:v.infoDetail},e.value))}(e)}))):null)),!!ne&&a.a.createElement("div",{className:v.footer},a.a.createElement("div",{className:v.follow},a.a.createElement("div",{className:v.footerItem},__("粉丝"),a.a.createElement("span",{className:v.number},z)),a.a.createElement("div",{className:v.footerItem},__("关注"),a.a.createElement("span",{className:v.number},G))),a.a.createElement(p.a,{user:l,className:v.followBtn})))};w.propTypes={user:c.a.object.isRequired,profile:c.a.object,style:c.a.object,className:c.a.string,loading:c.a.bool,isInGroup:c.a.bool};var _=w,O=r(95),E="index-module_popover_Xyidp",S="index-module_overlay_A0ouW";function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t=e.user,r=void 0===t?{}:t,i=e.children,c=e.style,s=void 0===c?{}:c,f=e.className,d=void 0===f?"":f,p=e.isInGroup,h=e.userAvatar,m=r&&r.id,v=x(Object(o.useState)("topLeft"),2),y=v[0],b=v[1],g=Object(o.useRef)(null),w=Object(l.a)(u.a.users.profile),j=w.data,k=w.loading,P=w.request;if(null==m||O.a.isGroupOrPublication(r))return i;return window.h5?i:a.a.createElement(n.a,{placement:y,content:a.a.createElement(_,{isInGroup:p,user:r,profile:j||{},loading:k,userAvatar:h}),style:s,className:"".concat(d," ").concat(E),overlayClassName:S,mouseEnterDelay:.3},a.a.createElement("span",{onMouseOver:function(){var e=g&&g.current.getBoundingClientRect().top;b(e<240?"bottomLeft":"topLeft"),j||k||P({id:m})},ref:g,"data-testid":"content"},i))};k.propTypes={user:c.a.object.isRequired,style:c.a.object,className:c.a.string,children:c.a.any,isInGroup:c.a.bool};t.a=k},871:function(e,t){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.formatOne=function(e){if(!e)return e;var t=e;return t.user&&(t=i(i({},e),e.user)),t.uid||(t.work_id?e.uid="".concat(t.work_id):t.id?e.uid="".concat(t.id):t.provider_type&&t.provider_userid&&(e.uid="".concat(t.provider_type,"_").concat(t.provider_userid))),e},t.format=function(e){var r,o=n(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;t.formatOne(a)}}catch(e){o.e(e)}finally{o.f()}return e}},878:function(e,t,r){"use strict";var n=r(1326);r.d(t,"a",(function(){return n.a})),r.d(t,"b",(function(){return n.b})),r.d(t,"c",(function(){return n.c})),r.d(t,"d",(function(){return n.e})),r.d(t,"e",(function(){return n.f})),r.d(t,"f",(function(){return n.g})),r.d(t,"g",(function(){return n.h})),r.d(t,"h",(function(){return n.i})),r.d(t,"i",(function(){return n.j})),r.d(t,"j",(function(){return n.k})),r.d(t,"k",(function(){return n.l})),r.d(t,"l",(function(){return n.m})),r.d(t,"m",(function(){return n.n})),r.d(t,"n",(function(){return n.o})),r.d(t,"o",(function(){return n.p}))},879:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return d})),r.d(t,"b",(function(){return p}));var n=r(80),o=r(108),a=r(187),i=r(786),c=r.n(i);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s={organization:n.default.ROLE,group:o.default.ROLE,book:a.default.ROLE,doc:a.default.ROLE,list:c.a.ROLE};function f(e){var t=s[e],r={};return"organization"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),"outsourcer"===r&&(n.label=__("外部联系人")),e[r]=n,e}),{}):"group"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),"readonly"===r&&(n.label=__("只读成员")),e[r]=n,e}),{}):"book"===e||"doc"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"readonly"===r&&(n.label=__("可阅读"),e[r]=n),"edit"===r&&(n.label=__("可编辑"),e[r]=n),e}),{}):"list"===e&&(r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),e[r]=n,e}),{})),r}function d(e){var t=f(e);return["owner","member","edit","readonly","outsourcer"].map((function(e){return t[e]})).filter((function(e){return!!e}))}function p(e,t){var r,n=f(e),o=u(Object.keys(n).map((function(e){return n[e]})));try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.value===t)return a}}catch(e){o.e(e)}finally{o.f()}return{}}},893:function(e,t,r){"use strict";var n=r(33),o=r(85),a=r(169),i=r(80),c=r(187);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(){l=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function f(e,t,r,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function m(){}function v(){}var y={};s(y,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(P([])));g&&g!==t&&r.call(g,a)&&(y=g);var w=v.prototype=h.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var l=d(e[n],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==u(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=d(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:m,configurable:!0}),m.displayName=s(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),s(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(f(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),s(w,c,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function s(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(w,e);var t,r,u,m,y,g=h(w);function w(){var e;f(this,w);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return b(v(e=g.call.apply(g,[this].concat(r))),"getUrl",(function(t,r){if(e.joinToken=t||e.joinToken,e.joinToken){if("doc"===e.type){var n="".concat(window.location.origin,"/g/").concat(e.group.login,"/").concat(e.book.slug,"/").concat(e.doc.slug,"/collaborator/join?token=").concat(t.token),o="/".concat(e.group.login,"/").concat(e.book.slug,"/").concat(e.doc.slug,"/edit");return r&&t.role===c.ROLE.edit?"".concat(n,"&goto=").concat(encodeURIComponent(o)):n}return"book"===e.type?"".concat(window.location.origin,"/g/").concat(e.group.login,"/").concat(e.book.slug,"/collaborator/join?token=").concat(t.token):"group"===e.type?"".concat(window.location.origin,"/groups/").concat(e.group.login,"/join?token=").concat(t.token):"organization"===e.type?"".concat(window.location.origin,"/r/organizations/").concat(e.organization.login,"/join?token=").concat(t.token):"list"===e.type?"".concat(window.location.origin,"/r/list/").concat(e.list.id,"/join?token=").concat(t.token):null}})),b(v(e),"getCopyText",(function(t,r){return r===c.ROLE.edit?__("{url}# 邀请你共同编辑{typeName}《{targetName}》",{targetName:e.target.name||e.target.title,typeName:e.typeName,url:t}):__("{url}# 《{targetName}》",{targetName:e.target.name||e.target.title,url:t})})),b(v(e),"getOrgTipText",(function(){return e.organization?e.canPublic?"book"===e.type?__("获得链接的所有人（含空间外人员）可获得{type}的权限，空间外人员将自动成为{memberType}。",{type:e.typeName,memberType:o.a.isYuqueAddressBook()?__("空间成员"):__("空间外部联系人")}):__("获得链接的所有人（含空间外人员）可加入{type}，空间外人员将自动成为{memberType}。",{type:e.typeName,memberType:o.a.isYuqueAddressBook()?__("空间成员"):__("空间外部联系人")}):"book"===e.type?__("仅获得链接的空间成员可获得{type}的权限。",{type:e.typeName}):__("仅获得链接的空间成员可加入{type}。",{type:e.typeName}):""})),b(v(e),"getMoreSettingOptions",(function(){return e.organization&&e.organization.id?e.organization.isPremium&&o.a.isYuqueAddressBook()?[{value:i.ROLE.member,label:__("空间成员")},{value:i.ROLE.outsourcer,label:__("外部联系人")}]:e.organization.isPremium&&!o.a.isYuqueAddressBook()?[{value:i.ROLE.outsourcer,label:__("外部联系人")}]:[{value:i.ROLE.member,label:__("空间成员")}]:null})),b(v(e),"getToken",(function(t){var r=t.approve,n=t.force,o=t.role,c=t.allow_outsider,u=void 0===c?a.ALLOW_OUTSIDER.NORMAL:c,l=t.organization_user_role,s=void 0===l?i.ROLE.member:l;if(e.proxy){var f={id:e.target.id,allow_outsider:u,organization_user_role:s};return null!=r&&(f.approve=r),null!=n&&(f.force=n),null!=o&&(f.role=o),e.proxy.token(f).then((function(t){return e.joinToken=t,t}))}})),b(v(e),"updateToken",(function(t){var r=t.approve,n=t.role,o=t.allow_outsider,c=void 0===o?a.ALLOW_OUTSIDER.NORMAL:o,u=t.organization_user_role,l=void 0===u?i.ROLE.member:u;if(e.proxy){var s={id:e.target.id,allow_outsider:c,organization_user_role:l};return null!=r&&(s.approve=r),null!=n&&(s.role=n),e.proxy.updateToken(s).then((function(t){return e.joinToken=t,t}))}})),b(v(e),"deleteTokens",(function(){if(e.proxy)return e.proxy.deleteTokens({id:e.target.id}).then((function(e){return e}))})),e}return t=w,r=[{key:"init",value:function(){this.target&&(this.joinToken=this.target.joinToken),"organization"===this.type?this.proxy=n.a.organizations:"group"===this.type?this.proxy=n.a.groups:"book"===this.type?this.proxy=n.a.books:"doc"===this.type&&(this.proxy=n.a.docs)}},{key:"check",value:function(){this.target||(this.enable=!1)}},{key:"orgDataReady",value:(m=l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.organization){e.next=4;break}return e.next=3,o.a.canIndirectAddOrgMember(this.organization);case 3:this.canPublic=e.sent;case 4:case"end":return e.stop()}}),e,this)})),y=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=m.apply(e,t);function a(e){s(o,r,n,a,i,"next",e)}function i(e){s(o,r,n,a,i,"throw",e)}a(void 0)}))},function(){return y.apply(this,arguments)})}],u=[{key:"create",value:function(e){var t=new w(e);return t.check(),t.enable&&t.init(),t}}],r&&d(t.prototype,r),u&&d(t,u),Object.defineProperty(t,"prototype",{writable:!1}),w}(r(299).a);b(w,"id","invite"),b(w,"title",__("邀请添加")),t.a=w},896:function(e,t,r){"use strict";var n={FEATURES:[{area:"GROUP_PAGE",enable:!0,type:"custom",tip_id:"feature_group_introduce",tip:__("功能说明"),createdAt:"2022-09-20"},{area:"WIKI_PAGE",enable:!0,type:"custom",tip_id:"feature_org_wiki_introduce",tip:__("功能说明"),createdAt:"2022-09-20"},{area:"GROUP_PAGE",enable:!0,type:"custom",tip_id:"feature_group_introduce",tip:__("功能说明"),createdAt:"2022-10-27"},{area:"GARDEN_PAGE",enable:!0,type:"custom",tip_id:"feature_garden_introduce",tip:__("功能说明"),createdAt:"2022-11-17"}]},o=r(33),a=r(183),i=n.FEATURES,c={readLiteFeatureGuide:function(e){if("function"==typeof navigator.sendBeacon){var t=new URLSearchParams;t.set("ctoken",Object(a.a)(window)),t.set("type",e.tip_id),navigator.sendBeacon("/api/mine/read_guide?".concat(t.toString()))}else o.a.mine.readGuide({type:e.tip_id});var r=e.containerSelector&&document.querySelector(e.containerSelector);if(r){var n=r.querySelector(".larkui-feature-guide");if(!n)return;n.style.display="none"}},readMiniFeatureGuide:function(e,t){var r=e.tip_id;o.a.mine.readGuide({type:r}),t({type:"guide/readFeatureGuide",payload:{tip_id:r}})},findFeatureGuide:function(e){var t=e.tip_id,r=e.type;return i.find((function(e){return e.tip_id===t&&e.type===r}))},needDisplayGuide:function(e){if("#guide"===window.location.hash)return!0;var t=window.appData.readTip;return!t||!t[e]}};c.FEATURES=i;t.a=c},90:function(e,t,r){"use strict";var n,o;r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o})),function(e){e.NOTE="NOTE",e.BOOK="BOOK",e.DOC="DOC"}(n||(n={})),function(e){e.PERSON="PERSON",e.ORG="ORG",e.INTERNAL="INTERNAL"}(o||(o={}))},934:function(e,t){e.exports=function(e){return null==e}},961:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return s}));r(29),r(300);var n=r(90),o=r(167);var a=r(163),i=r(18);function c(e,t,r,n){var a=o.b.getHost(),i="";switch(t){case"BOOK":i="".concat(a,"/").concat(r.login,"/").concat(e.slug);break;case"DOC":i="".concat(a,"/").concat(r.login,"/").concat(n.slug,"/").concat(e.slug);break;case"NOTE":i="".concat(a,"/r/notes/share/").concat(e.slug)}var c="",u="";if("NOTE"!==t){"Sheet"===e.type&&(c=window.location.hash.slice(1));var l=e.title||e.name;l&&(u+="《".concat(l,"》"));var f=s(e,t,r,n).currentPassword;f&&(u+=" ".concat(__("密码：")).concat(f))}return{url:i,urlWithDesc:i+(c||u?"?".concat("DOC"===t?"singleDoc":"","#").concat(c||""," ").concat(u||""):"")}}var u=function(e,t,r,o,c){var u=null==t?void 0:t.public;switch(r){case"BOOK":u=Object(a.d)({type:"book",target:t,group:o});break;case"DOC":u=Object(a.d)({type:"doc",target:t,group:o,book:c})}var l=u;if(3===u)switch(e){case n.a.ORG:l=2;break;case n.a.PERSON:case n.a.INTERNAL:l=1}return{privacy:l,isShareActive:l!==i.PRIVACY.private}},l=function(e,t,r,n){var o=e.indexed_level,c=!1;"DOC"===t&&(Object(a.d)({type:"book",target:n,group:r})!==i.PRIVACY.private&&1===(null==n?void 0:n.indexed_level)&&(o=null==n?void 0:n.indexed_level,c=!0));return{currentIndexedLevel:o,isInheritBookIndex:c}},s=function(e,t,r,n){var o=e.password,c=!1;"DOC"===t&&(Object(a.d)({type:"book",target:n,group:r})!==i.PRIVACY.private&&null!=n&&n.password&&(o=null==n?void 0:n.password,c=!0));return{currentPassword:o,isInheritBookPassword:c}}},962:function(e,t,r){var n=r(393),o=r(224),a=r(445),i=r(366),c=r(1078),u=r(1507),l=a((function(e){var t=u(e);return c(t)&&(t=void 0),i(n(e,1,c,!0),o(t,2))}));e.exports=l},964:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(968),o=function(){return Promise.all([r.e(0),r.e(1),r.e(115)]).then(r.bind(null,2351)).then((function(e){return e.default}))};function a(){var e=Object(n.a)({loader:o,name:"TemplateSelector"}),t=e.loadSelector,r=e.showSelector;return{loadTemplateSelector:t,showTemplateSelector:function(e){return r(e,{width:e.isDesktop?1100:1140,maskClosable:!0,centered:!0})},contextHolder:e.contextHolder}}},968:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r(0),o=r(449),a=r(205),i="styles-module_modal_8nT+9";function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(){u=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function f(e,t,r,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function m(){}function v(){}var y={};s(y,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(P([])));g&&g!==t&&r.call(g,a)&&(y=g);var w=v.prototype=h.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,u){var l=d(e[n],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==c(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,u)}),(function(e){o("throw",e,i,u)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,u)}))}u(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=d(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:m,configurable:!0}),m.displayName=s(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),s(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(f(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),s(w,l,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e){var t=e.loader,r=e.name,c=p(o.a.useModal(),2),l=c[0],f=c[1],h=function(e){var t=e.loader,r=n.useRef(null);return function(){return r.current?Promise.resolve(r.current):t().then((function(e){return r.current=e,r.current})).catch((function(e){return console.error(e.stack)}))}}({loader:t}),m=function(){var e,t=(e=u().mark((function e(t,o){var c,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:if(c=e.sent){e.next=6;break}return console.error("SelectorComponent for ".concat(r," load failed")),e.abrupt("return");case 6:return f=new Promise((function(e){var r=l.info({}),u=function(){var e,n;r.destroy(),null==t||null===(e=t.onClose)||void 0===e||e.call(t),null==o||null===(n=o.afterClose)||void 0===n||n.call(o)},f=s(s({},t),{},{onSelect:function(t){e(t),u()},onClose:function(){e(void 0),u()}});r.update(s(s({className:i,icon:null,centered:!0,cancelText:""},o),{},{content:n.createElement(a.a,null,n.createElement(c,f))}))})),e.next=9,f;case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){d(a,n,o,i,c,"next",e)}function c(e){d(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return{loadSelector:function(){return h()},showSelector:m,contextHolder:f}}},981:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(2),i=r.n(a),c=(r(92),r(45)),u=(r(166),r(31));function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e){return"larkui-member-selector-container".concat(e?"-".concat(e):"")},d=o.a.forwardRef((function(e,t){var r=e.selectors,a=l(Object(n.useState)(!0),2),i=a[0],s=a[1],d=l(Object(n.useState)(e.defaultTabKey),2),p=d[0],h=d[1],m=l(Object(n.useState)(460),2),v=m[0],y=m[1],b=function(e){h(e.key)};Object(n.useEffect)((function(){y(e.getWidth(p)||460)}),[p]),o.a.useImperativeHandle(t,(function(){return{toggleTitle:function(e){s(e)}}}));return o.a.createElement(c.a,{wrapClassName:f(),visible:e.visible,width:v,title:o.a.createElement(o.a.Fragment,null,i?o.a.createElement("div",{className:f("select-by")},o.a.createElement(u.a,{onSelect:b,selectedKeys:[p],mode:"horizontal"},r.map((function(e){return o.a.createElement(u.a.Item,{key:e.props.id},__("{title}",{title:e.props.title}))})))):null),footer:null,maskClosable:!1,onCancel:e.onCancel,onClose:e.onClose,destroyOnClose:!0},r.filter((function(e){return e.props.id===p}))[0])}));d.defaultProps={selectors:[],getWidth:function(){},onCancel:function(){},onClose:function(){}},d.propTypes={selectors:i.a.arrayOf(i.a.node),getWidth:i.a.func,defaultTabKey:i.a.string,onCancel:i.a.func,onClose:i.a.func,visible:i.a.bool};var p=d,h=(r(204),r(70)),m=(r(219),r(50)),v=(r(62),r(21)),y=(r(103),r(60)),b=(r(1077),r(586)),g=r(636),w=r(30),_=(r(466),r(253)),O=(r(270),r(64)),E=r(421),S=r(565);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){return"larkui-member-selector-role"+(e?"-".concat(e):"")};function P(e){var t=e.roles,r=e.onChange,a=e.defaultRole||t&&t[0],i=x(Object(n.useState)(a),2),c=i[0],l=i[1];if(c){var s=function(e){l(e),r(e)};return"radio"===e.type?o.a.createElement("div",{className:k("role-select")},o.a.createElement(O.a,{size:"large",defaultValue:c.unique,onChange:function(e){var r=t.find((function(t){return t.unique===e}));s(r)}},null==t?void 0:t.map((function(e){return o.a.createElement(Option,{value:e.unique,disabled:e.disabled},o.a.createElement(y.a,{title:e.disabled?e.disabled_text:null,placement:"top",color:S.themeToken["@white"],overlayInnerStyle:{width:240,color:S.themeToken["@black"]}},o.a.createElement("span",{className:k("role-tip")},e.roleTip),o.a.createElement("span",{className:k("role-label")},e.label)))})))):o.a.createElement(_.a,{trigger:["click"],overlayClassName:k(),overlay:o.a.createElement(u.a,{selectedKeys:["".concat(c.key)]},null==t?void 0:t.map((function(e){return o.a.createElement(u.a.Item,{key:e.key,onClick:function(){s(e)}},o.a.createElement("span",null,o.a.createElement("span",null,e.label)))})))},o.a.createElement("span",null,c.label," ",o.a.createElement(E.a,null)))}}P.propTypes={type:i.a.oneOf(["dropdown","radio"]),defaultRole:i.a.object,roles:i.a.array.isRequired,onChange:i.a.func.isRequired};var C=P,T=(r(559),r(200)),L=r(10),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 565H360c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h304c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"meh",theme:"outlined"},I=r(27),N=function(e,t){return n.createElement(I.a,Object(L.a)(Object(L.a)({},e),{},{ref:t,icon:A}))};N.displayName="MehOutlined";var D=n.forwardRef(N),R=r(54),M=r.n(R),F=r(1149),G=r(206);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z=function(e){var t=e.user,r=Object(n.useRef)(null);return o.a.createElement(F.a,{textRef:r,title:t.dep,placement:"bottom"},o.a.createElement("span",{className:"ellipsis-wrapper"},o.a.createElement("span",{ref:r,className:"ellipsis-text"},t.dep)))},W=function(e){return"larkui-member-selector-user-search".concat(e?"-".concat(e):"")},V=O.a.Option;var H=o.a.createElement("div",{className:W("notfound")},o.a.createElement(D,null),o.a.createElement("p",null,__("未搜索到相关结果"))),q=function(e){return e.department||"Department"===e.type},K=function(e){return q(e)?G.avatar.department:e.avatar_url||"//gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png?x-oss-process=image%2Fresize%2Cm_fill%2Cw_64%2Ch_64%2Fformat%2Cpng"};function Y(e){var t,r=e.users,a=e.selectedUsers,i=function(e){var t=B(Object(n.useState)(!1),2),r=t[0],o=t[1],a=B(Object(n.useState)(!1),2),i=a[0],c=a[1],u=e.getUsers,l=e.onChange,s=Object(n.useRef)(null),f=M()((function(e){return o(!0),c(!1),u(e).then((function(t){if(o(!1),e&&!(t&&t.length>0))return c(!0),clearTimeout(s.current),s.current=setTimeout((function(){c(!1)}),3e3),t})).catch((function(){o(!1)}))}),300);return{state:{loading:r,fetchEnd:i},handleChange:function(e){l(e)},handleSearch:function(e){f(e)}}}(e),c=i.state,u=i.handleChange,l=i.handleSearch,s=Object(n.useRef)(null),f=e.notFoundContent||H;return Object(n.useEffect)((function(){e.getRef&&e.getRef(s)}),[]),o.a.createElement("div",{className:W()},o.a.createElement(O.a,{ref:s,className:"normal"===e.userClassType?W("container-normal"):W("container"),value:e.value,showSearch:!0,autoFocus:!0,mode:"multiple",placeholder:e.placeholder,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,notFoundContent:!c.loading&&c.fetchEnd?f:null,onSearch:l,onChange:u,getPopupContainer:function(e){return e.parentNode},loading:c.loading,tagRender:e.isLiteSearchSelector?function(e){var t=e.value,r=e.closable,n=e.onClose,i=a.find((function(e){return q(e)?e.uid===t:e.id===t||e.uid===t}));return i?o.a.createElement(T.a,{icon:q(i)?o.a.createElement("div",{className:"larkicon larkicon-organization ".concat(W("tag-icon"))}):null,onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:r,onClose:n},i.name):null}:function(e){var t=Object(n.useRef)(null),r=(e.label,e.value),i=e.closable,c=e.onClose,u=a.find((function(e){return q(e)?e.uid===r:e.id===r||e.uid===r}));if(!u)return null;return o.a.createElement(T.a,{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:i,onClose:c,className:W("user-selector-tag"),closeIcon:o.a.createElement("span",{className:W("user-selector-tag-close-avatar-wrapper")},o.a.createElement(w.b,{name:"close",size:12,className:W("user-selector-tag-close-avatar")}))},o.a.createElement(b.a,{src:K(u),size:24,className:W("user-selector-tag-avatar")}),o.a.createElement("span",{className:W("user-selector-tag-label")},o.a.createElement(F.a,{textRef:t,title:u.name,placement:"bottom"},o.a.createElement("span",{className:"ellipsis-wrapper"},o.a.createElement("span",{ref:t,className:"ellipsis-text"},u.name)))))}},(t=window.appData.isYuque,null==r?void 0:r.map((function(r){var n=r.dep?W("isdep"):null;return o.a.createElement(V,{key:r.id||r.uid,value:r[e.keyField],label:r.name,className:W("menu-item")},o.a.createElement("span",{className:"".concat(W("user")," ").concat(n)},o.a.createElement(b.a,{className:W("icon"),src:K(r),name:r.name,size:32}),o.a.createElement("span",{className:W("title-wrap")},o.a.createElement("span",{className:W("title")},o.a.createElement("span",{className:W("name")},r.name),t&&r.login&&o.a.createElement("span",{className:W("login")},"(",r.login,")"),!t&&r.lastName&&o.a.createElement("span",{className:W("login")},"(",r.lastName,")")),r.dep&&o.a.createElement("span",{className:W("dep")},o.a.createElement(z,{user:r})))))})))))}Y.defaultProps={keyField:"login"},Y.propTypes={keyField:i.a.string,value:i.a.array.isRequired,users:i.a.array.isRequired,selectedUsers:i.a.array.isRequired,getUsers:i.a.func.isRequired,onChange:i.a.func.isRequired,getRef:i.a.func,placeholder:i.a.string,notFoundContent:i.a.node};var $=Y,Z=(r(63),r(23));function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function X(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=oe(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function Q(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(){ee=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==J(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function te(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function re(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){te(a,n,o,i,c,"next",e)}function c(e){te(a,n,o,i,c,"throw",e)}i(void 0)}))}}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){if(e){if("string"==typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ie=function(){setTimeout((function(){window.location.reload()}),2e3)};function ce(e){var t=e.roles,r=e.searchUser,o=e.checkValid,a=e.getUserCount,i=e.disableMeta,c=e.onSubmit,u=e.afterSubmit,l=void 0===u?ie:u,s=e.initialValues,f=e.onChange,d=e.getDefaultUsers,p=ne(Object(n.useState)([]),2),h=p[0],m=p[1],v=ne(Object(n.useState)([]),2),y=v[0],b=v[1],g=ne(Object(n.useState)(0),2),w=g[0],_=g[1],O=ne(Object(n.useState)(!0),2),E=O[0],S=O[1],x=Object(n.useRef)(t&&t[0]),j=Object(n.useRef)(null),k=Object(n.useRef)([]),P=function(e,t){return!(!e||!t)&&(e.uid&&t.uid?e.uid===t.uid:e.login&&t.login?e.login===t.login:!(!t.provider_userid||!e.provider_userid)&&(e.provider_userid===t.provider_userid&&e.provider_type===t.provider_type))},C=function(){var e=re(ee().mark((function e(t){var r,n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m([]),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,d(t);case 5:return n=e.sent,n=null===(r=n)||void 0===r?void 0:r.filter((function(e){return!y.some((function(t){return P(t,e)}))})),m(n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=re(ee().mark((function e(t){var n,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m([]),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r(t);case 5:return o=e.sent,o=null===(n=o)||void 0===n?void 0:n.filter((function(e){return!y.some((function(t){return P(t,e)}))})),m(o),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){return null==e?void 0:e.map((function(e){return[].concat(Q(h),Q(y)).find((function(t){return t.uid===e}))}))},A=function(e){return null==e?void 0:e.filter((function(e){return e._valid}))},I=Object(n.useCallback)(M()((function(e){var t=e.status;t&&Z.a[t]?Z.a[t](e.message):Z.a.warn(e.message)}),300),[]),N=function(e){return null==e?void 0:e.map((function(e){if("_valid"in e)return e;var t=o(e);return t&&"success"===t.status?e._valid=!0:(e._valid=!1,I(t)),e}))},D=function(e){return null==e?void 0:e.map((function(e){return"_valid"in e||(e._valid=!0),e}))};Object(n.useEffect)((function(){function e(){return(e=re(ee().mark((function e(){var t,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(s);case 2:t=e.sent,r=D(t),b(r),a&&_(a(A(r)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!s||null!=y&&y.length||function(){e.apply(this,arguments)}()}),[s]);var R=function(e){var t=N(e);b(t),i||_(a(A(t)))},F=function(){var e=re(ee().mark((function e(t){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(A(t));case 3:(r=e.sent)&&("success"===r.status?(I(r),setTimeout((function(){window.location.reload()}),2e3)):I(r)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Z.a.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=re(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(A(y),x.current,E);case 3:(t=e.sent)&&("success"===t.status?(I(t),l(t)):I(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Z.a.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return{state:{users:h,selected:y,userCount:w,onlyStaff:E},getUsers:T,getRef:function(e){j.current=e.current},disableSubmit:function(){return 0===y.length},handleSelect:function(e){if(j.current){Array.isArray(e)||(e=[e]);var t,r=Q(k.current),n=Q(y),o=X(e);try{var a=function(){var e=t.value;r.every((function(t){return t.uid!==e.uid}))&&r.push(e),n.every((function(t){return t.uid!==e.uid}))&&n.push(e)};for(o.s();!(t=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}m(r),k.current=r,R(n)}},handleDeselect:function(e){if(j.current){Array.isArray(e)||(e=[e]);var t,r=Q(y),n=X(e);try{var o=function(){var e=t.value,n=r.findIndex((function(t){return t.uid===e.uid}));n>-1&&r.splice(n,1)};for(n.s();!(t=n.n()).done;)o()}catch(e){n.e(e)}finally{n.f()}R(r)}},handleChange:function(e){var t=N(L(e)),r=null==t?void 0:t.filter((function(e){return e._valid}));r.length===t.length?(b(t),i||_(a(A(t))),setTimeout((function(){m([])}),300)):b(r)},handleRoleChange:function(e){x.current=e},handleSubmit:G,handleFocus:function(){j.current.focus()},userHandleChange:function(e){var t=N(L(e)),r=null==t?void 0:t.filter((function(e){return e._valid}));(null==r?void 0:r.length)===(null==t?void 0:t.length)?(b(t),setTimeout((function(){m([])}),300),F(t)):b(r)},setOnlyStaff:S}}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var se=function(e){return"larkui-member-selector-search".concat(e?"-".concat(e):"")};function fe(e){return o.a.createElement("span",{className:e.className},__("已选择 {count} 人",{count:e.userCount}))}function de(e){var t;if(e.roles&&1===e.roles.length)t=o.a.createElement("span",{className:se("role-text")},e.roles[0].label);else{var r=e.roleSelector;t=r?o.a.createElement(r,{roles:e.roles,defaultRole:e.defaultRole,onChange:e.onRoleChange}):o.a.createElement(C,{roles:e.roles,defaultRole:e.defaultRole,onChange:e.onRoleChange})}return o.a.createElement("span",{className:e.className},o.a.createElement("span",null,e.actionTipText||__("添加为：")),t)}function pe(e){var t,r,a=e.selectors,i=1===a.length,c=i?0:null,u=ue(Object(n.useState)(c),2),l=u[0],s=u[1],f=function(e){i||s(e)};return o.a.createElement("div",{className:se("quick-selector-container")},null!=l||i?(t=a[l],r=o.a.cloneElement(t,{className:se("quick-selector-main-list"),selected:e.selected,onSelect:e.onSelect,onDeselect:e.onDeselect,setOnlyStaff:e.setOnlyStaff,onlyStaff:e.onlyStaff}),o.a.createElement("div",null,o.a.createElement("h2",{className:se("quick-selector-subtitle")},!i&&o.a.createElement("span",{className:se("quick-selector-subicon"),onClick:function(){return f(null)}},o.a.createElement(g.a,null)),o.a.createElement("span",{onClick:function(){return f(null)}},__("从{title}添加",{title:t.props.title}))),o.a.createElement("div",{className:se("quick-selector-main")},r))):o.a.createElement("div",{className:se("quick-selector-choose")},o.a.createElement("h2",{className:se("quick-selector-title")},__("快捷添加")),o.a.createElement("div",{className:se("quick-selector-list")},a.map((function(e,t){return o.a.createElement("div",{key:e.props.id,type:"flex",justify:"start",align:"middle",className:se("quick-selector-item"),onClick:function(){return f(t)}},o.a.createElement(y.a,{placement:"top",title:"outsourcer"===e.props.id&&o.a.createElement("div",null,__("外部联系人用于外部合作场景，管理员可将外部客户或合作伙伴添加为外部联系人。"),o.a.createElement("a",{className:se("outsourcer-tip-link"),href:"https://www.yuque.com/yuque/rvzzxz/uan0vd",target:"_blank"},__("查看详细介绍")))},e.props.iconName&&o.a.createElement(w.b,{className:se("selector-icon"),name:e.props.iconName,size:16}),!e.props.iconName&&e.props.getIconUrl&&o.a.createElement(b.a,{className:se("quick-selector-icon"),src:e.props.getIconUrl(),size:18}),o.a.createElement("span",{className:se("quick-selector-text")},__("从{title}添加",{title:e.props.title}))),o.a.createElement("div",null,o.a.createElement(w.b,{name:"arrow-right",size:16})))})))))}function he(e){var t=ce(e),r=t.state,n=t.getRef,a=t.getUsers,i=t.disableSubmit,c=t.handleSelect,u=t.handleDeselect,l=t.handleChange,s=t.handleRoleChange,f=t.handleSubmit,d=t.handleFocus,p=t.setOnlyStaff;return o.a.createElement("div",{className:se()},o.a.createElement(h.a,null,o.a.createElement(m.a,{span:e.quickSelectors&&e.quickSelectors.length>0?12:24,className:se("selector"),onClick:d},o.a.createElement("div",{className:se("content")},o.a.createElement($,{keyField:"uid",getRef:n,value:r.selected.filter((function(e){return e._valid})).map((function(e){return e.uid})),users:r.users,selectedUsers:r.selected,getUsers:a,onChange:l,notFoundContent:e.notFoundContent,placeholder:__("输入人员名字搜索添加，可搜空间成员或外部联系人")})),o.a.createElement("div",{className:se("footer")},e.disableMeta?null:o.a.createElement(fe,{className:se("meta"),userCount:r.userCount}),e.roles&&e.roles.length>0?o.a.createElement(de,{className:se("role"),defaultRole:e.roles[0],roles:e.roles,onRoleChange:s,actionTipText:e.actionTipText,roleSelector:e.roleSelector}):null,o.a.createElement("div",{className:se("footer-btn")},o.a.createElement(v.a,{type:"primary",onClick:f,disabled:i()},__("添加"))))),e.quickSelectors&&e.quickSelectors.length>0?o.a.createElement(m.a,{span:12},o.a.createElement(pe,{selectors:e.quickSelectors,selected:r.selected,onSelect:c,onDeselect:u,setOnlyStaff:p,onlyStaff:r.onlyStaff})):null))}he.defaultProps={id:"search",title:"搜索",onSubmit:function(){},getDefaultUsers:function(){}},he.propTypes={id:i.a.string,title:i.a.string,getDefaultUsers:i.a.func,searchUser:i.a.func.isRequired,notFoundContent:i.a.node,onSubmit:i.a.func,actionTipText:i.a.oneOfType([i.a.string,i.a.node]),roleSelector:i.a.element};var me=he,ve=r(1359),ye=(r(953),r(443)),be=(r(950),r(468)),ge=(r(557),r(216)),we=(r(251),r(116)),_e=(r(1509),r(983)),Oe=r(9),Ee=r.n(Oe);function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function xe(e){return function(e){if(Array.isArray(e))return Ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(){je=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Se(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function ke(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Pe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ke(a,n,o,i,c,"next",e)}function c(e){ke(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){Le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Le(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Se(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Se(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||Ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){if(e){if("string"==typeof e)return Ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ne(e,t):void 0}}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var De=function(e){return"larkui-member-selector-list".concat(e?"-".concat(e):"")};function Re(e){return o.a.createElement("div",{className:De("breadcrumb")},o.a.createElement(_e.a,null,!e.disableNavTop&&o.a.createElement(_e.a.Item,{onClick:function(t){e.disabled||e.getData({getTop:!0})}},"全部"),e.navs&&e.navs.map((function(t,r){return o.a.createElement(_e.a.Item,{key:t.id,onClick:function(r){return function(t,r){e.disabled||e.getData(r)}(0,t)},disabled:e.disabled},t.name)}))))}function Me(e){return o.a.createElement("span",{className:"".concat(De("item-icon")," icon-organization"),onClick:function(t){e.disabled||e.getData(e.sub)}},o.a.createElement("span",{className:"".concat(De("item-larkicon"))},o.a.createElement(w.b,{name:"lower-level",size:16})),o.a.createElement("span",null,__("下级")))}function Fe(e){var t=e.item,r=window.appData.isYuque;return t.isTop?o.a.createElement("div",{className:De("item"),onClick:function(){return e.getData(t)}},o.a.createElement(w.b,{name:"group-type-department",className:"".concat(De("larkicon")),size:16}),o.a.createElement("span",{className:De("item-name")},t.name)):o.a.createElement("div",{className:De("item")},o.a.createElement(ge.a,{className:De("checked"),value:t.uid,checked:t.checked||e.disabled,onChange:function(r){r.target.checked?e.onSelect(r,t):e.onDeselect(t)},disabled:t.disabled||e.disabled},t.loading?o.a.createElement(we.a,null):o.a.createElement("span",{className:De("user")},t.avatar_url&&o.a.createElement(b.a,{className:De("icon"),src:t.avatar_url,size:24}),o.a.createElement("span",null,o.a.createElement("span",{className:De("title")},o.a.createElement("span",{className:De("name")},t.name),r&&t.login&&o.a.createElement("span",{className:De("login")},!t.sub&&o.a.createElement(o.a.Fragment,null,"("),t.login,!t.sub&&o.a.createElement(o.a.Fragment,null,")")),!r&&t.lastName&&o.a.createElement("span",{className:De("login")},!t.sub&&o.a.createElement(o.a.Fragment,null,"("),t.lastName,!t.sub&&o.a.createElement(o.a.Fragment,null,")")))))),t.sub&&o.a.createElement("div",{className:De("item-action")},o.a.createElement(Me,{sub:t.sub,getData:e.getData,disabled:e.disabledSub})))}function Ge(e){var t=Ae(Object(n.useState)(!1),2),r=t[0],o=t[1],a=Ae(Object(n.useState)([]),2),i=a[0],c=a[1],u=Ae(Object(n.useState)(!1),2),l=u[0],s=u[1],f=Ae(Object(n.useState)(e.enableSelectNav),1)[0],d=Ae(Object(n.useState)(!1),2),p=d[0],h=d[1],m=Ae(Object(n.useState)([]),2),v=m[0],y=m[1],b=e.onlyStaff,g=function(t){var r,n,o=t;return b&&null!==(r=o)&&void 0!==r&&r.length&&(o=o.filter((function(e){var t=e.work_id||e.workid;return!t||!t.startsWith("WB")}))),(null===(n=o)||void 0===n?void 0:n.map((function(t){var r=e.checkValid(t);return Te(Te({},t),{},{_valid:r&&"success"===r.status})})))||[]},w=function(t,r,n){var o=t.reduce((function(e,t){return e[t.uid]=t,e}),{});if(e.enableDepthAll&&n){var a,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ie(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(n);try{for(i.s();!(a=i.n()).done;){if(o[a.value.uid])return g(r).map((function(e){return Te(Te({},e),{},{checked:!0,disabled:!0})}))}}catch(e){i.e(e)}finally{i.f()}}return g(r).map((function(e){var r=t.find((function(t){return t.uid===e.uid}));return Te(Te({},e),{},{checked:r&&e._valid})}))}(e.selected,v,i),_=function(e){var t=e.some((function(e){return e.checked})),r=!e.some((function(e){return!(e.checked||p||!1===e._valid)}));return{allChecked:r,allDisabled:e.every((function(e){return e.disabled})),allIndeterminate:!r&&t}}(w),O=_.allChecked,E=_.allDisabled,S=_.allIndeterminate,x=function(e){return Pe(je().mark((function t(){var r,n,a,i,u,l=arguments;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o(!0),n=l.length,a=new Array(n),i=0;i<n;i++)a[i]=l[i];return t.next=4,e.apply(void 0,a);case 4:u=t.sent,a&&a[0]&&a[0].getTop?s(!1):(null===(r=u.users)||void 0===r?void 0:r.length)>0?s(!0):s(!1),c(u.navs),y(u.users),o(!1);case 9:case"end":return t.stop()}}),t)})))},j=x(e.getData),k=x(e.getInitData);Object(n.useEffect)((function(){k()}),[]);return{state:{list:w,navs:i,showAll:l,showNavSelect:f,loading:r,allChecked:O,allIndeterminate:S,allDisabled:E,navSelectChecked:p,enableMemberTypeSwitch:e.enableMemberTypeSwitch,onlyStaff:e.onlyStaff},getData:j,handleSelect:function(t,r){t.target.checked&&e.enableDepthAll&&r.sub?(y(xe(v).map((function(e){return e.id===r.id?e.loading=!0:e.loading=!1,e}))),e.getData(r.sub).then((function(t){y(xe(v).map((function(e){return e.loading=!1,e}))),r.name=t.name,e.onSelect(r)}))):e.onSelect(r)},handleAllSelect:function(t){t.target.checked?e.onSelect(w):e.onDeselect(w)},handleRoleChange:function(e){j({role:e.value})},handleNavSelect:function(t,r){t.target.checked?(h(!0),e.onSelect(r)):(h(!1),e.onDeselect(r))},handleMemberTypeChange:function(t){var r;null===(r=e.setOnlyStaff)||void 0===r||r.call(e,t)}}}function Be(e){var t=Ge(e),r=t.state,n=t.handleAllSelect,a=t.handleSelect,i=t.handleNavSelect,c=t.handleRoleChange,u=t.getData,l=t.handleMemberTypeChange,s=e.getFilterRoles&&e.getFilterRoles(),f=r.navs&&r.navs[r.navs.length-1];return o.a.createElement("div",{className:Ee()("".concat(e.className," ").concat(De()),Le({},De("member-switch"),r.enableMemberTypeSwitch))},o.a.createElement("div",{className:Ee()(Le({},De("member-switch-inner"),r.enableMemberTypeSwitch))},s&&o.a.createElement("div",{className:De("role-filter")},o.a.createElement(C,{roles:s,onChange:c})),r.navs&&r.navs.length?o.a.createElement(Re,{getData:u,navs:r.navs,disabled:r.navSelectChecked,disableNavTop:e.disableNavTop}):null,r.showNavSelect&&f&&o.a.createElement("div",{className:De("select-dep")},o.a.createElement(ge.a,{onChange:function(e){return i(e,f)}},o.a.createElement("span",{className:De("select-dep-name")},__("选择{dep}所有成员",{dep:f.name})))),r.showAll&&!r.loading?o.a.createElement("div",{className:De("select-all")},o.a.createElement(ge.a,{onChange:function(e){return n(e)},indeterminate:r.allIndeterminate,checked:r.allChecked||r.navSelectChecked,disabled:r.allDisabled||r.navSelectChecked},__("全选"))):null,o.a.createElement(be.a,{className:De("list"),justify:"block",dataSource:r.list,loading:r.loading,locale:{emptyText:"outsourcer"===e.id?o.a.createElement("div",{className:De("empty-view")},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*lzOXRp21hVEAAAAAAAAAAAAAARQnAQ"}),o.a.createElement("p",null,__("暂无外部联系人"))):o.a.createElement("div",null,__("暂无数据"))},renderItem:function(t){return o.a.createElement(Fe,{onSelect:a,onDeselect:e.onDeselect,item:t,getData:u,disabled:r.navSelectChecked||!1===t._valid,disabledSub:r.navSelectChecked})}})),r.enableMemberTypeSwitch&&o.a.createElement("div",{className:De("member-type-switch-container")},o.a.createElement(ye.a,{checked:r.onlyStaff,disabled:r.loading,size:"small",onChange:l})," ",o.a.createElement("span",null,__("仅添加集团正式员工"))))}Be.defaultProps={disableNavTop:!1,enableDepthAll:!1,enableSelectNav:!1},Be.propTypes={id:i.a.number,getData:i.a.func,onSelect:i.a.func,onDeselect:i.a.func,checkValid:i.a.func,disableNavTop:i.a.bool,enableDepthAll:i.a.bool,enableSelectNav:i.a.bool};var Ue=Be,ze=(r(870),r(365)),We=r(726),Ve=function(e){return"larkui-member-selector-import"+(e?"-".concat(e):"")};function He(e){var t=e.getUploadProps(),r=e.getBtnText();return o.a.createElement("div",{className:Ve()},o.a.createElement("p",{className:Ve("desc")},o.a.createElement("span",null,o.a.createElement("a",{href:e.templateUrl},__("下载模板文件（import_users.txt）")),__("填写人员信息，")),o.a.createElement("span",null,r)),o.a.createElement("div",null,o.a.createElement(ze.a,t,o.a.createElement(v.a,null,o.a.createElement(We.a,null)," ",__("选择文件并提交")))))}He.defaultProps={templateUrl:"https://cdn.nlark.com/import_users.txt"},He.propTypes={role:i.a.number.isRequired,getUploadProps:i.a.func.isRequired,getBtnText:i.a.func.isRequired,templateUrl:i.a.string};var qe=He;function Ke(e){var t,r=ce(e),n=r.state,a=r.getRef,i=r.getUsers,c=r.userHandleChange;return o.a.createElement("div",null,o.a.createElement($,{userClassType:e.userClassType,isLiteSearchSelector:e.isLiteSearchSelector,keyField:"uid",getRef:a,selectedUsers:n.selected,value:null===(t=n.selected)||void 0===t?void 0:t.filter((function(e){return e._valid})).map((function(e){return e.uid})),users:n.users,getUsers:i,onChange:c,notFoundContent:e.notFoundContent,placeholder:__("输入成员名字搜索添加")}))}Ke.defaultProps={onChange:function(){}},Ke.propTypes={userClassType:i.a.string,searchUser:i.a.func.isRequired,notFoundContent:i.a.node,onChange:i.a.func};var Ye=Ke;function $e(e){return o.a.createElement(p,{ref:e.titleRef,selectors:e.selectors,getWidth:e.getWidth,defaultTabKey:e.defaultTabKey,onCancel:e.onCancel,onClose:e.onClose,visible:e.visible})}$e.ListSelector=Ue,$e.SearchSelector=me,$e.InviteSelector=ve.a,$e.ImportSelector=qe,$e.LiteSearchSelector=Ye,$e.propTypes={titleRef:i.a.object,selectors:i.a.array,defaultTabKey:i.a.string,getWidth:i.a.func,onCancel:i.a.func,onClose:i.a.func,visible:i.a.bool};t.a=$e},983:function(e,t,r){"use strict";r(1878);var n=r(567),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(9),l=r.n(u),s=r(69),f=r.n(s);r(1509);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var p=["className"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}function b(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var g=a.a.forwardRef((function(e,t){var r=e.className,o=b(e,p);return a.a.createElement(n.a,y({className:l()("larkui-breadcrumb",r),ref:t},o))}));g.propTypes=m(m({},n.a.BreadcrumbProps),{},{className:c.a.string}),f()(g,n.a),t.a=g},984:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(0),o=r(30),a=r(9),i=r.n(a),c="index-module_actions_vhNlZ",u="index-module_actionItem_gm0UP",l="index-module_actionTitle_N9iRs",s="index-module_actionTitleLast_KuIDA",f="index-module_actionMore_8wkrV",d="index-module_actionMoreIcon_5FA3+",p="index-module_actionTitleIcon_XFMgq",h="index-module_actionTitleIconLast_2BO7h";function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){var t=e.settings,r=e.onClick;return n.createElement("div",{className:c},t.map((function(e){return!e.hidden&&n.createElement("div",{className:u,key:e.type,onClick:function(){r(e.type,e.title)}},n.createElement("span",{className:e.noDetail?s:l},n.createElement(o.b,{name:e.icon,className:i()(p,v({},h,e.noDetail)),width:16}),e.title),!e.noDetail&&n.createElement("span",{className:f},e.defaultValue,n.createElement(o.b,{name:"arrow-down",className:d,width:16})))})))}}}]);