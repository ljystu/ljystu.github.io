/*! For license information please see c__LazyShareButton.56e3b44a.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{2902:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return f})),r.d(t,"c",(function(){return d})),r.d(t,"b",(function(){return p})),r.d(t,"d",(function(){return s}));var n=r(187),o=(r(108),r(80),r(111));function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}function l(e){return n.ALL_PERMISSIONS.includes(e)}function u(e){return e===n.ROLE.noPermission?0-e:e}var s={gte:function(e,t){return!(!l(e)||!l(t))&&u(e)>=u(t)},gt:function(e,t){return!(!l(e)||!l(t))&&u(e)>u(t)},lt:function(e,t){return!(!l(e)||!l(t))&&u(e)<u(t)},lte:function(e,t){return!(!l(e)||!l(t))&&u(e)<=u(t)},eq:function(e,t){return!(!l(e)||!l(t))&&u(e)===u(t)},max:function(e,t){var r=[l(e),l(t)];if(r.every((function(e){return!!e})))return u(e)>u(t)?e:t;var n=r.indexOf(!0);return n<0?null:n>0?t:e}};function f(e,t,r){if(!e||!t)return null;var a=n.ALL_PERMISSIONS;if(null!=r&&(a=a.filter((function(e){return s.lte(e,r)}))),e.owner_type===n.OWNER_TYPE.User)return a=a.filter((function(e){return e!==n.ROLE.noPermission})),e.owner_id===t.user_id?{edit:!1,delete:!1}:{edit:!0,delete:!0,permissions:a};var i=o.PUBLIC_PRIVACY.includes(t.public),c=t.public===o.PUBLIC.public;return e.owner_type===n.OWNER_TYPE.GroupManager||e.owner_type===n.OWNER_TYPE.OrganizationOwner?{edit:!1,delete:!1}:e.owner_type===n.OWNER_TYPE.GroupMember?{edit:!0,delete:!1,permissions:a.filter((function(e){return i?e!==n.ROLE.noPermission:void 0!==e})),availableTargetPermission:i&&e.role===n.ROLE.noPermission?n.ROLE.readonly:e.role}:e.owner_type===n.OWNER_TYPE.OrganizationMember?{edit:i,delete:!1,permissions:a.filter((function(e){return i?e!==n.ROLE.noPermission:void 0!==e})),availableTargetPermission:i&&e.role===n.ROLE.noPermission?n.ROLE.readonly:i?e.role:n.ROLE.noPermission}:e.owner_type===n.OWNER_TYPE.GroupReadonlyMember?{edit:!i,delete:!1,permissions:i?[n.ROLE.readonly]:[n.ROLE.readonly,n.ROLE.noPermission],availableTargetPermission:i&&e.role===n.ROLE.noPermission?n.ROLE.readonly:e.role}:e.owner_type===n.OWNER_TYPE.OrganizationOutsourcer?{edit:!c&&i,delete:!1,permissions:c?[n.ROLE.readonly]:[n.ROLE.readonly,n.ROLE.noPermission].filter((function(e){return i?void 0!==e:e!==n.ROLE.readonly})),availableTargetPermission:c?n.ROLE.readonly:n.ROLE.noPermission}:{edit:!0,delete:!0,permissions:a}}function d(t,r){var o,a=function(e){return e};return void 0!==e.window&&"function"==typeof e.window.__&&(a=e.window.__),r&&(a=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.__).call.apply(e,[r].concat(n))}),(i(o={},n.ROLE.readonly,a("可阅读")),i(o,n.ROLE.edit,a("可编辑")),i(o,n.ROLE.manage,a("可管理")),i(o,n.ROLE.noPermission,a("无权限")),o)[t]}function p(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o.inOrganization,c=o.ctx,l=o.isYuque,u=void 0===l||l,s=function(e,t){return e};void 0!==e.window&&"function"==typeof e.window.__&&(s=e.window.__),c&&(s=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=c.__).call.apply(e,[c].concat(r))});var f=s(!u||a?"团队":"知识小组"),d=(i(r={},n.OWNER_TYPE.User,s("用户")),i(r,n.OWNER_TYPE.GroupManager,s("{groupTypeName}管理员",{groupTypeName:f})),i(r,n.OWNER_TYPE.GroupMember,s("{groupTypeName}成员",{groupTypeName:f})),i(r,n.OWNER_TYPE.GroupReadonlyMember,s("{groupTypeName}只读成员",{groupTypeName:f})),i(r,n.OWNER_TYPE.OrganizationOwner,s("空间管理员")),i(r,n.OWNER_TYPE.OrganizationMember,s("空间成员")),i(r,n.OWNER_TYPE.OrganizationOutsourcer,s("空间外部联系人")),r);return d[t]}}).call(this,r(135))},2911:function(e,t,r){"use strict";var n=r(1856);t.a=function(){return Object(n.getInterest)()}},2945:function(e,t,r){"use strict";r.d(t,"c",(function(){return d})),r.d(t,"e",(function(){return S})),r.d(t,"d",(function(){return k})),r.d(t,"b",(function(){return A})),r.d(t,"a",(function(){return P}));r(63);var n=r(23),o=r(0),a=r(84),i=r.n(a);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e,t){return t.book&&Object.values(i.a.TYPE).includes(e.type)},s=function(e,t){if(!e.joinToken)return"";var r=e.joinToken;if("Doc"===r.target_type){var n=e.slug,o=t.group,a=t.book,i=t.isEditing,c="".concat(window.location.origin,"/g/").concat(o.login,"/").concat(a.slug,"/").concat(n,"/collaborator/join?token=").concat(r.token);if(i){var l="/".concat(o.login,"/").concat(a.slug,"/").concat(n,"/edit");c="".concat(c,"&goto=").concat(encodeURIComponent(l))}return c+="# ".concat(__("邀你参与文档协作"),"《").concat(e.title,"》")}return""},f=function(e){return!e.joinToken||!!e.joinToken.approve},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(o.useState)(!1),a=c(r,2),i=a[0],l=a[1],d=Object(o.useState)(s(e,t)),p=c(d,2),h=p[0],m=p[1],y=Object(o.useState)(f(e)),b=c(y,2),v=b[0],g=b[1],w=t.dispatch,_=function(r){l(!0);var o="proxy.web/books.token",a="book/updateToken",i=e.id;u(e,t)&&(o="proxy.web/docs.token",a="doc/updateToken",i=e.id),w({type:o,payload:{data:{id:i,force:r},reducer:a}}).then((function(o){r&&n.a.success(__("重置链接成功")),e.joinToken=o;var a=s(e,t);m(a),g(f(e)),l(!1)}))},E=function(){return _(!0)},S=function(r){var n="proxy.web/books.updateToken",o="book/updateToken",a=e.id;u(e,t)&&(n="proxy.web/docs.updateToken",o="doc/updateToken",a=e.id),w({type:n,payload:{data:{id:a,approve:!0===r?1:0},reducer:o}}).then((function(e){g(r)}))};return Object(o.useEffect)((function(){e.abilities&&e.abilities.create_collaborator&&!h&&_()}),[e.id]),[h,E,i,v,S]},p=r(54),h=r.n(p),m=r(871),y=r(33);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(){v=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new A(o||[]);return n(i,"_invoke",{value:S(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function h(){}var m={};l(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(C([])));g&&g!==t&&r.call(g,a)&&(m=g);var w=h.prototype=d.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==b(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function S(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return P()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=h,n(w,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=l(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new E(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),l(w,c,"Generator"),l(w,a,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function g(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){g(a,n,o,i,c,"next",e)}function c(e){g(a,n,o,i,c,"throw",e)}i(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.organization,n=Object(o.useState)(!1),a=_(n,2),i=a[0],c=a[1],l=Object(o.useState)([]),u=_(l,2),s=u[0],f=u[1],d=Object(o.useCallback)(h()(function(){var e=w(v().mark((function e(n){var o,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return c(!1),e.abrupt("return");case 3:return c(!0),o={q:n.trim(),include_unconfirmed_corp_account:!0,optional_properties:t.optional_properties},r&&r.id||(o.global=!0),e.prev=6,e.next=9,y.a.users.complete(o);case 9:a=e.sent,f(Object(m.format)(a));case 11:return e.prev=11,c(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[6,,11,14]])})));return function(t){return e.apply(this,arguments)}}(),200),[]),p=function(){return f([])};return[s,d,i,p]};function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(){var e=Object(o.useState)(!1),t=O(e,2),r=t[0],n=t[1],a=Object(o.useCallback)((function(){return n((function(e){return!e}))}),[]);return[r,a]},A=function(e){return[window.location.hash==="#".concat(e),function(){window.location.hash=""}]};function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}var P=function(e,t){return function(r,n){var o=e.id,a=e.settings.homepage,i=a?a.layout:{};Object.keys(i).map((function(e){return i[e]&&i[e].length>0&&(i[e]=i[e].map((function(e){return"string"==typeof e&&e===t||"object"===C(e)&&e.type===t?{name:r,type:t}:e}))),i[e]})),y.a.groups.settings({id:o,homepage:{layout:i}}).then((function(e){n&&"function"==typeof n&&n(e)}))}}},2984:function(e,t,r){"use strict";r.r(t),r.d(t,"ShareButton",(function(){return kr}));r(62);var n=r(21),o=r(0),a=r.n(o),i=r(205),c=(r(279),r(136)),l=(r(103),r(60)),u=r(90),s=r(167),f=r(955),d="styles-module_popover_iFbj6",p="styles-module_disable_fS5C1";function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var m=["panel","CollaboratorChannel","InviteSelectorChannel","children"],y=["shareViewType","canCollaborator","canShare","isFileBook","defaultPanel","organization","group","book","me","targetResource","panelVisible","onChangeShare","beforeShareUpdate","onShareVisible","getPopupContainer"];function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function v(){v=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new A(o||[]);return n(i,"_invoke",{value:S(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var y={};l(y,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(C([])));g&&g!==t&&r.call(g,a)&&(y=g);var w=m.prototype=d.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==h(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function S(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return P()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new E(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),l(w,c,"Generator"),l(w,a,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t=function(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var k=function(e){return e.parentNode||document.body},A=function(e){var t=e.panel,r=e.CollaboratorChannel,a=e.InviteSelectorChannel,i=e.children,h=j(e,m),g=h.shareViewType,_=h.canCollaborator,O=h.canShare,A=h.isFileBook,C=h.defaultPanel,P=h.organization,L=h.group,N=h.book,T=h.me,x=h.targetResource,I=h.panelVisible,R=h.onChangeShare,D=h.beforeShareUpdate,M=h.onShareVisible,U=h.getPopupContainer,G=void 0===U?k:U,B=j(h,y),F=S(o.useState(!1),2),Y=F[0],z=F[1],W=S(o.useState(!1),2),V=W[0],q=W[1];o.useEffect((function(){var e=new URLSearchParams(window.location.hash.replace("#","?")).has("collaborator");"collaborator"===C&&e&&_&&g===u.b.DOC&&(q(!0),z(!0))}),[]),o.useEffect((function(){"collaborator"===C&&_&&g===u.b.DOC&&q(!0)}),[C]),o.useEffect((function(){null!=I&&z(I)}),[I]);var J=function(){var e,t=(e=v().mark((function e(t){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w(w({},t),{},{id:x.id}),e.abrupt("return",null==R?void 0:R(r));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){E(a,n,o,i,c,"next",e)}function c(e){E(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),Q=o.useMemo((function(){var e=null!=P&&P.id?u.a.ORG:u.a.PERSON;return Object(s.a)()?e:u.a.INTERNAL}),[P]);return null!=x&&x.id?o.createElement(c.a,{overlayClassName:d,content:o.createElement(t,{CollaboratorChannel:r,InviteSelectorChannel:a,onAttrsChange:J,beforeAttrsChange:D,share:x,shareViewType:g,canCollaborator:_,canShare:O,isFileBook:A,belongs:Q,organization:P,group:L,book:N,me:T,showCollaborator:V,defaultPanel:C}),trigger:Y&&f.a?"hover":"click",placement:"bottomRight",destroyTooltipOnHide:!0,visible:Y,onVisibleChange:function(e){z(e),null==M||M(e)},getPopupContainer:G,noArrow:!0},i||o.createElement(n.a,B,o.createElement("span",null,__("分享")))):o.createElement(l.a,{placement:"bottomRight",title:__("当前无法使用分享，请检查网络状态"),arrowPointAtCenter:!0},o.createElement(n.a,b({className:p},B),o.createElement("span",null,__("分享"))))},C=(r(63),r(23)),P=(r(92),r(45)),L=r(570),N=r(33),T=r(287),x=r(961),I=r(18),R=r(1001),D=r(53),M=r.n(D),U=r(2987),G=(r(1508),r(1340)),B="ShareQrCodeLazyShow-module_skeletonPanel_1bQGB",F="ShareQrCodeLazyShow-module_skeletonTitle_BW5XJ",Y="ShareQrCodeLazyShow-module_skeletonImage_zOTps",z="ShareQrCodeLazyShow-module_skeletonButton_fl9jl",W=function(){return o.createElement("div",{className:B},o.createElement(G.a,{className:F,title:!0,paragraph:!1,active:!0}),o.createElement(G.a.Image,{className:Y}),o.createElement(G.a,{className:z,title:!0,paragraph:!1,active:!0}))},V=(r(950),r(468)),q=(r(922),r(472)),J=r(9),Q=r.n(J),$=r(300),K=r.n($),Z=r(30),X=r(187),H=r(342),ee=r(343);function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ne=function(e){var t=e.target_id,r=e.target_type,n=te(o.useState(0),2),a=n[0],i=n[1];return o.useEffect((function(){t&&["Book","Doc"].includes(r)&&N.a.collaborations.count({target_type:r,target_id:t,status:X.STATUS.applying}).then((function(e){i((null==e?void 0:e.count)||0)}))}),[t,r]),o.createElement(q.a,{dot:a>0,offset:[-4,4],className:ee.a.dot},o.createElement(Z.b,{className:ee.a.inviteIcon,name:"icon-collaboratorlist",width:30}))},oe=function(e){var t=e.share,r=e.shareViewType,n=e.group,a=e.book,i=e.handlePanelShow;return o.createElement(o.Fragment,null,o.createElement(V.a.Item,{className:ee.a.firstItem,actions:[o.createElement(l.a,{title:__("链接分享给指定人"),placement:"top",autoAdjustOverflow:!0,arrowPointAtCenter:!0},o.createElement("div",{key:"list-loadmore-edit",onClick:function(){return i(H.b.inviteSelectorChannel)}},o.createElement(Z.b,{className:ee.a.inviteIcon,name:"addlink",width:30}))),o.createElement(l.a,{title:__("查看所有协作者"),placement:"top",autoAdjustOverflow:!0,arrowPointAtCenter:!0},o.createElement("div",{key:"list-loadmore-more",className:ee.a.inviteIconLi,onClick:function(){r===u.b.BOOK?window.location.href="/r/".concat(null==n?void 0:n.login,"/").concat(null==a?void 0:a.slug,"/collaborators"):r===u.b.DOC&&i(H.b.collaboratorChannel)}},o.createElement(ne,{target_id:null==t?void 0:t.id,target_type:K()(r.toLowerCase())})))]},o.createElement(V.a.Item.Meta,{avatar:o.createElement(Z.b,{className:Q()(ee.a.itemIcon,ee.a.appointIcon),name:"nav-invite",width:40}),title:o.createElement("span",null,__("分享给指定人")),description:o.createElement("span",null,__("参与协作后可获得编辑、阅读等权限"))})))},ae=(r(104),r(38)),ie=r(288),ce=r.n(ie),le=r(1375),ue=r(984),se=r(470),fe=r(46),de=r(452),pe=r(2911);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function me(e,t,r){return t=function(e){var t=function(e,t){if("object"!==he(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==he(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===he(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ye=function(e){var t=e.canCollaborator,r=e.isShareActive,a=e.belongs,i=e.shareViewType,c=e.organization,l=e.group,f=e.book,d=e.share,p=e.me,h=e.handleScopeChange,m=!(!c||null==c||!c.id),y=Object(pe.a)().interests[de.INTEREST_CODE.create_public_resource],b=function(){var e,t;null!==(e=window.appData)&&void 0!==e&&e.isDesktopApp?se.a.jumpToMemberPage(fe.LIMIT_SCENE.share_public):null===(t=window.__member_message_ref)||void 0===t||t.current.showMemberIntro(fe.LIMIT_SCENE.share_public)},v=!c&&l&&"Group"===l.type,g=o.useMemo((function(){if(!r&&!y&&((null==c||!c.id)&&"User"===(null==l?void 0:l.type)))return l.id===p.id?__("会员可公开内容至互联网 {btn}",{btn:o.createElement("a",{onClick:b},__("开通会员"))}):__("联系知识库所有者开通会员可公开内容至互联网");return M()(H.q,[a,Object(H.h)(a,d,i,l,f)])}),[i,a,d,l,f]),w=o.useMemo((function(){return M()(H.o,[a,r?"public":"private"])}),[a,r]);return o.createElement(V.a.Item,{className:Q()(me({},ee.a.firstItem,!t)),actions:[!r&&(y||m)&&o.createElement(o.Fragment,null,o.createElement(n.a,{className:Q()(ee.a.shareButton,ee.a.sharePublic),onClick:function(){return h(a===u.a.PERSON?I.PRIVACY.public:I.PRIVACY.intranet)}},__("公开")))]},o.createElement(V.a.Item.Meta,{avatar:o.createElement(Z.b,{className:Q()(ee.a.itemIcon,ee.a.publicIcon),name:r?"icon-public":"icon-lock",width:40}),title:o.createElement("span",{className:ee.a.itemTitle},w,!m&&!v&&o.createElement(le.a,{className:ee.a.memberAbleIcon,isYuque:Object(s.a)()})),description:g}))},be=function(e){var t,r=e.shareLink,a=e.isFileBook,i=e.privacy,c=e.belongs,l=e.shareViewType,s=e.group,f=e.book,d=e.share,p=e.handleScopeChange,h=e.handlePanelShow,m=e.handlePanelType,y=e.handlePanelTitle,b=e.LazyShareQrCodeChannel,v=o.useCallback((function(){null!=r&&r.url&&(ce()((null==r?void 0:r.urlWithDesc)||r.url,{format:"text/plain"}),C.a.success(__("链接已复制"),1))}),[r]),g=Object(x.c)(d,l,s,f).currentPassword,w=Object(x.b)(d,l,s,f).currentIndexedLevel,_=[{type:"scopeSet",title:__("分享范围"),hidden:c===u.a.PERSON||c===u.a.ORG&&a,defaultValue:c!==u.a.PERSON?null===(t=H.m[c].action.find((function(e){return e.value===i})))||void 0===t?void 0:t.label:null,icon:"icon-range"},{type:"passwordSet",title:__("密码访问"),defaultValue:g||__("无密码"),icon:"icon-key-2"},{type:"searchSet",title:H.n[l][c].action,hidden:a,defaultValue:1===w?__("已开启"):__("关闭"),icon:"help-search"},{type:"closeShareSet",title:__("关闭公开分享"),noDetail:!0,icon:"icon-cancellink"}];return o.createElement("div",{className:ee.a.moreConfigs},o.createElement("div",{className:ee.a.shareLinkSet},o.createElement(ae.a,{className:Q()(ee.a.shareLinkShow,ee.a.qrCode),disabled:!0,placeholder:null==r?void 0:r.url}),o.createElement(n.a,{className:ee.a.shareButton,onClick:v},__("复制链接")),o.createElement(n.a,{className:ee.a.shareQrCode,onClick:function(){return h(H.b.shareQrCodeChannel)},onMouseOver:function(){b.preload()}},o.createElement(Z.b,{className:ee.a.shareQrCodeIcon,name:"icon-qrcode2",width:18}))),o.createElement(ue.a,{settings:_,onClick:function(e,t){"closeShareSet"===e?p(I.PRIVACY.private):function(e,t){h(H.b.shareChannels),m(e),y(t)}(e,t)}}))};function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ge(){ge=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new j(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function h(){}var m={};l(m,a,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(k([])));b&&b!==t&&r.call(b,a)&&(m=b);var v=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==ve(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=l(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(v),l(v,c,"Generator"),l(v,a,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function we(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function _e(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){we(a,n,o,i,c,"next",e)}function c(e){we(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Oe,je=Object(T.b)((function(){return r.e(111).then(r.bind(null,4377))})),ke=function(e){var t=e.share,r=e.shareViewType,n=e.canShare,a=e.canCollaborator,i=void 0!==a&&a,c=e.isFileBook,l=void 0!==c&&c,f=e.showCollaborator,d=e.defaultPanel,p=e.belongs,h=e.beforeAttrsChange,m=e.onAttrsChange,y=e.organization,b=e.group,v=e.book,g=e.me,w=e.CollaboratorChannel,_=e.InviteSelectorChannel,E=Ee(o.useState(f?H.b.collaboratorChannel:H.b.sharePanel),2),S=E[0],O=E[1],j=Ee(o.useState(""),2),k=j[0],A=j[1],T=Ee(o.useState(""),2),D=T[0],G=T[1],B=o.useRef(!1),F=Object(L.e)(),Y=Ee(P.a.useModal(),2),z=Y[0],V=Y[1],q=o.useMemo((function(){return Object(x.d)(p,t,r,b,v)}),[t,r,b,v]),J=q.privacy,Q=q.isShareActive,$=o.useMemo((function(){return M()(H.c,[r,p,Object(H.h)(p,t,r,b,v)])}),[r,p,t,b,v]),K=o.useMemo((function(){return Object(x.a)(t,r,b,v)}),[t,r]);o.useEffect((function(){var e=function(){var e=_e(ge().mark((function e(){var n,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("visible"!==document.visibilityState||!B.current){e.next=11;break}if(r!==u.b.DOC){e.next=6;break}return e.next=4,N.a.docs.findOne({id:t.id,book_id:null==v?void 0:v.id});case 4:n=e.sent,J!==n.public&&F({type:"doc/update",payload:{public:n.public,privacy_migrated:n.privacy_migrated}});case 6:if(r!==u.b.BOOK){e.next=11;break}return e.next=9,N.a.books.findOne({id:t.id,find_by_id:!0},{});case 9:o=e.sent,J!==o.public&&F({type:"book/update",payload:{public:o.public,privacy_migrated:o.privacy_migrated}});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return document.addEventListener("visibilitychange",e,!0),function(){document.removeEventListener("visibilitychange",e,!0)}}),[]);var Z=function(){var e=_e(ge().mark((function e(n){var o,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof h){e.next=6;break}return e.next=3,h({public:n});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:if(n!==I.PRIVACY.public){e.next=37;break}if(Object(s.a)()){e.next=31;break}return e.prev=8,e.next=11,m({public:n});case 11:e.next=31;break;case 13:if(e.prev=13,e.t0=e.catch(8),o=r===u.b.DOC?R.TargetType.Doc:R.TargetType.Book,a=r===u.b.DOC?R.WorkflowType.DocPublicPrivacyWorkflow:R.WorkflowType.BookPublicPrivacyWorkflow,(null===e.t0||void 0===e.t0?void 0:e.t0.errorCode)!==I.PUBLIC_SET_CODE.public_has_approve){e.next=21;break}return B.current=!0,s.b.windowOpen("/g/approve_workflow?target_id=".concat(t.id,"&target_type=").concat(o,"&type=").concat(a)),e.abrupt("return");case 21:if((null===e.t0||void 0===e.t0?void 0:e.t0.errorCode)!==I.PUBLIC_SET_CODE.public_need_approve){e.next=30;break}return e.next=24,Object(H.f)(r,z);case 24:if(e.sent){e.next=27;break}return e.abrupt("return");case 27:return B.current=!0,s.b.windowOpen("/g/approve_workflow?target_id=".concat(t.id,"&target_type=").concat(o,"&type=").concat(a)),e.abrupt("return");case 30:C.a.error((null===e.t0||void 0===e.t0?void 0:e.t0.message)||__("操作失败"));case 31:if(!Object(s.a)()){e.next=37;break}return e.next=34,Object(H.f)(r,z);case 34:if(e.sent){e.next=37;break}return e.abrupt("return");case 37:return e.next=39,m({public:n});case 39:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=_e(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({encrypted_password:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=_e(ge().mark((function e(t){var r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t?1:0,e.next=3,m({indexed_level:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.createElement(o.Fragment,null,o.createElement("div",{className:ee.a.sharePanel},n&&S===H.b.shareChannels&&o.createElement(U.a,{panelType:k,panelTitle:D,share:t,belongs:p,organization:y,group:b,book:v,shareViewType:r,handlePasswordChange:X,handleScopeChange:Z,handleSearchChange:te,onBack:function(){return O(H.b.sharePanel)}}),S===H.b.sharePanel&&o.createElement("div",{className:ee.a.main},o.createElement("div",{className:ee.a.mainIntro},n&&o.createElement("div",{className:ee.a.shareDescText},$),i&&o.createElement(oe,{share:t,shareViewType:r,group:b,book:v,handlePanelShow:function(e){return O(e)}}),n&&o.createElement(ye,{canCollaborator:i,isShareActive:Q,belongs:p,shareViewType:r,organization:y,group:b,book:v,share:t,me:g,handleScopeChange:Z})),n&&Q&&o.createElement(be,{shareLink:K,isFileBook:l,privacy:J,belongs:p,shareViewType:r,group:b,book:v,share:t,handleScopeChange:Z,handlePanelShow:function(e){return O(e)},handlePanelType:function(e){return A(e)},handlePanelTitle:function(e){return G(e)},LazyShareQrCodeChannel:je})),i&&S===H.b.inviteSelectorChannel&&_&&o.createElement(_,{share:t,organization:y,group:b,book:v,shareViewType:r,onBack:function(){return O(H.b.sharePanel)},inviteContent:"inviteSharePanel"}),i&&S===H.b.collaboratorChannel&&w&&o.createElement(w,{defaultPanel:d,share:t,organization:y,group:b,book:v,inviteContent:"collaboratorPanel",onBack:function(){return O(H.b.sharePanel)}}),n&&Q&&S===H.b.shareQrCodeChannel&&o.createElement(o.Suspense,{fallback:o.createElement(W,null)},o.createElement(je,{share:t,shareViewType:r,link:null==K?void 0:K.url,onBack:function(){return O(H.b.sharePanel)}}))),V)},Ae=r(2),Ce=r.n(Ae),Pe=r(1148),Le=r(1341),Ne=r(264),Te=(r(270),r(64)),xe=(r(251),r(116)),Ie=(r(166),r(31)),Re=r(1461),De=r(725),Me=r(254),Ue=(r(466),r(253)),Ge=r(490),Be=r(2902),Fe={role:"RoleSelector-module_role_jDwZn",trigger:"RoleSelector-module_trigger_PbJ3K",active:"RoleSelector-module_active_lhpS5",icon:"RoleSelector-module_icon_YSGjG",up:"RoleSelector-module_up_BKR9i",menu:"RoleSelector-module_menu_MwfMA",label:"RoleSelector-module_label_JI2Gx",menuItem:"RoleSelector-module_menuItem_cwz56",desc:"RoleSelector-module_desc_lnp7h"};function Ye(e){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return We(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ve(e,t,r){return t=function(e){var t=function(e,t){if("object"!==Ye(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ye(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qe=(Ve(Oe={},X.ROLE.edit,{label:Object(Be.c)(X.ROLE.edit),desc:__("拥有文档的编辑权限"),role:X.ROLE.edit}),Ve(Oe,X.ROLE.readonly,{label:Object(Be.c)(X.ROLE.readonly),desc:__("仅拥有只读和评论权限"),role:X.ROLE.readonly}),Oe),Je=function(e){var t=ze(Object(o.useState)(!1),2),r=t[0],n=t[1],i=e.role,c=e.placement,l=e.canChange,u=e.disableItems,s=e.externalActions,f=qe[i];if(!l)return a.a.createElement("span",{className:Fe.status,"data-collaboration-role":i},null==f?void 0:f.label);return a.a.createElement("div",{className:"role-selector"},a.a.createElement(Ue.a,{trigger:["click"],placement:c,onVisibleChange:function(e){n(e)},overlay:a.a.createElement(Ie.a,{selectedKeys:["".concat(i)],className:Fe.menu,style:{border:"none"}},[X.ROLE.edit,X.ROLE.readonly].map((function(t){var r=qe[t],o=u.includes(r.role);return a.a.createElement(Ie.a.Item,{key:"".concat(r.role),disabled:o,onClick:function(){return t=r.role,e.onChange(t),void n(!1);var t}},a.a.createElement("a",{className:Fe.menuItem,href:"#"},a.a.createElement("span",null,a.a.createElement("span",{className:Fe.label},r.label),a.a.createElement("span",{className:Fe.desc},r.desc)),a.a.createElement(Ge.a,{style:{color:"#25B864"}})))})),s&&s())},a.a.createElement("span",{className:Q()(Fe.trigger,Ve({},Fe.active,r)),"data-collaboration-role":i},null==f?void 0:f.label," ",a.a.createElement(Z.b,{name:"arrow-down",className:Q()(Fe.icon,Ve({},Fe.up,r)),width:16}))))};Je.propTypes={onChange:Ce.a.func,placement:Ce.a.string,canChange:Ce.a.bool,role:Ce.a.oneOf([X.ROLE.readonly,X.ROLE.edit]),externalActions:Ce.a.func,disableItems:Ce.a.array},Je.defaultProps={onChange:function(){},placement:"bottomRight",role:0,canChange:!0,disableItems:[]};var Qe=Je,$e="Item-module_joinUserItem_0O6yw",Ke="Item-module_userInfo_F4pgj",Ze="Item-module_avatar_JD1HW",Xe="Item-module_userDesc_q4mqR",He="Item-module_name_ff-QM",et="Item-module_login_bu7O2",tt="Item-module_applyPending_7Va+N",rt="Item-module_pending_KikZW",nt="Item-module_pendingRole_mvO-A",ot="Item-module_topRightDesc_dQW2s",at="Item-module_actions_Mfqej",it="Item-module_actionItem_piU3P",ct="Item-module_actionItemReject_rSq40",lt="Item-module_actionItemLabel_kzYeZ",ut="Item-module_deleteActionItem_RJWcd",st="Item-module_label_qLBXy",ft="Item-module_desc_-+chL",dt="Item-module_addIcon_f354N";function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mt(n.key),n)}}function mt(e){var t=function(e,t){if("object"!==pt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pt(t)?t:String(t)}function yt(){yt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new j(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function h(){}var m={};l(m,a,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(k([])));b&&b!==t&&r.call(b,a)&&(m=b);var v=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==pt(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=l(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(v),l(v,c,"Generator"),l(v,a,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function bt(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var wt=function(){function e(t){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=void 0,(n=mt(n="data"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this.data=t}var t,r,n;return t=e,(r=[{key:"actionId",get:function(){throw new Error("需要实现这个对象")}},{key:"actionType",get:function(){throw new Error("需要实现这个对象")}},{key:"uid",get:function(){return this.data.uid}},{key:"id",get:function(){return this.data.id}},{key:"login",get:function(){return this.data.login}},{key:"name",get:function(){return this.data.name}},{key:"avatar",get:function(){return this.data.avatar_url}},{key:"role",get:function(){return this.data.role}},{key:"provider_type",get:function(){return this.data.provider_type}},{key:"provider_userid",get:function(){return this.data.provider_userid}}])&&ht(t.prototype,r),n&&ht(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),_t=function(e){if(!(e.data instanceof wt))throw new Error("data should be extend ItemBase");return function(e){var t,r=e.data,n=e.renderActions,o=r.login||r.uid;return a.a.createElement("div",{"data-testid":"join-user-item",key:r.uid,className:$e,onClick:function(){r.ableToAdd()&&e.onAdd(r)}},a.a.createElement("div",{className:Ke},a.a.createElement("span",{className:Ze},a.a.createElement(Me.a,{src:r.avatar,name:r.name,size:"sm"})),a.a.createElement("div",{className:Xe},a.a.createElement("div",{className:He},r.name,1!==(null===(t=r.collaborator)||void 0===t?void 0:t.status)?null:a.a.createElement("span",{className:et},__("（")+o+__("）"))),!r.isGroupMember()&&!r.isGroupReadonlyMember()&&r.isInvited()&&!r.isMine()&&a.a.createElement("span",{className:ot},__("尚未加入")),!r.isGroupMember()&&!r.isGroupReadonlyMember()&&r.isApplying()&&a.a.createElement("div",{className:tt},a.a.createElement("span",{className:rt},__("申请权限")),a.a.createElement("span",{className:Q()(rt,nt)},"0"===r.role?__("可阅读"):__("可编辑"))))),a.a.createElement("div",{className:at},n(e)))}(e)};_t.propTypes={data:Ce.a.object.isRequired,renderActions:Ce.a.func,onAgree:Ce.a.func,onReject:Ce.a.func,onDelete:Ce.a.func,onRoleChange:Ce.a.func,onAdd:Ce.a.func,limited:Ce.a.bool},_t.defaultProps={renderActions:function(e){var t=e.data,r=e.limited,o=a.a.useRef(null),i=vt(P.a.useModal(),2),c=i[0],l=i[1];if(t.ableToAdd())return a.a.createElement("span",{className:it},a.a.createElement(De.a,{className:dt}));if(t.isMine())return a.a.createElement("span",{className:lt},__("你自己"));var u=function(e){var t=__("确认拒绝 ".concat(e," 的访问申请？")),r=__("确认要拒绝 ".concat(e," 的访问申请吗？"));return new Promise((function(e){c.confirm({icon:a.a.createElement(Re.a,null),width:505,title:t,content:__("{desc}拒绝后该用户无法访问该文档。",{desc:r}),okText:__("拒绝"),cancelText:__("取消"),onOk:function(){e(!0)},onCancel:function(){e(!1)},getContainer:function(){return o.current||document.body}})}))},s=function(){var t,r=(t=yt().mark((function t(r){return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(r.name);case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:e.onReject(r);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){bt(a,n,o,i,c,"next",e)}function c(e){bt(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,t.isUpdateAbility()&&t.isApplying()&&a.a.createElement(a.a.Fragment,null,a.a.createElement(n.a,{type:"text",size:"small",onClick:function(){e.onAgree(t)},className:it,"data-testid":"join-user-agree-button",disabled:r},__("同意")),a.a.createElement(n.a,{type:"text",size:"small",onClick:function(){s(t)},className:Q()(it,ct)},__("拒绝"))),t.isUpdateAbility()&&(t.isJoined()||t.isInvited())&&a.a.createElement(Qe,{role:parseInt(t.role,10),onChange:function(r){e.onRoleChange(t,r)},externalActions:function(){return a.a.createElement(Ie.a.Item,{key:"deleteItem-".concat(t.role)},a.a.createElement("a",{key:"deleteItem",className:ut,"data-testid":"join-user-delete-button",onClick:function(){e.onDelete(t)}},a.a.createElement("span",null,a.a.createElement("span",{className:st},__("移除")),a.a.createElement("span",{className:ft},__("移除该协作者")))))},canChange:t.isUpdateAbility()}),l)}};var Et=_t;function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ot(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ot(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jt=function(e){var t=St(Object(o.useState)(""),2),r=t[0],n=t[1],i=e.renderItem,c=e.dataSource,l="searchSelector-".concat(+new Date);return a.a.createElement("div",{className:"join-user-search-selector",id:l},a.a.createElement("div",{className:"selector"},a.a.createElement(Te.a,{mode:"multiple",labelInValue:!0,value:[],placeholder:e.placeholder,notFoundContent:e.loading?a.a.createElement(xe.a,{justify:"block"}):r?e.renderNotFound():null,filterOption:!1,onSearch:function(t){n(t),e.onSearch(t)},onChange:e.onChange,onSelect:function(t,r){n("");var o=c.find((function(r){return r[e.key]===t.key}));o&&e.onSelect(o)},onBlur:function(){n(""),e.onBlur&&e.onBlur()},style:{width:"100%"},disabled:e.disableSearch,getPopupContainer:function(){return document.getElementById(l)}},c.map((function(t){return a.a.createElement(Te.a.Option,{key:t[e.key],className:"selector-item",disabled:e.disableSelect(t)},a.a.createElement("div",{className:"full-item"},a.a.createElement(i,{data:t,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,renderActions:e.renderActions})),a.a.createElement("div",{className:"simple-item"},t[e.name]))})))))};jt.propTypes={dataSource:Ce.a.array,renderItem:Ce.a.func,renderNotFound:Ce.a.func,renderActions:Ce.a.func,key:Ce.a.string,name:Ce.a.string,disableSelect:Ce.a.func,onSearch:Ce.a.func,onChange:Ce.a.func,onSelect:Ce.a.func,onAgree:Ce.a.func,onReject:Ce.a.func,onDelete:Ce.a.func,onRoleChange:Ce.a.func,onAdd:Ce.a.func,onBlur:Ce.a.func,loading:Ce.a.bool,placeholder:Ce.a.string,disableSearch:Ce.a.bool},jt.defaultProps={key:"uid",name:"name",placeholder:__("搜索添加用户"),loading:!1,dataSource:[],renderItem:Et,renderNotFound:function(){return null},onSearch:function(){},onChange:function(){},onSelect:function(){},onAgree:function(){},onReject:function(){},onDelete:function(){},onRoleChange:function(){},onBlur:function(){},onAdd:function(){},disableSelect:function(){return!1},disableSearch:!1};var kt=jt,At="EmptyTip-module_emptyTip_aBtYt",Ct="EmptyTip-module_emptyImageWrapper_6BIQC",Pt="EmptyTip-module_emptyImage_u42M6",Lt="EmptyTip-module_emptyText_JUjEv",Nt=function(){return a.a.createElement("div",{className:At},a.a.createElement("div",{className:Ct},a.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*aSg9SJR6isIAAAAAAAAAAAAAARQnAQ",className:Pt})),a.a.createElement("p",{className:Lt},__("暂无文档协作者")))},Tt="List-module_item_Yt8gv",xt=function(e){var t=e.dataSource,r=e.renderItem,n=e.limited,o=t.filter((function(e){return e.collaborator.status===X.STATUS.joined})),i=t.filter((function(e){return e.collaborator.status!==X.STATUS.joined}));return a.a.createElement(a.a.Fragment,null,!!i.length&&a.a.createElement(a.a.Fragment,null,null==i?void 0:i.map((function(t){return a.a.createElement("div",{key:t.id||t.login,className:Tt},a.a.createElement(r,{data:t,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,renderActions:e.renderActions,limited:n}))}))),!!o.length&&a.a.createElement(a.a.Fragment,null,null==o?void 0:o.map((function(t){return a.a.createElement("div",{key:t.id||t.login,className:Tt},a.a.createElement(r,{data:t,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,renderActions:e.renderActions}))}))))};xt.propTypes={dataSource:Ce.a.array,onAgree:Ce.a.func,onReject:Ce.a.func,onDelete:Ce.a.func,onRoleChange:Ce.a.func,onAdd:Ce.a.func,renderItem:Ce.a.func,renderActions:Ce.a.func,limited:Ce.a.bool},xt.defaultProps={dataSource:[],onAgree:function(){},onReject:function(){},onDelete:function(){},onRoleChange:function(){},onAdd:function(){},renderItem:Et};var It=xt,Rt={title:"Modal-module_title_Fhe+q",menu:"Modal-module_menu_GTmMW",searchWrapper:"Modal-module_searchWrapper_G76nZ",searchSelector:"Modal-module_searchSelector_qZfrJ",searchAdd:"Modal-module_searchAdd_srKkd",btnLoadMore:"Modal-module_btnLoadMore_+NLxh",spinContainer:"Modal-module_spinContainer_6y18w",listWrapper:"Modal-module_listWrapper_YI-Wn"};function Dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ut=function(e){var t=e.collaboratorCount,r=Dt(a.a.useState(!1),2),n=r[0],o=r[1],i=window.appData,c=i.isYuque,l=i.organization,u=i.group,f=t>=Ne.a.getDocCollaboratorLimit(u),d=!(Object(s.a)()&&(null==l||!l.id));return e.onLoading?a.a.createElement("div",{className:Rt.spinContainer},a.a.createElement(G.a,{title:!0,paragraph:!1,active:!0}),a.a.createElement(G.a,{avatar:!0,title:!0,paragraph:!1,active:!0}),a.a.createElement(G.a,{avatar:!0,title:!0,paragraph:!1,active:!0}),a.a.createElement(G.a,{avatar:!0,title:!0,paragraph:!1,active:!0}),a.a.createElement(G.a,{avatar:!0,title:!0,paragraph:!1,active:!0})):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:Rt.content},c&&e.memberDocCollaboratorTip&&a.a.createElement(Pe.e,{collaboratorCount:e.collaboratorCount,user:u}),a.a.createElement("div",{className:Rt.searchWrapper},e.showSearch&&a.a.createElement("div",{className:Rt.searchSelector},a.a.createElement(kt,{loading:e.searchLoading,dataSource:e.searchData,placeholder:e.placeholder,onSelect:e.onSelect,onSearch:e.onSearch,onChange:e.onChange,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,onBlur:e.onBlur,disableSelect:e.disableSelect,disableSearch:e.disableSearch,renderNotFound:e.renderSearchNotFound,renderItem:e.renderItem,renderActions:e.renderActions})),d&&a.a.createElement("div",{className:Rt.searchAdd,onClick:function(){return o(!0)}},__("批量添加"))),e.dataSource.length>0?a.a.createElement("div",{className:Rt.listWrapper},a.a.createElement(It,{dataSource:e.dataSource,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,renderItem:e.renderItem,renderActions:e.renderActions,limited:c&&f}),e.moreLoading?a.a.createElement("div",{className:Rt.btnLoadMore},__("加载中...")):e.shouldLoadMore?a.a.createElement("div",{className:Rt.btnLoadMore,onClick:e.onLoadMore},__("加载更多")):null):a.a.createElement(Nt,null)),n&&a.a.createElement(Le.a,{type:"doc",visible:n,onCancel:function(){return o(!1)},afterSubmit:function(){var t;o(!1),null===(t=e.onAdd)||void 0===t||t.call(e)}}))};Ut.propTypes={dataSource:Ce.a.array,shouldLoadMore:Ce.a.bool,onLoadMore:Ce.a.func,onAgree:Ce.a.func,onReject:Ce.a.func,onDelete:Ce.a.func,onRoleChange:Ce.a.func,onAdd:Ce.a.func,moreLoading:Ce.a.bool,renderItem:Ce.a.func,renderActions:Ce.a.func,dispatch:Ce.a.func,memberDocCollaboratorTip:Ce.a.bool,collaboratorCount:Ce.a.number,searchData:Ce.a.array,placeholder:Ce.a.string,disableSearch:Ce.a.bool,disableSelect:Ce.a.func,onSearch:Ce.a.func,onChange:Ce.a.func,onSelect:Ce.a.func,onBlur:Ce.a.func,searchLoading:Ce.a.bool,renderSearchNotFound:Ce.a.func,showSearch:Ce.a.bool,onLoading:Ce.a.bool},Ut.defaultProps={collaboratorCount:0,dataSource:[],searchData:[],shouldLoadMore:!1,moreLoading:!1,onLoadMore:function(){},showSearch:!0,disableSearch:!1};var Gt=Ut,Bt=r(147),Ft=r(2945),Yt=r(871),zt=r(985),Wt="SearchNotFound-module_notfound_MSXOw",Vt="SearchNotFound-module_notfoundTitle_Br7DA",qt=function(){return a.a.createElement("div",{className:Wt},a.a.createElement("p",{className:Vt},__("未在空间中找到该用户，请检查输入或联系管理员添加到空间成员")))},Jt=function(){return a.a.createElement("div",{className:Wt},a.a.createElement("p",{className:Vt},__("未搜索到相关用户")))},Qt=r(108);function $t(e){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(e)}function Kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==$t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==$t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===$t(a)?a:String(a)),n)}var o,a}function Xt(e,t,r){return t&&Zt(e.prototype,t),r&&Zt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ht(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&er(e,t)}function er(e,t){return er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},er(e,t)}function tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=nr(e);if(t){var o=nr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return rr(this,r)}}function rr(e,t){if(t&&("object"===$t(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function nr(e){return nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nr(e)}var or=function(e){Ht(r,e);var t=tr(r);function r(e,n,o,a,i){var c;return Kt(this,r),(c=t.call(this,e)).collaborator=n,c.groupUser=o,c.target=a,c.book=i||a,c}return Xt(r,[{key:"department",get:function(){var e,t,r;return(null===(e=this.data)||void 0===e||null===(t=e.profile)||void 0===t?void 0:t.department)||(null===(r=this.data)||void 0===r?void 0:r.dep)||null}},{key:"actionId",get:function(){return this.collaborator.id}},{key:"actionType",get:function(){return this.collaborator.type}},{key:"uid",get:function(){return this.data.uid||Object(Yt.format)([this.data]),this.data.uid}},{key:"userId",get:function(){return this.data.id}},{key:"role",get:function(){return this.collaborator&&String(this.collaborator.role)}},{key:"workId",get:function(){return this.data.workid}},{key:"isUpdateAbility",value:function(){return this.target.abilities.create_collaborator}},{key:"isInvited",value:function(){return this.collaborator&&this.collaborator.status===X.STATUS.invited}},{key:"isJoined",value:function(){return this.collaborator&&this.collaborator.status===X.STATUS.joined}},{key:"isApplying",value:function(){return this.collaborator&&this.collaborator.status===X.STATUS.applying}},{key:"isGroupMember",value:function(){return this.groupUser&&this.groupUser.role!==Qt.ROLE.readonly}},{key:"isGroupReadonlyMember",value:function(){return this.groupUser&&this.groupUser.role===Qt.ROLE.readonly}},{key:"isMine",value:function(){return window.appData.me.login===this.login}},{key:"isNewUser",value:function(){return this.isUpdateAbility()&&!this.isMine()&&!this.isApplying()&&!this.isJoined()&&!this.isInvited()}},{key:"ableToAdd",value:function(){return this.isNewUser()}}]),r}(wt),ar=function(e){Ht(r,e);var t=tr(r);function r(e,n,o,a){var i,c;return Kt(this,r),(c=t.call(this,e)).collaborator=e,c.user=e.owner,c.collaborator.owner_id=null===(i=c.user)||void 0===i?void 0:i.id,c.groupUser=n,c.target=o,c.book=a||o,c.departments=e.departments,c}return Xt(r,[{key:"department",get:function(){var e;return null!==(e=this.departments)&&void 0!==e&&e.length?this.departments.map((function(e){return e.name})).join("-"):null}},{key:"ownerType",get:function(){return this.collaborator.owner_type}},{key:"actionId",get:function(){return this.collaborator.id}},{key:"actionType",get:function(){return this.collaborator.type}},{key:"uid",get:function(){return this.user.uid||Object(Yt.format)([this.user]),this.user.uid}},{key:"userId",get:function(){return this.user.id}},{key:"role",get:function(){return String(this.collaborator.role)}},{key:"login",get:function(){return this.user.login}},{key:"name",get:function(){return this.user.name}},{key:"avatar",get:function(){return this.user.avatar_url}},{key:"workId",get:function(){return this.user.workid}},{key:"isUpdateAbility",value:function(){return this.target.abilities.create_collaborator}},{key:"isInvited",value:function(){return this.collaborator.status===X.STATUS.invited}},{key:"isJoined",value:function(){return this.collaborator.status===X.STATUS.joined}},{key:"isApplying",value:function(){return this.collaborator.status===X.STATUS.applying}},{key:"isGroupMember",value:function(){return this.groupUser&&this.groupUser.role!==Qt.ROLE.readonly}},{key:"isGroupReadonlyMember",value:function(){return this.groupUser&&this.groupUser.role===Qt.ROLE.readonly}},{key:"isMine",value:function(){return window.appData.me.login===this.login&&this.isUser()}},{key:"isNewUser",value:function(){return this.isUpdateAbility()&&!this.isMine()&&!this.isApplying()&&!this.isJoined()&&!this.isInvited()}},{key:"ableToAdd",value:function(){return this.isNewUser()}},{key:"isUser",value:function(){return this.ownerType===X.OWNER_TYPE.User}}]),r}(wt);function ir(e){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(e)}function cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(r),!0).forEach((function(t){ur(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ur(e,t,r){return t=function(e){var t=function(e,t){if("object"!==ir(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ir(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var dr=function(e){var t=e.group,r=e.book,n=e.doc,i=e.organization,c=e.dispatch,l=e.isEditing,u=e.onReverting,s=window.appData.isYuque,f=sr(Object(o.useState)(0),2),d=f[0],p=f[1],h=sr(Object(o.useState)(0),2),m=h[0],y=h[1],b=sr(Object(o.useState)(!1),2),v=b[0],g=b[1],w=sr(Object(o.useState)(!1),2),_=w[0],E=w[1],S=sr(Object(Ft.c)(n,{dispatch:c,book:r,group:t,isEditing:l}),5),O=S[0],j=S[1],k=S[2],A=S[3],P=S[4],L=sr(Object(Ft.e)(n,{dispatch:c,organization:i,optional_properties:"profile"}),4),T=L[0],x=L[1],I=L[2],R=L[3],D=function(e){N.a.collaborations.count({target_type:"Doc",target_id:e.id}).then((function(e){y((null==e?void 0:e.count)||0)}))},M=function(e){return c({type:"proxy.web/collaborations.find",payload:{data:{target_type:"Doc",target_id:e.id,offset:d,optional_properties:"departments"},reducer:0===d?"doc/updateCollaborations":"doc/addCollaborations"}}).then((function(e){200===e.length&&E(!0)}))};Object(o.useEffect)((function(){var e;e=n,g(!0),M(e).then((function(){g(!1)})).catch((function(e){g(!1)})),c({type:"proxy.web/groups.users",payload:{data:{id:t.id},reducer:"group/updateMembers"}}),D(n)}),[n.id,t.id]);var U=function(e){c({type:"proxy.web/collaborations.destroy",payload:{data:{id:e.actionId,type:e.actionType},reducer:"doc/removeCollaboration"}}).then((function(){var t=!e.isMine()&&!e.isApplying();C.a.success(a.a.createElement("span",null,__("操作成功"),t&&a.a.createElement("a",{className:zt.a.revertLink,onClick:function(){u&&u(),C.a.destroy(),c({type:"doc/addCollaborator",payload:{data:e.collaborator}}).then((function(){C.a.success(__("撤销成功!")),M(n),D(n)}))}},__("撤销"))),3),D(n)}))},G=s&&m>=Ne.a.getDocCollaboratorLimit(t);Object(Yt.format)(t.members.map((function(e){return e.user}))),Object(Yt.format)(n.collaborations.map((function(e){return e.owner})));var B=T.map((function(e){var o=t.members.find((function(t){return t.user.uid===e.uid})),a=n.collaborations.find((function(t){return t.owner.uid===e.uid}));return new or(e,a,o,n,r)})),F=n.collaborations.map((function(e){var o=t.members.find((function(t){return t.user.uid===e.owner.uid}));return new ar(e,o,n,r)}));return a.a.createElement(Gt,{memberDocCollaboratorTip:s&&!!n,collaboratorCount:m,placeholder:__("输入用户名、用户 ID 邀请协作"),dataSource:F,link:O,onRefreshLink:j,linkLoading:k,checked:A,onCheckChange:P,searchData:B,onSearch:x,onSelect:function(e){e.ableToAdd()&&function(e){var t={target_type:"Doc",target_id:n.id,role:X.ROLE.edit};e.userId?t.user_id=e.userId:t=lr(lr({},t),{},{login:e.login,workid:e.workId,name:e.name,provider_type:e.provider_type,provider_userid:e.provider_userid}),c({type:"proxy.web/collaborations.create",payload:{data:t,reducer:"doc/addOneCollaboration"}}).then((function(){C.a.success(__("添加成功")),setTimeout((function(){D(n),M(n)}),100)}))}(e),R(e)},onBlur:R,disableSelect:function(e){return G||e&&!e.ableToAdd()},disableSearch:G,searchLoading:I,onAgree:function(e){c({type:"proxy.web/collaborations.approve",payload:{data:{id:e.actionId},reducer:"doc/updateOneCollaboration"}}).then((function(e){var t=__("已同意用户 {member} 加入",{member:e.owner.name});C.a.success(t),D(n)}))},onReject:U,onDelete:U,onRoleChange:function(e,t){c({type:"proxy.web/collaborations.update",payload:{data:{id:e.actionId,role:t},reducer:"doc/updateOneCollaboration"}}).then((function(){C.a.success(__("更新成功")),D(n)}))},onAdd:function(){M(n),D(n)},disableInvite:G,onLoadMore:function(){p(d+200),M(n)},shouldLoadMore:_,onLoading:v,showSearch:n.abilities.create_collaborator,showJoinLink:n.abilities.create_collaborator,renderSearchNotFound:i&&i.id?qt:Jt})};dr.propTypes={dispatch:Ce.a.func.isRequired,organization:Ce.a.object.isRequired,group:Ce.a.object.isRequired,book:Ce.a.object.isRequired,doc:Ce.a.object.isRequired,isEditing:Ce.a.bool,onReverting:Ce.a.func};var pr=Object(L.d)((function(e){return e}))(Object(Bt.b)(dr)),hr=r(1359),mr=r(893);function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}function br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?br(Object(r),!0).forEach((function(t){gr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gr(e,t,r){return t=function(e){var t=function(e,t){if("object"!==yr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yr(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wr=function(e){var t,r=e.share,n=e.shareViewType,a=e.isEditing,i=e.inviteContent,c=e.organization,l=e.group,s=e.book,f=e.onBack,d=e.onToggleCollaboratorShow,p={type:n.toLowerCase(),book:s,group:l,organization:c};n===u.b.DOC&&(t=vr(vr({},p),{},{doc:r}));var h,m=o.useMemo((function(){return mr.a.create(t||p)}),[t,p]);return m&&m.enable&&(h={id:mr.a.id,title:mr.a.title,inviteSelectorType:n.toLowerCase(),getJoinUrl:m.getUrl,getToken:m.getToken,updateToken:m.updateToken,deleteTokens:m.deleteTokens,getCopyText:m.getCopyText,inviteModalContent:i,onBackShare:f,moreSettingOptions:m.getMoreSettingOptions(),organization:c,isEditing:a,inviteTarget:r,toggleCollaboratorList:function(e){null==d||d(e)}}),o.createElement(o.Fragment,null,o.createElement(hr.a,h))},_r=r(117);function Er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Sr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Or=function(e){var t=e.defaultPanel,r=e.share,n=e.inviteContent,a=e.organization,i=e.group,c=e.book,l=e.onBack,u=Er(o.useState(!0),2),s=u[0],f=u[1];return o.createElement(o.Fragment,null,s&&o.createElement("div",{className:Q()(_r.a.shareDetailSettingPanel,_r.a.collaborator)},"collaborator"===t?o.createElement("div",{className:_r.a.title},__("文档协作者")):o.createElement("div",{className:_r.a.title,onClick:l},o.createElement(Z.b,{className:_r.a.backIcon,name:"arrow-down",width:20}),__("文档协作者"))),s&&o.createElement("div",{className:_r.a.collaboratorContent},o.createElement(pr,null)),o.createElement(wr,{share:r,organization:a,group:i,book:c,shareViewType:"DOC",isEditing:!0,inviteContent:n,onToggleCollaboratorShow:function(e){return f(e)}}))};function jr(){return jr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jr.apply(this,arguments)}var kr=function(e){return o.createElement(i.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return o.createElement(n.a,null,__("分享"))}},o.createElement(A,jr({panel:ke,CollaboratorChannel:Or,InviteSelectorChannel:wr},e)))}},2987:function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));r(953);var n=r(443),o=(r(104),r(38)),a=(r(62),r(21)),i=(r(63),r(23)),c=(r(103),r(60)),l=r(0),u=r(151),s=r(30),f=r(9),d=r.n(f),p=r(167),h=r(90),m=r(342),y=r(961),b=r(18),v=r(117);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=function(e){var t=e.bookPublicSet,r=e.panelType,f=e.panelTitle,g=e.share,_=e.belongs,E=e.organization,S=e.group,O=e.book,j=e.shareViewType,k=e.handlePasswordChange,A=e.handleScopeChange,C=e.handleSearchChange,P=e.onBack,L=l.useMemo((function(){return Object(y.d)(_,g,j,S,O)}),[g,j,S,O]).privacy,N=function(){var e=m.m[_],t=e.desc,r=e.action,n=_===h.a.ORG&&(0===(null==E?void 0:E.share_to_outside_enable)||!u.a.isPremium(E));return l.createElement(l.Fragment,null,l.createElement("p",{className:v.a.titleDesc},t),r.map((function(e){var t;return l.createElement(c.a,{key:e.value,title:e.value===b.PRIVACY.public&&n?null===(t=e.tip)||void 0===t?void 0:t.call(e,E):"",placement:"bottomRight",autoAdjustOverflow:!0},function(e){return l.createElement("div",{className:d()(v.a.contentArea,v.a.selectorItem,w({},v.a.disabledItem,e.value===b.PRIVACY.public&&n)),onClick:function(){L===e.value||e.value===b.PRIVACY.public&&n||null==A||A(e.value)}},l.createElement("span",null,e.label),L===e.value&&l.createElement(s.b,{className:v.a.selectorIcon,name:"check",width:16}))}(e))})))},T=function(e){switch(e){case"scopeSet":return N();case"passwordSet":return function(){var e=Object(y.c)(g,j,S,O),r=e.currentPassword,n=e.isInheritBookPassword,u="";(j===h.b.DOC&&n||j===h.b.BOOK)&&(u=m.k[j]);var f=Object(p.a)()?"https://www.yuque.com/yuque/thyzgp/wgy2sb#ebmU2":"https://yuque.antfin.com/lark/bsgp0v/lrui64#ebmU2",_=__("所属知识库已开启密码，文档无法独立设置。{terms}",{terms:l.createElement("a",{href:f,target:"_blank"},__("查看帮助"))}),E=l.createElement("div",{className:v.a.contentArea},r?l.createElement("div",{className:d()(v.a.pwdBlock,w({},v.a.bookPublicSet,t))},l.createElement("span",{"data-testid":"password-text",className:v.a.passwordText},__("密码：{password}",{password:r})),l.createElement(a.a,{type:"text",disabled:n,onClick:function(){null==k||k(b.ENCRYPTED_PASSWORD_ACTIONS.enabled).then((function(){i.a.success(__("重置成功"),1)}))},className:v.a.resetBtn},l.createElement(s.b,{name:"change",className:v.a.resetIcon,width:12}),__("重置"))):l.createElement(o.a,{className:d()(v.a.pwdLink,w({},v.a.bookPublicSet,t)),disabled:!0,placeholder:__("点击开启生成随机密码")}),l.createElement(a.a,{className:v.a.pwdBtn,size:"large",type:"primary",disabled:n,onClick:function(){null==k||k(r?b.ENCRYPTED_PASSWORD_ACTIONS.disabled:b.ENCRYPTED_PASSWORD_ACTIONS.enabled).then((function(){i.a.success(__("设置成功"),1)}))}},r?__("关闭"):__("开启")));return l.createElement(l.Fragment,null,l.createElement("p",{className:d()(v.a.titleDesc,w({},v.a.bookPublicSet,t))},u),l.createElement(c.a,{title:n?_:"",placement:"bottomRight",autoAdjustOverflow:!0},E))}();case"searchSet":return r=Object(y.b)(g,j,S,O),u=r.currentIndexedLevel,f=r.isInheritBookIndex,E=m.n[j][_],A=E.desc,P=E.action,L=E.tip,T=l.createElement("div",{className:v.a.contentArea},l.createElement("span",{className:v.a.switchTitle},P),l.createElement(n.a,{disabled:f,onChange:C,checked:1===u})),l.createElement(l.Fragment,null,l.createElement("p",{className:d()(v.a.titleDesc,w({},v.a.bookPublicSet,t))},A),l.createElement(c.a,{title:f?L:"",placement:"bottomRight",autoAdjustOverflow:!0},T))}var r,u,f,E,A,P,L,T};return t?l.createElement("div",{className:d()(v.a.shareDetailSettingPanel,v.a.bookPublicSetting)},l.createElement("div",{className:v.a.bookPublicTitle},f),T(r)):l.createElement("div",{className:v.a.shareDetailSettingPanel},l.createElement("div",{className:v.a.title,onClick:P},l.createElement(s.b,{className:v.a.backIcon,name:"arrow-down",width:20}),f),T(r))}},472:function(e,t,r){"use strict";r(2262);var n=r(1268);r(922);t.a=n.a},985:function(e,t,r){"use strict";t.a={revertLink:"index-module_revertLink_csROb"}}}]);