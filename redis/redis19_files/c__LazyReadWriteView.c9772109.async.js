/*! For license information please see c__LazyReadWriteView.c9772109.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[82,8,9,19,23,43],{100:function(e,t,n){"use strict";n(782);var r=n(222),o=n(0),a=n.n(o),i=n(9),l=n.n(i),c=n(2),s=n.n(c),u=n(69),d=n.n(u),f=n(789),p=n.n(f),h=n(788),m=n.n(h),v=n(927);n(2203);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}var b=["className","onSearch","onClear","allowClear","placeholder"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}function E(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function O(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g(t)?t:String(t)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(c,e);var t,n,o,i=S(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).onClear=function(e){var n=t.props,r=n.onChange,o=n.onClear;t.input.focus(),t.setState({value:""}),r&&r(e),o&&o(e)},t.onChange=function(e){var n=t.props.onChange,r=e.target.value;t.setState({value:r}),n&&n(e)},t.onSearch=function(e){var n=t.props.onSearch;n&&n(e.target.value,e)},t.focus=function(){t.input.focus()},t.state={value:""},t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return"value"in e&&e.value!==t.value?{value:e.value}:null}}],(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=(t.onSearch,t.onClear,t.allowClear),i=t.placeholder,c=void 0===i?Object(v.a)("搜索"):i,s=E(t,b),u=o&&this.state.value?a.a.createElement("span",{className:"larkui-input-search-close-icon",onClick:this.onClear},a.a.createElement(m.a,null)):null;return a.a.createElement(r.a,x({onPressEnter:this.onSearch,placeholder:c},s,{prefix:a.a.createElement(p.a,null),suffix:u,onChange:this.onChange,value:this.state.value,ref:function(t){e.input=t},allowClear:!1,spellCheck:"true",autoComplete:"off",className:l()("larkui-input-search",n)}))}}])&&C(t.prototype,n),o&&C(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.Component);A.defaultProps={allowClear:!0},A.propTypes=w(w({},r.a.InputProps),{},{onSearch:s.a.func,onChange:s.a.func,onClear:s.a.func,className:s.a.string});var T=A;n(842);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}var D=["className"];function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t=function(e){var t=function(e,t){if("object"!==L(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===L(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}function F(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var B=a.a.forwardRef((function(e,t){var n=e.className,o=F(e,D);return a.a.createElement(r.a,I({ref:t,className:l()("larkui-input",n),autoComplete:!1},o))}));B.propTypes=M(M({},r.a.InputProps),{},{className:s.a.string}),d()(B,r.a),B.Search=T;t.a=B},107:function(e,t,n){"use strict";n.d(t,"a",(function(){return U})),n.d(t,"b",(function(){return q})),n.d(t,"c",(function(){return M})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return O})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return W})),n.d(t,"j",(function(){return K})),n.d(t,"k",(function(){return Y})),n.d(t,"l",(function(){return h})),n.d(t,"m",(function(){return $})),n.d(t,"n",(function(){return f})),n.d(t,"o",(function(){return G})),n.d(t,"p",(function(){return X})),n.d(t,"q",(function(){return p})),n.d(t,"r",(function(){return Z}));var r=n(144);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const l={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function c(e){return e?e[0].toUpperCase()+e.slice(1):""}const s=["enter","leave"];function u(e,t="",n=!1){const r=l[e],o=r&&r[t]||t;return"on"+c(e)+c(o)+(function(e=!1,t){return e&&!s.includes(t)}(n,o)?"Capture":"")}const d=["gotpointercapture","lostpointercapture"];function f(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=d.includes(t)?"capturecapture":"capture",o=!!~t.indexOf(r);return o&&(t=t.replace("capture","")),{device:t,capture:o,passive:n}}function p(e,t=""){const n=l[e];return e+(n&&n[t]||t)}function h(e){return"touches"in e}function m(e){return h(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function v(e){return h(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function g(e,t){const n=t.clientX-e.clientX,r=t.clientY-e.clientY,o=(t.clientX+e.clientX)/2,a=(t.clientY+e.clientY)/2,i=Math.hypot(n,r);return{angle:-180*Math.atan2(n,r)/Math.PI,distance:i,origin:[o,a]}}function b(e){return function(e){return Array.from(e.touches).filter((t=>{var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((e=>e.identifier))}function y(e,t){const[n,r]=Array.from(e.touches).filter((e=>t.includes(e.identifier)));return g(n,r)}function w(e){const t=v(e);return h(e)?t.identifier:t.pointerId}function k(e){const t=v(e);return[t.clientX,t.clientY]}function x(e){let{deltaX:t,deltaY:n,deltaMode:r}=e;return 1===r?(t*=40,n*=40):2===r&&(t*=800,n*=800),[t,n]}function E(e,...t){return"function"==typeof e?e(...t):e}function C(){}function O(...e){return 0===e.length?C:1===e.length?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function _(e,t){return Object.assign({},t,e||{})}class S{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:r}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?E(n.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:o}=this;t.args=this.args;let a=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:o,ctrlKey:a}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:o,ctrlKey:a})}return t}(e)),o.down=o.pressed=o.buttons%2==1||o.touches>0,a=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);r.a.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);const[i,l]=t._movement,[c,s]=n.threshold,{_step:u,values:d}=t;if(n.hasCustomTransform?(!1===u[0]&&(u[0]=Math.abs(i)>=c&&d[0]),!1===u[1]&&(u[1]=Math.abs(l)>=s&&d[1])):(!1===u[0]&&(u[0]=Math.abs(i)>=c&&Math.sign(i)*c),!1===u[1]&&(u[1]=Math.abs(l)>=s&&Math.sign(l)*s)),t.intentional=!1!==u[0]||!1!==u[1],!t.intentional)return;const f=[0,0];if(n.hasCustomTransform){const[e,t]=d;f[0]=!1!==u[0]?e-u[0]:0,f[1]=!1!==u[1]?t-u[1]:0}else f[0]=!1!==u[0]?i-u[0]:0,f[1]=!1!==u[1]?l-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(f);const p=t.offset,h=t._active&&!t._blocked||t.active;h&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=o[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=E(n.bounds,t)),this.setup&&this.setup()),t.movement=f,this.computeOffset()));const[m,v]=t.offset,[[g,b],[y,w]]=t._bounds;t.overflow=[m<g?-1:m>b?1:0,v<y?-1:v>w?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);const k=t._active&&n.rubberband||[0,0];if(t.offset=Object(r.b)(t._bounds,t.offset,k),t.delta=r.a.sub(t.offset,p),this.computeMovement(),h&&(!t.last||a>32)){t.delta=r.a.sub(t.offset,p);const e=t.delta.map(Math.abs);r.a.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&a>0&&(t.velocity=[e[0]/a,e[1]/a])}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const r=this.handler(i(i(i({},t),e),{},{[this.aliasKey]:e.values}));void 0!==r&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class R extends S{constructor(...e){super(...e),o(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=r.a.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=r.a.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const r="object"==typeof n.axisThreshold?n.axisThreshold[m(e)]:n.axisThreshold;t.axis=function([e,t],n){const r=Math.abs(e),o=Math.abs(t);return r>o&&r>n?"x":o>r&&o>n?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const j=e=>e,A={enabled:(e=!0)=>e,eventOptions:(e,t,n)=>i(i({},n.shared.eventOptions),e),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return r.a.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?r.a.toVector(e):void 0,transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||j},threshold:e=>r.a.toVector(e,0)};const T=i(i({},A),{},{axis(e,t,{axis:n}){if(this.lockDirection="lock"===n,!this.lockDirection)return n},axisThreshold:(e=0)=>e,bounds(e={}){if("function"==typeof e)return t=>T.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:o=1/0}=e;return[[t,n],[r,o]]}}),L={ArrowRight:(e=1)=>[10*e,0],ArrowLeft:(e=1)=>[-10*e,0],ArrowUp:(e=1)=>[0,-10*e],ArrowDown:(e=1)=>[0,10*e]};const D="undefined"!=typeof window&&window.document&&window.document.createElement;function P(){return D&&"ontouchstart"in window||D&&window.navigator.maxTouchPoints>1}const M={isBrowser:D,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:P(),touchscreen:P(),pointer:D&&"onpointerdown"in window,pointerLock:D&&"exitPointerLock"in window.document},N={mouse:0,touch:0,pen:8},I=i(i({},T),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:o=!1}={}}){return this.pointerLock=r&&M.pointerLock,M.touch&&n?"touch":this.pointerLock?"mouse":M.pointer&&!o?"pointer":M.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay="number"==typeof n?n:n||void 0===n&&e?250:void 0,M.touchscreen&&!1!==n)return e||(void 0!==n?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1}={}}){return this.pointerButtons=r,!this.pointerLock&&"pointer"===this.device&&n},keys:(e=!0)=>e,threshold(e,t,{filterTaps:n=!1,tapsThreshold:o=3,axis:a}){const i=r.a.toVector(e,n?o:a?1:0);return this.filterTaps=n,this.tapsThreshold=o,i},swipe({velocity:e=.5,distance:t=50,duration:n=250}={}){return{velocity:this.transform(r.a.toVector(e)),distance:this.transform(r.a.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?i(i({},N),e):N});const F=i(i({},A),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!M.touch&&M.gesture)return"gesture";if(M.touch&&r)return"touch";if(M.touchscreen){if(M.pointer)return"pointer";if(M.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const o=e=>{const t=_(E(n,e),{min:-1/0,max:1/0});return[t.min,t.max]},a=e=>{const t=_(E(r,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof n&&"function"!=typeof r?[o(),a()]:e=>[o(e),a(e)]},threshold(e,t,n){this.lockDirection="lock"===n.axis;return r.a.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e});const B=i(i({},T),{},{mouseOnly:(e=!0)=>e});const V=T;const H=T;const z=i(i({},T),{},{mouseOnly:(e=!0)=>e}),q=new Map,U=new Map;function G(e){q.set(e.key,e.engine),U.set(e.key,e.resolver)}const W={key:"drag",engine:class extends R{constructor(...e){super(...e),o(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=T.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout((()=>{this.compute(),this.emit()}),0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=w(e),n._pointerActive=!0,this.computeValues(k(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==m(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive)return;if(t.type===e.type&&e.timeStamp===t.timeStamp)return;const o=w(e);if(void 0!==t._pointerId&&o!==t._pointerId)return;const a=k(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=r.a.sub(a,t._values),this.computeValues(a)),r.a.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(e){0}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const r=w(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[o,a]=t._distance;if(t.tap=o<=n.tapsThreshold&&a<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[e,r]=t.direction,[o,a]=t.velocity,[i,l]=t.movement,[c,s]=n.swipe.velocity,[u,d]=n.swipe.distance,f=n.swipe.duration;t.elapsedTime<f&&(Math.abs(o)>c&&Math.abs(i)>u&&(t.swipe[0]=e),Math.abs(a)>s&&Math.abs(l)>d&&(t.swipe[1]=r))}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"==typeof e.persist&&e.persist()}(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",(()=>{this.state._step=[0,0],this.startPointerDrag(e)}),this.config.delay)}keyDown(e){const t=L[e.key];if(t){const n=this.state,o=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(o),n._keyboardActive=!0,r.a.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in L&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:I},Y={key:"hover",engine:class extends R{constructor(...e){super(...e),o(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.start(e),this.computeValues(k(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&"mouse"!==e.pointerType)return;const t=this.state;if(!t._active)return;t._active=!1;const n=k(e);t._movement=t._delta=r.a.sub(n,t._values),this.computeValues(n),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}},resolver:z},$={key:"move",engine:class extends R{constructor(...e){super(...e),o(this,"ingKey","moving")}move(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(k(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=k(e),n=this.state;n._delta=r.a.sub(t,n._values),r.a.addTo(n._movement,n._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}},resolver:B},K={key:"pinch",engine:class extends S{constructor(...e){super(...e),o(this,"ingKey","pinching"),o(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:n}=this.state;this.state.offset="wheel"===e?r.a.add(t,n):[(1+t[0])*n[0],t[1]+n[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,n]=e._movement;if(!e.axis){const r=30*Math.abs(t)-Math.abs(n);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout((()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()}),0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,n=this.ctrl.touchIds;if(t._active&&t._touchIds.every((e=>n.has(e))))return;if(n.size<2)return;this.start(e),t._touchIds=Array.from(n).slice(0,2);const r=y(e,t._touchIds);this.pinchStart(e,r)}pointerStart(e){if(null!=e.buttons&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,n=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(n.keys()).every((e=>r.has(e))))return;if(n.size<2&&n.set(e.pointerId,e),t._pointerEvents.size<2)return;this.start(e);const o=g(...Array.from(n.values()));this.pinchStart(e,o)}pinchStart(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=y(e,this.state._touchIds);this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const n=g(...Array.from(t.values()));this.pinchMove(e,n)}pinchMove(e,t){const n=this.state,r=n._values[1],o=t.angle-r;let a=0;Math.abs(o)>270&&(a+=Math.sign(o)),this.computeValues([t.distance,t.angle-360*a]),n.origin=t.origin,n.turns=a,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some((e=>!this.ctrl.touchIds.has(e)))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(e){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=r.a.sub(t._movement,n),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&!e[t]||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const t=this.state;t._delta=[-x(e)[1]/100*t.offset[0],0],r.a.addTo(t._movement,t._delta),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this))),e("wheel","",this.wheel.bind(this),{passive:!1})}},resolver:F},X={key:"scroll",engine:class extends R{constructor(...e){super(...e),o(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,n=function(e){var t,n;const{scrollX:r,scrollY:o,scrollLeft:a,scrollTop:i}=e.currentTarget;return[null!==(t=null!=r?r:a)&&void 0!==t?t:0,null!==(n=null!=o?o:i)&&void 0!==n?n:0]}(e);t._delta=r.a.sub(n,t._values),r.a.addTo(t._movement,t._delta),this.computeValues(n),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}},resolver:V},Z={key:"wheel",engine:class extends R{constructor(...e){super(...e),o(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=x(e),r.a.addTo(t._movement,t._delta);const[n,o]=t.overflow,[a,i]=t._delta,[l,c]=t._direction;(n<0&&a>0&&l<0||n>0&&a<0&&l>0)&&(t._movement[0]=t._movementBound[0]),(o<0&&i>0&&c<0||o>0&&i<0&&c>0)&&(t._movement[1]=t._movementBound[1]),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},resolver:H}},1086:function(e,t,n){var r=n(240);e.exports=function(e){return"function"==typeof e?e:r}},1087:function(e,t,n){var r=n(233),o=n(203);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},1088:function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},109:function(e,t,n){"use strict";var r=n(138),o=n.n(r),a=n(114),i=n.n(a),l=n(121),c=n.n(l),s=n(122),u=n.n(s),d=n(137),f=n.n(d),p=n(145),h=n.n(p),m=n(146),v=n.n(m),g=n(149),b=n.n(g),y=n(293),w=n.n(y),k=o.a,x=o.a.normal,E=o.a.paid,C=[h.a,v.a,f.a,b.a],O=w()(C).concat([".pdf"]),_=w()(C.map((function(e){return e.paid}))).concat([".pdf"]),S=i.a,R=i.a.normal,j=i.a.paid,A=c.a,T=c.a.paid,L=u.a,D=u.a.paid;t.a={LOCAL_DOC_EXT:O,LOCAL_DOC_EXT_NORMAL:[],LOCAL_DOC_EXT_PAID:_,FILE_EXT:k,FILE_EXT_NORMAL:x,FILE_EXT_PAID:E,IMAGE_EXT:S,IMAGE_EXT_NORMAL:R,IMAGE_EXT_PAID:j,VIDEO_EXT:A,VIDEO_EXT_NORMAL:[],VIDEO_EXT_PAID:T,AUDIO_EXT:L,AUDIO_EXT_NORMAL:[],AUDIO_EXT_PAID:D}},1091:function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var o=65535&e|0,a=e>>>16&65535|0,i=0;0!==n;){n-=i=n>2e3?2e3:n;do{a=a+(o=o+t[r++]|0)|0}while(--i);o%=65521,a%=65521}return o|a<<16|0}},1092:function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,o){var a=r,i=o+n;e^=-1;for(var l=o;l<i;l++)e=e>>>8^a[255&(e^t[l])];return-1^e}},1093:function(e,t,n){"use strict";var r=n(321),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var i=new r.Buf8(256),l=0;l<256;l++)i[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;function c(e,t){if(t<65534&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}i[254]=i[254]=1,t.string2buf=function(e){var t,n,o,a,i,l=e.length,c=0;for(a=0;a<l;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<l&&56320==(64512&(o=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(o-56320),a++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(c),i=0,a=0;i<c;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<l&&56320==(64512&(o=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(o-56320),a++),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},t.buf2binstring=function(e){return c(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,o=t.length;n<o;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,o,a,l=t||e.length,s=new Array(2*l);for(r=0,n=0;n<l;)if((o=e[n++])<128)s[r++]=o;else if((a=i[o])>4)s[r++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&n<l;)o=o<<6|63&e[n++],a--;a>1?s[r++]=65533:o<65536?s[r++]=o:(o-=65536,s[r++]=55296|o>>10&1023,s[r++]=56320|1023&o)}return c(s,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+i[e[n]]>t?n:t}},1094:function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},1095:function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},1096:function(e,t){e.exports=function(e,t,n,r){var o=e.transformX=function(e,a){n(e),n(a);for(var i,l,c,s=[],u=0;u<a.length;u++){for(var d=a[u],f=[],p=0;p<e.length;){var h=[];if(i=e[p],c=h,t(f,i,l=d,"left"),t(c,l,i,"right"),p++,1!==h.length){if(0===h.length){for(var m=p;m<e.length;m++)r(f,e[m]);d=null;break}for(var v=o(e.slice(p),h),g=0;g<v[0].length;g++)r(f,v[0][g]);for(var b=0;b<v[1].length;b++)r(s,v[1][b]);d=null;break}d=h[0]}null!=d&&r(s,d),e=f}return[e,s]};e.transform=function(e,n,r){if("left"!==r&&"right"!==r)throw new Error("type must be 'left' or 'right'");return 0===n.length?e:1===e.length&&1===n.length?t([],e[0],n[0],r):"left"===r?o(e,n)[0]:o(n,e)[1]}}},1175:function(e,t,n){"use strict";n.d(t,"useDrag",(function(){return c})),n.d(t,"useWheel",(function(){return s}));var r=n(199),o=n(0),a=n.n(o),i=n(1176);n(1331),n(1332);function l(e,t={},n,r){const o=a.a.useMemo((()=>new i.a(e)),[]);if(o.applyHandlers(e,r),o.applyConfig(t,n),a.a.useEffect(o.effect.bind(o)),a.a.useEffect((()=>o.clean.bind(o)),[]),void 0===t.target)return o.bind.bind(o)}function c(e,t){return Object(r.e)(r.a),l({drag:e},t||{},"drag")}function s(e,t){return Object(r.e)(r.g),l({wheel:e},t||{},"wheel")}},1176:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var r=n(107);function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const a={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=(r.c.isBrowser?window:void 0))=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},i=["target","eventOptions","window","enabled","transform"];function l(e={},t){const n={};for(const[r,o]of Object.entries(t))switch(typeof o){case"function":n[r]=o.call(n,e[r],r,e);break;case"object":n[r]=l(e[r],o);break;case"boolean":o&&(n[r]=e[r])}return n}class c{constructor(e,t){Object(r.e)(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,o,a){const i=this._listeners,l=Object(r.q)(t,n),c=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},s=Object(r.d)(Object(r.d)({},c),a);e.addEventListener(l,o,s);const u=()=>{e.removeEventListener(l,o,s),i.delete(u)};return i.add(u),u}clean(){this._listeners.forEach((e=>e())),this._listeners.clear()}}class s{constructor(){Object(r.e)(this,"_timeouts",new Map)}add(e,t,n=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class u{constructor(e){Object(r.e)(this,"gestures",new Set),Object(r.e)(this,"_targetEventStore",new c(this)),Object(r.e)(this,"gestureEventStores",{}),Object(r.e)(this,"gestureTimeoutStores",{}),Object(r.e)(this,"handlers",{}),Object(r.e)(this,"config",{}),Object(r.e)(this,"pointerIds",new Set),Object(r.e)(this,"touchIds",new Set),Object(r.e)(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&d(e,"drag");t.wheel&&d(e,"wheel");t.scroll&&d(e,"scroll");t.move&&d(e,"move");t.pinch&&d(e,"pinch");t.hover&&d(e,"hover")}(this,e)}setEventIds(e){return Object(r.l)(e)?(this.touchIds=new Set(Object(r.f)(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t,n={}){const c=e,{target:s,eventOptions:u,window:d,enabled:f,transform:p}=c,h=o(c,i);if(n.shared=l({target:s,eventOptions:u,window:d,enabled:f,transform:p},a),t){const e=r.a.get(t);n[t]=l(Object(r.d)({shared:n.shared},h),e)}else for(const e in h){const t=r.a.get(e);t&&(n[e]=l(Object(r.d)({shared:n.shared},h[e]),t))}return n}(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,n={};let o;if(!t.target||(o=t.target(),o)){if(t.enabled){for(const t of this.gestures){const a=this.config[t],i=f(n,a.eventOptions,!!o);if(a.enabled){new(r.b.get(t))(this,e,t).bind(i)}}const a=f(n,t.eventOptions,!!o);for(const t in this.nativeHandlers)a(t,"",(n=>this.nativeHandlers[t](Object(r.d)(Object(r.d)({},this.state.shared),{},{event:n,args:e}))),void 0,!0)}for(const e in n)n[e]=Object(r.g)(...n[e]);if(!o)return n;for(const e in n){const{device:t,capture:a,passive:i}=Object(r.n)(e);this._targetEventStore.add(o,t,"",n[e],{capture:a,passive:i})}}}}function d(e,t){e.gestures.add(t),e.gestureEventStores[t]=new c(e,t),e.gestureTimeoutStores[t]=new s}const f=(e,t,n)=>(o,a,i,l={},c=!1)=>{var s,u;const d=null!==(s=l.capture)&&void 0!==s?s:t.capture,f=null!==(u=l.passive)&&void 0!==u?u:t.passive;let p=c?o:Object(r.h)(o,a,d);n&&f&&(p+="Passive"),e[p]=e[p]||[],e[p].push(i)},p=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function h(e,t,n,o,a,i){if(!e.has(n))return;if(!r.b.has(o))return void 0;const l=n+"Start",c=n+"End";a[o]=e=>{let r;return e.first&&l in t&&t[l](e),n in t&&(r=t[n](e)),e.last&&c in t&&t[c](e),r},i[o]=i[o]||{}}function m(e,t){const[n,r,o]=function(e){const t={},n={},r=new Set;for(let o in e)p.test(o)?(r.add(RegExp.lastMatch),n[o]=e[o]):t[o]=e[o];return[n,t,r]}(e),a={};return h(o,n,"onDrag","drag",a,t),h(o,n,"onWheel","wheel",a,t),h(o,n,"onScroll","scroll",a,t),h(o,n,"onPinch","pinch",a,t),h(o,n,"onMove","move",a,t),h(o,n,"onHover","hover",a,t),{handlers:a,config:t,nativeHandlers:r}}},1190:function(e,t,n){"use strict";var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function i(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}var l=function(e,t){this.target=t,this.type=e},c=function(e){function t(t,n){var r=e.call(this,"error",n)||this;return r.message=t.message,r.error=t,r}return o(t,e),t}(l),s=function(e){function t(t,n,r){void 0===t&&(t=1e3),void 0===n&&(n="");var o=e.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=n,o}return o(t,e),t}(l),u=function(){if("undefined"!=typeof WebSocket)return WebSocket},d={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},f=function(){function e(e,t,n){var r=this;void 0===n&&(n={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(e){r._debug("open event");var t=r._options.minUptime,n=void 0===t?d.minUptime:t;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout((function(){return r._acceptOpen()}),n),r._ws.binaryType=r._binaryType,r._messageQueue.forEach((function(e){return r._ws.send(e)})),r._messageQueue=[],r.onopen&&r.onopen(e),r._listeners.open.forEach((function(t){return r._callEventListener(e,t)}))},this._handleMessage=function(e){r._debug("message event"),r.onmessage&&r.onmessage(e),r._listeners.message.forEach((function(t){return r._callEventListener(e,t)}))},this._handleError=function(e){r._debug("error event",e.message),r._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),r.onerror&&r.onerror(e),r._debug("exec error listeners"),r._listeners.error.forEach((function(t){return r._callEventListener(e,t)})),r._connect()},this._handleClose=function(e){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(e),r._listeners.close.forEach((function(t){return r._callEventListener(e,t)}))},this._url=e,this._protocols=t,this._options=n,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce((function(e,t){return"string"==typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e}),0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?e.CLOSED:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(e,t):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},e.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(e,t),this._connect()):this._connect()},e.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,n=void 0===t?d.maxEnqueuedMessages:t;this._messageQueue.length<n&&(this._debug("enqueue",e),this._messageQueue.push(e))}},e.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},e.prototype.dispatchEvent=function(e){var t,n,r=this._listeners[e.type];if(r)try{for(var o=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(r),a=o.next();!a.done;a=o.next()){var i=a.value;this._callEventListener(e,i)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0},e.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter((function(e){return e!==t})))},e.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,i(["RWS>"],e))},e.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,n=void 0===t?d.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=void 0===r?d.minReconnectionDelay:r,a=e.maxReconnectionDelay,i=void 0===a?d.maxReconnectionDelay:a,l=0;return this._retryCount>0&&(l=o*Math.pow(n,this._retryCount-1))>i&&(l=i),this._debug("next delay",l),l},e.prototype._wait=function(){var e=this;return new Promise((function(t){setTimeout(t,e._getNextDelay())}))},e.prototype._getNextUrl=function(e){if("string"==typeof e)return Promise.resolve(e);if("function"==typeof e){var t=e();if("string"==typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},e.prototype._connect=function(){var e=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var t=this._options,n=t.maxRetries,r=void 0===n?d.maxRetries:n,o=t.connectionTimeout,a=void 0===o?d.connectionTimeout:o,i=t.WebSocket,l=void 0===i?u():i;if(this._retryCount>=r)this._debug("max retries reached",this._retryCount,">=",r);else{if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),void 0===(c=l)||!c||2!==c.CLOSING)throw Error("No valid WebSocket class provided");var c;this._wait().then((function(){return e._getNextUrl(e._url)})).then((function(t){e._closeCalled||(e._debug("connect",{url:t,protocols:e._protocols}),e._ws=e._protocols?new l(t,e._protocols):new l(t),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout((function(){return e._handleTimeout()}),a))}))}}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new c(Error("TIMEOUT"),this))},e.prototype._disconnect=function(e,t){if(void 0===e&&(e=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new s(e,t,this))}catch(e){}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e}();t.a=f},1193:function(e,t,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,a=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function l(){l.init.call(this)}e.exports=l,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}g(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,n)}(e,o,{once:!0})}))},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var o,a,i,l;if(s(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),i=a[t]),void 0===i)i=a[t]=n,++e._eventsCount;else if("function"==typeof i?i=a[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(o=u(e))>0&&i.length>o&&!i.warned){i.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=i.length,l=c,console&&console.warn&&console.warn(l)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=f.bind(r);return o.listener=n,r.wrapFn=o,o}function h(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):v(o,o.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(a){r.once&&e.removeEventListener(t,o),n(a)}))}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return u(this)},l.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var l=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw l.context=i,l}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)a(c,this,t);else{var s=c.length,u=v(c,s);for(n=0;n<s;++n)a(u[n],this,t)}return!0},l.prototype.addListener=function(e,t){return d(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return d(this,e,t,!0)},l.prototype.once=function(e,t){return s(t),this.on(e,p(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,p(this,e,t)),this},l.prototype.removeListener=function(e,t){var n,r,o,a,i;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){i=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(o=a[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},l.prototype.listeners=function(e){return h(this,e,!0)},l.prototype.rawListeners=function(e){return h(this,e,!1)},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},l.prototype.listenerCount=m,l.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},1194:function(e,t,n){var r=n(1864)(n(594));e.exports=r},1210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(558);t.default=r.ConfigProvider},123:function(e,t,n){"use strict";n(854);var r=n(308);n(840);t.a=r.b},1257:function(e,t,n){var r=n(266),o=n(1087),a=n(632),i=n(1430),l=n(86),c=n(221),s=n(1088);e.exports=function e(t,n,u,d,f){t!==n&&a(n,(function(a,c){if(f||(f=new r),l(a))i(t,n,c,u,e,d,f);else{var p=d?d(s(t,c),a,c+"",t,n,f):void 0;void 0===p&&(p=a),o(t,c,p)}}),c)}},1274:function(e,t,n){"use strict";n(2365);var r=n(1526);n(2202);t.a=r.a},129:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactCSS=t.loop=t.handleActive=t.handleHover=t.hover=void 0;var r=s(n(1419)),o=s(n(1420)),a=s(n(1421)),i=s(n(1422)),l=s(n(1423)),c=s(n(1424));function s(e){return e&&e.__esModule?e:{default:e}}t.hover=i.default,t.handleHover=i.default,t.handleActive=l.default,t.loop=c.default;var u=t.ReactCSS=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var l=(0,r.default)(n),c=(0,o.default)(e,l);return(0,a.default)(c)};t.default=u},130:function(e,t,n){"use strict";n(1182);var r=n(190),o=n(0),a=n.n(o),i=n(69),l=n.n(i);n(988);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var s=["onKeyDown"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var h=[37,38,39,40],m=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],v=function(e){var t,n=e.onKeyDown,r=p(e,s),i=Object(o.useCallback)((t=n,function(e){return!(!m.includes(e.key)&&!h.includes(e.keyCode))||t(e)}),[n]);return a.a.createElement("ul",f({},r,{onKeyDown:i}))},g=a.a.forwardRef((function(e){var t=f({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return a.a.createElement(r.a,f({component:v},t))}));g.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r.a.MenuProps),l()(g,r.a),t.a=g},1329:function(e,t){},1330:function(e,t){},1331:function(e,t,n){},1332:function(e,t){},1344:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return L})),n.d(t,"c",(function(){return St})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return Tt})),n.d(t,"f",(function(){return on})),n.d(t,"g",(function(){return fe})),n.d(t,"h",(function(){return un})),n.d(t,"i",(function(){return hn})),n.d(t,"j",(function(){return Cn}));const r=!("undefined"==typeof window||"undefined"==typeof document||!window.document||!window.document.createElement);r&&document.addEventListener("touchstart",(()=>{}),!0);var o=n(310),a=n(0),i=n.n(a),l=n(9),c=n.n(l),s=n(903),u=n.n(s);function d(...e){function t(e,t){return void 0===t?e:t}let n=Object.assign({},e[0]);for(let r=1;r<e.length;r++)n=u()(n,e[r],t);return n}function f(e,t){const n=Object.assign({},t.props);e.className&&(n.className=c()(t.props.className,e.className)),e.style&&(n.style=Object.assign(Object.assign({},n.style),e.style)),void 0!==e.tabIndex&&(n.tabIndex=e.tabIndex);for(const t in e)e.hasOwnProperty(t)&&(t.startsWith("data-")||t.startsWith("aria-"))&&(n[t]=e[t]);return i.a.cloneElement(t,n)}const p={default:"var(--adm-color-weak)",primary:"var(--adm-color-primary)",white:"var(--adm-color-white)"},h={color:"default"};var m=Object(a.memo)((e=>{var t;const n=d(h,e);return f(n,i.a.createElement("div",{style:{color:null!==(t=p[n.color])&&void 0!==t?t:n.color},className:c()("adm-loading","adm-dot-loading")},i.a.createElement("svg",{height:"1em",viewBox:"0 0 100 40",style:{verticalAlign:"-0.125em"}},i.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.a.createElement("g",{transform:"translate(-100.000000, -71.000000)"},i.a.createElement("g",{transform:"translate(95.000000, 71.000000)"},i.a.createElement("g",{transform:"translate(5.000000, 0.000000)"},[0,1,2].map((e=>i.a.createElement("rect",{key:e,fill:"currentColor",x:20+26*e,y:"16",width:"8",height:"8",rx:"2"},i.a.createElement("animate",{attributeName:"y",from:"16",to:"16",dur:"2s",begin:.2*e+"s",repeatCount:"indefinite",values:"16; 6; 26; 16; 16",keyTimes:"0; 0.1; 0.3; 0.4; 1"})))))))))))}));function v(e){return!!e&&"object"==typeof e&&"function"==typeof e.then}const g="adm-button",b={color:"default",fill:"solid",block:!1,loading:!1,loadingIcon:i.a.createElement(m,{color:"currentColor"}),type:"button",shape:"default",size:"middle"};var y=Object(a.forwardRef)(((e,t)=>{const n=d(b,e),[r,l]=Object(a.useState)(!1),s=Object(a.useRef)(null),u="auto"===n.loading?r:n.loading,p=n.disabled||u;Object(a.useImperativeHandle)(t,(()=>({get nativeElement(){return s.current}})));return f(n,i.a.createElement("button",{ref:s,type:n.type,onClick:e=>Object(o.__awaiter)(void 0,void 0,void 0,(function*(){if(!n.onClick)return;const t=n.onClick(e);if(v(t))try{l(!0),yield t,l(!1)}catch(e){throw l(!1),e}})),className:c()(g,n.color?`${g}-${n.color}`:null,{[`${g}-block`]:n.block,[`${g}-disabled`]:p,[`${g}-fill-outline`]:"outline"===n.fill,[`${g}-fill-none`]:"none"===n.fill,[`${g}-mini`]:"mini"===n.size,[`${g}-small`]:"small"===n.size,[`${g}-large`]:"large"===n.size,[`${g}-loading`]:u},`${g}-shape-${n.shape}`),disabled:p,onMouseDown:n.onMouseDown,onMouseUp:n.onMouseUp,onTouchStart:n.onTouchStart,onTouchEnd:n.onTouchEnd},u?i.a.createElement("div",{className:`${g}-loading-wrapper`},n.loadingIcon,n.loadingText):i.a.createElement("span",null,n.children)))}));function w(e,t){const n=e;for(const e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}const k=Object(a.createContext)(null);var x=()=>{const[,e]=Object(a.useState)({});return Object(a.useCallback)((()=>e({})),[])};const E=e=>"function"==typeof e;var C=function(e){const t=Object(a.useRef)(e);t.current=Object(a.useMemo)((()=>e),[e]);const n=Object(a.useRef)();return n.current||(n.current=function(...e){return t.current.apply(this,e)}),n.current};function O(e){const{value:t,defaultValue:n,onChange:r}=e,o=x(),i=Object(a.useRef)(void 0!==t?t:n);void 0!==t&&(i.current=t);const l=C(((e,t=!1)=>{const n="function"==typeof e?e(i.current):e;if(t||n!==i.current)return i.current=n,o(),null==r?void 0:r(n)}));return[i.current,l]}const _={disabled:!1,defaultValue:[]};const S=Object(a.memo)((e=>f(e,i.a.createElement("svg",{viewBox:"0 0 40 40"},i.a.createElement("path",{d:"M31.5541766,15 L28.0892433,15 L28.0892434,15 C27.971052,15 27.8576674,15.044522 27.7740471,15.1239792 L18.2724722,24.1625319 L13.2248725,19.3630279 L13.2248725,19.3630279 C13.1417074,19.2834412 13.0287551,19.2384807 12.9107898,19.2380079 L9.44474455,19.2380079 L9.44474454,19.2380079 C9.19869815,19.2384085 8.99957935,19.4284738 9,19.66253 C9,19.7747587 9.04719253,19.8823283 9.13066188,19.9616418 L17.0907466,27.5338228 C17.4170809,27.8442545 17.8447695,28 18.2713393,28 L18.2980697,28 C18.7168464,27.993643 19.133396,27.8378975 19.4530492,27.5338228 L31.8693384,15.7236361 L31.8693384,15.7236361 C32.0434167,15.5582251 32.0435739,15.2898919 31.8696892,15.1242941 C31.7860402,15.0446329 31.6725052,15 31.5541421,15 L31.5541766,15 Z",fill:"currentColor"}))))),R=Object(a.memo)((e=>f(e,i.a.createElement("svg",{viewBox:"0 0 40 40"},i.a.createElement("path",{d:"M20,9 C26.0752953,9 31,13.9247047 31,20 C31,26.0752953 26.0752953,31 20,31 C13.9247047,31 9,26.0752953 9,20 C9,13.9247047 13.9247047,9 20,9 Z",fill:"currentColor"}))))),j=e=>{const t=Object(a.useRef)(null),n=C((t=>{t.stopPropagation(),t.stopImmediatePropagation();const n=t.target.checked;n!==e.checked&&e.onChange(n)}));return Object(a.useEffect)((()=>{if(e.disabled)return;if(!t.current)return;const r=t.current;return r.addEventListener("click",n),()=>{r.removeEventListener("click",n)}}),[e.disabled,e.onChange]),i.a.createElement("input",{ref:t,type:e.type,checked:e.checked,onChange:()=>{},disabled:e.disabled,id:e.id})},A="adm-checkbox",T={defaultChecked:!1,indeterminate:!1};var L=w(Object(a.forwardRef)(((e,t)=>{const n=Object(a.useContext)(k),r=d(T,e);let[o,l]=O({value:r.checked,defaultValue:r.defaultChecked,onChange:r.onChange}),s=r.disabled;const{value:u}=r;n&&void 0!==u&&(o=n.value.includes(u),l=e=>{var t;e?n.check(u):n.uncheck(u),null===(t=r.onChange)||void 0===t||t.call(r,e)},s=s||n.disabled),Object(a.useImperativeHandle)(t,(()=>({check:()=>{l(!0)},uncheck:()=>{l(!1)},toggle:()=>{l(!o)}})));return f(r,i.a.createElement("label",{className:c()(A,{[`${A}-checked`]:o&&!r.indeterminate,[`${A}-indeterminate`]:r.indeterminate,[`${A}-disabled`]:s,[`${A}-block`]:r.block})},i.a.createElement(j,{type:"checkbox",checked:o,onChange:l,disabled:s,id:r.id}),r.icon?i.a.createElement("div",{className:`${A}-custom-icon`},r.icon(o,r.indeterminate)):i.a.createElement("div",{className:`${A}-icon`},r.indeterminate?i.a.createElement(R,null):o&&i.a.createElement(S,null)),r.children&&i.a.createElement("div",{className:`${A}-content`},r.children)))})),{Group:e=>{const t=d(_,e),[n,r]=O(t);return i.a.createElement(k.Provider,{value:{value:n,disabled:t.disabled,check:e=>{r([...n,e])},uncheck:e=>{r(n.filter((t=>t!==e)))}}},t.children)}});var D=!("undefined"==typeof window||!window.document||!window.document.createElement);var P=D?a.useLayoutEffect:a.useEffect;var M=()=>{const e=Object(a.useRef)(!1);return Object(a.useEffect)((()=>(e.current=!1,()=>{e.current=!0})),[]),e};const N=r?window:void 0,I=["scroll","auto","overlay"];function F(e){return 1===e.nodeType}let B=!1;if(r)try{const e={};Object.defineProperty(e,"passive",{get(){B=!0}}),window.addEventListener("test-passive",null,e)}catch(e){}let V=0;const H="adm-overflow-hidden";function z(e,t){const n=function(){const e=Object(a.useRef)(0),t=Object(a.useRef)(0),n=Object(a.useRef)(0),r=Object(a.useRef)(0),o=Object(a.useRef)(0),i=Object(a.useRef)(0),l=Object(a.useRef)(""),c=()=>{n.current=0,r.current=0,o.current=0,i.current=0,l.current=""};return{move:a=>{const c=a.touches[0];var s,u;n.current=c.clientX<0?0:c.clientX-e.current,r.current=c.clientY-t.current,o.current=Math.abs(n.current),i.current=Math.abs(r.current),l.current||(l.current=(s=o.current)>(u=i.current)&&s>10?"horizontal":u>s&&u>10?"vertical":"")},start:n=>{c(),e.current=n.touches[0].clientX,t.current=n.touches[0].clientY},reset:c,startX:e,startY:t,deltaX:n,deltaY:r,offsetX:o,offsetY:i,direction:l,isVertical:()=>"vertical"===l.current,isHorizontal:()=>"horizontal"===l.current}}(),r=r=>{n.move(r);const o=n.deltaY.current>0?"10":"01",a=function(e,t=N){let n=e;for(;n&&n!==t&&F(n);){if(n===document.body)return t;const{overflowY:e}=window.getComputedStyle(n);if(I.includes(e)&&n.scrollHeight>n.clientHeight)return n;n=n.parentNode}return t}(r.target,e.current);if(!a)return;if("strict"===t){const e=function(e){let t=null==e?void 0:e.parentElement;for(;t;){if(t.clientHeight<t.scrollHeight)return t;t=t.parentElement}return null}(r.target);if(e===document.body||e===document.documentElement)return void r.preventDefault()}const{scrollHeight:i,offsetHeight:l,scrollTop:c}=a;let s="11";0===c?s=l>=i?"00":"01":c+l>=i&&(s="10"),"11"===s||!n.isVertical()||parseInt(s,2)&parseInt(o,2)||r.cancelable&&r.preventDefault()};Object(a.useEffect)((()=>{if(t)return document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",r,!!B&&{passive:!1}),V||document.body.classList.add(H),V++,()=>{V&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",r),V--,V||document.body.classList.remove(H))}}),[t])}var q=n(229),U=n(36);function G(e,t){if(r&&e){const n=function(e){return("function"==typeof e?e():e)||document.body}(e);return Object(U.createPortal)(t,n)}return t}const W="${label} is not a valid ${type}",Y="${label}不是一个有效的${type}",$=function(e,t){return function e(t,n){if("object"!=typeof t||"object"!=typeof n||Array.isArray(t)||Array.isArray(n))return void 0!==n?n:t;const r={};for(const o in t)t.hasOwnProperty(o)&&(r[o]=e(t[o],n[o]));return r}(e,t)}({locale:"en",common:{confirm:"Confirm",cancel:"Cancel",loading:"Loading"},Calendar:{markItems:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],renderYearAndMonth:(e,t)=>`${e}/${t}`},Cascader:{placeholder:"Selecting"},Dialog:{ok:"OK"},DatePicker:{tillNow:"Till Now"},ErrorBlock:{default:{title:"Oops, something went wrong",description:"Please wait a minute and try again"},busy:{title:"Oops, not loading",description:"Try to refresh the page"},disconnected:{title:"Network is busy",description:"Try to refresh the page"},empty:{title:"Hmm, couldn't find that...",description:"Want to try a new search?"}},Form:{required:"Required",optional:"Optional",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:W,method:W,array:W,object:W,number:W,date:W,boolean:W,integer:W,float:W,regexp:W,email:W,url:W,hex:W},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},ImageUploader:{uploading:"Uploading...",upload:"Upload"},InfiniteScroll:{noMore:"No more",failedToLoad:"Failed to load",retry:"Retry"},Input:{clear:"clear"},Mask:{name:"Mask"},Modal:{ok:"OK"},PasscodeInput:{name:"Passcode Input"},PullToRefresh:{pulling:"Scroll down to refresh",canRelease:"Release to refresh immediately",complete:"Refresh successful"},SearchBar:{name:"Search Bar"},Slider:{name:"Slider"},Stepper:{decrease:"decrease",increase:"increase"},Switch:{name:"Switch"}},{locale:"zh-CH",common:{confirm:"确定",cancel:"取消",loading:"加载中"},Calendar:{markItems:["一","二","三","四","五","六","日"],renderYearAndMonth:(e,t)=>`${e}年${t}月`},Cascader:{placeholder:"请选择"},Dialog:{ok:"我知道了"},DatePicker:{tillNow:"至今"},ErrorBlock:{default:{title:"页面遇到一些小问题",description:"待会来试试"},busy:{title:"前方拥堵",description:"刷新试试"},disconnected:{title:"网络有点忙",description:"动动手指帮忙修复"},empty:{title:"没有找到你需要的东西",description:"找找其他的吧"}},Form:{required:"必填",optional:"选填",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:Y,method:Y,array:Y,object:Y,number:Y,date:Y,boolean:Y,integer:Y,float:Y,regexp:Y,email:Y,url:Y,hex:Y},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},ImageUploader:{uploading:"上传中...",upload:"上传"},InfiniteScroll:{noMore:"没有更多了",failedToLoad:"加载失败",retry:"重新加载"},Input:{clear:"清除"},Mask:{name:"背景蒙层"},Modal:{ok:"我知道了"},PasscodeInput:{name:"密码输入框"},PullToRefresh:{pulling:"下拉刷新",canRelease:"释放立即刷新",complete:"刷新成功"},SearchBar:{name:"搜索框"},Slider:{name:"滑动输入条"},Stepper:{decrease:"减少",increase:"增加"},Switch:{name:"开关"}});const K={current:{locale:$}};function X(){return K.current}const Z=i.a.createContext(null);function Q(){var e;return null!==(e=Object(a.useContext)(Z))&&void 0!==e?e:X()}const J=e=>function(e,t,n){const r=function(e){const t=Object(a.useRef)(e);return e&&(t.current=!0),!!t.current}(e);return!!t||(!!e||!!r&&!n)}(e.active,e.forceRender,e.destroyOnClose)?e.children:null;const ee={click:"onClick"};function te(e,t){const n=Object.assign({},t.props);for(const r of e){const e=ee[r];n[e]=function(n){var r,o;n.stopPropagation(),null===(o=(r=t.props)[e])||void 0===o||o.call(r,n)}}return i.a.cloneElement(t,n)}const ne="adm-mask",re={default:.55,thin:.35,thick:.75},oe={black:"0, 0, 0",white:"255, 255, 255"},ae={visible:!0,destroyOnClose:!1,forceRender:!1,color:"black",opacity:"default",disableBodyScroll:!0,getContainer:null,stopPropagation:["click"]};var ie=e=>{const t=d(ae,e),{locale:n}=Q(),r=Object(a.useRef)(null);z(r,t.visible&&t.disableBodyScroll);const o=Object(a.useMemo)((()=>{var e;const n=null!==(e=re[t.opacity])&&void 0!==e?e:t.opacity,r=oe[t.color];return r?`rgba(${r}, ${n})`:t.color}),[t.color,t.opacity]),[l,c]=Object(a.useState)(t.visible),s=M(),{opacity:u}=Object(q.useSpring)({opacity:t.visible?1:0,config:{precision:.01,mass:1,tension:250,friction:30,clamp:!0},onStart:()=>{c(!0)},onRest:()=>{var e,n;s.current||(c(t.visible),t.visible?null===(e=t.afterShow)||void 0===e||e.call(t):null===(n=t.afterClose)||void 0===n||n.call(t))}}),p=te(t.stopPropagation,f(t,i.a.createElement(q.animated.div,{className:ne,ref:r,style:Object.assign(Object.assign({},t.style),{background:o,opacity:u,display:l?void 0:"none"}),onClick:e=>{var n;e.target===e.currentTarget&&(null===(n=t.onMaskClick)||void 0===n||n.call(t,e))}},t.onMaskClick&&i.a.createElement("div",{className:`${ne}-aria-button`,role:"button","aria-label":n.Mask.name,onClick:t.onMaskClick}),i.a.createElement("div",{className:`${ne}-content`},t.children))));return i.a.createElement(J,{active:l,forceRender:t.forceRender,destroyOnClose:t.destroyOnClose},G(t.getContainer,p))};var le=function(e){return a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),a.createElement("g",{id:"CloseOutline-CloseOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"CloseOutline-编组"},a.createElement("rect",{id:"CloseOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),a.createElement("path",{d:"M10.6085104,8.11754663 L24.1768397,21.8195031 L24.1768397,21.8195031 L37.7443031,8.1175556 C37.8194278,8.04168616 37.9217669,7.999 38.0285372,7.999 L41.1040268,7.999 C41.3249407,7.999 41.5040268,8.1780861 41.5040268,8.399 C41.5040268,8.50440471 41.4624226,8.60554929 41.3882578,8.68044752 L26.2773302,23.9408235 L26.2773302,23.9408235 L41.5021975,39.3175645 C41.65763,39.4745475 41.6563731,39.7278104 41.4993901,39.8832429 C41.4244929,39.9574004 41.3233534,39.999 41.2179546,39.999 L38.1434012,39.999 C38.0366291,39.999 37.9342885,39.9563124 37.8591634,39.8804408 L24.1768397,26.0621438 L24.1768397,26.0621438 L10.4936501,39.8804497 C10.4185257,39.9563159 10.3161889,39.999 10.2094212,39.999 L7.13584526,39.999 C6.91493136,39.999 6.73584526,39.8199139 6.73584526,39.599 C6.73584526,39.4936017 6.77744443,39.3924627 6.85160121,39.3175656 L22.0763492,23.9408235 L22.0763492,23.9408235 L6.96554081,8.68044639 C6.81010226,8.52346929 6.81134951,8.27020637 6.9683266,8.11476782 C7.04322474,8.04060377 7.14436883,7.999 7.24977299,7.999 L10.3242852,7.999 C10.4310511,7.999 10.5333863,8.04168267 10.6085104,8.11754663 Z",id:"CloseOutline-路径",fill:"currentColor",fillRule:"nonzero"}))))};const ce={closeOnMaskClick:!1,destroyOnClose:!1,disableBodyScroll:!0,forceRender:!1,getContainer:()=>document.body,mask:!0,showCloseButton:!1,stopPropagation:["click"],visible:!1};function se(e){const[t,n]=Object(a.useState)(e);return P((()=>{n(e)}),[e]),t}const ue="adm-popup",de=Object.assign(Object.assign({},ce),{position:"bottom"});var fe=e=>{const t=d(de,e),n=c()(`${ue}-body`,t.bodyClassName,`${ue}-body-position-${t.position}`),[r,o]=Object(a.useState)(t.visible);P((()=>{t.visible&&o(!0)}),[t.visible]);const l=Object(a.useRef)(null);z(l,!(!t.disableBodyScroll||!r)&&"strict");const s=M(),{percent:u}=Object(q.useSpring)({percent:t.visible?0:100,config:{precision:.1,mass:.4,tension:300,friction:30},onRest:()=>{var e,n;s.current||(o(t.visible),t.visible?null===(e=t.afterShow)||void 0===e||e.call(t):null===(n=t.afterClose)||void 0===n||n.call(t))}}),p=se(r&&t.visible),h=te(t.stopPropagation,f(t,i.a.createElement("div",{className:ue,onClick:t.onClick,style:{display:r?void 0:"none"}},t.mask&&i.a.createElement(ie,{visible:p,forceRender:t.forceRender,destroyOnClose:t.destroyOnClose,onMaskClick:e=>{var n,r;null===(n=t.onMaskClick)||void 0===n||n.call(t,e),t.closeOnMaskClick&&(null===(r=t.onClose)||void 0===r||r.call(t))},className:t.maskClassName,style:t.maskStyle,disableBodyScroll:!1,stopPropagation:t.stopPropagation}),i.a.createElement(q.animated.div,{className:n,style:Object.assign(Object.assign({},t.bodyStyle),{transform:u.to((e=>"bottom"===t.position?`translate(0, ${e}%)`:"top"===t.position?`translate(0, -${e}%)`:"left"===t.position?`translate(-${e}%, 0)`:"right"===t.position?`translate(${e}%, 0)`:"none"))}),ref:l},t.showCloseButton&&i.a.createElement("a",{className:c()(`${ue}-close-icon`,"adm-plain-anchor"),onClick:()=>{var e;null===(e=t.onClose)||void 0===e||e.call(t)}},i.a.createElement(le,null)),t.children))));return i.a.createElement(J,{active:r,forceRender:t.forceRender,destroyOnClose:t.destroyOnClose},G(t.getContainer,h))},pe=n(1175);function he(e,t,n){let r=e;return void 0!==t&&(r=Math.max(e,t)),void 0!==n&&(r=Math.min(r,n)),r}function me(e,t,n){return e*t*n/(t+n*e)}function ve(e,t,n,r,o=.15){return 0===o?he(e,t,n):e<t?-me(t-e,r,o)+t:e>n?+me(e-n,r,o)+n:e}var ge=n(127),be=n.n(ge);const ye="adm-picker-view",we=Object(a.memo)((e=>{const{value:t,column:n,renderLabel:r}=e;function o(t){e.onSelect(t,e.index)}const[{y:l},c]=Object(q.useSpring)((()=>({from:{y:0},config:{tension:400,mass:.8}}))),s=Object(a.useRef)(!1),u=Object(a.useRef)(null),d=Object(a.useRef)(null),f=Object(a.useRef)(34);function p(e){const t=e*-f.current;c.start({y:t});const r=n[e];r&&o(r.value)}P((()=>{const e=d.current;e&&(f.current=function(e){if(null==e||""===e)return 0;const t=e.trim();return t.endsWith("px")?parseFloat(t):t.endsWith("rem")?parseFloat(t)*parseFloat(window.getComputedStyle(document.documentElement).fontSize):t.endsWith("vw")?parseFloat(t)*window.innerWidth/100:0}(window.getComputedStyle(e).getPropertyValue("height")))})),P((()=>{if(s.current)return;if(null===t)return;const e=n.findIndex((e=>e.value===t));if(e<0)return;const r=e*-f.current;c.start({y:r,immediate:l.goal!==r})}),[t,n]),P((()=>{if(0===n.length)null!==t&&o(null);else if(!n.some((e=>e.value===t))){o(n[0].value)}}),[n,t]);const h=e=>{s.current=!0;const t=-(n.length-1)*f.current;if(e.last){s.current=!1;const n=e.offset[1]+e.velocity[1]*e.direction[1]*50;p(t<0?-Math.round(he(n,t,0)/f.current):0)}else{const n=e.offset[1];c.start({y:ve(n,t,0,50*f.current,.2)})}};Object(pe.useDrag)((e=>{e.event.stopPropagation(),h(e)}),{axis:"y",from:()=>[0,l.get()],filterTaps:!0,pointer:{touch:!0},target:u}),Object(pe.useWheel)((e=>{e.event.stopPropagation(),h(e)}),{axis:"y",from:()=>[0,l.get()],preventDefault:!0,target:e.mouseWheel?u:void 0,eventOptions:!!B&&{passive:!1}});let m=null;return i.a.createElement("div",{className:`${ye}-column`},i.a.createElement("div",{className:`${ye}-item-height-measure`,ref:d}),i.a.createElement(q.animated.div,{ref:u,style:{translateY:l},className:`${ye}-column-wheel`,"aria-hidden":!0},n.map(((n,o)=>{var a;const l=e.value===n.value;return l&&(m=o),i.a.createElement("div",{key:null!==(a=n.key)&&void 0!==a?a:n.value,"data-selected":n.value===t,className:`${ye}-column-item`,onClick:function(){s.current=!1,p(o)},"aria-hidden":!l,"aria-label":l?"active":""},i.a.createElement("div",{className:`${ye}-column-item-label`},r(n)))}))),function(){if(null===m)return null;const e=n[m],t=m-1,r=m+1,o=n[t],a=n[r];return i.a.createElement("div",{className:"adm-picker-view-column-accessible"},i.a.createElement("div",{className:"adm-picker-view-column-accessible-current",role:"button","aria-label":e?`当前选择的是：${e.label}`:"当前未选择"},"-"),i.a.createElement("div",{className:"adm-picker-view-column-accessible-button",onClick:()=>{o&&p(t)},role:o?"button":"text","aria-label":o?`选择上一项：${o.label}`:"没有上一项"},"-"),i.a.createElement("div",{className:"adm-picker-view-column-accessible-button",onClick:()=>{a&&p(r)},role:a?"button":"text","aria-label":a?`选择下一项：${a.label}`:"没有下一项"},"-"))}())}),((e,t)=>e.index===t.index&&(e.value===t.value&&(e.onSelect===t.onSelect&&(e.renderLabel===t.renderLabel&&(e.mouseWheel===t.mouseWheel&&!!be()(e.column,t.column)))))));function ke(e){let t=null;return()=>(null===t&&(t=e()),t)}function xe(e,t){const n=ke((()=>("function"==typeof e?e(t):e).map((e=>e.map((e=>"string"==typeof e?{label:e,value:e}:e)))))),r=ke((()=>t.map(((e,t)=>{var r;const o=n()[t];return o&&null!==(r=o.find((t=>t.value===e)))&&void 0!==r?r:null}))));return{get columns(){return n()},get items(){return r()}}}function Ee(e,t){return Object(a.useMemo)((()=>xe(e,t)),[e,t])}we.displayName="Wheel";var Ce=n(54),Oe=n.n(Ce);var _e=function(e){const t=Object(a.useRef)(e);return t.current=e,t};var Se=e=>{const t=_e(e);Object(a.useEffect)((()=>()=>{t.current()}),[])};var Re=function(e,t){var n;const r=_e(e),o=null!==(n=null==t?void 0:t.wait)&&void 0!==n?n:1e3,i=Object(a.useMemo)((()=>Oe()(((...e)=>r.current(...e)),o,t)),[]);return Se((()=>{i.cancel()})),{run:i,cancel:i.cancel,flush:i.flush}};const je=e=>(t,n)=>{const r=Object(a.useRef)(!1);e((()=>()=>{r.current=!1}),[]),e((()=>{if(r.current)return t();r.current=!0}),n)};var Ae=je(a.useEffect);var Te=function(e,t,n){const[r,o]=Object(a.useState)({}),{run:i}=Re((()=>{o({})}),n);Object(a.useEffect)((()=>i()),t),Ae(e,[r])};const Le=e=>e.label;var De=n(1366);let Pe=!1;const Me=new Set;function Ne(){return Pe}const Ie="adm-spin-loading",Fe={default:"var(--adm-color-weak)",primary:"var(--adm-color-primary)",white:"var(--adm-color-white)"},Be={color:"default"};var Ve=Object(a.memo)((e=>{var t;const n=d(Be,e),r=Object(De.useSyncExternalStore)((e=>(Me.add(e),()=>{Me.delete(e)})),Ne),{percent:o}=Object(q.useSpring)({cancel:r,loop:{reverse:!0},from:{percent:80},to:{percent:30},config:{duration:1200}});return f(n,i.a.createElement(q.animated.div,{className:Ie,style:{"--color":null!==(t=Fe[n.color])&&void 0!==t?t:n.color,"--percent":o}},i.a.createElement("svg",{className:`${Ie}-svg`,viewBox:"0 0 32 32"},i.a.createElement(q.animated.circle,{className:`${Ie}-fill`,fill:"transparent",strokeWidth:"2",strokeDasharray:94.2477796076937,strokeDashoffset:o,strokeLinecap:"square",r:15,cx:16,cy:16}))))}));const He="adm-picker-view",ze={defaultValue:[],renderLabel:Le,mouseWheel:!1,loadingContent:i.a.createElement("div",{className:`${He}-loading-content`},i.a.createElement(Ve,null))},qe=Object(a.memo)((e=>{const t=d(ze,e),[n,r]=Object(a.useState)(void 0===t.value?t.defaultValue:t.value);Object(a.useEffect)((()=>{void 0!==t.value&&t.value!==n&&r(t.value)}),[t.value]),Object(a.useEffect)((()=>{if(t.value===n)return;const e=window.setTimeout((()=>{void 0!==t.value&&t.value!==n&&r(t.value)}),1e3);return()=>{window.clearTimeout(e)}}),[t.value,n]);const o=Ee(t.columns,n),l=o.columns;Te((()=>{var e;t.value!==n&&(null===(e=t.onChange)||void 0===e||e.call(t,n,o))}),[n],{wait:0,leading:!1,trailing:!0});const c=Object(a.useCallback)(((e,t)=>{r((n=>{const r=[...n];return r[t]=e,r}))}),[]);return f(t,i.a.createElement("div",{className:`${He}`},t.loading?t.loadingContent:i.a.createElement(i.a.Fragment,null,l.map(((e,r)=>i.a.createElement(we,{key:r,index:r,column:e,value:n[r],onSelect:c,renderLabel:t.renderLabel,mouseWheel:t.mouseWheel}))),i.a.createElement("div",{className:`${He}-mask`},i.a.createElement("div",{className:`${He}-mask-top`}),i.a.createElement("div",{className:`${He}-mask-middle`}),i.a.createElement("div",{className:`${He}-mask-bottom`})))))}));qe.displayName="PickerView";var Ue=qe;const Ge="adm-safe-area";var We=e=>f(e,i.a.createElement("div",{className:c()(Ge,`${Ge}-position-${e.position}`)}));const Ye="adm-picker",$e={defaultValue:[],closeOnMaskClick:!0,renderLabel:Le,destroyOnClose:!1,forceRender:!1},Ke=Object(a.memo)(Object(a.forwardRef)(((e,t)=>{var n;const{locale:r}=Q(),o=d($e,{confirmText:r.common.confirm,cancelText:r.common.cancel},e),[l,s]=O({value:o.visible,defaultValue:!1,onChange:e=>{var t;!1===e&&(null===(t=o.onClose)||void 0===t||t.call(o))}}),u={toggle:()=>{s((e=>!e))},open:()=>{s(!0)},close:()=>{s(!1)}};Object(a.useImperativeHandle)(t,(()=>u));const[p,h]=O(Object.assign(Object.assign({},o),{onChange:e=>{var t;const n=xe(o.columns,e);null===(t=o.onConfirm)||void 0===t||t.call(o,e,n)}})),m=Ee(o.columns,p),[v,g]=Object(a.useState)(p);Object(a.useEffect)((()=>{v!==p&&g(p)}),[l]),Object(a.useEffect)((()=>{l||g(p)}),[p]);const b=C(((e,t)=>{var n;g(e),l&&(null===(n=o.onSelect)||void 0===n||n.call(o,e,t))})),y=f(o,i.a.createElement("div",{className:Ye},i.a.createElement("div",{className:`${Ye}-header`},i.a.createElement("a",{role:"button",className:`${Ye}-header-button`,onClick:()=>{var e;null===(e=o.onCancel)||void 0===e||e.call(o),s(!1)}},o.cancelText),i.a.createElement("div",{className:`${Ye}-header-title`},o.title),i.a.createElement("a",{role:"button",className:c()(`${Ye}-header-button`,o.loading&&`${Ye}-header-button-disabled`),onClick:()=>{o.loading||(h(v,!0),s(!1))},"aria-disabled":o.loading},o.confirmText)),i.a.createElement("div",{className:`${Ye}-body`},i.a.createElement(Ue,{loading:o.loading,loadingContent:o.loadingContent,columns:o.columns,renderLabel:o.renderLabel,value:v,mouseWheel:o.mouseWheel,onChange:b})))),w=i.a.createElement(fe,{style:o.popupStyle,className:c()(`${Ye}-popup`,o.popupClassName),visible:l,position:"bottom",onMaskClick:()=>{var e;o.closeOnMaskClick&&(null===(e=o.onCancel)||void 0===e||e.call(o),s(!1))},getContainer:o.getContainer,destroyOnClose:o.destroyOnClose,afterShow:o.afterShow,afterClose:o.afterClose,onClick:o.onClick,forceRender:o.forceRender,stopPropagation:o.stopPropagation},y,i.a.createElement(We,{position:"bottom"}));return i.a.createElement(i.a.Fragment,null,w,null===(n=o.children)||void 0===n?void 0:n.call(o,m.items,u))})));Ke.displayName="Picker";const Xe=Object.assign({},U),{version:Ze,render:Qe,unmountComponentAtNode:Je}=Xe;let et;try{Number((Ze||"").split(".")[0])>=18&&Xe.createRoot&&(et=Xe.createRoot)}catch(e){}function tt(e){const{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:t}=Xe;t&&"object"==typeof t&&(t.usingClientEntryPoint=e)}const nt="__antd_mobile_root__";function rt(e,t){et?function(e,t){tt(!0);const n=t[nt]||et(t);tt(!1),n.render(e),t[nt]=n}(e,t):function(e,t){Qe(e,t)}(e,t)}function ot(e){return et?function(e){return Object(o.__awaiter)(this,void 0,void 0,(function*(){return Promise.resolve().then((()=>{var t;null===(t=e[nt])||void 0===t||t.unmount(),delete e[nt]}))}))}(e):function(e){return Je(e)}(e)}function at(e){const t=document.createElement("div");return document.body.appendChild(t),rt(e,t),function(){ot(t)&&t.parentNode&&t.parentNode.removeChild(t)}}var it=w(Ke,{prompt:function(e){return new Promise((t=>{const n=at(i.a.createElement((()=>{const[r,o]=Object(a.useState)(!1);return Object(a.useEffect)((()=>{o(!0)}),[]),i.a.createElement(Ke,Object.assign({},e,{visible:r,onConfirm:(n,r)=>{var o;null===(o=e.onConfirm)||void 0===o||o.call(e,n,r),t(n)},onClose:()=>{var n;null===(n=e.onClose)||void 0===n||n.call(e),o(!1),t(null)},afterClose:()=>{var t;null===(t=e.afterClose)||void 0===t||t.call(e),n()}}))}),null))}))}}),lt=n(96),ct=n.n(lt),st=n(965),ut=n.n(st),dt=n(966),ft=n.n(dt),pt=n(967),ht=n.n(pt);const mt="TILL_NOW";ct.a.extend(ut.a),ct.a.extend(ft.a),ct.a.extend(ht.a);const vt={year:0,month:1,day:2,hour:3,minute:4,second:5};function gt(e){var t,n,r,o,a,i;const l=null!==(t=e[0])&&void 0!==t?t:"1900",c=null!==(n=e[1])&&void 0!==n?n:"1",s=null!==(r=e[2])&&void 0!==r?r:"1",u=null!==(o=e[3])&&void 0!==o?o:"0",d=null!==(a=e[4])&&void 0!==a?a:"0",f=null!==(i=e[5])&&void 0!==i?i:"0";return new Date(parseInt(l),parseInt(c)-1,parseInt(s),parseInt(u),parseInt(d),parseInt(f))}ct.a.extend(ut.a),ct.a.extend(ft.a),ct.a.extend(ht.a);const bt={year:0,week:1,"week-day":2};function yt(e){var t,n,r;const o=null!==(t=e[0])&&void 0!==t?t:"1900",a=null!==(n=e[1])&&void 0!==n?n:"1",i=null!==(r=e[2])&&void 0!==r?r:"1";return ct()().year(parseInt(o)).isoWeek(parseInt(a)).isoWeekday(parseInt(i)).hour(0).minute(0).second(0).toDate()}const wt={year:1,month:2,day:3,hour:4,minute:5,second:6},kt=(e,t)=>{if(t.includes("week"))return function(e){if(!e)return[];const t=ct()(e);return[t.isoWeekYear().toString(),t.isoWeek().toString(),t.isoWeekday().toString()]}(e);{const n=t,r=function(e){return e?[e.getFullYear().toString(),(e.getMonth()+1).toString(),e.getDate().toString(),e.getHours().toString(),e.getMinutes().toString(),e.getSeconds().toString()]:[]}(e);return r.slice(0,wt[n])}},xt=(e,t)=>{if((null==e?void 0:e[0])===mt){const e=new Date;return e.tillNow=!0,e}return t.includes("week")?yt(e):gt(e)},Et=(e,t,n,r,o,a,i)=>r.startsWith("week")?function(e,t,n,r,o,a){const i=[],l=t.getFullYear(),c=n.getFullYear(),s=bt[r],u=parseInt(e[0]),d=u===l,f=u===c,p=ct()(t),h=ct()(n),m=p.isoWeek(),v=h.isoWeek(),g=p.isoWeekday(),b=h.isoWeekday(),y=parseInt(e[1]),w=d&&y===m,k=f&&y===v,x=ct()(`${u}-01-01`).isoWeeksInYear(),E=(t,n,r)=>{let o=[];for(let e=t;e<=n;e++)o.push(e);const i=e.slice(0,bt[r]),l=null==a?void 0:a[r];return l&&"function"==typeof l&&(o=o.filter((e=>l(e,{get date(){return yt([...i,e.toString()])}})))),o};if(s>=bt.year){const e=E(l,c,"year");i.push(e.map((e=>({label:o("year",e),value:e.toString()}))))}if(s>=bt.week){const e=E(d?m:1,f?v:x,"week");i.push(e.map((e=>({label:o("week",e),value:e.toString()}))))}if(s>=bt["week-day"]){const e=E(w?g:1,k?b:7,"week-day");i.push(e.map((e=>({label:o("week-day",e),value:e.toString()}))))}return i}(e,t,n,r,o,a):function(e,t,n,r,o,a,i){const l=[],c=t.getFullYear(),s=t.getMonth()+1,u=t.getDate(),d=t.getHours(),f=t.getMinutes(),p=t.getSeconds(),h=n.getFullYear(),m=n.getMonth()+1,v=n.getDate(),g=n.getHours(),b=n.getMinutes(),y=n.getSeconds(),w=vt[r],k=parseInt(e[0]),x=ct()(gt([e[0],e[1],"1"])),E=parseInt(e[1]),C=parseInt(e[2]),O=parseInt(e[3]),_=parseInt(e[4]),S=k===c,R=k===h,j=S&&E===s,A=R&&E===m,T=j&&C===u,L=A&&C===v,D=T&&O===d,P=L&&O===g,M=D&&_===f,N=P&&_===b,I=(t,n,r)=>{let o=[];for(let e=t;e<=n;e++)o.push(e);const i=e.slice(0,vt[r]),l=null==a?void 0:a[r];return l&&"function"==typeof l&&(o=o.filter((e=>l(e,{get date(){return gt([...i,e.toString()])}})))),o};if(w>=vt.year){const e=I(c,h,"year");l.push(e.map((e=>({label:o("year",e),value:e.toString()}))))}if(w>=vt.month){const e=I(S?s:1,R?m:12,"month");l.push(e.map((e=>({label:o("month",e),value:e.toString()}))))}if(w>=vt.day){const e=I(j?u:1,A?v:x.daysInMonth(),"day");l.push(e.map((e=>({label:o("day",e),value:e.toString()}))))}if(w>=vt.hour){const e=I(T?d:0,L?g:23,"hour");l.push(e.map((e=>({label:o("hour",e),value:e.toString()}))))}if(w>=vt.minute){const e=I(D?f:0,P?b:59,"minute");l.push(e.map((e=>({label:o("minute",e),value:e.toString()}))))}if(w>=vt.second){const e=I(M?p:0,N?y:59,"second");l.push(e.map((e=>({label:o("second",e),value:e.toString()}))))}if(i&&(l[0].push({label:o("now",null),value:mt}),mt===(null==e?void 0:e[0])))for(let e=1;e<l.length;e+=1)l[e]=[];return l}(e,t,n,r,o,a,i);const Ct=(new Date).getFullYear(),Ot={min:new Date((new Date).setFullYear(Ct-10)),max:new Date((new Date).setFullYear(Ct+10)),precision:"day",defaultValue:null},_t=Object(a.forwardRef)(((e,t)=>{const n=d(Ot,e),{renderLabel:r}=n,[o,l]=O({value:n.value,defaultValue:n.defaultValue,onChange:e=>{var t;null!==e&&(null===(t=n.onConfirm)||void 0===t||t.call(n,e))}}),c=Object(a.useMemo)((()=>new Date),[]),s=function(e){const{locale:t}=Q();return Object(a.useCallback)(((n,r)=>{if(e)return e(n,r);switch(n){case"minute":case"second":case"hour":return("0"+r.toString()).slice(-2);case"now":return t.DatePicker.tillNow;default:return r.toString()}}),[e])}(r),u=Object(a.useMemo)((()=>{let e=null!=o?o:c;return e.tillNow?[mt]:(e=new Date(he(e.getTime(),n.min.getTime(),n.max.getTime())),kt(e,n.precision))}),[o,n.precision,n.min,n.max]),p=Object(a.useCallback)((e=>{const t=xt(e,n.precision);l(t,!0)}),[l,n.precision]),h=C((e=>{var t;const r=xt(e,n.precision);null===(t=n.onSelect)||void 0===t||t.call(n,r)})),m=Object(a.useCallback)((e=>Et(e,n.min,n.max,n.precision,s,n.filter,n.tillNow)),[n.min,n.max,n.precision,s,n.tillNow]);return f(n,i.a.createElement(it,{ref:t,columns:m,value:u,onCancel:n.onCancel,onClose:n.onClose,closeOnMaskClick:n.closeOnMaskClick,visible:n.visible,confirmText:n.confirmText,cancelText:n.cancelText,onConfirm:p,onSelect:h,getContainer:n.getContainer,loading:n.loading,loadingContent:n.loadingContent,afterShow:n.afterShow,afterClose:n.afterClose,onClick:n.onClick,title:n.title,stopPropagation:n.stopPropagation,mouseWheel:n.mouseWheel,destroyOnClose:n.destroyOnClose,forceRender:n.forceRender},((e,t)=>{var r;return null===(r=n.children)||void 0===r?void 0:r.call(n,o,t)})))}));var St=w(_t,{prompt:function(e){return new Promise((t=>{const n=at(i.a.createElement((()=>{const[r,o]=Object(a.useState)(!1);return Object(a.useEffect)((()=>{o(!0)}),[]),i.a.createElement(_t,Object.assign({},e,{visible:r,onConfirm:n=>{var r;null===(r=e.onConfirm)||void 0===r||r.call(e,n),t(n)},onClose:()=>{var n;null===(n=e.onClose)||void 0===n||n.call(e),o(!1),t(null)},afterClose:()=>{var t;null===(t=e.afterClose)||void 0===t||t.call(e),n()}}))}),null))}))},DATE_NOW:mt});var Rt=function(e){return a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),a.createElement("g",{id:"CloseCircleFill-CloseCircleFill",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"CloseCircleFill-编组"},a.createElement("rect",{id:"CloseCircleFill-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),a.createElement("path",{d:"M24,2 C36.1502645,2 46,11.8497355 46,24 C46,36.1502645 36.1502645,46 24,46 C11.8497355,46 2,36.1502645 2,24 C2,11.8497355 11.8497355,2 24,2 Z M18.6753876,16 L15.5637812,16 C15.4576916,16 15.3559474,16.0421451 15.2809323,16.1171635 C15.124726,16.2733766 15.1247316,16.5266426 15.2809447,16.6828489 L15.2809447,16.6828489 L22.299066,23.7006641 L14.6828159,31.3171619 C14.6078042,31.3921761 14.5656632,31.4939157 14.5656632,31.6 C14.5656632,31.8209139 14.7447493,32 14.9656632,32 L14.9656632,32 L18.0753284,32 C18.1814068,32 18.2831412,31.9578638 18.3581544,31.8828594 L18.3581544,31.8828594 L24.420066,25.8216641 L30.4818451,31.8828564 C30.5568585,31.9578626 30.6585942,32 30.7646741,32 L30.7646741,32 L33.8763476,32 C33.9824309,32 34.0841695,31.9578599 34.1591835,31.8828496 C34.315397,31.7266436 34.3154031,31.4733776 34.1591972,31.3171641 L34.1591972,31.3171641 L26.542066,23.6996641 L33.5591874,16.6828489 C33.6342057,16.6078338 33.6763508,16.5060896 33.6763508,16.4 C33.6763508,16.1790861 33.4972647,16 33.2763508,16 L33.2763508,16 L30.1637654,16 C30.0576705,16 29.9559218,16.0421493 29.8809058,16.1171741 L29.8809058,16.1171741 L24.420066,21.5786641 L18.9582218,16.1171488 C18.883208,16.0421394 18.7814701,16 18.6753876,16 L18.6753876,16 Z",id:"CloseCircleFill-形状结合",fill:"currentColor",fillRule:"nonzero"}))))};const jt="adm-input",At={defaultValue:"",onlyShowClearWhenFocus:!0};var Tt=Object(a.forwardRef)(((e,t)=>{const n=d(At,e),[o,l]=O(n),[s,u]=Object(a.useState)(!1),p=Object(a.useRef)(!1),h=Object(a.useRef)(null),{locale:m}=Q();Object(a.useImperativeHandle)(t,(()=>({clear:()=>{l("")},focus:()=>{var e;null===(e=h.current)||void 0===e||e.focus()},blur:()=>{var e;null===(e=h.current)||void 0===e||e.blur()},get nativeElement(){return h.current}})));P((()=>{var e;if(n.enterKeyHint)return null===(e=h.current)||void 0===e||e.setAttribute("enterkeyhint",n.enterKeyHint),()=>{var e;null===(e=h.current)||void 0===e||e.removeAttribute("enterkeyhint")}}),[n.enterKeyHint]);const v=!(!n.clearable||!o||n.readOnly)&&(!n.onlyShowClearWhenFocus||s);return f(n,i.a.createElement("div",{className:c()(`${jt}`,n.disabled&&`${jt}-disabled`)},i.a.createElement("input",{ref:h,className:`${jt}-element`,value:o,onChange:e=>{l(e.target.value)},onFocus:e=>{var t;u(!0),null===(t=n.onFocus)||void 0===t||t.call(n,e)},onBlur:e=>{var t;u(!1),function(){let e=o;"number"===n.type&&(e=e&&he(parseFloat(e),n.min,n.max).toString()),e!==o&&l(e)}(),null===(t=n.onBlur)||void 0===t||t.call(n,e)},id:n.id,placeholder:n.placeholder,disabled:n.disabled,readOnly:n.readOnly,maxLength:n.maxLength,minLength:n.minLength,max:n.max,min:n.min,autoComplete:n.autoComplete,autoFocus:n.autoFocus,pattern:n.pattern,inputMode:n.inputMode,type:n.type,name:n.name,autoCapitalize:n.autoCapitalize,autoCorrect:n.autoCorrect,onKeyDown:e=>{var t;!n.onEnterPress||"Enter"!==e.code&&13!==e.keyCode||n.onEnterPress(e),null===(t=n.onKeyDown)||void 0===t||t.call(n,e)},onKeyUp:n.onKeyUp,onCompositionStart:e=>{var t;p.current=!0,null===(t=n.onCompositionStart)||void 0===t||t.call(n,e)},onCompositionEnd:e=>{var t;p.current=!1,null===(t=n.onCompositionEnd)||void 0===t||t.call(n,e)},onClick:n.onClick,step:n.step,role:n.role,"aria-valuenow":n["aria-valuenow"],"aria-valuemax":n["aria-valuemax"],"aria-valuemin":n["aria-valuemin"],"aria-label":n["aria-label"]}),v&&i.a.createElement("div",{className:`${jt}-clear`,onMouseDown:e=>{e.preventDefault()},onClick:()=>{var e,t;l(""),null===(e=n.onClear)||void 0===e||e.call(n),r&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase())&&p.current&&(p.current=!1,null===(t=h.current)||void 0===t||t.blur())},"aria-label":m.Input.clear},i.a.createElement(Rt,null))))}));const Lt=e=>{const{action:t}=e;return f(e.action,i.a.createElement(y,{key:t.key,onClick:e.onAction,className:c()("adm-modal-button",{"adm-modal-button-primary":e.action.primary}),fill:e.action.primary?"solid":"none",size:e.action.primary?"large":"middle",block:!0,color:t.danger?"danger":"primary",loading:"auto",disabled:t.disabled},t.text))};var Dt=n(1367);function Pt(e){return"number"==typeof e?`${e}px`:e}n(1763);function Mt(e,t){if(!D)return;if(!e)return t;let n;return n=E(e)?e():"current"in e?e.current:e,n}function Nt(e,t){if(e===t)return!0;for(let n=0;n<e.length;n++)if(!Object.is(e[n],t[n]))return!1;return!0}var It=(e=>(t,n,r)=>{const o=Object(a.useRef)(!1),i=Object(a.useRef)([]),l=Object(a.useRef)([]),c=Object(a.useRef)();e((()=>{var e;const a=(Array.isArray(r)?r:[r]).map((e=>Mt(e)));if(!o.current)return o.current=!0,i.current=a,l.current=n,void(c.current=t());a.length===i.current.length&&Nt(a,i.current)&&Nt(n,l.current)||(null===(e=c.current)||void 0===e||e.call(c),i.current=a,l.current=n,c.current=t())})),Se((()=>{var e;null===(e=c.current)||void 0===e||e.call(c),o.current=!1}))})(a.useEffect);var Ft=function(e,t){const[n,r]=Object(a.useState)(),[o,i]=Object(a.useState)();return It((()=>{const n=Mt(e);if(!n)return;const o=new IntersectionObserver((e=>{for(const t of e)i(t.intersectionRatio),r(t.isIntersecting)}),Object.assign(Object.assign({},t),{root:Mt(null==t?void 0:t.root)}));return o.observe(n),()=>{o.disconnect()}}),[null==t?void 0:t.rootMargin,null==t?void 0:t.threshold],e),[n,o]};const Bt=e=>{const t=Object(a.useRef)(null),[n]=Ft(t);return Object(a.useEffect)((()=>{n&&e.onActive()}),[n]),i.a.createElement("div",{ref:t})},Vt=je(P),Ht="adm-image",zt={fit:"fill",placeholder:i.a.createElement("div",{className:`${Ht}-tip`},i.a.createElement((()=>i.a.createElement("svg",{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{d:"M41.396 6.234c1.923 0 3.487 1.574 3.487 3.505v29.14c0 1.937-1.568 3.51-3.491 3.51H6.604c-1.923 0-3.487-1.573-3.487-3.51V9.745c0-1.936 1.564-3.51 3.487-3.51Zm0 2.847H6.604c-.355 0-.654.3-.654.658V34.9l5.989-8.707a2.373 2.373 0 0 1 1.801-1.005 2.405 2.405 0 0 1 1.933.752l4.182 4.525 7.58-11.005a2.374 2.374 0 0 1 1.96-1.01c.79 0 1.532.38 1.966 1.01L42.05 34.89V9.74a.664.664 0 0 0-.654-.658Zm-28.305 2.763a3.119 3.119 0 0 1 3.117 3.117 3.119 3.119 0 0 1-3.117 3.117 3.122 3.122 0 0 1-3.117-3.117 3.119 3.119 0 0 1 3.117-3.117Z",fill:"#DBDBDB",fillRule:"nonzero"}))),null)),fallback:i.a.createElement("div",{className:`${Ht}-tip`},i.a.createElement((()=>i.a.createElement("svg",{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{d:"M19.233 6.233 17.42 9.08l-10.817.001a.665.665 0 0 0-.647.562l-.007.096V34.9l5.989-8.707a2.373 2.373 0 0 1 1.801-1.005 2.415 2.415 0 0 1 1.807.625l.126.127 4.182 4.525 2.267-3.292 5.461 7.841-4.065 7.375H6.604c-1.86 0-3.382-1.47-3.482-3.317l-.005-.192V9.744c0-1.872 1.461-3.405 3.296-3.505l.19-.005h12.63Zm22.163 0c1.86 0 3.382 1.472 3.482 3.314l.005.192v29.14a3.507 3.507 0 0 1-3.3 3.505l-.191.006H27.789l3.63-6.587.06-.119a1.87 1.87 0 0 0-.163-1.853l-6.928-9.949 3.047-4.422a2.374 2.374 0 0 1 1.96-1.01 2.4 2.4 0 0 1 1.86.87l.106.14L42.05 34.89V9.74a.664.664 0 0 0-.654-.658H21.855l1.812-2.848h17.73Zm-28.305 5.611c.794 0 1.52.298 2.07.788l-.843 1.325-.067.114a1.87 1.87 0 0 0 .11 1.959l.848 1.217c-.556.515-1.3.83-2.118.83a3.122 3.122 0 0 1-3.117-3.116 3.119 3.119 0 0 1 3.117-3.117Z",fill:"#DBDBDB",fillRule:"nonzero"}))),null)),lazy:!1,draggable:!1};var qt=Object(Dt.staged)((e=>{const t=d(zt,e),[n,r]=Object(a.useState)(!1),[o,l]=Object(a.useState)(!1),c=Object(a.useRef)(null);let s=t.src,u=t.srcSet;const[p,h]=Object(a.useState)(!t.lazy);s=p?t.src:void 0,u=p?t.srcSet:void 0,Vt((()=>{r(!1),l(!1)}),[s]);const m={};return t.width&&(m["--width"]=Pt(t.width),m.width=Pt(t.width)),t.height&&(m["--height"]=Pt(t.height),m.height=Pt(t.height)),f(t,i.a.createElement("div",{ref:c,className:Ht,style:m,onClick:t.onContainerClick},t.lazy&&!p&&i.a.createElement(Bt,{onActive:()=>{h(!0)}}),function(){if(o)return i.a.createElement(i.a.Fragment,null,t.fallback);const e=i.a.createElement("img",{className:`${Ht}-img`,src:s,alt:t.alt,onClick:t.onClick,onLoad:e=>{var n;r(!0),null===(n=t.onLoad)||void 0===n||n.call(t,e)},onError:e=>{var n;l(!0),null===(n=t.onError)||void 0===n||n.call(t,e)},style:{objectFit:t.fit,display:n?"block":"none"},crossOrigin:t.crossOrigin,decoding:t.decoding,loading:t.loading,referrerPolicy:t.referrerPolicy,sizes:t.sizes,srcSet:u,useMap:t.useMap,draggable:t.draggable});return i.a.createElement(i.a.Fragment,null,!n&&t.placeholder,e)}()))}));const Ut="adm-space",Gt={direction:"horizontal"};var Wt=e=>{const t=d(Gt,e),{direction:n,onClick:r}=t;return f(t,i.a.createElement("div",{className:c()(Ut,{[`${Ut}-wrap`]:t.wrap,[`${Ut}-block`]:t.block,[`${Ut}-${n}`]:!0,[`${Ut}-align-${t.align}`]:!!t.align,[`${Ut}-justify-${t.justify}`]:!!t.justify}),onClick:r},i.a.Children.map(t.children,(e=>null!=e&&i.a.createElement("div",{className:`${Ut}-item`},e)))))};const Yt="adm-auto-center";var $t=e=>f(e,i.a.createElement("div",{className:Yt},i.a.createElement("div",{className:`${Yt}-content`},e.children)));const Kt=Object.assign(Object.assign({},ce),{getContainer:null});var Xt=e=>{const t=d(Kt,e),n=M(),r=Object(q.useSpring)({scale:t.visible?1:.8,opacity:t.visible?1:0,config:{mass:1.2,tension:200,friction:25,clamp:!0},onRest:()=>{var e,r;n.current||(l(t.visible),t.visible?null===(e=t.afterShow)||void 0===e||e.call(t):null===(r=t.afterClose)||void 0===r||r.call(t))}}),[o,l]=Object(a.useState)(t.visible);P((()=>{t.visible&&l(!0)}),[t.visible]);const s=Object(a.useRef)(null);z(s,t.disableBodyScroll&&o);const u=se(o&&t.visible),p=i.a.createElement("div",{className:c()("adm-center-popup-body",t.bodyClassName),style:t.bodyStyle},t.children),h=te(t.stopPropagation,f(t,i.a.createElement("div",{className:"adm-center-popup",style:{display:o?void 0:"none",pointerEvents:o?void 0:"none"}},t.mask&&i.a.createElement(ie,{visible:u,forceRender:t.forceRender,destroyOnClose:t.destroyOnClose,onMaskClick:e=>{var n,r;null===(n=t.onMaskClick)||void 0===n||n.call(t,e),t.closeOnMaskClick&&(null===(r=t.onClose)||void 0===r||r.call(t))},style:t.maskStyle,className:c()("adm-center-popup-mask",t.maskClassName),disableBodyScroll:!1,stopPropagation:t.stopPropagation}),i.a.createElement("div",{className:"adm-center-popup-wrap",role:t.role,"aria-label":t["aria-label"]},i.a.createElement(q.animated.div,{style:r,ref:s},t.showCloseButton&&i.a.createElement("a",{className:c()("adm-center-popup-close","adm-plain-anchor"),onClick:()=>{var e;null===(e=t.onClose)||void 0===e||e.call(t)}},i.a.createElement(le,null)),p)))));return i.a.createElement(J,{active:o,forceRender:t.forceRender,destroyOnClose:t.destroyOnClose},G(t.getContainer,h))};const Zt={actions:[],closeOnAction:!1,closeOnMaskClick:!1,getContainer:null},Qt=e=>{const t=d(Zt,e),n=i.a.createElement(i.a.Fragment,null,!!t.image&&i.a.createElement("div",{className:Jt("image-container")},i.a.createElement(qt,{src:t.image,alt:"modal header image",width:"100%"})),!!t.header&&i.a.createElement("div",{className:Jt("header")},i.a.createElement($t,null,t.header)),!!t.title&&i.a.createElement("div",{className:Jt("title")},t.title),i.a.createElement("div",{className:Jt("content")},"string"==typeof t.content?i.a.createElement($t,null,t.content):t.content),i.a.createElement(Wt,{direction:"vertical",block:!0,className:c()(Jt("footer"),0===t.actions.length&&Jt("footer-empty"))},t.actions.map(((e,n)=>i.a.createElement(Lt,{key:e.key,action:e,onAction:()=>Object(o.__awaiter)(void 0,void 0,void 0,(function*(){var r,o,a;yield Promise.all([null===(r=e.onClick)||void 0===r?void 0:r.call(e),null===(o=t.onAction)||void 0===o?void 0:o.call(t,e,n)]),t.closeOnAction&&(null===(a=t.onClose)||void 0===a||a.call(t))}))})))));return i.a.createElement(Xt,{className:c()(Jt(),t.className),style:t.style,afterClose:t.afterClose,afterShow:t.afterShow,showCloseButton:t.showCloseButton,closeOnMaskClick:t.closeOnMaskClick,onClose:t.onClose,visible:t.visible,getContainer:t.getContainer,bodyStyle:t.bodyStyle,bodyClassName:c()(Jt("body"),t.image&&Jt("with-image"),t.bodyClassName),maskStyle:t.maskStyle,maskClassName:t.maskClassName,stopPropagation:t.stopPropagation,disableBodyScroll:t.disableBodyScroll,destroyOnClose:t.destroyOnClose,forceRender:t.forceRender},n)};function Jt(e=""){return"adm-modal"+(e&&"-")+e}function en(e){const t=i.a.forwardRef(((t,n)=>{const[o,l]=Object(a.useState)(!1),c=Object(a.useRef)(!1),[s,u]=Object(a.useState)(e),d=Object(a.useRef)(0);function f(){var e,t;c.current=!0,l(!1),null===(t=(e=s.props).onClose)||void 0===t||t.call(e)}function p(){var e,t;r(),null===(t=(e=s.props).afterClose)||void 0===t||t.call(e)}return Object(a.useEffect)((()=>{c.current?p():l(!0)}),[]),Object(a.useImperativeHandle)(n,(()=>({close:f,replace:e=>{var t,n;d.current++,null===(n=(t=s.props).afterClose)||void 0===n||n.call(t),u(e)}}))),i.a.cloneElement(s,Object.assign(Object.assign({},s.props),{key:d.current,visible:o,onClose:f,afterClose:p}))})),n=i.a.createRef(),r=at(i.a.createElement(t,{ref:n}));return{close:()=>{var e;null===(e=n.current)||void 0===e||e.close()},replace:e=>{var t;null===(t=n.current)||void 0===t||t.replace(e)}}}const tn=new Set;function nn(e){const t=en(i.a.createElement(Qt,Object.assign({},e,{afterClose:()=>{var n;tn.delete(t.close),null===(n=e.afterClose)||void 0===n||n.call(e)}})));return tn.add(t.close),t}const rn={confirmText:"确认",cancelText:"取消"};var on=w(Qt,{show:nn,alert:function(e){const t=d({confirmText:X().locale.Modal.ok},e);return new Promise((e=>{nn(Object.assign(Object.assign({},t),{closeOnAction:!0,actions:[{key:"confirm",text:t.confirmText,primary:!0}],onAction:t.onConfirm,onClose:()=>{var n;null===(n=t.onClose)||void 0===n||n.call(t),e()}}))}))},confirm:function(e){const{locale:t}=X(),n=d(rn,{confirmText:t.common.confirm,cancelText:t.common.cancel},e);return new Promise((e=>{nn(Object.assign(Object.assign({},n),{closeOnAction:!0,onClose:()=>{var t;null===(t=n.onClose)||void 0===t||t.call(n),e(!1)},actions:[{key:"confirm",text:n.confirmText,primary:!0,onClick:()=>Object(o.__awaiter)(this,void 0,void 0,(function*(){var t;yield null===(t=n.onConfirm)||void 0===t?void 0:t.call(n),e(!0)}))},{key:"cancel",text:n.cancelText,onClick:()=>Object(o.__awaiter)(this,void 0,void 0,(function*(){var t;yield null===(t=n.onCancel)||void 0===t?void 0:t.call(n),e(!1)}))}]}))}))},clear:function(){tn.forEach((e=>{e()}))}});const an=Object(a.createContext)(null),ln={disabled:!1,defaultValue:null},cn="adm-radio",sn={defaultChecked:!1};var un=w((e=>{const t=d(sn,e),n=Object(a.useContext)(an);let[r,o]=O({value:t.checked,defaultValue:t.defaultChecked,onChange:t.onChange}),l=t.disabled;const{value:s}=t;n&&void 0!==s&&(r=n.value.includes(s),o=e=>{var r;e?n.check(s):n.uncheck(s),null===(r=t.onChange)||void 0===r||r.call(t,e)},l=l||n.disabled);return f(t,i.a.createElement("label",{className:c()(cn,{[`${cn}-checked`]:r,[`${cn}-disabled`]:l,[`${cn}-block`]:t.block})},i.a.createElement(j,{type:"radio",checked:r,onChange:o,disabled:l,id:t.id}),t.icon?i.a.createElement("div",{className:`${cn}-custom-icon`},t.icon(r)):i.a.createElement("div",{className:`${cn}-icon`},r&&i.a.createElement(S,null)),t.children&&i.a.createElement("div",{className:`${cn}-content`},t.children)))}),{Group:e=>{const t=d(ln,e),[n,r]=O({value:t.value,defaultValue:t.defaultValue,onChange:e=>{var n;null!==e&&(null===(n=t.onChange)||void 0===n||n.call(t,e))}});return i.a.createElement(an.Provider,{value:{value:null===n?[]:[n],check:e=>{r(e)},uncheck:()=>{},disabled:t.disabled}},t.children)}});const dn=Object(a.memo)((e=>f(e,i.a.createElement("svg",{width:"28px",height:"28px",viewBox:"0 0 28 28"},i.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.a.createElement("g",{transform:"translate(-137.000000, -840.000000)",fill:"#1576FE"},i.a.createElement("g",{transform:"translate(80.000000, 823.000000)"},i.a.createElement("g",{transform:"translate(53.000000, 13.000000)"},i.a.createElement("path",{d:"M17.9996753,31.5 C10.5556724,31.5 4.5,25.4443275 4.5,18.0003247 C4.5,10.5563219 10.5556724,4.5 17.9996753,4.5 C18.5355492,4.5 18.9702974,4.93474816 18.9702974,5.47062208 C18.9702974,6.006496 18.5355492,6.44124416 17.9996753,6.44124416 C11.6261524,6.44124416 6.44124416,11.6267709 6.44124416,18.0002938 C6.44124416,24.3738167 11.6261524,29.5587249 17.9996753,29.5587249 C24.3731982,29.5587249 29.5587249,24.3738167 29.5587249,18.0002938 C29.5587249,14.7964616 28.2778291,11.8169616 25.9523687,9.61220279 C25.5637302,9.24317094 25.5473089,8.62893223 25.9157222,8.23967523 C26.2841356,7.84976878 26.8989928,7.83461537 27.2882498,8.20302872 C30.0042351,10.7787368 31.5,14.2580826 31.5,18.0002938 C31.5,25.4443275 25.4436781,31.5 17.9996753,31.5 Z"}))))))))),fn="adm-switch",pn={defaultChecked:!1};var hn=e=>{const t=d(pn,e),n=t.disabled||t.loading||!1,[r,l]=Object(a.useState)(!1),{locale:s}=Q(),[u,p]=O({value:t.checked,defaultValue:t.defaultChecked,onChange:t.onChange});return f(t,i.a.createElement("div",{onClick:function(){return Object(o.__awaiter)(this,void 0,void 0,(function*(){if(n||t.loading||r)return;const e=!u;if(t.beforeChange){l(!0);try{yield t.beforeChange(e),l(!1)}catch(e){throw l(!1),e}}const o=p(e);if(v(o)){l(!0);try{yield o,l(!1)}catch(e){throw l(!1),e}}}))},className:c()(fn,{[`${fn}-checked`]:u,[`${fn}-disabled`]:n||r}),role:"switch","aria-label":s.Switch.name,"aria-checked":u,"aria-disabled":n},i.a.createElement("div",{className:`${fn}-checkbox`},i.a.createElement("div",{className:`${fn}-handle`},(t.loading||r)&&i.a.createElement(dn,{className:`${fn}-spin-icon`})),i.a.createElement("div",{className:`${fn}-inner`},u?t.checkedText:t.uncheckedText))))};var mn=function(e){return a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),a.createElement("g",{id:"CheckOutline-CheckOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"CheckOutline-编组"},a.createElement("rect",{id:"CheckOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),a.createElement("path",{d:"M44.309608,12.6841286 L21.2180499,35.5661955 L21.2180499,35.5661955 C20.6343343,36.1446015 19.6879443,36.1446015 19.1042286,35.5661955 C19.0538201,35.5162456 19.0077648,35.4636155 18.9660627,35.4087682 C18.9113105,35.368106 18.8584669,35.3226694 18.808302,35.2729607 L3.6903839,20.2920499 C3.53346476,20.1365529 3.53231192,19.8832895 3.68780898,19.7263704 C3.7629255,19.6505669 3.86521855,19.6079227 3.97193622,19.6079227 L7.06238923,19.6079227 C7.16784214,19.6079227 7.26902895,19.6495648 7.34393561,19.7237896 L20.160443,32.4236157 L20.160443,32.4236157 L40.656066,12.115858 C40.7309719,12.0416387 40.8321549,12 40.9376034,12 L44.0280571,12 C44.248971,12 44.4280571,12.1790861 44.4280571,12.4 C44.4280571,12.5067183 44.3854124,12.609012 44.309608,12.6841286 Z",id:"CheckOutline-路径",fill:"currentColor",fillRule:"nonzero"}))))};const vn="adm-toast",gn={maskClickable:!0,stopPropagation:["click"]},bn=e=>{const t=d(gn,e),{maskClickable:n,content:r,icon:o,position:l}=t,s=Object(a.useMemo)((()=>{if(null==o)return null;switch(o){case"success":return i.a.createElement(mn,{className:`${vn}-icon-success`});case"fail":return i.a.createElement(le,{className:`${vn}-icon-fail`});case"loading":return i.a.createElement(Ve,{color:"white",className:`${vn}-loading`});default:return o}}),[o]),u=Object(a.useMemo)((()=>{switch(l){case"top":return"20%";case"bottom":return"80%";default:return"50%"}}),[l]);return i.a.createElement(ie,{visible:t.visible,destroyOnClose:!0,opacity:0,disableBodyScroll:!n,getContainer:t.getContainer,afterClose:t.afterClose,style:Object.assign({pointerEvents:n?"none":"auto"},t.maskStyle),className:c()(`${vn}-mask`,t.maskClassName),stopPropagation:t.stopPropagation},i.a.createElement("div",{className:c()(`${vn}-wrap`)},i.a.createElement("div",{style:{top:u},className:c()(`${vn}-main`,o?`${vn}-main-icon`:`${vn}-main-text`)},s&&i.a.createElement("div",{className:`${vn}-icon`},s),i.a.createElement($t,null,r))))};let yn=null,wn=null;const kn={duration:2e3,position:"center",maskClickable:!0},xn=e=>i.a.createElement(bn,Object.assign({},e));function En(){null==yn||yn.close(),yn=null}var Cn={show:function(e){const t=d(kn,"string"==typeof e?{content:e}:e),n=i.a.createElement(xn,Object.assign({},t,{onClose:()=>{yn=null}}));return yn?yn.replace(n):yn=en(n),wn&&window.clearTimeout(wn),0!==t.duration&&(wn=window.setTimeout((()=>{En()}),t.duration)),yn},clear:En,config:function(e){void 0!==e.duration&&(kn.duration=e.duration),void 0!==e.position&&(kn.position=e.position),void 0!==e.maskClickable&&(kn.maskClickable=e.maskClickable)}}},1366:function(e,t,n){"use strict";e.exports=n(1762)},1367:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.staged=void 0;const o=r(n(0));function a(e){return"function"==typeof e?o.default.createElement(i,{stage:e}):e}function i(e){return a(e.stage())}t.staged=function(e){return function(t,n){return a(e(t,n))}}},1412:function(e,t,n){var r=n(290),o=n(249),a=n(224),i=n(1089),l=n(1414),c=n(237),s=n(1415),u=n(240),d=n(76);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return d(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[u];var f=-1;t=r(t,c(a));var p=i(e,(function(e,n,o){return{criteria:r(t,(function(t){return t(e)})),index:++f,value:e}}));return l(p,(function(e,t){return s(e,t,n)}))}},1414:function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},1415:function(e,t,n){var r=n(1416);e.exports=function(e,t,n){for(var o=-1,a=e.criteria,i=t.criteria,l=a.length,c=n.length;++o<l;){var s=r(a[o],i[o]);if(s)return o>=c?s:s*("desc"==n[o]?-1:1)}return e.index-t.index}},1416:function(e,t,n){var r=n(202);e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,a=e==e,i=r(e),l=void 0!==t,c=null===t,s=t==t,u=r(t);if(!c&&!u&&!i&&e>t||i&&l&&s&&!c&&!u||o&&l&&s||!n&&s||!a)return 1;if(!o&&!i&&!u&&e<t||u&&n&&a&&!o&&!i||c&&n&&a||!l&&a||!s)return-1}return 0}},1417:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(0),o=n.n(r),a=n(109),i=n(164);function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=a.a.LOCAL_DOC_EXT_PAID,u=a.a.FILE_EXT_PAID,d=a.a.IMAGE_EXT_PAID,f=a.a.VIDEO_EXT_PAID,p=a.a.AUDIO_EXT_PAID,h=[].concat(l(s),l(u),l(d),l(f),l(p)),m=[].concat(l(u),l(d));function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=window.appData||{},a=r.isYuque,l=r.organization,c=r.group,s=void 0===c?{}:c,u=r.me,d=void 0===u?{}:u,f=null==l?void 0:l.id;if(!a||Object(i.isPaid)()||!(n?m:h).includes(".".concat(e)))return __("不支持上传该类型文件");if(f){var p,v=null==l||null===(p=l.abilities)||void 0===p?void 0:p.destroy;return v?__("该附件格式为付费版空间权益，升级为付费版空间后可用"):__("该附件格式为付费版空间权益，联系管理员升级为付费版空间后可用")}if("Group"===s.type)return __("暂不支持此类型的格式");if(!t&&s.id!==d.id)return __("该附件格式为付费格式，联系知识库所有者开通会员后可上传");var g="pay_source=file_ext";window.openExternalLink&&(g+="&pay_referer=desktop_app");var b=l?"/r/organizations/dashboard/cashier":"/settings/member?".concat(g,"#renew");return o.a.createElement("span",{},[__("该附件格式为付费格式，开通会员后可上传"),o.a.createElement("a",{style:{marginLeft:5},rel:"noreferrer",href:b,target:"_blank",onClick:function(e){window.openExternalLink&&(window.openExternalLink(b,!0),e.preventDefault())}},[__("开通会员")])])}},1419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var r=l(n(889)),o=l(n(886)),a=l(n(236)),i=l(n(1411));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,i.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,a.default)(t)?(0,o.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,r.default)(t)&&n.push(t)})),n};t.default=c},1420:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var r=i(n(886)),o=i(n(75)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function i(e){return e&&e.__esModule?e:{default:e}}var l=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,o.default)(e.default)||{};return t.map((function(t){var o=e[t];return o&&(0,r.default)(o,(function(e,t){n[t]||(n[t]={}),n[t]=a({},n[t],o[t])})),t})),n};t.default=l},1421:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var r,o=n(886),a=(r=o)&&r.__esModule?r:{default:r},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var l={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},c=t.autoprefix=function(e){var t={};return(0,a.default)(e,(function(e,n){var r={};(0,a.default)(e,(function(e,t){var n=l[t];n?r=i({},r,n(e)):r[t]=e})),t[n]=r})),t};t.default=c},1422:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),i=(r=a)&&r.__esModule?r:{default:r};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,a,s;l(this,r);for(var u=arguments.length,d=Array(u),f=0;f<u;f++)d[f]=arguments[f];return a=s=c(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(d))),s.state={hover:!1},s.handleMouseOver=function(){return s.setState({hover:!0})},s.handleMouseOut=function(){return s.setState({hover:!1})},s.render=function(){return i.default.createElement(t,{onMouseOver:s.handleMouseOver,onMouseOut:s.handleMouseOut},i.default.createElement(e,o({},s.props,s.state)))},c(s,a)}return s(r,n),r}(i.default.Component)};t.default=u},1423:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),i=(r=a)&&r.__esModule?r:{default:r};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,a,s;l(this,r);for(var u=arguments.length,d=Array(u),f=0;f<u;f++)d[f]=arguments[f];return a=s=c(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(d))),s.state={active:!1},s.handleMouseDown=function(){return s.setState({active:!0})},s.handleMouseUp=function(){return s.setState({active:!1})},s.render=function(){return i.default.createElement(t,{onMouseDown:s.handleMouseDown,onMouseUp:s.handleMouseUp},i.default.createElement(e,o({},s.props,s.state)))},c(s,a)}return s(r,n),r}(i.default.Component)};t.default=u},1424:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2==0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n}},1425:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Alpha=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),i=u(a),l=u(n(129)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(390)),s=u(n(887));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=t.Alpha=function(e){function t(){var e,n,r;d(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleChange=function(e){var t=c.calculateChange(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=(0,l.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:r({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return i.default.createElement("div",{style:n.alpha},i.default.createElement("div",{style:n.checkboard},i.default.createElement(s.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:n.gradient}),i.default.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:n.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:n.slider}))))}}]),t}(a.PureComponent||a.Component);t.default=p},1426:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={},o=t.render=function(e,t,n,r){if("undefined"==typeof document&&!r)return null;var o=r?new r:document.createElement("canvas");o.width=2*n,o.height=2*n;var a=o.getContext("2d");return a?(a.fillStyle=e,a.fillRect(0,0,o.width,o.height),a.fillStyle=t,a.fillRect(0,0,n,n),a.translate(n,n),a.fillRect(0,0,n,n),o.toDataURL()):null};t.get=function(e,t,n,a){var i=e+"-"+t+"-"+n+(a?"-server":"");if(r[i])return r[i];var l=o(e,t,n,a);return r[i]=l,l}},1427:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableInput=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=l(o),i=l(n(129));function l(e){return e&&e.__esModule?e:{default:e}}var c=[38,40],s=1,u=t.EditableInput=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t,r=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(r)&&(t=e.keyCode,c.indexOf(t)>-1)){var o=n.getArrowOffset(),a=38===e.keyCode?r+o:r-o;n.setUpdatedValue(a,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n.inputId="rc-editable-input-"+s++,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return a.default.createElement("div",{style:t.wrap},a.default.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?a.default.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(o.PureComponent||o.Component);t.default=u},1428:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hue=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=c(o),i=c(n(129)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(391));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=t.Hue=function(e){function t(){var e,n,r;s(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleChange=function(e){var t=l.calculateChange(e,r.props.direction,r.props.hsl,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return a.default.createElement("div",{style:r.hue},a.default.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),a.default.createElement("div",{style:r.pointer},this.props.pointer?a.default.createElement(this.props.pointer,this.props):a.default.createElement("div",{style:r.slider}))))}}]),t}(o.PureComponent||o.Component);t.default=d},1429:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Raised=void 0;var r=l(n(0)),o=l(n(2)),a=l(n(129)),i=l(n(66));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.Raised=function(e){var t=e.zDepth,n=e.radius,o=e.background,l=e.children,c=e.styles,s=void 0===c?{}:c,u=(0,a.default)((0,i.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:o}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},s),{"zDepth-1":1===t});return r.default.createElement("div",{style:u.wrap},r.default.createElement("div",{style:u.bg}),r.default.createElement("div",{style:u.content},l))};c.propTypes={background:o.default.string,zDepth:o.default.oneOf([0,1,2,3,4,5]),radius:o.default.number,styles:o.default.object},c.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},t.default=c},1430:function(e,t,n){var r=n(1087),o=n(400),a=n(401),i=n(397),l=n(402),c=n(226),s=n(76),u=n(1078),d=n(225),f=n(304),p=n(86),h=n(236),m=n(292),v=n(1088),g=n(779);e.exports=function(e,t,n,b,y,w,k){var x=v(e,n),E=v(t,n),C=k.get(E);if(C)r(e,n,C);else{var O=w?w(x,E,n+"",e,t,k):void 0,_=void 0===O;if(_){var S=s(E),R=!S&&d(E),j=!S&&!R&&m(E);O=E,S||R||j?s(x)?O=x:u(x)?O=i(x):R?(_=!1,O=o(E,!0)):j?(_=!1,O=a(E,!0)):O=[]:h(E)||c(E)?(O=x,c(x)?O=g(x):p(x)&&!f(x)||(O=l(E))):_=!1}_&&(k.set(E,O),y(O,E,b,w,k),k.delete(E)),r(e,n,O)}}},1431:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Saturation=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=s(o),i=s(n(129)),l=s(n(120)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(392));function s(e){return e&&e.__esModule?e:{default:e}}var u=t.Saturation=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,c.calculateChange(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e);var t=n.getContainerRenderWindow();t.addEventListener("mousemove",n.handleChange),t.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=(0,l.default)((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,o=t.black,l=t.pointer,c=t.circle,s=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:o,pointer:l,circle:c}},{custom:!!this.props.style});return a.default.createElement("div",{style:s.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),a.default.createElement("div",{style:s.white,className:"saturation-white"},a.default.createElement("div",{style:s.black,className:"saturation-black"}),a.default.createElement("div",{style:s.pointer},this.props.pointer?a.default.createElement(this.props.pointer,this.props):a.default.createElement("div",{style:s.circle}))))}}]),t}(o.PureComponent||o.Component);t.default=u},1432:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorWrap=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),i=s(a),l=s(n(54)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1433));function s(e){return e&&e.__esModule?e:{default:e}}var u=t.ColorWrap=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(c.simpleCheckForValidColor(e)){var r=c.toState(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(c.simpleCheckForValidColor(e)){var r=c.toState(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=r({},c.toState(e.color,0)),t.debounce=(0,l.default)((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),o(n,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),i.default.createElement(e,r({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return r({},c.toState(e.color,t.oldHue))}}]),n}(a.PureComponent||a.Component);return t.propTypes=r({},e.propTypes),t.defaultProps=r({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};t.default=u},1433:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isvalidColorString=t.red=t.getContrastingColor=t.isValidHex=t.toState=t.simpleCheckForValidColor=void 0;var r=a(n(1434)),o=a(n(132));function a(e){return e&&e.__esModule?e:{default:e}}t.simpleCheckForValidColor=function(e){var t=0,n=0;return(0,r.default)(["r","g","b","a","h","s","l","v"],(function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}})),t===n&&e};var i=t.toState=function(e,t){var n=e.hex?(0,o.default)(e.hex):(0,o.default)(e),r=n.toHsl(),a=n.toHsv(),i=n.toRgb(),l=n.toHex();return 0===r.s&&(r.h=t||0,a.h=t||0),{hsl:r,hex:"000000"===l&&0===i.a?"transparent":"#"+l,rgb:i,hsv:a,oldHue:e.h||t||r.h,source:e.source}};t.isValidHex=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&(0,o.default)(e).isValid()},t.getContrastingColor=function(e){if(!e)return"#fff";var t=i(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},t.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},t.isvalidColorString=function(e,t){var n=e.replace("°","");return(0,o.default)(t+" ("+n+")")._ok}},1434:function(e,t,n){e.exports=n(894)},1435:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatch=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=c(n(0)),a=c(n(129)),i=n(1436),l=c(n(887));function c(e){return e&&e.__esModule?e:{default:e}}var s=t.Swatch=function(e){var t=e.color,n=e.style,i=e.onClick,c=void 0===i?function(){}:i,s=e.onHover,u=e.title,d=void 0===u?t:u,f=e.children,p=e.focus,h=e.focusStyle,m=void 0===h?{}:h,v="transparent"===t,g=(0,a.default)({default:{swatch:r({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,p?m:{})}}),b={};return s&&(b.onMouseOver=function(e){return s(t,e)}),o.default.createElement("div",r({style:g.swatch,onClick:function(e){return c(t,e)},title:d,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&c(t,e)}},b),f,v&&o.default.createElement(l.default,{borderRadius:g.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};t.default=(0,i.handleFocus)(s)},1436:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleFocus=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),l=(r=i)&&r.__esModule?r:{default:r};function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.handleFocus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var e,t,n;c(this,r);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=n=s(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(a))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},s(n,t)}return u(r,n),a(r,[{key:"render",value:function(){return l.default.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},l.default.createElement(e,o({},this.props,this.state)))}}]),r}(l.default.Component)}},1437:function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){function t(e){var n,r,a,i=null;function l(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];if(l.enabled){var a=l,i=Number(new Date),c=i-(n||i);a.diff=c,a.prev=n,a.curr=i,n=i,r[0]=t.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var s=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return"%";s++;var o=t.formatters[n];if("function"==typeof o){var i=r[s];e=o.call(a,i),r.splice(s,1),s--}return e})),t.formatArgs.call(a,r);var u=a.log||t.log;u.apply(a,r)}}return l.namespace=e,l.useColors=t.useColors(),l.color=t.selectColor(e),l.extend=o,l.destroy=t.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==i?i:(r!==t.namespaces&&(r=t.namespaces,a=t.enabled(e)),a)},set:function(e){i=e}}),"function"==typeof t.init&&t.init(l),l}function o(e,n){var r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){var e=[].concat(r(t.names.map(a)),r(t.skips.map(a).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(1438),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(n){t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},1438:function(e,t){var n=1e3,r=60*n,o=60*r,a=24*o,i=7*a,l=365.25*a;function c(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,t){t=t||{};var s=typeof e;if("string"===s&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*a;case"hours":case"hour":case"hrs":case"hr":case"h":return c*o;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===s&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=a)return c(e,t,a,"day");if(t>=o)return c(e,t,o,"hour");if(t>=r)return c(e,t,r,"minute");if(t>=n)return c(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=a)return Math.round(e/a)+"d";if(t>=o)return Math.round(e/o)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));const r={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function o(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function a(e,t,n,r=.15){return 0===r?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-o(t-e,n-t,r)+t:e>n?+o(e-n,n-t,r)+n:e}function i(e,[t,n],[r,o]){const[[i,l],[c,s]]=e;return[a(t,i,l,r),a(n,c,s,o)]}},1446:function(e,t,n){"use strict";var r=n(1447),o=n(321),a=n(1093),i=n(891),l=n(1094),c=Object.prototype.toString;function s(e){if(!(this instanceof s))return new s(e);this.options=o.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(i[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var u;if(u="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,u)))throw new Error(i[n]);this._dict_set=!0}}function u(e,t){var n=new s(t);if(n.push(e,!0),n.err)throw n.msg||i[n.err];return n.result}s.prototype.push=function(e,t){var n,i,l=this.strm,s=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:!0===t?4:0,"string"==typeof e?l.input=a.string2buf(e):"[object ArrayBuffer]"===c.call(e)?l.input=new Uint8Array(e):l.input=e,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new o.Buf8(s),l.next_out=0,l.avail_out=s),1!==(n=r.deflate(l,i))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==l.avail_out&&(0!==l.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(a.buf2binstring(o.shrinkBuf(l.output,l.next_out))):this.onData(o.shrinkBuf(l.output,l.next_out)))}while((l.avail_in>0||0===l.avail_out)&&1!==n);return 4===i?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==i||(this.onEnd(0),l.avail_out=0,!0)},s.prototype.onData=function(e){this.chunks.push(e)},s.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=s,t.deflate=u,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,u(e,t)}},1447:function(e,t,n){"use strict";var r,o=n(321),a=n(1448),i=n(1091),l=n(1092),c=n(891),s=-2,u=258,d=262,f=103,p=113,h=666;function m(e,t){return e.msg=c[t],t}function v(e){return(e<<1)-(e>4?9:0)}function g(e){for(var t=e.length;--t>=0;)e[t]=0}function b(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(o.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function y(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,b(e.strm)}function w(e,t){e.pending_buf[e.pending++]=t}function k(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function x(e,t){var n,r,o=e.max_chain_length,a=e.strstart,i=e.prev_length,l=e.nice_match,c=e.strstart>e.w_size-d?e.strstart-(e.w_size-d):0,s=e.window,f=e.w_mask,p=e.prev,h=e.strstart+u,m=s[a+i-1],v=s[a+i];e.prev_length>=e.good_match&&(o>>=2),l>e.lookahead&&(l=e.lookahead);do{if(s[(n=t)+i]===v&&s[n+i-1]===m&&s[n]===s[a]&&s[++n]===s[a+1]){a+=2,n++;do{}while(s[++a]===s[++n]&&s[++a]===s[++n]&&s[++a]===s[++n]&&s[++a]===s[++n]&&s[++a]===s[++n]&&s[++a]===s[++n]&&s[++a]===s[++n]&&s[++a]===s[++n]&&a<h);if(r=u-(h-a),a=h-u,r>i){if(e.match_start=t,i=r,r>=l)break;m=s[a+i-1],v=s[a+i]}}}while((t=p[t&f])>c&&0!=--o);return i<=e.lookahead?i:e.lookahead}function E(e){var t,n,r,a,c,s,u,f,p,h,m=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-d)){o.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=m?r-m:0}while(--n);t=n=m;do{r=e.prev[--t],e.prev[t]=r>=m?r-m:0}while(--n);a+=m}if(0===e.strm.avail_in)break;if(s=e.strm,u=e.window,f=e.strstart+e.lookahead,p=a,h=void 0,(h=s.avail_in)>p&&(h=p),n=0===h?0:(s.avail_in-=h,o.arraySet(u,s.input,s.next_in,h,f),1===s.state.wrap?s.adler=i(s.adler,u,h,f):2===s.state.wrap&&(s.adler=l(s.adler,u,h,f)),s.next_in+=h,s.total_in+=h,h),e.lookahead+=n,e.lookahead+e.insert>=3)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+3-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<d&&0!==e.strm.avail_in)}function C(e,t){for(var n,r;;){if(e.lookahead<d){if(E(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-d&&(e.match_length=x(e,n)),e.match_length>=3)if(r=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}function O(e,t){for(var n,r,o;;){if(e.lookahead<d){if(E(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-d&&(e.match_length=x(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-3,r=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(y(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=a._tr_tally(e,0,e.window[e.strstart-1]))&&y(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}function _(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}function S(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(1146),this.dyn_dtree=new o.Buf16(122),this.bl_tree=new o.Buf16(78),g(this.dyn_ltree),g(this.dyn_dtree),g(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(16),this.heap=new o.Buf16(573),g(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(573),g(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function R(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:p,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):m(e,s)}function j(e){var t,n=R(e);return 0===n&&((t=e.state).window_size=2*t.w_size,g(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function A(e,t,n,r,a,i){if(!e)return s;var l=1;if(-1===t&&(t=6),r<0?(l=0,r=-r):r>15&&(l=2,r-=16),a<1||a>9||8!==n||r<8||r>15||t<0||t>9||i<0||i>4)return m(e,s);8===r&&(r=9);var c=new S;return e.state=c,c.strm=e,c.wrap=l,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=a+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new o.Buf8(2*c.w_size),c.head=new o.Buf16(c.hash_size),c.prev=new o.Buf16(c.w_size),c.lit_bufsize=1<<a+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new o.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=i,c.method=n,j(e)}r=[new _(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(E(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,y(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-d&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(y(e,!1),e.strm.avail_out),1)})),new _(4,4,8,4,C),new _(4,5,16,8,C),new _(4,6,32,32,C),new _(4,4,16,16,O),new _(8,16,32,32,O),new _(8,16,128,128,O),new _(8,32,128,256,O),new _(32,128,258,1024,O),new _(32,258,258,4096,O)],t.deflateInit=function(e,t){return A(e,t,8,15,8,0)},t.deflateInit2=A,t.deflateReset=j,t.deflateResetKeep=R,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?s:(e.state.gzhead=t,0):s},t.deflate=function(e,t){var n,o,i,c;if(!e||!e.state||t>5||t<0)return e?m(e,s):s;if(o=e.state,!e.output||!e.input&&0!==e.avail_in||o.status===h&&4!==t)return m(e,0===e.avail_out?-5:s);if(o.strm=e,n=o.last_flush,o.last_flush=t,42===o.status)if(2===o.wrap)e.adler=0,w(o,31),w(o,139),w(o,8),o.gzhead?(w(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),w(o,255&o.gzhead.time),w(o,o.gzhead.time>>8&255),w(o,o.gzhead.time>>16&255),w(o,o.gzhead.time>>24&255),w(o,9===o.level?2:o.strategy>=2||o.level<2?4:0),w(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(w(o,255&o.gzhead.extra.length),w(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=l(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(w(o,0),w(o,0),w(o,0),w(o,0),w(o,0),w(o,9===o.level?2:o.strategy>=2||o.level<2?4:0),w(o,3),o.status=p);else{var d=8+(o.w_bits-8<<4)<<8;d|=(o.strategy>=2||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(d|=32),d+=31-d%31,o.status=p,k(o,d),0!==o.strstart&&(k(o,e.adler>>>16),k(o,65535&e.adler)),e.adler=1}if(69===o.status)if(o.gzhead.extra){for(i=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>i&&(e.adler=l(e.adler,o.pending_buf,o.pending-i,i)),b(e),i=o.pending,o.pending!==o.pending_buf_size));)w(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>i&&(e.adler=l(e.adler,o.pending_buf,o.pending-i,i)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){i=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>i&&(e.adler=l(e.adler,o.pending_buf,o.pending-i,i)),b(e),i=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,w(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>i&&(e.adler=l(e.adler,o.pending_buf,o.pending-i,i)),0===c&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){i=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>i&&(e.adler=l(e.adler,o.pending_buf,o.pending-i,i)),b(e),i=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,w(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>i&&(e.adler=l(e.adler,o.pending_buf,o.pending-i,i)),0===c&&(o.status=f)}else o.status=f;if(o.status===f&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&b(e),o.pending+2<=o.pending_buf_size&&(w(o,255&e.adler),w(o,e.adler>>8&255),e.adler=0,o.status=p)):o.status=p),0!==o.pending){if(b(e),0===e.avail_out)return o.last_flush=-1,0}else if(0===e.avail_in&&v(t)<=v(n)&&4!==t)return m(e,-5);if(o.status===h&&0!==e.avail_in)return m(e,-5);if(0!==e.avail_in||0!==o.lookahead||0!==t&&o.status!==h){var x=2===o.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(E(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}(o,t):3===o.strategy?function(e,t){for(var n,r,o,i,l=e.window;;){if(e.lookahead<=u){if(E(e),e.lookahead<=u&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=l[o=e.strstart-1])===l[++o]&&r===l[++o]&&r===l[++o]){i=e.strstart+u;do{}while(r===l[++o]&&r===l[++o]&&r===l[++o]&&r===l[++o]&&r===l[++o]&&r===l[++o]&&r===l[++o]&&r===l[++o]&&o<i);e.match_length=u-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}(o,t):r[o.level].func(o,t);if(3!==x&&4!==x||(o.status=h),1===x||3===x)return 0===e.avail_out&&(o.last_flush=-1),0;if(2===x&&(1===t?a._tr_align(o):5!==t&&(a._tr_stored_block(o,0,0,!1),3===t&&(g(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),b(e),0===e.avail_out))return o.last_flush=-1,0}return 4!==t?0:o.wrap<=0?1:(2===o.wrap?(w(o,255&e.adler),w(o,e.adler>>8&255),w(o,e.adler>>16&255),w(o,e.adler>>24&255),w(o,255&e.total_in),w(o,e.total_in>>8&255),w(o,e.total_in>>16&255),w(o,e.total_in>>24&255)):(k(o,e.adler>>>16),k(o,65535&e.adler)),b(e),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==f&&t!==p&&t!==h?m(e,s):(e.state=null,t===p?m(e,-3):0):s},t.deflateSetDictionary=function(e,t){var n,r,a,l,c,u,d,f,p=t.length;if(!e||!e.state)return s;if(2===(l=(n=e.state).wrap)||1===l&&42!==n.status||n.lookahead)return s;for(1===l&&(e.adler=i(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===l&&(g(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new o.Buf8(n.w_size),o.arraySet(f,t,p-n.w_size,n.w_size,0),t=f,p=n.w_size),c=e.avail_in,u=e.next_in,d=e.input,e.avail_in=p,e.next_in=0,e.input=t,E(n);n.lookahead>=3;){r=n.strstart,a=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=2,E(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=u,e.input=d,e.avail_in=c,n.wrap=l,0},t.deflateInfo="pako deflate (from Nodeca project)"},1448:function(e,t,n){"use strict";var r=n(321);function o(e){for(var t=e.length;--t>=0;)e[t]=0}var a=256,i=286,l=30,c=15,s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);o(p);var h=new Array(60);o(h);var m=new Array(512);o(m);var v=new Array(256);o(v);var g=new Array(29);o(g);var b,y,w,k=new Array(l);function x(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function E(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function C(e){return e<256?m[e]:m[256+(e>>>7)]}function O(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function _(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,O(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function S(e,t,n){_(e,n[2*t],n[2*t+1])}function R(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function j(e,t,n){var r,o,a=new Array(16),i=0;for(r=1;r<=c;r++)a[r]=i=i+n[r-1]<<1;for(o=0;o<=t;o++){var l=e[2*o+1];0!==l&&(e[2*o]=R(a[l]++,l))}}function A(e){var t;for(t=0;t<i;t++)e.dyn_ltree[2*t]=0;for(t=0;t<l;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function T(e){e.bi_valid>8?O(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function L(e,t,n,r){var o=2*t,a=2*n;return e[o]<e[a]||e[o]===e[a]&&r[t]<=r[n]}function D(e,t,n){for(var r=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&L(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!L(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r}function P(e,t,n){var r,o,i,l,c=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],o=e.pending_buf[e.l_buf+c],c++,0===r?S(e,o,t):(S(e,(i=v[o])+a+1,t),0!==(l=s[i])&&_(e,o-=g[i],l),S(e,i=C(--r),n),0!==(l=u[i])&&_(e,r-=k[i],l))}while(c<e.last_lit);S(e,256,t)}function M(e,t){var n,r,o,a=t.dyn_tree,i=t.stat_desc.static_tree,l=t.stat_desc.has_stree,s=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<s;n++)0!==a[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(o=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[o]=0,e.opt_len--,l&&(e.static_len-=i[2*o+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)D(e,a,n);o=s;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],D(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*o]=a[2*n]+a[2*r],e.depth[o]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=o,e.heap[1]=o++,D(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,o,a,i,l,s=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,f=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,m=t.stat_desc.max_length,v=0;for(a=0;a<=c;a++)e.bl_count[a]=0;for(s[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(a=s[2*s[2*(r=e.heap[n])+1]+1]+1)>m&&(a=m,v++),s[2*r+1]=a,r>u||(e.bl_count[a]++,i=0,r>=h&&(i=p[r-h]),l=s[2*r],e.opt_len+=l*(a+i),f&&(e.static_len+=l*(d[2*r+1]+i)));if(0!==v){do{for(a=m-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[m]--,v-=2}while(v>0);for(a=m;0!==a;a--)for(r=e.bl_count[a];0!==r;)(o=e.heap[--n])>u||(s[2*o+1]!==a&&(e.opt_len+=(a-s[2*o+1])*s[2*o],s[2*o+1]=a),r--)}}(e,t),j(a,u,e.bl_count)}function N(e,t,n){var r,o,a=-1,i=t[1],l=0,c=7,s=4;for(0===i&&(c=138,s=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=i,i=t[2*(r+1)+1],++l<c&&o===i||(l<s?e.bl_tree[2*o]+=l:0!==o?(o!==a&&e.bl_tree[2*o]++,e.bl_tree[32]++):l<=10?e.bl_tree[34]++:e.bl_tree[36]++,l=0,a=o,0===i?(c=138,s=3):o===i?(c=6,s=3):(c=7,s=4))}function I(e,t,n){var r,o,a=-1,i=t[1],l=0,c=7,s=4;for(0===i&&(c=138,s=3),r=0;r<=n;r++)if(o=i,i=t[2*(r+1)+1],!(++l<c&&o===i)){if(l<s)do{S(e,o,e.bl_tree)}while(0!=--l);else 0!==o?(o!==a&&(S(e,o,e.bl_tree),l--),S(e,16,e.bl_tree),_(e,l-3,2)):l<=10?(S(e,17,e.bl_tree),_(e,l-3,3)):(S(e,18,e.bl_tree),_(e,l-11,7));l=0,a=o,0===i?(c=138,s=3):o===i?(c=6,s=3):(c=7,s=4)}}o(k);var F=!1;function B(e,t,n,o){_(e,0+(o?1:0),3),function(e,t,n,o){T(e),o&&(O(e,n),O(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){F||(!function(){var e,t,n,r,o,a=new Array(16);for(n=0,r=0;r<28;r++)for(g[r]=n,e=0;e<1<<s[r];e++)v[n++]=r;for(v[n-1]=r,o=0,r=0;r<16;r++)for(k[r]=o,e=0;e<1<<u[r];e++)m[o++]=r;for(o>>=7;r<l;r++)for(k[r]=o<<7,e=0;e<1<<u[r]-7;e++)m[256+o++]=r;for(t=0;t<=c;t++)a[t]=0;for(e=0;e<=143;)p[2*e+1]=8,e++,a[8]++;for(;e<=255;)p[2*e+1]=9,e++,a[9]++;for(;e<=279;)p[2*e+1]=7,e++,a[7]++;for(;e<=287;)p[2*e+1]=8,e++,a[8]++;for(j(p,287,a),e=0;e<l;e++)h[2*e+1]=5,h[2*e]=R(e,5);b=new x(p,s,257,i,c),y=new x(h,u,0,l,c),w=new x(new Array(0),d,0,19,7)}(),F=!0),e.l_desc=new E(e.dyn_ltree,b),e.d_desc=new E(e.dyn_dtree,y),e.bl_desc=new E(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,A(e)},t._tr_stored_block=B,t._tr_flush_block=function(e,t,n,r){var o,i,l=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<a;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),M(e,e.l_desc),M(e,e.d_desc),l=function(e){var t;for(N(e,e.dyn_ltree,e.l_desc.max_code),N(e,e.dyn_dtree,e.d_desc.max_code),M(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*f[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=o&&(o=i)):o=i=n+5,n+4<=o&&-1!==t?B(e,t,n,r):4===e.strategy||i===o?(_(e,2+(r?1:0),3),P(e,p,h)):(_(e,4+(r?1:0),3),function(e,t,n,r){var o;for(_(e,t-257,5),_(e,n-1,5),_(e,r-4,4),o=0;o<r;o++)_(e,e.bl_tree[2*f[o]+1],3);I(e,e.dyn_ltree,t-1),I(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),P(e,e.dyn_ltree,e.dyn_dtree)),A(e),r&&T(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(v[n]+a+1)]++,e.dyn_dtree[2*C(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){_(e,2,3),S(e,256,p),function(e){16===e.bi_valid?(O(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},1449:function(e,t,n){"use strict";var r=n(1450),o=n(321),a=n(1093),i=n(1095),l=n(891),c=n(1094),s=n(1453),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==i.Z_OK)throw new Error(l[n]);if(this.header=new s,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=a.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==i.Z_OK))throw new Error(l[n])}function f(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||l[n.err];return n.result}d.prototype.push=function(e,t){var n,l,c,s,d,f=this.strm,p=this.options.chunkSize,h=this.options.dictionary,m=!1;if(this.ended)return!1;l=t===~~t?t:!0===t?i.Z_FINISH:i.Z_NO_FLUSH,"string"==typeof e?f.input=a.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new o.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,i.Z_NO_FLUSH))===i.Z_NEED_DICT&&h&&(n=r.inflateSetDictionary(this.strm,h)),n===i.Z_BUF_ERROR&&!0===m&&(n=i.Z_OK,m=!1),n!==i.Z_STREAM_END&&n!==i.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==i.Z_STREAM_END&&(0!==f.avail_in||l!==i.Z_FINISH&&l!==i.Z_SYNC_FLUSH)||("string"===this.options.to?(c=a.utf8border(f.output,f.next_out),s=f.next_out-c,d=a.buf2string(f.output,c),f.next_out=s,f.avail_out=p-s,s&&o.arraySet(f.output,f.output,c,s,0),this.onData(d)):this.onData(o.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(m=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==i.Z_STREAM_END);return n===i.Z_STREAM_END&&(l=i.Z_FINISH),l===i.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===i.Z_OK):l!==i.Z_SYNC_FLUSH||(this.onEnd(i.Z_OK),f.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===i.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=f,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},t.ungzip=f},1450:function(e,t,n){"use strict";var r=n(321),o=n(1091),a=n(1092),i=n(1451),l=n(1452),c=-2,s=12,u=30;function d(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function f(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):c}function h(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,p(e)):c}function m(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?c:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,h(e))):c}function v(e,t){var n,r;return e?(r=new f,e.state=r,r.window=null,0!==(n=m(e,t))&&(e.state=null),n):c}var g,b,y=!0;function w(e){if(y){var t;for(g=new r.Buf32(512),b=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(l(1,e.lens,0,288,g,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;l(2,e.lens,0,32,b,0,e.work,{bits:5}),y=!1}e.lencode=g,e.lenbits=9,e.distcode=b,e.distbits=5}function k(e,t,n,o){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new r.Buf8(i.wsize)),o>=i.wsize?(r.arraySet(i.window,t,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>o&&(a=o),r.arraySet(i.window,t,n-o,a,i.wnext),(o-=a)?(r.arraySet(i.window,t,n-o,o,0),i.wnext=o,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0}t.inflateReset=h,t.inflateReset2=m,t.inflateResetKeep=p,t.inflateInit=function(e){return v(e,15)},t.inflateInit2=v,t.inflate=function(e,t){var n,f,p,h,m,v,g,b,y,x,E,C,O,_,S,R,j,A,T,L,D,P,M,N,I=0,F=new r.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return c;(n=e.state).mode===s&&(n.mode=13),m=e.next_out,p=e.output,g=e.avail_out,h=e.next_in,f=e.input,v=e.avail_in,b=n.hold,y=n.bits,x=v,E=g,P=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;y<16;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}if(2&n.wrap&&35615===b){n.check=0,F[0]=255&b,F[1]=b>>>8&255,n.check=a(n.check,F,2,0),b=0,y=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&b)<<8)+(b>>8))%31){e.msg="incorrect header check",n.mode=u;break}if(8!=(15&b)){e.msg="unknown compression method",n.mode=u;break}if(y-=4,D=8+(15&(b>>>=4)),0===n.wbits)n.wbits=D;else if(D>n.wbits){e.msg="invalid window size",n.mode=u;break}n.dmax=1<<D,e.adler=n.check=1,n.mode=512&b?10:s,b=0,y=0;break;case 2:for(;y<16;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}if(n.flags=b,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=u;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=u;break}n.head&&(n.head.text=b>>8&1),512&n.flags&&(F[0]=255&b,F[1]=b>>>8&255,n.check=a(n.check,F,2,0)),b=0,y=0,n.mode=3;case 3:for(;y<32;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}n.head&&(n.head.time=b),512&n.flags&&(F[0]=255&b,F[1]=b>>>8&255,F[2]=b>>>16&255,F[3]=b>>>24&255,n.check=a(n.check,F,4,0)),b=0,y=0,n.mode=4;case 4:for(;y<16;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}n.head&&(n.head.xflags=255&b,n.head.os=b>>8),512&n.flags&&(F[0]=255&b,F[1]=b>>>8&255,n.check=a(n.check,F,2,0)),b=0,y=0,n.mode=5;case 5:if(1024&n.flags){for(;y<16;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}n.length=b,n.head&&(n.head.extra_len=b),512&n.flags&&(F[0]=255&b,F[1]=b>>>8&255,n.check=a(n.check,F,2,0)),b=0,y=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((C=n.length)>v&&(C=v),C&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,f,h,C,D)),512&n.flags&&(n.check=a(n.check,f,C,h)),v-=C,h+=C,n.length-=C),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===v)break e;C=0;do{D=f[h+C++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D))}while(D&&C<v);if(512&n.flags&&(n.check=a(n.check,f,C,h)),v-=C,h+=C,D)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===v)break e;C=0;do{D=f[h+C++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D))}while(D&&C<v);if(512&n.flags&&(n.check=a(n.check,f,C,h)),v-=C,h+=C,D)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;y<16;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}if(b!==(65535&n.check)){e.msg="header crc mismatch",n.mode=u;break}b=0,y=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=s;break;case 10:for(;y<32;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}e.adler=n.check=d(b),b=0,y=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=m,e.avail_out=g,e.next_in=h,e.avail_in=v,n.hold=b,n.bits=y,2;e.adler=n.check=1,n.mode=s;case s:if(5===t||6===t)break e;case 13:if(n.last){b>>>=7&y,y-=7&y,n.mode=27;break}for(;y<3;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}switch(n.last=1&b,y-=1,3&(b>>>=1)){case 0:n.mode=14;break;case 1:if(w(n),n.mode=20,6===t){b>>>=2,y-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=u}b>>>=2,y-=2;break;case 14:for(b>>>=7&y,y-=7&y;y<32;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}if((65535&b)!=(b>>>16^65535)){e.msg="invalid stored block lengths",n.mode=u;break}if(n.length=65535&b,b=0,y=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(C=n.length){if(C>v&&(C=v),C>g&&(C=g),0===C)break e;r.arraySet(p,f,h,C,m),v-=C,h+=C,g-=C,m+=C,n.length-=C;break}n.mode=s;break;case 17:for(;y<14;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}if(n.nlen=257+(31&b),b>>>=5,y-=5,n.ndist=1+(31&b),b>>>=5,y-=5,n.ncode=4+(15&b),b>>>=4,y-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=u;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;y<3;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}n.lens[B[n.have++]]=7&b,b>>>=3,y-=3}for(;n.have<19;)n.lens[B[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,M={bits:n.lenbits},P=l(0,n.lens,0,19,n.lencode,0,n.work,M),n.lenbits=M.bits,P){e.msg="invalid code lengths set",n.mode=u;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;R=(I=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,j=65535&I,!((S=I>>>24)<=y);){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}if(j<16)b>>>=S,y-=S,n.lens[n.have++]=j;else{if(16===j){for(N=S+2;y<N;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}if(b>>>=S,y-=S,0===n.have){e.msg="invalid bit length repeat",n.mode=u;break}D=n.lens[n.have-1],C=3+(3&b),b>>>=2,y-=2}else if(17===j){for(N=S+3;y<N;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}y-=S,D=0,C=3+(7&(b>>>=S)),b>>>=3,y-=3}else{for(N=S+7;y<N;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}y-=S,D=0,C=11+(127&(b>>>=S)),b>>>=7,y-=7}if(n.have+C>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=u;break}for(;C--;)n.lens[n.have++]=D}}if(n.mode===u)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=u;break}if(n.lenbits=9,M={bits:n.lenbits},P=l(1,n.lens,0,n.nlen,n.lencode,0,n.work,M),n.lenbits=M.bits,P){e.msg="invalid literal/lengths set",n.mode=u;break}if(n.distbits=6,n.distcode=n.distdyn,M={bits:n.distbits},P=l(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,M),n.distbits=M.bits,P){e.msg="invalid distances set",n.mode=u;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(v>=6&&g>=258){e.next_out=m,e.avail_out=g,e.next_in=h,e.avail_in=v,n.hold=b,n.bits=y,i(e,E),m=e.next_out,p=e.output,g=e.avail_out,h=e.next_in,f=e.input,v=e.avail_in,b=n.hold,y=n.bits,n.mode===s&&(n.back=-1);break}for(n.back=0;R=(I=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,j=65535&I,!((S=I>>>24)<=y);){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}if(R&&0==(240&R)){for(A=S,T=R,L=j;R=(I=n.lencode[L+((b&(1<<A+T)-1)>>A)])>>>16&255,j=65535&I,!(A+(S=I>>>24)<=y);){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}b>>>=A,y-=A,n.back+=A}if(b>>>=S,y-=S,n.back+=S,n.length=j,0===R){n.mode=26;break}if(32&R){n.back=-1,n.mode=s;break}if(64&R){e.msg="invalid literal/length code",n.mode=u;break}n.extra=15&R,n.mode=22;case 22:if(n.extra){for(N=n.extra;y<N;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}n.length+=b&(1<<n.extra)-1,b>>>=n.extra,y-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;R=(I=n.distcode[b&(1<<n.distbits)-1])>>>16&255,j=65535&I,!((S=I>>>24)<=y);){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}if(0==(240&R)){for(A=S,T=R,L=j;R=(I=n.distcode[L+((b&(1<<A+T)-1)>>A)])>>>16&255,j=65535&I,!(A+(S=I>>>24)<=y);){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}b>>>=A,y-=A,n.back+=A}if(b>>>=S,y-=S,n.back+=S,64&R){e.msg="invalid distance code",n.mode=u;break}n.offset=j,n.extra=15&R,n.mode=24;case 24:if(n.extra){for(N=n.extra;y<N;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}n.offset+=b&(1<<n.extra)-1,b>>>=n.extra,y-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=u;break}n.mode=25;case 25:if(0===g)break e;if(C=E-g,n.offset>C){if((C=n.offset-C)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=u;break}C>n.wnext?(C-=n.wnext,O=n.wsize-C):O=n.wnext-C,C>n.length&&(C=n.length),_=n.window}else _=p,O=m-n.offset,C=n.length;C>g&&(C=g),g-=C,n.length-=C;do{p[m++]=_[O++]}while(--C);0===n.length&&(n.mode=21);break;case 26:if(0===g)break e;p[m++]=n.length,g--,n.mode=21;break;case 27:if(n.wrap){for(;y<32;){if(0===v)break e;v--,b|=f[h++]<<y,y+=8}if(E-=g,e.total_out+=E,n.total+=E,E&&(e.adler=n.check=n.flags?a(n.check,p,E,m-E):o(n.check,p,E,m-E)),E=g,(n.flags?b:d(b))!==n.check){e.msg="incorrect data check",n.mode=u;break}b=0,y=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;y<32;){if(0===v)break e;v--,b+=f[h++]<<y,y+=8}if(b!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=u;break}b=0,y=0}n.mode=29;case 29:P=1;break e;case u:P=-3;break e;case 31:return-4;default:return c}return e.next_out=m,e.avail_out=g,e.next_in=h,e.avail_in=v,n.hold=b,n.bits=y,(n.wsize||E!==e.avail_out&&n.mode<u&&(n.mode<27||4!==t))&&k(e,e.output,e.next_out,E-e.avail_out)?(n.mode=31,-4):(x-=e.avail_in,E-=e.avail_out,e.total_in+=x,e.total_out+=E,n.total+=E,n.wrap&&E&&(e.adler=n.check=n.flags?a(n.check,p,E,e.next_out-E):o(n.check,p,E,e.next_out-E)),e.data_type=n.bits+(n.last?64:0)+(n.mode===s?128:0)+(20===n.mode||15===n.mode?256:0),(0===x&&0===E||4===t)&&0===P&&(P=-5),P)},t.inflateEnd=function(e){if(!e||!e.state)return c;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?c:(n.head=t,t.done=!1,0):c},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?c:11===n.mode&&o(1,t,r,0)!==n.check?-3:k(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):c},t.inflateInfo="pako inflate (from Nodeca project)"},1451:function(e,t,n){"use strict";e.exports=function(e,t){var n,r,o,a,i,l,c,s,u,d,f,p,h,m,v,g,b,y,w,k,x,E,C,O,_;n=e.state,r=e.next_in,O=e.input,o=r+(e.avail_in-5),a=e.next_out,_=e.output,i=a-(t-e.avail_out),l=a+(e.avail_out-257),c=n.dmax,s=n.wsize,u=n.whave,d=n.wnext,f=n.window,p=n.hold,h=n.bits,m=n.lencode,v=n.distcode,g=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{h<15&&(p+=O[r++]<<h,h+=8,p+=O[r++]<<h,h+=8),y=m[p&g];t:for(;;){if(p>>>=w=y>>>24,h-=w,0===(w=y>>>16&255))_[a++]=65535&y;else{if(!(16&w)){if(0==(64&w)){y=m[(65535&y)+(p&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}k=65535&y,(w&=15)&&(h<w&&(p+=O[r++]<<h,h+=8),k+=p&(1<<w)-1,p>>>=w,h-=w),h<15&&(p+=O[r++]<<h,h+=8,p+=O[r++]<<h,h+=8),y=v[p&b];n:for(;;){if(p>>>=w=y>>>24,h-=w,!(16&(w=y>>>16&255))){if(0==(64&w)){y=v[(65535&y)+(p&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&y,h<(w&=15)&&(p+=O[r++]<<h,(h+=8)<w&&(p+=O[r++]<<h,h+=8)),(x+=p&(1<<w)-1)>c){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=w,h-=w,x>(w=a-i)){if((w=x-w)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=0,C=f,0===d){if(E+=s-w,w<k){k-=w;do{_[a++]=f[E++]}while(--w);E=a-x,C=_}}else if(d<w){if(E+=s+d-w,(w-=d)<k){k-=w;do{_[a++]=f[E++]}while(--w);if(E=0,d<k){k-=w=d;do{_[a++]=f[E++]}while(--w);E=a-x,C=_}}}else if(E+=d-w,w<k){k-=w;do{_[a++]=f[E++]}while(--w);E=a-x,C=_}for(;k>2;)_[a++]=C[E++],_[a++]=C[E++],_[a++]=C[E++],k-=3;k&&(_[a++]=C[E++],k>1&&(_[a++]=C[E++]))}else{E=a-x;do{_[a++]=_[E++],_[a++]=_[E++],_[a++]=_[E++],k-=3}while(k>2);k&&(_[a++]=_[E++],k>1&&(_[a++]=_[E++]))}break}}break}}while(r<o&&a<l);r-=k=h>>3,p&=(1<<(h-=k<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<o?o-r+5:5-(r-o),e.avail_out=a<l?l-a+257:257-(a-l),n.hold=p,n.bits=h}},1452:function(e,t,n){"use strict";var r=n(321),o=15,a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,s,u,d,f,p){var h,m,v,g,b,y,w,k,x,E=p.bits,C=0,O=0,_=0,S=0,R=0,j=0,A=0,T=0,L=0,D=0,P=null,M=0,N=new r.Buf16(16),I=new r.Buf16(16),F=null,B=0;for(C=0;C<=o;C++)N[C]=0;for(O=0;O<s;O++)N[t[n+O]]++;for(R=E,S=o;S>=1&&0===N[S];S--);if(R>S&&(R=S),0===S)return u[d++]=20971520,u[d++]=20971520,p.bits=1,0;for(_=1;_<S&&0===N[_];_++);for(R<_&&(R=_),T=1,C=1;C<=o;C++)if(T<<=1,(T-=N[C])<0)return-1;if(T>0&&(0===e||1!==S))return-1;for(I[1]=0,C=1;C<o;C++)I[C+1]=I[C]+N[C];for(O=0;O<s;O++)0!==t[n+O]&&(f[I[t[n+O]]++]=O);if(0===e?(P=F=f,y=19):1===e?(P=a,M-=257,F=i,B-=257,y=256):(P=l,F=c,y=-1),D=0,O=0,C=_,b=d,j=R,A=0,v=-1,g=(L=1<<R)-1,1===e&&L>852||2===e&&L>592)return 1;for(;;){w=C-A,f[O]<y?(k=0,x=f[O]):f[O]>y?(k=F[B+f[O]],x=P[M+f[O]]):(k=96,x=0),h=1<<C-A,_=m=1<<j;do{u[b+(D>>A)+(m-=h)]=w<<24|k<<16|x|0}while(0!==m);for(h=1<<C-1;D&h;)h>>=1;if(0!==h?(D&=h-1,D+=h):D=0,O++,0==--N[C]){if(C===S)break;C=t[n+f[O]]}if(C>R&&(D&g)!==v){for(0===A&&(A=R),b+=_,T=1<<(j=C-A);j+A<S&&!((T-=N[j+A])<=0);)j++,T<<=1;if(L+=1<<j,1===e&&L>852||2===e&&L>592)return 1;u[v=D&g]=R<<24|j<<16|b-d|0}}return 0!==D&&(u[b+D]=C-A<<24|64<<16|0),p.bits=R,0}},1453:function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},1455:function(e,t,n){var r=function(e){return"[object Array]"==Object.prototype.toString.call(e)},o=function(e){return JSON.parse(JSON.stringify(e))},a={name:"json0",uri:"http://sharejs.org/types/JSONv0"},i={};function l(e){e.t="text0";var t={p:e.p.pop()};null!=e.si&&(t.i=e.si),null!=e.sd&&(t.d=e.sd),e.o=[t]}function c(e){e.p.push(e.o[0].p),null!=e.o[0].i&&(e.si=e.o[0].i),null!=e.o[0].d&&(e.sd=e.o[0].d),delete e.t,delete e.o}a.registerSubtype=function(e){i[e.name]=e},a.create=function(e){return void 0===e?null:o(e)},a.invertComponent=function(e){var t={p:e.p};return e.t&&i[e.t]&&(t.t=e.t,t.o=i[e.t].invert(e.o)),void 0!==e.si&&(t.sd=e.si),void 0!==e.sd&&(t.si=e.sd),void 0!==e.oi&&(t.od=e.oi),void 0!==e.od&&(t.oi=e.od),void 0!==e.li&&(t.ld=e.li),void 0!==e.ld&&(t.li=e.ld),void 0!==e.na&&(t.na=-e.na),void 0!==e.lm&&(t.lm=e.p[e.p.length-1],t.p=e.p.slice(0,e.p.length-1).concat([e.lm])),t},a.invert=function(e){for(var t=e.slice().reverse(),n=[],r=0;r<t.length;r++)n.push(a.invertComponent(t[r]));return n},a.checkValidOp=function(e){for(var t=0;t<e.length;t++)if(!r(e[t].p))throw new Error("Missing path")},a.checkList=function(e){if(!r(e))throw new Error("Referenced element not a list")},a.checkObj=function(e){if(!(t=e)||t.constructor!==Object)throw new Error("Referenced element not an object (it was "+JSON.stringify(e)+")");var t},a.apply=function(e,t){a.checkValidOp(t),t=o(t);for(var n={data:e},r=0;r<t.length;r++){var c=t[r];null==c.si&&null==c.sd||l(c);for(var s=null,u=n,d="data",f=0;f<c.p.length;f++){var p=c.p[f];if(s=u,d,u=u[d],d=p,null==s)throw new Error("Path invalid")}if(c.t&&void 0!==c.o&&i[c.t])u[d]=i[c.t].apply(u[d],c.o);else if(void 0!==c.na){if("number"!=typeof u[d])throw new Error("Referenced element not a number");u[d]+=c.na}else if(void 0!==c.li&&void 0!==c.ld)a.checkList(u),u[d]=c.li;else if(void 0!==c.li)a.checkList(u),u.splice(d,0,c.li);else if(void 0!==c.ld)a.checkList(u),u.splice(d,1);else if(void 0!==c.lm){if(a.checkList(u),c.lm!=d){var h=u[d];u.splice(d,1),u.splice(c.lm,0,h)}}else if(void 0!==c.oi)a.checkObj(u),u[d]=c.oi;else{if(void 0===c.od)throw new Error("invalid / missing instruction in op");a.checkObj(u),delete u[d]}}return n.data},a.shatter=function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n]]);return t},a.incrementalApply=function(e,t,n){for(var r=0;r<t.length;r++){var o=[t[r]];n(o,e=a.apply(e,o))}return e};var s=a.pathMatches=function(e,t,n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r]&&(!n||r!==e.length-1))return!1;return!0};a.append=function(e,t){if(t=o(t),0!==e.length){var n=e[e.length-1];if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(l(t),l(n)),s(t.p,n.p))if(t.t&&n.t&&t.t===n.t&&i[t.t]){if(n.o=i[t.t].compose(n.o,t.o),null!=t.si||null!=t.sd){for(var r=t.p,a=0;a<n.o.length-1;a++)t.o=[n.o.pop()],t.p=r.slice(),c(t),e.push(t);c(n)}}else null!=n.na&&null!=t.na?e[e.length-1]={p:n.p,na:n.na+t.na}:void 0!==n.li&&void 0===t.li&&t.ld===n.li?void 0!==n.ld?delete n.li:e.pop():void 0!==n.od&&void 0===n.oi&&void 0!==t.oi&&void 0===t.od?n.oi=t.oi:void 0!==n.oi&&void 0!==t.od?void 0!==t.oi?n.oi=t.oi:void 0!==n.od?delete n.oi:e.pop():void 0!==t.lm&&t.p[t.p.length-1]===t.lm||e.push(t);else null==t.si&&null==t.sd||null==n.si&&null==n.sd||(c(t),c(n)),e.push(t)}else e.push(t)},a.compose=function(e,t){a.checkValidOp(e),a.checkValidOp(t);for(var n=o(e),r=0;r<t.length;r++)a.append(n,t[r]);return n},a.normalize=function(e){var t=[];e=r(e)?e:[e];for(var n=0;n<e.length;n++){var o=e[n];null==o.p&&(o.p=[]),a.append(t,o)}return t},a.commonLengthForOps=function(e,t){var n=e.p.length,r=t.p.length;if((null!=e.na||e.t)&&n++,(null!=t.na||t.t)&&r++,0===n)return-1;if(0===r)return null;n--,r--;for(var o=0;o<n;o++){var a=e.p[o];if(o>=r||a!==t.p[o])return null}return n},a.canOpAffectPath=function(e,t){return null!=a.commonLengthForOps({p:t},e)},a.transformComponent=function(e,t,n,s){t=o(t);var u=a.commonLengthForOps(n,t),d=a.commonLengthForOps(t,n),f=t.p.length,p=n.p.length;if((null!=t.na||t.t)&&f++,(null!=n.na||n.t)&&p++,null!=d&&p>f&&t.p[d]==n.p[d])if(void 0!==t.ld)(m=o(n)).p=m.p.slice(f),t.ld=a.apply(o(t.ld),[m]);else if(void 0!==t.od){(m=o(n)).p=m.p.slice(f),t.od=a.apply(o(t.od),[m])}if(null!=u){var h=f==p,m=n;if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(l(t),l(m=o(n))),m.t&&i[m.t]){if(t.t&&t.t===m.t){var v=i[t.t].transform(t.o,m.o,s);if(null!=t.si||null!=t.sd)for(var g=t.p,b=0;b<v.length;b++)t.o=[v[b]],t.p=g.slice(),c(t),a.append(e,t);else(!r(v)||v.length>0)&&(t.o=v,a.append(e,t));return e}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[u]===t.p[u]){if(!h)return e;if(void 0!==t.ld){if(void 0===t.li||"left"!==s)return e;t.ld=o(n.li)}}}else if(void 0!==n.li)void 0!==t.li&&void 0===t.ld&&h&&t.p[u]===n.p[u]?"right"===s&&t.p[u]++:n.p[u]<=t.p[u]&&t.p[u]++,void 0!==t.lm&&h&&n.p[u]<=t.lm&&t.lm++;else if(void 0!==n.ld){if(void 0!==t.lm&&h){if(n.p[u]===t.p[u])return e;g=n.p[u];var y=t.p[u];(g<(w=t.lm)||g===w&&y<w)&&t.lm--}if(n.p[u]<t.p[u])t.p[u]--;else if(n.p[u]===t.p[u]){if(p<f)return e;if(void 0!==t.ld){if(void 0===t.li)return e;delete t.ld}}}else if(void 0!==n.lm)if(void 0!==t.lm&&f===p){y=t.p[u];var w=t.lm,k=n.p[u],x=n.lm;if(k!==x)if(y===k){if("left"!==s)return e;t.p[u]=x,y===w&&(t.lm=x)}else y>k&&t.p[u]--,y>x?t.p[u]++:y===x&&k>x&&(t.p[u]++,y===w&&t.lm++),(w>k||w===k&&w>y)&&t.lm--,w>x?t.lm++:w===x&&(x>k&&w>y||x<k&&w<y?"right"===s&&t.lm++:w>y?t.lm++:w===k&&t.lm--)}else if(void 0!==t.li&&void 0===t.ld&&h){y=n.p[u],w=n.lm;(g=t.p[u])>y&&t.p[u]--,g>w&&t.p[u]++}else{y=n.p[u],w=n.lm;(g=t.p[u])===y?t.p[u]=w:(g>y&&t.p[u]--,(g>w||g===w&&y>w)&&t.p[u]++)}else if(void 0!==n.oi&&void 0!==n.od){if(t.p[u]===n.p[u]){if(void 0===t.oi||!h)return e;if("right"===s)return e;t.od=n.oi}}else if(void 0!==n.oi){if(void 0!==t.oi&&t.p[u]===n.p[u]){if("left"!==s)return e;a.append(e,{p:t.p,od:n.oi})}}else if(void 0!==n.od&&t.p[u]==n.p[u]){if(!h)return e;if(void 0===t.oi)return e;delete t.od}}return a.append(e,t),e},n(1096)(a,a.transformComponent,a.checkValidOp,a.append);var u=n(1456);a.registerSubtype(u),e.exports=a},1456:function(e,t,n){var r=e.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(e){if(null!=e&&"string"!=typeof e)throw new Error("Initial data must be a string");return e||""}},o=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},a=function(e){if("number"!=typeof e.p)throw new Error("component missing position field");if("string"==typeof e.i==("string"==typeof e.d))throw new Error("component needs an i or d field");if(e.p<0)throw new Error("position cannot be negative")},i=function(e){for(var t=0;t<e.length;t++)a(e[t])};r.apply=function(e,t){var n;i(t);for(var r=0;r<t.length;r++){var a=t[r];if(null!=a.i)e=o(e,a.p,a.i);else{if(n=e.slice(a.p,a.p+a.d.length),a.d!==n)throw new Error("Delete component '"+a.d+"' does not match deleted text '"+n+"'");e=e.slice(0,a.p)+e.slice(a.p+a.d.length)}}return e};var l=r._append=function(e,t){if(""!==t.i&&""!==t.d)if(0===e.length)e.push(t);else{var n=e[e.length-1];null!=n.i&&null!=t.i&&n.p<=t.p&&t.p<=n.p+n.i.length?e[e.length-1]={i:o(n.i,t.p-n.p,t.i),p:n.p}:null!=n.d&&null!=t.d&&t.p<=n.p&&n.p<=t.p+t.d.length?e[e.length-1]={d:o(t.d,n.p-t.p,n.d),p:t.p}:e.push(t)}};r.compose=function(e,t){i(e),i(t);for(var n=e.slice(),r=0;r<t.length;r++)l(n,t[r]);return n},r.normalize=function(e){var t=[];null==e.i&&null==e.p||(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];null==r.p&&(r.p=0),l(t,r)}return t};var c=function(e,t,n){return null!=t.i?t.p<e||t.p===e&&n?e+t.i.length:e:e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length};r.transformCursor=function(e,t,n){for(var r="right"===n,o=0;o<t.length;o++)e=c(e,t[o],r);return e};var s=r._tc=function(e,t,n,r){if(a(t),a(n),null!=t.i)l(e,{i:t.i,p:c(t.p,n,"right"===r)});else if(null!=n.i){var o=t.d;t.p<n.p&&(l(e,{d:o.slice(0,n.p-t.p),p:t.p}),o=o.slice(n.p-t.p)),""!==o&&l(e,{d:o,p:t.p+n.i.length})}else if(t.p>=n.p+n.d.length)l(e,{d:t.d,p:t.p-n.d.length});else if(t.p+t.d.length<=n.p)l(e,t);else{var i={d:"",p:t.p};t.p<n.p&&(i.d=t.d.slice(0,n.p-t.p)),t.p+t.d.length>n.p+n.d.length&&(i.d+=t.d.slice(n.p+n.d.length-t.p));var s=Math.max(t.p,n.p),u=Math.min(t.p+t.d.length,n.p+n.d.length);if(t.d.slice(s-t.p,u-t.p)!==n.d.slice(s-n.p,u-n.p))throw new Error("Delete ops delete different text in the same region of the document");""!==i.d&&(i.p=c(i.p,n),l(e,i))}return e};r.invert=function(e){e=e.slice().reverse();for(var t=0;t<e.length;t++)e[t]=null!=(n=e[t]).i?{d:n.i,p:n.p}:{i:n.d,p:n.p};var n;return e},n(1096)(r,s,i,l)},1463:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"show",(function(){return h})),n.d(r,"create",(function(){return v})),n.d(r,"update",(function(){return b})),n.d(r,"remove",(function(){return w})),n.d(r,"restore",(function(){return x})),n.d(r,"clone",(function(){return C}));var o={};n.r(o),n.d(o,"create",(function(){return A})),n.d(o,"update",(function(){return L})),n.d(o,"remove",(function(){return P}));var a={};n.r(a),n.d(a,"create",(function(){return V})),n.d(a,"update",(function(){return z})),n.d(a,"remove",(function(){return U})),n.d(a,"moveAfter",(function(){return W}));var i={};n.r(i),n.d(i,"show",(function(){return Q})),n.d(i,"create",(function(){return ee})),n.d(i,"update",(function(){return ne})),n.d(i,"remove",(function(){return oe})),n.d(i,"restore",(function(){return ie}));var l={};n.r(l),n.d(l,"update",(function(){return fe})),n.d(l,"bulkUpdate",(function(){return he}));var c={};n.r(c),n.d(c,"create",(function(){return we})),n.d(c,"update",(function(){return xe})),n.d(c,"remove",(function(){return Ce})),n.d(c,"restore",(function(){return _e}));var s=n(11);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(){d=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),l=new S(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var p={};function h(){}function m(){}function v(){}var g={};c(g,a,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(R([])));y&&y!==t&&n.call(y,a)&&(g=y);var w=v.prototype=h.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(r,a,i,l){var c=f(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==u(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=C(i,n);if(l){if(l===p)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return m.prototype=v,r(w,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:m,configurable:!0}),m.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(x.prototype),c(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(w),c(w,l,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function f(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,l,"next",e)}function l(e){f(a,r,o,i,l,"throw",e)}i(void 0)}))}}function h(e){return m.apply(this,arguments)}function m(){return m=p(d().mark((function e(t){var n,r,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableController/show",e.abrupt("return",s.c(r,t,n));case 3:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return g=p(d().mark((function e(t){var n,r,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableController/create",e.abrupt("return",s.e(r,t,n));case 3:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function b(e){return y.apply(this,arguments)}function y(){return y=p(d().mark((function e(t){var n,r,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableController/update",e.abrupt("return",s.f(r,t,n));case 3:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return k=p(d().mark((function e(t){var n,r,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableController/remove",e.abrupt("return",s.b(r,t,n));case 3:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function x(e){return E.apply(this,arguments)}function E(){return E=p(d().mark((function e(t){var n,r,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableController/restore",e.abrupt("return",s.e(r,t,n));case 3:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function C(e){return O.apply(this,arguments)}function O(){return O=p(d().mark((function e(t){var n,r,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableController/clone",e.abrupt("return",s.e(r,t,n));case 3:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function S(){S=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new O(o||[]);return r(i,"_invoke",{value:k(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function p(){}function h(){}var m={};c(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(R([])));g&&g!==t&&n.call(g,a)&&(m=g);var b=h.prototype=f.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==_(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function R(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return p.prototype=h,r(b,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,l,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function R(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){R(a,r,o,i,l,"next",e)}function l(e){R(a,r,o,i,l,"throw",e)}i(void 0)}))}}function A(e){return T.apply(this,arguments)}function T(){return T=j(S().mark((function e(t){var n,r,o=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableFieldController/create",e.abrupt("return",s.e(r,t,n));case 3:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function L(e){return D.apply(this,arguments)}function D(){return D=j(S().mark((function e(t){var n,r,o=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableFieldController/update",e.abrupt("return",s.f(r,t,n));case 3:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function P(e){return M.apply(this,arguments)}function M(){return M=j(S().mark((function e(t){var n,r,o=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableFieldController/remove",e.abrupt("return",s.b(r,t,n));case 3:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function I(){I=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new O(o||[]);return r(i,"_invoke",{value:k(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function p(){}function h(){}var m={};c(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(_([])));g&&g!==t&&n.call(g,a)&&(m=g);var b=h.prototype=f.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==N(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,r(b,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,l,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=_,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function F(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){F(a,r,o,i,l,"next",e)}function l(e){F(a,r,o,i,l,"throw",e)}i(void 0)}))}}function V(e){return H.apply(this,arguments)}function H(){return H=B(I().mark((function e(t){var n,r,o=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableFieldOptionController/create",e.abrupt("return",s.e(r,t,n));case 3:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function z(e){return q.apply(this,arguments)}function q(){return q=B(I().mark((function e(t){var n,r,o=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableFieldOptionController/update",e.abrupt("return",s.f(r,t,n));case 3:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function U(e){return G.apply(this,arguments)}function G(){return G=B(I().mark((function e(t){var n,r,o=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableFieldOptionController/remove",e.abrupt("return",s.b(r,t,n));case 3:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function W(e){return Y.apply(this,arguments)}function Y(){return Y=B(I().mark((function e(t){var n,r,o=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableFieldOptionController/moveAfter",e.abrupt("return",s.f(r,t,n));case 3:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function K(){K=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new O(o||[]);return r(i,"_invoke",{value:k(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function p(){}function h(){}var m={};c(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(_([])));g&&g!==t&&n.call(g,a)&&(m=g);var b=h.prototype=f.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==$(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,r(b,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,l,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=_,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function X(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){X(a,r,o,i,l,"next",e)}function l(e){X(a,r,o,i,l,"throw",e)}i(void 0)}))}}function Q(e){return J.apply(this,arguments)}function J(){return J=Z(K().mark((function e(t){var n,r,o=arguments;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableRecordController/show",e.abrupt("return",s.c(r,t,n));case 3:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return te=Z(K().mark((function e(t){var n,r,o=arguments;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableRecordController/create",e.abrupt("return",s.e(r,t,n));case 3:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return re=Z(K().mark((function e(t){var n,r,o=arguments;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableRecordController/update",e.abrupt("return",s.f(r,t,n));case 3:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function oe(e){return ae.apply(this,arguments)}function ae(){return ae=Z(K().mark((function e(t){var n,r,o=arguments;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableRecordController/remove",e.abrupt("return",s.b(r,t,n));case 3:case"end":return e.stop()}}),e)}))),ae.apply(this,arguments)}function ie(e){return le.apply(this,arguments)}function le(){return le=Z(K().mark((function e(t){var n,r,o=arguments;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableRecordController/restore",e.abrupt("return",s.f(r,t,n));case 3:case"end":return e.stop()}}),e)}))),le.apply(this,arguments)}function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(){se=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new O(o||[]);return r(i,"_invoke",{value:k(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function p(){}function h(){}var m={};c(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(_([])));g&&g!==t&&n.call(g,a)&&(m=g);var b=h.prototype=f.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==ce(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,r(b,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,l,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=_,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function ue(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ue(a,r,o,i,l,"next",e)}function l(e){ue(a,r,o,i,l,"throw",e)}i(void 0)}))}}function fe(e){return pe.apply(this,arguments)}function pe(){return pe=de(se().mark((function e(t){var n,r,o=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableRecordValueController/update",e.abrupt("return",s.f(r,t,n));case 3:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}function he(e){return me.apply(this,arguments)}function me(){return me=de(se().mark((function e(t){var n,r,o=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableRecordValueController/bulkUpdate",e.abrupt("return",s.f(r,t,n));case 3:case"end":return e.stop()}}),e)}))),me.apply(this,arguments)}function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ge(){ge=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new O(o||[]);return r(i,"_invoke",{value:k(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function p(){}function h(){}var m={};c(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(_([])));g&&g!==t&&n.call(g,a)&&(m=g);var b=h.prototype=f.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==ve(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,r(b,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,l,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=_,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function be(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function ye(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){be(a,r,o,i,l,"next",e)}function l(e){be(a,r,o,i,l,"throw",e)}i(void 0)}))}}function we(e){return ke.apply(this,arguments)}function ke(){return ke=ye(ge().mark((function e(t){var n,r,o=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableViewController/create",e.abrupt("return",s.e(r,t,n));case 3:case"end":return e.stop()}}),e)}))),ke.apply(this,arguments)}function xe(e){return Ee.apply(this,arguments)}function Ee(){return Ee=ye(ge().mark((function e(t){var n,r,o=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableViewController/update",e.abrupt("return",s.f(r,t,n));case 3:case"end":return e.stop()}}),e)}))),Ee.apply(this,arguments)}function Ce(e){return Oe.apply(this,arguments)}function Oe(){return Oe=ye(ge().mark((function e(t){var n,r,o=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableViewController/remove",e.abrupt("return",s.b(r,t,n));case 3:case"end":return e.stop()}}),e)}))),Oe.apply(this,arguments)}function _e(e){return Se.apply(this,arguments)}function Se(){return Se=ye(ge().mark((function e(t){var n,r,o=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r="/api/modules/table/doc/TableViewController/restore",e.abrupt("return",s.e(r,t,n));case 3:case"end":return e.stop()}}),e)}))),Se.apply(this,arguments)}t.a={TableController:r,TableFieldController:o,TableFieldOptionController:a,TableRecordController:i,TableRecordValueController:l,TableViewController:c}},165:function(e,t,n){"use strict";n(1145);var r=n(364);n(1099);t.a=r.a},1762:function(e,t,n){"use strict";var r=n(0);var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,i=r.useEffect,l=r.useLayoutEffect,c=r.useDebugValue;function s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),o=r[0].inst,u=r[1];return l((function(){o.value=n,o.getSnapshot=t,s(o)&&u({inst:o})}),[e,n,t]),i((function(){return s(o)&&u({inst:o}),e((function(){s(o)&&u({inst:o})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},1763:function(e,t){!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,n=o(t);n;)n=o(t=n.ownerDocument);return t}(),t=[],n=null,r=null;i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.USE_MUTATION_OBSERVER=!0,i._setupCrossOriginUpdater=function(){return n||(n=function(e,n){r=e&&n?d(e,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),n},i._resetCrossOriginUpdater=function(){n=null,r=null},i.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},i.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},i.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},i.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},i.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(t)){var r=this._checkForIntersections,a=null,i=null;this.POLL_INTERVAL?a=n.setInterval(r,this.POLL_INTERVAL):(l(n,"resize",r,!0),l(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(i=new n.MutationObserver(r)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(a&&e.clearInterval(a),c(e,"resize",r,!0)),c(t,"scroll",r,!0),i&&i.disconnect()}));var s=this.root&&(this.root.ownerDocument||this.root)||e;if(t!=s){var u=o(t);u&&this._monitorIntersections(u.ownerDocument)}}},i.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(-1!=n){var r=this.root&&(this.root.ownerDocument||this.root)||e,a=this._observationTargets.some((function(e){var n=e.element.ownerDocument;if(n==t)return!0;for(;n&&n!=r;){var a=o(n);if((n=a&&a.ownerDocument)==t)return!0}return!1}));if(!a){var i=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),i(),t!=r){var l=o(t);l&&this._unmonitorIntersections(l.ownerDocument)}}}},i.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},i.prototype._checkForIntersections=function(){if(this.root||!n||r){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var o=r.element,i=s(o),l=this._rootContainsTarget(o),c=r.entry,u=e&&l&&this._computeTargetAndRootIntersection(o,i,t),d=null;this._rootContainsTarget(o)?n&&!this.root||(d=t):d={top:0,bottom:0,left:0,right:0,width:0,height:0};var f=r.entry=new a({time:window.performance&&performance.now&&performance.now(),target:o,boundingClientRect:i,rootBounds:d,intersectionRect:u});c?e&&l?this._hasCrossedThreshold(c,f)&&this._queuedEntries.push(f):c&&c.isIntersecting&&this._queuedEntries.push(f):this._queuedEntries.push(f)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},i.prototype._computeTargetAndRootIntersection=function(t,o,a){if("none"!=window.getComputedStyle(t).display){for(var i,l,c,u,f,h,m,v,g=o,b=p(t),y=!1;!y&&b;){var w=null,k=1==b.nodeType?window.getComputedStyle(b):{};if("none"==k.display)return null;if(b==this.root||9==b.nodeType)if(y=!0,b==this.root||b==e)n&&!this.root?!r||0==r.width&&0==r.height?(b=null,w=null,g=null):w=r:w=a;else{var x=p(b),E=x&&s(x),C=x&&this._computeTargetAndRootIntersection(x,E,a);E&&C?(b=x,w=d(E,C)):(b=null,g=null)}else{var O=b.ownerDocument;b!=O.body&&b!=O.documentElement&&"visible"!=k.overflow&&(w=s(b))}if(w&&(i=w,l=g,c=void 0,u=void 0,f=void 0,h=void 0,m=void 0,v=void 0,c=Math.max(i.top,l.top),u=Math.min(i.bottom,l.bottom),f=Math.max(i.left,l.left),h=Math.min(i.right,l.right),v=u-c,g=(m=h-f)>=0&&v>=0&&{top:c,bottom:u,left:f,right:h,width:m,height:v}||null),!g)break;b=b&&p(b)}return g}},i.prototype._getRootRect=function(){var t;if(this.root&&!h(this.root))t=s(this.root);else{var n=h(this.root)?this.root:e,r=n.documentElement,o=n.body;t={top:0,left:0,right:r.clientWidth||o.clientWidth,width:r.clientWidth||o.clientWidth,bottom:r.clientHeight||o.clientHeight,height:r.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(t)},i.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},i.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var o=0;o<this.thresholds.length;o++){var a=this.thresholds[o];if(a==n||a==r||a<n!=a<r)return!0}},i.prototype._rootIsInDom=function(){return!this.root||f(e,this.root)},i.prototype._rootContainsTarget=function(t){var n=this.root&&(this.root.ownerDocument||this.root)||e;return f(n,t)&&(!this.root||n==t.ownerDocument)},i.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},i.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=i,window.IntersectionObserverEntry=a}function o(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function a(e){this.time=e.time,this.target=e.target,this.rootBounds=u(e.rootBounds),this.boundingClientRect=u(e.boundingClientRect),this.intersectionRect=u(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,o=r.width*r.height;this.intersectionRatio=n?Number((o/n).toFixed(4)):this.isIntersecting?1:0}function i(e,t){var n,r,o,a=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(a.root&&1!=a.root.nodeType&&9!=a.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout((function(){n(),o=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(a.rootMargin),this.thresholds=this._initThresholds(a.threshold),this.root=a.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function l(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function c(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detachEvent&&e.detachEvent("on"+t,n)}function s(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function u(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function d(e,t){var n=t.top-e.top,r=t.left-e.left;return{top:n,left:r,height:t.height,width:t.width,bottom:n+t.height,right:r+t.width}}function f(e,t){for(var n=t;n;){if(n==e)return!0;n=p(n)}return!1}function p(t){var n=t.parentNode;return 9==t.nodeType&&t!=e?o(t):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host?n.host:n)}function h(e){return e&&9===e.nodeType}}()},178:function(e,t,n){(function(r){var o;t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(o=!1,function(){o||(o=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=n(1437)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(242))},185:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l}));var r=n(20),o=n(0);const a=Symbol.for("Animated:node"),i=e=>e&&e[a],l=(e,t)=>Object(r.h)(e,a,t),c=e=>e&&e[a]&&e[a].getPayload();class s{constructor(){this.payload=void 0,l(this,this)}getPayload(){return this.payload||[]}}class u extends s{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,r.t.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new u(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return r.t.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,r.t.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class d extends u{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=Object(r.f)({output:[e,e]})}static create(e){return new d(e)}getValue(){let e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(r.t.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=Object(r.f)({output:[this.getValue(),e]})),this._value=0,super.reset()}}const f={dependencies:null};class p extends s{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Object(r.l)(this.source,((n,o)=>{var i;(i=n)&&i[a]===i?t[o]=n.getValue(e):Object(r.s)(n)?t[o]=Object(r.r)(n):e||(t[o]=n)})),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Object(r.k)(this.payload,(e=>e.reset()))}_makePayload(e){if(e){const t=new Set;return Object(r.l)(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){f.dependencies&&Object(r.s)(e)&&f.dependencies.add(e);const t=c(e);t&&Object(r.k)(t,(e=>this.add(e)))}}class h extends p{constructor(e){super(e)}static create(e){return new h(e)}getValue(){return this.source.map((e=>e.getValue()))}setValue(e){const t=this.getPayload();return e.length==t.length?t.map(((t,n)=>t.setValue(e[n]))).some(Boolean):(super.setValue(e.map(m)),!0)}}function m(e){return(Object(r.u)(e)?d:u).create(e)}function v(e){const t=i(e);return t?t.constructor:r.t.arr(e)?h:Object(r.u)(e)?d:u}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}const b=(e,t)=>{const n=!r.t.fun(e)||e.prototype&&e.prototype.isReactComponent;return Object(o.forwardRef)(((a,i)=>{const l=Object(o.useRef)(null),c=n&&Object(o.useCallback)((e=>{l.current=function(e,t){e&&(r.t.fun(e)?e(t):e.current=t);return t}(i,e)}),[i]),[s,u]=function(e,t){const n=new Set;f.dependencies=n,e.style&&(e=g({},e,{style:t.createAnimatedStyle(e.style)}));return e=new p(e),f.dependencies=null,[e,n]}(a,t),d=Object(r.D)(),h=()=>{const e=l.current;if(n&&!e)return;!1===(!!e&&t.applyAnimatedValues(e,s.getValue(!0)))&&d()},m=new y(h,u),v=Object(o.useRef)();Object(r.E)((()=>(v.current=m,Object(r.k)(u,(e=>Object(r.c)(e,m))),()=>{v.current&&(Object(r.k)(v.current.deps,(e=>Object(r.A)(e,v.current))),r.z.cancel(v.current.update))}))),Object(o.useEffect)(h,[]),Object(r.G)((()=>()=>{const e=v.current;Object(r.k)(e.deps,(t=>Object(r.A)(t,e)))}));const b=t.getComponentProps(s.getValue());return o.createElement(e,g({},b,{ref:c}))}))};class y{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&r.z.write(this.update)}}const w=Symbol.for("AnimatedComponent"),k=(e,{applyAnimatedValues:t=(()=>!1),createAnimatedStyle:n=(e=>new p(e)),getComponentProps:o=(e=>e)}={})=>{const a={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:o},i=e=>{const t=x(e)||"Anonymous";return(e=r.t.str(e)?i[e]||(i[e]=b(e,a)):e[w]||(e[w]=b(e,a))).displayName=`Animated(${t})`,e};return Object(r.l)(e,((t,n)=>{r.t.arr(e)&&(n=x(t)),i[n]=i(t)})),{animated:i}},x=e=>r.t.str(e)?e:e&&r.t.str(e.displayName)?e.displayName:r.t.fun(e)&&e.name||null},188:function(e,t,n){"use strict";n(1090);var r=n(239),o=n(0),a=n.n(o),i=n(2),l=n.n(i),c=n(9),s=n.n(c),u=n(69),d=n.n(u),f=n(421);n(1196);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var h=["className","dropdownClassName"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var w=a.a.forwardRef((function(e,t){var n=e.className,o=e.dropdownClassName,i=y(e,h);return a.a.createElement(r.a,b({className:s()("larkui-select",n),dropdownClassName:s()("larkui-select-dropdown",o),ref:t,suffixIcon:a.a.createElement(f.a,null)},i))}));w.propTypes=v(v({},r.a.SelectProps),{},{className:l.a.string,dropdownClassName:l.a.string}),d()(w,r.a),t.a=w},1887:function(e,t,n){"use strict";function r(){r=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),l=new S(r||[]);return a(i,"_invoke",{value:E(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var p={};function h(){}function m(){}function v(){}var g={};u(g,l,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(R([])));y&&y!==t&&n.call(y,l)&&(g=y);var w=v.prototype=h.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,l,c){var s=f(e[a],e,i);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==o(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,l,c)}),(function(e){r("throw",e,l,c)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return r("throw",e,l,c)}))}c(s.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=C(i,n);if(l){if(l===p)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return m.prototype=v,a(w,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,c,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new x(d(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(w),u(w,s,"Generator"),u(w,l,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){a(i,r,o,l,c,"next",e)}function c(e){a(i,r,o,l,c,"throw",e)}l(void 0)}))}}var l=n(1888);e.exports=function(){var e=i(r().mark((function e(t,n){var a,c,s,u,d,f=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>2&&void 0!==f[2]?f[2]:{},c=a.concurrency,s=void 0===c?1/0:c,u=a.stopOnError,d=void 0===u||u,e.abrupt("return",new Promise((function(e,a){if("function"!=typeof n)throw new TypeError("Mapper function is required");if(!Number.isSafeInteger(s)&&s!==1/0||!(s>=1))throw new TypeError("Expected `concurrency` to be an integer from 1 and up or `Infinity`, got `".concat(s,"` (").concat(o(s),")"));for(var c=[],u=[],f=t[Symbol.iterator](),p=!1,h=!1,m=0,v=0,g=function t(){if(!p){var o=f.next(),s=v;if(v++,o.done)return h=!0,void(0===m&&(d||0===u.length?e(c):a(new l(u))));m++,i(r().mark((function e(){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.value;case 3:return i=e.sent,e.next=6,n(i,s);case 6:c[s]=e.sent,m--,t(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),d?(p=!0,a(e.t0)):(u.push(e.t0),m--,t());case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()}},b=0;b<s&&(g(),!h);b++);})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},1888:function(e,t,n){"use strict";function r(){r=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),l=new S(r||[]);return o(i,"_invoke",{value:E(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var p={};function h(){}function m(){}function v(){}var g={};u(g,i,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(R([])));y&&y!==t&&n.call(y,i)&&(g=y);var w=v.prototype=h.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,l){var s=f(e[o],e,a);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==c(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(s.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=C(i,n);if(l){if(l===p)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return m.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,l,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new x(d(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(w),u(w,s,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw a}}}}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===c(a)?a:String(a)),r)}var o,a}function u(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){var t="function"==typeof Map?new Map:void 0;return f=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return p(e,arguments,v(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),m(r,e)},f(e)}function p(e,t,n){return p=h()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&m(o,n.prototype),o},p.apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=n(1889),b=n(1890),y=function(e,t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(w,e);var n,i,l,f,p,y=(n=w,i=h(),function(){var e,t=v(n);if(i){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return u(this,e)});function w(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),!Array.isArray(e))throw new TypeError("Expected input to be an Array, got ".concat(c(e)));var n=(e=a(e).map((function(e){return e instanceof Error?e:null!==e&&"object"===c(e)?Object.assign(new Error(e.message),e):new Error(e)}))).map((function(e){return"string"==typeof e.stack?b(e.stack).replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""):String(e)})).join("\n");return n="\n"+g(n,4),(t=y.call(this,n)).name="AggregateError",Object.defineProperty(d(t),"_errors",{value:e}),t}return l=w,(f=[{key:t,value:r().mark((function e(){var t,n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o(this._errors),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return a=n.value,e.next=7,a;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))}])&&s(l.prototype,f),p&&s(l,p),Object.defineProperty(l,"prototype",{writable:!1}),w}(f(Error),Symbol.iterator);e.exports=y},1889:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;if(n=a({indent:" ",includeEmptyLines:!1},n),"string"!=typeof e)throw new TypeError("Expected `input` to be a `string`, got `".concat(r(e),"`"));if("number"!=typeof t)throw new TypeError("Expected `count` to be a `number`, got `".concat(r(t),"`"));if("string"!=typeof n.indent)throw new TypeError("Expected `options.indent` to be a `string`, got `".concat(r(n.indent),"`"));if(0===t)return e;var o=n.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return e.replace(o,n.indent.repeat(t))}},1890:function(e,t,n){"use strict";var r=n(1891),o=/\s+at.*(?:\(|\s)(.*)\)?/,a=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,i=void 0===r.homedir?"":r.homedir();e.exports=function(e,t){return t=Object.assign({pretty:!1},t),e.replace(/\\/g,"/").split("\n").filter((function(e){var t=e.match(o);if(null===t||!t[1])return!0;var n=t[1];return!n.includes(".app/Contents/Resources/electron.asar")&&!n.includes(".app/Contents/Resources/default_app.asar")&&!a.test(n)})).filter((function(e){return""!==e.trim()})).map((function(e){return t.pretty?e.replace(o,(function(e,t){return e.replace(t,t.replace(i,"~"))})):e})).join("\n")}},1891:function(e,t){},199:function(e,t,n){"use strict";var r=n(107);n.d(t,"a",(function(){return r.i})),n.d(t,"b",(function(){return r.k})),n.d(t,"c",(function(){return r.m})),n.d(t,"d",(function(){return r.j})),n.d(t,"e",(function(){return r.o})),n.d(t,"f",(function(){return r.p})),n.d(t,"g",(function(){return r.r}))},20:function(e,t,n){"use strict";n.d(t,"z",(function(){return o})),n.d(t,"a",(function(){return Re})),n.d(t,"b",(function(){return F})),n.d(t,"c",(function(){return Ae})),n.d(t,"d",(function(){return Se})),n.d(t,"e",(function(){return $})),n.d(t,"f",(function(){return pe})),n.d(t,"g",(function(){return ze})),n.d(t,"h",(function(){return E})),n.d(t,"i",(function(){return $e})),n.d(t,"j",(function(){return We})),n.d(t,"k",(function(){return _})),n.d(t,"l",(function(){return S})),n.d(t,"m",(function(){return we})),n.d(t,"n",(function(){return j})),n.d(t,"o",(function(){return A})),n.d(t,"p",(function(){return q})),n.d(t,"q",(function(){return _e})),n.d(t,"r",(function(){return Oe})),n.d(t,"s",(function(){return Ce})),n.d(t,"t",(function(){return C})),n.d(t,"u",(function(){return Ke})),n.d(t,"v",(function(){return O})),n.d(t,"w",(function(){return x})),n.d(t,"x",(function(){return nt})),n.d(t,"y",(function(){return st})),n.d(t,"A",(function(){return Te})),n.d(t,"B",(function(){return R})),n.d(t,"C",(function(){return ut})),n.d(t,"D",(function(){return ft})),n.d(t,"E",(function(){return dt})),n.d(t,"F",(function(){return pt})),n.d(t,"G",(function(){return ht})),n.d(t,"H",(function(){return vt}));let r=y();const o=e=>m(e,r);let a=y();o.write=e=>m(e,a);let i=y();o.onStart=e=>m(e,i);let l=y();o.onFrame=e=>m(e,l);let c=y();o.onFinish=e=>m(e,c);let s=[];o.setTimeout=(e,t)=>{let n=o.now()+t,r=()=>{let e=s.findIndex((e=>e.cancel==r));~e&&s.splice(e,1),p-=~e?1:0},a={time:n,handler:e,cancel:r};return s.splice(u(n),0,a),p+=1,v(),a};let u=e=>~(~s.findIndex((t=>t.time>e))||~s.length);o.cancel=e=>{i.delete(e),l.delete(e),c.delete(e),r.delete(e),a.delete(e)},o.sync=e=>{h=!0,o.batchedUpdates(e),h=!1},o.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...e){t=e,o.onStart(n)}return r.handler=e,r.cancel=()=>{i.delete(n),t=null},r};let d="undefined"!=typeof window?window.requestAnimationFrame:()=>{};o.use=e=>d=e,o.now="undefined"!=typeof performance?()=>performance.now():Date.now,o.batchedUpdates=e=>e(),o.catch=console.error,o.frameLoop="always",o.advance=()=>{"demand"!==o.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):b()};let f=-1,p=0,h=!1;function m(e,t){h?(t.delete(e),e(0)):(t.add(e),v())}function v(){f<0&&(f=0,"demand"!==o.frameLoop&&d(g))}function g(){~f&&(d(g),o.batchedUpdates(b))}function b(){let e=f;f=o.now();let t=u(f);t&&(w(s.splice(0,t),(e=>e.handler())),p-=t),p?(i.flush(),r.flush(e?Math.min(64,f-e):16.667),l.flush(),a.flush(),c.flush()):f=-1}function y(){let e=new Set,t=e;return{add(n){p+=t!=e||e.has(n)?0:1,e.add(n)},delete:n=>(p-=t==e&&e.has(n)?1:0,e.delete(n)),flush(n){t.size&&(e=new Set,p-=t.size,w(t,(t=>t(n)&&e.add(t))),p+=e.size,t=e)}}}function w(e,t){e.forEach((e=>{try{t(e)}catch(e){o.catch(e)}}))}var k=n(0);function x(){}const E=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),C={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e};function O(e,t){if(C.arr(e)){if(!C.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}const _=(e,t)=>e.forEach(t);function S(e,t,n){if(C.arr(e))for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);else for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}const R=e=>C.und(e)?[]:C.arr(e)?e:[e];function j(e,t){if(e.size){const n=Array.from(e);e.clear(),_(n,t)}}const A=(e,...t)=>j(e,(e=>e(...t))),T=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let L,D,P=null,M=!1,N=x;const I=e=>{e.to&&(D=e.to),e.now&&(o.now=e.now),void 0!==e.colors&&(P=e.colors),null!=e.skipAnimation&&(M=e.skipAnimation),e.createStringInterpolator&&(L=e.createStringInterpolator),e.requestAnimationFrame&&o.use(e.requestAnimationFrame),e.batchedUpdates&&(o.batchedUpdates=e.batchedUpdates),e.willAdvance&&(N=e.willAdvance),e.frameLoop&&(o.frameLoop=e.frameLoop)};var F=Object.freeze({__proto__:null,get createStringInterpolator(){return L},get to(){return D},get colors(){return P},get skipAnimation(){return M},get willAdvance(){return N},assign:I});const B=new Set;let V=[],H=[],z=0;const q={get idle(){return!B.size&&!V.length},start(e){z>e.priority?(B.add(e),o.onStart(U)):(G(e),o(Y))},advance:Y,sort(e){if(z)o.onFrame((()=>q.sort(e)));else{const t=V.indexOf(e);~t&&(V.splice(t,1),W(e))}},clear(){V=[],B.clear()}};function U(){B.forEach(G),B.clear(),o(Y)}function G(e){V.includes(e)||W(e)}function W(e){V.splice(function(e,t){const n=e.findIndex(t);return n<0?e.length:n}(V,(t=>t.priority>e.priority)),0,e)}function Y(e){const t=H;for(let n=0;n<V.length;n++){const r=V[n];z=r.priority,r.idle||(N(r),r.advance(e),r.idle||t.push(r))}return z=0,H=V,H.length=0,V=t,V.length>0}const $={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},K="[-+]?\\d*\\.?\\d+",X=K+"%";function Z(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const Q=new RegExp("rgb"+Z(K,K,K)),J=new RegExp("rgba"+Z(K,K,K,K)),ee=new RegExp("hsl"+Z(K,X,X)),te=new RegExp("hsla"+Z(K,X,X,K)),ne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,re=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,oe=/^#([0-9a-fA-F]{6})$/,ae=/^#([0-9a-fA-F]{8})$/;function ie(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function le(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r,a=ie(o,r,e+1/3),i=ie(o,r,e),l=ie(o,r,e-1/3);return Math.round(255*a)<<24|Math.round(255*i)<<16|Math.round(255*l)<<8}function ce(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function se(e){return(parseFloat(e)%360+360)%360/360}function ue(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function de(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function fe(e){let t=function(e){let t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=oe.exec(e))?parseInt(t[1]+"ff",16)>>>0:P&&void 0!==P[e]?P[e]:(t=Q.exec(e))?(ce(t[1])<<24|ce(t[2])<<16|ce(t[3])<<8|255)>>>0:(t=J.exec(e))?(ce(t[1])<<24|ce(t[2])<<16|ce(t[3])<<8|ue(t[4]))>>>0:(t=ne.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=ae.exec(e))?parseInt(t[1],16)>>>0:(t=re.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=ee.exec(e))?(255|le(se(t[1]),de(t[2]),de(t[3])))>>>0:(t=te.exec(e))?(le(se(t[1]),de(t[2]),de(t[3]))|ue(t[4]))>>>0:null}(e);return null===t?e:(t=t||0,`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`)}const pe=(e,t,n)=>{if(C.fun(e))return e;if(C.arr(e))return pe({range:e,output:t,extrapolate:n});if(C.str(e.output[0]))return L(e);const r=e,o=r.output,a=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",l=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,a);return function(e,t,n,r,o,a,i,l,c){let s=c?c(e):e;if(s<t){if("identity"===i)return s;"clamp"===i&&(s=t)}if(s>n){if("identity"===l)return s;"clamp"===l&&(s=n)}if(r===o)return r;if(t===n)return e<=t?r:o;t===-1/0?s=-s:n===1/0?s-=t:s=(s-t)/(n-t);s=a(s),r===-1/0?s=-s:o===1/0?s+=r:s=s*(o-r)+r;return s}(e,a[t],a[t+1],o[t],o[t+1],c,i,l,r.map)}};const he=1.70158,me=1.525*he,ve=he+1,ge=2*Math.PI/3,be=2*Math.PI/4.5,ye=e=>{const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},we={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>0===e?0:Math.pow(2,10*e-10),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>ve*e*e*e-he*e*e,easeOutBack:e=>1+ve*Math.pow(e-1,3)+he*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*(7.189819*e-me)/2:(Math.pow(2*e-2,2)*((me+1)*(2*e-2)+me)+2)/2,easeInElastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*ge),easeOutElastic:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*ge)+1,easeInOutElastic:e=>0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*be)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*be)/2+1,easeInBounce:e=>1-ye(1-e),easeOutBounce:ye,easeInOutBounce:e=>e<.5?(1-ye(1-2*e))/2:(1+ye(2*e-1))/2,steps:(e,t="end")=>n=>{const r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e,o="end"===t?Math.floor(r):Math.ceil(r);return a=0,i=1,l=o/e,Math.min(Math.max(l,a),i);var a,i,l}};function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(this,arguments)}const xe=Symbol.for("FluidValue.get"),Ee=Symbol.for("FluidValue.observers"),Ce=e=>Boolean(e&&e[xe]),Oe=e=>e&&e[xe]?e[xe]():e,_e=e=>e[Ee]||null;function Se(e,t){let n=e[Ee];n&&n.forEach((e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}class Re{constructor(e){if(this[xe]=void 0,this[Ee]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");je(this,e)}}const je=(e,t)=>Le(e,xe,t);function Ae(e,t){if(e[xe]){let n=e[Ee];n||Le(e,Ee,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Te(e,t){let n=e[Ee];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[Ee]=null,e.observerRemoved&&e.observerRemoved(r,t)}}const Le=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),De=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Pe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Me=new RegExp(`(${De.source})(%|[a-z]+)`,"i"),Ne=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Ie=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Fe=e=>{const[t,n]=Be(e);if(!t||T())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(n);return t||e}return n&&Ie.test(n)?Fe(n):n||e},Be=e=>{const t=Ie.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]};let Ve;const He=(e,t,n,r,o)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${o})`,ze=e=>{Ve||(Ve=P?new RegExp(`(${Object.keys(P).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map((e=>Oe(e).replace(Ie,Fe).replace(Pe,fe).replace(Ve,fe))),n=t.map((e=>e.match(De).map(Number))),r=n[0].map(((e,t)=>n.map((e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})))).map((t=>pe(ke({},e,{output:t}))));return e=>{var n;const o=!Me.test(t[0])&&(null==(n=t.find((e=>Me.test(e))))?void 0:n.replace(De,""));let a=0;return t[0].replace(De,(()=>`${r[a++](e)}${o||""}`)).replace(Ne,He)}},qe="react-spring: ",Ue=e=>{const t=e;let n=!1;if("function"!=typeof t)throw new TypeError(`${qe}once requires a function parameter`);return(...e)=>{n||(t(...e),n=!0)}},Ge=Ue(console.warn);function We(){Ge(`${qe}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const Ye=Ue(console.warn);function $e(){Ye(`${qe}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Ke(e){return C.str(e)&&("#"==e[0]||/\d/.test(e)||!T()&&Ie.test(e)||e in(P||{}))}let Xe;const Ze=new WeakMap,Qe=e=>e.forEach((({target:e,contentRect:t})=>{var n;return null==(n=Ze.get(e))?void 0:n.forEach((e=>e(t)))}));const Je=new Set;let et;const tt=e=>(Je.add(e),et||(et=(()=>{const e=()=>{Je.forEach((e=>e({width:window.innerWidth,height:window.innerHeight})))};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}})()),()=>{Je.delete(e),!Je.size&&et&&(et(),et=void 0)}),nt=(e,{container:t=document.documentElement}={})=>t===document.documentElement?tt(e):function(e,t){Xe||"undefined"!=typeof ResizeObserver&&(Xe=new ResizeObserver(Qe));let n=Ze.get(t);return n||(n=new Set,Ze.set(t,n)),n.add(e),Xe&&Xe.observe(t),()=>{const n=Ze.get(t);n&&(n.delete(e),!n.size&&Xe&&Xe.unobserve(t))}}(e,t),rt={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};class ot{constructor(e,t){this.callback=void 0,this.container=void 0,this.info=void 0,this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=e=>{const t=this.info[e],{length:n,position:r}=rt[e];var o,a,i;t.current=this.container[`scroll${r}`],t.scrollLength=this.container["scroll"+n]-this.container["client"+n],t.progress=(o=0,a=t.scrollLength,i=t.current,a-o==0?1:(i-o)/(a-o))},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=e,this.container=t,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}}const at=new WeakMap,it=new WeakMap,lt=new WeakMap,ct=e=>e===document.documentElement?window:e,st=(e,{container:t=document.documentElement}={})=>{let n=lt.get(t);n||(n=new Set,lt.set(t,n));const r=new ot(e,t);if(n.add(r),!at.has(t)){const e=()=>{var e;return null==(e=n)||e.forEach((e=>e.advance())),!0};at.set(t,e);const r=ct(t);window.addEventListener("resize",e,{passive:!0}),t!==document.documentElement&&it.set(t,nt(e,{container:t})),r.addEventListener("scroll",e,{passive:!0})}const a=at.get(t);return o(a),()=>{o.cancel(a);const e=lt.get(t);if(!e)return;if(e.delete(r),e.size)return;const n=at.get(t);var i;(at.delete(t),n)&&(ct(t).removeEventListener("scroll",n),window.removeEventListener("resize",n),null==(i=it.get(t))||i())}};function ut(e){const t=Object(k.useRef)(null);return null===t.current&&(t.current=e()),t.current}const dt=T()?k.useEffect:k.useLayoutEffect;function ft(){const e=Object(k.useState)()[1],t=(()=>{const e=Object(k.useRef)(!1);return dt((()=>(e.current=!0,()=>{e.current=!1})),[]),e})();return()=>{t.current&&e(Math.random())}}function pt(e,t){const[n]=Object(k.useState)((()=>({inputs:t,result:e()}))),r=Object(k.useRef)(),o=r.current;let a=o;if(a){Boolean(t&&a.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,a.inputs))||(a={inputs:t,result:e()})}else a=n;return Object(k.useEffect)((()=>{r.current=a,o==n&&(n.inputs=n.result=void 0)}),[a]),a.result}const ht=e=>Object(k.useEffect)(e,mt),mt=[];function vt(e){const t=Object(k.useRef)();return Object(k.useEffect)((()=>{t.current=e})),t.current}},2208:function(e,t,n){var r=n(582);e.exports=function(e){return"number"==typeof e&&e==r(e)}},2257:function(e,t,n){var r=n(233),o=n(855),a=Object.prototype.hasOwnProperty,i=o((function(e,t,n){a.call(e,n)?e[n].push(t):r(e,n,[t])}));e.exports=i},2286:function(e,t,n){"use strict";n(2289);var r=n(1110);n(2285);t.a=r.a},229:function(e,t,n){"use strict";n.d(t,"animated",(function(){return E}));var r=n(957);n.o(r,"Globals")&&n.d(t,"Globals",(function(){return r.Globals})),n.o(r,"useSpring")&&n.d(t,"useSpring",(function(){return r.useSpring}));var o=n(36),a=n(20),i=n(185);function l(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}const c=["style","children","scrollTop","scrollLeft","viewBox"],s=/^--/;function u(e,t){return null==t||"boolean"==typeof t||""===t?"":"number"!=typeof t||0===t||s.test(e)||f.hasOwnProperty(e)&&f[e]?(""+t).trim():t+"px"}const d={};let f={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const p=["Webkit","Ms","Moz","O"];f=Object.keys(f).reduce(((e,t)=>(p.forEach((n=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(n,t)]=e[t])),e)),f);const h=["x","y","z"],m=/^(matrix|translate|scale|rotate|skew)/,v=/^(translate)/,g=/^(rotate|skew)/,b=(e,t)=>a.t.num(e)&&0!==e?e+t:e,y=(e,t)=>a.t.arr(e)?e.every((e=>y(e,t))):a.t.num(e)?e===t:parseFloat(e)===t;class w extends i.a{constructor(e){let{x:t,y:n,z:r}=e,o=l(e,h);const i=[],c=[];(t||n||r)&&(i.push([t||0,n||0,r||0]),c.push((e=>[`translate3d(${e.map((e=>b(e,"px"))).join(",")})`,y(e,0)]))),Object(a.l)(o,((e,t)=>{if("transform"===t)i.push([e||""]),c.push((e=>[e,""===e]));else if(m.test(t)){if(delete o[t],a.t.und(e))return;const n=v.test(t)?"px":g.test(t)?"deg":"";i.push(Object(a.B)(e)),c.push("rotate3d"===t?([e,t,r,o])=>[`rotate3d(${e},${t},${r},${b(o,n)})`,y(o,0)]:e=>[`${t}(${e.map((e=>b(e,n))).join(",")})`,y(e,t.startsWith("scale")?1:0)])}})),i.length&&(o.transform=new k(i,c)),super(o)}}class k extends a.a{constructor(e,t){super(),this._value=null,this.inputs=e,this.transforms=t}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return Object(a.k)(this.inputs,((n,r)=>{const o=Object(a.r)(n[0]),[i,l]=this.transforms[r](a.t.arr(o)?o:n.map(a.r));e+=" "+i,t=t&&l})),t?"none":e}observerAdded(e){1==e&&Object(a.k)(this.inputs,(e=>Object(a.k)(e,(e=>Object(a.s)(e)&&Object(a.c)(e,this)))))}observerRemoved(e){0==e&&Object(a.k)(this.inputs,(e=>Object(a.k)(e,(e=>Object(a.s)(e)&&Object(a.A)(e,this)))))}eventObserved(e){"change"==e.type&&(this._value=null),Object(a.d)(this,e)}}const x=["scrollTop","scrollLeft"];r.Globals.assign({batchedUpdates:o.unstable_batchedUpdates,createStringInterpolator:a.g,colors:a.e});const E=Object(i.d)(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,r=t,{style:o,children:a,scrollTop:i,scrollLeft:f,viewBox:p}=r,h=l(r,c),m=Object.values(h),v=Object.keys(h).map((t=>n||e.hasAttribute(t)?t:d[t]||(d[t]=t.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())))));void 0!==a&&(e.textContent=a);for(let t in o)if(o.hasOwnProperty(t)){const n=u(t,o[t]);s.test(t)?e.style.setProperty(t,n):e.style[t]=n}v.forEach(((t,n)=>{e.setAttribute(t,m[n])})),void 0!==i&&(e.scrollTop=i),void 0!==f&&(e.scrollLeft=f),void 0!==p&&e.setAttribute("viewBox",p)},createAnimatedStyle:e=>new w(e),getComponentProps:e=>l(e,x)}).animated},232:function(e,t){e.exports={colorToken:{"@white":"#FFFFFF","@black":"#000000","@background-base":"#FFFFFF","@yuque-grey-100":"#FAFAFA","@yuque-grey-200":"#F4F5F5","@yuque-grey-300":"#EFF0F0","@yuque-grey-400":"#E7E9E8","@yuque-grey-500":"#D8DAD9","@yuque-grey-600":"#BEC0BF","@yuque-grey-700":"#8A8F8D","@yuque-grey-800":"#585A5A","@yuque-grey-900":"#262626","@yuque-grey-1":"#FAFAFA","@yuque-grey-2":"#F4F5F5","@yuque-grey-3":"#EFF0F0","@yuque-grey-4":"#E7E9E8","@yuque-grey-5":"#D8DAD9","@yuque-grey-6":"#BEC0BF","@yuque-grey-7":"#8A8F8D","@yuque-grey-8":"#585A5A","@yuque-grey-9":"#262626","@pea-green-50":"#F3FBE7","@pea-green-100":"#E8F7CF","@pea-green-200":"#DBF1B7","@pea-green-300":"#C1E77E","@pea-green-400":"#A7DD4B","@pea-green-500":"#8CCF17","@pea-green-600":"#74B602","@pea-green-700":"#5C8D07","@pea-green-800":"#406105","@pea-green-900":"#2A4200","@pea-green-1":"#E8F7CF","@pea-green-2":"#DBF1B7","@pea-green-3":"#C1E77E","@pea-green-4":"#A7DD4B","@pea-green-5":"#8CCF17","@pea-green-6":"#74B602","@pea-green-7":"#5C8D07","@pea-green-8":"#406105","@pea-green-9":"#2A4200","@yuque-green-50":"#ECFAF4","@yuque-green-100":"#DAF6EA","@yuque-green-200":"#C7F0DF","@yuque-green-300":"#82EDC0","@yuque-green-400":"#45DE9D","@yuque-green-500":"#0BD07D","@yuque-green-600":"#00B96B","@yuque-green-700":"#009456","@yuque-green-800":"#00663B","@yuque-green-900":"#003D23","@yuque-green-1":"#DAF6EA","@yuque-green-2":"#C7F0DF","@yuque-green-3":"#82EDC0","@yuque-green-4":"#45DE9D","@yuque-green-5":"#0BD07D","@yuque-green-6":"#00B96B","@yuque-green-7":"#009456","@yuque-green-8":"#00663B","@yuque-green-9":"#003D23","@cyan-50":"#E6F9FB","@cyan-100":"#CEF5F7","@cyan-200":"#B5EFF2","@cyan-300":"#81DFE4","@cyan-400":"#5ED3D9","@cyan-500":"#1DC0C9","@cyan-600":"#01B2BC","@cyan-700":"#078B92","@cyan-800":"#07787E","@cyan-900":"#004347","@cyan-1":"#CEF5F7","@cyan-2":"#B5EFF2","@cyan-3":"#81DFE4","@cyan-4":"#5ED3D9","@cyan-5":"#1DC0C9","@cyan-6":"#01B2BC","@cyan-7":"#078B92","@cyan-8":"#07787E","@cyan-9":"#004347","@blue-50":"#ECF4FD","@blue-100":"#D9EAFC","@blue-200":"#C0DDFC","@blue-300":"#81BBF8","@blue-400":"#5FA8F6","@blue-500":"#2F8EF4","@blue-600":"#117CEE","@blue-700":"#0C68CA","@blue-800":"#074A92","@blue-900":"#00346B","@blue-1":"#D9EAFC","@blue-2":"#C0DDFC","@blue-3":"#81BBF8","@blue-4":"#5FA8F6","@blue-5":"#2F8EF4","@blue-6":"#117CEE","@blue-7":"#0C68CA","@blue-8":"#074A92","@blue-9":"#00346B","@sea-blue-50":"#ECEEFD","@sea-blue-100":"#D9DFFC","@sea-blue-200":"#C0CAFC","@sea-blue-300":"#96A7FD","@sea-blue-400":"#6E85F7","@sea-blue-500":"#4861E0","@sea-blue-600":"#2F4BDA","@sea-blue-700":"#213BC0","@sea-blue-800":"#162883","@sea-blue-900":"#101E60","@sea-blue-1":"#D9DFFC","@sea-blue-2":"#C0CAFC","@sea-blue-3":"#96A7FD","@sea-blue-4":"#6E85F7","@sea-blue-5":"#4861E0","@sea-blue-6":"#2F4BDA","@sea-blue-7":"#213BC0","@sea-blue-8":"#162883","@sea-blue-9":"#101E60","@purple-50":"#F2EDFC","@purple-100":"#E6DCF9","@purple-200":"#D9C9F8","@purple-300":"#BA9BF2","@purple-400":"#9A6EED","@purple-500":"#7E45E8","@purple-600":"#601BDE","@purple-700":"#4C16B1","@purple-800":"#391084","@purple-900":"#270070","@purple-1":"#E6DCF9","@purple-2":"#D9C9F8","@purple-3":"#BA9BF2","@purple-4":"#9A6EED","@purple-5":"#7E45E8","@purple-6":"#601BDE","@purple-7":"#4C16B1","@purple-8":"#391084","@purple-9":"#270070","@magenta-50":"#FDEFF7","@magenta-100":"#FBDFEF","@magenta-200":"#F7C4E2","@magenta-300":"#F297CC","@magenta-400":"#EC6AB6","@magenta-500":"#E746A4","@magenta-600":"#D22D8D","@magenta-700":"#AE146E","@magenta-800":"#800F51","@magenta-900":"#5C0036","@magenta-1":"#FBDFEF","@magenta-2":"#F7C4E2","@magenta-3":"#F297CC","@magenta-4":"#EC6AB6","@magenta-5":"#E746A4","@magenta-6":"#D22D8D","@magenta-7":"#AE146E","@magenta-8":"#800F51","@magenta-9":"#5C0036","@red-50":"#FDF1F3","@red-100":"#FBE4E7","@red-200":"#F8CED3","@red-300":"#F1A2AB","@red-400":"#EA7583","@red-500":"#E4495B","@red-600":"#DF2A3F","@red-700":"#AD1A2B","@red-800":"#8F0515","@red-900":"#70000D","@red-1":"#FBE4E7","@red-2":"#F8CED3","@red-3":"#F1A2AB","@red-4":"#EA7583","@red-5":"#E4495B","@red-6":"#DF2A3F","@red-7":"#AD1A2B","@red-8":"#8F0515","@red-9":"#70000D","@vermilion-50":"#FDF3F1","@vermilion-100":"#FBE8E4","@vermilion-200":"#F8D6CE","@vermilion-300":"#F0AD9D","@vermilion-400":"#EB866F","@vermilion-500":"#E46549","@vermilion-600":"#DF4B2A","@vermilion-700":"#AD351A","@vermilion-800":"#8F1E05","@vermilion-900":"#701500","@vermilion-1":"#FBE8E4","@vermilion-2":"#F8D6CE","@vermilion-3":"#F0AD9D","@vermilion-4":"#EB866F","@vermilion-5":"#E46549","@vermilion-6":"#DF4B2A","@vermilion-7":"#AD351A","@vermilion-8":"#8F1E05","@vermilion-9":"#701500","@orange-50":"#FEF2E9","@orange-100":"#FDE6D3","@orange-200":"#F8D6B9","@orange-300":"#F8B881","@orange-400":"#F6A055","@orange-500":"#F38F39","@orange-600":"#ED740C","@orange-700":"#C75C00","@orange-800":"#944400","@orange-900":"#663000","@orange-1":"#FDE6D3","@orange-2":"#F8D6B9","@orange-3":"#F8B881","@orange-4":"#F6A055","@orange-5":"#F38F39","@orange-6":"#ED740C","@orange-7":"#C75C00","@orange-8":"#944400","@orange-9":"#663000","@yellow-50":"#FCF5E6","@yellow-100":"#F9EFCD","@yellow-200":"#F6E1AC","@yellow-300":"#F5D480","@yellow-400":"#F5CB61","@yellow-500":"#F3BB2F","@yellow-600":"#ECAA04","@yellow-700":"#C99103","@yellow-800":"#8F6600","@yellow-900":"#664900","@yellow-1":"#F9EFCD","@yellow-2":"#F6E1AC","@yellow-3":"#F5D480","@yellow-4":"#F5CB61","@yellow-5":"#F3BB2F","@yellow-6":"#ECAA04","@yellow-7":"#C99103","@yellow-8":"#8F6600","@yellow-9":"#664900","@bright-yellow-50":"#FDF9E4","@bright-yellow-100":"#FBF5CB","@bright-yellow-200":"#FCF1A6","@bright-yellow-300":"#FDEB78","@bright-yellow-400":"#FCE75A","@bright-yellow-500":"#FBDE28","@bright-yellow-600":"#EDCE02","@bright-yellow-700":"#CDB204","@bright-yellow-800":"#A58F04","@bright-yellow-900":"#665800","@bright-yellow-1":"#FBF5CB","@bright-yellow-2":"#FCF1A6","@bright-yellow-3":"#FDEB78","@bright-yellow-4":"#FCE75A","@bright-yellow-5":"#FBDE28","@bright-yellow-6":"#EDCE02","@bright-yellow-7":"#CDB204","@bright-yellow-8":"#A58F04","@bright-yellow-9":"#665800","@brown-50":"#F7F2EA","@brown-100":"#F0E7D6","@brown-200":"#E7D7BB","@brown-300":"#DBC39A","@brown-400":"#D2B684","@brown-500":"#C59F5E","@brown-600":"#B1873F","@brown-700":"#927035","@brown-800":"#74592A","@brown-900":"#523F1E","@brown-1":"#F0E7D6","@brown-2":"#E7D7BB","@brown-3":"#DBC39A","@brown-4":"#D2B684","@brown-5":"#C59F5E","@brown-6":"#B1873F","@brown-7":"#927035","@brown-8":"#74592A","@brown-9":"#523F1E"},colorDarkToken:{"@white":"#000000","@black":"#FFFFFF","@background-base":"#141414","@yuque-grey-100":"#141414","@yuque-grey-200":"#1F1F1F","@yuque-grey-300":"#292929","@yuque-grey-400":"#333333","@yuque-grey-500":"#424242","@yuque-grey-600":"#505050","@yuque-grey-700":"#848484","@yuque-grey-800":"#B3B3B3","@yuque-grey-900":"#E2E2E2","@yuque-grey-1":"#141414","@yuque-grey-2":"#1F1F1F","@yuque-grey-3":"#292929","@yuque-grey-4":"#333333","@yuque-grey-5":"#424242","@yuque-grey-6":"#505050","@yuque-grey-7":"#848484","@yuque-grey-8":"#B3B3B3","@yuque-grey-9":"#E2E2E2","@pea-green-50":"#1B2113","@pea-green-100":"#242F14","@pea-green-200":"#445625","@pea-green-300":"#557915","@pea-green-400":"#6A9226","@pea-green-500":"#7AAD22","@pea-green-600":"#94BC4E","@pea-green-700":"#AED666","@pea-green-800":"#C2DF90","@pea-green-900":"#D5E1C1","@pea-green-1":"#242F14","@pea-green-2":"#445625","@pea-green-3":"#557915","@pea-green-4":"#6A9226","@pea-green-5":"#7AAD22","@pea-green-6":"#94BC4E","@pea-green-7":"#AED666","@pea-green-8":"#C2DF90","@pea-green-9":"#D5E1C1","@yuque-green-50":"#10211A","@yuque-green-100":"#0E2F22","@yuque-green-200":"#255641","@yuque-green-300":"#18774F","@yuque-green-400":"#298E64","@yuque-green-500":"#29AD76","@yuque-green-600":"#51B88D","@yuque-green-700":"#6BD1A6","@yuque-green-800":"#97D8BC","@yuque-green-900":"#BCE6D5","@yuque-green-1":"#0E2F22","@yuque-green-2":"#255641","@yuque-green-3":"#18774F","@yuque-green-4":"#298E64","@yuque-green-5":"#29AD76","@yuque-green-6":"#51B88D","@yuque-green-7":"#6BD1A6","@yuque-green-8":"#97D8BC","@yuque-green-9":"#BCE6D5","@cyan-50":"#122324","@cyan-100":"#123436","@cyan-200":"#255356","@cyan-300":"#1A7074","@cyan-400":"#278B90","@cyan-500":"#22A8AF","@cyan-600":"#4EB6BC","@cyan-700":"#76C2C6","@cyan-800":"#95D7DB","@cyan-900":"#BFE1E3","@cyan-1":"#123436","@cyan-2":"#255356","@cyan-3":"#1A7074","@cyan-4":"#278B90","@cyan-5":"#22A8AF","@cyan-6":"#4EB6BC","@cyan-7":"#76C2C6","@cyan-8":"#95D7DB","@cyan-9":"#BFE1E3","@blue-50":"#15212D","@blue-100":"#193048","@blue-200":"#253C56","@blue-300":"#1D4672","@blue-400":"#245A94","@blue-500":"#2B6BB1","@blue-600":"#3B82CE","@blue-700":"#689FD9","@blue-800":"#8DB5E2","@blue-900":"#B5D0ED","@blue-1":"#193048","@blue-2":"#253C56","@blue-3":"#1D4672","@blue-4":"#245A94","@blue-5":"#2B6BB1","@blue-6":"#3B82CE","@blue-7":"#689FD9","@blue-8":"#8DB5E2","@blue-9":"#B5D0ED","@sea-blue-50":"#171C33","@sea-blue-100":"#1C2654","@sea-blue-200":"#252D56","@sea-blue-300":"#1B2A74","@sea-blue-400":"#243694","@sea-blue-500":"#2B41B1","@sea-blue-600":"#3B54CE","@sea-blue-700":"#687BD9","@sea-blue-800":"#8D9BE2","@sea-blue-900":"#B5BEED","@sea-blue-1":"#1C2654","@sea-blue-2":"#252D56","@sea-blue-3":"#1B2A74","@sea-blue-4":"#243694","@sea-blue-5":"#2B41B1","@sea-blue-6":"#3B54CE","@sea-blue-7":"#687BD9","@sea-blue-8":"#8D9BE2","@sea-blue-9":"#B5BEED","@purple-50":"#1F172E","@purple-100":"#2C1C4A","@purple-200":"#352259","@purple-300":"#3A1C73","@purple-400":"#512A98","@purple-500":"#5A2CAF","@purple-600":"#7551B8","@purple-700":"#9677CF","@purple-800":"#B099DB","@purple-900":"#CABCE7","@purple-1":"#2C1C4A","@purple-2":"#352259","@purple-3":"#3A1C73","@purple-4":"#512A98","@purple-5":"#5A2CAF","@purple-6":"#7551B8","@purple-7":"#9677CF","@purple-8":"#B099DB","@purple-9":"#CABCE7","@magenta-50":"#301525","@magenta-100":"#4E1837","@magenta-200":"#5B1F42","@magenta-300":"#701F4E","@magenta-400":"#942465","@magenta-500":"#A43776","@magenta-600":"#BE4B8E","@magenta-700":"#CE78AA","@magenta-800":"#D996BD","@magenta-900":"#E6BCD5","@magenta-1":"#4E1837","@magenta-2":"#5B1F42","@magenta-3":"#701F4E","@magenta-4":"#942465","@magenta-5":"#A43776","@magenta-6":"#BE4B8E","@magenta-7":"#CE78AA","@magenta-8":"#D996BD","@magenta-9":"#E6BCD5","@red-50":"#29191C","@red-100":"#402125","@red-200":"#5B2027","@red-300":"#741B25","@red-400":"#981F2D","@red-500":"#B62536","@red-600":"#CA3F4F","@red-700":"#CC7B84","@red-800":"#D49199","@red-900":"#E6BCC1","@red-1":"#402125","@red-2":"#5B2027","@red-3":"#741B25","@red-4":"#981F2D","@red-5":"#B62536","@red-6":"#CA3F4F","@red-7":"#CC7B84","@red-8":"#D49199","@red-9":"#E6BCC1","@vermilion-50":"#271C19","@vermilion-100":"#3C2520","@vermilion-200":"#5B2B20","@vermilion-300":"#742B1B","@vermilion-400":"#943824","@vermilion-500":"#B0432B","@vermilion-600":"#CD573C","@vermilion-700":"#D9816D","@vermilion-800":"#E09685","@vermilion-900":"#E9C2B9","@vermilion-1":"#3C2520","@vermilion-2":"#5B2B20","@vermilion-3":"#742B1B","@vermilion-4":"#943824","@vermilion-5":"#B0432B","@vermilion-6":"#CD573C","@vermilion-7":"#D9816D","@vermilion-8":"#E09685","@vermilion-9":"#E9C2B9","@orange-50":"#251E18","@orange-100":"#382A1E","@orange-200":"#5E3B1D","@orange-300":"#774418","@orange-400":"#9D571B","@orange-500":"#BC6820","@orange-600":"#D37F36","@orange-700":"#DE9F68","@orange-800":"#E0AF85","@orange-900":"#E9CFB9","@orange-1":"#382A1E","@orange-2":"#5E3B1D","@orange-3":"#774418","@orange-4":"#9D571B","@orange-5":"#BC6820","@orange-6":"#D37F36","@orange-7":"#DE9F68","@orange-8":"#E0AF85","@orange-9":"#E9CFB9","@yellow-50":"#241F15","@yellow-100":"#352D17","@yellow-200":"#564825","@yellow-300":"#775C18","@yellow-400":"#9C781C","@yellow-500":"#C29219","@yellow-600":"#D2A638","@yellow-700":"#E8BE54","@yellow-800":"#EFCF81","@yellow-900":"#EEDEB4","@yellow-1":"#352D17","@yellow-2":"#564825","@yellow-3":"#775C18","@yellow-4":"#9C781C","@yellow-5":"#C29219","@yellow-6":"#D2A638","@yellow-7":"#E8BE54","@yellow-8":"#EFCF81","@yellow-9":"#EEDEB4","@bright-yellow-50":"#242215","@bright-yellow-100":"#353117","@bright-yellow-200":"#564F25","@bright-yellow-300":"#776A18","@bright-yellow-400":"#9C8B1C","@bright-yellow-500":"#C2AC19","@bright-yellow-600":"#D2BD38","@bright-yellow-700":"#E8D454","@bright-yellow-800":"#EFE081","@bright-yellow-900":"#EEE7B4","@bright-yellow-1":"#353117","@bright-yellow-2":"#564F25","@bright-yellow-3":"#776A18","@bright-yellow-4":"#9C8B1C","@bright-yellow-5":"#C2AC19","@bright-yellow-6":"#D2BD38","@bright-yellow-7":"#E8D454","@bright-yellow-8":"#EFE081","@bright-yellow-9":"#EEE7B4","@brown-50":"#231E15","@brown-100":"#342A18","@brown-200":"#544327","@brown-300":"#624E2D","@brown-400":"#7E653A","@brown-500":"#967845","@brown-600":"#B29158","@brown-700":"#C2A87A","@brown-800":"#D2BF9D","@brown-900":"#E2D6C0","@brown-1":"#342A18","@brown-2":"#544327","@brown-3":"#624E2D","@brown-4":"#7E653A","@brown-5":"#967845","@brown-6":"#B29158","@brown-7":"#C2A87A","@brown-8":"#D2BF9D","@brown-9":"#E2D6C0"},themeToken:{"@white":"#FFFFFF","@black":"#000000","@background-base":"#FFFFFF","@yuque-grey-100":"#FAFAFA","@yuque-grey-200":"#F4F5F5","@yuque-grey-300":"#EFF0F0","@yuque-grey-400":"#E7E9E8","@yuque-grey-500":"#D8DAD9","@yuque-grey-600":"#BEC0BF","@yuque-grey-700":"#8A8F8D","@yuque-grey-800":"#585A5A","@yuque-grey-900":"#262626","@yuque-grey-1":"#FAFAFA","@yuque-grey-2":"#F4F5F5","@yuque-grey-3":"#EFF0F0","@yuque-grey-4":"#E7E9E8","@yuque-grey-5":"#D8DAD9","@yuque-grey-6":"#BEC0BF","@yuque-grey-7":"#8A8F8D","@yuque-grey-8":"#585A5A","@yuque-grey-9":"#262626","@pea-green-50":"#F3FBE7","@pea-green-100":"#E8F7CF","@pea-green-200":"#DBF1B7","@pea-green-300":"#C1E77E","@pea-green-400":"#A7DD4B","@pea-green-500":"#8CCF17","@pea-green-600":"#74B602","@pea-green-700":"#5C8D07","@pea-green-800":"#406105","@pea-green-900":"#2A4200","@pea-green-1":"#E8F7CF","@pea-green-2":"#DBF1B7","@pea-green-3":"#C1E77E","@pea-green-4":"#A7DD4B","@pea-green-5":"#8CCF17","@pea-green-6":"#74B602","@pea-green-7":"#5C8D07","@pea-green-8":"#406105","@pea-green-9":"#2A4200","@yuque-green-50":"#ECFAF4","@yuque-green-100":"#DAF6EA","@yuque-green-200":"#C7F0DF","@yuque-green-300":"#82EDC0","@yuque-green-400":"#45DE9D","@yuque-green-500":"#0BD07D","@yuque-green-600":"#00B96B","@yuque-green-700":"#009456","@yuque-green-800":"#00663B","@yuque-green-900":"#003D23","@yuque-green-1":"#DAF6EA","@yuque-green-2":"#C7F0DF","@yuque-green-3":"#82EDC0","@yuque-green-4":"#45DE9D","@yuque-green-5":"#0BD07D","@yuque-green-6":"#00B96B","@yuque-green-7":"#009456","@yuque-green-8":"#00663B","@yuque-green-9":"#003D23","@cyan-50":"#E6F9FB","@cyan-100":"#CEF5F7","@cyan-200":"#B5EFF2","@cyan-300":"#81DFE4","@cyan-400":"#5ED3D9","@cyan-500":"#1DC0C9","@cyan-600":"#01B2BC","@cyan-700":"#078B92","@cyan-800":"#07787E","@cyan-900":"#004347","@cyan-1":"#CEF5F7","@cyan-2":"#B5EFF2","@cyan-3":"#81DFE4","@cyan-4":"#5ED3D9","@cyan-5":"#1DC0C9","@cyan-6":"#01B2BC","@cyan-7":"#078B92","@cyan-8":"#07787E","@cyan-9":"#004347","@blue-50":"#ECF4FD","@blue-100":"#D9EAFC","@blue-200":"#C0DDFC","@blue-300":"#81BBF8","@blue-400":"#5FA8F6","@blue-500":"#2F8EF4","@blue-600":"#117CEE","@blue-700":"#0C68CA","@blue-800":"#074A92","@blue-900":"#00346B","@blue-1":"#D9EAFC","@blue-2":"#C0DDFC","@blue-3":"#81BBF8","@blue-4":"#5FA8F6","@blue-5":"#2F8EF4","@blue-6":"#117CEE","@blue-7":"#0C68CA","@blue-8":"#074A92","@blue-9":"#00346B","@sea-blue-50":"#ECEEFD","@sea-blue-100":"#D9DFFC","@sea-blue-200":"#C0CAFC","@sea-blue-300":"#96A7FD","@sea-blue-400":"#6E85F7","@sea-blue-500":"#4861E0","@sea-blue-600":"#2F4BDA","@sea-blue-700":"#213BC0","@sea-blue-800":"#162883","@sea-blue-900":"#101E60","@sea-blue-1":"#D9DFFC","@sea-blue-2":"#C0CAFC","@sea-blue-3":"#96A7FD","@sea-blue-4":"#6E85F7","@sea-blue-5":"#4861E0","@sea-blue-6":"#2F4BDA","@sea-blue-7":"#213BC0","@sea-blue-8":"#162883","@sea-blue-9":"#101E60","@purple-50":"#F2EDFC","@purple-100":"#E6DCF9","@purple-200":"#D9C9F8","@purple-300":"#BA9BF2","@purple-400":"#9A6EED","@purple-500":"#7E45E8","@purple-600":"#601BDE","@purple-700":"#4C16B1","@purple-800":"#391084","@purple-900":"#270070","@purple-1":"#E6DCF9","@purple-2":"#D9C9F8","@purple-3":"#BA9BF2","@purple-4":"#9A6EED","@purple-5":"#7E45E8","@purple-6":"#601BDE","@purple-7":"#4C16B1","@purple-8":"#391084","@purple-9":"#270070","@magenta-50":"#FDEFF7","@magenta-100":"#FBDFEF","@magenta-200":"#F7C4E2","@magenta-300":"#F297CC","@magenta-400":"#EC6AB6","@magenta-500":"#E746A4","@magenta-600":"#D22D8D","@magenta-700":"#AE146E","@magenta-800":"#800F51","@magenta-900":"#5C0036","@magenta-1":"#FBDFEF","@magenta-2":"#F7C4E2","@magenta-3":"#F297CC","@magenta-4":"#EC6AB6","@magenta-5":"#E746A4","@magenta-6":"#D22D8D","@magenta-7":"#AE146E","@magenta-8":"#800F51","@magenta-9":"#5C0036","@red-50":"#FDF1F3","@red-100":"#FBE4E7","@red-200":"#F8CED3","@red-300":"#F1A2AB","@red-400":"#EA7583","@red-500":"#E4495B","@red-600":"#DF2A3F","@red-700":"#AD1A2B","@red-800":"#8F0515","@red-900":"#70000D","@red-1":"#FBE4E7","@red-2":"#F8CED3","@red-3":"#F1A2AB","@red-4":"#EA7583","@red-5":"#E4495B","@red-6":"#DF2A3F","@red-7":"#AD1A2B","@red-8":"#8F0515","@red-9":"#70000D","@vermilion-50":"#FDF3F1","@vermilion-100":"#FBE8E4","@vermilion-200":"#F8D6CE","@vermilion-300":"#F0AD9D","@vermilion-400":"#EB866F","@vermilion-500":"#E46549","@vermilion-600":"#DF4B2A","@vermilion-700":"#AD351A","@vermilion-800":"#8F1E05","@vermilion-900":"#701500","@vermilion-1":"#FBE8E4","@vermilion-2":"#F8D6CE","@vermilion-3":"#F0AD9D","@vermilion-4":"#EB866F","@vermilion-5":"#E46549","@vermilion-6":"#DF4B2A","@vermilion-7":"#AD351A","@vermilion-8":"#8F1E05","@vermilion-9":"#701500","@orange-50":"#FEF2E9","@orange-100":"#FDE6D3","@orange-200":"#F8D6B9","@orange-300":"#F8B881","@orange-400":"#F6A055","@orange-500":"#F38F39","@orange-600":"#ED740C","@orange-700":"#C75C00","@orange-800":"#944400","@orange-900":"#663000","@orange-1":"#FDE6D3","@orange-2":"#F8D6B9","@orange-3":"#F8B881","@orange-4":"#F6A055","@orange-5":"#F38F39","@orange-6":"#ED740C","@orange-7":"#C75C00","@orange-8":"#944400","@orange-9":"#663000","@yellow-50":"#FCF5E6","@yellow-100":"#F9EFCD","@yellow-200":"#F6E1AC","@yellow-300":"#F5D480","@yellow-400":"#F5CB61","@yellow-500":"#F3BB2F","@yellow-600":"#ECAA04","@yellow-700":"#C99103","@yellow-800":"#8F6600","@yellow-900":"#664900","@yellow-1":"#F9EFCD","@yellow-2":"#F6E1AC","@yellow-3":"#F5D480","@yellow-4":"#F5CB61","@yellow-5":"#F3BB2F","@yellow-6":"#ECAA04","@yellow-7":"#C99103","@yellow-8":"#8F6600","@yellow-9":"#664900","@bright-yellow-50":"#FDF9E4","@bright-yellow-100":"#FBF5CB","@bright-yellow-200":"#FCF1A6","@bright-yellow-300":"#FDEB78","@bright-yellow-400":"#FCE75A","@bright-yellow-500":"#FBDE28","@bright-yellow-600":"#EDCE02","@bright-yellow-700":"#CDB204","@bright-yellow-800":"#A58F04","@bright-yellow-900":"#665800","@bright-yellow-1":"#FBF5CB","@bright-yellow-2":"#FCF1A6","@bright-yellow-3":"#FDEB78","@bright-yellow-4":"#FCE75A","@bright-yellow-5":"#FBDE28","@bright-yellow-6":"#EDCE02","@bright-yellow-7":"#CDB204","@bright-yellow-8":"#A58F04","@bright-yellow-9":"#665800","@brown-50":"#F7F2EA","@brown-100":"#F0E7D6","@brown-200":"#E7D7BB","@brown-300":"#DBC39A","@brown-400":"#D2B684","@brown-500":"#C59F5E","@brown-600":"#B1873F","@brown-700":"#927035","@brown-800":"#74592A","@brown-900":"#523F1E","@brown-1":"#F0E7D6","@brown-2":"#E7D7BB","@brown-3":"#DBC39A","@brown-4":"#D2B684","@brown-5":"#C59F5E","@brown-6":"#B1873F","@brown-7":"#927035","@brown-8":"#74592A","@brown-9":"#523F1E","@yuque-color-theme":"#00B96B","@yuque-color-normal":"#D8DAD9","@yuque-color-bg-primary":"#FFFFFF","@yuque-color-bg-secondary":"#FAFAFA","@yuque-color-bg-tertiary":"#F4F5F5","@yuque-color-bg-primary-hover":"#EFF0F0","@yuque-color-bg-primary-hover-light":"#E7E9E8","@yuque-color-bg-foreground":"#FFFFFF","@yuque-color-bg-pre-foreground":"#FFFFFF","@yuque-color-bg-pre-secondary":"#F4F5F5","@yuque-color-mask-bg":"rgba(0, 0, 0, 0.65)","@yuque-color-toast-bg":"rgba(0, 0, 0, 0.65)","@yuque-color-border-primary":"#E7E9E8","@yuque-color-border-primary-active":"#00B96B","@yuque-color-border-light":"rgba(0, 0, 0, 0.04)","@yuque-color-border-heavy":"#EFF0F0","@yuque-color-cardborder-hover":"#81BBF8","@yuque-color-cardborder-selected":"#2F8EF4","@yuque-color-sheetborder":"rgba(0, 0, 0, 0.1)","@yuque-color-text-primary":"#262626","@yuque-color-text-body":"#585A5A","@yuque-color-text-caption":"#8A8F8D","@yuque-color-text-disable":"#BEC0BF","@yuque-color-text-link":"#117CEE","@yuque-color-text-link-hover":"#5FA8F6","@yuque-color-icon-primary":"#262626","@yuque-color-icon-secondary":"#585A5A","@yuque-color-icon-caption":"#8A8F8D","@yuque-color-icon-disable":"#BEC0BF","@yuque-color-icon-hover":"#D8DAD9","@yuque-color-icon-colorbg":"rgba(0, 0, 0, 0.45)","@yuque-color-function-success":"#00B96B","@yuque-color-function-info":"#117CEE","@yuque-color-function-warning":"#ECAA04","@yuque-color-function-error":"#DF2A3F","@yuque-color-badge":"#2F8EF4","@yuque-color-popover-bg":"#FFFFFF","@yuque-color-disable-color":"#BEC0BF"},themeDarkToken:{"@white":"#000000","@black":"#FFFFFF","@background-base":"#141414","@yuque-grey-100":"#141414","@yuque-grey-200":"#1F1F1F","@yuque-grey-300":"#292929","@yuque-grey-400":"#333333","@yuque-grey-500":"#424242","@yuque-grey-600":"#505050","@yuque-grey-700":"#848484","@yuque-grey-800":"#B3B3B3","@yuque-grey-900":"#E2E2E2","@yuque-grey-1":"#141414","@yuque-grey-2":"#1F1F1F","@yuque-grey-3":"#292929","@yuque-grey-4":"#333333","@yuque-grey-5":"#424242","@yuque-grey-6":"#505050","@yuque-grey-7":"#848484","@yuque-grey-8":"#B3B3B3","@yuque-grey-9":"#E2E2E2","@pea-green-50":"#1B2113","@pea-green-100":"#242F14","@pea-green-200":"#445625","@pea-green-300":"#557915","@pea-green-400":"#6A9226","@pea-green-500":"#7AAD22","@pea-green-600":"#94BC4E","@pea-green-700":"#AED666","@pea-green-800":"#C2DF90","@pea-green-900":"#D5E1C1","@pea-green-1":"#242F14","@pea-green-2":"#445625","@pea-green-3":"#557915","@pea-green-4":"#6A9226","@pea-green-5":"#7AAD22","@pea-green-6":"#94BC4E","@pea-green-7":"#AED666","@pea-green-8":"#C2DF90","@pea-green-9":"#D5E1C1","@yuque-green-50":"#10211A","@yuque-green-100":"#0E2F22","@yuque-green-200":"#255641","@yuque-green-300":"#18774F","@yuque-green-400":"#298E64","@yuque-green-500":"#29AD76","@yuque-green-600":"#51B88D","@yuque-green-700":"#6BD1A6","@yuque-green-800":"#97D8BC","@yuque-green-900":"#BCE6D5","@yuque-green-1":"#0E2F22","@yuque-green-2":"#255641","@yuque-green-3":"#18774F","@yuque-green-4":"#298E64","@yuque-green-5":"#29AD76","@yuque-green-6":"#51B88D","@yuque-green-7":"#6BD1A6","@yuque-green-8":"#97D8BC","@yuque-green-9":"#BCE6D5","@cyan-50":"#122324","@cyan-100":"#123436","@cyan-200":"#255356","@cyan-300":"#1A7074","@cyan-400":"#278B90","@cyan-500":"#22A8AF","@cyan-600":"#4EB6BC","@cyan-700":"#76C2C6","@cyan-800":"#95D7DB","@cyan-900":"#BFE1E3","@cyan-1":"#123436","@cyan-2":"#255356","@cyan-3":"#1A7074","@cyan-4":"#278B90","@cyan-5":"#22A8AF","@cyan-6":"#4EB6BC","@cyan-7":"#76C2C6","@cyan-8":"#95D7DB","@cyan-9":"#BFE1E3","@blue-50":"#15212D","@blue-100":"#193048","@blue-200":"#253C56","@blue-300":"#1D4672","@blue-400":"#245A94","@blue-500":"#2B6BB1","@blue-600":"#3B82CE","@blue-700":"#689FD9","@blue-800":"#8DB5E2","@blue-900":"#B5D0ED","@blue-1":"#193048","@blue-2":"#253C56","@blue-3":"#1D4672","@blue-4":"#245A94","@blue-5":"#2B6BB1","@blue-6":"#3B82CE","@blue-7":"#689FD9","@blue-8":"#8DB5E2","@blue-9":"#B5D0ED","@sea-blue-50":"#171C33","@sea-blue-100":"#1C2654","@sea-blue-200":"#252D56","@sea-blue-300":"#1B2A74","@sea-blue-400":"#243694","@sea-blue-500":"#2B41B1","@sea-blue-600":"#3B54CE","@sea-blue-700":"#687BD9","@sea-blue-800":"#8D9BE2","@sea-blue-900":"#B5BEED","@sea-blue-1":"#1C2654","@sea-blue-2":"#252D56","@sea-blue-3":"#1B2A74","@sea-blue-4":"#243694","@sea-blue-5":"#2B41B1","@sea-blue-6":"#3B54CE","@sea-blue-7":"#687BD9","@sea-blue-8":"#8D9BE2","@sea-blue-9":"#B5BEED","@purple-50":"#1F172E","@purple-100":"#2C1C4A","@purple-200":"#352259","@purple-300":"#3A1C73","@purple-400":"#512A98","@purple-500":"#5A2CAF","@purple-600":"#7551B8","@purple-700":"#9677CF","@purple-800":"#B099DB","@purple-900":"#CABCE7","@purple-1":"#2C1C4A","@purple-2":"#352259","@purple-3":"#3A1C73","@purple-4":"#512A98","@purple-5":"#5A2CAF","@purple-6":"#7551B8","@purple-7":"#9677CF","@purple-8":"#B099DB","@purple-9":"#CABCE7","@magenta-50":"#301525","@magenta-100":"#4E1837","@magenta-200":"#5B1F42","@magenta-300":"#701F4E","@magenta-400":"#942465","@magenta-500":"#A43776","@magenta-600":"#BE4B8E","@magenta-700":"#CE78AA","@magenta-800":"#D996BD","@magenta-900":"#E6BCD5","@magenta-1":"#4E1837","@magenta-2":"#5B1F42","@magenta-3":"#701F4E","@magenta-4":"#942465","@magenta-5":"#A43776","@magenta-6":"#BE4B8E","@magenta-7":"#CE78AA","@magenta-8":"#D996BD","@magenta-9":"#E6BCD5","@red-50":"#29191C","@red-100":"#402125","@red-200":"#5B2027","@red-300":"#741B25","@red-400":"#981F2D","@red-500":"#B62536","@red-600":"#CA3F4F","@red-700":"#CC7B84","@red-800":"#D49199","@red-900":"#E6BCC1","@red-1":"#402125","@red-2":"#5B2027","@red-3":"#741B25","@red-4":"#981F2D","@red-5":"#B62536","@red-6":"#CA3F4F","@red-7":"#CC7B84","@red-8":"#D49199","@red-9":"#E6BCC1","@vermilion-50":"#271C19","@vermilion-100":"#3C2520","@vermilion-200":"#5B2B20","@vermilion-300":"#742B1B","@vermilion-400":"#943824","@vermilion-500":"#B0432B","@vermilion-600":"#CD573C","@vermilion-700":"#D9816D","@vermilion-800":"#E09685","@vermilion-900":"#E9C2B9","@vermilion-1":"#3C2520","@vermilion-2":"#5B2B20","@vermilion-3":"#742B1B","@vermilion-4":"#943824","@vermilion-5":"#B0432B","@vermilion-6":"#CD573C","@vermilion-7":"#D9816D","@vermilion-8":"#E09685","@vermilion-9":"#E9C2B9","@orange-50":"#251E18","@orange-100":"#382A1E","@orange-200":"#5E3B1D","@orange-300":"#774418","@orange-400":"#9D571B","@orange-500":"#BC6820","@orange-600":"#D37F36","@orange-700":"#DE9F68","@orange-800":"#E0AF85","@orange-900":"#E9CFB9","@orange-1":"#382A1E","@orange-2":"#5E3B1D","@orange-3":"#774418","@orange-4":"#9D571B","@orange-5":"#BC6820","@orange-6":"#D37F36","@orange-7":"#DE9F68","@orange-8":"#E0AF85","@orange-9":"#E9CFB9","@yellow-50":"#241F15","@yellow-100":"#352D17","@yellow-200":"#564825","@yellow-300":"#775C18","@yellow-400":"#9C781C","@yellow-500":"#C29219","@yellow-600":"#D2A638","@yellow-700":"#E8BE54","@yellow-800":"#EFCF81","@yellow-900":"#EEDEB4","@yellow-1":"#352D17","@yellow-2":"#564825","@yellow-3":"#775C18","@yellow-4":"#9C781C","@yellow-5":"#C29219","@yellow-6":"#D2A638","@yellow-7":"#E8BE54","@yellow-8":"#EFCF81","@yellow-9":"#EEDEB4","@bright-yellow-50":"#242215","@bright-yellow-100":"#353117","@bright-yellow-200":"#564F25","@bright-yellow-300":"#776A18","@bright-yellow-400":"#9C8B1C","@bright-yellow-500":"#C2AC19","@bright-yellow-600":"#D2BD38","@bright-yellow-700":"#E8D454","@bright-yellow-800":"#EFE081","@bright-yellow-900":"#EEE7B4","@bright-yellow-1":"#353117","@bright-yellow-2":"#564F25","@bright-yellow-3":"#776A18","@bright-yellow-4":"#9C8B1C","@bright-yellow-5":"#C2AC19","@bright-yellow-6":"#D2BD38","@bright-yellow-7":"#E8D454","@bright-yellow-8":"#EFE081","@bright-yellow-9":"#EEE7B4","@brown-50":"#231E15","@brown-100":"#342A18","@brown-200":"#544327","@brown-300":"#624E2D","@brown-400":"#7E653A","@brown-500":"#967845","@brown-600":"#B29158","@brown-700":"#C2A87A","@brown-800":"#D2BF9D","@brown-900":"#E2D6C0","@brown-1":"#342A18","@brown-2":"#544327","@brown-3":"#624E2D","@brown-4":"#7E653A","@brown-5":"#967845","@brown-6":"#B29158","@brown-7":"#C2A87A","@brown-8":"#D2BF9D","@brown-9":"#E2D6C0","@yuque-color-theme":"#2ED790","@yuque-color-normal":"#424242","@yuque-color-bg-primary":"#141414","@yuque-color-bg-secondary":"#1F1F1F","@yuque-color-bg-tertiary":"rgba(255, 255, 255, 0.04)","@yuque-color-bg-primary-hover":"rgba(255, 255, 255, 0.12)","@yuque-color-bg-primary-hover-light":"#333333","@yuque-color-bg-foreground":"#1F1F1F","@yuque-color-bg-pre-foreground":"#292929","@yuque-color-bg-pre-secondary":"#292929","@yuque-color-mask-bg":"rgba(0, 0, 0, 0.65)","@yuque-color-toast-bg":"#292929","@yuque-color-border-primary":"rgba(255, 255, 255, 0.12)","@yuque-color-border-primary-active":"#29AD76","@yuque-color-border-light":"rgba(255, 255, 255, 0.08)","@yuque-color-border-heavy":"rgba(255, 255, 255, 0.12)","@yuque-color-cardborder-hover":"#253C56","@yuque-color-cardborder-selected":"#1D4672","@yuque-color-sheetborder":"rgba(255, 255, 255, 0.12)","@yuque-color-text-primary":"#E2E2E2","@yuque-color-text-body":"#B3B3B3","@yuque-color-text-caption":"#848484","@yuque-color-text-disable":"#505050","@yuque-color-text-link":"#3B82CE","@yuque-color-text-link-hover":"#245A94","@yuque-color-icon-primary":"#E2E2E2","@yuque-color-icon-secondary":"#B3B3B3","@yuque-color-icon-caption":"#848484","@yuque-color-icon-disable":"#505050","@yuque-color-icon-hover":"#424242","@yuque-color-icon-colorbg":"rgba(0, 0, 0, 0.45)","@yuque-color-function-success":"#51B88D","@yuque-color-function-info":"#3B82CE","@yuque-color-function-warning":"#D2A638","@yuque-color-function-error":"#CA3F4F","@yuque-color-badge":"#2B6BB1","@yuque-color-popover-bg":"#1F1F1F","@yuque-color-disable-color":"#505050"}}},236:function(e,t,n){var r=n(139),o=n(303),a=n(99),i=Function.prototype,l=Object.prototype,c=i.toString,s=l.hasOwnProperty,u=c.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=s.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==u}},2661:function(e,t,n){"use strict";var r=n(10),o=n(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},i=n(27),l=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a}))};l.displayName="WarningOutlined";t.a=o.forwardRef(l)},274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1425);Object.defineProperty(t,"Alpha",{enumerable:!0,get:function(){return d(r).default}});var o=n(887);Object.defineProperty(t,"Checkboard",{enumerable:!0,get:function(){return d(o).default}});var a=n(1427);Object.defineProperty(t,"EditableInput",{enumerable:!0,get:function(){return d(a).default}});var i=n(1428);Object.defineProperty(t,"Hue",{enumerable:!0,get:function(){return d(i).default}});var l=n(1429);Object.defineProperty(t,"Raised",{enumerable:!0,get:function(){return d(l).default}});var c=n(1431);Object.defineProperty(t,"Saturation",{enumerable:!0,get:function(){return d(c).default}});var s=n(1432);Object.defineProperty(t,"ColorWrap",{enumerable:!0,get:function(){return d(s).default}});var u=n(1435);function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Swatch",{enumerable:!0,get:function(){return d(u).default}})},275:function(e,t,n){"use strict";n(1388);var r=n(394),o=n(0),a=n.n(o),i=n(2),l=n.n(i),c=n(9),s=n.n(c),u=n(69),d=n.n(u);n(1258);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var p=["className","title"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var y=a.a.forwardRef((function(e,t){var n=e.className,o=e.title,i=b(e,p),l={},c=s()("larkui-skeleton",n);return o?(o.size&&(c=s()(c,{"larkui-skeleton-title-sm":"sm"===o.size})),o.width&&(l.title={width:o.width})):l.title=o,a.a.createElement(r.a,g({className:c,ref:t},l,i))}));y.propTypes=m(m({},r.a.SkeletonProps),{},{className:l.a.string}),d()(y,r.a),t.a=y},2774:function(e,t,n){"use strict";var r=n(34),o=n.n(r);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),l=new S(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var p={};function h(){}function m(){}function v(){}var g={};u(g,l,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(R([])));y&&y!==t&&n.call(y,l)&&(g=y);var w=v.prototype=h.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(r,i,l,c){var s=f(e[r],e,i);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==a(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,l,c)}),(function(e){o("throw",e,l,c)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return o("throw",e,l,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=C(i,n);if(l){if(l===p)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return m.prototype=v,r(w,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,c,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new x(d(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(w),u(w,s,"Generator"),u(w,l,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function l(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}var f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.doc=t,this.engine=n,this.emitter=new o.a}var t,n,r,a,d;return t=e,n=[{key:"resetDoc",value:function(e){this.doc=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}},{key:"init",value:function(e){e.content,e.onFocus}},{key:"initCollabDoc",value:function(e){}},{key:"setContent",value:function(e){}},{key:"appendContent",value:function(e){}},{key:"getValue",value:function(){return null}},{key:"getPureContent",value:function(){return null}},{key:"getSummaryContent",value:function(){return null}},{key:"getEditorContent",value:function(e){return{content:"",html:null,premium:null,premiumHtml:null}}},{key:"getThumbnail",value:function(){return""}},{key:"getDocMeta",value:function(e){return null}},{key:"updateDocEditorMeta",value:function(e){var t=this;["meta_draft","meta"].forEach((function(n){var r="editor_".concat(n);e[n]&&(t.doc[r]=e[n])}))}},{key:"getPremium",value:function(){return null}},{key:"getWordCount",value:function(e){return e&&e(-1),0}},{key:"getSummary",value:function(e){e({summary:null,cover:null})}},{key:"isEmpty",value:function(){return!1}},{key:"isFocus",value:function(){return!1}},{key:"hasUserChanged",value:function(){return!0}},{key:"resetUserChanged",value:function(){}},{key:"disable",value:function(){}},{key:"enable",value:function(){}},{key:"readonly",value:function(e){}},{key:"focus",value:function(e){}},{key:"focusToEnd",value:function(e){}},{key:"focusBlankDoc",value:function(){}},{key:"onBeforeSave",value:(a=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})),d=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=a.apply(e,t);function i(e){l(o,n,r,i,c,"next",e)}function c(e){l(o,n,r,i,c,"throw",e)}i(void 0)}))},function(){return d.apply(this,arguments)})},{key:"isContentReady",value:function(){return!0}},{key:"reset",value:function(e){}},{key:"getOriginEngine",value:function(){return this.engine}},{key:"getCollabMembers",value:function(e){return[]}},{key:"setCollabMembers",value:function(){}},{key:"addCollabMember",value:function(){}},{key:"removeCollabMember",value:function(){}},{key:"setCurrentMember",value:function(){}},{key:"onCommandError",value:function(e){}},{key:"onCommandEnd",value:function(e){}},{key:"getReportValue",value:function(){return null}}],n&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=f},2803:function(e,t,n){"use strict";var r=n(33),o={epv:function(e){var t=e.type,n=e.id;r.a.logs.activity({type:t,action:"epv",id:n})}};t.a=o},282:function(e,t,n){"use strict";n(1255);var r=n(596);n(1097);t.a=r.a},2832:function(e,t,n){"use strict";function r(e){return Array.isArray(e.children)}function o(e){return"number"==typeof e.id}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},2836:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0);function o(e,t){0}var a=n(30),i=n(113),l=["type"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.forwardRef((function(e,t){var n=e.type,u=s(e,l),d=i.DOC_ICON_MAP[n.toLowerCase()];return d||(o(0,"There is no valid icon for type: ".concat(n)),d=i.DOC_ICON_MAP.doc),r.createElement(a.a,c({ref:t,name:d},u))}));u.displayName="DocIcon"},2837:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(a=o.key,i=void 0,i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===r(i)?i:String(i)),o)}var a,i}var a="x-yuque-pt-signature",i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.query=new URLSearchParams(window.location.search),this.isServify=!!this.get(a),this.viewport=this.get("viewport"),this.sidebar="0"===this.get("toc_sidebar")?"none":"toc",this.cards=this.get("cards").split(",").map((function(e){return e.trim()})).filter((function(e){return!!e})),this.thirdpartyCards=this.get("thirdparty_cards")?this.get("thirdparty_cards").split(",").map((function(e){return e.trim()})).filter((function(e){return!!e})):[],this.showTitle="0"!==this.get("title"),this.showHeader="0"!==this.get("header"),this.isEmbedMode=this.get("mode").startsWith("embed"),this.autoHeight=this.getAutoHeight(),this.editorType=this.get("editor_type"),this.editorMode=this.get("editor_mode"),this.language=this.get("language")||"zh-cn",this.pageMinWidth=this.get("page_min_width"),this.onchange="1"===this.get("onchange"),this.allowMention="0"!==this.get("mention"),this.allowResource="1"===this.get("resource"),this.watermark=this.get("watermark"),this.backgroundColor=this.get("background_color"),this.bodyBackgroundColor=this.get("body_background_color"),this.toolbarBackgroundColor=this.get("toolbar_background_color"),this.autoSaveInterval=this.getAutoSaveInterval(),this.saveToServer="0"!==this.get("save_to_server"),this.customUploadUrl=this.get("upload_url"),this.customUploadTypes=this.get("upload_types"),this.customMentionUrl=this.getMentionUrl(),this.customMentionOrigin=this.get("search_user_origin"),this.imageUploadUrl=this.getImageUploadUrl(),this.fileUploadUrl=this.getFileUploadUrl(),this.videoUploadUrl=this.getVideoUploadUrl(),this.videoUploadStatusUrl=this.getVideoUploadStatusUrl(),this.fullHTML="1"===this.query.get("full_html"),this.allowResizeVideo=!0,this.extraConfig=JSON.parse(this.query.get("extra_config")||"{}")}var t,n,r;return t=e,(n=[{key:"get",value:function(e){return this.query.get(e)||""}},{key:"getAutoHeight",value:function(){return!window.h5&&"0"!==this.get("auto_height")}},{key:"getAutoSaveInterval",value:function(){var e=this.get("auto_save_interval");return e&&!Number.isNaN(Number(e))?((e=Number(e))<60&&(e=60),1e3*e):null}},{key:"getMentionUrl",value:function(){var e=this.get("search_user_url");return this._joinCsrf(e)}},{key:"getImageUploadUrl",value:function(){return this.customUploadTypes&&this.customUploadTypes.includes("image")?"".concat(this._joinCsrf(this.customUploadUrl),"&type=image"):null}},{key:"getFileUploadUrl",value:function(){return this.customUploadTypes&&this.customUploadTypes.includes("attachment")?"".concat(this._joinCsrf(this.customUploadUrl),"&type=attachment"):null}},{key:"getVideoUploadUrl",value:function(){var e=this.get("upload_video_url");return e?this._joinCsrf(e):null}},{key:"getVideoUploadStatusUrl",value:function(){var e=this.get("upload_video_status_url");return e?this._joinCsrf(e):null}},{key:"_joinCsrf",value:function(e){var t=e.includes("?")?"&":"?";return"".concat(e).concat(t).concat(this._getCustomCsrf())}},{key:"_getCustomCsrf",value:function(){var e=this.get("upload_csrf_token_field"),t=this.get("upload_csrf_token_value");return e?"".concat(e,"=").concat(encodeURIComponent(t)):""}},{key:"isExtremeMode",value:function(){return"extreme"===this.editorMode}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();i.isServify=function(){var e=new URLSearchParams(window.location.search).get("from");if(!e)return!1;try{if(new URL(e).searchParams.get(a))return!0}catch(e){}return!1},i.SERVIFY_TAG_SRT=a,t.a=i},2839:function(e,t,n){var r=n(1193).EventEmitter;t.EventEmitter=r,t.mixin=function(e){for(var t in r.prototype)e.prototype[t]=r.prototype[t]}},2840:function(e,t){t.doNothing=function(){},t.hasKeys=function(e){for(var t in e)return!0;return!1},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isValidVersion=function(e){return null===e||t.isInteger(e)&&e>=0},t.isValidTimestamp=function(e){return t.isValidVersion(e)},t.MAX_SAFE_INTEGER=9007199254740991},291:function(e,t,n){"use strict";n(1186);var r=n(313),o=n(0),a=n.n(o),i=n(2),l=n.n(i),c=n(69),s=n.n(c),u=n(9),d=n.n(u);n(844);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=a.a.forwardRef((function(e,t){var n=e.className,i=e.overlayClassName,l=e.type,c=e.noArrow,s=e.hideWhenInactive,u=e.content,f=g(Object(o.useState)(e.visible||e.defaultVisible),2),p=f[0],h=f[1];Object(o.useEffect)((function(){"visible"in e&&h(e.visible)}),[e.visible]);var m=function(t){"visible"in e||h(t),e.onVisibleChange&&e.onVisibleChange(t)};return a.a.createElement(r.a,v({},e,{className:d()(n,"larkui-popover-trigger"),overlayClassName:d()(i,{"larkui-popover":!0,"larkui-popover-menu":"menu"===l,"larkui-popover-no-arrow":c}),content:s?a.a.createElement("div",{onClick:function(){m(!1)}},u):u,ref:t,visible:p,onVisibleChange:m}))}));y.propTypes=h(h({},r.a.PopoverProps),{},{type:l.a.oneOf(["menu"]),content:l.a.node,children:l.a.node,className:l.a.string,overlayClassName:l.a.string,noArrow:l.a.bool,hideWhenInactive:l.a.bool}),s()(y,r.a),t.a=y},2914:function(e,t,n){"use strict";var r=n(1190),o=n(34),a=n.n(o),i=n(231),l=n.n(i),c=n(106);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function y(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}var k=new(n.n(c).a)("connect_base"),x={connectionTimeout:2e4,maxRetries:0,heartBeatInterval:5e3,congestionTimeout:3e3},E="connecting",C="offline",O="connected",_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(i,e);var t,n,o,a=m(i);function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,i),y(g(t=a.call(this)),"onOpen",(function(){k("connected"),t.status=O,t.stopCongestionMonitor(),t.emit("ready",t.socket),t._heartBeat=null})),y(g(t),"onClose",(function(e){k("close",{retryCount:t.socket.retryCount,readyState:t.socket.readyState}),t.disconnect(),t.emit("close",e)})),y(g(t),"onMessage",(function(e){try{var n=JSON.parse(e.data);t.pong(n)}catch(t){k("invalid message",e.data)}})),y(g(t),"onError",(function(e){k("error",{message:e.message,retryCount:t.socket.retryCount,readyStatus:t.socket.readyState,error:e}),"TIMEOUT"===e.message&&(t.status=C),t.emit("error",e)})),t.url=e,t.socket=null,t.status=null,t._heartBeat=null,t.heartBeatInterval=n.heartBeatInterval||x.heartBeatInterval,t.option=d(d({},x),n),t.connect(),t}return t=i,(n=[{key:"connect",value:function(){this.status=E;var e=new r.a(this.url,[],this.option);this.socket=e,e.addEventListener("open",this.onOpen),e.addEventListener("close",this.onClose),e.addEventListener("message",this.onMessage),e.addEventListener("error",this.onError),this.startCongestionMonitor()}},{key:"startCongestionMonitor",value:function(){var e=this;this.stopCongestionMonitor(),this.congestTimer=setTimeout((function(){e.emit("congestion")}),this.option.congestionTimeout)}},{key:"stopCongestionMonitor",value:function(){this.congestTimer&&clearTimeout(this.congestTimer)}},{key:"disconnect",value:function(){this.stopHeartBeat(),this.stopCongestionMonitor(),this.socket&&(this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.removeEventListener("error",this.onError),this.socket.close(),this.socket=null),this.status=C}},{key:"ping",value:function(){var e=this;if(this.socket){var t={action:"heartbeat",pingId:l()(10),pingAt:+new Date};this._heartBeat&&this.transmitNetStatus("congestion"),this._heartBeat=t,this.socket.send(JSON.stringify(t)),this.status!==C&&(this.pingTimer=setTimeout((function(){e.ping()}),this.heartBeatInterval))}}},{key:"pong",value:function(e){e&&"heartbeat"===e.action&&this._heartBeat&&this._heartBeat.pingId===e.pingId&&(new Date-this._heartBeat.pingAt>this.option.congestionTimeout?this.transmitNetStatus("congestion"):this.transmitNetStatus("congestionEnd"),this._heartBeat=null)}},{key:"transmitNetStatus",value:function(e){this.netStatus!==e&&(this.emit(e),this.netStatus=e)}},{key:"stopHeartBeat",value:function(){this.pingTimer&&clearTimeout(this.pingTimer)}},{key:"startHeartBeat",value:function(){var e=this;this.pingTimer=setTimeout((function(){e.ping()}),1e3)}},{key:"broadcast",value:function(e,t){if(this.socket){var n={action:"broadcast",data:{type:e,body:t,sender:t.user}};this.socket.send(JSON.stringify(n))}}}])&&p(t.prototype,n),o&&p(t,o),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.a);t.a=_},2916:function(e,t,n){var r=new(n(3019));e.exports=r},2917:function(e,t){function n(e,t){this.code=e,this.message=t||"",Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=(new Error).stack}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.name="ShareDBError",n.CODES={ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT:"ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT",ERR_APPLY_SNAPSHOT_NOT_PROVIDED:"ERR_APPLY_SNAPSHOT_NOT_PROVIDED",ERR_CLIENT_ID_BADLY_FORMED:"ERR_CLIENT_ID_BADLY_FORMED",ERR_CONNECTION_SEQ_INTEGER_OVERFLOW:"ERR_CONNECTION_SEQ_INTEGER_OVERFLOW",ERR_CONNECTION_STATE_TRANSITION_INVALID:"ERR_CONNECTION_STATE_TRANSITION_INVALID",ERR_DATABASE_ADAPTER_NOT_FOUND:"ERR_DATABASE_ADAPTER_NOT_FOUND",ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE:"ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE",ERR_DATABASE_METHOD_NOT_IMPLEMENTED:"ERR_DATABASE_METHOD_NOT_IMPLEMENTED",ERR_DEFAULT_TYPE_MISMATCH:"ERR_DEFAULT_TYPE_MISMATCH",ERR_DOC_MISSING_VERSION:"ERR_DOC_MISSING_VERSION",ERR_DOC_ALREADY_CREATED:"ERR_DOC_ALREADY_CREATED",ERR_DOC_DOES_NOT_EXIST:"ERR_DOC_DOES_NOT_EXIST",ERR_DOC_TYPE_NOT_RECOGNIZED:"ERR_DOC_TYPE_NOT_RECOGNIZED",ERR_DOC_WAS_DELETED:"ERR_DOC_WAS_DELETED",ERR_INFLIGHT_OP_MISSING:"ERR_INFLIGHT_OP_MISSING",ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION:"ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION",ERR_MAX_SUBMIT_RETRIES_EXCEEDED:"ERR_MAX_SUBMIT_RETRIES_EXCEEDED",ERR_MESSAGE_BADLY_FORMED:"ERR_MESSAGE_BADLY_FORMED",ERR_MILESTONE_ARGUMENT_INVALID:"ERR_MILESTONE_ARGUMENT_INVALID",ERR_OP_ALREADY_SUBMITTED:"ERR_OP_ALREADY_SUBMITTED",ERR_OP_NOT_ALLOWED_IN_PROJECTION:"ERR_OP_NOT_ALLOWED_IN_PROJECTION",ERR_OP_SUBMIT_REJECTED:"ERR_OP_SUBMIT_REJECTED",ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM:"ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM",ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM:"ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM",ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT:"ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT",ERR_OT_OP_BADLY_FORMED:"ERR_OT_OP_BADLY_FORMED",ERR_OT_OP_NOT_PROVIDED:"ERR_OT_OP_NOT_PROVIDED",ERR_PROTOCOL_VERSION_NOT_SUPPORTED:"ERR_PROTOCOL_VERSION_NOT_SUPPORTED",ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED:"ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED",ERR_SNAPSHOT_READ_SILENT_REJECTION:"ERR_SNAPSHOT_READ_SILENT_REJECTION",ERR_SNAPSHOT_READS_REJECTED:"ERR_SNAPSHOT_READS_REJECTED",ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND:"ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND",ERR_TYPE_CANNOT_BE_PROJECTED:"ERR_TYPE_CANNOT_BE_PROJECTED",ERR_UNKNOWN_ERROR:"ERR_UNKNOWN_ERROR"},e.exports=n},2918:function(e,t,n){t.defaultType=n(353).type,t.map={},t.register=function(e){e.name&&(t.map[e.name]=e),e.uri&&(t.map[e.uri]=e)},t.register(t.defaultType)},2923:function(e,t,n){"use strict";n.d(t,"d",(function(){return E})),n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return _})),n.d(t,"c",(function(){return S}));var r=n(0),o=n(2944),a=n(3016),i=n(446),l=n(964),c=n(2832),s=n(2941),u=n(2943),d=n(156);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(){p=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),l=new S(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function h(){}function m(){}function v(){}var g={};c(g,a,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(R([])));y&&y!==t&&n.call(y,a)&&(g=y);var w=v.prototype=h.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==f(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=C(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return m.prototype=v,r(w,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:m,configurable:!0}),m.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(x.prototype),c(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(w),c(w,l,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function h(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w={book:__("来自本知识库模板"),group:__("来自本团队模板"),personal:__("来自我的模板"),official:__("来自语雀推荐模板")},k={78800030:"d306371",78800031:"d306372",78800039:"d306375",79500091:"d306379",79500089:"d306378",78800043:"d306377",78800040:"d306376",78800034:"d306373"},x={18063158:"d306371",18063159:"d306372",18063161:"d306375",18066206:"d306379",18063164:"d306377",18063162:"d306376",18063160:"d306373"};function E(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=[],r=e.data.reduce((function(e,t){return e[t.id]=t,e}),{}),o=e.meta,a=o.book,i=o.group,l=o.personal,c=o.official,s=c,u=[].concat(b(((null==a?void 0:a.template_ids)||[]).map((function(e){return["book",e]}))),b(((null==i?void 0:i.template_ids)||[]).map((function(e){return["group",e]}))),b(((null==l?void 0:l.template_ids)||[]).map((function(e){return["personal",e]}))),b(("zh-cn"===window.appData.locale&&Array.isArray(null==s?void 0:s.template_ids)&&(null==s?void 0:s.template_ids)||[]).map((function(e){return["official",e]}))));n.length<t&&u.length;){var d=u.shift();if(d){var f=r[d[1]];f&&n.push(v(v({},f),{},{from:w[d[0]]}))}}return n}var C=function(e){var t=e.book,n=e.group,o=e.onUseTemplate,a=e.templateConfig,s=Object(l.a)(),u=s.loadTemplateSelector,d=s.showTemplateSelector,f=s.contextHolder;r.useEffect((function(){u()}),[]);var m=r.useMemo((function(){return E(a)}),[a]),v=function(){var e,r=(e=p().mark((function e(){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({book:t,group:n});case 2:(r=e.sent)&&Object(c.a)(r)&&o(r,!0);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,l,"next",e)}function l(e){h(a,r,o,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return{state:{templateList:m},handleTemplateItemClick:function(e){var t,n;o(e);var r=(null!==(t=window.appData)&&void 0!==t&&t.isYuque?x[e.id]:k[e.id])||"d306374";Object(i.a)("b4693.c303187.".concat(r),{inner:null!==(n=window.appData)&&void 0!==n&&n.isYuque?"0":"1"})},handleMoreTemplateClick:v,contextHolder:f}},O=function(e){var t=e.template,n=t||{},o=n.from,a=n.meta,i=null;return null!=a&&a.description?i=r.createElement("div",{className:u.a.desc},a.description):o&&(i=r.createElement("div",{className:u.a.desc},o)),r.createElement(r.Fragment,null,r.createElement("div",{className:u.a.docIconWrapper},r.createElement(s.a,{className:u.a.docIcon,node:t,size:"large"})),r.createElement("div",{className:u.a.tip},r.createElement("div",{className:u.a.name,title:t.name},t.name),i))},_=function(e){var t=e.title,n=e.imgSrc;return r.createElement(r.Fragment,null,r.createElement("div",{className:u.a.moreImg},r.createElement("img",{src:n,alt:t})),r.createElement("div",{className:u.a.tip},r.createElement("div",{className:u.a.name},t)))},S=r.forwardRef((function(e,t){var n=C(e),i=Object(d.c)().isDarkMode,l=n.state.templateList,c=n.handleTemplateItemClick,s=n.handleMoreTemplateClick,f=n.contextHolder;return r.createElement("div",{ref:t},l.length>0?r.createElement("ul",{className:u.a.list},l.map((function(e,t){var n,i=1e3*(null!==(n=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9][t])&&void 0!==n?n:1)+.1;return r.createElement(o.Spring,{from:{marginTop:30,opacity:0},to:{marginTop:0,opacity:1},config:{duration:300,easing:a.b,delay:i},key:t},(function(t){return r.createElement("li",{key:e.id,className:u.a.item,onClick:function(){return c(e)},title:e.name,"data-aspm-click":"b4693.c100045.d207095",style:t},r.createElement(O,{template:e}))}))})),e.needMore?r.createElement(o.Spring,{from:{marginTop:30,opacity:0},to:{marginTop:0,opacity:1},config:{duration:300,easing:a.b,delay:.1*l.length+.1}},(function(e){return r.createElement("li",{className:u.a.item,onClick:s,style:e},r.createElement(_,{key:"official",title:__("更多模板"),imgSrc:i?"https://gw.alipayobjects.com/zos/bmw-prod/6518ac5a-760d-4289-ad7c-71a2dbfea622.svg":"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*Tt8DRr2oSUwAAAAAAAAAAAAAARQnAQ"}))})):null):null,f)}))},2929:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(0),o=n(2836),a="RecentDocs-module_tip_n1Nmq",i="RecentDocs-module_docItem_GCIP4",l="RecentDocs-module_title_O3oxy",c="RecentDocs-module_icon_e5am+",s=function(e){var t=e.doc,n=e.onClick,a=e.hidden;return r.createElement("li",{className:i,style:{display:a?"none":"flex"},onClick:function(){return n(t)},title:t.title,"data-aspm-click":"b4693.c100045.d207096"},r.createElement(o.a,{className:c,type:t.type}),r.createElement("div",{className:l},t.title))},u=function(e){var t=e.height,n=e.onUseTemplate,o=e.recentDocs,i=r.useMemo((function(){var e=t>0?Math.floor((t-24)/58):0;return Math.min(e,o.length)}),[t,o.length]);return r.createElement("div",null,i>0?r.createElement("div",{className:a},__("从最近编辑的文档中复制内容过来：")):null,r.createElement("ul",null,o.map((function(e,t){return r.createElement(s,{key:e.id,doc:e,hidden:t+1>i,onClick:function(e){return n(e,!1)}})}))))}},2930:function(e,t,n){"use strict";var r=n(1702);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a={adaptDocToDocument:function(e){return{origin:"database",format:e.format,draft_version:e.draft_version,base_timestamp:e.content_updated_at,value:this.adaptBodyToContent(e)}},adaptBodyToContent:function(e){var t;return"object"===o(t=r.FORMATS_SAVE_TO_BODY_ASL.includes(e.format)?e.body_draft_asl||e.body_asl||"":e.body_draft||e.body||"")&&(t=JSON.stringify(t)),t.trim()},adaptCacheDataToDocument:function(e,t){if(!e)return null;try{var n=JSON.parse(e);return"object"!==o(n)?null:["lakesheet","spreadjs"].includes(t)&&n.doc?{origin:"cache",format:t,draft_version:n.doc.data.draft_version,value:n.doc.value}:{origin:"cache",format:t,draft_version:n.draft_version,base_timestamp:n.base_timestamp||null,value:n.content}}catch(e){throw e}},adaptChangeToCacheData:function(e,t){var n={draft_version:e.draft_version,base_timestamp:t,content:e.value};return JSON.stringify(n)},adapterDocumentContent:function(e){return"string"==typeof e.value?e.value:"object"===o(e.value)?JSON.stringify(e.value):""}};t.a=a},2941:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return b}));n(279);var r=n(136),o=(n(166),n(31)),a=n(0),i=n(191),l=n(30),c=n(2836),s=n(2832),u="TemplateTreeItem-module_item_rGFbi",d="TemplateTreeItem-module_title_15bPv",f="TemplateTreeItem-module_docIcon_494bD",p="TemplateTreeItem-module_name_kpLbs",h="TemplateTreeItem-module_menuItem_FWIgC",m="TemplateTreeItem-module_more_ikuvF",v="TemplateTreeItem-module_actionIcon_haD5C",g=a.memo((function(e){var t=e.node,n=e.className,r=e.size,o=void 0===r?"small":r;if(!Object(s.a)(t))return null;var l,u=Object(s.a)(t)&&i.FORMAT_TYPE_MAP[t.format],d=t.cover;return t.type===i.TYPE.OFFICIAL?d?a.createElement("span",{className:n},a.createElement("img",{src:d,style:{width:"100%"}})):a.createElement("span",{className:n,style:{fontSize:"large"===o?26:18}},((null===(l=t.meta)||void 0===l?void 0:l.character)||"📃").trim()):a.createElement(c.a,{width:"large"===o?26:22,className:n,type:u})})),b=a.memo((function(e){var t=e.data,n=e.hasActions,i=e.onAction,c=t;return a.createElement("div",{className:u},a.createElement("div",{className:d},Object(s.a)(c)&&a.createElement(g,{className:f,node:c}),a.createElement("span",{className:p,title:c.name},c.name),n&&a.createElement("span",{onClick:function(e){return e.stopPropagation()}},a.createElement(r.a,{type:"menu",hideWhenInactive:!0,placement:"bottomRight",arrowPointAtCenter:!0,trigger:["click"],content:a.createElement(o.a,{selectable:!1},a.createElement(o.a.Item,{key:"edit",className:h,onClick:function(){return null==i?void 0:i("edit",c)}},a.createElement(l.b,{name:"pencil-underscore",width:16,className:v}),__("编辑")),a.createElement(o.a.Item,{key:"delete",className:h,onClick:function(){return null==i?void 0:i("delete",c)}},a.createElement(l.b,{name:"icon-delete",width:16,className:v}),__("删除")))},a.createElement("span",{className:m,onClick:function(e){return e.stopPropagation()}},a.createElement(l.b,{name:"more",width:16}))))))}))},2942:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(34);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function u(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(c,e);var t,n,r,o=l(c);function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=o.call(this)).ctx=e,n.renderCtx=t,n.ref=t.createRef(),n}return t=c,(n=[{key:"init",value:function(){}},{key:"didMount",value:function(){}},{key:"willUnMount",value:function(){}},{key:"render",value:function(){}},{key:"enable",value:function(){return!0}},{key:"active",value:function(){}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.n(r).a);u(f,"pluginName",""),u(f,"description","")},2943:function(e,t,n){"use strict";t.a={list:"TemplateList-module_list_7Gkfr",item:"TemplateList-module_item_SpAc7",tip:"TemplateList-module_tip_UaJ8v",name:"TemplateList-module_name_ywSQW",desc:"TemplateList-module_desc_hb3sC",docIconWrapper:"TemplateList-module_docIconWrapper_Gvaw8",moreImg:"TemplateList-module_moreImg_12JlL"}},2944:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2367)),a=r(n(2657)),i=r(n(4)),l=r(n(48)),c=r(n(0)),s=r(n(36)),u=void 0,d=void 0,f=[],p=function(e){return"undefined"!=typeof window&&window.requestAnimationFrame(e)},h=function(e){return"undefined"!=typeof window&&window.cancelAnimationFrame(e)},m=void 0,v=function(){return Date.now()},g=void 0,b=void 0,y=function(e,t){return d={fn:e,transform:t}},w=function(e){return f=e},k=function(e){return u=e},x=function(e){return m=e},E=function(e){return g=e},C=function(e){return b=e},O=Object.freeze({get bugfixes(){return u},get applyAnimatedValues(){return d},get colorNames(){return f},get requestFrame(){return p},get cancelFrame(){return h},get interpolation(){return m},get now(){return v},get defaultElement(){return g},get createAnimatedStyle(){return b},injectApplyAnimatedValues:y,injectColorNames:w,injectBugfixes:k,injectInterpolation:x,injectFrame:function(e,t){var n;return p=(n=[e,t])[0],h=n[1],n},injectNow:function(e){return v=e},injectDefaultElement:E,injectCreateAnimatedStyle:C}),_=function(){function e(){}var t=e.prototype;return t.attach=function(){},t.detach=function(){},t.getValue=function(){},t.getAnimatedValue=function(){return this.getValue()},t.addChild=function(e){},t.removeChild=function(e){},t.getChildren=function(){return[]},e}(),S=function(e){return Object.keys(e).map((function(t){return e[t]}))},R=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).children=[],t.getChildren=function(){return t.children},t.getPayload=function(e){return void 0===e&&(e=void 0),void 0!==e&&t.payload?t.payload[e]:t.payload||i(t)},t}a(t,e);var n=t.prototype;return n.addChild=function(e){0===this.children.length&&this.attach(),this.children.push(e)},n.removeChild=function(e){var t=this.children.indexOf(e);this.children.splice(t,1),0===this.children.length&&this.detach()},t}(_),j=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).payload=[],t.getAnimatedValue=function(){return t.getValue()},t.attach=function(){return t.payload.forEach((function(e){return e instanceof _&&e.addChild(i(t))}))},t.detach=function(){return t.payload.forEach((function(e){return e instanceof _&&e.removeChild(i(t))}))},t}return a(t,e),t}(R),A=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).payload={},t.getAnimatedValue=function(){return t.getValue(!0)},t.attach=function(){return S(t.payload).forEach((function(e){return e instanceof _&&e.addChild(i(t))}))},t.detach=function(){return S(t.payload).forEach((function(e){return e instanceof _&&e.removeChild(i(t))}))},t}return a(t,e),t.prototype.getValue=function(e){void 0===e&&(e=!1);var t={};for(var n in this.payload){var r=this.payload[n];(!e||r instanceof _)&&(t[n]=r instanceof _?r[e?"getAnimatedValue":"getValue"]():r)}return t},t}(R),T=function(e){function t(t){var n;return n=e.call(this)||this,!(t=t||{}).transform||t.transform instanceof _||(t=d.transform(t)),n.payload=t,n}return a(t,e),t}(A),L={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},D=function(){function e(){}return e.create=function(t,n,r){if("function"==typeof t)return t;if(m&&t.output&&"string"==typeof t.output[0])return m(t);if(Array.isArray(t))return e.create({range:t,output:n,extrapolate:r||"extend"});var o=t.output,a=t.range||[0,1],i=t.easing||function(e){return e},l="extend",c=t.map;void 0!==t.extrapolateLeft?l=t.extrapolateLeft:void 0!==t.extrapolate&&(l=t.extrapolate);var s="extend";return void 0!==t.extrapolateRight?s=t.extrapolateRight:void 0!==t.extrapolate&&(s=t.extrapolate),function(e){var t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,a);return function(e,t,n,r,o,a,i,l,c){var s=c?c(e):e;if(s<t){if("identity"===i)return s;"clamp"===i&&(s=t)}if(s>n){if("identity"===l)return s;"clamp"===l&&(s=n)}if(r===o)return r;if(t===n)return e<=t?r:o;t===-1/0?s=-s:n===1/0?s-=t:s=(s-t)/(n-t);s=a(s),r===-1/0?s=-s:o===1/0?s+=r:s=s*(o-r)+r;return s}(e,a[t],a[t+1],o[t],o[t+1],i,l,s,c)}},e}();var P="[-+]?\\d*\\.?\\d+",M=P+"%";function N(){return"\\(\\s*("+Array.prototype.slice.call(arguments).join(")\\s*,\\s*(")+")\\s*\\)"}var I=new RegExp("rgb"+N(P,P,P)),F=new RegExp("rgba"+N(P,P,P,P)),B=new RegExp("hsl"+N(P,M,M)),V=new RegExp("hsla"+N(P,M,M,P)),H=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,z=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,q=/^#([0-9a-fA-F]{6})$/,U=/^#([0-9a-fA-F]{8})$/;function G(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function W(e,t,n){var r=n<.5?n*(1+t):n+t-n*t,o=2*n-r,a=G(o,r,e+1/3),i=G(o,r,e),l=G(o,r,e-1/3);return Math.round(255*a)<<24|Math.round(255*i)<<16|Math.round(255*l)<<8}function Y(e){var t=parseInt(e,10);return t<0?0:t>255?255:t}function $(e){return(parseFloat(e)%360+360)%360/360}function K(e){var t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function X(e){var t=parseFloat(e);return t<0?0:t>100?1:t/100}function Z(e){var t,n,r="number"==typeof(t=e)?t>>>0===t&&t>=0&&t<=4294967295?t:null:(n=q.exec(t))?parseInt(n[1]+"ff",16)>>>0:L.hasOwnProperty(t)?L[t]:(n=I.exec(t))?(Y(n[1])<<24|Y(n[2])<<16|Y(n[3])<<8|255)>>>0:(n=F.exec(t))?(Y(n[1])<<24|Y(n[2])<<16|Y(n[3])<<8|K(n[4]))>>>0:(n=H.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+"ff",16)>>>0:(n=U.exec(t))?parseInt(n[1],16)>>>0:(n=z.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+n[4]+n[4],16)>>>0:(n=B.exec(t))?(255|W($(n[1]),X(n[2]),X(n[3])))>>>0:(n=V.exec(t))?(W($(n[1]),X(n[2]),X(n[3]))|K(n[4]))>>>0:null;return null===r?e:"rgba("+((4278190080&(r=r||0))>>>24)+", "+((16711680&r)>>>16)+", "+((65280&r)>>>8)+", "+(255&r)/255+")"}var Q=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,J=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,ee=new RegExp("("+Object.keys(L).join("|")+")","g");var te=function(e){function t(n,r,o){var a;return(a=e.call(this)||this).getValue=function(){var e;return(e=a).calc.apply(e,a.payload.map((function(e){return e.getValue()})))},a.updateConfig=function(e,t){return a.calc=D.create(e,t)},a.interpolate=function(e,n){return new t(i(a),e,n)},a.payload=n instanceof j&&!n.updateConfig?n.payload:Array.isArray(n)?n:[n],a.calc=D.create(r,o),a}return a(t,e),t}(j);function ne(e,t){"function"==typeof e.update?t.add(e):e.getChildren().forEach((function(e){return ne(e,t)}))}var re=function(e){function t(t){var n;return(n=e.call(this)||this).setValue=function(e,t){void 0===t&&(t=!0),n.value=e,t&&n.flush()},n.getValue=function(){return n.value},n.updateStyles=function(){return ne(i(n),n.animatedStyles)},n.updateValue=function(e){return n.flush(n.value=e)},n.interpolate=function(e,t){return new te(i(n),e,t)},n.value=t,n.animatedStyles=new Set,n.done=!1,n.startPosition=t,n.lastPosition=t,n.lastVelocity=void 0,n.lastTime=void 0,n.controller=void 0,n}a(t,e);var n=t.prototype;return n.flush=function(){0===this.animatedStyles.size&&this.updateStyles(),this.animatedStyles.forEach((function(e){return e.update()}))},n.prepare=function(e){void 0===this.controller&&(this.controller=e),this.controller===e&&(this.startPosition=this.value,this.lastPosition=this.value,this.lastVelocity=e.isActive?this.lastVelocity:void 0,this.lastTime=e.isActive?this.lastTime:void 0,this.done=!1,this.animatedStyles.clear())},t}(R),oe=function(e){function t(t){var n;return(n=e.call(this)||this).setValue=function(e,t){void 0===t&&(t=!0),Array.isArray(e)?e.length===n.payload.length&&e.forEach((function(e,r){return n.payload[r].setValue(e,t)})):n.payload.forEach((function(r,o){return n.payload[o].setValue(e,t)}))},n.getValue=function(){return n.payload.map((function(e){return e.getValue()}))},n.interpolate=function(e,t){return new te(i(n),e,t)},n.payload=t.map((function(e){return new re(e)})),n}return a(t,e),t}(j);function ae(e,t){return null==e?t:e}function ie(e){return void 0!==e?Array.isArray(e)?e:[e]:[]}function le(e,t){if(typeof e!=typeof t)return!1;if("string"==typeof e||"number"==typeof e)return e===t;var n;for(n in e)if(!(n in t))return!1;for(n in t)if(e[n]!==t[n])return!1;return void 0!==n||e===t}function ce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"==typeof e?e.apply(void 0,n):e}function se(e){return Object.keys(e).map((function(t){return e[t]}))}function ue(e){var t=function(e){return e.to,e.from,e.config,e.native,e.onStart,e.onRest,e.onFrame,e.children,e.reset,e.reverse,e.force,e.immediate,e.impl,e.inject,e.delay,e.attach,e.destroyed,e.interpolateTo,e.autoStart,e.ref,o(e,["to","from","config","native","onStart","onRest","onFrame","children","reset","reverse","force","immediate","impl","inject","delay","attach","destroyed","interpolateTo","autoStart","ref"])}(e),n=Object.keys(e).reduce((function(n,r){var o;return void 0!==t[r]?n:l({},n,((o={})[r]=e[r],o))}),{});return l({to:t},n)}function de(e,t){var n,r=t[0],o=t[1];return l({},e,((n={})[r]=new(Array.isArray(o)?oe:re)(o),n))}function fe(e){var t=e.from,n=e.to,r=e.native,o=Object.entries(l({},t,n));return r?o.reduce(de,{}):l({},t,n)}function pe(e,t){return t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e}var he=function(e){return"auto"===e};var me={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","Ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}me=Object.keys(me).reduce((function(e,t){return ve.forEach((function(n){return e[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(n,t)]=e[t]})),e}),me);var be={};C((function(e){return new T(e)})),E("div"),x((function(e){var t=e.output.map((function(e){return e.replace(J,Z)})).map((function(e){return e.replace(ee,Z)})),n=t[0].match(Q).map((function(){return[]}));t.forEach((function(e){e.match(Q).forEach((function(e,t){return n[t].push(+e)}))}));var r=t[0].match(Q).map((function(t,r){return D.create(l({},e,{output:n[r]}))}));return function(e){var n=0;return t[0].replace(Q,(function(){return r[n++](e)})).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(function(e,t,n,r,o){return"rgba("+Math.round(t)+", "+Math.round(n)+", "+Math.round(r)+", "+o+")"}))}})),w(L),k((function(e,t){var n=e.from,r=e.to,o=e.children;if(se(r).some(he)||se(n).some(he)){var a=o(fe(e));if(a){Array.isArray(a)&&(a={type:"div",props:{children:a}});var i=a.props.style;return c.createElement(a.type,l({key:a.key?a.key:void 0},a.props,{style:l({},i,{position:"absolute",visibility:"hidden"}),ref:function(o){if(o){var a,i,c=s.findDOMNode(o),u=getComputedStyle(c);if("border-box"===u.boxSizing)a=c.offsetWidth,i=c.offsetHeight;else{var d=parseFloat(u.paddingLeft||0)+parseFloat(u.paddingRight||0),f=parseFloat(u.paddingTop||0)+parseFloat(u.paddingBottom||0),p=parseFloat(u.borderLeftWidth||0)+parseFloat(u.borderRightWidth||0),h=parseFloat(u.borderTopWidth||0)+parseFloat(u.borderBottomWidth||0);a=c.offsetWidth-d-p,i=c.offsetHeight-f-h}var m=function(e,t){return function(n,r){var o,a=r[0],i=r[1];return l({},n,((o={})[a]="auto"===i?~a.indexOf("height")?t:e:i,o))}}(a,i);t(l({},e,{from:Object.entries(n).reduce(m,n),to:Object.entries(r).reduce(m,r)}))}}}))}}})),y((function(e,t){if(!e.nodeType||void 0===e.setAttribute)return!1;var n=t.style,r=t.children,a=t.scrollTop,i=t.scrollLeft,l=o(t,["style","children","scrollTop","scrollLeft"]);for(var c in void 0!==a&&(e.scrollTop=a),void 0!==i&&(e.scrollLeft=i),void 0!==r&&(e.textContent=r),n)if(n.hasOwnProperty(c)){var s=0===c.indexOf("--"),u=ge(c,n[c],s);"float"===c&&(c="cssFloat"),s?e.style.setProperty(c,u):e.style[c]=u}for(var d in l){var f=be[d]||(be[d]=d.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()})));void 0!==e.getAttribute(f)&&e.setAttribute(f,l[d])}}),(function(e){return e}));var ye=!1,we=new Set,ke=function e(){var t=v(),n=we,r=Array.isArray(n),o=0;for(n=r?n:n[Symbol.iterator]();;){var a;if(r){if(o>=n.length)break;a=n[o++]}else{if((o=n.next()).done)break;a=o.value}for(var i=a,l=!0,c=!0,s=0;s<i.configs.length;s++){for(var u=i.configs[s],d=void 0,f=void 0,h=0;h<u.animatedValues.length;h++){var m=u.animatedValues[h];if(!m.done){var g=u.fromValues[h],b=u.toValues[h],y=m.lastPosition,w=b instanceof _,k=Array.isArray(u.initialVelocity)?u.initialVelocity[h]:u.initialVelocity;if(w&&(b=b.getValue()),u.immediate||!w&&!u.decay&&g===b)m.updateValue(b),m.done=!0;else if(u.delay&&t-i.startTime<u.delay)l=!1;else if(c=!1,"string"!=typeof g&&"string"!=typeof b){if(void 0!==u.duration)y=g+u.easing((t-i.startTime-u.delay)/u.duration)*(b-g),d=t>=i.startTime+u.delay+u.duration;else if(u.decay)y=g+k/(1-.998)*(1-Math.exp(-(1-.998)*(t-i.startTime))),(d=Math.abs(m.lastPosition-y)<.1)&&(b=y);else{f=void 0!==m.lastTime?m.lastTime:t,k=void 0!==m.lastVelocity?m.lastVelocity:u.initialVelocity,t>f+64&&(f=t);for(var x=Math.floor(t-f),E=0;E<x;++E){y+=1*(k+=1*((-u.tension*(y-b)+-u.friction*k)/u.mass)/1e3)/1e3}var C=!(!u.clamp||0===u.tension)&&(g<b?y>b:y<b),O=Math.abs(k)<=u.precision,S=0===u.tension||Math.abs(b-y)<=u.precision;d=C||O&&S,m.lastVelocity=k,m.lastTime=t}w&&!u.toValues[h].done&&(d=!1),d?(m.value!==b&&(y=b),m.done=!0):l=!1,m.updateValue(y),m.lastPosition=y}else m.updateValue(b),m.done=!0}}!i.props.onFrame&&i.props.native||(i.animatedProps[u.name]=u.interpolation.getValue())}!i.props.onFrame&&i.props.native||(!i.props.native&&i.onUpdate&&i.onUpdate(),i.props.onFrame&&i.props.onFrame(i.animatedProps)),l&&(we.delete(i),i.debouncedOnEnd({finished:!0,noChange:c}))}we.size?p(e):ye=!1},xe=function(e){we.has(e)&&we.delete(e)},Ee=function(){function e(e,t){var n=this;void 0===t&&(t={native:!0,interpolateTo:!0,autoStart:!0}),this.getValues=function(){return n.props.native?n.interpolations:n.animatedProps},this.dependents=new Set,this.isActive=!1,this.hasChanged=!1,this.props={},this.merged={},this.animations={},this.interpolations={},this.animatedProps={},this.configs=[],this.frame=void 0,this.startTime=void 0,this.lastTime=void 0,this.update(l({},e,t))}var t=e.prototype;return t.update=function(e){var t=this;this.props=l({},this.props,e);var n=this.props.interpolateTo?ue(this.props):this.props,r=n.from,o=void 0===r?{}:r,a=n.to,i=void 0===a?{}:a,c=n.config,s=void 0===c?{}:c,u=n.delay,d=void 0===u?0:u,p=n.reverse,h=n.attach,m=n.reset,v=n.immediate,g=n.autoStart,b=n.ref;if(p){var y=[i,o];o=y[0],i=y[1]}this.hasChanged=!1;var w=h&&h(this),k=m?{}:this.merged;if(this.merged=l({},o,k,i),this.animations=Object.entries(this.merged).reduce((function(e,n,r){var a,i,c,u=n[0],p=n[1],h=!m&&e[u]||{},g="number"==typeof p,b="string"==typeof p&&!p.startsWith("#")&&!/\d/.test(p)&&!f[p],y=!g&&!b&&Array.isArray(p),k=void 0!==o[u]?o[u]:p,x=g||y||b?p:1,E=ce(s,u);if(w&&(x=w.animations[u].parent),void 0===E.decay&&le(h.changes,p))return e;if(t.hasChanged=!0,g||b)i=c=h.parent||new re(k);else if(y)i=c=h.parent||new oe(k);else{var C=h.interpolation&&h.interpolation.calc(h.parent.value);h.parent?(i=h.parent).setValue(0,!1):i=new re(0);var O={output:[void 0!==C?C:k,p]};h.interpolation?(c=h.interpolation,h.interpolation.updateConfig(O)):c=i.interpolate(O)}ce(v,u)&&i.setValue(p,!1);var _=ie(i.getPayload());return _.forEach((function(e){return e.prepare(t)})),l({},e,((a={})[u]=l({},h,{name:u,parent:i,interpolation:c,animatedValues:_,changes:p,fromValues:ie(i.getValue()),toValues:ie(w?x.getPayload():x),immediate:ce(v,u),delay:ae(E.delay,d||0),initialVelocity:ae(E.velocity,0),clamp:ae(E.clamp,!1),precision:ae(E.precision,.01),tension:ae(E.tension,170),friction:ae(E.friction,26),mass:ae(E.mass,1),duration:E.duration,easing:ae(E.easing,(function(e){return e})),decay:E.decay}),a))}),this.animations),this.hasChanged)for(var x in this.configs=se(this.animations),this.animatedProps={},this.interpolations={},this.animations)this.interpolations[x]=this.animations[x].interpolation,this.animatedProps[x]=this.animations[x].interpolation.getValue();for(var E=arguments.length,C=new Array(E>1?E-1:0),O=1;O<E;O++)C[O-1]=arguments[O];b||!g&&!C.length||this.start.apply(this,C);var _=C[0],S=C[1];return this.onEnd="function"==typeof _&&_,this.onUpdate=S,this.getValues()},t.start=function(e,t){var n,r=this;return this.startTime=v(),this.isActive&&this.stop(),this.isActive=!0,this.onEnd="function"==typeof e&&e,this.onUpdate=t,this.props.onStart&&this.props.onStart(),n=this,we.has(n)||(we.add(n),ye||p(ke),ye=!0),new Promise((function(e){return r.resolve=e}))},t.stop=function(e){void 0===e&&(e=!1),e&&se(this.animations).forEach((function(e){return e.changes=void 0})),this.debouncedOnEnd({finished:e})},t.destroy=function(){xe(this),this.props={},this.merged={},this.animations={},this.interpolations={},this.animatedProps={},this.configs=[]},t.debouncedOnEnd=function(e){xe(this),this.isActive=!1;var t=this.onEnd;this.onEnd=null,t&&t(e),this.resolve&&this.resolve(),this.resolve=null},e}(),Ce=function(e){function t(t,n){var r;return r=e.call(this)||this,t.style&&(t=l({},t,{style:b(t.style)})),r.payload=t,r.update=n,r.attach(),r}return a(t,e),t}(A);function Oe(e){var t=function(t){function n(e){var n;return(n=t.call(this)||this).callback=function(){n.node&&(!1===d.fn(n.node,n.propsAnimated.getAnimatedValue(),i(n))&&n.forceUpdate())},n.attachProps(e),n}a(n,t);var r=n.prototype;return r.componentWillUnmount=function(){this.propsAnimated&&this.propsAnimated.detach()},r.setNativeProps=function(e){!1===d.fn(this.node,e,this)&&this.forceUpdate()},r.attachProps=function(e){e.forwardRef;var t=o(e,["forwardRef"]),n=this.propsAnimated;this.propsAnimated=new Ce(t,this.callback),n&&n.detach()},r.shouldComponentUpdate=function(e){var t=e.style,n=o(e,["style"]),r=this.props,a=r.style;return(!le(o(r,["style"]),n)||!le(a,t))&&(this.attachProps(e),!0)},r.render=function(){var t=this,n=this.propsAnimated.getValue(),r=(n.scrollTop,n.scrollLeft,o(n,["scrollTop","scrollLeft"]));return c.createElement(e,l({},r,{ref:function(e){return t.node=pe(e,t.props.forwardRef)}}))},n}(c.Component);return c.forwardRef((function(e,n){return c.createElement(t,l({},e,{forwardRef:n}))}))}var _e={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Se=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={lastProps:{from:{},to:{}},propsChanged:!1,internal:!1},t.controller=new Ee(null,null),t.didUpdate=!1,t.didInject=!1,t.finished=!0,t.start=function(){t.finished=!1;var e=t.mounted;t.controller.start((function(n){return t.finish(l({},n,{wasMounted:e}))}),t.update)},t.stop=function(){return t.controller.stop(!0)},t.update=function(){return t.mounted&&t.setState({internal:!0})},t.finish=function(e){var n=e.finished,r=e.noChange,o=e.wasMounted;t.finished=!0,t.mounted&&n&&(!t.props.onRest||!o&&r||t.props.onRest(t.controller.merged),t.mounted&&t.didInject&&(t.afterInject=fe(t.props),t.setState({internal:!0})),t.mounted&&(t.didInject||t.props.after)&&t.setState({internal:!0}),t.didInject=!1)},t}a(t,e);var n=t.prototype;return n.componentDidMount=function(){this.componentDidUpdate(),this.mounted=!0},n.componentWillUnmount=function(){this.mounted=!1,this.stop()},t.getDerivedStateFromProps=function(e,t){var n=t.internal,r=t.lastProps,o=e.from,a=e.to,i=e.reset,l=e.force;return{propsChanged:!le(a,r.to)||!le(o,r.from)||i&&!n||l&&!n,lastProps:e,internal:!1}},n.render=function(){var e=this,t=this.props.children,n=this.state.propsChanged;if(this.props.inject&&n&&!this.injectProps){var r=this.props.inject(this.props,(function(t){e.injectProps=t,e.setState({internal:!0})}));if(r)return r}(this.injectProps||n)&&(this.didInject=!1,this.injectProps?(this.controller.update(this.injectProps),this.didInject=!0):n&&this.controller.update(this.props),this.didUpdate=!0,this.afterInject=void 0,this.injectProps=void 0);var o=l({},this.controller.getValues(),this.afterInject);return this.finished&&(o=l({},o,this.props.after)),Object.keys(o).length?t(o):null},n.componentDidUpdate=function(){this.didUpdate&&this.start(),this.didUpdate=!1},t}(c.Component);Se.defaultProps={from:{},to:{},config:_e.default,native:!1,immediate:!1,reset:!1,force:!1,inject:u};var Re=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).first=!0,t.instances=new Set,t.hook=function(e,n,r,o){return t.instances.add(e),(o?n===r-1:0===n)?void 0:Array.from(t.instances)[o?n+1:n-1]},t}a(t,e);var n=t.prototype;return n.render=function(){var e=this,t=this.props,n=t.items,r=t.children,a=t.from,i=void 0===a?{}:a,s=t.initial,u=t.reverse,d=t.keys,f=t.delay,p=t.onRest,h=o(t,["items","children","from","initial","reverse","keys","delay","onRest"]),m=ie(n);return ie(m).map((function(t,n){return c.createElement(Se,l({onRest:0===n?p:null,key:"function"==typeof d?d(t):ie(d)[n],from:e.first&&void 0!==s?s||{}:i},h,{delay:0===n&&f||void 0,attach:function(t){return e.hook(t,n,m.length,u)},children:function(e){var o=r(t,n);return o?o(e):null}}))}))},n.componentDidUpdate=function(e){this.first=!1,e.items!==this.props.items&&this.instances.clear()},t}(c.PureComponent);Re.defaultProps={keys:function(e){return e}};var je="__default",Ae=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).guid=0,t.state={props:{},resolve:function(){return null},last:!0,index:0},t.next=function(e,n,r){return void 0===n&&(n=!0),void 0===r&&(r=0),t.running=!0,new Promise((function(o){t.mounted&&t.setState((function(t){return{props:e,resolve:o,last:n,index:r}}),(function(){return t.running=!1}))}))},t}a(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.componentDidUpdate({})},n.componentWillUnmount=function(){this.mounted=!1},n.componentDidUpdate=function(e){var t=this,n=this.props,r=n.states,o=n.filter,a=n.state;(e.state!==this.props.state||this.props.reset&&!this.running||!le(r[a],e.states[e.state]))&&r&&a&&r[a]&&function(){var e=++t.guid,n=r[a];if(n)if(Array.isArray(n))for(var i=Promise.resolve(),l=function(r){var a=r,l=n[a],c=a===n.length-1;i=i.then((function(){return e===t.guid&&t.next(o(l),c,a)}))},c=0;c<n.length;c++)l(c);else if("function"==typeof n){var s=0;n((function(n,r){return void 0===r&&(r=!1),e===t.guid&&t.next(o(n),r,s++)}),(function(){return p((function(){return t.instance&&t.instance.stop()}))}),t.props)}else t.next(o(r[a]))}()},n.render=function(){var e=this,t=this.state,n=t.props,r=t.resolve,a=t.last,i=t.index;if(!n||0===Object.keys(n).length)return null;var s=this.props,u=(s.state,s.filter,s.states,s.config),d=s.primitive,f=s.onRest,p=s.forwardRef,h=o(s,["state","filter","states","config","primitive","onRest","forwardRef"]);return Array.isArray(u)&&(u=u[i]),c.createElement(d,l({ref:function(t){return e.instance=pe(t,p)},config:u},h,n,{onRest:function(e){r(e),f&&a&&f(e)}}))},t}(c.PureComponent);Ae.defaultProps={state:je};var Te=c.forwardRef((function(e,t){return c.createElement(Ae,l({},e,{forwardRef:t}))}));Te.create=function(e){return function(t,n){var r;return void 0===n&&(n=function(e){return e}),("function"==typeof t||Array.isArray(t))&&((r={})[je]=t,t=r),function(r){return c.createElement(Ae,l({primitive:e,states:t,filter:n},r))}}},Te.Spring=function(e){return Te.create(Se)(e,ue)},Te.Trail=function(e){return Te.create(Re)(e,ue)};var Le=0,De=function(e){var t=e.items,n=e.keys,r=o(e,["items","keys"]);return t=ie(void 0!==t?t:null),n="function"==typeof n?t.map(n):ie(n),l({items:t,keys:n.map((function(e){return String(e)}))},r)},Pe=function(e){a(n,e);var t=n.prototype;function n(t){var n;return(n=e.call(this,t)||this).destroyItem=function(e,t,r){return function(o){var a=n.props,i=a.onRest,l=a.onDestroyed;n.mounted&&(l&&l(e),n.setState((function(e){return{deleted:e.deleted.filter((function(e){return e.key!==t}))}})),i&&i(e,r,o))}},n.state={first:!0,transitions:[],current:{},deleted:[],prevProps:t},n}return t.componentDidMount=function(){this.mounted=!0},t.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,t){var n=t.first,r=t.prevProps,a=o(t,["first","prevProps"]),i=De(e),c=i.items,s=i.keys,u=i.initial,d=i.from,f=i.enter,p=i.leave,h=i.update,m=i.trail,v=void 0===m?0:m,g=i.unique,b=i.config,y=De(r),w=y.keys,k=y.items,x=l({},a.current),E=[].concat(a.deleted),C=Object.keys(x),O=new Set(C),_=new Set(s),S=s.filter((function(e){return!O.has(e)})),R=a.transitions.filter((function(e){return!e.destroyed&&!_.has(e.originalKey)})).map((function(e){return e.originalKey})),j=s.filter((function(e){return O.has(e)})),A=0;S.forEach((function(e){g&&E.find((function(t){return t.originalKey===e}))&&(E=E.filter((function(t){return t.originalKey!==e})));var t=s.indexOf(e),r=c[t],o="enter";x[e]={state:o,originalKey:e,key:g?String(e):Le++,item:r,trail:A+=v,config:ce(b,r,o),from:ce(n&&void 0!==u?u||{}:d,r),to:ce(f,r)}})),R.forEach((function(e){var t=w.indexOf(e),n=k[t],r="leave";E.push(l({},x[e],{state:r,destroyed:!0,left:w[Math.max(0,t-1)],right:w[Math.min(w.length,t+1)],trail:A+=v,config:ce(b,n,r),to:ce(p,n)})),delete x[e]})),j.forEach((function(e){var t=s.indexOf(e),n=c[t],r="update";x[e]=l({},x[e],{item:n,state:r,trail:A+=v,config:ce(b,n,r),to:ce(h,n)})}));var T=s.map((function(e){return x[e]}));return E.forEach((function(e){var t,n=e.left,r=e.right,a=o(e,["left","right"]);-1!==(t=T.findIndex((function(e){return e.originalKey===n})))&&(t+=1),-1===t&&(t=T.findIndex((function(e){return e.originalKey===r}))),-1===t&&(t=E.findIndex((function(e){return e.originalKey===n}))),-1===t&&(t=E.findIndex((function(e){return e.originalKey===r}))),t=Math.max(0,t),T=[].concat(T.slice(0,t),[a],T.slice(t))})),{first:n&&0===S.length,transitions:T,current:x,deleted:E,prevProps:e}},t.render=function(){var e=this,t=this.props,n=(t.initial,t.from,t.enter,t.leave,t.update,t.onDestroyed,t.keys,t.items,t.onFrame),r=t.onRest,a=t.onStart,i=(t.trail,t.config,t.children),s=(t.unique,t.reset),u=o(t,["initial","from","enter","leave","update","onDestroyed","keys","items","onFrame","onRest","onStart","trail","config","children","unique","reset"]);return this.state.transitions.map((function(t,o){var d,f=t.state,p=t.key,h=t.item,m=t.from,v=t.to,g=t.trail,b=t.config,y=t.destroyed;return c.createElement(Te,l({reset:s&&"enter"===f,primitive:Se,state:f,filter:ue,states:(d={},d[f]=v,d),key:p,onRest:y?e.destroyItem(h,p,f):r&&function(e){return r(h,f,e)},onStart:a&&function(){return a(h,f)},onFrame:n&&function(e){return n(h,f,e)},delay:g,config:b},u,{from:m,children:function(e){var t=i(h,f,o);return t?t(e):null}}))}))},n}(c.PureComponent);Pe.defaultProps={keys:function(e){return e},unique:!1,reset:!1};var Me=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].reduce((function(e,t){return e[t]=Oe(t),e}),Oe);t.Spring=Se,t.Keyframes=Te,t.Transition=Pe,t.Trail=Re,t.Controller=Ee,t.config=_e,t.animated=Me,t.interpolate=function(e,t,n){return e&&new te(e,t,n)},t.Globals=O},295:function(e,t,n){"use strict";n(923);var r=n(245),o=n(0),a=n.n(o),i=n(2),l=n.n(i),c=n(9),s=n.n(c),u=n(69),d=n.n(u);n(2363);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var p=["className","overlayClassName"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var y=a.a.forwardRef((function(e,t){var n=e.className,o=e.overlayClassName,i=b(e,p);return a.a.createElement(r.a,g({className:s()(n,"larkui-dropdown-trigger"),overlayClassName:s()(o,"larkui-dropdown"),ref:t},i))}));y.propTypes=m(m({},r.a.DropDownProps),{},{className:l.a.string,overlayClassName:l.a.string}),d()(y,r.a);var w=y;function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}var x=["className","overlayClassName","overlay","children"];function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}function S(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var R=a.a.forwardRef((function(e,t){var n=e.className,o=e.overlayClassName,i=e.overlay,l=e.children,c=S(e,x),u=i?i.props:{};return a.a.createElement(r.a.Button,_({className:s()(n,"larkui-dropdown-trigger"),overlay:a.a.cloneElement(i,{className:s()(u.className,o,"larkui-dropdown-menu")}),ref:t},c),l)}));R.propTypes=C(C({},r.a.DropdownButtonProps),{},{className:l.a.string,overlayClassName:l.a.string,overlay:l.a.node,children:l.a.any}),d()(R,r.a.Button);var j=R,A=n(1147),T=n.n(A),L=n(1146),D=n.n(L),P=n(927),M=n(130),N=n(58);n(2364);function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}var F=function(e){var t=e.className,n=e.overlayClassName,r=e.currentValue,o=e.menus,i=e.disableMenus,l=void 0===i?[]:i,c=e.disableTip,u=e.handleChange,d=e.triggerPrefix,f=o.find((function(e){return e.value===r}));return a.a.createElement(w,I({},e,{trigger:["click"],className:s()("larkui-dropdown-selector",t),overlayClassName:s()("larkui-dropdown-selector-menu",n),overlay:a.a.createElement(M.a,{selectedKeys:[r]},o.map((function(e){var t=l.some((function(t){return t.value===e.value})),n=a.a.createElement("span",{className:"larkui-dropdown-selector-option"},a.a.createElement("span",{className:"larkui-dropdown-selector-option-name"},e.name),e.value===r&&a.a.createElement("span",{className:"larkui-dropdown-selector-option-checked"},a.a.createElement(D.a,null)));return a.a.createElement(M.a.Item,{key:e.value,disabled:t,onClick:function(){u(e.value)}},t&&c?a.a.createElement(N.a,{title:c,placement:"right"},n):n)})),e.externalActions&&a.a.createElement(M.a.Divider,null),e.externalActions&&e.externalActions())}),a.a.createElement("span",{className:"larkui-dropdown-selector-trigger"},a.a.createElement("span",null,d),a.a.createElement("span",null,f?f.name:Object(P.a)("请选择")),a.a.createElement("span",{className:"larkui-dropdown-selector-trigger-icon"},a.a.createElement(T.a,null))))};F.propTypes={className:l.a.string,overlayClassName:l.a.string,currentValue:l.a.string.isRequired,menus:l.a.arrayOf(l.a.shape({name:l.a.string.isRequired,value:l.a.string.isRequired})).isRequired,disableMenus:l.a.array,disableTip:l.a.node,handleChange:l.a.func.isRequired,externalActions:l.a.func,triggerPrefix:l.a.node};var B=F;w.Selector=B,w.Button=j;t.a=w},2962:function(e,t,n){(function(t){var r=n(2839),o=n(2916),a=n(2917),i=n(2918),l=n(2840),c=a.CODES;function s(e,t,n){r.EventEmitter.call(this),this.connection=e,this.collection=t,this.id=n,this.version=null,this.type=null,this.data=void 0,this.inflightFetch=[],this.inflightSubscribe=[],this.inflightUnsubscribe=[],this.pendingFetch=[],this.subscribed=!1,this.wantSubscribe=!1,this.inflightOp=null,this.pendingOps=[],this.type=null,this.applyStack=null,this.preventCompose=!1}function u(e,t,n){if(t){var r=e.pop();e.push((function(e){r&&r(e),n&&n(e)}))}else e.push(n)}function d(e,t){if(e.del)return delete(n=t).op,delete n.create,void delete n.del;var n;if(t.del)return new a(c.ERR_DOC_WAS_DELETED,"Document was deleted");if(t.create)return new a(c.ERR_DOC_ALREADY_CREATED,"Document already created");if(t.op){if(e.create)return new a(c.ERR_DOC_ALREADY_CREATED,"Document already created");if(e.type.transformX){var r=e.type.transformX(e.op,t.op);e.op=r[0],t.op=r[1]}else{var o=e.type.transform(e.op,t.op,"left"),i=e.type.transform(t.op,e.op,"right");e.op=o,t.op=i}}}function f(e,t){for(var n=!1,r=0;r<e.length;r++){var o=e[r];o&&(o(t),n=!0)}return n}e.exports=s,r.mixin(s),s.prototype.destroy=function(e){var t=this;t.whenNothingPending((function(){t.wantSubscribe?t.unsubscribe((function(n){if(n)return e?e(n):t.emit("error",n);t.connection._destroyDoc(t),e&&e()})):(t.connection._destroyDoc(t),e&&e())}))},s.prototype._setType=function(e){if("string"==typeof e&&(e=i.map[e]),e)this.type=e;else{if(null!==e){var t=new a(c.ERR_DOC_TYPE_NOT_RECOGNIZED,"Missing type "+e);return this.emit("error",t)}this.type=e,this.data=void 0}},s.prototype.ingestSnapshot=function(e,t){if(!e)return t&&t();if("number"!=typeof e.v){var n=new a(c.ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}if(this.type||this.hasWritePending()){if(null==this.version){if(this.hasWritePending())return t&&this.once("no write pending",t);n=new a(c.ERR_DOC_MISSING_VERSION,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}return e.v>this.version?this.fetch(t):t&&t()}if(this.version>e.v)return t&&t();this.version=e.v;var r=void 0===e.type?i.defaultType:e.type;this._setType(r),this.data=this.type&&this.type.deserialize?this.type.deserialize(e.data):e.data,this.emit("load"),t&&t()},s.prototype.whenNothingPending=function(e){var n=this;t.nextTick((function(){n.hasPending()?n.once("nothing pending",e):e()}))},s.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe.length||this.inflightUnsubscribe.length||this.pendingFetch.length)},s.prototype.hasWritePending=function(){return!(!this.inflightOp&&!this.pendingOps.length)},s.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),this.hasPending()||this.emit("nothing pending"))},s.prototype._emitResponseError=function(e,t){return e&&e.code===c.ERR_SNAPSHOT_READ_SILENT_REJECTION?(this.wantSubscribe=!1,t&&t(),void this._emitNothingPending()):t?(t(e),void this._emitNothingPending()):(this._emitNothingPending(),void this.emit("error",e))},s.prototype._handleFetch=function(e,t){var n=this.inflightFetch.shift();if(e)return this._emitResponseError(e,n);this.ingestSnapshot(t,n),this._emitNothingPending()},s.prototype._handleSubscribe=function(e,t){var n=this.inflightSubscribe.shift();if(e)return this._emitResponseError(e,n);this.wantSubscribe&&(this.subscribed=!0),this.ingestSnapshot(t,n),this._emitNothingPending()},s.prototype._handleUnsubscribe=function(e){var t=this.inflightUnsubscribe.shift();if(e)return this._emitResponseError(e,t);t&&t(),this._emitNothingPending()},s.prototype._handleOp=function(e,t){if(e)return this.inflightOp?(e.code===c.ERR_OP_SUBMIT_REJECTED&&(e=null),this._rollback(e)):this.emit("error",e);if(this.inflightOp&&t.src===this.inflightOp.src&&t.seq===this.inflightOp.seq)this._opAcknowledged(t);else if(null==this.version||t.v>this.version)this.fetch();else if(!(t.v<this.version)){if(this.inflightOp)if(r=d(this.inflightOp,t))return this._hardRollback(r);for(var n=0;n<this.pendingOps.length;n++){var r;if(r=d(this.pendingOps[n],t))return this._hardRollback(r)}this.version++;try{this._otApply(t,!1)}catch(e){return this._hardRollback(e)}}},s.prototype._onConnectionStateChanged=function(){if(this.connection.canSend)this.flush(),this._resubscribe();else if(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,(this.inflightFetch.length||this.inflightSubscribe.length)&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch,this.inflightSubscribe),this.inflightFetch.length=0,this.inflightSubscribe.length=0),this.inflightUnsubscribe.length){var e=this.inflightUnsubscribe;this.inflightUnsubscribe=[],f(e)}},s.prototype._resubscribe=function(){var e=this.pendingFetch;if(this.pendingFetch=[],this.wantSubscribe)return e.length?void this.subscribe((function(t){f(e,t)})):void this.subscribe();e.length&&this.fetch((function(t){f(e,t)}))},s.prototype.fetch=function(e){if(this.connection.canSend){var t=this.connection.sendFetch(this);u(this.inflightFetch,t,e)}else this.pendingFetch.push(e)},s.prototype.subscribe=function(e){if(this.wantSubscribe=!0,this.connection.canSend){var t=this.connection.sendSubscribe(this);u(this.inflightSubscribe,t,e)}else this.pendingFetch.push(e)},s.prototype.unsubscribe=function(e){if(this.wantSubscribe=!1,this.subscribed=!1,this.connection.canSend){var n=this.connection.sendUnsubscribe(this);u(this.inflightUnsubscribe,n,e)}else e&&t.nextTick(e)},s.prototype.flush=function(){this.connection.canSend&&!this.inflightOp&&!this.paused&&this.pendingOps.length&&this._sendOp()},s.prototype._otApply=function(e,t){if(e.op){if(!this.type)throw new a(c.ERR_DOC_DOES_NOT_EXIST,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);if(!t&&this.type===i.defaultType&&e.op.length>1){this.applyStack||(this.applyStack=[]);for(var n=this.applyStack.length,r=0;r<e.op.length;r++){for(var o={op:[e.op[r]]},l=n;l<this.applyStack.length;l++){var s=d(this.applyStack[l],o);if(s)return this._hardRollback(s)}this.emit("before op",o.op,t),this.data=this.type.apply(this.data,o.op),this.emit("op",o.op,t)}return void this._popApplyStack(n)}return this.emit("before op",e.op,t),this.data=this.type.apply(this.data,e.op),void this.emit("op",e.op,t)}if(e.create)return this._setType(e.create.type),this.data=this.type.deserialize?this.type.createDeserialized?this.type.createDeserialized(e.create.data):this.type.deserialize(this.type.create(e.create.data)):this.type.create(e.create.data),void this.emit("create",t);if(e.del){var u=this.data;return this._setType(null),void this.emit("del",u,t)}},s.prototype._sendOp=function(){if(this.connection.canSend){var e=this.connection.id;this.inflightOp||(this.inflightOp=this.pendingOps.shift());var t=this.inflightOp;if(!t){var n=new a(c.ERR_INFLIGHT_OP_MISSING,"No op to send on call to _sendOp");return this.emit("error",n)}if(t.sentAt=Date.now(),t.retries=null==t.retries?0:t.retries+1,null==t.seq){if(this.connection.seq>=l.MAX_SAFE_INTEGER)return this.emit("error",new a(c.ERR_CONNECTION_SEQ_INTEGER_OVERFLOW,"Connection seq has exceeded the max safe integer, maybe from being open for too long"));t.seq=this.connection.seq++}this.connection.sendOp(this,t),null==t.src&&(t.src=e)}},s.prototype._submit=function(e,n,r){if(n||(n=!0),e.op){if(!this.type){var o=new a(c.ERR_DOC_DOES_NOT_EXIST,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return r?r(o):this.emit("error",o)}this.type.normalize&&(e.op=this.type.normalize(e.op))}try{this._pushOp(e,r),this._otApply(e,n)}catch(e){return this._hardRollback(e)}var i=this;t.nextTick((function(){i.flush()}))},s.prototype._pushOp=function(e,t){if(this.applyStack)this.applyStack.push(e);else{var n=this._tryCompose(e);if(n)return void n.callbacks.push(t)}e.type=this.type,e.callbacks=[t],this.pendingOps.push(e)},s.prototype._popApplyStack=function(e){if(e>0)this.applyStack.length=e;else{var t=this.applyStack[0];if(this.applyStack=null,t)if(-1!==(r=this.pendingOps.indexOf(t)))for(var n=this.pendingOps.splice(r),r=0;r<n.length;r++){t=n[r];var o=this._tryCompose(t);o?o.callbacks=o.callbacks.concat(t.callbacks):this.pendingOps.push(t)}}},s.prototype._tryCompose=function(e){if(!this.preventCompose){var t=this.pendingOps[this.pendingOps.length-1];if(t&&!t.sentAt)return t.create&&e.op?(t.create.data=this.type.apply(t.create.data,e.op),t):t.op&&e.op&&this.type.compose?(t.op=this.type.compose(t.op,e.op),t):void 0}},s.prototype.submitOp=function(e,t,n){"function"==typeof t&&(n=t,t=null);var r={op:e},o=t&&t.source;this._submit(r,o,n)},s.prototype.create=function(e,t,n,r){if("function"==typeof t?(r=t,n=null,t=null):"function"==typeof n&&(r=n,n=null),t||(t=i.defaultType.uri),this.type){var o=new a(c.ERR_DOC_ALREADY_CREATED,"Document already exists");return r?r(o):this.emit("error",o)}var l={create:{type:t,data:e}},s=n&&n.source;this._submit(l,s,r)},s.prototype.del=function(e,t){if("function"==typeof e&&(t=e,e=null),!this.type){var n=new a(c.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");return t?t(n):this.emit("error",n)}var r=e&&e.source;this._submit({del:!0},r,t)},s.prototype.pause=function(){this.paused=!0},s.prototype.resume=function(){this.paused=!1,this.flush()},s.prototype._opAcknowledged=function(e){if(this.inflightOp.create)this.version=e.v;else if(e.v!==this.version)return o.warn("Invalid version from server. Expected: "+this.version+" Received: "+e.v,e),this.fetch();this.version++,this._clearInflightOp()},s.prototype._rollback=function(e){var t=this.inflightOp;if(t.op&&t.type.invert){t.op=t.type.invert(t.op);for(var n=0;n<this.pendingOps.length;n++){var r=d(this.pendingOps[n],t);if(r)return this._hardRollback(r)}try{this._otApply(t,!1)}catch(e){return this._hardRollback(e)}this._clearInflightOp(e)}else this._hardRollback(e)},s.prototype._hardRollback=function(e){var t=[];this.inflightOp&&t.push(this.inflightOp),t=t.concat(this.pendingOps),this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[];var n=this;this.fetch((function(){for(var r=!!t.length,o=0;o<t.length;o++)r=f(t[o].callbacks,e)&&r;if(e&&!r)return n.emit("error",e)}))},s.prototype._clearInflightOp=function(e){var t=this.inflightOp;this.inflightOp=null;var n=f(t.callbacks,e);if(this.flush(),this._emitNothingPending(),e&&!n)return this.emit("error",e)}}).call(this,n(242))},2963:function(e,t,n){(function(t){var r=n(2839);function o(e,t,n,o,a,i,l){r.EventEmitter.call(this),this.action=e,this.connection=t,this.id=n,this.collection=o,this.query=a,this.results=null,i&&i.results&&(this.results=i.results,delete i.results),this.extra=void 0,this.options=i,this.callback=l,this.ready=!1,this.sent=!1}e.exports=o,r.mixin(o),o.prototype.hasPending=function(){return!this.ready},o.prototype.send=function(){if(this.connection.canSend){var e={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(e.o=this.options),this.results){for(var t=[],n=0;n<this.results.length;n++){var r=this.results[n];t.push([r.id,r.version])}e.r=t}this.connection.send(e),this.sent=!0}},o.prototype.destroy=function(e){this.connection.canSend&&"qs"===this.action&&this.connection.send({a:"qu",id:this.id}),this.connection._destroyQuery(this),e&&t.nextTick(e)},o.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1},o.prototype._handleFetch=function(e,t,n){this.connection._destroyQuery(this),this._handleResponse(e,t,n)},o.prototype._handleSubscribe=function(e,t,n){this._handleResponse(e,t,n)},o.prototype._handleResponse=function(e,t,n){var r=this.callback;if(this.callback=null,e)return this._finishResponse(e,r);if(!t)return this._finishResponse(null,r);var o=this,a=1,i=function(e){if(e)return o._finishResponse(e,r);--a||o._finishResponse(null,r)};if(Array.isArray(t))a+=t.length,this.results=this._ingestSnapshots(t,i),this.extra=n;else for(var l in t){a++;var c=t[l];this.connection.get(c.c||this.collection,l).ingestSnapshot(c,i)}i()},o.prototype._ingestSnapshots=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r],a=this.connection.get(o.c||this.collection,o.d);a.ingestSnapshot(o,t),n.push(a)}return n},o.prototype._finishResponse=function(e,t){if(this.emit("ready"),this.ready=!0,e)return this.connection._destroyQuery(this),t?t(e):this.emit("error",e);t&&t(null,this.results,this.extra)},o.prototype._handleError=function(e){this.emit("error",e)},o.prototype._handleDiff=function(e){for(var t=0;t<e.length;t++){"insert"===(n=e[t]).type&&(n.values=this._ingestSnapshots(n.values))}for(t=0;t<e.length;t++){var n;switch((n=e[t]).type){case"insert":var r=n.values;Array.prototype.splice.apply(this.results,[n.index,0].concat(r)),this.emit("insert",r,n.index);break;case"remove":var o=n.howMany||1,a=this.results.splice(n.index,o);this.emit("remove",a,n.index);break;case"move":o=n.howMany||1;var i=this.results.splice(n.from,o);Array.prototype.splice.apply(this.results,[n.to,0].concat(i)),this.emit("move",i,n.from,n.to)}}this.emit("changed",this.results)},o.prototype._handleExtra=function(e){this.extra=e,this.emit("extra",e)}}).call(this,n(242))},2964:function(e,t,n){var r=n(3021),o=n(2839);function a(e,t,n,r,a){if(o.EventEmitter.call(this),"function"!=typeof a)throw new Error("Callback is required for SnapshotRequest");this.requestId=t,this.connection=e,this.id=r,this.collection=n,this.callback=a,this.sent=!1}e.exports=a,o.mixin(a),a.prototype.send=function(){this.connection.canSend&&(this.connection.send(this._message()),this.sent=!0)},a.prototype._onConnectionStateChanged=function(){this.connection.canSend?this.sent||this.send():this.sent=!1},a.prototype._handleResponse=function(e,t){if(this.emit("ready"),e)return this.callback(e);var n=t.meta?t.meta:null,o=new r(this.id,t.v,t.type,t.data,n);this.callback(null,o)}},2975:function(e,t,n){"use strict";n(103);var r=n(60),o=(n(279),n(136)),a=n(0),i=n.n(a),l=n(2),c=n.n(l),s=n(790),u=n.n(s),d=n(9),f=n.n(d),p=n(30),h="CornerBubble-module_cornerBubble_2kGnu",m="CornerBubble-module_cornerCount_O3YTX",v="CornerBubble-module_cornerCountLarge_3x8Br",g="CornerBubble-module_cornerCountHover_x2J7h",b="CornerBubble-module_cornerIcon_N8Ibc",y="CornerBubble-module_badge_SQuZN";function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===w(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){var t,n,a,l=e.count,c=e.style,s=e.onClick,d=e.iconName,w=e.iconSize,x=e.countPopoverContent,E=e.countPopoverClassName,C=e.renderBadge,O=e.tooltipText;return i.a.createElement(r.a,{title:O},i.a.createElement("div",{className:h,onClick:s,style:c},u()(l)&&l>0&&(n=!!x,a=i.a.createElement("div",{className:f()((t={},k(t,m,!0),k(t,g,n),k(t,v,l>99),t))},l>99?"99+":l),n?i.a.createElement(o.a,{placement:"topRight",trigger:"hover",overlayClassName:E,content:x},a):a),C&&i.a.createElement("div",{className:y},C()),i.a.createElement(p.b,{className:b,name:d,width:w||20})))};x.propTypes={iconName:c.a.string.isRequired,iconSize:c.a.number,count:c.a.number,style:c.a.object,onClick:c.a.func,countPopoverContent:c.a.element,countPopoverClassName:c.a.string,renderBadge:c.a.func,tooltipText:c.a.string};t.a=x},2976:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(106),o=n.n(r),a=n(34),i=n.n(a);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function m(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}var g=o()("pagestatus"),b={ACTIVE:"active",INACTIVE:"inActive",ONLINE:"online",OFFLINE:"offline",CLOSE:"close"},y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(a,e);var t,n,r,o=d(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c(this,a),m(p(e=o.call(this)),"onVisibilityChange",(function(){g("visibility change to: ",document.visibilityState),"hidden"===document.visibilityState?e.onPageHide():"visible"===document.visibilityState&&e.onActive()})),m(p(e),"registerCloseChecker",(function(t){e.closeChecker.push(t)})),m(p(e),"closeAbleCheck",(function(){var t=p(e).closeChecker;for(var n in t)if(!t[n]())return!1;return!0})),m(p(e),"onBeforeunload",(function(t){if(g("close"),e.emit(b.CLOSE),!e.closeAbleCheck())return t.returnValue="确定要离开么？","确定要离开么？"})),m(p(e),"onBlur",(function(){e.transmitStatus(b.INACTIVE)})),m(p(e),"onPageHide",(function(){e.transmitStatus(b.INACTIVE)})),m(p(e),"onPageOffline",(function(){e.emit(b.OFFLINE)})),m(p(e),"onPageOnline",(function(){e.emit(b.ONLINE)})),m(p(e),"transmitStatus",(function(t){e.status!==t&&(e.status=t,g(t),e.emit(t))})),m(p(e),"onActive",(function(t){e.startIdle(),e.transmitStatus(b.ACTIVE)})),e.IDLE_INTERVAL=t.idleInterval||60,e.status=b.ACTIVE,e.init(),e.closeChecker=[],e}return t=a,(n=[{key:"isActive",get:function(){return this.status===b.ACTIVE}},{key:"init",value:function(){this.bindEvents()}},{key:"destroy",value:function(){this.unbindEvents()}},{key:"bindEvents",value:function(){var e=this;window.addEventListener("beforeunload",this.onBeforeunload),window.addEventListener("visibilitychange",this.onVisibilityChange),window.addEventListener("pagehide",this.onPageHide),window.addEventListener("offline",this.onPageOffline),window.addEventListener("online",this.onPageOnline),window.addEventListener("blur",this.onBlur),["focus","mousemove","click","touchStart","compositionend"].forEach((function(t){window.addEventListener(t,e.onActive)})),this.startIdle()}},{key:"unbindEvents",value:function(){var e=this;window.removeEventListener("beforeunload",this.onBeforeunload),window.removeEventListener("visibilitychange",this.onVisibilityChange),window.removeEventListener("pagehide",this.onPageHide),window.removeEventListener("offline",this.onPageOffline),window.removeEventListener("online",this.onPageOnline),window.removeEventListener("blur",this.onBlur),["focus","mousemove","click","touchStart","compositionend"].forEach((function(t){window.removeEventListener(t,e.onActive)})),this.closeChecker=[]}},{key:"setIdle",value:function(e){isNaN(e)||(this.IDLE_INTERVAL=e)}},{key:"startIdle",value:function(){var e=this;this._timer&&clearTimeout(this._timer),this._timer=setTimeout((function(){e.transmitStatus(b.INACTIVE)}),1e3*this.IDLE_INTERVAL)}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.a);t.b=y},2977:function(e,t,n){"use strict";var r=n(53),o=n.n(r),a=n(106),i=n.n(a),l=n(34),c=n.n(l),s=n(2746),u=n(1702),d=n(2930);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(){p=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),l=new S(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function h(){}function m(){}function v(){}var g={};c(g,a,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(R([])));y&&y!==t&&n.call(y,a)&&(g=y);var w=v.prototype=h.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==f(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=C(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return m.prototype=v,r(w,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:m,configurable:!0}),m.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(x.prototype),c(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(w),c(w,l,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function h(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,l,"next",e)}function l(e){h(a,r,o,i,l,"throw",e)}i(void 0)}))}}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function E(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}var O=i()("common:biz:doc.editor.base"),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(c,e);var t,n,r,a,i,l=w(c);function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=t||{},(n=l.call(this)).doc=e,n.docDomain=t.docDomain||s.DOC_DOMAIN.DOC,n.baseVersion=e.draft_version,n.storage={},n.cacheKeys=n._getCacheKeys(),n}return t=c,n=[{key:"hasNewVersion",value:function(e){return O("check new version",{base:this.baseVersion,lock:e}),this.baseVersion<e.draft_version}},{key:"isContentChanged",value:function(e){e=e.trim();var t="<cursor />";return d.a.adaptBodyToContent(this.doc).replace(t,"")!==e.replace(t,"")}},{key:"resetDoc",value:function(e){O("onSaved, version:",this.baseVersion),this.doc=g(g({},this.doc),e),this.baseVersion=e.draft_version,this.cacheKeys=this._getCacheKeys()}},{key:"getInitialDocument",value:function(){return this.getLatestDocument()}},{key:"getLatestDocument",value:function(){var e=d.a.adaptDocToDocument(this.doc),t=this._getCachedDocument();return t?(this.cacheOutdated=!this._needUseCache(t,e),this.changed=!this.cacheOutdated,this.cacheOutdated?e:t):(O("not found cached content, user server version"),e)}},{key:"extractSummaryRaw",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.summary,r=t.maxHtmlTextLength,a=e.match(/^\s*<([^>]+)>/),i=["LI","CARD"],l="",c=!n||n===e;a&&(a[1].startsWith("!")||a[1].startsWith("meta"));){var u=a[0].length;l+=a[0],a=(e=e.substr(u)).match(/^\s*<([^>]+)>/)}var d=(new DOMParser).parseFromString(e,"text/html"),f=d.body.childNodes.length>s.BIG_DOCUMENT_BLOCK_COUNT;this.isBigDocument=f;var p=!!d.body.querySelector('card[name="image"]'),h=!!d.body.querySelector('card[name="checkbox"]'),m=!!d.body.querySelector('card[name="bookmarklink"]'),v=!!d.body.querySelector('card[name="file"],card[name="localdoc"]'),g=c?d:(new DOMParser).parseFromString(n,"text/html"),b=g.body,y=s.SUMMARY_PARAGRAPH_MAX_COUNT,w=l;r&&(r-=l.length);for(var k=0,x=!1,E="<p>---".concat(__("首段内容太长，无法截取摘要"),"---</p>"),C=b.childNodes[y];C;){var O=C.nextSibling;C.remove(),C=O}var _=b.querySelectorAll("*");_.forEach((function(e){if("CARD"===e.nodeName){var t=e.getAttribute("name");if("bookmarklink"===t){var n=e.getAttribute("value");if(n)try{var r=JSON.parse(decodeURIComponent(n.slice(5))),a=o()(r,"detail.icon")||"",l=o()(r,"detail.image")||"";a.startsWith("data:")&&(r.detail.icon=""),l.startsWith("data:")&&(r.detail.image=""),e.setAttribute("value","data:".concat(encodeURIComponent(JSON.stringify(r))))}catch(t){e.remove()}}if("image"===t){var c=e.getAttribute("value");if(c)try{var s=JSON.parse(decodeURIComponent(c.slice(5)));delete s.ocrLocations,delete s.search,e.setAttribute("value","data:".concat(encodeURIComponent(JSON.stringify(s))))}catch(t){e.remove()}}if("board"===t){var u=e.getAttribute("value");if(u)try{var d=JSON.parse(decodeURIComponent(u.slice(5)));if(d.src){var f={src:d.src};e.setAttribute("name","image"),e.setAttribute("type","inline"),e.setAttribute("value","data:".concat(encodeURIComponent(JSON.stringify(f))));var h=g.createElement("p");e.parentNode.replaceChild(h,e),h.appendChild(e),p=!0}}catch(t){e.remove()}}}i.includes(e.nodeName)||(e.removeAttribute("id"),e.removeAttribute("data-lake-id"))}));for(var S=0;S<b.childNodes.length;S++){var R=b.childNodes[S];if(w.length+R.outerHTML.length>r){if(0===S){var j=R;for("TABLE"===R.nodeName&&(j=R.querySelector("tbody"));j.lastChild&&w.length+R.outerHTML.length>r;)if(j.lastChild!==j.firstChild)j.lastChild.remove();else if(j.firstChild.nodeType===Node.ELEMENT_NODE)j=j.firstChild;else{var A=w.length+R.outerHTML.length-r;j.firstChild.data="".concat(j.firstChild.data.substr(0,Math.max(0,j.firstChild.data.length-A-3)),"...")}j.lastChild?(k++,w+=R.outerHTML):w+=E}x=!0;break}k++,w+=R.outerHTML}var T=!x&&k===d.body.childNodes.length&&c;return{extractCount:k,html:w,isFull:T,isBigDocument:f,hasImage:p,hasTodo:h,hasBookmark:m,hasAttachment:v}}},{key:"extractSummary",value:function(){var e=this.getLatestDocument(),t=e.value;if(e.format!==u.FORMAT.LAKE)return t;var n=this.extractSummaryRaw(t);return n&&n.html}},{key:"_needUseCache",value:function(e,t){return e.draft_version===t.draft_version||e.base_timestamp===t.base_timestamp}},{key:"saveToCache",value:function(e){if(!e.format)return O("save to cache, format not supplied: ignore"),!1;var t=this.doc.content_updated_at;e.draft_version||(e.draft_version=this.doc.draft_version),O("save to cache:",{doc_draft_version:this.doc.draft_version,change_draft_version:e.draft_version});var n=d.a.adaptChangeToCacheData(e,t);return this.changed=!0,this.storage.set(this.cacheKeys.changes,n)}},{key:"saveOutdatedCacheToServer",value:(i=m(p().mark((function e(t,n){var r,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(r=d.a.adapterDocumentContent(t),c.CACHE_CONTENT_SAVED[this.doc.id]!==r){e.next=5;break}return e.abrupt("return");case 5:return c.CACHE_CONTENT_SAVED[this.doc.id]=r,o={doc_id:this.doc.id,format:t.format,content:r,base_timestamp:t.base_timestamp,draft_version:t.draft_version,origin:s.DOC_VERSION.ORIGIN.cache,doc_type:this.docDomain},e.prev=7,e.next=10,this.doSaveOutdatedDocVersion(o);case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(7),e.abrupt("return");case 15:this.changed||this.clearCachedContent(),a=!this.isContentChanged(r),(this.cacheOutdated&&!a||n)&&this.emit("cacheSavedToServer");case 18:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(e,t){return i.apply(this,arguments)})},{key:"doSaveOutdatedDocVersion",value:(a=m(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"clearCachedContent",value:function(){O("clear cache"),this.changed=!1,this.storage.remove(this.cacheKeys.changes)}},{key:"_getCacheKeys",value:function(){var e="autosave/docs/".concat(this.doc.id),t={changes:"".concat(e,"/changes"),corrupted:"".concat(e,"/corrupted"),outdated:"".concat(e,"/outdated")};return this.doc.format===u.FORMAT.LAKE&&(t.changes="autosave/docs/".concat(this.doc.id,"/lake")),t}},{key:"_getCachedDocument",value:function(){var e=this.cacheKeys.changes,t=this.storage.get(e),n=d.a.adaptCacheDataToDocument(t,this.doc.format);return n&&n.value?n:(O("empty cache or invalid cached data: ",n),null)}},{key:"getDocument",value:function(){return d.a.adaptDocToDocument(this.doc)}},{key:"saveCacheToServer",value:function(){try{var e=this._getCachedDocument();if(!e)return;this.saveOutdatedCacheToServer(e)}catch(e){}}},{key:"saveDocToServer",value:function(){try{var e=this.getLatestDocument();this.saveOutdatedCacheToServer(e,!0)}catch(e){}}},{key:"isContentPublished",value:function(){return this.doc.published_at&&this.doc.content_updated_at===this.doc.published_at&&!this.changed}}],r=[{key:"isDefaultTitle",value:function(e){return!e||e.startsWith("无标题")||e.startsWith("Untitled")}}],n&&b(t.prototype,n),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(c.a);E(_,"SAVE_TYPE",s.SAVE_TYPE),E(_,"MODE",{NORMAL:"normal",OT:"ot"}),E(_,"CACHE_CONTENT_SAVED",{}),t.a=_},2978:function(e,t,n){var r=n(202);e.exports=function(e,t,n){for(var o=-1,a=e.length;++o<a;){var i=e[o],l=t(i);if(null!=l&&(void 0===c?l==l&&!r(l):n(l,c)))var c=l,s=i}return s}},2980:function(e,t,n){"use strict";n(63);var r=n(23),o=n(34),a=n.n(o),i=n(106),l=n.n(i),c=n(2746),s=n(182),u=n(1702),d=n(357),f=n.n(d);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===p(a)?a:String(a)),r)}var o,a}var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,e),this.timing={Init:(new Date).getTime(),EditorLoaded:-1,DocLoadStart:-1,DocLoadEnd:-1,DocRendered:-1,LockReady:-1,CollabReady:-1},this.context=t,this.scene=t.scene,this.MaxRenderTime=5e3,this.maxTimeLimit=6e4,this.autoReportTime=12e4,this._records=[],this.maxRecordCount=1e3,this.minRecordCount=150,this.heartbeatInterval=2e3,this.minBlockTime=300,this.perfReported=!1,this.smoothReported=!1,this.limitSlowActionTime=1e3,this.lastReportAction={},this.reportInterval=3e4,this.startAutoReport()}var t,n,r;return t=e,n=[{key:"getDocFormat",value:function(){return this.context.docFormat}},{key:"getEditorMode",value:function(){return this.context.defaultMode}},{key:"getEditorScene",value:function(){return this.context.scene}},{key:"marks",value:function(e){this.timing[e]=(new Date).getTime()}},{key:"has",value:function(e){return-1!==this.timing[e]}},{key:"startAutoReport",value:function(){var e=this;setTimeout((function(){e.reportPerf()}),this.autoReportTime)}},{key:"stats",value:function(){var e={m1:this.measure("Init","EditorLoaded"),m2:this.measure("DocLoadStart","DocLoadEnd"),m3:this.measure("Init","DocRendered")};return this.has("CollabReady")?(e.m4=this.measure("Init","CollabReady"),e.d1="collab"):(e.m4=this.measure("Init","DocRendered"),e.d1="lock"),e.d2=this.getEditorScene(),e}},{key:"editReady",value:function(){return this.has("EditorLoaded")&&this.has("DocLoadStart")&&this.has("DocLoadEnd")&&this.has("DocRendered")}},{key:"reportPerf",value:function(){if(!this.perfReported&&(this.perfReported=!0,this.editReady())){var e=this.stats(),t=this.getDocFormat();this.context.isBigLakeDocument&&s.a.logBigLakeEditorPerf(e),s.a.logEditorPerf(t,e),e.m3>this.MaxRenderTime&&s.a.logEditWorkflow({code:"RENDER_SLOW",message:"渲染耗时 <".concat(Math.ceil(e.m3/1e4),"0 秒"),editMode:this.getEditorMode(),scene:this.getEditorScene()})}}},{key:"reset",value:function(){for(var e in this.timing)this.timing[e]=-1}},{key:"measure",value:function(e,t){return this.timing[e]&&this.timing[t]?-1===this.timing[e]||-1===this.timing[t]?-1:Math.max(0,Math.min(this.maxTimeLimit,this.timing[t]-this.timing[e])):-1}},{key:"startHeartbeat",value:function(){var e=this;this.smoothReported||(this.clearHeartbeat(),this.pingTime=+new Date,this.heartbeat=setTimeout((function(){e.pong()}),this.heartbeatInterval))}},{key:"clearHeartbeat",value:function(){this.heartbeat&&clearTimeout(this.heartbeat)}},{key:"pong",value:function(){if(!this.inActive){var e=new Date-this.pingTime-this.heartbeatInterval;e<this.minBlockTime?this._records.push(0):this._records.push(Math.ceil(e/1e3))}this._records.length>this.maxRecordCount?this.reportSmooth():this.startHeartbeat()}},{key:"pause",value:function(){this.inActive=!0}},{key:"resume",value:function(){this.inActive=!1}},{key:"reportSmooth",value:function(){if(!this.smoothReported){var e=this._records.length;if(!(e<this.minRecordCount)){var t=0;this._records.forEach((function(e){e&&t++}));var n=Math.round(100*(e-t)/e),r=this.getDocFormat();s.a.logEditorSmooth(r,{d1:this.getEditorMode(),d2:this.getEditorScene(),m1:n,m2:2*e,c2:this._records.join("_"),msg:"顺滑等级: ".concat(Math.floor(n/10))}),this._records=[],this.smoothReported=!0}}}},{key:"logSlowAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(n<this.limitSlowActionTime)){var r=+new Date;if(!(this.lastReportAction[t]&&this.lastReportAction[t]+this.reportInterval>r)){this.lastReportAction[t]=r;var o={action:t,useTime:n,scene:this.getEditorScene()};switch(e){case"sheet":s.a.logSheetSlowAction(o);break;case"lakex":s.a.logLakexSlowAction(o);break;case"board":s.a.logBoardSlowAction(o);break;case"table":s.a.logTableSlowAction(o)}}}}}],n&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),g=v,b=n(183);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function _(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:String(t)}var R,j=l()("editor:doc:lockManager"),A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,n,r,o=x(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),_(C(n=o.call(this)),"lazyLock",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;n.clearLockTimer(),e?n.lockTimer=setTimeout((function(){n.lock()}),1e3*e):n.lock()})),_(C(n),"unLock",(function(){var e,t,r;if(j("unLock"),n.clearLockTimer(),!n.locked)return Promise.resolve();var o=(null===(e=window.appData)||void 0===e?void 0:e.isYuqueMobileApp)&&(null===(t=window.AlipayJSBridge)||void 0===t||null===(r=t.startupParams)||void 0===r?void 0:r.appId);if("function"!=typeof navigator.sendBeacon||n.workflow.isDesktopApp||window.appData.isAlipayWebApp||o||n.workflow.note)return n.locked=!1,n.workflow.doUnlock({id:n.doc.id,uuid:n.uuid});var a=new URLSearchParams;return a.set("ctoken",Object(b.a)(window)),a.set("uuid",n.uuid),navigator.sendBeacon("/api/".concat(n.workflow.docDomain.toLowerCase(),"s/").concat(n.doc.id,"/unlock?").concat(a.toString())),n.locked=!1,Promise.resolve()})),_(C(n),"checkLakeEditConflict",(function(e){j("[check conflict]lock: %o",e);var t,r=C(n).me,o=e.locker,a=e.collab_members,i=void 0===a?[]:a;return i.length>0&&(j("[check conflict]doc is editing in ot mode"),t=1===i.length&&i[0].id===r.id?c.ERROR_CODE.LOCKED_BY_SELF_COLLAB:c.ERROR_CODE.LOCKED_BY_COLLAB),!t&&o&&o.id!==r.id&&(j("[check conflict]doc is locked by other one"),t=c.ERROR_CODE.LOCKED_BY_OTHER),!t&&e.draft_version>n.doc.draft_version&&(j("[check conflict]doc content has new version"),t=c.ERROR_CODE.LOCKED_BY_VERSIONCONFLICT),j("[check conflict]result",{code:t,lock:e}),t})),n.doc=e,n.workflow=t,n.me=t.me,n.lockTimer=null,n.LOCK_INTERVAL=59,n.MAX_RETRY_COUNT=10,n.locking=!1,n.locked=!1,n.retryCount=0,n.uuid=f()(10),n}return t=a,(n=[{key:"start",value:function(){j("lock start"),this.lockTimer||this.lazyLock()}},{key:"resume",value:function(){this.lazyLock(1)}},{key:"resetDoc",value:function(e){this.doc=e}},{key:"lock",value:function(){var e,t=this;j("lock doc, is locking: ",this.locking);var n=null===(e=this.doc)||void 0===e?void 0:e.id;if(!this.locking&&n){this.locking=!0;var r=this.uuid;return this.emit("lock_start"),this.workflow.doLock({id:n,uuid:r}).then((function(e){if(t.locking=!1,!t.doc||t.doc.id!==n)return t.workflow.doUnlock({id:n,uuid:r});t.locked=!e.code;var o=t.checkLakeEditConflict(e);o?(t.emit("error",{code:o,lock:e}),t.locked&&t.workflow.doUnlock({id:n,uuid:r})):t.locked&&(t.lazyLock(t.LOCK_INTERVAL),t.emit("ready"),t.retryCount=0)})).catch((function(e){t.locking=!1,t.doc&&n===t.doc.id&&(t.locked=!1,t.emit("error",{code:c.ERROR_CODE.LOCK_FAILED,message:e.message}),t.retryCount++,t.retryCount<t.MAX_RETRY_COUNT&&t.lazyLock(t.retryCount*t.LOCK_INTERVAL))}))}}},{key:"clearLockTimer",value:function(){this.lockTimer&&(j("stop polling"),clearTimeout(this.lockTimer),this.lockTimer=null)}},{key:"destroy",value:function(){this.unLock(),this.locking=!1,delete this.doc}}])&&w(t.prototype,n),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.a),T=A;function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function D(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==L(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===L(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=(D(R={},c.EDITOR_NAME.LAKEX,{bgColor:"ca19007.da16020",label:"ca19007.da16062",headingCollapsed:"ca19007.da16050",tableSpacing:"ca19007.da16043",tableBorderVisible:"ca19007.da16042",tableVerticalAlign:"ca19007.da16033",tableEquallyColumn:"ca19007.da16045",tableInsertAfterColumn:"ca19007.da16037",tableInsertAfterRow:"ca19007.da16035",tableToggleWidthMode:"ca19007.da16044",tableColumnWidth:"ca19007.da16032",tableColumnMoveTo:"ca19007.da16041",tableInsertBeforeColumn:"ca19007.da16036",tableInsertBeforeRow:"ca19007.da16034",tableDeleteColumn:"ca19007.da16038",tableDeleteRow:"ca19007.da16039",tableRowHeight:"ca19007.da16031",tableRowMoveTo:"ca19007.da16040",emoji:"ca19007.da16071",unicodeEmoji:"ca19007.da16071",table:"ca19007.da16027",insertFile:"ca19007.da9386",insertFiles:"ca19007.da9386",insertCard:"ca19007.da13586",insertLink:"ca19007.da16054",insertVideo:"ca19007.da15970",insertBookmark:"ca19007.da16079",image:"ca19007.da15966",insertImage:"ca19007.da15966",insertYuqueInlineDoc:"ca19007.da16075",insertDocument:"ca19007.da16081",tableUnmergeCell:"ca19007.da16029",undo:"ca19007.da9540",tableCellBgColor:"ca19007.da16030",alignment:"ca19007.da16049",translate:"ca19007.da16059",outdent:"ca19007.da16052",columnsAddColumn:"ca19007.da16086",columns:"ca19007.da16084",columnsToggleWidthMode:"ca19007.da16089",columnsWidths:"ca19007.da16085",copy:"ca19007.da16046",alert:"ca19007.da16064",paintFormat:"ca19007.da16057",tableMergeCell:"ca19007.da16028",hr:"ca19007.da16063",bold:"ca19007.da15971",cut:"ca19007.da16047",cardToLink:"ca19007.da16055",textContainerTrans:"ca19007.da9385",link:"ca19007.da16053",linkToYuqueInlineDoc:"ca19007.da16074",linkToYuqueDoc:"ca19007.da16073",linkToThirdparty:"ca19007.da16061",linkToBookmark:"ca19007.da16077",linkToBookmarkInline:"ca19007.da16078",defaultFontsize:"ca19007.da16023",cardBatchApply:"ca19007.da15965",clearBgColor:"ca19007.da16021",clearFormat:"ca19007.da16058",clearColor:"ca19007.da16019",taskList:"ca19007.da16026",containerToggle:"ca19007.da9384",deleteColumns:"ca19007.da16088",columnDelete:"ca19007.da16087",columnDeleteByIndex:"ca19007.da16087",deleteCard:"ca19007.da13690",deleteBrick:"ca19007.da9381",sup:"ca19007.da16067",paragraphSpacing:"ca19007.da13585",typography:"ca19007.da13582",layout:"ca19007.da9542",search:"ca19007.da16069",indent:"ca19007.da16051",mention:"ca19007.da16076",replaceText:"ca19007.da16070",dropFile:"ca19007.da9387",unorderedList:"ca19007.da16025",sub:"ca19007.da16066",addBelowBrick:"ca19007.da9383",underline:"ca19007.da16016",insertSlash:"ca19007.da16082",italic:"ca19007.da16015",lineHeight:"ca19007.da16056",code:"ca19007.da16068",moveCard:"ca19007.da13691",moveBrick:"ca19007.da9382",moveImage:"ca19007.da16060",quote:"ca19007.da16065",orderedList:"ca19007.da16024",paste:"ca19007.da16048",markdownPasteParse:"ca19007.da16080",collapse:"ca19007.da16083",strikethrough:"ca19007.da16017",redo:"ca19007.da9541",brickToCodeblock:"ca19007.da16072",fontsize:"ca19007.da16022",wordCount:"ca19007.da9539",color:"ca19007.da16018"}),D(R,c.EDITOR_NAME.SHEET,{setType:"ca33271.da12555",setDecimal:"ca33271.da12842",setStyle:"ca33271.da12843",insertCol:"ca33271.da12844",insertRow:"ca33271.da16148",mergeCell:"ca33271.da16149",splitCell:"ca33271.da16150",moveCol:"ca33271.da16151",moveRow:"ca33271.da16152",removeCol:"ca33271.da16153",removeRow:"ca33271.da16154",hideCol:"ca33271.da16155",hideRow:"ca33271.da16156",cancelHide:"ca33271.da16157",resizeCol:"ca33271.da16158",resizeRow:"ca33271.da16159",copy:"ca33271.da16160",paste:"ca33271.da16161",cut:"ca33271.da16162",clear:"ca33271.da16163",clearFormat:"ca33271.da16164",filter:"ca33271.da16165",sort:"ca33271.da16166",insert:"ca33271.da16167",replaceOne:"ca33271.da16168",replaceAll:"ca33271.da16169",autofill:"ca33271.da16170",insertRowAtBottom:"ca33271.da16171",frozen:"ca33271.da16172",insertSheet:"ca33271.da16173",removeSheet:"ca33271.da16174",cloneSheet:"ca33271.da16175",moveSheet:"ca33271.da16176",renameSheet:"ca33271.da16177",paint:"ca33271.da16178",setBorder:"ca33271.da16179",protect:"ca33271.da16180",resizeVessel:"ca33271.da16181",moveVessel:"ca33271.da16182",removeVessel:"ca33271.da16183",addChart:"ca33271.da16184",copyChart:"ca33271.da16185",updateChartConfig:"ca33271.da16186",activeSheet:"ca33271.da16187",adjustRowHeight:"ca33271.da16188",adjustColWidth:"ca33271.da16189",hideSheet:"ca33271.da16190",showSheet:"ca33271.da16191",setConditionalFormatting:"ca33271.da16192",sortConditionalFormatting:"ca33271.da16193",removeConditionalFormatting:"ca33271.da16194",clearConditionalFormatting:"ca33271.da16195",replaceSelections:"ca33271.da16196",exportSheet:"ca33271.da16197",addNote:"ca33271.da16198",removeNotes:"ca33271.da16199",highlightArea:"ca33271.da16200",tabColor:"ca33271.da16201",zoomSheet:"ca33271.da16202"}),D(R,c.EDITOR_NAME.BOARD,{ToBack:"ca33306.da16235",ToFront:"ca33306.da16236",Forward:"ca33306.da16237",Backward:"ca33306.da16238",Collapse:"ca33306.da16239",Expand:"ca33306.da16240",ZoomIn:"ca33306.da16241",ZoomOut:"ca33306.da16242",ZoomTo:"ca33306.da16243",ActualSize:"ca33306.da16244",FitViewport:"ca33306.da16245",Copy:"ca33306.da16246",Paste:"ca33306.da16247",CreateLink:"ca33306.da16248",BeginInsertLine:"ca33306.da16249",ButtonDragCanvas:"ca33306.da16250",SetTheme:"ca33306.da16251",SetCanvasBackgroundColor:"ca33306.da16252",Cut:"ca33306.da16253",MakeGroup:"ca33306.da16254",Ungroup:"ca33306.da16255",BeginInsertGeometry:"ca33306.da16256",BeginInsertText:"ca33306.da16257",BeginInsertImage:"ca33306.da16258",AlignBottom:"ca33306.da16259",AlignHCenter:"ca33306.da16260",AlignLeft:"ca33306.da16261",AlignRight:"ca33306.da16262",AlignTop:"ca33306.da16263",AlignVCenter:"ca33306.da16264",DistributeHorizontally:"ca33306.da16265",DistributeVertically:"ca33306.da16266",InsertText:"ca33306.da16257",InsertGeometry:"ca33306.da16256",InsertImage:"ca33306.da16258",AttachLink:"ca33306.da16248",LineSwapEndpoint:"ca33306.da16267",MindmapAppendChild:"ca33306.da16268",MindmapAppendSibling:"ca33306.da16269",MindmapMoveNode:"ca33306.da16270",MindmapAttachImage:"ca33306.da16271",MindmapBeginInsertStem:"ca33306.da16272",MindmapCreateLink:"ca33306.da16273",MindmapPrependSibling:"ca33306.da16269",MindmapInsertStem:"ca33306.da16272",MindmapInsertImage:"ca33306.da16271",MindmapAppendParent:"ca33306.da16274",MindmapRemoveSingleNode:"ca33306.da16275",MindmapAttachNote:"ca33306.da16276",MindmapAppendAbstract:"ca33306.da16277",ChangeLaneNumber:"ca33306.da16278",AddSwimlane:"ca33306.da16279",UpdateSwimlane:"ca33306.da16280"}),D(R,c.EDITOR_NAME.TABLE,{activeView:"ca33314.da16288",insertTable:"ca33314.da16289",insertRow:"ca33314.da16290",removeRows:"ca33314.da16291",insertForm:"ca33314.da16292",removeForm:"ca33314.da16293",enableForm:"ca33314.da16294",disableForm:"ca33314.da16295",updateForm:"ca33314.da16296",insertCol:"ca33314.da16297",moveCol:"ca33314.da16298",resizeCol:"ca33314.da16299",search:"ca33314.da16300",removeCol:"ca33314.da16301",updateCol:"ca33314.da16302",copy:"ca33314.da16303",paste:"ca33314.da16304",setFilter:"ca33314.da16305",setSort:"ca33314.da16306",setStats:"ca33314.da16307",setGroup:"ca33314.da16308",setGroupState:"ca33314.da16309",insertCard:"ca33314.da16310",insertGrid:"ca33314.da16311",updateRowHeight:"ca33314.da16312",updateViewName:"ca33314.da16313",copyView:"ca33314.da16314",removeView:"ca33314.da16315",insertKanban:"ca33314.da16316",setColumns:"ca33314.da16317",setCover:"ca33314.da16318",setShowField:"ca33314.da16319",copyRow:"ca33314.da16320",addGroupItem:"ca33314.da16321",removeGroupItem:"ca33314.da16322",updateGroupItem:"ca33314.da16323",moveGroupItem:"ca33314.da16324",moveRow:"ca33314.da16325"}),R),M=n(98);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function I(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==N(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===N(a)?a:String(a)),r)}var o,a}var H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B(this,e),this.pageId=window.appData.traceId,this.actions=[],this.errorCode=null,this.context=t,this.userChanged=!1}var t,n,r;return t=e,(n=[{key:"getDate",value:function(){var e=new Date;return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())}},{key:"getTime",value:function(){var e=new Date;return"".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds())}},{key:"pushDate",value:function(){var e=this.getDate();e!==this.date&&(this.date&&this.report(),this.date=e,this.actions.push("[".concat(e,"]")))}},{key:"log",value:function(e,t){this.pushDate(),this.actions.push("".concat(this.getTime()," ").concat(e," ").concat(void 0===t?"":t))}},{key:"logUserChanged",value:function(){this.userChanged=!0}},{key:"logError",value:function(e,t){this.pushDate(),this.actions.push("".concat(this.getTime()," ").concat(e," ").concat(void 0===t?"":t)),this.errorCode=e}},{key:"getReportData",value:function(){return["".concat(this.context.scene,":").concat(this.context.defaultMode)].concat(I(this.actions)).join("~")}},{key:"reset",value:function(){this.actions=[],this.errorCode=null,this.date=null,this.userChanged=!1}},{key:"report",value:function(){if(0!==this.actions.length){var e={c2:this.getReportData(),d1:this.context.currentMode,d2:this.context.docFormat,d3:this.context.scene,d4:this.errorCode};s.a.logEditAction(e,this.errorCode,this.userChanged),this.reset()}}},{key:"logAction",value:function(e,t){P[e]&&P[e][t]&&Object(M.spmClick)(P[e][t])}}])&&V(t.prototype,n),r&&V(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),z=H;function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(){W=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new O(o||[]);return r(i,"_invoke",{value:k(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function p(){}function h(){}var m={};c(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(_([])));g&&g!==t&&n.call(g,a)&&(m=g);var b=h.prototype=f.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==q(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,r(b,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,l,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=_,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Y(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Y(a,r,o,i,l,"next",e)}function l(e){Y(a,r,o,i,l,"throw",e)}i(void 0)}))}}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ne(r.key),r)}}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ee(e);if(t){var o=ee(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Q(this,n)}}function Q(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}function te(e,t,n){return(t=ne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e){var t=function(e,t){if("object"!==q(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===q(t)?t:String(t)}var re=l()("editor:doc:wf"),oe=window.appData,ae=oe.isAlipayWebApp,ie=oe.isYuqueMobileApp,le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(w,e);var t,n,o,a,i,l,d,p,h,m,v,b,y=Z(w);function w(e){var t,n=e.doc,o=void 0===n?{}:n,a=e.mode,i=e.scene;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),te(J(t=y.call(this)),"clear",$(W().mark((function e(){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.doc.id){e.next=2;break}return e.abrupt("return",!0);case 2:if(t._clearAble()){e.next=4;break}return e.abrupt("return",!1);case 4:return t.clearing=!0,t.onBeforeReset(),t._clearLazyPublishTimer(),t.clearError(),t._clearMessage(),t._clearLazyDisconnect(),t._clearLazyStartTimer(),t._clearCacheTimer(),e.next=14,t.save(c.SAVE_TYPE.AUTO);case 14:return t.transmitDocStatus(c.DOC_STATUS.loaded),t.editable=!1,t.docLoaded={},t.saving=!1,t.publishing=!1,t.docRendered=!1,t.initialDocument=null,t.saveId=null,t.lockManager&&(t.lockManager.destroy(),t.lockManager=null),t.collabManager=null,t.collabDisabled=!1,delete t.editorBiz,t.onReset(),t.clearing=!1,t.freeCallback=null,e.abrupt("return",!0);case 30:case"end":return e.stop()}}),e)})))),te(J(t),"onEditorLoaded",(function(e){var n=e.engine;t.engine=n,window.__engine=n.getOriginEngine(),window.__workflow=J(t),t._bindEvents(),t.performance.marks("EditorLoaded"),t.userAction.log("editor_ready")})),te(J(t),"_bindEvents",(function(){t.eventBinded||(t.doBindEvents(),t.engine.onCommandError((function(e){t.error(G({code:c.ERROR_CODE.COMMAND_ERROR},e))})),t.engine.onCommandEnd((function(e,n,r){t.performance.logSlowAction(e,n,r),t.userAction.logAction(e,n)})),t.eventBinded=!0)})),te(J(t),"waitForFree",(function(e){t._clearAble()?(t.freeCallback=null,e()):(t.emit(c.WORKFLOW_EVENT.message,{type:c.MESSAGE.BUZY,data:{docStatus:t.docStatus}}),t.freeCallback=e)})),te(J(t),"setDoc",(function(e){return!!t._clearAble()&&(t.docSetUid=f()(6),t._updateDoc(e),t._renderSummary(),!0)})),te(J(t),"onPageInactive",(function(){t.userAction.log("page_inactive"),t.currentMode!==c.EDIT_MODE.COLLAB_CUSTOM&&(t.cache(),t.save(c.SAVE_TYPE.AUTO),t.currentMode===c.EDIT_MODE.LOCK&&t.lockManager&&t.lockManager.unLock(),t._lazyDisconnect())})),te(J(t),"onPageLeave",(function(){t.userAction.log("page_leave"),t.currentMode!==c.EDIT_MODE.COLLAB_CUSTOM&&(t.cache(),t.save(c.SAVE_TYPE.AUTO),t.currentMode===c.EDIT_MODE.LOCK&&t.lockManager&&t.lockManager.unLock())})),te(J(t),"onPageOnline",(function(){t.transmitNetStatus(c.NET_STATUS.online),t.currentMode===c.EDIT_MODE.COLLAB&&t.collabManager&&!t.collabManager.isAlive()&&setTimeout((function(){t.cache(),t.start()}),1e3)})),te(J(t),"onPageOffline",(function(){t.transmitNetStatus(c.NET_STATUS.offline)})),te(J(t),"onPageActive",(function(){t.userAction.log("page_active"),t._clearLazyDisconnect(),re("page _onPageActive",t.currentMode,t.docStatus),t.reChooseMode(),t.currentMode===c.EDIT_MODE.COLLAB?t.collabManager&&!t.collabManager.isAlive()&&t.start():t.currentMode===c.EDIT_MODE.LOCK&&t.startLockService()})),te(J(t),"_lazyDisconnect",(function(){t._clearLazyDisconnect(),t.disconnectTimer=setTimeout((function(){t.currentMode===c.EDIT_MODE.COLLAB&&t.collabManager&&t.collabManager.isAlive()&&(t.collabManager.disconnect(),t.userAction.log("collab_lazy_disconnect"),t.setEditable(!1))}),t.lazyDisconnectInterval)})),te(J(t),"_clearLazyDisconnect",(function(){t.disconnectTimer&&clearTimeout(t.disconnectTimer)})),te(J(t),"start",function(){var e=$(W().mark((function e(n){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.userAction.log("start"),t._checkStartAble()){e.next=4;break}return t.lazyStart(),e.abrupt("return");case 4:if(t._beforeStart(),t.setEditable(!1),t.performance.marks("DocLoadStart"),e.t0=n,e.t0){e.next=12;break}return e.next=11,t.loadDoc();case 11:e.t0=e.sent;case 12:if((n=e.t0)&&n.id===t.doc.id){e.next=15;break}return e.abrupt("return");case 15:return t.performance.marks("DocLoadEnd"),t._updateDoc(n),t.editorBiz.saveCacheToServer(),t.currentMode===c.EDIT_MODE.COLLAB&&t.startCollabService(),e.next=21,t.initEditor(n);case 21:t.currentMode!==c.EDIT_MODE.LOCK&&t.currentMode!==c.EDIT_MODE.COLLAB_CUSTOM||t.setEditable(!0),t.performance.marks("DocRendered"),t.currentMode===c.EDIT_MODE.LOCK&&t.performance.reportPerf(),t.onStarted();case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),te(J(t),"setContent",(function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(n=t.engine).setContent.apply(n,[e].concat(o))})),te(J(t),"isReady",(function(){return!!t.engine})),te(J(t),"onMiniEditorExpandChange",(function(e){t.emit(c.WORKFLOW_EVENT.miniExpand,e)})),te(J(t),"onSaveTitle",(function(e){t.doc.title=e,t.emit(c.WORKFLOW_EVENT.saveTitle,e)})),te(J(t),"onContentChange",(function(e){if(!t.ignoreChange())return t._lazyCache(),t._setStopWatch("autosaveConflict",10),t.transmitDocStatus(c.DOC_STATUS.changed),t.emit(c.WORKFLOW_EVENT.change,e),t.currentMode===c.EDIT_MODE.LOCK&&t.startLockService(),delete t.cached,t.userAction.logUserChanged(),!0})),te(J(t),"_getInitEditorOption",(function(e){var t={};return e&&e.doc_dynamic_data&&(t.dynamicData=e.doc_dynamic_data),t})),te(J(t),"initEditor",function(){var e=$(W().mark((function e(n){var r;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re("document loaded, use document",t.initialDocument),r=t.initialDocument.value,t.currentMode===c.EDIT_MODE.COLLAB_CUSTOM&&(r=n.content),t.engine.getPureContent()===r&&!t.isDynamicDataChanged){e.next=15;break}return e.prev=5,e.next=8,t.engine.init({content:r},t._getInitEditorOption(t.doc));case 8:t.userAction.log("editor_render","".concat(null==n?void 0:n.id,":").concat(t.initialDocument.draft_version)),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),t.error({code:c.ERROR_CODE.RENDER_FAILED,error:e.t0,detail:{commandName:"init",content:r}}),e.abrupt("return");case 15:t.docRendered=!0,t.engine.readonly(!1),t._setStopWatch("ignoreChange",.5),t.onDocRendered();case 19:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()),te(J(t),"save",function(){var e=$(W().mark((function e(n){var o,a,i,l;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.userAction.log("save","".concat(n," ").concat(null===(o=t.doc)||void 0===o?void 0:o.id)),a=J(t),i=a.editable,re("on save, context: ",{editable:i,type:n}),t.checkSavable(n)){e.next=7;break}return t.userAction.log("unable_save"),e.abrupt("return",t.throwWhenPublish(n));case 7:if(!t.ignoreSave(n)){e.next=12;break}return re("on save, user not change content, ignore"),n===c.SAVE_TYPE.USER_SAVE&&(r.a.destroy(),r.a.success(__("文档已保存"))),t.userAction.log("ignore_save",t.docStatus),e.abrupt("return");case 12:return t.cache(),t.transmitDocStatus(c.DOC_STATUS.saving),t.saving=!0,t.saveId=f()(6),e.prev=16,e.next=19,t.engine.onBeforeSave();case 19:re("save:before done, do save to server"),e.next=28;break;case 22:e.prev=22,e.t0=e.catch(16),re("save:before has exception: ",e.t0),t.userAction.logError(c.ERROR_CODE.SAVE_BEFORE_FAILED),t.saving=!1,t.throwWhenPublish(n,new Error(__("内容存在未完成的上传或其他异常，请检查后重试")));case 28:return e.prev=28,e.next=31,t.doSaveDoc(n,t.saveId);case 31:if(l=e.sent,t.saving=!1,l&&l.id===t.doc.id){e.next=35;break}throw new Error("");case 35:return t.saveSuccess(n,l),e.abrupt("return",l);case 39:e.prev=39,e.t1=e.catch(28),t.saving=!1,t.throwWhenPublish(n,e.t1),t.saveFailed(n,e.t1);case 44:case"end":return e.stop()}}),e,null,[[16,22],[28,39]])})));return function(t){return e.apply(this,arguments)}}()),te(J(t),"publish",function(){var e=$(W().mark((function e(n){var r;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.userAction.log("publish"),re("publish:",n),!t._checkBuzy()){e.next=4;break}return e.abrupt("return");case 4:if(!t.doc.local){e.next=7;break}return t._lazyPublish(n),e.abrupt("return");case 7:return e.prev=7,t.publishing=!0,e.next=11,t.save(c.SAVE_TYPE.USER_PUBLISH);case 11:return r=e.sent,t.transmitDocStatus(c.DOC_STATUS.publishing),e.next=15,t.doPublishDoc(n);case 15:return t.publishing=!1,e.next=18,t.publishSuccess(r);case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),t.publishing=!1,t.publishFailed(e.t0);case 24:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(t){return e.apply(this,arguments)}}()),te(J(t),"_lazyPublish",(function(e){t._clearLazyPublishTimer(),t.lazyPublishTimer=setTimeout((function(){t.publish(e)}),200)})),te(J(t),"_clearLazyPublishTimer",(function(){t.lazyPublishTimer&&clearTimeout(t.lazyPublishTimer)})),te(J(t),"saveDocTheme",function(){var e=$(W().mark((function e(n){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.saveEditorMeta({isDraft:!0,themeMetas:[n]});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),te(J(t),"inferNotify",(function(){try{if(t.doc.format!==u.FORMAT.LAKE)return!1;var e=t.doc.word_count,n=t.getWordCount();return re("infer_notify","".concat(e,":").concat(n)),n-e>300}catch(e){return!1}})),te(J(t),"getWordCount",(function(e){return t.engine.getWordCount(e)})),te(J(t),"getSummary",(function(e){t.engine.getSummary(e)})),te(J(t),"isVersionConflict",(function(e){return t.editorBiz.hasNewVersion(e)})),te(J(t),"isEmptyDoc",(function(){return!!t.isDefaultTitle(t.doc.title)&&t.engine.isEmpty()})),te(J(t),"isDocContentEmpty",(function(){return t.engine.isEmpty()})),te(J(t),"isOnlyOneEditSession",(function(){return t.currentMode===c.EDIT_MODE.LOCK||t.collabManager&&t.collabManager.isOnlyOneCollabSession()})),te(J(t),"revert",(function(e){t.userAction.log("revert_doc"),re("[onRevert]version:",e),t.editorBiz.saveCacheToServer(),t.engine.setContent(e.content),t.transmitDocStatus(c.DOC_STATUS.changed),t.currentMode===c.EDIT_MODE.LOCK&&t.startLockService()})),te(J(t),"reset",(function(e){t.engine.reset(e)})),te(J(t),"doSaveDoc",function(){var e=$(W().mark((function e(t){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),te(J(t),"doIgnoreSave",(function(){return!1})),te(J(t),"doPublishDoc",function(){var e=$(W().mark((function e(t){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.doc=G({},o),t.scene=i||c.EDIT_SCENE.WEB,t.defaultMode=a||c.EDIT_MODE.LOCK,t.engine=null,t.editorBiz=null,t.lockManager=null,t.collabManager=null,t.editable=!1,t.docLoaded={},t.saving=!1,t.initialDocument=null,t.performance=new g(J(t)),t.userAction=new z(J(t)),t._stopWatch={},t.lazyCacheInterval=ae||ie?1e3:5e3,t.lazyDisconnectInterval=12e5,t.bigDocumentWordCount=1e4,t.isDynamicDataChanged=!1,t.collabConnected=!1,t.netStatus=c.NET_STATUS.online,t.currentMode=t.defaultMode,t}return t=w,n=[{key:"setTargetDocId",value:function(e){this.targetDocId=e}},{key:"isSwitchingDoc",get:function(){return!(!this.doc||!this.targetDocId||this.doc.id===this.targetDocId)}},{key:"docFormat",get:function(){var e;return this.doc&&this.doc.format&&(e=this.doc.format),"lake"===e&&this.engine&&this.engine.lakex&&(e="lakex"),e}},{key:"isBigLakeDocument",get:function(){return this.doc&&"lake"===this.doc.format&&this.doc.word_count>this.bigDocumentWordCount}},{key:"_checkFreeCallback",value:function(){this.freeCallback&&this._clearAble()&&(this.freeCallback(),this.freeCallback=null)}},{key:"_checkBuzy",value:function(){return!!this._isBuzy()&&(this.emit(c.WORKFLOW_EVENT.message,{type:c.MESSAGE.BUZY,data:{docStatus:this.docStatus}}),!0)}},{key:"_renderSummary",value:function(){try{this.setContent(this.editorBiz.extractSummary(),this._getInitEditorOption(this.doc)),this.engine.readonly(!0),this.editorBiz.isBigDocument&&this.emit(c.WORKFLOW_EVENT.message,{type:c.MESSAGE.RENDER_BIG_DOCUMENT})}catch(e){}}},{key:"reChooseMode",value:function(){this.defaultMode!==c.EDIT_MODE.COLLAB_CUSTOM&&this.defaultMode!==c.EDIT_MODE.LOCK?(this.currentMode===c.EDIT_MODE.LOCK&&this.defaultMode===c.EDIT_MODE.COLLAB&&this.lockManager&&this.lockManager.unLock(),this.transmitMode(c.EDIT_MODE.COLLAB)):this.transmitMode(this.defaultMode)}},{key:"_checkStartAble",value:function(){return!this._isBuzy()&&!!this.engine&&this.startAble()}},{key:"_isBuzy",value:function(){return!!([c.DOC_STATUS.saving,c.DOC_STATUS.publishing,c.DOC_STATUS.loading].includes(this.docStatus)||this.clearing||this.publishing||this.saving)}},{key:"_clearAble",value:function(){return!([c.DOC_STATUS.saving,c.DOC_STATUS.publishing].includes(this.docStatus)||this.clearing||this.publishing||this.saving)}},{key:"_beforeStart",value:function(){this.clearError(),this._clearLazyStartTimer(),this._clearLazyDisconnect()}},{key:"lazyStart",value:function(){var e=this;this._clearLazyStartTimer(),this.lazyStartTimer=setTimeout((function(){e.start()}),1e3)}},{key:"_clearLazyStartTimer",value:function(){this.lazyStartTimer&&clearTimeout(this.lazyStartTimer)}},{key:"_setStopWatch",value:function(e,t){var n=+new Date;this._stopWatch[e]={start:n,end:n+1e3*t}}},{key:"_inStopWatch",value:function(e){if(!this._stopWatch[e])return!1;var t=+new Date;return t>=this._stopWatch[e].start&&t<=this._stopWatch[e].end}},{key:"clearError",value:function(){this.emit(c.WORKFLOW_EVENT.error,null)}},{key:"_clearMessage",value:function(){this.emit(c.WORKFLOW_EVENT.message,{type:c.MESSAGE.CLEAR})}},{key:"loadDoc",value:(b=$(W().mark((function e(){var t,n,r;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re("start loading document"),t=this.doc,this.userAction.log("load_doc",t.id),this.needLoad()){e.next=5;break}return e.abrupt("return");case 5:return this.transmitDocStatus(c.DOC_STATUS.loading),n=this.docSetUid,e.prev=7,e.next=10,this.doLoadDoc();case 10:if(r=e.sent,!(n&&n!==this.docSetUid||this.isSwitchingDoc)){e.next=13;break}return e.abrupt("return");case 13:return this.transmitDocStatus(c.DOC_STATUS.loaded),this.transmitNetStatus(c.NET_STATUS.online),this.docLoaded[t.id]=!0,e.abrupt("return",r);case 19:if(e.prev=19,e.t0=e.catch(7),!(n&&n!==this.docSetUid||this.isSwitchingDoc)){e.next=23;break}return e.abrupt("return");case 23:this.transmitDocStatus(c.DOC_STATUS.loaded),this.docLoaded[t.id]&&this._isNetWorkError(e.t0.message)?(this.transmitNetStatus(c.NET_STATUS.offline),this.emit(c.WORKFLOW_EVENT.message,{type:c.MESSAGE.DISCONNECT})):this.error({code:c.ERROR_CODE.INIT_FAILED,type:e.t0.type,status:e.t0.status,message:e.t0.message,stack:e.t0.stack});case 25:case"end":return e.stop()}}),e,this,[[7,19]])}))),function(){return b.apply(this,arguments)})},{key:"updateEditorBiz",value:function(e){var t=this;this.editorBiz&&this.editorBiz.doc.id===e.id?(this.onBeforeUpdateEditorBiz(e),this.editorBiz.resetDoc(e)):(this.editorBiz=this.createEditorBiz(e),this.editorBiz.on("cacheSavedToServer",(function(){t.emit(c.WORKFLOW_EVENT.message,{type:c.MESSAGE.DOC_CACHE_SAVED})})))}},{key:"createLockManager",value:function(){var e=this;this.lockManager||(this.userAction.log("create_lock"),this.lockManager=new T(this.doc,this),this.lockManager.on("ready",(function(){e.userAction.log("lock_ready"),e.docStatus!==c.DOC_STATUS.changed&&e.unLock(),e.transmitNetStatus(c.NET_STATUS.online)})),this.lockManager.on("lock_start",(function(){e.userAction.log("lock_start")})),this.lockManager.on("error",(function(t){e.lockError(t)})))}},{key:"lockError",value:function(e){this.userAction.log("lock_error",e.code),e.message&&this._isNetWorkError(e.message)?this.transmitNetStatus(c.NET_STATUS.offline):(this.transmitNetStatus(c.NET_STATUS.online),e.code===c.ERROR_CODE.LOCKED_BY_VERSIONCONFLICT&&this._isBuzy()||this.onLockError(e)||(this.setEditable(!1),this.error(e)))}},{key:"createCollabManager",value:function(){var e=this;this.collabManager||(this.collabManager=this.doCreateCollabManager(),this.collabManager&&(this.userAction.log("create_collab"),this.collabManager.on("ready",(function(){e.userAction.log("collab_ready"),e.engine.focusBlankDoc(e.initialDocument.value),e.setEditable(!0),e.collabConnected=!0,e.performance.marks("CollabReady"),e.performance.reportPerf(),e.transmitNetStatus(c.NET_STATUS.online)})),this.collabManager.on(c.WORKFLOW_EVENT.error,(function(t){if(e.onCollabError(t),e.cache(),e.error(t),t.code!==c.ERROR_CODE.COLLAB_DATA_INIT_ERROR){if(e.netStatus===c.NET_STATUS.online)return t.code===c.ERROR_CODE.DISCONNECTED&&e._collaboratorCounts?(e.userAction.log("collab_reconnect"),void e.start()):void e.transmitMode(c.EDIT_MODE.LOCK);e.setEditable(!1)}else e.setEditable(!1)})),this.collabManager.on(c.WORKFLOW_EVENT.message,(function(t){t.type===c.MESSAGE.DOC_DELETED?(e.transmitDocStatus(c.DOC_STATUS.deleted),e.error({code:c.ERROR_CODE.DOC_DELETED,data:t})):e.emit(c.WORKFLOW_EVENT.message,t)})),this.collabManager.on(c.WORKFLOW_EVENT.collabUsersChange,(function(t){e.emit(c.WORKFLOW_EVENT.collabUsersChange,t),e._collaboratorCounts=t.length,e.userAction.log("collab_user_changes",t.length)})),this.collabManager.on(c.WORKFLOW_EVENT.netStatusChange,(function(t){e.transmitNetStatus(t)}))))}},{key:"startLockService",value:function(){this.docStatus!==c.DOC_STATUS.deleted&&(re("startLockService"),this.createLockManager(),this.lockManager.start())}},{key:"startCollabService",value:function(){this.userAction.log("collab_start"),re("startCollabService"),this.createCollabManager(),this.collabManager.connect()}},{key:"unLock",value:function(){this.currentMode===c.EDIT_MODE.LOCK&&this.lockManager&&this.docStatus!==c.DOC_STATUS.changed&&(this.doc&&this.doc.local||(this.userAction.log("unlock"),this.lockManager.unLock()))}},{key:"transmitDocStatus",value:function(e){re("transmitDocStatus===========: ",this.docStatus,"=>",e),this.docStatus!==c.DOC_STATUS.deleted&&(e!==c.DOC_STATUS.saved||this.docStatus===c.DOC_STATUS.saving?e===c.DOC_STATUS.published&&this.docStatus!==c.DOC_STATUS.publishing||this.docStatus!==e&&(this.userAction.log("docStatus_changed","".concat(this.docStatus," => ").concat(e)),this.docStatus=e,this.emit(c.WORKFLOW_EVENT.docStatusChange,e)):this.emit(c.WORKFLOW_EVENT.docStatusChange,e))}},{key:"transmitNetStatus",value:function(e){this.netStatus!==e&&(this.netStatus=e,this.userAction.log("netStatus_changed",e),this.emit(c.WORKFLOW_EVENT.netStatusChange,e))}},{key:"transmitMode",value:function(e){this.currentMode!==e&&(re("transmitDocStatus===========: ",this.currentMode,"=>",e),this.currentMode=e,this.userAction.log("mode_changed",e),this.emit(c.WORKFLOW_EVENT.editModeChange,e)),this.currentMode===c.EDIT_MODE.LOCK&&this.setEditable(!0)}},{key:"setEditable",value:function(e){this.editable!==e&&(this.editable=e,this.userAction.log("editable_changed",e),this.emit(c.WORKFLOW_EVENT.editableChange,e))}},{key:"_updateDoc",value:function(e){this.userAction.log("doc_update",e.draft_version),this.updateEditorBiz(e),this.initialDocument=this.editorBiz.getInitialDocument(),this.onDocUpdated(e);var t=e&&e.doc_dynamic_data&&e.doc_dynamic_data[0]&&e.doc_dynamic_data[0].updated_at||"",n=this.doc&&this.doc.doc_dynamic_data&&this.doc.doc_dynamic_data[0]&&this.doc.doc_dynamic_data[0].updated_at||"";this.isDynamicDataChanged=t!==n,this.doc=G({},e),this.lockManager&&this.lockManager.resetDoc(e),this.currentMode===c.EDIT_MODE.COLLAB&&this.collabManager&&this.collabManager.resetDoc(e,this.initialDocument)}},{key:"_clearCacheTimer",value:function(){this.cacheTimer&&clearTimeout(this.cacheTimer)}},{key:"_lazyCache",value:function(){var e=this;this._clearCacheTimer(),this.cacheTimer=setTimeout((function(){e.cache()}),this.lazyCacheInterval)}},{key:"ignoreChange",value:function(){return!this.docRendered||!!this._inStopWatch("ignoreChange")}},{key:"cache",value:function(){if(this.needCache()&&!this.cached&&this.docRendered&&this.docStatus===c.DOC_STATUS.changed){var e;this._clearCacheTimer();try{e=this.engine.getPureContent()}catch(e){return this.error({code:c.ERROR_CODE.DATA_ERROR,error:e}),!1}try{this.cached=this.editorBiz.saveToCache({format:this.doc.format,value:e})}catch(e){return this.userAction.logError(c.ERROR_CODE.CACHE_FAILED,e.message),!1}return this.cached||this.userAction.logError(c.ERROR_CODE.CACHE_FAILED),this.userAction.log("cached"),!0}}},{key:"checkSavable",value:function(e){var t=this.editable,n=this.docStatus,o=this.docRendered,a=this.saving;this.userAction.log("save_status","editable:".concat(t,", docStatus:").concat(n,", docRendered:").concat(o,", saving:").concat(a));var i=e===c.SAVE_TYPE.USER_PUBLISH||e===c.SAVE_TYPE.USER_SAVE;return o?t?n===c.DOC_STATUS.saving||a?(i&&this.emit(c.WORKFLOW_EVENT.message,{type:c.MESSAGE.SAVING}),!1):n===c.DOC_STATUS.publishing?(i&&this.emit(c.WORKFLOW_EVENT.message,{type:c.MESSAGE.PUBLISHING}),!1):n!==c.DOC_STATUS.deleted||(i&&r.a.error(__("文档已经被删除")),!1):(re("on save, editor disabled, ignore"),i&&this.emit(c.WORKFLOW_EVENT.message,{type:c.MESSAGE.EDIT_DISABLE}),!1):(re("on save, editor unrendered, ignore"),i&&this.emit(c.WORKFLOW_EVENT.message,{type:c.MESSAGE.UNREADY}),!1)}},{key:"ignoreSave",value:function(e){return!!this.doIgnoreSave(e)||e!==c.SAVE_TYPE.USER_PUBLISH&&(this.docStatus===c.DOC_STATUS.saved||this.docStatus===c.DOC_STATUS.published||this.docStatus===c.DOC_STATUS.loaded&&!this.editorBiz.changed)}},{key:"throwWhenPublish",value:function(e,t){if(e===c.SAVE_TYPE.USER_PUBLISH)throw t||(t=new Error("")),t}},{key:"_isNetWorkError",value:function(e){return e.startsWith(__("网络异常"))}},{key:"_isConflictError",value:function(e){return e.includes("conflict")}},{key:"closeAble",value:function(){return!1===this.cached&&this.docStatus===c.DOC_STATUS.saving?(this.error({code:c.ERROR_CODE.CACHE_FAILED}),!1):!(this.engine&&!this.engine.isContentReady()&&(this.error({code:c.ERROR_CODE.CONTENT_UNREADY}),1))}},{key:"saveFailed",value:function(e,t,n){var r;(this.userAction.log("save_failed"),n&&n!==this.saveId)||(this.transmitDocStatus(c.DOC_STATUS.changed),e===c.SAVE_TYPE.USER_SAVE&&(this._isNetWorkError(t.message)?(this.transmitNetStatus(c.NET_STATUS.offline),this.emit(c.WORKFLOW_EVENT.message,{type:c.MESSAGE.SAVE_FAILED,body:t.message})):this._isConflictError(t.message)?(r=c.ERROR_CODE.DOC_SAVE_CONFLICT,t.weak_net_delay&&(r=null)):r=404===t.status?c.ERROR_CODE.DOC_NOT_EXIST:c.ERROR_CODE.SAVE_FAILED),r&&this.error({code:r,message:t.message}),this.onSaveFailed(),this._checkFreeCallback())}},{key:"saveSuccess",value:function(e,t){this.userAction.log("save_success","".concat(e,":").concat(null==t?void 0:t.id)),this.transmitDocStatus(c.DOC_STATUS.saved),this.transmitNetStatus(c.NET_STATUS.online),e!==c.SAVE_TYPE.USER_SAVE||t.local||r.a.success(__("保存成功")),t.local&&!this.clearing||this.clearCache(),this._updateDoc(t),e!==c.SAVE_TYPE.USER_PUBLISH&&(this.unLock(),this.onSaveSuccess(t),this._checkFreeCallback())}},{key:"saveRemoteSuccess",value:function(e,t,n){this.userAction.log("save_remote_success","".concat(e,":").concat(null==t?void 0:t.id)),t&&t.id===this.doc.id&&(n&&n!==this.saveId||(e===c.SAVE_TYPE.USER_SAVE&&r.a.success(__("保存成功")),this.clearCache(),this._updateDoc(t),this.unLock()))}},{key:"clearCache",value:function(){this.docStatus!==c.DOC_STATUS.changed&&(this.editorBiz.clearCachedContent(),delete this.cached,this.userAction.log("clear_cache"))}},{key:"publishSuccess",value:(v=$(W().mark((function e(t){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.userAction.log("publish_success"),this.transmitDocStatus(c.DOC_STATUS.published),e.next=4,this.onPublishSuccess(t);case 4:this._checkFreeCallback();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"publishFailed",value:function(e){this.transmitDocStatus(c.DOC_STATUS.changed),"max_doc_note_number"!==e.code&&this.error({code:c.ERROR_CODE.PUBLISH_FAILED,message:e.message}),this.onPublishFailed(),this._checkFreeCallback()}},{key:"saveEditorMeta",value:(m=$(W().mark((function e(t){var n,r,o,a,i,l;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.isDraft,r=t.themeMetas,o=this.doc,a=this.engine.getDocMeta({themeMetas:r})){e.next=5;break}return e.abrupt("return");case 5:return i=JSON.stringify(a),l={id:o.id,meta_draft:i},n||(l.meta=i),e.prev=8,e.next=11,this.doSaveEditorMeta(l);case 11:this.engine.updateDocEditorMeta(l),this.onEditorMetaSaved(),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:case"end":return e.stop()}}),e,this,[[8,15]])}))),function(e){return m.apply(this,arguments)})},{key:"deleteDoc",value:function(){this.transmitDocStatus(c.DOC_STATUS.deleted),this.onDocDeleted()}},{key:"exit",value:(h=$(W().mark((function e(t){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.unlock||!this.lockManager){e.next=6;break}return e.next=4,this.lockManager.unLock();case 4:e.next=7;break;case 6:return e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"error",value:function(e){var t,n;e.message=e.message||(null===(t=e.error)||void 0===t?void 0:t.message),e.stack=e.stack||(null===(n=e.error)||void 0===n?void 0:n.stack),this.emit(c.WORKFLOW_EVENT.error,e),this.reportError(e)}},{key:"reportError",value:function(e){var t;e.editMode=this.currentMode,e.scene=this.scene,e.docFormat=this.docFormat,this.userAction.logError(e.code),c.REPORT_ACTION_ERROR.includes(e.code)&&this.netStatus===c.NET_STATUS.online&&this.userAction.report(),s.a.logEditWorkflow(e),e.code===c.ERROR_CODE.COMMAND_ERROR&&s.a.logEngineError(G(G({},e),{},{code:null===(t=e.detail)||void 0===t?void 0:t.commandName}))}},{key:"destroy",value:function(){this.onDestroy()}},{key:"onDestroy",value:function(){}},{key:"onBeforeReset",value:function(){}},{key:"onReset",value:function(){}},{key:"onBeforeUpdateEditorBiz",value:function(){}},{key:"doBindEvents",value:function(){}},{key:"startAble",value:function(){return!0}},{key:"onStarted",value:function(){}},{key:"needLoad",value:function(){return!0}},{key:"doLoadDoc",value:(p=$(W().mark((function e(){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})},{key:"onLockError",value:function(){}},{key:"doCreateCollabManager",value:function(){}},{key:"onCollabError",value:function(){}},{key:"createEditorBiz",value:function(){}},{key:"onDocUpdated",value:function(){}},{key:"onDocRendered",value:function(){}},{key:"needCache",value:function(){return!0}},{key:"onSaveFailed",value:function(){}},{key:"onSaveSuccess",value:function(){}},{key:"onDocDeleted",value:function(){}},{key:"onPublishSuccess",value:(d=$(W().mark((function e(){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{key:"onPublishFailed",value:function(){}},{key:"doSaveEditorMeta",value:(l=$(W().mark((function e(){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})},{key:"onEditorMetaSaved",value:function(){}},{key:"isDefaultTitle",value:function(){}},{key:"isActive",value:function(){return!0}},{key:"doLock",value:(i=$(W().mark((function e(){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"doUnlock",value:(a=$(W().mark((function e(){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})}],n&&K(t.prototype,n),o&&K(t,o),Object.defineProperty(t,"prototype",{writable:!1}),w}(a.a);t.a=le},2986:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"AddRecord",(function(){return tk})),n.d(t,"Button",(function(){return Sx})),n.d(t,"CELL_TYPE",(function(){return Ac})),n.d(t,"CardEditor",(function(){return XO})),n.d(t,"CardReader",(function(){return JO})),n.d(t,"CardSetting",(function(){return Dx})),n.d(t,"CellEditor",(function(){return cE})),n.d(t,"CellPreviewer",(function(){return Cy})),n.d(t,"CellView",(function(){return lg})),n.d(t,"CheckboxType",(function(){return zg})),n.d(t,"ColConfig",(function(){return tE})),n.d(t,"ContextMenu",(function(){return Xx})),n.d(t,"DateType",(function(){return ab})),n.d(t,"Editor",(function(){return mO})),n.d(t,"EditorController",(function(){return tn})),n.d(t,"EmailType",(function(){return ib})),n.d(t,"EngineEvent",(function(){return qs})),n.d(t,"FileManageController",(function(){return Cb})),n.d(t,"FileType",(function(){return Sb})),n.d(t,"Filter",(function(){return vk})),n.d(t,"Form",(function(){return dk})),n.d(t,"FormEditor",(function(){return $y})),n.d(t,"GridSetting",(function(){return Ax})),n.d(t,"Group",(function(){return xk})),n.d(t,"IEditorAdapter",(function(){return en})),n.d(t,"ITemplateAdapter",(function(){return nn})),n.d(t,"ImageType",(function(){return Ab})),n.d(t,"InputType",(function(){return Tg})),n.d(t,"KanbanGroup",(function(){return Gx})),n.d(t,"KanbanSetting",(function(){return Nx})),n.d(t,"KernelEvent",(function(){return gc})),n.d(t,"LinkType",(function(){return Lb})),n.d(t,"MentionType",(function(){return Mb})),n.d(t,"ModalController",(function(){return Rk})),n.d(t,"ModalManage",(function(){return pc})),n.d(t,"ModalScope",(function(){return dc})),n.d(t,"ModalService",(function(){return hc})),n.d(t,"NetStatus",(function(){return uE})),n.d(t,"NewView",(function(){return Yx})),n.d(t,"NumberType",(function(){return Nb})),n.d(t,"PhoneType",(function(){return Ib})),n.d(t,"Plugin",(function(){return an})),n.d(t,"Reader",(function(){return vO})),n.d(t,"RowEditorController",(function(){return Ub})),n.d(t,"RowHeight",(function(){return yk})),n.d(t,"Search",(function(){return qx})),n.d(t,"SelectType",(function(){return Vg})),n.d(t,"Sort",(function(){return Ck})),n.d(t,"TableCore",(function(){return ig})),n.d(t,"TableKernel",(function(){return t_})),n.d(t,"TemplateController",(function(){return rn})),n.d(t,"TextareaType",(function(){return Lg})),n.d(t,"Toolbar",(function(){return ac})),n.d(t,"ToolbarService",(function(){return cc})),n.d(t,"VIEW_TYPES_ENUM",(function(){return Is})),n.d(t,"ViewManage",(function(){return Bx})),n.d(t,"ViewSetting",(function(){return _x})),n.d(t,"ViewTypes",(function(){return Gs})),n.d(t,"Workbench",(function(){return Jt})),n.d(t,"WorkbenchUIManage",(function(){return on})),n.d(t,"default",(function(){return e_})),n.d(t,"fixWebFormData",(function(){return tf}));var o=n(48),a=n.n(o),i=n(0),l=n.n(i),c=n(1),s=n.n(c),u=n(5),d=n.n(u),f=n(6),p=n.n(f),h=n(4),m=n.n(h),v=n(7),g=n.n(v),b=n(8),y=n.n(b),w=n(3),k=n.n(w),x=n(28),E=n.n(x),C=n(17),O=n.n(C),_=n(9),S=n.n(_),R=n(12),j=n(22),A=n(15),T=n(42),L=n(10),D=n(43),P=n(47),M=n(49),N=n(39),I=n(55),F=n(56),B=n(36),V=n.n(B),H=n(68),z=n.n(H),q=n(1280),U=n(1069),G=n(40),W=n(929),Y=n(54),$=n.n(Y),K=n(2),X=n.n(K),Z=n(889),Q=n.n(Z),J=n(76),ee=n.n(J),te=n(86),ne=n.n(te),re=n(790),oe=n.n(re),ae=n(24),ie=n.n(ae),le=n(34),ce=n.n(le),se=n(232),ue=n(2370),de=n(2301),fe=n(3141),pe=n(2671),he=n(26),me=n.n(he),ve=n(450),ge=n.n(ve),be=n(995),ye=n.n(be),we=n(997),ke=n.n(we),xe=n(127),Ee=n.n(xe),Ce=n(3005),Oe=n(29),_e=n.n(Oe),Se=n(3060),Re=n.n(Se),je=n(32);n.d(t,"FileUtils",(function(){return je.FileUtils}));var Ae=n(198),Te=n.n(Ae),Le=n(962),De=n.n(Le),Pe=n(19),Me=n.n(Pe),Ne=n(2931),Ie=n.n(Ne),Fe=n(3044),Be=n.n(Fe),Ve=n(3115),He=n.n(Ve),ze=n(444),qe=n.n(ze),Ue=n(3140),Ge=n.n(Ue),We=n(176),Ye=n.n(We),$e=n(89),Ke=n.n($e),Xe=(n(840),n(123)),Ze=n(53),Qe=n.n(Ze),Je=n(132),et=n.n(Je),tt=n(293),nt=n.n(tt),rt=n(1418),ot=n(1194),at=n.n(ot),it=n(66),lt=n.n(it),ct=(n(1083),n(925)),st=(n(2202),n(1274)),ut=(n(2667),n(3143)),dt=(n(841),n(58)),ft=(n(843),n(79)),pt=(n(2668),n(3142)),ht=(n(842),n(100)),mt=(n(1098),n(302)),vt=(n(1099),n(165)),gt=(n(2669),n(3144)),bt=(n(2282),n(295)),yt=(n(988),n(130)),wt=(n(844),n(291)),kt=n(97),xt=n.n(kt),Et=(n(2369),n(1210)),Ct=n.n(Et),Ot=(n(1197),n(626)),_t=n(1344),St=n(255),Rt=n.n(St),jt=(n(1100),n(926)),At=n(1440),Tt=(n(2658),n(3062)),Lt=n(75),Dt=n.n(Lt),Pt=(n(1196),n(188)),Mt=n(120),Nt=n.n(Mt),It=(n(989),n(847)),Ft=n(589),Bt=n.n(Ft),Vt=n(288),Ht=n.n(Vt),zt=n(1108),qt=n.n(zt),Ut=n(785),Gt=n.n(Ut),Wt=n(217),Yt=n(1004),$t=n(333),Kt=n(1010),Xt=n(1465),Zt=(n(1097),n(282)),Qt=(n(1258),n(275)),Jt=function(){function e(t){d()(this,e),this.options=t,s()(this,"templateController",new rn(this.options.template.adapter,this,this.options.template.args)),s()(this,"editorController",new tn(this.options.editor.adapter,this,this.options.editor.args)),s()(this,"UIManage",new on(this.options.componentOptions,this)),s()(this,"pluginClass",void 0),s()(this,"pluginInstances",new Map)}var t;return p()(e,[{key:"renderPage",value:(t=E()(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.templateController.initContainers();case 2:return t=e.sent,e.next=5,this.editorController.renderEditor(t.editorContainer);case 5:this.UIManage.attachContainers(t),this._initPlugin(),this.UIManage.render();case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"mountPlugin",value:function(e){this.pluginClass=e}},{key:"_initPlugin",value:function(){var e,t=this;null===(e=this.pluginClass)||void 0===e||e.forEach((function(e){var n=new e(t.editor,t);n.init&&n.init(),t.pluginInstances.set(n.name,n)}))}},{key:"destroy",value:function(){this.templateController.destroy(),this.editorController.destroy(),this.UIManage.destroy(),this.pluginInstances.forEach((function(e){return e.destroy()}))}},{key:"container",get:function(){return this.options.containerEl}},{key:"editor",get:function(){return this.editorController.editor}},{key:"plugins",get:function(){return this.pluginInstances}},{key:"UI",get:function(){return this.UIManage}}]),e}(),en=p()((function e(t,n){d()(this,e),this.workbench=t,this.args=n})),tn=function(){function e(t,n,r){d()(this,e),s()(this,"_editor",void 0),s()(this,"adapter",void 0),this.adapter=new t(n,r)}var t;return p()(e,[{key:"renderEditor",value:(t=E()(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.adapter.attachEditor(t);case 4:this._editor=e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.adapter.destroy()}},{key:"editor",get:function(){return this._editor}}]),e}(),nn=p()((function e(t,n){d()(this,e),this.workbench=t,this.args=n})),rn=function(){function e(t,n,r){d()(this,e),this.workbench=n,s()(this,"template",void 0),this.template=new t(this.workbench,r)}var t;return p()(e,[{key:"initContainers",value:(t=E()(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.template.initContainers();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.template.destroy()}}]),e}(),on=function(){function e(t,n){d()(this,e),this.options=t,this.workbench=n,s()(this,"containers",void 0),s()(this,"toolbarService",void 0),s()(this,"modalService",new hc(this.workbench,this,this.options.modal)),t.toolbar&&(this.toolbarService=new cc(t.toolbar,n))}return p()(e,[{key:"attachContainers",value:function(e){this.containers=e}},{key:"render",value:function(){this.renderToolbar()}},{key:"renderToolbar",value:function(){this.toolbarService&&this.containers.toolbarContainer&&this.toolbarService.render(this.containers.toolbarContainer)}},{key:"updateToolbar",value:function(e){this.containers.toolbarContainer&&this.toolbarService.update(this.containers.toolbarContainer,e)}},{key:"showModal",value:function(e,t){this.modalService.showModal(e,t)}},{key:"hideModal",value:function(e){this.modalService.hideModal(e)}},{key:"hasModal",value:function(e){return this.modalService.hasModal(e)}},{key:"updateModal",value:function(){this.modalService.updateModal()}},{key:"containerEl",get:function(){return this.containers}},{key:"destroy",value:function(){var e;this.toolbarService&&null!==(e=this.containers)&&void 0!==e&&e.toolbarContainer&&this.toolbarService.destroy(this.containers.toolbarContainer),this.modalService.destroy()}}]),e}(),an=function(){function e(t,n){d()(this,e),this.editor=t,this.workbench=n,s()(this,"name",void 0)}return p()(e,[{key:"destroy",value:function(){}}]),e}();function ln(e,t){var n=Object(L.a)({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}function cn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sn={exports:{}},un={},dn="function"==typeof Symbol&&Symbol.for,fn=dn?Symbol.for("react.element"):60103,pn=dn?Symbol.for("react.portal"):60106,hn=dn?Symbol.for("react.fragment"):60107,mn=dn?Symbol.for("react.strict_mode"):60108,vn=dn?Symbol.for("react.profiler"):60114,gn=dn?Symbol.for("react.provider"):60109,bn=dn?Symbol.for("react.context"):60110,yn=dn?Symbol.for("react.async_mode"):60111,wn=dn?Symbol.for("react.concurrent_mode"):60111,kn=dn?Symbol.for("react.forward_ref"):60112,xn=dn?Symbol.for("react.suspense"):60113,En=dn?Symbol.for("react.suspense_list"):60120,Cn=dn?Symbol.for("react.memo"):60115,On=dn?Symbol.for("react.lazy"):60116,_n=dn?Symbol.for("react.block"):60121,Sn=dn?Symbol.for("react.fundamental"):60117,Rn=dn?Symbol.for("react.responder"):60118,jn=dn?Symbol.for("react.scope"):60119;function An(e){if("object"===z()(e)&&null!==e){var t=e.$$typeof;switch(t){case fn:switch(e=e.type){case yn:case wn:case hn:case vn:case mn:case xn:return e;default:switch(e=e&&e.$$typeof){case bn:case kn:case On:case Cn:case gn:return e;default:return t}}case pn:return t}}}function Tn(e){return An(e)===wn}function Ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return l.a.Children.forEach(e,(function(e){(null!=e||t.keepEmpty)&&(Array.isArray(e)?n=n.concat(Ln(e)):sn.exports.isFragment(e)&&e.props?n=n.concat(Ln(e.props.children,t)):n.push(e))})),n}un.AsyncMode=yn,un.ConcurrentMode=wn,un.ContextConsumer=bn,un.ContextProvider=gn,un.Element=fn,un.ForwardRef=kn,un.Fragment=hn,un.Lazy=On,un.Memo=Cn,un.Portal=pn,un.Profiler=vn,un.StrictMode=mn,un.Suspense=xn,un.isAsyncMode=function(e){return Tn(e)||An(e)===yn},un.isConcurrentMode=Tn,un.isContextConsumer=function(e){return An(e)===bn},un.isContextProvider=function(e){return An(e)===gn},un.isElement=function(e){return"object"===z()(e)&&null!==e&&e.$$typeof===fn},un.isForwardRef=function(e){return An(e)===kn},un.isFragment=function(e){return An(e)===hn},un.isLazy=function(e){return An(e)===On},un.isMemo=function(e){return An(e)===Cn},un.isPortal=function(e){return An(e)===pn},un.isProfiler=function(e){return An(e)===vn},un.isStrictMode=function(e){return An(e)===mn},un.isSuspense=function(e){return An(e)===xn},un.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===hn||e===wn||e===vn||e===mn||e===xn||e===En||"object"===z()(e)&&null!==e&&(e.$$typeof===On||e.$$typeof===Cn||e.$$typeof===gn||e.$$typeof===bn||e.$$typeof===kn||e.$$typeof===Sn||e.$$typeof===Rn||e.$$typeof===jn||e.$$typeof===_n)},un.typeOf=An,sn.exports=un;var Dn={};function Pn(e,t){}function Mn(e,t){!function(e,t,n){t||Dn[n]||(e(!1,n),Dn[n]=!0)}(Pn,e,t)}function Nn(e,t){"function"==typeof e?e(t):"object"===Object(T.a)(e)&&e&&"current"in e&&(e.current=t)}function In(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return e}));return r.length<=1?r[0]:function(e){t.forEach((function(t){Nn(t,e)}))}}function Fn(e){var t,n,r=sn.exports.isMemo(e)?e.type.type:e.type;return!!("function"!=typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render)&&!!("function"!=typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render)}function Bn(e){return e instanceof HTMLElement?e:e instanceof l.a.Component?V.a.findDOMNode(e):null}var Vn=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),Hn="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,zn=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),qn="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(zn):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},Un=["top","right","bottom","left","width","height","size","weight"],Gn="undefined"!=typeof MutationObserver,Wn=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function a(){n&&(n=!1,e()),r&&l()}function i(){qn(a)}function l(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(i,20);o=e}return l}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Hn&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Gn?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Hn&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;Un.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Yn=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},$n=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||zn},Kn=er(0,0,0,0);function Xn(e){return parseFloat(e)||0}function Zn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+Xn(e["border-"+n+"-width"])}),0)}var Qn="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof $n(e).SVGGraphicsElement}:function(e){return e instanceof $n(e).SVGElement&&"function"==typeof e.getBBox};function Jn(e){return Hn?Qn(e)?function(e){var t=e.getBBox();return er(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Kn;var r=$n(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],a=e["padding-"+o];t[o]=Xn(a)}return t}(r),a=o.left+o.right,i=o.top+o.bottom,l=Xn(r.width),c=Xn(r.height);if("border-box"===r.boxSizing&&(Math.round(l+a)!==t&&(l-=Zn(r,"left","right")+a),Math.round(c+i)!==n&&(c-=Zn(r,"top","bottom")+i)),!function(e){return e===$n(e).document.documentElement}(e)){var s=Math.round(l+a)-t,u=Math.round(c+i)-n;1!==Math.abs(s)&&(l-=s),1!==Math.abs(u)&&(c-=u)}return er(o.left,o.top,l,c)}(e):Kn}function er(e,t,n,r){return{x:e,y:t,width:n,height:r}}var tr=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=er(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=Jn(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),nr=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,o=e.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,i=Object.create(a.prototype);return Yn(i,{x:t,y:n,width:r,height:o,top:n,right:t+r,bottom:o+n,left:t}),i}(t);Yn(this,{target:e,contentRect:n})},rr=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new Vn,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof $n(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new tr(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof $n(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new nr(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),or="undefined"!=typeof WeakMap?new WeakMap:new Vn,ar=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Wn.getInstance(),r=new rr(t,n,this);or.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){ar.prototype[e]=function(){var t;return(t=or.get(this))[e].apply(t,arguments)}}));var ir=void 0!==zn.ResizeObserver?zn.ResizeObserver:ar,lr=new Map;var cr=new ir((function(e){e.forEach((function(e){var t,n=e.target;null===(t=lr.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))})),sr=function(e){Object(I.a)(n,e);var t=Object(F.a)(n);function n(){return Object(P.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){return this.props.children}}]),n}(i.Component),ur=i.createContext(null);function dr(e){var t=e.children,n=e.disabled,r=i.useRef(null),o=i.useRef(null),a=i.useContext(ur),l="function"==typeof t,c=l?t(r):t,s=i.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),u=!l&&i.isValidElement(c)&&Fn(c),d=u?c.ref:null,f=i.useMemo((function(){return In(d,r)}),[d,r]),p=i.useRef(e);p.current=e;var h=i.useCallback((function(e){var t=p.current,n=t.onResize,r=t.data,o=e.getBoundingClientRect(),i=o.width,l=o.height,c=e.offsetWidth,u=e.offsetHeight,d=Math.floor(i),f=Math.floor(l);if(s.current.width!==d||s.current.height!==f||s.current.offsetWidth!==c||s.current.offsetHeight!==u){var h={width:d,height:f,offsetWidth:c,offsetHeight:u};s.current=h;var m=c===Math.round(i)?i:c,v=u===Math.round(l)?l:u,g=Object(L.a)(Object(L.a)({},h),{},{offsetWidth:m,offsetHeight:v});null==a||a(g,e,r),n&&Promise.resolve().then((function(){n(g,e)}))}}),[]);return i.useEffect((function(){var e,t,a=Bn(r.current)||Bn(o.current);return a&&!n&&(e=a,t=h,lr.has(e)||(lr.set(e,new Set),cr.observe(e)),lr.get(e).add(t)),function(){return function(e,t){lr.has(e)&&(lr.get(e).delete(t),lr.get(e).size||(cr.unobserve(e),lr.delete(e)))}(a,h)}}),[r.current,n]),i.createElement(sr,{ref:o},u?i.cloneElement(c,{ref:f}):c)}function fr(e){var t=e.children;return("function"==typeof t?[t]:Ln(t)).map((function(t,n){var r=(null==t?void 0:t.key)||"".concat("rc-observer-key","-").concat(n);return i.createElement(dr,Object(A.default)({},e,{key:r}),t)}))}fr.Collection=function(e){var t=e.children,n=e.onBatchResize,r=i.useRef(0),o=i.useRef([]),a=i.useContext(ur),l=i.useCallback((function(e,t,i){r.current+=1;var l=r.current;o.current.push({size:e,element:t,data:i}),Promise.resolve().then((function(){l===r.current&&(null==n||n(o.current),o.current=[])})),null==a||a(e,t,i)}),[n,a]);return i.createElement(ur.Provider,{value:l},t)};var pr="RC_FORM_INTERNAL_HOOKS",hr=function(){Mn(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},mr=i.createContext({getFieldValue:hr,getFieldsValue:hr,getFieldError:hr,getFieldsError:hr,isFieldsTouched:hr,isFieldTouched:hr,isFieldValidating:hr,isFieldsValidating:hr,resetFields:hr,setFields:hr,setFieldsValue:hr,validateFields:hr,submit:hr,getInternalHooks:function(){return hr(),{dispatch:hr,initEntityValue:hr,registerField:hr,useSubscribe:hr,setInitialValues:hr,setCallbacks:hr,getFields:hr,setValidateMessages:hr,setPreserve:hr}}});function vr(e){return null==e?[]:Array.isArray(e)?e:[e]}function gr(){return(gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function br(e){return(br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function kr(e,t,n){return(kr=wr()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&yr(o,n.prototype),o}).apply(null,arguments)}function xr(e){var t="function"==typeof Map?new Map:void 0;return(xr=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return kr(e,arguments,br(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),yr(r,e)})(e)}var Er=/%[sdj%]/g,Cr=function(){};function Or(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function _r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1,o=t[0],a=t.length;if("function"==typeof o)return o.apply(null,t.slice(1));if("string"==typeof o){var i=String(o).replace(Er,(function(e){if("%%"===e)return"%";if(r>=a)return e;switch(e){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch(e){return"[Circular]"}break;default:return e}}));return i}return o}function Sr(e,t){return null==e||!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!=typeof e||e)}function Rr(e,t,n){var r=0,o=e.length;!function a(i){if(i&&i.length)n(i);else{var l=r;r+=1,l<o?t(e[l],a):n([])}}([])}void 0!==r&&r.env;var jr=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,"Async Validation Error")||this).errors=t,r.fields=n,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,yr(t,n),r}(xr(Error));function Ar(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:"function"==typeof t?t():t,field:t.field||e.fullField}}}function Tr(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===z()(r)&&"object"===z()(e[n])?e[n]=gr({},e[n],r):e[n]=r}return e}function Lr(e,t,n,r,o,a){!e.required||n.hasOwnProperty(e.field)&&!Sr(t,a||e.type)||r.push(_r(o.messages.required,e.fullField))}var Dr={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Pr={integer:function(e){return Pr.number(e)&&parseInt(e,10)===e},float:function(e){return Pr.number(e)&&!Pr.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(e){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===z()(e)&&!Pr.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(Dr.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(Dr.url)},hex:function(e){return"string"==typeof e&&!!e.match(Dr.hex)}},Mr={required:Lr,whitespace:function(e,t,n,r,o){(/^\s+$/.test(t)||""===t)&&r.push(_r(o.messages.whitespace,e.fullField))},type:function(e,t,n,r,o){if(e.required&&void 0===t)Lr(e,t,n,r,o);else{var a=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(a)>-1?Pr[a](t)||r.push(_r(o.messages.types[a],e.fullField,e.type)):a&&z()(t)!==e.type&&r.push(_r(o.messages.types[a],e.fullField,e.type))}},range:function(e,t,n,r,o){var a="number"==typeof e.len,i="number"==typeof e.min,l="number"==typeof e.max,c=t,s=null,u="number"==typeof t,d="string"==typeof t,f=Array.isArray(t);if(u?s="number":d?s="string":f&&(s="array"),!s)return!1;f&&(c=t.length),d&&(c=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),a?c!==e.len&&r.push(_r(o.messages[s].len,e.fullField,e.len)):i&&!l&&c<e.min?r.push(_r(o.messages[s].min,e.fullField,e.min)):l&&!i&&c>e.max?r.push(_r(o.messages[s].max,e.fullField,e.max)):i&&l&&(c<e.min||c>e.max)&&r.push(_r(o.messages[s].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,o){e.enum=Array.isArray(e.enum)?e.enum:[],-1===e.enum.indexOf(t)&&r.push(_r(o.messages.enum,e.fullField,e.enum.join(", ")))},pattern:function(e,t,n,r,o){e.pattern&&(e.pattern instanceof RegExp?(e.pattern.lastIndex=0,e.pattern.test(t)||r.push(_r(o.messages.pattern.mismatch,e.fullField,t,e.pattern))):"string"==typeof e.pattern&&(new RegExp(e.pattern).test(t)||r.push(_r(o.messages.pattern.mismatch,e.fullField,t,e.pattern))))}};function Nr(e,t,n,r,o){var a=e.type,i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Sr(t,a)&&!e.required)return n();Mr.required(e,t,r,i,o,a),Sr(t,a)||Mr.type(e,t,r,i,o)}n(i)}var Ir={string:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Sr(t,"string")&&!e.required)return n();Mr.required(e,t,r,a,o,"string"),Sr(t,"string")||(Mr.type(e,t,r,a,o),Mr.range(e,t,r,a,o),Mr.pattern(e,t,r,a,o),!0===e.whitespace&&Mr.whitespace(e,t,r,a,o))}n(a)},method:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Sr(t)&&!e.required)return n();Mr.required(e,t,r,a,o),void 0!==t&&Mr.type(e,t,r,a,o)}n(a)},number:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),Sr(t)&&!e.required)return n();Mr.required(e,t,r,a,o),void 0!==t&&(Mr.type(e,t,r,a,o),Mr.range(e,t,r,a,o))}n(a)},boolean:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Sr(t)&&!e.required)return n();Mr.required(e,t,r,a,o),void 0!==t&&Mr.type(e,t,r,a,o)}n(a)},regexp:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Sr(t)&&!e.required)return n();Mr.required(e,t,r,a,o),Sr(t)||Mr.type(e,t,r,a,o)}n(a)},integer:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Sr(t)&&!e.required)return n();Mr.required(e,t,r,a,o),void 0!==t&&(Mr.type(e,t,r,a,o),Mr.range(e,t,r,a,o))}n(a)},float:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Sr(t)&&!e.required)return n();Mr.required(e,t,r,a,o),void 0!==t&&(Mr.type(e,t,r,a,o),Mr.range(e,t,r,a,o))}n(a)},array:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(null==t&&!e.required)return n();Mr.required(e,t,r,a,o,"array"),null!=t&&(Mr.type(e,t,r,a,o),Mr.range(e,t,r,a,o))}n(a)},object:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Sr(t)&&!e.required)return n();Mr.required(e,t,r,a,o),void 0!==t&&Mr.type(e,t,r,a,o)}n(a)},enum:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Sr(t)&&!e.required)return n();Mr.required(e,t,r,a,o),void 0!==t&&Mr.enum(e,t,r,a,o)}n(a)},pattern:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Sr(t,"string")&&!e.required)return n();Mr.required(e,t,r,a,o),Sr(t,"string")||Mr.pattern(e,t,r,a,o)}n(a)},date:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Sr(t,"date")&&!e.required)return n();var i;Mr.required(e,t,r,a,o),Sr(t,"date")||(i=t instanceof Date?t:new Date(t),Mr.type(e,i,r,a,o),i&&Mr.range(e,i.getTime(),r,a,o))}n(a)},url:Nr,hex:Nr,email:Nr,required:function(e,t,n,r,o){var a=[],i=Array.isArray(t)?"array":z()(t);Mr.required(e,t,r,a,o,i),n(a)},any:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Sr(t)&&!e.required)return n();Mr.required(e,t,r,a,o)}n(a)}};function Fr(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Br=Fr();function Vr(e){this.rules=null,this._messages=Br,this.define(e)}function Hr(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null==n)return;n=n[t[r]]}return n}function zr(e,t,n,r){if(!t.length)return n;var o,a=Object(W.a)(t),i=a[0],l=a.slice(1);return o=e||"number"!=typeof i?Array.isArray(e)?Object(G.a)(e):Object(L.a)({},e):[],r&&void 0===n&&1===l.length?delete o[i][l[0]]:o[i]=zr(o[i],l,n,r),o}function qr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!Hr(e,t.slice(0,-1))?e:zr(e,t,n,r)}function Ur(e){return vr(e)}function Gr(e,t){return Hr(e,t)}function Wr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=qr(e,t,n,r);return o}function Yr(e,t){var n={};return t.forEach((function(t){var r=Gr(e,t);n=Wr(n,t,r)})),n}function $r(e,t){return e&&e.some((function(e){return Qr(e,t)}))}function Kr(e){return"object"===Object(T.a)(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function Xr(e,t){var n=Array.isArray(e)?Object(G.a)(e):Object(L.a)({},e);return t?(Object.keys(t).forEach((function(e){var r=n[e],o=t[e],a=Kr(r)&&Kr(o);n[e]=a?Xr(r,o||{}):o})),n):n}function Zr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return Xr(e,t)}),e)}function Qr(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,n){return t[n]===e}))}function Jr(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&e in t.target?t.target[e]:t}function eo(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var o=e[t],a=t-n;return a>0?[].concat(Object(G.a)(e.slice(0,n)),[o],Object(G.a)(e.slice(n,t)),Object(G.a)(e.slice(t+1,r))):a<0?[].concat(Object(G.a)(e.slice(0,t)),Object(G.a)(e.slice(t+1,n+1)),[o],Object(G.a)(e.slice(n+1,r))):e}Vr.prototype={messages:function(e){return e&&(this._messages=Tr(Fr(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==z()(e)||Array.isArray(e))throw new Error("Rules must be an object");var t,n;for(t in this.rules={},e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=function(){});var o,a,i=e,l=t,c=n;if("function"==typeof l&&(c=l,l={}),!this.rules||0===Object.keys(this.rules).length)return c&&c(),Promise.resolve();if(l.messages){var s=this.messages();s===Br&&(s=Fr()),Tr(s,l.messages),l.messages=s}else l.messages=this.messages();var u={};(l.keys||Object.keys(this.rules)).forEach((function(t){o=r.rules[t],a=i[t],o.forEach((function(n){var o=n;"function"==typeof o.transform&&(i===e&&(i=gr({},i)),a=i[t]=o.transform(a)),(o="function"==typeof o?{validator:o}:gr({},o)).validator=r.getValidationMethod(o),o.field=t,o.fullField=o.fullField||t,o.type=r.getType(o),o.validator&&(u[t]=u[t]||[],u[t].push({rule:o,value:a,source:i,field:t}))}))}));var d={};return function(e,t,n,r){if(t.first){var o=new Promise((function(t,o){Rr(function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n])})),t}(e),n,(function(e){return r(e),e.length?o(new jr(e,Or(e))):t()}))}));return o.catch((function(e){return e})),o}var a=t.firstFields||[];!0===a&&(a=Object.keys(e));var i=Object.keys(e),l=i.length,c=0,s=[],u=new Promise((function(t,o){var u=function(e){if(s.push.apply(s,e),++c===l)return r(s),s.length?o(new jr(s,Or(s))):t()};i.length||(r(s),t()),i.forEach((function(t){var r=e[t];-1!==a.indexOf(t)?Rr(r,n,u):function(e,t,n){var r=[],o=0,a=e.length;function i(e){r.push.apply(r,e),++o===a&&n(r)}e.forEach((function(e){t(e,i)}))}(r,n,u)}))}));return u.catch((function(e){return e})),u}(u,l,(function(e,t){var n,r=e.rule,o=!("object"!==r.type&&"array"!==r.type||"object"!==z()(r.fields)&&"object"!==z()(r.defaultField));function a(e,t){return gr({},t,{fullField:r.fullField+"."+e})}function i(n){void 0===n&&(n=[]);var i=n;if(Array.isArray(i)||(i=[i]),!l.suppressWarning&&i.length&&Vr.warning("async-validator:",i),i.length&&void 0!==r.message&&(i=[].concat(r.message)),i=i.map(Ar(r)),l.first&&i.length)return d[r.field]=1,t(i);if(o){if(r.required&&!e.value)return void 0!==r.message?i=[].concat(r.message).map(Ar(r)):l.error&&(i=[l.error(r,_r(l.messages.required,r.field))]),t(i);var c={};if(r.defaultField)for(var s in e.value)e.value.hasOwnProperty(s)&&(c[s]=r.defaultField);for(var u in c=gr({},c,e.rule.fields))if(c.hasOwnProperty(u)){var f=Array.isArray(c[u])?c[u]:[c[u]];c[u]=f.map(a.bind(null,u))}var p=new Vr(c);p.messages(l.messages),e.rule.options&&(e.rule.options.messages=l.messages,e.rule.options.error=l.error),p.validate(e.value,e.rule.options||l,(function(e){var n=[];i&&i.length&&n.push.apply(n,i),e&&e.length&&n.push.apply(n,e),t(n.length?n:null)}))}else t(i)}o=o&&(r.required||!r.required&&e.value),r.field=e.field,r.asyncValidator?n=r.asyncValidator(r,e.value,i,e.source,l):r.validator&&(!0===(n=r.validator(r,e.value,i,e.source,l))?i():!1===n?i(r.message||r.field+" fails"):n instanceof Array?i(n):n instanceof Error&&i(n.message)),n&&n.then&&n.then((function(){return i()}),(function(e){return i(e)}))}),(function(e){!function(e){var t,n=[],r={};function o(e){var t;Array.isArray(e)?n=(t=n).concat.apply(t,e):n.push(e)}for(t=0;t<e.length;t++)o(e[t]);n.length?r=Or(n):(n=null,r=null),c(n,r)}(e)}))},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!Ir.hasOwnProperty(e.type))throw new Error(_r("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?Ir.required:Ir[this.getType(e)]||!1}},Vr.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");Ir[e]=t},Vr.warning=Cr,Vr.messages=Br,Vr.validators=Ir;var to="'${name}' is not a valid ${type}",no={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:to,method:to,array:to,object:to,number:to,date:to,boolean:to,integer:to,float:to,regexp:to,email:to,url:to,hex:to},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},ro=Vr;function oo(e,t,n,r){var o=Object(L.a)(Object(L.a)({},n),{},{name:t,enum:(n.enum||[]).join(", ")}),a=function(e,t){return function(){return function(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}(e,Object(L.a)(Object(L.a)({},o),t))}};return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(o){var i=t[o];"string"==typeof i?n[o]=a(i,r):i&&"object"===Object(T.a)(i)?(n[o]={},e(i,n[o])):n[o]=i})),n}(Zr({},no,e))}function ao(e,t,n,r,o){return io.apply(this,arguments)}function io(){return(io=Object(U.a)(O.a.mark((function e(t,n,r,o,a){var l,c,s,u,d,f;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=Object(L.a)({},r),c=null,l&&"array"===l.type&&l.defaultField&&(c=l.defaultField,delete l.defaultField),s=new ro(Object(R.a)({},t,[l])),u=oo(o.validateMessages,t,l,a),s.messages(u),d=[],e.prev=7,e.next=10,Promise.resolve(s.validate(Object(R.a)({},t,n),Object(L.a)({},o)));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),e.t0.errors?d=e.t0.errors.map((function(e,t){var n=e.message;return i.isValidElement(n)?i.cloneElement(n,{key:"error_".concat(t)}):n})):(console.error(e.t0),d=[u.default()]);case 15:if(d.length||!c){e.next=20;break}return e.next=18,Promise.all(n.map((function(e,n){return ao("".concat(t,".").concat(n),e,c,o,a)})));case 18:return f=e.sent,e.abrupt("return",f.reduce((function(e,t){return[].concat(Object(G.a)(e),Object(G.a)(t))}),[]));case 20:return e.abrupt("return",d);case 21:case"end":return e.stop()}}),e,null,[[7,12]])})))).apply(this,arguments)}function lo(){return(lo=Object(U.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,Object(G.a)(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function co(){return(co=Object(U.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.length&&e(r),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function so(e,t,n,r,o,a){return"function"==typeof e?e(t,n,"source"in a?{source:a.source}:{}):r!==o}var uo=function(e){Object(I.a)(n,e);var t=Object(F.a)(n);function n(e){var r;return Object(P.a)(this,n),(r=t.call(this,e)).state={resetCount:0},r.cancelRegisterFunc=null,r.mounted=!1,r.touched=!1,r.dirty=!1,r.validatePromise=null,r.errors=[],r.cancelRegister=function(){var e=r.props,t=e.preserve,n=e.isListField,o=e.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(n,t,Ur(o)),r.cancelRegisterFunc=null},r.getNamePath=function(){var e=r.props,t=e.name,n=e.fieldContext.prefixName;return void 0!==t?[].concat(Object(G.a)(void 0===n?[]:n),Object(G.a)(t)):[]},r.getRules=function(){var e=r.props,t=e.rules,n=void 0===t?[]:t,o=e.fieldContext;return n.map((function(e){return"function"==typeof e?e(o):e}))},r.refresh=function(){r.mounted&&r.setState((function(e){return{resetCount:e.resetCount+1}}))},r.onStoreChange=function(e,t,n){var o=r.props,a=o.shouldUpdate,i=o.dependencies,l=void 0===i?[]:i,c=o.onReset,s=n.store,u=r.getNamePath(),d=r.getValue(e),f=r.getValue(s),p=t&&$r(t,u);switch("valueUpdate"===n.type&&"external"===n.source&&d!==f&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=[]),n.type){case"reset":if(!t||p)return r.touched=!1,r.dirty=!1,r.validatePromise=null,r.errors=[],c&&c(),void r.refresh();break;case"setField":if(p){var h=n.data;return"touched"in h&&(r.touched=h.touched),"validating"in h&&!("originRCField"in h)&&(r.validatePromise=h.validating?Promise.resolve([]):null),"errors"in h&&(r.errors=h.errors||[]),r.dirty=!0,void r.reRender()}if(a&&!u.length&&so(a,e,s,d,f,n))return void r.reRender();break;case"dependenciesUpdate":if(l.map(Ur).some((function(e){return $r(n.relatedFields,e)})))return void r.reRender();break;default:if(p||(!l.length||u.length||a)&&so(a,e,s,d,f,n))return void r.reRender()}!0===a&&r.reRender()},r.validateRules=function(e){var t=r.getNamePath(),n=r.getValue(),o=Promise.resolve().then((function(){if(!r.mounted)return[];var a=r.props,i=a.validateFirst,l=void 0!==i&&i,c=a.messageVariables,s=(e||{}).triggerName,u=r.getRules();s&&(u=u.filter((function(e){var t=e.validateTrigger;return!t||vr(t).includes(s)})));var d=function(e,t,n,r,o,a){var i,l=e.join("."),c=n.map((function(e){var t=e.validator;return t?Object(L.a)(Object(L.a)({},e),{},{validator:function(e,n,r){var o=!1,a=t(e,n,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){Mn(!o,"Your validator function has already return a promise. `callback` will be ignored."),o||r.apply(void 0,t)}))}));Mn(o=a&&"function"==typeof a.then&&"function"==typeof a.catch,"`callback` is deprecated. Please return a promise instead."),o&&a.then((function(){r()})).catch((function(e){r(e||" ")}))}}):e}));if(!0===o)i=new Promise(function(){var e=Object(U.a)(O.a.mark((function e(n,o){var i,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<c.length)){e.next=11;break}return e.next=4,ao(l,t,c[i],r,a);case 4:if(!(s=e.sent).length){e.next=8;break}return o(s),e.abrupt("return");case 8:i+=1,e.next=1;break;case 11:n([]);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var s=c.map((function(e){return ao(l,t,e,r,a)}));i=(o?function(e){return co.apply(this,arguments)}(s):function(e){return lo.apply(this,arguments)}(s)).then((function(e){return e.length?Promise.reject(e):[]}))}return i.catch((function(e){return e})),i}(t,n,u,e,l,c);return d.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r.validatePromise===o&&(r.validatePromise=null,r.errors=e,r.reRender())})),d}));return r.validatePromise=o,r.dirty=!0,r.errors=[],r.reRender(),o},r.isFieldValidating=function(){return!!r.validatePromise},r.isFieldTouched=function(){return r.touched},r.isFieldDirty=function(){return r.dirty},r.getErrors=function(){return r.errors},r.isListField=function(){return r.props.isListField},r.isList=function(){return r.props.isList},r.isPreserve=function(){return r.props.preserve},r.getMeta=function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,name:r.getNamePath()}},r.getOnlyChild=function(e){if("function"==typeof e){var t=r.getMeta();return Object(L.a)(Object(L.a)({},r.getOnlyChild(e(r.getControlled(),t,r.props.fieldContext))),{},{isFunction:!0})}var n=Ln(e);return 1===n.length&&i.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},r.getValue=function(e){var t=r.props.fieldContext.getFieldsValue,n=r.getNamePath();return Gr(e||t(!0),n)},r.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,n=t.trigger,o=t.validateTrigger,a=t.getValueFromEvent,i=t.normalize,l=t.valuePropName,c=t.getValueProps,s=t.fieldContext,u=void 0!==o?o:s.validateTrigger,d=r.getNamePath(),f=s.getInternalHooks,p=s.getFieldsValue,h=f(pr),m=h.dispatch,v=r.getValue(),g=c||function(e){return Object(R.a)({},l,e)},b=e[n],y=Object(L.a)(Object(L.a)({},e),g(v));y[n]=function(){var e;r.touched=!0,r.dirty=!0;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e=a?a.apply(void 0,n):Jr.apply(void 0,[l].concat(n)),i&&(e=i(e,v,p(!0))),m({type:"updateValue",namePath:d,value:e}),b&&b.apply(void 0,n)};var w=vr(u||[]);return w.forEach((function(e){var t=y[e];y[e]=function(){t&&t.apply(void 0,arguments);var n=r.props.rules;n&&n.length&&m({type:"validateField",namePath:d,triggerName:e})}})),y},e.fieldContext&&(0,(0,e.fieldContext.getInternalHooks)(pr).initEntityValue)(Object(N.a)(r)),r}return Object(M.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(pr).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,r=this.getOnlyChild(n),o=r.child;return r.isFunction?e=o:i.isValidElement(o)?e=i.cloneElement(o,this.getControlled(o.props)):(Mn(!o,"`children` of Field is not validate ReactElement."),e=o),i.createElement(i.Fragment,{key:t},e)}}]),n}(i.Component);function fo(e){var t=e.name,n=Object(D.a)(e,["name"]),r=i.useContext(mr),o=void 0!==t?Ur(t):void 0,a="keep";return n.isListField||(a="_".concat((o||[]).join("_"))),i.createElement(uo,Object(A.default)({key:a,name:o},n,{fieldContext:r}))}uo.contextType=mr,uo.defaultProps={trigger:"onChange",valuePropName:"value"};var po="__@field_split__";function ho(e){return e.map((function(e){return"".concat(Object(T.a)(e),":").concat(e)})).join(po)}var mo=function(){function e(){Object(P.a)(this,e),this.kvs=new Map}return Object(M.a)(e,[{key:"set",value:function(e,t){this.kvs.set(ho(e),t)}},{key:"get",value:function(e){return this.kvs.get(ho(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(ho(e))}},{key:"map",value:function(e){return Object(G.a)(this.kvs.entries()).map((function(t){var n=Object(j.a)(t,2),r=n[0],o=n[1],a=r.split(po);return e({key:a.map((function(e){var t=e.match(/^([^:]*):(.*)$/),n=Object(j.a)(t,3),r=n[1],o=n[2];return"number"===r?Number(o):o})),value:o})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}(),vo=function e(t){var n=this;Object(P.a)(this,e),this.formHooked=!1,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(e){return e===pr?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve}):(Mn(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){n.subscribable=e},this.setInitialValues=function(e,t){n.initialValues=e||{},t&&(n.store=Zr({},e,n.store))},this.getInitialValue=function(e){return Gr(n.initialValues,e)},this.setCallbacks=function(e){n.callbacks=e},this.setValidateMessages=function(e){n.validateMessages=e},this.setPreserve=function(e){n.preserve=e},this.timeoutId=null,this.warningUnhooked=function(){},this.getFieldEntities=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new mo;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=Ur(e);return t.get(n)||{INVALIDATE_NAME_PATH:Ur(e)}}))},this.getFieldsValue=function(e,t){if(n.warningUnhooked(),!0===e&&!t)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),o=[];return r.forEach((function(n){var r,a="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(e||!(null===(r=n.isListField)||void 0===r?void 0:r.call(n)))if(t){var i="getMeta"in n?n.getMeta():null;t(i)&&o.push(a)}else o.push(a)})),Yr(n.store,o.map(Ur))},this.getFieldValue=function(e){n.warningUnhooked();var t=Ur(e);return Gr(n.store,t)},this.getFieldsError=function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors()}:{name:Ur(e[n]),errors:[]}}))},this.getFieldError=function(e){n.warningUnhooked();var t=Ur(e);return n.getFieldsError([t])[0].errors},this.isFieldsTouched=function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o,a=t[0],i=t[1],l=!1;0===t.length?o=null:1===t.length?Array.isArray(a)?(o=a.map(Ur),l=!1):(o=null,l=a):(o=a.map(Ur),l=i);var c=n.getFieldEntities(!0),s=function(e){return e.isFieldTouched()};if(!o)return l?c.every(s):c.some(s);var u=new mo;o.forEach((function(e){u.set(e,[])})),c.forEach((function(e){var t=e.getNamePath();o.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&u.update(n,(function(t){return[].concat(Object(G.a)(t),[e])}))}))}));var d=function(e){return e.some(s)},f=u.map((function(e){return e.value}));return l?f.every(d):f.some(d)},this.isFieldTouched=function(e){return n.warningUnhooked(),n.isFieldsTouched([e])},this.isFieldsValidating=function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(Ur);return t.some((function(e){var t=e.getNamePath();return $r(r,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return n.warningUnhooked(),n.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new mo,r=n.getFieldEntities(!0);r.forEach((function(e){var n=e.props.initialValue,r=e.getNamePath();if(void 0!==n){var o=t.get(r)||new Set;o.add({entity:e,value:n}),t.set(r,o)}}));var o,a=function(r){r.forEach((function(r){if(void 0!==r.props.initialValue){var o=r.getNamePath();if(void 0!==n.getInitialValue(o))Mn(!1,"Form already set 'initialValues' with path '".concat(o.join("."),"'. Field can not overwrite it."));else{var a=t.get(o);if(a&&a.size>1)Mn(!1,"Multiple Field with path '".concat(o.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(a){var i=n.getFieldValue(o);e.skipExist&&void 0!==i||(n.store=Wr(n.store,o,Object(G.a)(a)[0].value))}}}}))};e.entities?o=e.entities:e.namePathList?(o=[],e.namePathList.forEach((function(e){var n,r=t.get(e);r&&(n=o).push.apply(n,Object(G.a)(Object(G.a)(r).map((function(e){return e.entity}))))}))):o=r,a(o)},this.resetFields=function(e){n.warningUnhooked();var t=n.store;if(!e)return n.store=Zr({},n.initialValues),n.resetWithFieldInitialValue(),void n.notifyObservers(t,null,{type:"reset"});var r=e.map(Ur);r.forEach((function(e){var t=n.getInitialValue(e);n.store=Wr(n.store,e,t)})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"})},this.setFields=function(e){n.warningUnhooked();var t=n.store;e.forEach((function(e){var r=e.name;e.errors;var o=Object(D.a)(e,["name","errors"]),a=Ur(r);"value"in o&&(n.store=Wr(n.store,a,o.value)),n.notifyObservers(t,[a],{type:"setField",data:e})}))},this.getFields=function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=e.getMeta(),o=Object(L.a)(Object(L.a)({},r),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(o,"originRCField",{value:!0}),o}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===Gr(n.store,r)&&(n.store=Wr(n.store,r,t))}},this.registerField=function(e){if(n.fieldEntities.push(e),void 0!==e.props.initialValue){var t=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(t,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e}));var a=void 0!==r?r:n.preserve;if(!1===a&&(!t||o.length>1)){var i=e.getNamePath(),l=t?void 0:Gr(n.initialValues,i);i.length&&n.getFieldValue(i)!==l&&n.fieldEntities.every((function(e){return!Qr(e.getNamePath(),i)}))&&(n.store=Wr(n.store,i,l,!0))}}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var o=e.namePath,a=e.triggerName;n.validateFields([o],{triggerName:a})}},this.notifyObservers=function(e,t,r){if(n.subscribable){var o=Object(L.a)(Object(L.a)({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,o)}))}else n.forceRootUpdate()},this.updateValue=function(e,t){var r=Ur(e),o=n.store;n.store=Wr(n.store,r,t),n.notifyObservers(o,[r],{type:"valueUpdate",source:"internal"});var a=n.getDependencyChildrenFields(r);a.length&&n.validateFields(a),n.notifyObservers(o,a,{type:"dependenciesUpdate",relatedFields:[r].concat(Object(G.a)(a))});var i=n.callbacks.onValuesChange;i&&i(Yr(n.store,[r]),n.getFieldsValue()),n.triggerOnFieldsChange([r].concat(Object(G.a)(a)))},this.setFieldsValue=function(e){n.warningUnhooked();var t=n.store;e&&(n.store=Zr(n.store,e)),n.notifyObservers(t,null,{type:"valueUpdate",source:"external"})},this.getDependencyChildrenFields=function(e){var t=new Set,r=[],o=new mo;return n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=Ur(t);o.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))})),function e(n){(o.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var o=n.getNamePath();n.isFieldDirty()&&o.length&&(r.push(o),e(o))}}))}(e),r},this.triggerOnFieldsChange=function(e,t){var r=n.callbacks.onFieldsChange;if(r){var o=n.getFields();if(t){var a=new mo;t.forEach((function(e){var t=e.name,n=e.errors;a.set(t,n)})),o.forEach((function(e){e.errors=a.get(e.name)||e.errors}))}r(o.filter((function(t){var n=t.name;return $r(e,n)})),o)}},this.validateFields=function(e,t){n.warningUnhooked();var r=!!e,o=r?e.map(Ur):[],a=[];n.getFieldEntities(!0).forEach((function(i){if(r||o.push(i.getNamePath()),(null==t?void 0:t.recursive)&&r){var l=i.getNamePath();l.every((function(t,n){return e[n]===t||void 0===e[n]}))&&o.push(l)}if(i.props.rules&&i.props.rules.length){var c=i.getNamePath();if(!r||$r(o,c)){var s=i.validateRules(Object(L.a)({validateMessages:Object(L.a)(Object(L.a)({},no),n.validateMessages)},t));a.push(s.then((function(){return{name:c,errors:[]}})).catch((function(e){return Promise.reject({name:c,errors:e})})))}}}));var i=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(o,a){e.forEach((function(e,i){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[i]=e,n>0||(t&&a(r),o(r))}))}))})):Promise.resolve([])}(a);n.lastValidatePromise=i,i.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var l=i.then((function(){return n.lastValidatePromise===i?Promise.resolve(n.getFieldsValue(o)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(o),errorFields:t,outOfDate:n.lastValidatePromise!==i})}));return l.catch((function(e){return e})),l},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(e){console.error(e)}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t};function go(e){var t=i.useRef(),n=i.useState({}),r=Object(j.a)(n,2)[1];if(!t.current)if(e)t.current=e;else{var o=new vo((function(){r({})}));t.current=o.getForm()}return[t.current]}var bo=i.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),yo=i.forwardRef((function(e,t){var n=e.name,r=e.initialValues,o=e.fields,a=e.form,l=e.preserve,c=e.children,s=e.component,u=void 0===s?"form":s,d=e.validateMessages,f=e.validateTrigger,p=void 0===f?"onChange":f,h=e.onValuesChange,m=e.onFieldsChange,v=e.onFinish,g=e.onFinishFailed,b=Object(D.a)(e,["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"]),y=i.useContext(bo),w=go(a),k=Object(j.a)(w,1)[0],x=k.getInternalHooks(pr),E=x.useSubscribe,C=x.setInitialValues,O=x.setCallbacks,_=x.setValidateMessages,S=x.setPreserve;i.useImperativeHandle(t,(function(){return k})),i.useEffect((function(){return y.registerForm(n,k),function(){y.unregisterForm(n)}}),[y,k,n]),_(Object(L.a)(Object(L.a)({},y.validateMessages),d)),O({onValuesChange:h,onFieldsChange:function(e){if(y.triggerFormChange(n,e),m){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];m.apply(void 0,[e].concat(r))}},onFinish:function(e){y.triggerFormFinish(n,e),v&&v(e)},onFinishFailed:g}),S(l);var R=i.useRef(null);C(r,!R.current),R.current||(R.current=!0);var P=c,M="function"==typeof c;M&&(P=c(k.getFieldsValue(!0),k)),E(!M);var N=i.useRef();i.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==Object(T.a)(e)||"object"!==Object(T.a)(t))return!1;var n=Object.keys(e),r=Object.keys(t),o=new Set([].concat(Object(G.a)(n),Object(G.a)(r)));return Object(G.a)(o).every((function(n){var r=e[n],o=t[n];return"function"==typeof r&&"function"==typeof o||r===o}))})(N.current||[],o||[])||k.setFields(o||[]),N.current=o}),[o,k]);var I=i.useMemo((function(){return Object(L.a)(Object(L.a)({},k),{},{validateTrigger:p})}),[k,p]),F=i.createElement(mr.Provider,{value:I},P);return!1===u?F:i.createElement(u,Object(A.default)({},b,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),k.submit()},onReset:function(e){var t;e.preventDefault(),k.resetFields(),null===(t=b.onReset)||void 0===t||t.call(b,e)}}),F)}));yo.FormProvider=function(e){var t=e.validateMessages,n=e.onFormChange,r=e.onFormFinish,o=e.children,a=i.useContext(bo),l=i.useRef({});return i.createElement(bo.Provider,{value:Object(L.a)(Object(L.a)({},a),{},{validateMessages:Object(L.a)(Object(L.a)({},a.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:l.current}),a.triggerFormChange(e,t)},triggerFormFinish:function(e,t){r&&r(e,{values:t,forms:l.current}),a.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(l.current=Object(L.a)(Object(L.a)({},l.current),{},Object(R.a)({},e,t))),a.registerForm(e,t)},unregisterForm:function(e){var t=Object(L.a)({},l.current);delete t[e],l.current=t,a.unregisterForm(e)}})},o)},yo.Field=fo,yo.List=function(e){var t=e.name,n=e.initialValue,r=e.children,o=e.rules,a=e.validateTrigger,l=i.useContext(mr),c=i.useRef({keys:[],id:0}).current;if("function"!=typeof r)return Mn(!1,"Form.List only accepts function as children."),null;var s=Ur(l.prefixName)||[],u=[].concat(Object(G.a)(s),Object(G.a)(Ur(t)));return i.createElement(mr.Provider,{value:Object(L.a)(Object(L.a)({},l),{},{prefixName:u})},i.createElement(fo,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:o,validateTrigger:a,initialValue:n,isList:!0},(function(e,t){var n=e.value,o=void 0===n?[]:n,a=e.onChange,i=l.getFieldValue,s=function(){return i(u||[])||[]},d={add:function(e,t){var n=s();t>=0&&t<=n.length?(c.keys=[].concat(Object(G.a)(c.keys.slice(0,t)),[c.id],Object(G.a)(c.keys.slice(t))),a([].concat(Object(G.a)(n.slice(0,t)),[e],Object(G.a)(n.slice(t))))):(c.keys=[].concat(Object(G.a)(c.keys),[c.id]),a([].concat(Object(G.a)(n),[e]))),c.id+=1},remove:function(e){var t=s(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(c.keys=c.keys.filter((function(e,t){return!n.has(t)})),a(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=s();e<0||e>=n.length||t<0||t>=n.length||(c.keys=eo(c.keys,e,t),a(eo(n,e,t)))}}},f=o||[];return Array.isArray(f)||(f=[]),r(f.map((function(e,t){var n=c.keys[t];return void 0===n&&(c.keys[t]=c.id,n=c.keys[t],c.id+=1),{name:t,key:n,isListField:!0}})),d,t)})))},yo.useForm=go;var wo=function(e,t,n){Mn(e,"[antd: ".concat(t,"] ").concat(n))},ko={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},xo={lang:Object(A.default)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),timePickerLocale:Object(A.default)({},ko)},Eo="${label} is not a valid ${type}",Co={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:xo,TimePicker:ko,Calendar:xo,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Eo,method:Eo,array:Eo,object:Eo,number:Eo,date:Eo,boolean:Eo,integer:Eo,float:Eo,regexp:Eo,email:Eo,url:Eo,hex:Eo},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}},Oo=Object(i.createContext)(void 0),_o=function(e){Object(I.a)(n,e);var t=Object(F.a)(n);function n(){return Object(P.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"getLocale",value:function(){var e=this.props,t=e.componentName,n=e.defaultLocale||Co[t||"global"],r=this.context,o=t&&r?r[t]:{};return Object(A.default)(Object(A.default)({},"function"==typeof n?n():n),o||{})}},{key:"getLocaleCode",value:function(){var e=this.context,t=e&&e.locale;return e&&e.exist&&!t?Co.locale:t}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),n}(i.Component);_o.defaultProps={componentName:"global"},_o.contextType=Oo;var So=i.createElement((function(){var e=(0,i.useContext(To).getPrefixCls)("empty-img-default");return i.createElement("svg",{className:e,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(24 31.67)"},i.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),i.createElement("path",{className:"".concat(e,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),i.createElement("path",{className:"".concat(e,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),i.createElement("path",{className:"".concat(e,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),i.createElement("path",{className:"".concat(e,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),i.createElement("path",{className:"".concat(e,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),i.createElement("g",{className:"".concat(e,"-g"),transform:"translate(149.65 15.383)"},i.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),i.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))}),null),Ro=i.createElement((function(){var e=(0,i.useContext(To).getPrefixCls)("empty-img-simple");return i.createElement("svg",{className:e,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},i.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),i.createElement("g",{className:"".concat(e,"-g"),fillRule:"nonzero"},i.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),i.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(e,"-path")}))))}),null),jo=function(e){var t=e.className,n=e.prefixCls,r=e.image,o=void 0===r?So:r,a=e.description,l=e.children,c=e.imageStyle,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","prefixCls","image","description","children","imageStyle"]),u=i.useContext(To),d=u.getPrefixCls,f=u.direction;return i.createElement(_o,{componentName:"Empty"},(function(e){var r,u,p=d("empty",n),h=void 0!==a?a:e.description,m="string"==typeof h?h:"empty";return u="string"==typeof o?i.createElement("img",{alt:m,src:o}):o,i.createElement("div",Object(A.default)({className:S()(p,(r={},Object(R.a)(r,"".concat(p,"-normal"),o===Ro),Object(R.a)(r,"".concat(p,"-rtl"),"rtl"===f),r),t)},s),i.createElement("div",{className:"".concat(p,"-image"),style:c},u),h&&i.createElement("div",{className:"".concat(p,"-description")},h),l&&i.createElement("div",{className:"".concat(p,"-footer")},l))}))};jo.PRESENTED_IMAGE_DEFAULT=So,jo.PRESENTED_IMAGE_SIMPLE=Ro;var Ao=jo,To=i.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")},renderEmpty:function(e){return i.createElement(Lo,null,(function(t){var n=(0,t.getPrefixCls)("empty");switch(e){case"Table":case"List":return i.createElement(Ao,{image:Ao.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return i.createElement(Ao,{image:Ao.PRESENTED_IMAGE_SIMPLE,className:"".concat(n,"-small")});default:return i.createElement(Ao,null)}}))}}),Lo=To.Consumer,Do=i.createContext(void 0);function Po(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}function Mo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var No,Io,Fo,Bo=(No=Po(),Io="undefined"!=typeof window?window:{},Fo={animationend:Mo("Animation","AnimationEnd"),transitionend:Mo("Transition","TransitionEnd")},No&&("AnimationEvent"in Io||delete Fo.animationend.animation,"TransitionEvent"in Io||delete Fo.transitionend.transition),Fo),Vo={};if(Po()){var Ho=document.createElement("div");Vo=Ho.style}var zo={};function qo(e){if(zo[e])return zo[e];var t=Bo[e];if(t)for(var n=Object.keys(t),r=n.length,o=0;o<r;o+=1){var a=n[o];if(Object.prototype.hasOwnProperty.call(t,a)&&a in Vo)return zo[e]=t[a],zo[e]}return""}var Uo=qo("animationend"),Go=qo("transitionend"),Wo=!(!Uo||!Go),Yo=Uo||"animationend",$o=Go||"transitionend";function Ko(e,t){return e?"object"===Object(T.a)(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}function Xo(e){var t=i.useRef(!1),n=i.useState(e),r=Object(j.a)(n,2),o=r[0],a=r[1];return i.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[o,function(e,n){n&&t.current||a(e)}]}var Zo=function(e){return+setTimeout(e,16)},Qo=function(e){return clearTimeout(e)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(Zo=function(e){return window.requestAnimationFrame(e)},Qo=function(e){return window.cancelAnimationFrame(e)});var Jo=0,ea=new Map;function ta(e){ea.delete(e)}var na=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Jo+=1;function r(t){if(0===t)ta(n),e();else{var o=Zo((function(){r(t-1)}));ea.set(n,o)}}return r(t),n};na.cancel=function(e){var t=ea.get(e);return ta(t),Qo(t)};var ra=Po()?i.useLayoutEffect:i.useEffect,oa=["prepare","start","active","end"];function aa(e){return"active"===e||"end"===e}function ia(e,t,n,r){var o=r.motionEnter,a=void 0===o||o,l=r.motionAppear,c=void 0===l||l,s=r.motionLeave,u=void 0===s||s,d=r.motionDeadline,f=r.motionLeaveImmediately,p=r.onAppearPrepare,h=r.onEnterPrepare,m=r.onLeavePrepare,v=r.onAppearStart,g=r.onEnterStart,b=r.onLeaveStart,y=r.onAppearActive,w=r.onEnterActive,k=r.onLeaveActive,x=r.onAppearEnd,E=r.onEnterEnd,C=r.onLeaveEnd,O=r.onVisibleChanged,_=Xo(),S=Object(j.a)(_,2),A=S[0],T=S[1],D=Xo("none"),P=Object(j.a)(D,2),M=P[0],N=P[1],I=Xo(null),F=Object(j.a)(I,2),B=F[0],V=F[1],H=Object(i.useRef)(!1),z=Object(i.useRef)(null);function q(){return n()}var U=Object(i.useRef)(!1);function G(e){var t=q();if(!e||e.deadline||e.target===t){var n,r=U.current;"appear"===M&&r?n=null==x?void 0:x(t,e):"enter"===M&&r?n=null==E?void 0:E(t,e):"leave"===M&&r&&(n=null==C?void 0:C(t,e)),"none"!==M&&r&&!1!==n&&(N("none",!0),V(null,!0))}}var W=function(e){var t=Object(i.useRef)(),n=Object(i.useRef)(e);n.current=e;var r=i.useCallback((function(e){n.current(e)}),[]);function o(e){e&&(e.removeEventListener($o,r),e.removeEventListener(Yo,r))}return i.useEffect((function(){return function(){o(t.current)}}),[]),[function(e){t.current&&t.current!==e&&o(t.current),e&&e!==t.current&&(e.addEventListener($o,r),e.addEventListener(Yo,r),t.current=e)},o]}(G),Y=Object(j.a)(W,1)[0],$=i.useMemo((function(){var e,t,n;switch(M){case"appear":return Object(R.a)(e={},"prepare",p),Object(R.a)(e,"start",v),Object(R.a)(e,"active",y),e;case"enter":return Object(R.a)(t={},"prepare",h),Object(R.a)(t,"start",g),Object(R.a)(t,"active",w),t;case"leave":return Object(R.a)(n={},"prepare",m),Object(R.a)(n,"start",b),Object(R.a)(n,"active",k),n;default:return{}}}),[M]),K=function(e,t){var n=Xo("none"),r=Object(j.a)(n,2),o=r[0],a=r[1],l=function(){var e=i.useRef(null);function t(){na.cancel(e.current)}return i.useEffect((function(){return function(){t()}}),[]),[function n(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var a=na((function(){o<=1?r({isCanceled:function(){return a!==e.current}}):n(r,o-1)}));e.current=a},t]}(),c=Object(j.a)(l,2),s=c[0],u=c[1];return ra((function(){if("none"!==o&&"end"!==o){var e=oa.indexOf(o),n=oa[e+1],r=t(o);!1===r?a(n,!0):s((function(e){function t(){e.isCanceled()||a(n,!0)}!0===r?t():Promise.resolve(r).then(t)}))}}),[e,o]),i.useEffect((function(){return function(){u()}}),[]),[function(){a("prepare",!0)},o]}(M,(function(e){if("prepare"===e){var t=$.prepare;return!!t&&t(q())}var n;return Q in $&&V((null===(n=$[Q])||void 0===n?void 0:n.call($,q(),null))||null),"active"===Q&&(Y(q()),d>0&&(clearTimeout(z.current),z.current=setTimeout((function(){G({deadline:!0})}),d))),!0})),X=Object(j.a)(K,2),Z=X[0],Q=X[1],J=aa(Q);U.current=J,ra((function(){T(t);var n,r=H.current;H.current=!0,e&&(!r&&t&&c&&(n="appear"),r&&t&&a&&(n="enter"),(r&&!t&&u||!r&&f&&!t&&u)&&(n="leave"),n&&(N(n),Z()))}),[t]),Object(i.useEffect)((function(){("appear"===M&&!c||"enter"===M&&!a||"leave"===M&&!u)&&N("none")}),[c,a,u]),Object(i.useEffect)((function(){return function(){H.current=!1,clearTimeout(z.current)}}),[]);var ee=i.useRef(!1);Object(i.useEffect)((function(){A&&(ee.current=!0),void 0!==A&&"none"===M&&((ee.current||A)&&(null==O||O(A)),ee.current=!0)}),[A,M]);var te=B;return $.prepare&&"start"===Q&&(te=Object(L.a)({transition:"none"},te)),[M,Q,te,null!=A?A:t]}var la=function(e){Object(I.a)(n,e);var t=Object(F.a)(n);function n(){return Object(P.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){return this.props.children}}]),n}(i.Component),ca=function(e){var t=e;function n(e){return!(!e.motionName||!t)}"object"===Object(T.a)(e)&&(t=e.transitionSupport);var r=i.forwardRef((function(e,t){var r=e.visible,o=void 0===r||r,a=e.removeOnLeave,l=void 0===a||a,c=e.forceRender,s=e.children,u=e.motionName,d=e.leavedClassName,f=e.eventProps,p=n(e),h=Object(i.useRef)(),m=Object(i.useRef)(),v=ia(p,o,(function(){try{return h.current instanceof HTMLElement?h.current:Bn(m.current)}catch(e){return null}}),e),g=Object(j.a)(v,4),b=g[0],y=g[1],w=g[2],k=g[3],x=i.useRef(k);k&&(x.current=!0);var E,C=i.useCallback((function(e){h.current=e,Nn(t,e)}),[t]),O=Object(L.a)(Object(L.a)({},f),{},{visible:o});if(s)if("none"!==b&&n(e)){var _,A;"prepare"===y?A="prepare":aa(y)?A="active":"start"===y&&(A="start"),E=s(Object(L.a)(Object(L.a)({},O),{},{className:S()(Ko(u,b),(_={},Object(R.a)(_,Ko(u,"".concat(b,"-").concat(A)),A),Object(R.a)(_,u,"string"==typeof u),_)),style:w}),C)}else E=k?s(Object(L.a)({},O),C):!l&&x.current&&d?s(Object(L.a)(Object(L.a)({},O),{},{className:d}),C):c||!l&&!d?s(Object(L.a)(Object(L.a)({},O),{},{style:{display:"none"}}),C):null;else E=null;return i.isValidElement(E)&&Fn(E)&&(E.ref||(E=i.cloneElement(E,{ref:C}))),i.createElement(la,{ref:m},E)}));return r.displayName="CSSMotion",r}(Wo);function sa(e){var t;return t=e&&"object"===Object(T.a)(e)&&"key"in e?e:{key:e},Object(L.a)(Object(L.a)({},t),{},{key:String(t.key)})}function ua(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(sa)}function da(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,o=t.length,a=ua(e),i=ua(t);a.forEach((function(e){for(var t=!1,a=r;a<o;a+=1){var l=i[a];if(l.key===e.key){r<a&&(n=n.concat(i.slice(r,a).map((function(e){return Object(L.a)(Object(L.a)({},e),{},{status:"add"})}))),r=a),n.push(Object(L.a)(Object(L.a)({},l),{},{status:"keep"})),r+=1,t=!0;break}}t||n.push(Object(L.a)(Object(L.a)({},e),{},{status:"remove"}))})),r<o&&(n=n.concat(i.slice(r).map((function(e){return Object(L.a)(Object(L.a)({},e),{},{status:"add"})}))));var l={};n.forEach((function(e){var t=e.key;l[t]=(l[t]||0)+1}));var c=Object.keys(l).filter((function(e){return l[e]>1}));return c.forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||"remove"!==r}))).forEach((function(t){t.key===e&&(t.status="keep")}))})),n}var fa=["component","children","onVisibleChanged","onAllRemoved"],pa=["status"],ha=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function ma(e,t,n,r){var o=V.a.unstable_batchedUpdates?function(e){V.a.unstable_batchedUpdates(n,e)}:n;return e.addEventListener&&e.addEventListener(t,o,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,o,r)}}}!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ca,n=function(e){Object(I.a)(r,e);var n=Object(F.a)(r);function r(){var e;Object(P.a)(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o)),Object(R.a)(Object(N.a)(e),"state",{keyEntities:[]}),Object(R.a)(Object(N.a)(e),"removeKey",(function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:Object(L.a)(Object(L.a)({},e),{},{status:"removed"})}));return e.setState({keyEntities:n}),n.filter((function(e){return"removed"!==e.status})).length})),e}return Object(M.a)(r,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,o=r.component,a=r.children,l=r.onVisibleChanged,c=r.onAllRemoved,s=Object(D.a)(r,fa),u=o||i.Fragment,d={};return ha.forEach((function(e){d[e]=s[e],delete s[e]})),delete s.keys,i.createElement(u,s,n.map((function(n){var r=n.status,o=Object(D.a)(n,pa),s="add"===r||"keep"===r;return i.createElement(t,Object(A.default)({},d,{key:o.key,visible:s,eventProps:o,onVisibleChanged:function(t){null==l||l(t,{key:o.key}),t||0===e.removeKey(o.key)&&c&&c()}}),a)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,o=ua(n);return{keyEntities:da(r,o).filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||"removed"!==t.status||"remove"!==e.status}))}}}]),r}(i.Component);Object(R.a)(n,"defaultProps",{component:"div"})}(Wo);var va=Po()?i.useLayoutEffect:i.useEffect,ga=function(e,t){var n=i.useRef(!0);va((function(){if(!n.current)return e()}),t),va((function(){return n.current=!1,function(){n.current=!0}}),[])};function ba(e){var t=i.useRef();return t.current=e,i.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[])}function ya(e){return void 0!==e}function wa(e,t){var n=t||{},r=n.defaultValue,o=n.value,a=n.onChange,i=n.postState,l=Xo((function(){return ya(o)?o:ya(r)?"function"==typeof r?r():r:"function"==typeof e?e():e})),c=Object(j.a)(l,2),s=c[0],u=c[1],d=void 0!==o?o:s,f=i?i(d):d,p=ba(a),h=Xo([d]),m=Object(j.a)(h,2),v=m[0],g=m[1];return ga((function(){var e=v[0];s!==e&&p(s,e)}),[v]),ga((function(){ya(o)||u(o)}),[o]),[f,ba((function(e,t){u(e,t),g([d],t)}))]}function ka(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}var xa,Ea=Object(i.forwardRef)((function(e,t){var n=e.didUpdate,r=e.getContainer,o=e.children,a=Object(i.useRef)(),l=Object(i.useRef)();Object(i.useImperativeHandle)(t,(function(){return{}}));var c=Object(i.useRef)(!1);return!c.current&&Po()&&(l.current=r(),a.current=l.current.parentNode,c.current=!0),Object(i.useEffect)((function(){null==n||n(e)})),Object(i.useEffect)((function(){return null===l.current.parentNode&&null!==a.current&&a.current.appendChild(l.current),function(){var e,t;null===(e=l.current)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(l.current)}}),[]),l.current?V.a.createPortal(o,l.current):null}));function Ca(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Oa(e){var t=e.prefixCls,n=e.motion,r=e.animation,o=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:o?{motionName:o}:null)}function _a(e){var t=e.prefixCls,n=e.visible,r=e.zIndex,o=e.mask,a=e.maskMotion,l=e.maskAnimation,c=e.maskTransitionName;if(!o)return null;var s={};return(a||c||l)&&(s=Object(L.a)({motionAppear:!0},Oa({motion:a,prefixCls:t,transitionName:c,animation:l}))),i.createElement(ca,Object(A.default)({},s,{visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return i.createElement("div",{style:{zIndex:r},className:S()("".concat(t,"-mask"),n)})}))}function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach((function(t){Aa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ja(e){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ta={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function La(){if(void 0!==xa)return xa;xa="";var e=document.createElement("p").style;for(var t in Ta)t+"Transform"in e&&(xa=t);return xa}function Da(){return La()?"".concat(La(),"TransitionProperty"):"transitionProperty"}function Pa(){return La()?"".concat(La(),"Transform"):"transform"}function Ma(e,t){var n=Da();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function Na(e,t){var n=Pa();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var Ia,Fa=/matrix\((.*)\)/,Ba=/matrix3d\((.*)\)/;function Va(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function Ha(e,t,n){var r=n;if("object"!==ja(t))return void 0!==r?("number"==typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):Ia(e,t);for(var o in t)t.hasOwnProperty(o)&&Ha(e,o,t[o])}function za(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var o=e.document;"number"!=typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}function qa(e){return za(e)}function Ua(e){return za(e,!0)}function Ga(e){var t=function(e){var t,n,r,o=e.ownerDocument,a=o.body,i=o&&o.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),{left:n-=i.clientLeft||a.clientLeft||0,top:r-=i.clientTop||a.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=qa(r),t.top+=Ua(r),t}function Wa(e){return null!=e&&e==e.window}function Ya(e){return Wa(e)?e.document:9===e.nodeType?e:e.ownerDocument}var $a=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),Ka=/^(top|right|bottom|left)$/;function Xa(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function Za(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function Qa(e,t,n){"static"===Ha(e,"position")&&(e.style.position="relative");var r=-999,o=-999,a=Xa("left",n),i=Xa("top",n),l=Za(a),c=Za(i);"left"!==a&&(r=999),"top"!==i&&(o=999);var s,u="",d=Ga(e);("left"in t||"top"in t)&&(u=(s=e).style.transitionProperty||s.style[Da()]||"",Ma(e,"none")),"left"in t&&(e.style[l]="",e.style[a]="".concat(r,"px")),"top"in t&&(e.style[c]="",e.style[i]="".concat(o,"px")),Va(e);var f=Ga(e),p={};for(var h in t)if(t.hasOwnProperty(h)){var m=Xa(h,n),v="left"===h?r:o,g=d[h]-f[h];p[m]=m===h?v+g:v-g}Ha(e,p),Va(e),("left"in t||"top"in t)&&Ma(e,u);var b={};for(var y in t)if(t.hasOwnProperty(y)){var w=Xa(y,n),k=t[y]-d[y];b[w]=y===w?p[w]+k:p[w]-k}Ha(e,b)}function Ja(e,t){for(var n=0;n<e.length;n++)t(e[n])}function ei(e){return"border-box"===Ia(e,"boxSizing")}"undefined"!=typeof window&&(Ia=window.getComputedStyle?function(e,t,n){var r=n,o="",a=Ya(e);return(r=r||a.defaultView.getComputedStyle(e,null))&&(o=r.getPropertyValue(t)||r[t]),o}:function(e,t){var n=e.currentStyle&&e.currentStyle[t];if($a.test(n)&&!Ka.test(t)){var r=e.style,o=r.left,a=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,r.left="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r.left=o,e.runtimeStyle.left=a}return""===n?"auto":n});var ti=["margin","border","padding"];function ni(e,t,n){var r,o={},a=e.style;for(r in t)t.hasOwnProperty(r)&&(o[r]=a[r],a[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(a[r]=o[r])}function ri(e,t,n){var r,o,a,i=0;for(o=0;o<t.length;o++)if(r=t[o])for(a=0;a<n.length;a++){var l;l="border"===r?"".concat(r).concat(n[a],"Width"):r+n[a],i+=parseFloat(Ia(e,l))||0}return i}var oi={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function ai(e,t,n){var r=n;if(Wa(e))return"width"===t?oi.viewportWidth(e):oi.viewportHeight(e);if(9===e.nodeType)return"width"===t?oi.docWidth(e):oi.docHeight(e);var o="width"===t?["Left","Right"]:["Top","Bottom"],a="width"===t?Math.floor(e.getBoundingClientRect().width):Math.floor(e.getBoundingClientRect().height),i=ei(e),l=0;(null==a||a<=0)&&(a=void 0,(null==(l=Ia(e,t))||Number(l)<0)&&(l=e.style[t]||0),l=Math.floor(parseFloat(l))||0),void 0===r&&(r=i?1:-1);var c=void 0!==a||i,s=a||l;return-1===r?c?s-ri(e,["border","padding"],o):l:c?1===r?s:s+(2===r?-ri(e,["border"],o):ri(e,["margin"],o)):l+ri(e,ti.slice(r),o)}Ja(["Width","Height"],(function(e){oi["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],oi["viewport".concat(e)](n))},oi["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,o=r.body,a=r.documentElement[n];return"CSS1Compat"===r.compatMode&&a||o&&o[n]||a}}));var ii={position:"absolute",visibility:"hidden",display:"block"};function li(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=t[0];return 0!==o.offsetWidth?r=ai.apply(void 0,t):ni(o,ii,(function(){r=ai.apply(void 0,t)})),r}function ci(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}Ja(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);oi["outer".concat(t)]=function(t,n){return t&&li(t,e,n?0:1)};var n="width"===e?["Left","Right"]:["Top","Bottom"];oi[e]=function(t,r){var o=r;return void 0!==o?t?(ei(t)&&(o+=ri(t,["padding","border"],n)),Ha(t,e,o)):void 0:t&&li(t,e,-1)}}));var si={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:Ya,offset:function(e,t,n){if(void 0===t)return Ga(e);!function(e,t,n){if(n.ignoreShake){var r=Ga(e),o=r.left.toFixed(0),a=r.top.toFixed(0),i=t.left.toFixed(0),l=t.top.toFixed(0);if(o===i&&a===l)return}n.useCssRight||n.useCssBottom?Qa(e,t,n):n.useCssTransform&&Pa()in document.body.style?function(e,t){var n=Ga(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(Pa());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),o={x:r.x,y:r.y};"left"in t&&(o.x=r.x+t.left-n.left),"top"in t&&(o.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(Pa());if(r&&"none"!==r){var o,a=r.match(Fa);a?((o=(a=a[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,o[5]=t.y,Na(e,"matrix(".concat(o.join(","),")"))):((o=r.match(Ba)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,o[13]=t.y,Na(e,"matrix3d(".concat(o.join(","),")")))}else Na(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,o)}(e,t):Qa(e,t,n)}(e,t,n||{})},isWindow:Wa,each:Ja,css:Ha,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:ci,getWindowScrollLeft:function(e){return qa(e)},getWindowScrollTop:function(e){return Ua(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)si.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};ci(si,oi);var ui=si.getParent;function di(e){if(si.isWindow(e)||9===e.nodeType)return null;var t,n=si.getDocument(e).body,r=si.css(e,"position");if("fixed"!==r&&"absolute"!==r)return"html"===e.nodeName.toLowerCase()?null:ui(e);for(t=ui(e);t&&t!==n&&9!==t.nodeType;t=ui(t))if("static"!==(r=si.css(t,"position")))return t;return null}var fi=si.getParent;function pi(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=di(e),o=si.getDocument(e),a=o.defaultView||o.parentWindow,i=o.body,l=o.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===i||r===l||"visible"===si.css(r,"overflow")){if(r===i||r===l)break}else{var c=si.offset(r);c.left+=r.clientLeft,c.top+=r.clientTop,n.top=Math.max(n.top,c.top),n.right=Math.min(n.right,c.left+r.clientWidth),n.bottom=Math.min(n.bottom,c.top+r.clientHeight),n.left=Math.max(n.left,c.left)}r=di(r)}var s=null;si.isWindow(e)||9===e.nodeType||(s=e.style.position,"absolute"===si.css(e,"position")&&(e.style.position="fixed"));var u=si.getWindowScrollLeft(a),d=si.getWindowScrollTop(a),f=si.viewportWidth(a),p=si.viewportHeight(a),h=l.scrollWidth,m=l.scrollHeight,v=window.getComputedStyle(i);if("hidden"===v.overflowX&&(h=a.innerWidth),"hidden"===v.overflowY&&(m=a.innerHeight),e.style&&(e.style.position=s),t||function(e){if(si.isWindow(e)||9===e.nodeType)return!1;var t=si.getDocument(e),n=t.body,r=null;for(r=fi(e);r&&r!==n&&r!==t;r=fi(r))if("fixed"===si.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,u),n.top=Math.max(n.top,d),n.right=Math.min(n.right,u+f),n.bottom=Math.min(n.bottom,d+p);else{var g=Math.max(h,u+f);n.right=Math.min(n.right,g);var b=Math.max(m,d+p);n.bottom=Math.min(n.bottom,b)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function hi(e){var t,n,r;if(si.isWindow(e)||9===e.nodeType){var o=si.getWindow(e);t={left:si.getWindowScrollLeft(o),top:si.getWindowScrollTop(o)},n=si.viewportWidth(o),r=si.viewportHeight(o)}else t=si.offset(e),n=si.outerWidth(e),r=si.outerHeight(e);return t.width=n,t.height=r,t}function mi(e,t){var n=t.charAt(0),r=t.charAt(1),o=e.width,a=e.height,i=e.left,l=e.top;return"c"===n?l+=a/2:"b"===n&&(l+=a),"c"===r?i+=o/2:"r"===r&&(i+=o),{left:i,top:l}}function vi(e,t,n,r,o){var a=mi(t,n[1]),i=mi(e,n[0]),l=[i.left-a.left,i.top-a.top];return{left:Math.round(e.left-l[0]+r[0]-o[0]),top:Math.round(e.top-l[1]+r[1]-o[1])}}function gi(e,t,n){return e.left<n.left||e.left+t.width>n.right}function bi(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function yi(e,t,n){var r=[];return si.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function wi(e,t){return e[t]=-e[t],e}function ki(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function xi(e,t){e[0]=ki(e[0],t.width),e[1]=ki(e[1],t.height)}function Ei(e,t,n,r){var o=n.points,a=n.offset||[0,0],i=n.targetOffset||[0,0],l=n.overflow,c=n.source||e;a=[].concat(a),i=[].concat(i);var s={},u=0,d=pi(c,!(!(l=l||{})||!l.alwaysByViewport)),f=hi(c);xi(a,f),xi(i,t);var p=vi(f,t,o,a,i),h=si.merge(f,p);if(d&&(l.adjustX||l.adjustY)&&r){if(l.adjustX&&gi(p,f,d)){var m=yi(o,/[lr]/gi,{l:"r",r:"l"}),v=wi(a,0),g=wi(i,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(vi(f,t,m,v,g),f,d)||(u=1,o=m,a=v,i=g)}if(l.adjustY&&bi(p,f,d)){var b=yi(o,/[tb]/gi,{t:"b",b:"t"}),y=wi(a,1),w=wi(i,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(vi(f,t,b,y,w),f,d)||(u=1,o=b,a=y,i=w)}u&&(p=vi(f,t,o,a,i),si.mix(h,p));var k=gi(p,f,d),x=bi(p,f,d);if(k||x){var E=o;k&&(E=yi(o,/[lr]/gi,{l:"r",r:"l"})),x&&(E=yi(o,/[tb]/gi,{t:"b",b:"t"})),o=E,a=n.offset||[0,0],i=n.targetOffset||[0,0]}s.adjustX=l.adjustX&&k,s.adjustY=l.adjustY&&x,(s.adjustX||s.adjustY)&&(h=function(e,t,n,r){var o=si.clone(e),a={width:t.width,height:t.height};return r.adjustX&&o.left<n.left&&(o.left=n.left),r.resizeWidth&&o.left>=n.left&&o.left+a.width>n.right&&(a.width-=o.left+a.width-n.right),r.adjustX&&o.left+a.width>n.right&&(o.left=Math.max(n.right-a.width,n.left)),r.adjustY&&o.top<n.top&&(o.top=n.top),r.resizeHeight&&o.top>=n.top&&o.top+a.height>n.bottom&&(a.height-=o.top+a.height-n.bottom),r.adjustY&&o.top+a.height>n.bottom&&(o.top=Math.max(n.bottom-a.height,n.top)),si.mix(o,a)}(p,f,d,s))}return h.width!==f.width&&si.css(c,"width",si.width(c)+h.width-f.width),h.height!==f.height&&si.css(c,"height",si.height(c)+h.height-f.height),si.offset(c,{left:h.left,top:h.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:o,offset:a,targetOffset:i,overflow:s}}function Ci(e,t,n){var r=n.target||t;return Ei(e,hi(r),n,!function(e,t){var n=pi(e,t),r=hi(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport))}function Oi(e,t){var n=null,r=null,o=new ir((function(e){var o=Object(j.a)(e,1)[0].target;if(document.documentElement.contains(o)){var a=o.getBoundingClientRect(),i=a.width,l=a.height,c=Math.floor(i),s=Math.floor(l);n===c&&r===s||Promise.resolve().then((function(){t({width:c,height:s})})),n=c,r=s}}));return e&&o.observe(e),function(){o.disconnect()}}function _i(e){return"function"!=typeof e?null:e()}function Si(e){return"object"===Object(T.a)(e)&&e?e:null}Ci.__getOffsetParent=di,Ci.__getVisibleRectForElement=pi;var Ri=l.a.forwardRef((function(e,t){var n=e.children,r=e.disabled,o=e.target,a=e.align,i=e.onAlign,c=e.monitorWindowResize,s=e.monitorBufferTime,u=void 0===s?0:s,d=l.a.useRef({}),f=l.a.useRef(),p=l.a.Children.only(n),h=l.a.useRef({});h.current.disabled=r,h.current.target=o,h.current.align=a,h.current.onAlign=i;var m=function(e,t){var n=l.a.useRef(!1),r=l.a.useRef(null);function o(){window.clearTimeout(r.current)}return[function e(a){if(o(),n.current&&!0!==a)r.current=window.setTimeout((function(){n.current=!1,e()}),t);else{if(!1===function(){var e=h.current,t=e.disabled,n=e.target,r=e.align,o=e.onAlign,a=f.current;if(!t&&n&&a){var i,l=_i(n),c=Si(n);d.current.element=l,d.current.point=c,d.current.align=r;var s=document.activeElement;return l&&function(e){if(!e)return!1;if(e instanceof HTMLElement&&e.offsetParent)return!0;if(e instanceof SVGGraphicsElement&&e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e instanceof HTMLElement&&e.getBoundingClientRect){var o=e.getBoundingClientRect(),a=o.width,i=o.height;if(a||i)return!0}return!1}(l)?i=Ci(a,l,r):c&&(i=function(e,t,n){var r,o,a=si.getDocument(e),i=a.defaultView||a.parentWindow,l=si.getWindowScrollLeft(i),c=si.getWindowScrollTop(i),s=si.viewportWidth(i),u=si.viewportHeight(i),d={left:r="pageX"in t?t.pageX:l+t.clientX,top:o="pageY"in t?t.pageY:c+t.clientY,width:0,height:0},f=r>=0&&r<=l+s&&o>=0&&o<=c+u,p=[n.points[0],"cc"];return Ei(e,d,Ra(Ra({},n),{},{points:p}),f)}(a,c,r)),function(e,t){e!==document.activeElement&&ka(t,e)&&"function"==typeof e.focus&&e.focus()}(s,a),o&&i&&o(a,i),!0}return!1}())return;n.current=!0,r.current=window.setTimeout((function(){n.current=!1}),t)}},function(){n.current=!1,o()}]}(0,u),v=Object(j.a)(m,2),g=v[0],b=v[1],y=l.a.useState(),w=Object(j.a)(y,2),k=w[0],x=w[1],E=l.a.useState(),C=Object(j.a)(E,2),O=C[0],_=C[1];return va((function(){x(_i(o)),_(Si(o))})),l.a.useEffect((function(){var e,t;d.current.element===k&&((e=d.current.point)===(t=O)||e&&t&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY))&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;function o(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=r.has(e);if(Mn(!i,"Warning: There may be circular references"),i)return!1;if(e===t)return!0;if(n&&a>1)return!1;r.add(e);var l=a+1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var c=0;c<e.length;c++)if(!o(e[c],t[c],l))return!1;return!0}if(e&&t&&"object"===Object(T.a)(e)&&"object"===Object(T.a)(t)){var s=Object.keys(e);return s.length===Object.keys(t).length&&s.every((function(n){return o(e[n],t[n],l)}))}return!1}return o(e,t)}(d.current.align,a)||g()})),l.a.useEffect((function(){return Oi(f.current,g)}),[f.current]),l.a.useEffect((function(){return Oi(k,g)}),[k]),l.a.useEffect((function(){r?b():g()}),[r]),l.a.useEffect((function(){if(c)return ma(window,"resize",g).remove}),[c]),l.a.useEffect((function(){return function(){b()}}),[]),l.a.useImperativeHandle(t,(function(){return{forceAlign:function(){return g(!0)}}})),l.a.isValidElement(p)&&(p=l.a.cloneElement(p,{ref:In(p.ref,f)})),p}));Ri.displayName="Align";var ji=["measure","alignPre","align",null,"motion"],Ai=i.forwardRef((function(e,t){var n=e.visible,r=e.prefixCls,o=e.className,a=e.style,l=e.children,c=e.zIndex,s=e.stretch,u=e.destroyPopupOnHide,d=e.forceRender,f=e.align,p=e.point,h=e.getRootDomNode,m=e.getClassNameFromAlign,v=e.onAlign,g=e.onMouseEnter,b=e.onMouseLeave,y=e.onMouseDown,w=e.onTouchStart,k=e.onClick,x=Object(i.useRef)(),E=Object(i.useRef)(),C=Object(i.useState)(),O=Object(j.a)(C,2),_=O[0],R=O[1],T=function(e){var t=i.useState({width:0,height:0}),n=Object(j.a)(t,2),r=n[0],o=n[1];return[i.useMemo((function(){var t={};if(e){var n=r.width,o=r.height;-1!==e.indexOf("height")&&o?t.height=o:-1!==e.indexOf("minHeight")&&o&&(t.minHeight=o),-1!==e.indexOf("width")&&n?t.width=n:-1!==e.indexOf("minWidth")&&n&&(t.minWidth=n)}return t}),[e,r]),function(e){var t=e.offsetWidth,n=e.offsetHeight,r=e.getBoundingClientRect(),a=r.width,i=r.height;Math.abs(t-a)<1&&Math.abs(n-i)<1&&(t=a,n=i),o({width:t,height:n})}]}(s),D=Object(j.a)(T,2),P=D[0],M=D[1],N=function(e,t){var n=Xo(null),r=Object(j.a)(n,2),o=r[0],a=r[1],l=Object(i.useRef)();function c(e){a(e,!0)}function u(){na.cancel(l.current)}return Object(i.useEffect)((function(){c("measure")}),[e]),Object(i.useEffect)((function(){if("measure"===o)s&&M(h());o&&(l.current=na(Object(U.a)(Object(q.a)().mark((function e(){var t,n;return Object(q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ji.indexOf(o),(n=ji[t+1])&&-1!==t&&c(n);case 3:case"end":return e.stop()}}),e)})))))}),[o]),Object(i.useEffect)((function(){return function(){u()}}),[]),[o,function(e){u(),l.current=na((function(){c((function(e){switch(o){case"align":return"motion";case"motion":return"stable"}return e})),null==e||e()}))}]}(n),I=Object(j.a)(N,2),F=I[0],B=I[1],V=Object(i.useState)(0),H=Object(j.a)(V,2),z=H[0],G=H[1],W=Object(i.useRef)();function Y(){var e;null===(e=x.current)||void 0===e||e.forceAlign()}function $(e,t){var n=m(t);_!==n&&R(n),G((function(e){return e+1})),"align"===F&&(null==v||v(e,t))}va((function(){"alignPre"===F&&G(0)}),[F]),va((function(){"align"===F&&(z<3?Y():B((function(){var e;null===(e=W.current)||void 0===e||e.call(W)})))}),[z]);var K=Object(L.a)({},Oa(e));function X(){return new Promise((function(e){W.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=K[e];K[e]=function(e,n){return B(),null==t?void 0:t(e,n)}})),i.useEffect((function(){K.motionName||"motion"!==F||B()}),[K.motionName,F]),i.useImperativeHandle(t,(function(){return{forceAlign:Y,getElement:function(){return E.current}}}));var Z=Object(L.a)(Object(L.a)({},P),{},{zIndex:c,opacity:"motion"!==F&&"stable"!==F&&n?0:void 0,pointerEvents:n||"stable"===F?void 0:"none"},a),Q=!0;null==f||!f.points||"align"!==F&&"stable"!==F||(Q=!1);var J=l;return i.Children.count(l)>1&&(J=i.createElement("div",{className:"".concat(r,"-content")},l)),i.createElement(ca,Object(A.default)({visible:n,ref:E,leavedClassName:"".concat(r,"-hidden")},K,{onAppearPrepare:X,onEnterPrepare:X,removeOnLeave:u,forceRender:d}),(function(e,t){var n=e.className,a=e.style,l=S()(r,o,_,n);return i.createElement(Ri,{target:p||h,key:"popup",ref:x,monitorWindowResize:!0,disabled:Q,align:f,onAlign:$},i.createElement("div",{ref:t,className:l,onMouseEnter:g,onMouseLeave:b,onMouseDownCapture:y,onTouchStartCapture:w,onClick:k,style:Object(L.a)(Object(L.a)({},a),Z)},J))}))}));Ai.displayName="PopupInner";var Ti=i.forwardRef((function(e,t){var n=e.prefixCls,r=e.visible,o=e.zIndex,a=e.children,l=e.mobile,c=(l=void 0===l?{}:l).popupClassName,s=l.popupStyle,u=l.popupMotion,d=void 0===u?{}:u,f=l.popupRender,p=e.onClick,h=i.useRef();i.useImperativeHandle(t,(function(){return{forceAlign:function(){},getElement:function(){return h.current}}}));var m=Object(L.a)({zIndex:o},s),v=a;return i.Children.count(a)>1&&(v=i.createElement("div",{className:"".concat(n,"-content")},a)),f&&(v=f(v)),i.createElement(ca,Object(A.default)({visible:r,ref:h,removeOnLeave:!0},d),(function(e,t){var r=e.className,o=e.style,a=S()(n,c,r);return i.createElement("div",{ref:t,className:a,onClick:p,style:Object(L.a)(Object(L.a)({},o),m)},v)}))}));Ti.displayName="MobilePopupInner";var Li=["visible","mobile"],Di=i.forwardRef((function(e,t){var n=e.visible,r=e.mobile,o=Object(D.a)(e,Li),a=Object(i.useState)(n),l=Object(j.a)(a,2),c=l[0],s=l[1],u=Object(i.useState)(!1),d=Object(j.a)(u,2),f=d[0],p=d[1],h=Object(L.a)(Object(L.a)({},o),{},{visible:c});Object(i.useEffect)((function(){s(n),n&&r&&p(function(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==e?void 0:e.substr(0,4))}())}),[n,r]);var m=f?i.createElement(Ti,Object(A.default)({},h,{mobile:r,ref:t})):i.createElement(Ai,Object(A.default)({},h,{ref:t}));return i.createElement("div",null,i.createElement(_a,h),m)}));Di.displayName="Popup";var Pi=i.createContext(null);function Mi(){}function Ni(){return""}function Ii(e){return e?e.ownerDocument:window.document}var Fi,Bi,Vi=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"],Hi=(Fi=Ea,Bi=function(e){Object(I.a)(n,e);var t=Object(F.a)(n);function n(e){var r,o;return Object(P.a)(this,n),r=t.call(this,e),Object(R.a)(Object(N.a)(r),"popupRef",i.createRef()),Object(R.a)(Object(N.a)(r),"triggerRef",i.createRef()),Object(R.a)(Object(N.a)(r),"portalContainer",void 0),Object(R.a)(Object(N.a)(r),"attachId",void 0),Object(R.a)(Object(N.a)(r),"clickOutsideHandler",void 0),Object(R.a)(Object(N.a)(r),"touchOutsideHandler",void 0),Object(R.a)(Object(N.a)(r),"contextMenuOutsideHandler1",void 0),Object(R.a)(Object(N.a)(r),"contextMenuOutsideHandler2",void 0),Object(R.a)(Object(N.a)(r),"mouseDownTimeout",void 0),Object(R.a)(Object(N.a)(r),"focusTime",void 0),Object(R.a)(Object(N.a)(r),"preClickTime",void 0),Object(R.a)(Object(N.a)(r),"preTouchTime",void 0),Object(R.a)(Object(N.a)(r),"delayTimer",void 0),Object(R.a)(Object(N.a)(r),"hasPopupMouseDown",void 0),Object(R.a)(Object(N.a)(r),"onMouseEnter",(function(e){var t=r.props.mouseEnterDelay;r.fireEvents("onMouseEnter",e),r.delaySetPopupVisible(!0,t,t?null:e)})),Object(R.a)(Object(N.a)(r),"onMouseMove",(function(e){r.fireEvents("onMouseMove",e),r.setPoint(e)})),Object(R.a)(Object(N.a)(r),"onMouseLeave",(function(e){r.fireEvents("onMouseLeave",e),r.delaySetPopupVisible(!1,r.props.mouseLeaveDelay)})),Object(R.a)(Object(N.a)(r),"onPopupMouseEnter",(function(){r.clearDelayTimer()})),Object(R.a)(Object(N.a)(r),"onPopupMouseLeave",(function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&ka(null===(t=r.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||r.delaySetPopupVisible(!1,r.props.mouseLeaveDelay)})),Object(R.a)(Object(N.a)(r),"onFocus",(function(e){r.fireEvents("onFocus",e),r.clearDelayTimer(),r.isFocusToShow()&&(r.focusTime=Date.now(),r.delaySetPopupVisible(!0,r.props.focusDelay))})),Object(R.a)(Object(N.a)(r),"onMouseDown",(function(e){r.fireEvents("onMouseDown",e),r.preClickTime=Date.now()})),Object(R.a)(Object(N.a)(r),"onTouchStart",(function(e){r.fireEvents("onTouchStart",e),r.preTouchTime=Date.now()})),Object(R.a)(Object(N.a)(r),"onBlur",(function(e){r.fireEvents("onBlur",e),r.clearDelayTimer(),r.isBlurToHide()&&r.delaySetPopupVisible(!1,r.props.blurDelay)})),Object(R.a)(Object(N.a)(r),"onContextMenu",(function(e){e.preventDefault(),r.fireEvents("onContextMenu",e),r.setPopupVisible(!0,e)})),Object(R.a)(Object(N.a)(r),"onContextMenuClose",(function(){r.isContextMenuToShow()&&r.close()})),Object(R.a)(Object(N.a)(r),"onClick",(function(e){if(r.fireEvents("onClick",e),r.focusTime){var t;if(r.preClickTime&&r.preTouchTime?t=Math.min(r.preClickTime,r.preTouchTime):r.preClickTime?t=r.preClickTime:r.preTouchTime&&(t=r.preTouchTime),Math.abs(t-r.focusTime)<20)return;r.focusTime=0}r.preClickTime=0,r.preTouchTime=0,r.isClickToShow()&&(r.isClickToHide()||r.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var n=!r.state.popupVisible;(r.isClickToHide()&&!n||n&&r.isClickToShow())&&r.setPopupVisible(!r.state.popupVisible,e)})),Object(R.a)(Object(N.a)(r),"onPopupMouseDown",(function(){var e;r.hasPopupMouseDown=!0,clearTimeout(r.mouseDownTimeout),r.mouseDownTimeout=window.setTimeout((function(){r.hasPopupMouseDown=!1}),0),r.context&&(e=r.context).onPopupMouseDown.apply(e,arguments)})),Object(R.a)(Object(N.a)(r),"onDocumentClick",(function(e){if(!r.props.mask||r.props.maskClosable){var t=e.target,n=r.getRootDomNode(),o=r.getPopupDomNode();ka(n,t)&&!r.isContextMenuOnly()||ka(o,t)||r.hasPopupMouseDown||r.close()}})),Object(R.a)(Object(N.a)(r),"getRootDomNode",(function(){var e=r.props.getTriggerDOMNode;if(e)return e(r.triggerRef.current);try{var t=Bn(r.triggerRef.current);if(t)return t}catch(e){}return V.a.findDOMNode(Object(N.a)(r))})),Object(R.a)(Object(N.a)(r),"getPopupClassNameFromAlign",(function(e){var t=[],n=r.props,o=n.popupPlacement,a=n.builtinPlacements,i=n.prefixCls,l=n.alignPoint,c=n.getPopupClassNameFromAlign;return o&&a&&t.push(function(e,t,n,r){for(var o=n.points,a=Object.keys(e),i=0;i<a.length;i+=1){var l=a[i];if(Ca(e[l].points,o,r))return"".concat(t,"-placement-").concat(l)}return""}(a,i,e,l)),c&&t.push(c(e)),t.join(" ")})),Object(R.a)(Object(N.a)(r),"getComponent",(function(){var e=r.props,t=e.prefixCls,n=e.destroyPopupOnHide,o=e.popupClassName,a=e.onPopupAlign,l=e.popupMotion,c=e.popupAnimation,s=e.popupTransitionName,u=e.popupStyle,d=e.mask,f=e.maskAnimation,p=e.maskTransitionName,h=e.maskMotion,m=e.zIndex,v=e.popup,g=e.stretch,b=e.alignPoint,y=e.mobile,w=e.forceRender,k=e.onPopupClick,x=r.state,E=x.popupVisible,C=x.point,O=r.getPopupAlign(),_={};return r.isMouseEnterToShow()&&(_.onMouseEnter=r.onPopupMouseEnter),r.isMouseLeaveToHide()&&(_.onMouseLeave=r.onPopupMouseLeave),_.onMouseDown=r.onPopupMouseDown,_.onTouchStart=r.onPopupMouseDown,i.createElement(Di,Object(A.default)({prefixCls:t,destroyPopupOnHide:n,visible:E,point:b&&C,className:o,align:O,onAlign:a,animation:c,getClassNameFromAlign:r.getPopupClassNameFromAlign},_,{stretch:g,getRootDomNode:r.getRootDomNode,style:u,mask:d,zIndex:m,transitionName:s,maskAnimation:f,maskTransitionName:p,maskMotion:h,ref:r.popupRef,motion:l,mobile:y,forceRender:w,onClick:k}),"function"==typeof v?v():v)})),Object(R.a)(Object(N.a)(r),"attachParent",(function(e){na.cancel(r.attachId);var t,n=r.props,o=n.getPopupContainer,a=n.getDocument,i=r.getRootDomNode();o?(i||0===o.length)&&(t=o(i)):t=a(r.getRootDomNode()).body,t?t.appendChild(e):r.attachId=na((function(){r.attachParent(e)}))})),Object(R.a)(Object(N.a)(r),"getContainer",(function(){if(!r.portalContainer){var e=(0,r.props.getDocument)(r.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",r.portalContainer=e}return r.attachParent(r.portalContainer),r.portalContainer})),Object(R.a)(Object(N.a)(r),"setPoint",(function(e){r.props.alignPoint&&e&&r.setState({point:{pageX:e.pageX,pageY:e.pageY}})})),Object(R.a)(Object(N.a)(r),"handlePortalUpdate",(function(){r.state.prevPopupVisible!==r.state.popupVisible&&r.props.afterPopupVisibleChange(r.state.popupVisible)})),Object(R.a)(Object(N.a)(r),"triggerContextValue",{onPopupMouseDown:r.onPopupMouseDown}),o="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,r.state={prevPopupVisible:o,popupVisible:o},Vi.forEach((function(e){r["fire".concat(e)]=function(t){r.fireEvents(e,t)}})),r}return Object(M.a)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=ma(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=ma(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=ma(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=ma(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),na.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){var r=e[t]||{};return Object(L.a)(Object(L.a)({},r),n)}(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,o=1e3*t;if(this.clearDelayTimer(),o){var a=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,a),r.clearDelayTimer()}),o)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var e=this.state.popupVisible,t=this.props,n=t.children,r=t.forceRender,o=t.alignPoint,a=t.className,l=t.autoDestroy,c=i.Children.only(n),s={key:"trigger"};this.isContextMenuToShow()?s.onContextMenu=this.onContextMenu:s.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(s.onClick=this.onClick,s.onMouseDown=this.onMouseDown,s.onTouchStart=this.onTouchStart):(s.onClick=this.createTwoChains("onClick"),s.onMouseDown=this.createTwoChains("onMouseDown"),s.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(s.onMouseEnter=this.onMouseEnter,o&&(s.onMouseMove=this.onMouseMove)):s.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?s.onMouseLeave=this.onMouseLeave:s.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(s.onFocus=this.onFocus,s.onBlur=this.onBlur):(s.onFocus=this.createTwoChains("onFocus"),s.onBlur=this.createTwoChains("onBlur"));var u=S()(c&&c.props&&c.props.className,a);u&&(s.className=u);var d=Object(L.a)({},s);Fn(c)&&(d.ref=In(this.triggerRef,c.ref));var f,p=i.cloneElement(c,d);return(e||this.popupRef.current||r)&&(f=i.createElement(Fi,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!e&&l&&(f=null),i.createElement(Pi.Provider,{value:this.triggerContextValue},p,f)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),n}(i.Component),Object(R.a)(Bi,"contextType",Pi),Object(R.a)(Bi,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:Ni,getDocument:Ii,onPopupVisibleChange:Mi,afterPopupVisibleChange:Mi,onPopupAlign:Mi,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),Bi),zi=function(e,t,n){return void 0!==n?n:"".concat(e,"-").concat(t)},qi=i.isValidElement;function Ui(e,t){return function(e,t,n){return qi(e)?i.cloneElement(e,"function"==typeof n?n(e.props||{}):n):t}(e,e,t)}var Gi={adjustX:1,adjustY:1},Wi=[0,0],Yi={left:{points:["cr","cl"],overflow:Gi,offset:[-4,0],targetOffset:Wi},right:{points:["cl","cr"],overflow:Gi,offset:[4,0],targetOffset:Wi},top:{points:["bc","tc"],overflow:Gi,offset:[0,-4],targetOffset:Wi},bottom:{points:["tc","bc"],overflow:Gi,offset:[0,4],targetOffset:Wi},topLeft:{points:["bl","tl"],overflow:Gi,offset:[0,-4],targetOffset:Wi},leftTop:{points:["tr","tl"],overflow:Gi,offset:[-4,0],targetOffset:Wi},topRight:{points:["br","tr"],overflow:Gi,offset:[0,-4],targetOffset:Wi},rightTop:{points:["tl","tr"],overflow:Gi,offset:[4,0],targetOffset:Wi},bottomRight:{points:["tr","br"],overflow:Gi,offset:[0,4],targetOffset:Wi},rightBottom:{points:["bl","br"],overflow:Gi,offset:[4,0],targetOffset:Wi},bottomLeft:{points:["tl","bl"],overflow:Gi,offset:[0,4],targetOffset:Wi},leftBottom:{points:["br","bl"],overflow:Gi,offset:[-4,0],targetOffset:Wi}},$i=function(e){var t=e.overlay,n=e.prefixCls,r=e.id,o=e.overlayInnerStyle;return i.createElement("div",{className:"".concat(n,"-inner"),id:r,role:"tooltip",style:o},"function"==typeof t?t():t)},Ki=Object(i.forwardRef)((function(e,t){var n=e.overlayClassName,r=e.trigger,o=void 0===r?["hover"]:r,a=e.mouseEnterDelay,l=void 0===a?0:a,c=e.mouseLeaveDelay,s=void 0===c?.1:c,u=e.overlayStyle,d=e.prefixCls,f=void 0===d?"rc-tooltip":d,p=e.children,h=e.onVisibleChange,m=e.afterVisibleChange,v=e.transitionName,g=e.animation,b=e.motion,y=e.placement,w=void 0===y?"right":y,k=e.align,x=void 0===k?{}:k,E=e.destroyTooltipOnHide,C=void 0!==E&&E,O=e.defaultVisible,_=e.getTooltipContainer,S=e.overlayInnerStyle,R=Object(D.a)(e,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle"]),j=Object(i.useRef)(null);Object(i.useImperativeHandle)(t,(function(){return j.current}));var P=Object(L.a)({},R);"visible"in e&&(P.popupVisible=e.visible);var M=!1,N=!1;if("boolean"==typeof C)M=C;else if(C&&"object"===Object(T.a)(C)){var I=C.keepParent;M=!0===I,N=!1===I}return i.createElement(Hi,Object(A.default)({popupClassName:n,prefixCls:f,popup:function(){var t=e.arrowContent,n=void 0===t?null:t,r=e.overlay,o=e.id;return[i.createElement("div",{className:"".concat(f,"-arrow"),key:"arrow"},n),i.createElement($i,{key:"content",prefixCls:f,id:o,overlay:r,overlayInnerStyle:S})]},action:o,builtinPlacements:Yi,popupPlacement:w,ref:j,popupAlign:x,getPopupContainer:_,onPopupVisibleChange:h,afterPopupVisibleChange:m,popupTransitionName:v,popupAnimation:g,popupMotion:b,defaultPopupVisible:O,destroyPopupOnHide:M,autoDestroy:N,mouseLeaveDelay:s,popupStyle:u,mouseEnterDelay:l},P),p)})),Xi={adjustX:1,adjustY:1},Zi={adjustX:0,adjustY:0},Qi=[0,0];function Ji(e){return"boolean"==typeof e?e?Xi:Zi:Object(A.default)(Object(A.default)({},Zi),e)}var el=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t};el("success","processing","error","default","warning");var tl=el("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"),nl=new RegExp("^(".concat(tl.join("|"),")(-inverse)?$"));var rl=i.forwardRef((function(e,t){var n,r=i.useContext(To),o=r.getPopupContainer,a=r.getPrefixCls,l=r.direction,c=wa(!1,{value:e.visible,defaultValue:e.defaultVisible}),s=Object(j.a)(c,2),u=s[0],d=s[1],f=function(){var t=e.title,n=e.overlay;return!t&&!n&&0!==t},p=function(){var t=e.builtinPlacements,n=e.arrowPointAtCenter,r=e.autoAdjustOverflow;return t||function(e){var t=e.arrowWidth,n=void 0===t?5:t,r=e.horizontalArrowShift,o=void 0===r?16:r,a=e.verticalArrowShift,i=void 0===a?8:a,l=e.autoAdjustOverflow,c={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(o+n),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(i+n)]},topRight:{points:["br","tc"],offset:[o+n,-4]},rightTop:{points:["tl","cr"],offset:[4,-(i+n)]},bottomRight:{points:["tr","bc"],offset:[o+n,4]},rightBottom:{points:["bl","cr"],offset:[4,i+n]},bottomLeft:{points:["tl","bc"],offset:[-(o+n),4]},leftBottom:{points:["br","cl"],offset:[-4,i+n]}};return Object.keys(c).forEach((function(t){c[t]=e.arrowPointAtCenter?Object(A.default)(Object(A.default)({},c[t]),{overflow:Ji(l),targetOffset:Qi}):Object(A.default)(Object(A.default)({},Yi[t]),{overflow:Ji(l)}),c[t].ignoreShake=!0})),c}({arrowPointAtCenter:n,autoAdjustOverflow:r})},h=e.prefixCls,m=e.openClassName,v=e.getPopupContainer,g=e.getTooltipContainer,b=e.overlayClassName,y=e.color,w=e.overlayInnerStyle,k=e.children,x=a("tooltip",h),E=a(),C=u;!("visible"in e)&&f()&&(C=!1);var O,_,T,L=function(e,t){var n=e.type;if((!0===n.__ANT_BUTTON||!0===n.__ANT_SWITCH||!0===n.__ANT_CHECKBOX||"button"===e.type)&&e.props.disabled){var r=function(e,t){var n={},r=Object(A.default)({},e);return["position","left","right","top","bottom","float","display","zIndex"].forEach((function(t){e&&t in e&&(n[t]=e[t],delete r[t])})),{picked:n,omitted:r}}(e.props.style),o=r.picked,a=r.omitted,l=Object(A.default)(Object(A.default)({display:"inline-block"},o),{cursor:"not-allowed",width:e.props.block?"100%":null}),c=Ui(e,{style:Object(A.default)(Object(A.default)({},a),{pointerEvents:"none"}),className:null});return i.createElement("span",{style:l,className:S()(e.props.className,"".concat(t,"-disabled-compatible-wrapper"))},c)}return e}(qi(k)?k:i.createElement("span",null,k),x),D=L.props,P=S()(D.className,Object(R.a)({},m||"".concat(x,"-open"),!0)),M=S()(b,(Object(R.a)(n={},"".concat(x,"-rtl"),"rtl"===l),Object(R.a)(n,"".concat(x,"-").concat(y),y&&nl.test(y)),n)),N=w;return y&&!nl.test(y)&&(N=Object(A.default)(Object(A.default)({},w),{background:y}),O={background:y}),i.createElement(Ki,Object(A.default)({},e,{prefixCls:x,overlayClassName:M,getTooltipContainer:v||g||o,ref:t,builtinPlacements:p(),overlay:(_=e.title,T=e.overlay,0===_?_:T||_||""),visible:C,onVisibleChange:function(t){var n;d(!f()&&t),f()||null===(n=e.onVisibleChange)||void 0===n||n.call(e,t)},onPopupAlign:function(e,t){var n=p(),r=Object.keys(n).filter((function(e){return n[e].points[0]===t.points[0]&&n[e].points[1]===t.points[1]}))[0];if(r){var o=e.getBoundingClientRect(),a={top:"50%",left:"50%"};r.indexOf("top")>=0||r.indexOf("Bottom")>=0?a.top="".concat(o.height-t.offset[1],"px"):(r.indexOf("Top")>=0||r.indexOf("bottom")>=0)&&(a.top="".concat(-t.offset[1],"px")),r.indexOf("left")>=0||r.indexOf("Right")>=0?a.left="".concat(o.width-t.offset[0],"px"):(r.indexOf("right")>=0||r.indexOf("Left")>=0)&&(a.left="".concat(-t.offset[0],"px")),e.style.transformOrigin="".concat(a.left," ").concat(a.top)}},overlayInnerStyle:N,arrowContent:i.createElement("span",{className:"".concat(x,"-arrow-content"),style:O}),motion:{motionName:zi(E,"zoom-big-fast",e.transitionName),motionDeadline:1e3}}),C?Ui(L,{className:P}):L)}));rl.displayName="Tooltip",rl.defaultProps={placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0};var ol=rl,al=function e(t){return Object(P.a)(this,e),new Error("unreachable case: ".concat(JSON.stringify(t)))},il=new Map;function ll(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):"rc-util-key"}function cl(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function sl(e){return"queue"===e?"prependQueue":e?"prepend":"append"}function ul(e){return Array.from((il.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function dl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Po())return null;var n=t.csp,r=t.prepend,o=document.createElement("style");o.setAttribute("data-rc-order",sl(r)),null!=n&&n.nonce&&(o.nonce=null==n?void 0:n.nonce),o.innerHTML=e;var a=cl(t),i=a.firstChild;if(r){if("queue"===r){var l=ul(a).filter((function(e){return["prepend","prependQueue"].includes(e.getAttribute("data-rc-order"))}));if(l.length)return a.insertBefore(o,l[l.length-1].nextSibling),o}a.insertBefore(o,i)}else a.appendChild(o);return o}function fl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=cl(t);return ul(n).find((function(n){return n.getAttribute(ll(t))===e}))}function pl(e,t){var n=il.get(e);if(!n||!ka(document,n)){var r=dl("",t),o=r.parentNode;il.set(e,o),e.removeChild(r)}}function hl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=cl(n);pl(r,n);var o,a,i,l=fl(t,n);if(l)return null!==(o=n.csp)&&void 0!==o&&o.nonce&&l.nonce!==(null===(a=n.csp)||void 0===a?void 0:a.nonce)&&(l.nonce=null===(i=n.csp)||void 0===i?void 0:i.nonce),l.innerHTML!==e&&(l.innerHTML=e),l;var c=dl(e,n);return c.setAttribute(ll(n),t),c}var ml,vl=0,gl={};function bl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=vl++,r=t;function o(){(r-=1)<=0?(e(),delete gl[n]):gl[n]=na(o)}return gl[n]=na(o),n}function yl(e){return!e||null===e.offsetParent||e.hidden}function wl(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(t&&t[1]&&t[2]&&t[3]&&t[1]===t[2]&&t[2]===t[3])}bl.cancel=function(e){void 0!==e&&(na.cancel(gl[e]),delete gl[e])},bl.ids=gl;var kl=function(e){Object(I.a)(n,e);var t=Object(F.a)(n);function n(){var e;return Object(P.a)(this,n),(e=t.apply(this,arguments)).containerRef=i.createRef(),e.animationStart=!1,e.destroyed=!1,e.onClick=function(t,n){var r,o;if(!(!t||yl(t)||t.className.indexOf("-leave")>=0)){var a=e.props.insertExtraNode;e.extraNode=document.createElement("div");var i=Object(N.a)(e).extraNode,l=e.context.getPrefixCls;i.className="".concat(l(""),"-click-animating-node");var c=e.getAttributeName();if(t.setAttribute(c,"true"),n&&"#ffffff"!==n&&"rgb(255, 255, 255)"!==n&&wl(n)&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&"transparent"!==n){i.style.borderColor=n;var s=(null===(r=t.getRootNode)||void 0===r?void 0:r.call(t))||t.ownerDocument,u=s instanceof Document?s.body:null!==(o=s.firstChild)&&void 0!==o?o:s;ml=hl("\n      [".concat(l(""),"-click-animating-without-extra-node='true']::after, .").concat(l(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(n,";\n      }"),"antd-wave",{csp:e.csp,attachTo:u})}a&&t.appendChild(i),["transition","animation"].forEach((function(n){t.addEventListener("".concat(n,"start"),e.onTransitionStart),t.addEventListener("".concat(n,"end"),e.onTransitionEnd)}))}},e.onTransitionStart=function(t){if(!e.destroyed){var n=e.containerRef.current;t&&t.target===n&&!e.animationStart&&e.resetEffect(n)}},e.onTransitionEnd=function(t){t&&"fadeEffect"===t.animationName&&e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var n=function(n){if("INPUT"!==n.target.tagName&&!yl(n.target)){e.resetEffect(t);var r=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout((function(){return e.onClick(t,r)}),0),bl.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=bl((function(){e.animationStart=!1}),10)}};return t.addEventListener("click",n,!0),{cancel:function(){t.removeEventListener("click",n,!0)}}}},e.renderWave=function(t){var n=t.csp,r=e.props.children;if(e.csp=n,!i.isValidElement(r))return r;var o=e.containerRef;return Fn(r)&&(o=In(r.ref,e.containerRef)),Ui(r,{ref:o})},e}return Object(M.a)(n,[{key:"componentDidMount",value:function(){var e=this.containerRef.current;e&&1===e.nodeType&&(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var e=this.context.getPrefixCls,t=this.props.insertExtraNode;return"".concat(e(""),t?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(e){var t=this;if(e&&e!==this.extraNode&&e instanceof Element){var n=this.props.insertExtraNode,r=this.getAttributeName();e.setAttribute(r,"false"),ml&&(ml.innerHTML=""),n&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),["transition","animation"].forEach((function(n){e.removeEventListener("".concat(n,"start"),t.onTransitionStart),e.removeEventListener("".concat(n,"end"),t.onTransitionEnd)}))}}},{key:"render",value:function(){return i.createElement(Lo,null,this.renderWave)}}]),n}(i.Component);kl.contextType=To;var xl=function(){return{width:0,opacity:0,transform:"scale(0)"}},El=function(e){return{width:e.scrollWidth,opacity:1,transform:"scale(1)"}},Cl=function(e){var t=e.prefixCls,n=!!e.loading;return e.existIcon?l.a.createElement("span",{className:"".concat(t,"-loading-icon")},l.a.createElement($t.a,null)):l.a.createElement(ca,{visible:n,motionName:"".concat(t,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:xl,onAppearActive:El,onEnterStart:xl,onEnterActive:El,onLeaveStart:El,onLeaveActive:xl},(function(e,n){var r=e.className,o=e.style;return l.a.createElement("span",{className:"".concat(t,"-loading-icon"),style:o,ref:n},l.a.createElement($t.a,{className:r}))}))},Ol=/^[\u4e00-\u9fa5]{2}$/,_l=Ol.test.bind(Ol);function Sl(e){return"text"===e||"link"===e}el("default","primary","ghost","dashed","link","text"),el("circle","round"),el("submit","button","reset");var Rl=i.forwardRef((function(e,t){var n,r,o=e.loading,a=void 0!==o&&o,l=e.prefixCls,c=e.type,s=e.danger,u=e.shape,d=e.size,f=e.className,p=e.children,h=e.icon,m=e.ghost,v=void 0!==m&&m,g=e.block,b=void 0!==g&&g,y=e.htmlType,w=void 0===y?"button":y,k=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["loading","prefixCls","type","danger","shape","size","className","children","icon","ghost","block","htmlType"]),x=i.useContext(Do),E=i.useState(!!a),C=Object(j.a)(E,2),O=C[0],_=C[1],L=i.useState(!1),D=Object(j.a)(L,2),P=D[0],M=D[1],N=i.useContext(To),I=N.getPrefixCls,F=N.autoInsertSpaceInButton,B=N.direction,V=t||i.createRef(),H=i.useRef(),z=function(){return 1===i.Children.count(p)&&!h&&!Sl(c)};r="object"===Object(T.a)(a)&&a.delay?a.delay||!0:!!a,i.useEffect((function(){clearTimeout(H.current),"number"==typeof r?H.current=window.setTimeout((function(){_(r)}),r):_(r)}),[r]),i.useEffect((function(){if(V&&V.current&&!1!==F){var e=V.current.textContent;z()&&_l(e)?P||M(!0):P&&M(!1)}}),[V]);var q=function(t){var n,r=e.onClick,o=e.disabled;O||o?t.preventDefault():null===(n=r)||void 0===n||n(t)};wo(!("string"==typeof h&&h.length>2),"Button","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(h,"` at https://ant.design/components/icon")),wo(!(v&&Sl(c)),"Button","`link` or `text` button can't be a `ghost` button.");var U=I("btn",l),G=!1!==F,W="";switch(d||x){case"large":W="lg";break;case"small":W="sm"}var Y=O?"loading":h,$=S()(U,(Object(R.a)(n={},"".concat(U,"-").concat(c),c),Object(R.a)(n,"".concat(U,"-").concat(u),u),Object(R.a)(n,"".concat(U,"-").concat(W),W),Object(R.a)(n,"".concat(U,"-icon-only"),!p&&0!==p&&!!Y),Object(R.a)(n,"".concat(U,"-background-ghost"),v&&!Sl(c)),Object(R.a)(n,"".concat(U,"-loading"),O),Object(R.a)(n,"".concat(U,"-two-chinese-chars"),P&&G),Object(R.a)(n,"".concat(U,"-block"),b),Object(R.a)(n,"".concat(U,"-dangerous"),!!s),Object(R.a)(n,"".concat(U,"-rtl"),"rtl"===B),n),f),K=h&&!O?h:i.createElement(Cl,{existIcon:!!h,prefixCls:U,loading:!!O}),X=p||0===p?function(e,t){var n=!1,r=[];return i.Children.forEach(e,(function(e){var t=Object(T.a)(e),o="string"===t||"number"===t;if(n&&o){var a=r.length-1,i=r[a];r[a]="".concat(i).concat(e)}else r.push(e);n=o})),i.Children.map(r,(function(e){return function(e,t){if(null!=e){var n=t?" ":"";return"string"!=typeof e&&"number"!=typeof e&&"string"==typeof e.type&&_l(e.props.children)?Ui(e,{children:e.props.children.split("").join(n)}):"string"==typeof e?(_l(e)&&(e=e.split("").join(n)),i.createElement("span",null,e)):e}}(e,t)}))}(p,z()&&G):null,Z=ln(k,["navigate"]);if(void 0!==Z.href)return i.createElement("a",Object(A.default)({},Z,{className:$,onClick:q,ref:V}),K,X);var Q=i.createElement("button",Object(A.default)({},k,{type:w,className:$,onClick:q,ref:V}),K,X);return Sl(c)?Q:i.createElement(kl,null,Q)}));Rl.displayName="Button",Rl.Group=function(e){return i.createElement(Lo,null,(function(t){var n,r=t.getPrefixCls,o=t.direction,a=e.prefixCls,l=e.size,c=e.className,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","size","className"]),u=r("btn-group",a),d="";switch(l){case"large":d="lg";break;case"small":d="sm";break;case"middle":case void 0:break;default:console.warn(new al(l))}var f=S()(u,(Object(R.a)(n={},"".concat(u,"-").concat(d),d),Object(R.a)(n,"".concat(u,"-rtl"),"rtl"===o),n),c);return i.createElement("div",Object(A.default)({},s,{className:f}))}))},Rl.__ANT_BUTTON=!0;var jl=Rl,Al=el("text","input");function Tl(e){return!!(e.prefix||e.suffix||e.allowClear)}function Ll(e){return!(!e.addonBefore&&!e.addonAfter)}var Dl=function(e){Object(I.a)(n,e);var t=Object(F.a)(n);function n(){var e;return Object(P.a)(this,n),(e=t.apply(this,arguments)).containerRef=i.createRef(),e.onInputMouseUp=function(t){var n;if(null===(n=e.containerRef.current)||void 0===n?void 0:n.contains(t.target)){var r=e.props.triggerFocus;null==r||r()}},e}return Object(M.a)(n,[{key:"renderClearIcon",value:function(e){var t=this.props,n=t.allowClear,r=t.value,o=t.disabled,a=t.readOnly,l=t.handleReset;if(!n)return null;var c=!o&&!a&&r,s="".concat(e,"-clear-icon");return i.createElement(Wt.a,{onClick:l,className:S()(Object(R.a)({},"".concat(s,"-hidden"),!c),s),role:"button"})}},{key:"renderSuffix",value:function(e){var t=this.props,n=t.suffix,r=t.allowClear;return n||r?i.createElement("span",{className:"".concat(e,"-suffix")},this.renderClearIcon(e),n):null}},{key:"renderLabeledIcon",value:function(e,t){var n,r=this.props,o=r.focused,a=r.value,l=r.prefix,c=r.className,s=r.size,u=r.suffix,d=r.disabled,f=r.allowClear,p=r.direction,h=r.style,m=r.readOnly,v=r.bordered,g=this.renderSuffix(e);if(!Tl(this.props))return Ui(t,{value:a});var b=l?i.createElement("span",{className:"".concat(e,"-prefix")},l):null,y=S()("".concat(e,"-affix-wrapper"),(Object(R.a)(n={},"".concat(e,"-affix-wrapper-focused"),o),Object(R.a)(n,"".concat(e,"-affix-wrapper-disabled"),d),Object(R.a)(n,"".concat(e,"-affix-wrapper-sm"),"small"===s),Object(R.a)(n,"".concat(e,"-affix-wrapper-lg"),"large"===s),Object(R.a)(n,"".concat(e,"-affix-wrapper-input-with-clear-btn"),u&&f&&a),Object(R.a)(n,"".concat(e,"-affix-wrapper-rtl"),"rtl"===p),Object(R.a)(n,"".concat(e,"-affix-wrapper-readonly"),m),Object(R.a)(n,"".concat(e,"-affix-wrapper-borderless"),!v),Object(R.a)(n,"".concat(c),!Ll(this.props)&&c),n));return i.createElement("span",{ref:this.containerRef,className:y,style:h,onMouseUp:this.onInputMouseUp},b,Ui(t,{style:null,value:a,className:Nl(e,v,s,d)}),g)}},{key:"renderInputWithLabel",value:function(e,t){var n,r=this.props,o=r.addonBefore,a=r.addonAfter,l=r.style,c=r.size,s=r.className,u=r.direction;if(!Ll(this.props))return t;var d="".concat(e,"-group"),f="".concat(d,"-addon"),p=o?i.createElement("span",{className:f},o):null,h=a?i.createElement("span",{className:f},a):null,m=S()("".concat(e,"-wrapper"),d,Object(R.a)({},"".concat(d,"-rtl"),"rtl"===u)),v=S()("".concat(e,"-group-wrapper"),(Object(R.a)(n={},"".concat(e,"-group-wrapper-sm"),"small"===c),Object(R.a)(n,"".concat(e,"-group-wrapper-lg"),"large"===c),Object(R.a)(n,"".concat(e,"-group-wrapper-rtl"),"rtl"===u),n),s);return i.createElement("span",{className:v,style:l},i.createElement("span",{className:m},p,Ui(t,{style:null}),h))}},{key:"renderTextAreaWithClearIcon",value:function(e,t){var n,r=this.props,o=r.value,a=r.allowClear,l=r.className,c=r.style,s=r.direction,u=r.bordered;if(!a)return Ui(t,{value:o});var d=S()("".concat(e,"-affix-wrapper"),"".concat(e,"-affix-wrapper-textarea-with-clear-btn"),(Object(R.a)(n={},"".concat(e,"-affix-wrapper-rtl"),"rtl"===s),Object(R.a)(n,"".concat(e,"-affix-wrapper-borderless"),!u),Object(R.a)(n,"".concat(l),!Ll(this.props)&&l),n));return i.createElement("span",{className:d,style:c},Ui(t,{style:null,value:o}),this.renderClearIcon(e))}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.inputType,r=e.element;return n===Al[0]?this.renderTextAreaWithClearIcon(t,r):this.renderInputWithLabel(t,this.renderLabeledIcon(t,r))}}]),n}(i.Component);function Pl(e){return null==e?"":e}function Ml(e,t,n,r){if(n){var o=t,a=e.value;return"click"===t.type?((o=Object.create(t)).target=e,o.currentTarget=e,e.value="",n(o),void(e.value=a)):void 0!==r?((o=Object.create(t)).target=e,o.currentTarget=e,e.value=r,void n(o)):void n(o)}}function Nl(e,t,n,r,o){var a;return S()(e,(Object(R.a)(a={},"".concat(e,"-sm"),"small"===n),Object(R.a)(a,"".concat(e,"-lg"),"large"===n),Object(R.a)(a,"".concat(e,"-disabled"),r),Object(R.a)(a,"".concat(e,"-rtl"),"rtl"===o),Object(R.a)(a,"".concat(e,"-borderless"),!t),a))}function Il(e,t){if(e){e.focus(t);var n=(t||{}).cursor;if(n){var r=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}var Fl=function(e){Object(I.a)(n,e);var t=Object(F.a)(n);function n(e){var r;Object(P.a)(this,n),(r=t.call(this,e)).direction="ltr",r.focus=function(e){Il(r.input,e)},r.saveClearableInput=function(e){r.clearableInput=e},r.saveInput=function(e){r.input=e},r.onFocus=function(e){var t=r.props.onFocus;r.setState({focused:!0},r.clearPasswordValueAttribute),null==t||t(e)},r.onBlur=function(e){var t=r.props.onBlur;r.setState({focused:!1},r.clearPasswordValueAttribute),null==t||t(e)},r.handleReset=function(e){r.setValue("",(function(){r.focus()})),Ml(r.input,e,r.props.onChange)},r.renderInput=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.props,l=a.className,c=a.addonBefore,s=a.addonAfter,u=a.size,d=a.disabled,f=ln(r.props,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","size","inputType","bordered"]);return i.createElement("input",Object(A.default)({autoComplete:o.autoComplete},f,{onChange:r.handleChange,onFocus:r.onFocus,onBlur:r.onBlur,onKeyDown:r.handleKeyDown,className:S()(Nl(e,n,u||t,d,r.direction),Object(R.a)({},l,l&&!c&&!s)),ref:r.saveInput}))},r.clearPasswordValueAttribute=function(){r.removePasswordTimeout=setTimeout((function(){r.input&&"password"===r.input.getAttribute("type")&&r.input.hasAttribute("value")&&r.input.removeAttribute("value")}))},r.handleChange=function(e){r.setValue(e.target.value,r.clearPasswordValueAttribute),Ml(r.input,e,r.props.onChange)},r.handleKeyDown=function(e){var t=r.props,n=t.onPressEnter,o=t.onKeyDown;n&&13===e.keyCode&&n(e),null==o||o(e)},r.renderComponent=function(e){var t=e.getPrefixCls,n=e.direction,o=e.input,a=r.state,l=a.value,c=a.focused,s=r.props,u=s.prefixCls,d=s.bordered,f=void 0===d||d,p=t("input",u);return r.direction=n,i.createElement(Do.Consumer,null,(function(e){return i.createElement(Dl,Object(A.default)({size:e},r.props,{prefixCls:p,inputType:"input",value:Pl(l),element:r.renderInput(p,e,f,o),handleReset:r.handleReset,ref:r.saveClearableInput,direction:n,focused:c,triggerFocus:r.focus,bordered:f}))}))};var o=void 0===e.value?e.defaultValue:e.value;return r.state={value:o,focused:!1,prevValue:e.value},r}return Object(M.a)(n,[{key:"componentDidMount",value:function(){this.clearPasswordValueAttribute()}},{key:"componentDidUpdate",value:function(){}},{key:"getSnapshotBeforeUpdate",value:function(e){return Tl(e)!==Tl(this.props)&&wo(this.input!==document.activeElement,"Input","When Input is focused, dynamic add or remove prefix / suffix will make it lose focus caused by dom structure change. Read more: https://ant.design/components/input/#FAQ"),null}},{key:"componentWillUnmount",value:function(){this.removePasswordTimeout&&clearTimeout(this.removePasswordTimeout)}},{key:"blur",value:function(){this.input.blur()}},{key:"setSelectionRange",value:function(e,t,n){this.input.setSelectionRange(e,t,n)}},{key:"select",value:function(){this.input.select()}},{key:"setValue",value:function(e,t){void 0===this.props.value?this.setState({value:e},t):null==t||t()}},{key:"render",value:function(){return i.createElement(Lo,null,this.renderComponent)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevValue,r={prevValue:e.value};return void 0===e.value&&n===e.value||(r.value=e.value),r}}]),n}(i.Component);Fl.defaultProps={type:"text"};var Bl=Fl,Vl=i.forwardRef((function(e,t){var n,r,o=e.prefixCls,a=e.inputPrefixCls,l=e.className,c=e.size,s=e.suffix,u=e.enterButton,d=void 0!==u&&u,f=e.addonAfter,p=e.loading,h=e.disabled,m=e.onSearch,v=e.onChange,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange"]),b=i.useContext(To),y=b.getPrefixCls,w=b.direction,k=i.useContext(Do),x=c||k,E=i.useRef(null),C=function(e){var t;document.activeElement===(null===(t=E.current)||void 0===t?void 0:t.input)&&e.preventDefault()},O=function(e){var t;m&&m(null===(t=E.current)||void 0===t?void 0:t.input.value,e)},_=y("input-search",o),j=y("input",a),T="boolean"==typeof d||void 0===d?i.createElement(Yt.a,null):null,L="".concat(_,"-button"),D=d||{},P=D.type&&!0===D.type.__ANT_BUTTON;r=P||"button"===D.type?Ui(D,Object(A.default)({onMouseDown:C,onClick:O,key:"enterButton"},P?{className:L,size:x}:{})):i.createElement(jl,{className:L,type:d?"primary":void 0,size:x,disabled:h,key:"enterButton",onMouseDown:C,onClick:O,loading:p,icon:T},d),f&&(r=[r,Ui(f,{key:"addonAfter"})]);var M=S()(_,(Object(R.a)(n={},"".concat(_,"-rtl"),"rtl"===w),Object(R.a)(n,"".concat(_,"-").concat(x),!!x),Object(R.a)(n,"".concat(_,"-with-button"),!!d),n),l);return i.createElement(Bl,Object(A.default)({ref:In(E,t),onPressEnter:O},g,{size:x,prefixCls:j,addonAfter:r,suffix:s,onChange:function(e){e&&e.target&&"click"===e.type&&m&&m(e.target.value,e),v&&v(e)},className:M,disabled:h}))}));Vl.displayName="Search";var Hl,zl,ql=Vl,Ul="\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",Gl=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],Wl={};function Yl(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&Wl[n])return Wl[n];var r=window.getComputedStyle(e),o=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),a=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),i=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),l=Gl.map((function(e){return"".concat(e,":").concat(r.getPropertyValue(e))})).join(";"),c={sizingStyle:l,paddingSize:a,borderSize:i,boxSizing:o};return t&&n&&(Wl[n]=c),c}!function(e){e[e.NONE=0]="NONE",e[e.RESIZING=1]="RESIZING",e[e.RESIZED=2]="RESIZED"}(zl||(zl={}));var $l=function(e){Object(I.a)(n,e);var t=Object(F.a)(n);function n(e){var r;return Object(P.a)(this,n),(r=t.call(this,e)).nextFrameActionId=void 0,r.resizeFrameId=void 0,r.textArea=void 0,r.saveTextArea=function(e){r.textArea=e},r.handleResize=function(e){var t=r.state.resizeStatus,n=r.props,o=n.autoSize,a=n.onResize;t===zl.NONE&&("function"==typeof a&&a(e),o&&r.resizeOnNextFrame())},r.resizeOnNextFrame=function(){cancelAnimationFrame(r.nextFrameActionId),r.nextFrameActionId=requestAnimationFrame(r.resizeTextarea)},r.resizeTextarea=function(){var e=r.props.autoSize;if(e&&r.textArea){var t=e.minRows,n=e.maxRows,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Hl||((Hl=document.createElement("textarea")).setAttribute("tab-index","-1"),Hl.setAttribute("aria-hidden","true"),document.body.appendChild(Hl)),e.getAttribute("wrap")?Hl.setAttribute("wrap",e.getAttribute("wrap")):Hl.removeAttribute("wrap");var o=Yl(e,t),a=o.paddingSize,i=o.borderSize,l=o.boxSizing,c=o.sizingStyle;Hl.setAttribute("style","".concat(c,";").concat(Ul)),Hl.value=e.value||e.placeholder||"";var s,u=Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,f=Hl.scrollHeight;if("border-box"===l?f+=i:"content-box"===l&&(f-=a),null!==n||null!==r){Hl.value=" ";var p=Hl.scrollHeight-a;null!==n&&(u=p*n,"border-box"===l&&(u=u+a+i),f=Math.max(u,f)),null!==r&&(d=p*r,"border-box"===l&&(d=d+a+i),s=f>d?"":"hidden",f=Math.min(d,f))}return{height:f,minHeight:u,maxHeight:d,overflowY:s,resize:"none"}}(r.textArea,!1,t,n);r.setState({textareaStyles:o,resizeStatus:zl.RESIZING},(function(){cancelAnimationFrame(r.resizeFrameId),r.resizeFrameId=requestAnimationFrame((function(){r.setState({resizeStatus:zl.RESIZED},(function(){r.resizeFrameId=requestAnimationFrame((function(){r.setState({resizeStatus:zl.NONE}),r.fixFirefoxAutoScroll()}))}))}))}))}},r.renderTextArea=function(){var e=r.props,t=e.prefixCls,n=void 0===t?"rc-textarea":t,o=e.autoSize,a=e.onResize,l=e.className,c=e.disabled,s=r.state,u=s.textareaStyles,d=s.resizeStatus,f=ln(r.props,["prefixCls","onPressEnter","autoSize","defaultValue","onResize"]),p=S()(n,l,Object(R.a)({},"".concat(n,"-disabled"),c));"value"in f&&(f.value=f.value||"");var h=Object(L.a)(Object(L.a)(Object(L.a)({},r.props.style),u),d===zl.RESIZING?{overflowX:"hidden",overflowY:"hidden"}:null);return i.createElement(fr,{onResize:r.handleResize,disabled:!(o||a)},i.createElement("textarea",Object(A.default)({},f,{className:p,style:h,ref:r.saveTextArea})))},r.state={textareaStyles:{},resizeStatus:zl.NONE},r}return Object(M.a)(n,[{key:"componentDidUpdate",value:function(e){e.value===this.props.value&&function(e,t,n,r){var o=void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!==z()(e)||!e||"object"!==z()(t)||!t)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),c=0;c<a.length;c++){var s=a[c];if(!l(s))return!1;var u=e[s],d=t[s];if(!1===(o=void 0)||void 0===o&&u!==d)return!1}return!0}(e.autoSize,this.props.autoSize)||this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.nextFrameActionId),cancelAnimationFrame(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var e=this.textArea.selectionStart,t=this.textArea.selectionEnd;this.textArea.setSelectionRange(e,t)}}catch(e){}}},{key:"render",value:function(){return this.renderTextArea()}}]),n}(i.Component),Kl=function(e){Object(I.a)(n,e);var t=Object(F.a)(n);function n(e){var r;Object(P.a)(this,n),(r=t.call(this,e)).resizableTextArea=void 0,r.focus=function(){r.resizableTextArea.textArea.focus()},r.saveTextArea=function(e){r.resizableTextArea=e},r.handleChange=function(e){var t=r.props.onChange;r.setValue(e.target.value,(function(){r.resizableTextArea.resizeTextarea()})),t&&t(e)},r.handleKeyDown=function(e){var t=r.props,n=t.onPressEnter,o=t.onKeyDown;13===e.keyCode&&n&&n(e),o&&o(e)};var o=void 0===e.value||null===e.value?e.defaultValue:e.value;return r.state={value:o},r}return Object(M.a)(n,[{key:"setValue",value:function(e,t){"value"in this.props||this.setState({value:e},t)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return i.createElement($l,Object(A.default)({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?{value:e.value}:null}}]),n}(i.Component);function Xl(e,t){return Object(G.a)(e||"").slice(0,t).join("")}var Zl=i.forwardRef((function(e,t){var n,r=e.prefixCls,o=e.bordered,a=void 0===o||o,l=e.showCount,c=void 0!==l&&l,s=e.maxLength,u=e.className,d=e.style,f=e.size,p=e.onCompositionStart,h=e.onCompositionEnd,m=e.onChange,v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","bordered","showCount","maxLength","className","style","size","onCompositionStart","onCompositionEnd","onChange"]),g=i.useContext(To),b=g.getPrefixCls,y=g.direction,w=i.useContext(Do),k=i.useRef(null),x=i.useRef(null),E=i.useState(!1),C=Object(j.a)(E,2),O=C[0],_=C[1],L=wa(v.defaultValue,{value:v.value}),D=Object(j.a)(L,2),P=D[0],M=D[1],N=function(e,t){void 0===v.value&&(M(e),null==t||t())},I=Number(s)>0,F=b("input",r);i.useImperativeHandle(t,(function(){var e;return{resizableTextArea:null===(e=k.current)||void 0===e?void 0:e.resizableTextArea,focus:function(e){var t,n;Il(null===(n=null===(t=k.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e)},blur:function(){var e;return null===(e=k.current)||void 0===e?void 0:e.blur()}}}));var B=i.createElement(Kl,Object(A.default)({},ln(v,["allowClear"]),{className:S()((n={},Object(R.a)(n,"".concat(F,"-borderless"),!a),Object(R.a)(n,u,u&&!c),Object(R.a)(n,"".concat(F,"-sm"),"small"===w||"small"===f),Object(R.a)(n,"".concat(F,"-lg"),"large"===w||"large"===f),n)),style:c?void 0:d,prefixCls:F,onCompositionStart:function(e){_(!0),null==p||p(e)},onChange:function(e){var t=e.target.value;!O&&I&&(t=Xl(t,s)),N(t),Ml(e.currentTarget,e,m,t)},onCompositionEnd:function(e){_(!1);var t=e.currentTarget.value;I&&(t=Xl(t,s)),t!==P&&(N(t),Ml(e.currentTarget,e,m,t)),null==h||h(e)},ref:k})),V=Pl(P);O||!I||null!==v.value&&void 0!==v.value||(V=Xl(V,s));var H=i.createElement(Dl,Object(A.default)({},v,{prefixCls:F,direction:y,inputType:"text",value:V,element:B,handleReset:function(e){var t,n;N("",(function(){var e;null===(e=k.current)||void 0===e||e.focus()})),Ml(null===(n=null===(t=k.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e,m)},ref:x,bordered:a}));if(c){var z,q=Object(G.a)(V).length;return z="object"===Object(T.a)(c)?c.formatter({count:q,maxLength:s}):"".concat(q).concat(I?" / ".concat(s):""),i.createElement("div",{className:S()("".concat(F,"-textarea"),Object(R.a)({},"".concat(F,"-textarea-rtl"),"rtl"===y),"".concat(F,"-textarea-show-count"),u),style:d,"data-count":z},H)}return H})),Ql={click:"onClick",hover:"onMouseOver"},Jl=i.forwardRef((function(e,t){var n=Object(i.useState)(!1),r=Object(j.a)(n,2),o=r[0],a=r[1],l=function(){e.disabled||a(!o)};return i.createElement(Lo,null,(function(n){var r=n.getPrefixCls,a=e.className,c=e.prefixCls,s=e.inputPrefixCls,u=e.size,d=e.visibilityToggle,f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","prefixCls","inputPrefixCls","size","visibilityToggle"]),p=r("input",s),h=r("input-password",c),m=d&&function(t){var n,r=e.action,a=e.iconRender,c=Ql[r]||"",s=(void 0===a?function(){return null}:a)(o),u=(Object(R.a)(n={},c,l),Object(R.a)(n,"className","".concat(t,"-icon")),Object(R.a)(n,"key","passwordIcon"),Object(R.a)(n,"onMouseDown",(function(e){e.preventDefault()})),Object(R.a)(n,"onMouseUp",(function(e){e.preventDefault()})),n);return i.cloneElement(i.isValidElement(s)?s:i.createElement("span",null,s),u)}(h),v=S()(h,a,Object(R.a)({},"".concat(h,"-").concat(u),!!u)),g=Object(A.default)(Object(A.default)({},ln(f,["suffix","iconRender"])),{type:o?"text":"password",className:v,prefixCls:p,suffix:m});return u&&(g.size=u),i.createElement(Bl,Object(A.default)({ref:t},g))}))}));Jl.defaultProps={action:"click",visibilityToggle:!0,iconRender:function(e){return e?i.createElement(Kt.a,null):i.createElement(Xt.a,null)}},Jl.displayName="Password";var ec=Jl;Bl.Group=function(e){return i.createElement(Lo,null,(function(t){var n,r=t.getPrefixCls,o=t.direction,a=e.prefixCls,l=e.className,c=void 0===l?"":l,s=r("input-group",a),u=S()(s,(Object(R.a)(n={},"".concat(s,"-lg"),"large"===e.size),Object(R.a)(n,"".concat(s,"-sm"),"small"===e.size),Object(R.a)(n,"".concat(s,"-compact"),e.compact),Object(R.a)(n,"".concat(s,"-rtl"),"rtl"===o),n),c);return i.createElement("span",{className:u,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},e.children)}))},Bl.Search=ql,Bl.TextArea=Zl,Bl.Password=ec;var tc=function(e){return"function"==typeof e};function nc(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-workbench-toolbar-button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: none;\n  background-color: transparent;\n  cursor: pointer;\n  width: auto;\n  height: 28px;\n  border-radius: 4px;\n  line-height: 28px;\n  text-align: center;\n  padding: 0 5px;\n  margin: 0 3px;\n  color: var(--yq-text-primary);\n}\n.lake-workbench-toolbar-button:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-workbench-toolbar-button .toolbar-button-title {\n  margin-left: 4px;\n}\n.lake-workbench-toolbar-button-active {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-workbench-toolbar-button-disable {\n  background-color: transparent !important;\n  color: var(--yq-text-disable);\n  cursor: not-allowed !important;\n}\n");var rc=function(e){var t=e.title,n=e.tooltip,r=e.icon,o=e.hide,a=void 0!==o&&o,i=e.id,c=e.showTooltip,s=e.showIcon,u=void 0===s||s,d=e.showTitle,f=void 0===d||d,p=e.iconSize,h=void 0===p?16:p,m=e.titleFontSize,v=void 0===m?14:m,g=e.onClick,b=e.active,y=e.disable;return(tc(a)?a():a)?l.a.createElement(l.a.Fragment,null):l.a.createElement(ol,{title:tc(n)?n():n,visible:c},l.a.createElement("button",{className:S()("lake-workbench-toolbar-button",(tc(b)?b():b)&&"lake-workbench-toolbar-button-active",(tc(y)?y():y)&&"lake-workbench-toolbar-button-disable "),id:i,onClick:function(e){(tc(y)?y():y)||g(e)}},(tc(u)?u():u)&&l.a.createElement("span",{className:tc(r)?r():r,style:{fontSize:h}}),(tc(f)?f():f)&&l.a.createElement("span",{className:"toolbar-button-title",style:{fontSize:v}},tc(t)?t():t)))};nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-workbench-toolbar {\n  width: 100%;\n  height: 40px;\n  background-color: var(--yq-bg-secondary);\n  display: flex;\n  align-items: center;\n  padding: 0 4px;\n  justify-content: space-between;\n}\n.lake-workbench-toolbar .toolbar-items {\n  display: flex;\n  align-items: center;\n}\n.lake-workbench-toolbar .lake-workbench-toolbar-divider {\n  display: inline-flex;\n  width: 1px;\n  height: 40px;\n  background-color: var(--yq-border-primary);\n  margin: 0 2px;\n}\n");var oc=function(e){return"renderToolbarItem"in e},ac=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;d()(this,n),r=t.call(this,e),s()(m()(r),"_renderItem",(function(e,t){return"|"===e?l.a.createElement("div",{className:"lake-workbench-toolbar-divider",key:t}):oc(e)?e.renderToolbarItem(m()(r),e.options):oc(e)?l.a.createElement(l.a.Fragment,null):l.a.createElement(rc,a()({},e,{key:t}))})),s()(m()(r),"_renderToolbarItems",(function(e){return e.map((function(e,t){return r._renderItem(e,t)}))}));var o=r.props,i=o.leftItems,c=o.middleItems,u=o.rightItems,f=o.className;return r.state={leftItems:i,middleItems:c,rightItems:u,className:f},r}return p()(n,[{key:"componentDidMount",value:function(){var e=this.props.onMount;e&&e(this)}},{key:"componentWillUnmount",value:function(){var e=this.props.onUnMount;e&&e(this)}},{key:"render",value:function(){var e=this.state,t=e.leftItems,n=e.middleItems,r=e.rightItems,o=e.className;return l.a.createElement("div",{className:S()("lake-workbench-toolbar",o)},l.a.createElement("div",{className:"toolbar-items"},t&&this._renderToolbarItems(t)),l.a.createElement("div",{className:"toolbar-items"},n&&this._renderToolbarItems(n)),l.a.createElement("div",{className:"toolbar-items"},r&&this._renderToolbarItems(r)))}}]),n}(l.a.Component);function ic(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ic(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ic(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cc=function(){function e(t,n){var r=this;d()(this,e),this.options=t,this.workbench=n,s()(this,"toolbarComponentRef",l.a.createRef()),s()(this,"onToolbarMount",(function(e){var t=r.options.onMount;t&&t(e,r.workbench.editor)})),s()(this,"onToolbarUnmount",(function(e){var t=r.options.onUnmount;t&&t(e,r.workbench.editor)}))}return p()(e,[{key:"render",value:function(e){if(!e)return l.a.createElement(l.a.Fragment,null);V.a.render(l.a.createElement(ac,a()({ref:this.toolbarComponentRef},this._initToolbarItems(),this._getToolbarOptions())),e)}},{key:"destroy",value:function(e){e&&V.a.unmountComponentAtNode(e)}},{key:"update",value:function(e,t){var n,r;t&&(this.options=lc(lc({},this.options),t));var o=this._initToolbarItems(),a=o.leftItems,i=o.middleItems,l=o.rightItems;null===(n=this.toolbarComponentRef.current)||void 0===n||n.setState({leftItems:a,middleItems:i,rightItems:l,className:null===(r=this.options)||void 0===r?void 0:r.className})}},{key:"_getToolbarOptions",value:function(){return{onUnMount:this.onToolbarUnmount,onMount:this.onToolbarMount,className:this.options.className}}},{key:"_initToolbarItems",value:function(){var e,t,n;return{leftItems:this._formatToolbarItem(null===(e=this.options.items)||void 0===e?void 0:e.leftAlignItems),middleItems:this._formatToolbarItem(null===(t=this.options.items)||void 0===t?void 0:t.middleAlignItems),rightItems:this._formatToolbarItem(null===(n=this.options.items)||void 0===n?void 0:n.rightAlignItems)}}},{key:"_formatToolbarItem",value:function(e){var t=this;if(e){var n=[];return e.forEach((function(e){var r=t._getToolbarItem(e);r&&n.push(r)})),n}}},{key:"_getToolbarItem",value:function(t){if("|"===t)return"|";var n=this.plugin.get(t.name);return null!=n&&n.registerToolbarItem?e._composeToolbarItem(n.registerToolbarItem(),t):void 0}},{key:"plugin",get:function(){return this.workbench.plugins}}],[{key:"_composeToolbarItem",value:function(e,t){return lc(lc({},e),t)}}]),e}();function sc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sc(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nc(".lake-workbench-modal-mask {\n  position: fixed;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n}\n.lake-workbench-global-modal-mask {\n  position: fixed;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n}\n");var dc,fc=p()((function e(){d()(this,e),s()(this,"containerEl",void 0),s()(this,"componentRef",void 0)})),pc=function(){function e(t){d()(this,e),this.options=t,s()(this,"modalMap",new Map),s()(this,"globalModalMap",new Map),s()(this,"_workbenchMask",void 0),s()(this,"_globalMask",void 0),s()(this,"_mountRoots",new Map)}return p()(e,[{key:"showModal",value:function(e,t,n,r,o){var a=document.createElement("div");if(r===dc.WORKBENCH){var i,l,c=new fc;c.containerEl=a,this.modalMap.set(e,c),null!==(i=this.options)&&void 0!==i&&i.modalClassName&&a.classList.add(null===(l=this.options)||void 0===l?void 0:l.modalClassName)}if(r===dc.GLOBAL){var s,u,d=new fc;d.containerEl=a,this.globalModalMap.set(e,d),null!==(s=this.options)&&void 0!==s&&s.globalModalClassName&&a.classList.add(null===(u=this.options)||void 0===u?void 0:u.globalModalClassName)}if(null!=o&&o.containerStyle){var f=o.containerStyle,p=f.left,h=f.top,m=f.overflow;p&&(a.style.left=p),h&&(a.style.top=h),m&&(a.style.overflow=m)}n.appendChild(a),this._renderModal(e,t,a,null==o?void 0:o.modalProps),this._mountRoots.set(e,a),this._handleMaskMount(n,r,null==o?void 0:o.showMask)}},{key:"hasModal",value:function(e){return this.modalMap.has(e)||this.globalModalMap.has(e)}},{key:"hideModal",value:function(t){var n=this._getModalByName(t);n&&(e._hideModal(n),this._mountRoots.delete(t),this._deleteModalByName(t),this.globalModalMap.size||this._clearGlobalMask(),this.modalMap.size||this._clearWorkbenchMask())}},{key:"destroy",value:function(){this._mountRoots.forEach((function(t){e._hideModal(t)}))}},{key:"_getModalByName",value:function(e){var t,n;return(null===(t=this.modalMap.get(e))||void 0===t?void 0:t.containerEl)||(null===(n=this.globalModalMap.get(e))||void 0===n?void 0:n.containerEl)}},{key:"_deleteModalByName",value:function(e){return this.modalMap.delete(e)||this.globalModalMap.delete(e)}},{key:"_handleMaskMount",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n&&(t===dc.GLOBAL&&this._mountGlobalMask(e),t===dc.WORKBENCH&&this._mountModalMask(e))}},{key:"_mountGlobalMask",value:function(e){var t,n=this;if(!this._globalMask){var r=document.createElement("div");r.classList.add("lake-workbench-global-modal-mask"),r.oncontextmenu=function(e){return e.preventDefault(),!1},null!==(t=this.options)&&void 0!==t&&t.globalMaskClassName&&r.classList.add(this.options.globalMaskClassName),r.addEventListener("wheel",(function(e){e.preventDefault(),e.stopPropagation()})),r.onclick=function(){return n._onCloseGlobalMask()},e.appendChild(r),this._globalMask=r}}},{key:"_mountModalMask",value:function(e){var t,n=this;if(!this._workbenchMask){var r=document.createElement("div");r.oncontextmenu=function(e){return e.preventDefault(),!1},r.classList.add("lake-workbench-global-modal-mask"),null!==(t=this.options)&&void 0!==t&&t.modalMaskClassName&&r.classList.add(this.options.modalMaskClassName),r.onclick=function(){return n._onCloseWorkbenchMask()},e.appendChild(r),this._workbenchMask=r}}},{key:"_onCloseWorkbenchMask",value:function(){var t=this,n=!1;this.modalMap.forEach((function(r,o){var a=r.componentRef.current.autoClose;if(a&&!a())return n=!0;e._hideModal(r.containerEl),t.modalMap.delete(o)})),n||this._clearWorkbenchMask()}},{key:"_clearWorkbenchMask",value:function(){var e;null===(e=this._workbenchMask)||void 0===e||e.remove(),this._workbenchMask=void 0}},{key:"_onCloseGlobalMask",value:function(){var t=this,n=!1;this.globalModalMap.forEach((function(r,o){var a=r.componentRef.current.autoClose;if(a&&!a())return n=!0;e._hideModal(r.containerEl),t.globalModalMap.delete(o)})),n||this._clearGlobalMask()}},{key:"_clearGlobalMask",value:function(){var e;null===(e=this._globalMask)||void 0===e||e.remove(),this._globalMask=void 0}},{key:"updateModal",value:function(){this.globalModalMap.forEach((function(e){e.componentRef.current&&e.componentRef.current.forceUpdate()})),this.modalMap.forEach((function(e){e.componentRef.current&&e.componentRef.current.forceUpdate()}))}},{key:"_renderModal",value:function(e,t,n,r){var o=this,a=l.a.createRef();V.a.render(l.a.createElement(l.a.Fragment,null,t(uc(uc({},r),{},{close:function(){return o.hideModal(e)},ref:a}))),n,(function(){var t=o.modalMap.get(e)||o.globalModalMap.get(e);t&&(t.componentRef=a)}))}}],[{key:"_hideModal",value:function(e){V.a.unmountComponentAtNode(e),e.remove()}}]),e}();!function(e){e.GLOBAL="global",e.WORKBENCH="workbench"}(dc||(dc={}));var hc=function(){function e(t,n,r){d()(this,e),this.workbench=t,this.workbenchUI=n,this.options=r,s()(this,"modalManage",new pc(this.options))}return p()(e,[{key:"showModal",value:function(e,t){var n=this.plugins.get(e);if(n&&n.registerModal){var r=n.registerModal(),o=r.name,a=r.renderComponent,i=t.scope;(void 0===i?dc.GLOBAL:i)===dc.GLOBAL?this._showGlobalModal(o,a,t):this._showModal(o,a,t)}}},{key:"_showModal",value:function(e,t,n){var r=this.workbenchUI.containerEl.modalContainer;r&&this.modalManage.showModal(e,t,r,dc.WORKBENCH,n)}},{key:"hasModal",value:function(e){return this.modalManage.hasModal(e)}},{key:"_showGlobalModal",value:function(e,t,n){var r=this.workbenchUI.containerEl.globalModalContainer;r&&this.modalManage.showModal(e,t,r,dc.GLOBAL,n)}},{key:"destroy",value:function(){this.modalManage.destroy()}},{key:"hideModal",value:function(e){this.modalManage.hideModal(e)}},{key:"updateModal",value:function(){this.modalManage.updateModal()}},{key:"plugins",get:function(){return this.workbench.plugins}}]),e}(),mc="lake-workbench-global-modal-container";nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-workbench-toolbar-container {\n  border: solid var(--yq-border-primary);\n  position: relative;\n  border-width: 1px 0;\n  z-index: 400;\n  height: 42px;\n  width: 100%;\n}\n.lake-workbench-toolbar-container .lake-workbench-toolbar {\n  overflow-x: auto;\n}\n.lake-workbench-toolbar-container .lake-workbench-toolbar > * {\n  flex-shrink: 0;\n}\n.lake-workbench-editor-container {\n  height: calc(100% - 41px);\n  width: 100%;\n  margin-top: -1px;\n}\n.lake-workbench-modal-container {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n}\n.lake-workbench-global-modal-container {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n}\n");var vc=function(e){g()(r,nn);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(r);function r(){var e;d()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o)),s()(m()(e),"toolbarContainer",l.a.createRef()),s()(m()(e),"editorContainer",l.a.createRef()),s()(m()(e),"modalContainer",l.a.createRef()),e}return p()(r,[{key:"initContainers",value:(t=E()(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.render(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{ref:this.toolbarContainer,className:"lake-workbench-toolbar-container"}),l.a.createElement("div",{ref:this.editorContainer,className:"lake-workbench-editor-container"}),l.a.createElement("div",{ref:this.modalContainer,className:"lake-workbench-modal-container"})),this.workbench.container);case 2:return(t=document.querySelector(".".concat(mc)))||((n=document.createElement("div")).classList.add(mc),document.body.appendChild(n),t=n),e.abrupt("return",{editorContainer:this.editorContainer.current,toolbarContainer:this.toolbarContainer.current,modalContainer:this.modalContainer.current,globalModalContainer:t});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.workbench.container&&V.a.unmountComponentAtNode(this.workbench.container)}}]),r}(),gc={INIT_DATA:"initData",EDIT_FORM:"editForm",CREATE_FORM:"createForm",REMOVE_FORM:"removeForm",REMOVE_GROUP:"removeGroup",ENABLE_FORM:"enableForm",DISABLE_FORM:"disableForm",SYNC_ERROR:"syncError",RECROD_SYNC_SAVING:"recordSyncSaving",RECROD_SYNC_SUCCESS:"recordSyncSuccess",RECROD_SYNC_FAILURE:"recordSyncFailure",VIEW_CREATED:"viewCreated",VIEW_CHANGED:"viewChanged",EDIT_WARNING:"editWarning",SELECTED:"selected",DATA_LOADED:"dataLoaded",SEARCH:"search",SEARCHED:"searched",CHANGED:"changed",STATUS_CHANGED:"statusChanged",SAVE:"save",AUTO_SAVE:"autoSave",FILTERED:"filtered",CONTENT_CHANGED:"contentChanged",CONTENT_CHANGED_ASYNC:"contentChangedAsync",STATS_UPDATED:"statsUpdated",COL_CHANGED:"colChanged",RECORD_WILL_MOVE:"recordWilMove",GROUP_BY_CREATED_AT:"groupByCreatedAt",PASTE_END:"pasteEnd",CONNECTION_ERROR:"connectionError",REQEUST_ERROR:"requestError",VIEW_NAME_CHANGED:"viewNameChanged",FILTER_CHANGED:"filterChanged",GROUP_STATE_CHANGED:"groupStateChanged",INSERT_GRID:"insertGrid",INSERT_CARD:"insertCard",INSERT_KANBAN:"insertKanban",COPY_VIEW:"copyView",ACTIVE_VIEW:"activeView",REMOVE_VIEW:"removeView",UPDATE_VIEW_NAME:"updateViewName",SET_COLS:"setColumns",SET_COVER:"setCover",SET_SHOW_FIELD:"setShowField",SET_GROUP:"setGroup",SET_SORT:"setSort",SET_FILTER:"setFilter",INSERT_COL:"insertCol",COMMAND_END:"commandEnd"};nc(".lake-table-workbench-toolbar .toolbar-items .lake-workbench-toolbar-button {\n  padding: 0 8px;\n}\n.lake-table-workbench-toolbar .toolbar-items .lake-workbench-toolbar-button:hover {\n  cursor: pointer;\n}\n");var bc={items:{leftAlignItems:[{name:"viewManage"},"|",{name:"kanbanGroup",showTooltip:!1},{name:"gridSetting",showTooltip:!1},{name:"kanbanSetting",showTooltip:!1},{name:"cardSetting",showTooltip:!1},{name:"filter",showTooltip:!1},{name:"group",showTooltip:!1},{name:"sort",showTooltip:!1},{name:"rowHeight",showTooltip:!1},{name:"search"},"|",{name:"addRecord"}],rightAlignItems:[{name:"form",showTooltip:!1}]},className:"lake-table-workbench-toolbar",onMount:function(e,t){var n,r,o,a,i,l=$()((function(){return e.forceUpdate()}),120);null===(n=t.kernel)||void 0===n||n.on(gc.INIT_DATA,(function(){return l()})),null===(r=t.kernel)||void 0===r||r.on(gc.ENABLE_FORM,(function(){return l()})),null===(o=t.kernel)||void 0===o||o.on(gc.DISABLE_FORM,(function(){return l()})),null===(a=t.kernel)||void 0===a||a.on(gc.VIEW_CHANGED,(function(){return l()})),null===(i=t.kernel)||void 0===i||i.on(gc.VIEW_NAME_CHANGED,(function(){return l()}))},onUnmount:function(e,t){var n,r,o,a,i,l=$()((function(){return e.forceUpdate()}),120);null===(n=t.kernel)||void 0===n||n.off(gc.INIT_DATA,(function(){return l()})),null===(r=t.kernel)||void 0===r||r.off(gc.ENABLE_FORM,(function(){return l()})),null===(o=t.kernel)||void 0===o||o.off(gc.DISABLE_FORM,(function(){return l()})),null===(a=t.kernel)||void 0===a||a.off(gc.VIEW_CHANGED,(function(){return l()})),null===(i=t.kernel)||void 0===i||i.off(gc.VIEW_NAME_CHANGED,(function(){return l()}))}};nc(".lake-workbench-modal-option {\n  z-index: 1001;\n  position: absolute;\n}\n.lake-workbench-modal-mask-option {\n  z-index: 1000;\n}\n.lake-workbench-global-modal-option {\n  z-index: 1001;\n  position: absolute;\n}\n.lake-workbench-global-modal-mask-option {\n  z-index: 1000;\n}\n");var yc={template:{adapter:vc},componentOptions:{toolbar:bc,modal:{modalClassName:"lake-workbench-modal-option",modalMaskClassName:"lake-workbench-modal-mask-option",globalModalClassName:"lake-workbench-global-modal-option",globalMaskClassName:"lake-workbench-global-modal-mask-option"}}};function wc(e){if(Q()(e))return e;if(oe()(e))return e;if(ee()(e))return e.map((function(e){return wc(e)}));if(ne()(e)){var t=Object.keys(e),n={};return t.forEach((function(t){n[t]=wc(e[t])})),n}return e}var kc={columns:[{name:"多行文本",type:"textarea",index:0},{name:"单选",type:"select",color:!0,index:1,options:[{id:"waiting",value:"待开始",color:"$label-back-color:0-0"},{id:"doing",value:"进行中",color:"$label-back-color:0-1"},{id:"done",value:"已完成",color:"$label-back-color:0-2"},{id:"canceled",value:"已取消",color:"$label-back-color:0-3"}]},{name:"日期",type:"date",index:2},{name:"图片",type:"image",index:3}],colCount:4},xc={"$1 $2 个隐藏字段":"$1 $2 hidden columns","$1 条记录":"$1 records","$1个分组":"Grouped By $1 field","$1个排序":"$1 sorts","$1个筛选":"$1 filters","[多行文本] 换行":"[textarea] line break","[链接] 编辑":"[link] edit","上一个":"Previous","上一条记录":"Prev row","上传$1":"Upload $1","上传图片":"Upload image","上传失败":"Upload failure","上传失败！":"Upload failure!","上传失败，请重试":"Upload failure, please retry","上传文件":"Upload file","上周":"Last week","上月":"Last month","下一个":"Next","下一条记录":"Next row","下周":"Next week","下拉":"Dropdown","下月":"Next month","下载$1":"Download $1","下载文件":"Download file","不包含":"Not contains","不展示":"None","不支持该文件嵌入预览":"The file embed preview is not supported","不支持该文件类型":"This file type is not supported","不是":"is not","不等于":"Not equal to","不能与其他列重名":"Field name must be unique","中":"Middle","为空":"is empty","人员":"Mention","今天":"Today","从大到小":"9 → 1","从小到大":"1 → 9","低":"Low","你还未进行任何分组":"You haven't done any grouping yet","你还未进行任何排序":"You haven't done any sorting yet","你还未进行任何筛选":"You haven't done any filtering yet","使用钉钉扫码$1":"Use Dingding to scan the code to $1","保存于":"Saved at","保持排序":"Keep sort","修改人":"Update people","修改分组":"Edit group","修改分组人员":"Edit group member","修改时间":"Update time","停止收集":"Stop collection","全局通用":"Global","全选":"Select all","关闭弹窗 (ESC)":"Close modal (ESC)","分享":"Share","分享表单":"Share form","分组":"Group","分组依据":"Grouped by","分组设置":"Group configs","切换视图":"Toggle view","列名不能为空":"Field name must not empty","列类型":"Field type","列表":"List","创建人":"creator","创建时间":"Create time","删除":"Delete","删除分组":"Delete group","删除分组后，记录将移到未分组中":"After deleting the group, the record will be moved to the ungrouped","删除列":"Remove field","删除图片成功":"Remove image successfully","删除行":"Remove row","删除表单后需发布才生效":"Publish this document first and this form will be invalid","删除视图":"Remove view","删除记录":"Remove record","删除该条件":"Delete this condition","副本":"Copy","包含":"Contains","包含一个":"has one of","包含一或多个":"has any of","包含所有":"has all of","升序":"Asc","单个图片大小不超过10M":"signal image can't more than 10mb","单行文本":"Input","单选":"Select","取消":"Cancel","取消分组":"Ungroup","取消排序后，可进行拖拽":"After unsorting, you can drag and drop","取消添加":"remove","取消筛选":"Unfilter","可以快速新建一个单选列进行分组":"You can quickly create a select column for grouping","可搜索或新建选项":"Select an option or create one","可用于问卷调查、活动组织、登记报名等信息收集与整理场景。":"The data table is a new type of table for more convenient multi-person collaboration and data management through multiple views.","可直接输入选项名新建":"Enter the option name to create one","向上插入行":"Insert row above","向上插入记录":"Insert record above","向上移动":"Move up","向下插入行":"Insert row below","向下插入记录":"Insert record below","向下移动":"Move down","向右插入列":"Insert field right","向右插入行":"Insert row to the right","向右插入记录":"Insert record right","向左插入列":"Insert field left","向左插入行":"Insert row to the left","向左插入记录":"Insert record left","否":"Not","唯一值":"Unique value","唯一值 $1":"Unique","唯一值占比":"Percent Unique","唯一值占比 $1":"Unique $1","唯一数":"Unique","唯一数 $1":"Unique $1","唯一数占比":"Percent Unique","唯一数占比 $1":"Unique $1","因为列类型的不同，修改此列类型可能会导致某些数据丢失。\n      修改后可使用「Ctrl」+「Z」撤销操作。":"Converting to this field type may clear some cell data from every record in the table.\n  If the conversion causes a problem, you can press ⌘+Z to undo.","图片":"Image","图片列表":"image list","基础":"Basis","复制":"Copy","复制填写链接":"Copy and fill in the link","复制失败，没有足够的列":"Paste failed due to lack of fields","复制成功":"Copy successfully","复制表单项":"Clone this item","复制视图":"Copy view","复制记录":"Copy record","复选框":"Checkbox","多行文本":"Textarea","多行文本换行":"Wrap in textarea","多选":"Multi-select","多选单元格":"Multiple selection cells","大于":"Greater than","大于等于":"Greater than or equal to","如要分享表单链接，请先发布或更新数据表":"To share the form, please publish or update table.","字段配置":"Field configuration","完成":"Finish","完成编辑":"Finish editing","封面效果":"Cover displays","封面来源":"Cover source","将文件拖拽至此或点击上传":"drop files here or click upload","小于":"Less than","小于等于":"Less than or equal to","展开上一行":"Expand previous line","展开下一行":"Expand next line","展开行":"Expand row","展开行 (Space)":"Expand row (Space)","展开记录":"Expand record","展开记录: 上一条":"Expand record: previous","展开记录: 下一条":"Expand record: next","展开记录: 关闭":"Expand Records: Close","左右滚动屏幕":"Scroll the screen left and right","已勾选":"Checked","已勾选 $1":"Checked $1","已勾选占比":"Percent Checked","已勾选占比 $1":"Checked $1","已填写":"Filled","已填写 $1":"Filled $1","已填写占比":"Percent Filled","已填写占比 $1":"Filled $1","已填写数":"Filled","已填写数 $1":"Filled $1","已存在该人员，不可重复创建！":"This member already exists","已存在该选项，不可重复创建！":"This option already exists","已添加":"Added","已达最大记录限制":"Maximum record limit reached","已选中":"Checked","已选择 $1 个单元格":"$1 cells selected","布局方式":"Layout","平均值":"Average","平均值 $1":"Avg $1","并且":"And","开启收集":"Start form collect","开头不是":"Not Starts with","开头是":"Starts with","当":"Where","当问题为空时，会使用列名作为问题；如未重命名列，所填写的问题会自动同步给列名。":"When the question is empty, the column name will be used as the question; if the column is not renamed, the filled question will be automatically synchronized to the column name.","必填":"Required","快捷键":"Shortcut keys","成功复制 $1 个单元格":"$1 cells copied","或者":"Or","所有列":"all the columns","所选单元格如果有多个选项值，改为单选后仅保留第一个选项值":"If this cell has selected more than one option, only the first will be saved","手机号码":"Phone","打开":"Open","扩展选区":"Expend selection","按":"By","按以下选项进行分组":"Group by options","按以下选项进行排序":"Sort by the following options","按本列分组":"Group by current col","按本列筛选":"Filter by current col","排序":"Sort","排序设置":"Sort settings","搜索人员":"","搜索成员":"Search members","撤销":"Undo","操作出错了":"Operation failed","支持数据的筛选、分组和排序":"Supports filtering, grouping and sorting of data","收起":"Fold","数字":"Number","数字列只能输入数字":"Number fields can only enter numbers","数据操作异常，请稍后重试":"Data operation is abnormal, please try again later","数据表中所有列":"All the columns in table","数据表列名":"Field name","数据表已达最大行数限制":"Records in this table is over limits","数据表至少需要有一列":"This table should at least contain one field","文件":"File","文件不超过10M":"The file size does not exceed 10M","文件读取失败，请重新上传":"File read failed, please re-upload","文本":"Title","断网状态下不支持编辑":"Editing is not supported in disconnected state","断网状态下不支持编辑，请检查网络设置":"You cannot edit offline, please check your network setting","新增字段":"New field","新建分组":"New group","新建视图":"New view","新建选项":"New option","方向键":"Arrow keys","无封面":"No cover","无法编辑此记录的创建时间":"Cannot paste into this field. The destination field is computed.","日期":"Date","时间范围 $1 天":"RNG $1 days","时间范围 $1 月":"RNG $1 months","时间范围（日）":"Date Range(days)","时间范围（月）":"Date Range(months)","明天":"Tomorrow","昨天":"Yesterday","是":"is","显示":"Show","显示字段名":"Show column name","暂无":"Empty","暂无人员":"Empty","暂无选项":"Empty","替换":"Replace","替换为":"Replace to","替换全部":"Replace all","最大值":"Max","最大值 $1":"Max $1","最小值":"Min","最小值 $1":"Min $1","最早时间":"Earlist Date","最早时间 $1":"Earlist Date $1","最晚时间":"Lastest Date","最晚时间 $1":"Latest Date $1","未分组":"Ungrouped","未勾选":"Unchecked","未勾选 $1":"Unchecked $1","未勾选占比":"Percent Unchecked","未勾选占比 $1":"Unchecked $1","未命名分组":"Untitled group","未命名表单":"Untitled form","未命名记录":"Untitled record","未命名问题":"Untitled question","未填写":"Empty","未填写 $1":"Empty $1","未填写占比":"Percent Empty","未填写占比 $1":"Empty $1","未填写数":"Empty","未填写数 $1":"Empty $1","未搜索到结果":"No data","本列是索引列，是每条记录的关键信息，用来标识每条记录，不能被删除":"This field is an index, the key information of each record, used to identify each record and cannot be deleted","本周":"This week","本地上传":"Local Upload","本地图片文件需要手动上传":"Local image needs to be uploaded manually","本月":"This month","本记录不属于该分组，将被移至新的分组":"This record does not belong to this group and will be moved to a new group","本记录不属于该分组，点击其他区域将移走该记录":"This record will move to its new position when you select another record","本记录因排序规则会移动，点击其他区域将移走该记录":"This record will move to its new position when you select another record","本记录因排序规则，将移动到新的排序位置":"This record will be moved to a new sort position due to sorting rules","本记录因筛选规则，将被过滤":"This record will be filtered due to filtering rules","本记录将被移动到新的排序位置":"Record moved","本记录将被移至新的分组":"Record moved","本记录将被过滤":"Record filtered","本记录已被筛选过滤，点击其他区域将隐藏该记录":"This record is no longer visible based on this view's filter, and will be hidden when you select another record","查找":"Search","查看":"View","正在粘贴，请稍等...":"Pasting...","正是":"is exactly","此处由填写着输入":"","此处由填写者输":"","此处由填写者输入":"This field is for form user","水平滑动":"Scroll horizontally","求和":"Sum","求和 $1":"Sum $1","没有选项":"No option","添加":"Add","添加一个选项":"Add an option","添加下一个":"Add next","添加分组条件":"Add grouping conditions","添加排序条件":"Add sorting conditions","添加筛选":"Add filter","添加筛选条件":"Add filter","添加记录":"Add record","添加选项":"Add an option","清空单元格":"Clear cell","清空并重新选择":"Empty and re-upload","点击「开启收集」按钮获得表单填写链接":"Click「Start form collect」button to get then form link","点击上传":"Click on the upload","点击左侧列表添加已有列 或 点击下方按钮添加新表单项":"Click a field or the button above to add an item","点击确定后改动将生效。":"Click submit to save the changes.","点击重命名":"Click to rename field","生成新表单":"Create new form","用于任务管理":"For task management","用于展示图片集":"Used to display photo collections","画册视图":"Gallery view","画册视图$1":"Gallery View $1","画册视图，适合整理图片素材":"Gallery view, suitable for organizing picture materials","画册配置":"Gallery setting","直接粘贴或拖拽到这里":"","看板暂无分组":"Kanban no grouping","看板视图":"Kanban view","看板视图$1":"Kanban view $1","看板视图，适合任务管理和项目协作":"Kanban view, suitable for task management and project collaboration","看板配置":"Kanban setting","确定":"Confirm","确定保存对「$1」的改动？":"Do you want to save the changes you made to $1 ?","确定修改此列类型吗？":"Are you sure you want to convert to this field type?","确定要删除「$1」视图?":"Do you want to remove「$1」view?","确定要删除表单吗？":"Do you want to remove this form?","确定要删除该分组吗？":"Are you sure you want to delete this group?","确认":"Confirm","确认要修改为单选吗?":"Are you sure you want to convert to this type?","移除表单项":"Remove this item","空":"Empty","空值":"Blank cell","空间已开启禁止复制功能，如有疑问，请联系空间管理员":"Space has been prohibited from copying. If you have any questions, please contact the space administrator.","等于":"Equal to","筛选":"Filter","粘贴":"Paste","索引列不支持拖拽":"The primary fild cannot be moved","索引列无法被删除、移动、替换":"The primary field cannot be removed, moved or replaced","结尾不是":"Not ends with","结尾是":"Ends with","统计":"Calculation","编辑":"Edit","编辑列":"Edit field","编辑链接":"Edit link","网络连接已中断":"Network offline","获得链接的所有人，可填写并提交表单":"Anyone who gets the link can fill out and submit the form","行展开上一条":"Expand record above","行展开下一条":"Expand record below","行高":"Row height","表单":"Form","表单为空":"This form is empty","表单填写链接":"Form fill-in link","表单收集中":"Form collecting","表单收集未开启":"Form collection is not turned on","表格视图":"Grid view","表格视图$1":"Grid view $1","表格视图，灵活定义多样数据":"Grid view, flexible definition of various data","表格配置":"Table Config","裁剪":"Clip","视图名称":"view name","记录总数":"Count","设置该列内容类型，支持单行文本、多行文本、日期、数字、单选、多选等":"Set the content type of this field","该类型文件请压缩为 ZIP 文件上传":"Unsupported file format, please compress it to ZIP before uploading","该记录的此字段不支持编辑":"This field does not support edit the record","请输入":"Please enter","请输入关键词...":"Please enter a keyword...","请输入关键词搜索":"Please enter keywords to search","请输入数字":"Please number","请输入文本":"Input some texts","请输入有效手机号码":"Please enter a valid phone","请输入有效邮箱地址":"Please enter a valid email","请输入筛选条件":"Please enter filter criteria","请输入表单描述":"please input form descriptor","请输入表单标题":"please input form title","请输入选项":"Enter an option","请输入链接":"Please enter a link","请输入问题":"Enter a question","请选择":"Please choose","请配置选项":"Please config option","输入格式有误":"Please enter a valid data","过去7天":"7 days ago","还未设置任何分组":"No groupings applied to this view","还未设置任何排序":"No sorts applied to this view","还未设置任何筛选":"No filters applied to this view","适应":"Fit","选择":"Select","选择一列进行分组":"Pick a field to group by","选择一列进行排序":"Pick a field to sort by","选择时间":"Select date","选项倒序":"Last-First","选项名称不能为空":"Option name cannot be empty","选项设置":"Filed options","选项顺序":"First-Last","邮箱":"Email","重做":"Redo","重命名视图":"Rename view","重复值":"Duplicate valu","重新上传":"Upload again","链接":"Link","附件":"File","附件列表":"attachment list","降序":"Desc","非空":"is not empty","非空值":"Not blank cell","颜色":"Color","高":"High","高级":"Advanced","鼠标滚轮":"Wheel scroll","（空）":"(Empty)","文档已保存":"Document has been saved"},Ec=/\$(\d+)/g,Cc=function(){function e(){d()(this,e)}return p()(e,null,[{key:"getLanguage",value:function(){return e._lang}},{key:"setLanguage",value:function(t){e._lang="enUS"===t||"en-US"===t||"en"===t||"en-us"===t?"enUS":"zhCN"}},{key:"get",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.length?Oc.apply(void 0,[e._lang,t].concat(r)):e._langMap[e._lang][t]||t}}]),e}();function Oc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return(t="zhCN"===e?t:xc[t]||t)?((r=r.map((function(t){return"zhCN"===e?t:xc[t]||t}))).unshift(""),t.replace(Ec,(function(e,t){return r[t]||""}))):""}function _c(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Cc.get.apply(Cc,[e].concat(n))}s()(Cc,"_lang","zhCN"),s()(Cc,"_langMap",{enUS:xc,zhCN:{}}),Cc.setLanguage(function(){if("undefined"!=typeof window&&"undefined"!=typeof document){var e;if(null!==(e=window.appData)&&void 0!==e&&e.locale)return window.appData.locale;var t=window.location.search,n=new URLSearchParams(t).get("language");if(n)return n;var r=document.cookie.match(/(?:^|; ?)lang=([^;]+)(?:;|$)/);return r?r[1]:"zh-cn"}return"zh-cn"}()||"zhCN");var Sc,Rc={rowHeights:[{type:"low",name:_c("低"),value:36},{type:"middle",name:_c("中"),value:58},{type:"high",name:_c("高"),value:146}],colWidth:180},jc={name:"表格视图",type:"GRID",rowCount:0,rowHeight:Rc.rowHeights[0],data:{},selections:{},rows:[],columns:[],filter:{},index:0,colCount:3,frozenCol:0,scrollX:0,scrollY:0,tableId:""},Ac={INPUT:"input",TEXTAREA:"textarea",NUMBER:"number",SELECT:"select",MULTI_SELECT:"multiSelect",DATE:"date",MENTION:"mention",IMAGE:"image",FILE:"file",CHECKBOX:"checkbox",LINK:"link",EMAIL:"email",PHONE:"phone",CREATED_AT:"createdAt",UPDATED_AT:"updatedAt",USER_ID:"userId",MODIFIER_ID:"modifierId"},Tc=[{type:Ac.INPUT,name:_c("单行文本")},{type:Ac.TEXTAREA,name:_c("多行文本")},{type:Ac.NUMBER,name:_c("数字")},{type:Ac.SELECT,name:_c("单选")},{type:Ac.MULTI_SELECT,name:_c("多选")},{type:Ac.DATE,name:_c("日期")},{type:Ac.MENTION,name:_c("人员")},{type:Ac.IMAGE,name:_c("图片"),disableGroup:!0,disableSort:!0},{type:Ac.FILE,name:_c("附件"),disableGroup:!0,disableSort:!0},{type:Ac.CHECKBOX,name:_c("复选框")},{type:Ac.LINK,name:_c("链接")},{type:Ac.EMAIL,name:_c("邮箱")},{type:Ac.PHONE,name:_c("手机号码")},{type:Ac.USER_ID,name:_c("创建人"),isAdvanced:!0,disableForm:!0},{type:Ac.CREATED_AT,name:_c("创建时间"),isAdvanced:!0,disableGroup:!0,disableForm:!0},{type:Ac.MODIFIER_ID,name:_c("修改人"),isAdvanced:!0,disableForm:!0},{type:Ac.UPDATED_AT,name:_c("修改时间"),isAdvanced:!0,disableGroup:!0,disableForm:!0}],Lc=function(e){var t=Tc.find((function(t){return t.type===e}));return t?t.name:""};s()(Sc={},Ac.INPUT,[Ac.TEXTAREA,Ac.EMAIL,Ac.PHONE]),s()(Sc,Ac.TEXTAREA,[]),s()(Sc,Ac.NUMBER,[Ac.INPUT,Ac.TEXTAREA]),s()(Sc,Ac.DATE,[Ac.INPUT,Ac.TEXTAREA]),s()(Sc,Ac.SELECT,[Ac.INPUT,Ac.TEXTAREA,Ac.MULTI_SELECT]),s()(Sc,Ac.MULTI_SELECT,[Ac.INPUT,Ac.TEXTAREA]),s()(Sc,Ac.CREATED_AT,[Ac.INPUT,Ac.TEXTAREA]),s()(Sc,Ac.UPDATED_AT,[Ac.INPUT,Ac.TEXTAREA]),s()(Sc,Ac.IMAGE,[Ac.INPUT,Ac.TEXTAREA]),s()(Sc,Ac.FILE,[Ac.INPUT,Ac.TEXTAREA]),s()(Sc,Ac.MENTION,[Ac.INPUT,Ac.TEXTAREA]),s()(Sc,Ac.USER_ID,[Ac.INPUT,Ac.TEXTAREA,Ac.MENTION]),s()(Sc,Ac.MODIFIER_ID,[Ac.INPUT,Ac.TEXTAREA,Ac.MENTION]),s()(Sc,Ac.LINK,[Ac.INPUT,Ac.TEXTAREA]),s()(Sc,Ac.EMAIL,[Ac.INPUT,Ac.TEXTAREA,Ac.PHONE]),s()(Sc,Ac.PHONE,[Ac.INPUT,Ac.TEXTAREA,Ac.EMAIL]),s()(Sc,Ac.CHECKBOX,[Ac.NUMBER]);var Dc=[Ac.SELECT,Ac.MULTI_SELECT],Pc=[Ac.MENTION,Ac.USER_ID,Ac.MODIFIER_ID],Mc=[Ac.INPUT,Ac.TEXTAREA,Ac.NUMBER,Ac.PHONE,Ac.EMAIL,Ac.LINK,Ac.DATE],Nc=[Ac.SELECT,Ac.MULTI_SELECT,Ac.DATE,Ac.CREATED_AT,Ac.UPDATED_AT,Ac.MENTION,Ac.CHECKBOX],Ic=Tc.filter((function(e){return!e.disableFilter})).map((function(e){return e.type})),Fc=Tc.filter((function(e){return!e.disableSort})).map((function(e){return e.type})),Bc=Tc.filter((function(e){return!e.disableGroup})).map((function(e){return e.type})),Vc=[Ac.IMAGE,Ac.FILE],Hc=[Ac.INPUT,Ac.TEXTAREA,Ac.NUMBER,Ac.PHONE,Ac.DATE,Ac.LINK,Ac.EMAIL],zc=[Ac.SELECT,Ac.MENTION],qc=[].concat(Dc,Mc,[Ac.MENTION]),Uc=[].concat(Dc,[Ac.MENTION]),Gc=Tc.filter((function(e){return e.disableForm})).map((function(e){return e.type})),Wc="undefined"!=typeof navigator?navigator.userAgent:"",Yc="undefined"!=typeof window&&window.h5,$c=/edge/i.test(Wc),Kc=!$c&&/chrome/i.test(Wc),Xc=/firefox/i.test(Wc),Zc=!$c&&!Kc&&/safari/i.test(Wc);/dingtalk/i.test(Wc);var Qc=/mobile/i.test(Wc),Jc=/yuque-desktop\/[\d.]+/i.test(Wc),es=/os [\.\_\d]+ like mac os/i.test(Wc),ts=/android/i.test(Wc),ns=!es&&/mac os x/i.test(Wc),rs=/windows\s*(?:nt)?\s*[\.\_\d]+/i.test(Wc),os=Yc||Qc,as={edge:$c,chrome:Kc,firefox:Xc,safari:Zc,mobile:Qc,desktop:Jc,ios:es,android:ts,macos:ns,windows:rs,isMobile:os};function is(t,n){var r;return(r="undefined"==typeof window?e.appData:window&&window.appData)&&void 0!==r[t]?r[t]:n}var ls=is("doc"),cs=is("settings"),ss={locale:is("locale","zh-cn"),isYuque:is("isYuque",!1),isEnterprise:is("isEnterprise",!1),isSharePage:is("sharePage",!1),imageServiceDomains:is("imageServiceDomains",[]),editable:ls&&ls.abilities&&ls.abilities.update,disableDocumentCopy:cs&&cs.disableDocumentCopy,doc:is("doc",{}),share:is("share",{}),isOfficialTemplate:1===is("template",{}).type},us="abcdefghigklmnopqrstuvwxyz",ds=us+"0123456789"+us.toUpperCase();function fs(e){if((e=e||6)<2)throw new RangeError("n 不能小于 2");for(var t="",n=0;n<e;n++)t+=ds.charAt(Math.floor(Math.random()*ds.length));return t}function ps(e,t){if(void 0===e||!t)return"";var n=""+e,r="",o=n.indexOf(".")>=0;if("-"===n[0]&&(n=n.substr(1),r="-"),n.length>=t)return r+n;for(var a=t-n.length;a--;)n=o?n+"0":"0"+n;return r+n}function hs(e){return(e=e.map((function(e){return"command"===e.toLowerCase()&&(e=as.macos?"⌘":"Ctrl"),"shift"===e.toLowerCase()&&(e=as.macos?"⇧":"Shift"),e}))).join("")}function ms(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\t/g,"&nbsp;&nbsp;").replace(/\n/g,"<br>")}var vs=/^(?:\w+:)?\/\//,gs=/^(javascript:)?\/\//,bs=/^(?:\w+:)?\/\/(\S+)$/,ys=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,ws=/^[^\s\.]+\.\S{2,}$/;function ks(e){return function(e){if("string"!=typeof e)return!1;if(e.match(gs))return!1;var t=e.match(bs);if(!t)return!1;var n=t[1];return!(!n||!ys.test(n)&&!ws.test(n))}(e)?e:(t=e,(t=String(t).trim()).match(vs)&&!t.match(gs)?t:"http://"+t);var t}function xs(e){return/^([0-9]|\+|\-)+$/gi.test(e)}function Es(e){return!/\s/gi.test(e)&&/.+\@.+\..+/gi.test(e)}function Cs(e){if(null==e)return e;if(e=String(e),/^[-+]?\d{1,3}(,\d{3})*(\.(\d{0,9}))?$/.test(e))return e+"";var t=e.split("."),n=ie()(t,2),r=n[0],o=n[1];return r&&!/^-?\d{0,18}$/.test(r)||o&&!/^\d{0,9}$/.test(o)?"":e+""}function Os(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Os(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Os(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ss=_s(_s({},se.themeToken),{},{"@yuque-color-table-bg":"#FAFAFA","@yuque-color-table-darg":"#D8DAD9","@yuque-color-table-temp":"#F9EFCD","@yuque-color-table-header-border":"#E7E9E8"}),Rs=_s(_s({},se.themeDarkToken),{},{"@yuque-color-table-bg":"#141414","@yuque-color-table-darg":"#404040","@yuque-color-table-header-border":"#373838"});function js(e,t){if(!t)return t;if(t.toLowerCase().startsWith("@"))return"dark"===(null==e?void 0:e.current)?Rs[t]:Ss[t];if(t.toLowerCase().startsWith("fade")){var n=t.match(/^fade\((.*),(.*)\)$/),r=ie()(n,3),o=r[1],a=r[2];return Object(ue.fade)(js(e,o.trim()),(i=a.trim()).endsWith("%")?parseFloat(i.replace("%",""))/100:parseFloat(i))}var i;return(null==e?void 0:e.transformColor("light",null==e?void 0:e.current,t))||t}function As(e,t){return t?Vs()?null==e?void 0:e.transformColor(de.Theme.default,de.Theme.dark,t):null!=e&&e.getColor?null==e?void 0:e.getColor(t):t:t}function Ts(e,t){return null==e?void 0:e.onChange(t)}var Ls={input:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1648698045220" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12534" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css">@font-face { font-family: feedback-iconfont; src: url("//at.alicdn.com/t/font_1031158_u69w8yhxdu.woff2?t=1630033759944") format("woff2"), url("//at.alicdn.com/t/font_1031158_u69w8yhxdu.woff?t=1630033759944") format("woff"), url("//at.alicdn.com/t/font_1031158_u69w8yhxdu.ttf?t=1630033759944") format("truetype"); }\n</style></defs><path d="M791.990857 111.542857a119.771429 119.771429 0 0 1 120.027429 119.588572v557.787428a119.771429 119.771429 0 0 1-120.027429 119.515429H232.009143a119.771429 119.771429 0 0 1-120.027429-119.515429V231.094857a119.771429 119.771429 0 0 1 120.027429-119.515428z m0 79.725714H232.009143c-22.089143 0-40.009143 17.810286-40.009143 39.862858v557.787428c0 22.016 17.92 39.862857 40.009143 39.862857h559.981714c22.089143 0 40.009143-17.846857 40.009143-39.862857V231.094857c0-22.016-17.92-39.862857-40.009143-39.862857z m-95.817143 103.570286a39.862857 39.862857 0 0 1 0 79.725714l-144.201143-0.036571v326.582857a40.009143 40.009143 0 1 1-79.981714 0v-326.582857H327.789714a39.862857 39.862857 0 1 1 0-79.689143h368.347429z" fill="currentColor" p-id="12535"></path></svg>',textarea:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="列类型/创建时间备份-5" fill="currentColor">\n            <path d="M12.8011308,3.05058366 C13.4028418,3.05058366 13.890625,3.53836681 13.890625,4.14007782 C13.890625,4.74178883 13.4028418,5.22957198 12.8011308,5.22957198 L9.6245,5.22858366 L9.625,18.5171449 C9.625,19.1212064 9.13531145,19.6108949 8.53125,19.6108949 C7.92718855,19.6108949 7.4375,19.1212064 7.4375,18.5171449 L7.4375,5.22858366 L4.26136916,5.22957198 C3.65965815,5.22957198 3.171875,4.74178883 3.171875,4.14007782 C3.171875,3.53836681 3.65965815,3.05058366 4.26136916,3.05058366 L12.8011308,3.05058366 Z M17.7144942,3.05058366 L23.8480058,3.05058366 C24.4497168,3.05058366 24.9375,3.53836681 24.9375,4.14007782 C24.9375,4.74178883 24.4497168,5.22957198 23.8480058,5.22957198 L17.7144942,5.22957198 C17.1127832,5.22957198 16.625,4.74178883 16.625,4.14007782 C16.625,3.53836681 17.1127832,3.05058366 17.7144942,3.05058366 Z M15.0894942,9.58754864 L23.8480058,9.58754864 C24.4497168,9.58754864 24.9375,10.0753318 24.9375,10.6770428 C24.9375,11.2787538 24.4497168,11.766537 23.8480058,11.766537 L15.0894942,11.766537 C14.4877832,11.766537 14,11.2787538 14,10.6770428 C14,10.0753318 14.4877832,9.58754864 15.0894942,9.58754864 Z M15.0894942,16.1245136 L23.8480058,16.1245136 C24.4497168,16.1245136 24.9375,16.6122968 24.9375,17.2140078 C24.9375,17.8157188 24.4497168,18.3035019 23.8480058,18.3035019 L15.0894942,18.3035019 C14.4877832,18.3035019 14,17.8157188 14,17.2140078 C14,16.6122968 14.4877832,16.1245136 15.0894942,16.1245136 Z M4.15199416,22.6614786 L23.8480058,22.6614786 C24.4497168,22.6614786 24.9375,23.1492618 24.9375,23.7509728 C24.9375,24.3526838 24.4497168,24.8404669 23.8480058,24.8404669 L4.15199416,24.8404669 C3.55028315,24.8404669 3.0625,24.3526838 3.0625,23.7509728 C3.0625,23.1492618 3.55028315,22.6614786 4.15199416,22.6614786 Z" id="形状结合"></path>\n        </g>\n    </g>\n</svg>',number:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="列类型/创建时间备份-7" fill="currentColor">\n            <path d="M20.6750416,3.26767657 C21.2573839,3.42310756 21.6034639,4.02119096 21.4480329,4.60353322 L21.4474823,4.6055881 L20.341375,8.71528255 L24.5042558,8.71595331 C25.1059668,8.71595331 25.59375,9.20373646 25.59375,9.80544747 C25.59375,10.4071585 25.1059668,10.8949416 24.5042558,10.8949416 L19.755375,10.8942826 L18.231375,16.5602826 L23.1917558,16.5603113 C23.7934668,16.5603113 24.28125,17.0480944 24.28125,17.6498054 C24.28125,18.2515165 23.7934668,18.7392996 23.1917558,18.7392996 L17.644375,18.7392826 L16.2123555,24.067325 C16.0553946,24.6508315 15.4556447,24.997096 14.8718334,24.8412728 C14.2894911,24.6858419 13.9434111,24.0877585 14.0988421,23.5054162 C14.099025,23.5047311 14.0992085,23.5040461 14.0993927,23.5033613 L15.381375,18.7392826 L9.551375,18.7392826 L8.11860546,24.067325 C7.96164461,24.6508315 7.36189475,24.997096 6.77808336,24.8412728 C6.19574109,24.6858419 5.84966112,24.0877585 6.00509211,23.5054162 C6.00527498,23.5047311 6.00545851,23.5040461 6.00564271,23.5033613 L7.287375,18.7392826 L2.94886916,18.7392996 C2.34715815,18.7392996 1.859375,18.2515165 1.859375,17.6498054 C1.859375,17.0480944 2.34715815,16.5603113 2.94886916,16.5603113 L7.873375,16.5602826 L9.397375,10.8942826 L4.26136916,10.8949416 C3.65965815,10.8949416 3.171875,10.4071585 3.171875,9.80544747 C3.171875,9.20373646 3.65965815,8.71595331 4.26136916,8.71595331 L9.983375,8.71528255 L11.2407695,4.04162442 C11.3977304,3.45811789 11.9974803,3.11185346 12.5812916,3.26767657 C13.1636339,3.42310756 13.5097139,4.02119096 13.3542829,4.60353322 L13.3537323,4.6055881 L12.247375,8.71528255 L18.077375,8.71528255 L19.3345195,4.04162442 C19.4914804,3.45811789 20.0912303,3.11185346 20.6750416,3.26767657 Z M17.491375,10.8942826 L11.661375,10.8942826 L10.137375,16.5602826 L15.967375,16.5602826 L17.491375,10.8942826 Z" id="形状结合"></path>\n        </g>\n    </g>\n</svg>',select:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组" fill="currentColor" fill-rule="nonzero">\n            <g id="列类型/创建时间备份-2">\n                <path d="M14,1.74319066 C20.7654882,1.74319066 26.25,7.20636196 26.25,13.9455253 C26.25,20.6846886 20.7654882,26.1478599 14,26.1478599 C7.23451181,26.1478599 1.75,20.6846886 1.75,13.9455253 C1.75,7.20636196 7.23451181,1.74319066 14,1.74319066 Z M14,3.92217899 C8.44263471,3.92217899 3.9375,8.40978399 3.9375,13.9455253 C3.9375,19.4812666 8.44263471,23.9688716 14,23.9688716 C19.5573653,23.9688716 24.0625,19.4812666 24.0625,13.9455253 C24.0625,8.40978399 19.5573653,3.92217899 14,3.92217899 Z M20.1351244,12.5123654 C20.5210948,12.960912 20.4769121,13.6320816 20.0411047,14.0269545 L20.0164906,14.0486044 L16.0954854,17.3963887 C14.8694331,18.4432016 13.0634427,18.4445539 11.8363638,17.406335 L11.799358,17.3745556 L7.97507309,14.0413267 C7.52047052,13.6450973 7.4744045,12.9567956 7.87218174,12.5039619 C8.26272667,12.0593615 8.93591936,12.0070446 9.39052416,12.3802966 L9.41555191,12.4014709 L13.2398368,15.7346997 C13.6406665,16.084061 14.2342507,16.0941659 14.646362,15.7631125 L14.6718793,15.7419775 L18.5928844,12.3941932 C19.0515221,12.0026048 19.7420064,12.0555124 20.1351244,12.5123654 Z" id="形状结合"></path>\n            </g>\n        </g>\n    </g>\n</svg>',multiSelect:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="1.line/5.数据表编辑器/多选" fill="currentColor">\n            <path d="M25.6007563,19.9762626 C25.8423809,19.9762626 26.0382563,20.1713759 26.0382563,20.4120603 C26.0382563,20.53324 25.9876035,20.6489479 25.898458,20.731406 L23.7889838,22.6826348 C23.5791566,22.8767215 23.2545567,22.8767215 23.0447295,22.6826348 L20.9352553,20.731406 C20.7581966,20.5676296 20.7479478,20.2918867 20.9123639,20.115517 C20.9951441,20.0267184 21.111304,19.9762626 21.232957,19.9762626 L25.6007563,19.9762626 Z M17.609375,20.3735409 C18.2134364,20.3735409 18.703125,20.861324 18.703125,21.463035 C18.703125,22.064746 18.2134364,22.5525292 17.609375,22.5525292 L2.953125,22.5525292 C2.34906355,22.5525292 1.859375,22.064746 1.859375,21.463035 C1.859375,20.861324 2.34906355,20.3735409 2.953125,20.3735409 L17.609375,20.3735409 Z M25.6068867,12.6381323 C25.8485113,12.6381323 26.0443867,12.8332456 26.0443867,13.07393 C26.0443867,13.1951096 25.9937339,13.3108176 25.9045884,13.3932756 L23.7951142,15.3445045 C23.5852871,15.5385912 23.2606871,15.5385912 23.0508599,15.3445045 L20.9413857,13.3932756 C20.764327,13.2294993 20.7540782,12.9537564 20.9184943,12.7773866 C21.0012745,12.6885881 21.1174344,12.6381323 21.2390874,12.6381323 L25.6068867,12.6381323 Z M17.609375,12.9649805 C18.2134364,12.9649805 18.703125,13.4527637 18.703125,14.0544747 C18.703125,14.6561857 18.2134364,15.1439689 17.609375,15.1439689 L2.953125,15.1439689 C2.34906355,15.1439689 1.859375,14.6561857 1.859375,14.0544747 C1.859375,13.4527637 2.34906355,12.9649805 2.953125,12.9649805 L17.609375,12.9649805 Z M25.6007563,5.26809142 C25.8423809,5.26809142 26.0382563,5.46320468 26.0382563,5.70388909 C26.0382563,5.82506876 25.9876035,5.9407767 25.898458,6.02323475 L23.7889838,7.97446361 C23.5791566,8.16855028 23.2545567,8.16855028 23.0447295,7.97446361 L20.9352553,6.02323475 C20.7581966,5.85945839 20.7479478,5.58371549 20.9123639,5.40734575 C20.9951441,5.31854719 21.111304,5.26809142 21.232957,5.26809142 L25.6007563,5.26809142 Z M17.609375,5.55642023 C18.2134364,5.55642023 18.703125,6.04420339 18.703125,6.6459144 C18.703125,7.24762541 18.2134364,7.73540856 17.609375,7.73540856 L2.953125,7.73540856 C2.34906355,7.73540856 1.859375,7.24762541 1.859375,6.6459144 C1.859375,6.04420339 2.34906355,5.55642023 2.953125,5.55642023 L17.609375,5.55642023 Z" id="形状"></path>\n        </g>\n    </g>\n</svg>',date:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="列类型/创建时间备份-4" fill="currentColor">\n            <path d="M21.546875,3.828125 C23.4798716,3.828125 25.046875,5.39512838 25.046875,7.328125 L25.046875,21.546875 C25.046875,23.4798716 23.4798716,25.046875 21.546875,25.046875 L6.453125,25.046875 C4.52012838,25.046875 2.953125,23.4798716 2.953125,21.546875 L2.953125,7.328125 C2.953125,5.39512838 4.52012838,3.828125 6.453125,3.828125 L21.546875,3.828125 Z M21.546875,6.015625 L6.453125,6.015625 C5.73940317,6.015625 5.15873829,6.58530954 5.14104061,7.29476838 L5.140625,7.328125 L5.140625,21.546875 C5.140625,22.2605968 5.71030954,22.8412617 6.41976838,22.8589594 L6.453125,22.859375 L21.546875,22.859375 C22.2605968,22.859375 22.8412617,22.2896905 22.8589594,21.5802316 L22.859375,21.546875 L22.859375,7.328125 C22.859375,6.61440317 22.2896905,6.03373829 21.5802316,6.01604061 L21.546875,6.015625 Z" id="矩形" fill-rule="nonzero"></path>\n            <rect id="矩形" x="5.140625" y="9.84375" width="17.71875" height="2.1875"></rect>\n            <rect id="矩形" x="8.421875" y="1.859375" width="2.1875" height="6.125" rx="1.09375"></rect>\n            <rect id="矩形备份" x="17.5" y="1.859375" width="2.1875" height="6.125" rx="1.09375"></rect>\n        </g>\n    </g>\n</svg>',createdAt:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组" fill="currentColor" fill-rule="nonzero">\n            <g id="列类型/创建时间">\n                <path d="M21.3828125,16.5058366 C21.9868739,16.5058366 22.4765625,16.9955251 22.4765625,17.5995866 L22.476,20.2638366 L25.1605058,20.2645914 C25.7622168,20.2645914 26.25,20.7523746 26.25,21.3540856 C26.25,21.9557966 25.7622168,22.4435798 25.1605058,22.4435798 L22.476,22.4428366 L22.4765625,24.9996352 C22.4765625,25.6036967 21.9868739,26.0933852 21.3828125,26.0933852 C20.7787511,26.0933852 20.2890625,25.6036967 20.2890625,24.9996352 L20.289,22.4428366 L17.7144942,22.4435798 C17.1127832,22.4435798 16.625,21.9557966 16.625,21.3540856 C16.625,20.7523746 17.1127832,20.2645914 17.7144942,20.2645914 L20.289,20.2638366 L20.2890625,17.5995866 C20.2890625,16.9955251 20.7787511,16.5058366 21.3828125,16.5058366 Z M18.59375,1.85214008 C19.1978114,1.85214008 19.6875,2.34182863 19.6875,2.94589008 L19.687125,3.81314008 L21.546875,3.81322957 C23.4798716,3.81322957 25.046875,5.37413566 25.046875,7.29961089 L25.046875,14.2723735 C25.046875,14.8740846 24.5571864,15.3618677 23.953125,15.3618677 C23.3893343,15.3618677 22.9251751,14.9369544 22.865793,14.3910859 L22.859375,14.2723735 L22.859375,11.9844358 L5.140625,11.9844358 L5.140625,21.463035 C5.140625,22.1739797 5.71030954,22.7523852 6.41976838,22.770014 L6.453125,22.770428 L14.218125,22.7702296 C14.7714156,22.8304252 15.203125,23.2949543 15.203125,23.8599222 C15.203125,24.4616332 14.7134364,24.9494163 14.109375,24.9494163 L6.453125,24.9494163 C4.52012838,24.9494163 2.953125,23.3885103 2.953125,21.463035 L2.953125,7.29961089 C2.953125,5.37413566 4.52012838,3.81322957 6.453125,3.81322957 L8.421125,3.81314008 L8.421875,2.94589008 C8.421875,2.34182863 8.91156355,1.85214008 9.515625,1.85214008 C10.1196864,1.85214008 10.609375,2.34182863 10.609375,2.94589008 L10.609125,3.81314008 L17.499125,3.81314008 L17.5,2.94589008 C17.5,2.34182863 17.9896886,1.85214008 18.59375,1.85214008 Z M8.421125,5.99214008 L6.453125,5.9922179 C5.73940317,5.9922179 5.15873829,6.55968577 5.14104061,7.26638407 L5.140625,9.80544747 L22.859375,9.80544747 L22.859375,7.29961089 C22.859375,6.58866619 22.2896905,6.01026071 21.5802316,5.99263189 L19.687125,5.99214008 L19.6875,6.85955739 C19.6875,7.46361884 19.1978114,7.95330739 18.59375,7.95330739 C17.9896886,7.95330739 17.5,7.46361884 17.5,6.85955739 L17.499125,5.99214008 L10.609125,5.99214008 L10.609375,6.85955739 C10.609375,7.46361884 10.1196864,7.95330739 9.515625,7.95330739 C8.91156355,7.95330739 8.421875,7.46361884 8.421875,6.85955739 L8.421125,5.99214008 Z" id="形状结合"></path>\n            </g>\n        </g>\n    </g>\n</svg>',checkbox:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组" fill="currentColor" fill-rule="nonzero">\n            <g id="列类型/创建时间备份-6">\n                <path d="M21.65625,3.05058366 C23.4684343,3.05058366 24.9375,4.51393311 24.9375,6.31906615 L24.9375,6.31906615 L24.9375,21.5719844 C24.9375,23.3771175 23.4684343,24.8404669 21.65625,24.8404669 L21.65625,24.8404669 L6.34375,24.8404669 C4.53156566,24.8404669 3.0625,23.3771175 3.0625,21.5719844 L3.0625,21.5719844 L3.0625,6.31906615 C3.0625,4.51393311 4.53156566,3.05058366 6.34375,3.05058366 L6.34375,3.05058366 Z M21.65625,5.22957198 L6.34375,5.22957198 C5.73968855,5.22957198 5.25,5.71735514 5.25,6.31906615 L5.25,6.31906615 L5.25,21.5719844 C5.25,22.1736954 5.73968855,22.6614786 6.34375,22.6614786 L6.34375,22.6614786 L21.65625,22.6614786 C22.2603114,22.6614786 22.75,22.1736954 22.75,21.5719844 L22.75,21.5719844 L22.75,6.31906615 C22.75,5.71735514 22.2603114,5.22957198 21.65625,5.22957198 L21.65625,5.22957198 Z M19.8014462,10.1213767 C20.2225451,10.5373854 20.2329594,11.2099164 19.8306138,11.6385804 L19.8078366,11.662141 L13.7377192,17.758702 C12.889785,18.5963866 11.526659,18.6004455 10.6736993,17.7750986 L10.6441535,17.745971 L8.08278836,15.173403 C7.65742072,14.7461749 7.6602818,14.0563513 8.08917876,13.6326388 C8.51027759,13.2166301 9.18549867,13.2118136 9.61249802,13.6161218 L9.63596164,13.6390043 L12.1973268,16.2115722 L18.2546634,10.1277423 C18.680031,9.70051417 19.3725493,9.69766422 19.8014462,10.1213767 Z" id="形状结合"></path>\n            </g>\n        </g>\n    </g>\n</svg>',image:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="28" height="28"></rect>\n    </defs>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="列类型/创建时间备份-12">\n            <g id="icon/冻结到行">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <path d="M21.546875,2.953125 C23.4798716,2.953125 25.046875,4.52012838 25.046875,6.453125 L25.046875,21.546875 C25.046875,23.4798716 23.4798716,25.046875 21.546875,25.046875 L6.453125,25.046875 C4.52012838,25.046875 2.953125,23.4798716 2.953125,21.546875 L2.953125,6.453125 C2.953125,4.52012838 4.52012838,2.953125 6.453125,2.953125 L21.546875,2.953125 Z M21.546875,5.140625 L6.453125,5.140625 C5.73940317,5.140625 5.15873829,5.71030954 5.14104061,6.41976838 L5.140625,6.453125 L5.140625,21.546875 C5.140625,22.2605968 5.71030954,22.8412617 6.41976838,22.8589594 L6.453125,22.859375 L21.546875,22.859375 C22.2605968,22.859375 22.8412617,22.2896905 22.8589594,21.5802316 L22.859375,21.546875 L22.859375,6.453125 C22.859375,5.73940317 22.2896905,5.15873829 21.5802316,5.14104061 L21.546875,5.140625 Z" id="矩形" fill="currentColor" fill-rule="nonzero" mask="url(#mask-2)"></path>\n            </g>\n            <g id="编组" transform="translate(3.062417, 8.312500)" fill="currentColor">\n                <path d="M4.04502897,6.39122576 C4.62713096,5.57981087 5.75679959,5.39391603 6.56821448,5.97601802 C6.71376092,6.08043177 6.84290277,6.20583428 6.9514726,6.34805813 L6.98342222,6.39122576 L9.54139926,9.95689072 C9.89351144,10.4477138 9.78106407,11.1310478 9.29024104,11.4831599 C8.80818271,11.8289844 8.14042741,11.7266926 7.78314887,11.2579333 L7.76397184,11.2320017 L5.51422368,8.09604687 L1.98254677,13.018938 C1.63672231,13.5009964 0.971399767,13.6180718 0.482752841,13.2885155 L0.456277571,13.2700963 C-0.0257807624,12.9242718 -0.142856193,12.2589493 0.186700118,11.7703023 L0.205119348,11.7438271 L4.04502897,6.39122576 Z" id="路径-3" fill-rule="nonzero"></path>\n                <path d="M12.6413671,3.17304273 C13.2243148,2.36223526 14.3541767,2.17751849 15.1649842,2.76046626 C15.3094654,2.86434416 15.4377412,2.98892305 15.5457255,3.13011691 L15.5775079,3.17296943 L21.7396647,11.7428564 C22.092313,12.2332944 21.9806124,12.9167508 21.4901744,13.2693991 C21.0084942,13.6157501 20.3406275,13.514188 19.982837,13.0458194 L19.9636317,13.0199087 L14.1094581,4.87834375 L9.54073397,11.2329281 C9.19440704,11.7146255 8.52896277,11.8310071 8.04065976,11.5009415 L8.01420371,11.4824946 C7.53250624,11.1361677 7.41612464,10.4707234 7.7461903,9.98242042 L7.76463713,9.95596437 L12.6413671,3.17304273 Z" id="路径-3备份" fill-rule="nonzero"></path>\n                <path d="M7.85593656,3.0625 C8.70162258,3.0625 9.38718656,2.37693602 9.38718656,1.53125 C9.38718656,0.685563977 8.70162258,0 7.85593656,0 C7.01025053,0 6.32468656,0.685563977 6.32468656,1.53125 C6.32468656,2.37693602 7.01025053,3.0625 7.85593656,3.0625 Z" id="椭圆形"></path>\n            </g>\n        </g>\n    </g>\n</svg>',mention:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组" fill="currentColor" fill-rule="nonzero">\n            <g id="编组" transform="translate(0.000000, -0.109375)">\n                <path d="M12.7124973,24.8296623 L12.008776,24.8281395 L11.6686189,24.8259486 L11.2476388,24.8212671 L10.9966264,24.8172019 L10.7991495,24.8132605 L10.5282863,24.8067685 L10.2532009,24.7989484 L9.98227198,24.79001 L9.80493941,24.7833933 L9.63022574,24.7762343 L9.45812204,24.7685193 L9.28861935,24.7602344 L9.12170875,24.7513658 L8.87618341,24.7369385 L8.71571386,24.7265505 L8.55780508,24.7155306 L8.32572378,24.6977857 L8.17417779,24.6851257 L8.02516126,24.6717856 L7.87866526,24.6577515 L7.73468082,24.6430096 L7.59319902,24.6275462 L7.4542109,24.6113475 L7.31770752,24.5943997 L7.18367993,24.576689 L7.0521192,24.5582016 L6.92301638,24.5389237 L6.79636251,24.5188415 L6.67214866,24.4979414 L6.55036589,24.4762093 C6.51017582,24.4688252 6.47038943,24.4613001 6.43100525,24.4536317 L6.31405778,24.4301946 C6.23689522,24.4142804 6.16133547,24.397784 6.08736663,24.3806871 L5.97760505,24.3545891 C5.94141459,24.3457381 5.90562037,24.3367347 5.87022088,24.3275765 L5.76520517,24.2996356 C5.73059368,24.2901657 5.69637545,24.2805387 5.66254897,24.2707525 L5.56224335,24.2409135 C5.46311003,24.2105919 5.36748915,24.1788157 5.27534046,24.1455229 L5.18434767,24.1117223 C4.86991338,23.9916346 4.59784905,23.852715 4.36642895,23.692303 L4.3295,23.6662344 L4.31520521,23.6570401 C3.81369919,23.3247256 3.47096353,22.8663774 3.27111044,22.3308179 L3.25221533,22.2787502 C3.09448372,21.8315866 3.05459004,21.4654555 3.05444298,20.9684802 L3.05489681,20.8484749 C3.05489681,19.2245127 4.24833756,17.5129419 6.1747879,16.2409488 C8.21726293,14.8923472 10.9357523,14.1110867 13.9899576,14.1093778 L14.0019854,14.1093778 C17.0561907,14.1110867 19.7746801,14.8923472 21.8171551,16.2409488 C23.7436054,17.5129419 24.9370462,19.2245127 24.9370462,20.8484749 L24.9370462,20.8484749 L24.9375,20.9684802 C24.9373529,21.4654555 24.8974593,21.8315866 24.7397277,22.2787502 L24.7397277,22.2787502 L24.7208325,22.3308179 C24.5209795,22.8663774 24.1782438,23.3247256 23.6767378,23.6570401 L23.6767378,23.6570401 L23.662443,23.6662344 L23.625514,23.692303 C23.3940939,23.852715 23.1220296,23.9916346 22.8075953,24.1117223 L22.8075953,24.1117223 L22.7166025,24.1455229 C22.6244538,24.1788157 22.528833,24.2105919 22.4296996,24.2409135 L22.4296996,24.2409135 L22.329394,24.2707525 C22.2955675,24.2805387 22.2613493,24.2901657 22.2267378,24.2996356 L22.2267378,24.2996356 L22.1217221,24.3275765 C22.0863226,24.3367347 22.0505284,24.3457381 22.0143379,24.3545891 L22.0143379,24.3545891 L21.9045764,24.3806871 C21.8306075,24.397784 21.7550478,24.4142804 21.6778852,24.4301946 L21.6778852,24.4301946 L21.5609377,24.4536317 C21.5215536,24.4613001 21.4817672,24.4688252 21.4415771,24.4762093 L21.4415771,24.4762093 L21.3197943,24.4979414 L21.1955805,24.5188415 L21.0689266,24.5389237 L20.9398238,24.5582016 L20.8082631,24.576689 L20.6742355,24.5943997 L20.5377321,24.6113475 L20.398744,24.6275462 L20.2572622,24.6430096 L20.1132777,24.6577515 L19.9667817,24.6717856 L19.8177652,24.6851257 L19.6662192,24.6977857 L19.4341379,24.7155306 L19.2762291,24.7265505 L19.1157596,24.7369385 L18.8702342,24.7513658 L18.7033236,24.7602344 L18.5338209,24.7685193 L18.3617172,24.7762343 L18.1870036,24.7833933 L18.009671,24.79001 L17.7387421,24.7989484 L17.4636567,24.8067685 L17.1927935,24.8132605 L16.9953166,24.8172019 L16.7443042,24.8212671 L16.323324,24.8259486 L15.983167,24.8281395 L15.2794457,24.8296623 L14.0109133,24.8281259 L13.9810297,24.8281259 L12.7124973,24.8296623 Z M14.1814973,22.6407303 L15.2034993,22.6421579 L15.8462245,22.6411792 L16.2425146,22.6389977 L16.6574734,22.6347229 L16.854677,22.63179 L17.2865434,22.6230282 L17.5422598,22.6162956 L17.7485679,22.6100634 L17.9752392,22.6021506 L18.1973533,22.5931896 L18.342863,22.5866378 L18.4862954,22.5796271 L18.6975037,22.5682568 L18.9039214,22.5558696 L19.1054785,22.542475 L19.302105,22.5280825 L19.4304156,22.5179378 L19.5564829,22.5073564 L19.7413324,22.4906721 L19.8617008,22.4790116 L20.0379048,22.4607216 L20.2088282,22.4414809 L20.3198088,22.4281301 L20.4283907,22.4143638 L20.5867203,22.3929413 L20.6892143,22.3781482 L20.789237,22.3629494 L20.8867674,22.3473476 L20.981785,22.3313455 L21.1195544,22.3065982 L21.251553,22.2809661 L21.3363115,22.2633912 L21.4184535,22.2454301 L21.4979581,22.2270855 L21.5748046,22.2083603 L21.6489723,22.1892573 L21.7204403,22.1697792 L21.7891881,22.1499288 L21.7891881,22.1499288 L21.8225354,22.1398649 L21.8871637,22.1194614 L21.9490199,22.0986927 C21.9590971,22.0952009 21.9690579,22.0916941 21.9789019,22.0881722 L21.9789019,22.0881722 L22.036561,22.0668608 L22.0913959,22.0451911 L22.1433861,22.0231659 C22.2445078,21.978762 22.3284364,21.932242 22.3944251,21.8837064 L22.3944251,21.8837064 L22.4250886,21.861153 L22.4572459,21.8407858 L22.4794738,21.8259884 C22.573155,21.7604057 22.6329768,21.6753296 22.6768048,21.5510788 C22.7261942,21.4110617 22.7457159,21.2637335 22.7493352,21.0415086 L22.7493352,21.0415086 L22.7499751,20.9598563 L22.7498424,20.9164914 L22.7491264,20.8168001 C22.7287051,20.0418029 21.9639821,18.9592172 20.6118341,18.0664234 C18.9328187,16.9578063 16.6305704,16.296875 13.991943,16.296875 L13.995443,16.2963778 L13.5862118,16.3023364 C11.120757,16.3676868 8.97075507,17.0161545 7.38010891,18.0664234 C6.0279609,18.9592172 5.26323789,20.0418029 5.24281663,20.8168001 L5.24210055,20.9164914 L5.24196789,20.9598563 L5.24260775,21.0415086 C5.24622712,21.2637335 5.26574883,21.4110617 5.31513818,21.5510788 C5.35896615,21.6753296 5.41878797,21.7604057 5.51246915,21.8259884 L5.53469707,21.8407858 L5.56685435,21.861153 L5.5975179,21.8837064 C5.66350656,21.932242 5.74743514,21.978762 5.84855688,22.0231659 L5.90054706,22.0451911 L5.95538203,22.0668608 L6.01304104,22.0881722 C6.02288506,22.0916941 6.03284588,22.0952009 6.04292308,22.0986927 L6.10477926,22.1194614 L6.16940762,22.1398649 L6.20275489,22.1499288 L6.20275489,22.1499288 L6.27150264,22.1697792 L6.34297072,22.1892573 L6.41713838,22.2083603 L6.49398488,22.2270855 L6.57348948,22.2454301 L6.65563144,22.2633912 L6.74039001,22.2809661 L6.87238863,22.3065982 L7.01015796,22.3313455 L7.10517554,22.3473476 L7.20270603,22.3629494 L7.30272867,22.3781482 L7.40522272,22.3929413 L7.56355232,22.4143638 L7.67213415,22.4281301 L7.78311479,22.4414809 L7.95403815,22.4607216 L8.13024215,22.4790116 L8.25061061,22.4906721 L8.43546011,22.5073564 L8.56152741,22.5179378 L8.68983795,22.5280825 L8.88646446,22.542475 L9.08802157,22.5558696 L9.29443928,22.5682568 L9.50564759,22.5796271 L9.64907999,22.5866378 L9.79458969,22.5931896 L10.0167038,22.6021506 L10.2433751,22.6100634 L10.4496832,22.6162956 L10.7053996,22.6230282 L11.137266,22.63179 L11.3344696,22.6347229 L11.7494284,22.6389977 L12.1457184,22.6411792 L12.7884437,22.6421579 L13.8104456,22.6407303 L14.1814973,22.6407303 Z M14,2.625 C16.7786826,2.625 19.03125,4.87756735 19.03125,7.65625 C19.03125,10.4349326 16.7786826,12.6875 14,12.6875 C11.2213174,12.6875 8.96875,10.4349326 8.96875,7.65625 C8.96875,4.87756735 11.2213174,2.625 14,2.625 Z M14,4.8125 C12.4294402,4.8125 11.15625,6.08569024 11.15625,7.65625 C11.15625,9.22680976 12.4294402,10.5 14,10.5 C15.5705598,10.5 16.84375,9.22680976 16.84375,7.65625 C16.84375,6.08569024 15.5705598,4.8125 14,4.8125 Z" id="形状结合"></path>\n            </g>\n        </g>\n    </g>\n</svg>',file:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="28" height="28"></rect>\n    </defs>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组-2">\n            <mask id="mask-2" fill="white">\n                <use xlink:href="#path-1"></use>\n            </mask>\n            <g id="蒙版"></g>\n            <path d="M16.7086885,3.41486503 C18.5500637,1.58030024 21.528306,1.58030024 23.3696813,3.41486503 C25.1870627,5.22552475 25.2106311,8.15532876 23.4362931,9.99495935 L23.3696813,10.0626635 L13.6625868,19.7338554 C12.5402633,20.852028 10.725016,20.852028 9.60269238,19.7338554 C8.49377163,18.6290361 8.4793908,16.8413429 9.56204749,15.7188463 L9.60269238,15.6775349 L16.6780086,8.62838737 C17.1059352,8.20204352 17.7984582,8.20332657 18.224802,8.63125314 C18.6433942,9.05139923 18.6497681,9.72660754 18.2448546,10.1545307 L18.2219363,10.1780466 L11.1448503,17.2289639 C10.8815589,17.4932327 10.8823512,17.9209048 11.14662,18.1841962 C11.4086143,18.4452214 11.8283201,18.4517471 12.0981999,18.2037731 L12.1186592,18.1841962 L21.8323158,8.5064421 C22.8085773,7.5265564 22.8056393,5.94078575 21.8257536,4.96452423 C20.848498,3.9908831 19.2743025,3.98052521 18.2843461,4.93345057 L18.2526161,4.96452423 L7.41208863,15.7649984 C5.75111285,17.4321403 5.75611143,20.1301127 7.42325327,21.7910885 C9.08478863,23.4464785 11.7618993,23.4630324 13.4437462,21.8407502 L13.4944045,21.7910885 L21.6919891,13.6238233 C22.1199157,13.1974794 22.8124387,13.1987625 23.2387826,13.6266891 C23.6573747,14.0468351 23.6637487,14.7220434 23.2588351,15.1499666 L23.2359168,15.1734825 L15.0383322,23.3407477 C12.5064021,25.8633132 8.41125571,25.8633132 5.87932562,23.3407477 C3.38156058,20.8522208 3.34916878,16.8255692 5.78777589,14.2972255 L5.87932562,14.2041746 L16.7086885,3.41486503 Z" id="路径-12" fill="currentColor" fill-rule="nonzero" mask="url(#mask-2)"></path>\n        </g>\n    </g>\n</svg>',link:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="28" height="28"></rect>\n    </defs>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="icon/链接">\n            <mask id="mask-2" fill="white">\n                <use xlink:href="#path-1"></use>\n            </mask>\n            <g id="蒙版"></g>\n            <path d="M19.6875,15.412318 C20.2813231,15.412318 20.7646175,15.8855476 20.7808298,16.4754534 L20.78125,16.506068 L20.78125,21.2675971 C20.78125,24.9879225 17.7430792,28 14,28 C10.2943516,28 7.27958391,25.0478628 7.21965912,21.3789921 L7.21875,21.2675971 L7.21875,16.506068 C7.21875,15.9020065 7.70843855,15.412318 8.3125,15.412318 C8.90632312,15.412318 9.38961753,15.8855476 9.4058298,16.4754534 L9.40625,16.506068 L9.40625,21.2675971 C9.40625,23.7755557 11.4608401,25.8125 14,25.8125 C16.5137683,25.8125 18.5526097,23.8160909 18.5931352,21.342693 L18.59375,21.2675971 L18.59375,16.506068 C18.59375,15.9020065 19.0834386,15.412318 19.6875,15.412318 Z M14,7.0386699 C14.5938231,7.0386699 15.0771175,7.51189952 15.0933298,8.10180531 L15.09375,8.1324199 L15.09375,19.9449199 C15.09375,20.5489813 14.6040614,21.0386699 14,21.0386699 C13.4061769,21.0386699 12.9228825,20.5654403 12.9066702,19.9755345 L12.90625,19.9449199 L12.90625,8.1324199 C12.90625,7.52835846 13.3959386,7.0386699 14,7.0386699 Z M14,3.90798505e-14 C17.7056484,3.90798505e-14 20.7204161,2.95213717 20.7803409,6.62100793 L20.78125,6.73240291 L20.78125,11.493932 C20.78125,12.0979935 20.2915614,12.587682 19.6875,12.587682 C19.0936769,12.587682 18.6103825,12.1144524 18.5941702,11.5245466 L18.59375,11.493932 L18.59375,6.73240291 C18.59375,4.22444429 16.5391599,2.1875 14,2.1875 C11.4862317,2.1875 9.44739026,4.1839091 9.40686481,6.65730702 L9.40625,6.73240291 L9.40625,11.493932 C9.40625,12.0979935 8.91656145,12.587682 8.3125,12.587682 C7.71867688,12.587682 7.23538247,12.1144524 7.2191702,11.5245466 L7.21875,11.493932 L7.21875,6.73240291 C7.21875,3.01207751 10.2569208,3.90798505e-14 14,3.90798505e-14 Z" id="形状结合" fill="currentColor" fill-rule="nonzero" mask="url(#mask-2)" transform="translate(14.000000, 14.000000) rotate(45.000000) translate(-14.000000, -14.000000) "></path>\n        </g>\n    </g>\n</svg>',email:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组" fill="currentColor" fill-rule="nonzero">\n            <g id="列类型/创建时间备份-10">\n                <path d="M22.96875,4.375 L5.03125,4.375 C3.21906566,4.375 1.75,5.84406566 1.75,7.65625 L1.75,20.34375 C1.75,22.1559343 3.21906566,23.625 5.03125,23.625 L22.96875,23.625 C24.7809343,23.625 26.25,22.1559343 26.25,20.34375 L26.25,7.65625 C26.25,5.84406566 24.7809343,4.375 22.96875,4.375 Z M5.03125,6.5625 L22.96875,6.5625 C23.5728114,6.5625 24.0625,7.05218855 24.0625,7.65625 L24.0625,20.34375 C24.0625,20.9478114 23.5728114,21.4375 22.96875,21.4375 L5.03125,21.4375 C4.42718855,21.4375 3.9375,20.9478114 3.9375,20.34375 L3.9375,7.65625 C3.9375,7.05218855 4.42718855,6.5625 5.03125,6.5625 Z" id="矩形"></path>\n                <path d="M23.9744212,8.56875766 C24.4662719,8.21808237 25.1492741,8.33252763 25.4999494,8.82437829 C25.8443626,9.3074459 25.7401185,9.97489919 25.2703164,10.3308054 L25.2443288,10.3499065 L15.8567421,17.042984 C14.7256938,17.8493888 13.2112278,17.8553254 12.0749067,17.0626527 L12.0340009,17.0336541 L2.75133169,10.3467965 C2.26119861,9.99372455 2.15008862,9.31017182 2.50316057,8.82003875 C2.84992766,8.33865805 3.51547802,8.22288476 4.00347914,8.55339662 L4.02991831,8.57186763 L13.3125875,15.2587253 C13.6835397,15.5259442 14.1803566,15.5336522 14.5586859,15.2812529 L14.5868346,15.2618352 L23.9744212,8.56875766 Z" id="路径-53"></path>\n            </g>\n        </g>\n    </g>\n</svg>',phone:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组" fill="currentColor" fill-rule="nonzero">\n            <g id="列类型/创建时间备份-11">\n                <path d="M7.26119936,3.11913953 C5.05083351,3.69577341 3.23026751,5.59333688 3.09509318,8.1581331 C2.98910295,10.1691906 3.60746236,12.2842753 4.8035301,14.4249728 C5.7856499,16.1827506 7.13480774,17.9093738 8.64804856,19.4358223 C11.3448982,22.1562104 16.6322271,24.817048 19.3046875,24.817048 C20.6541749,24.817048 21.9275652,24.255313 22.9768837,23.3038128 C23.8889213,22.476796 24.5812926,21.3899676 24.870985,20.349022 C25.4003332,18.4469258 24.2225816,16.5637659 22.3215053,15.3458613 C21.9850457,15.130312 21.6230611,14.9371977 21.2493917,14.7716889 L21.1369542,14.7228696 C19.7086563,14.1151126 18.1316168,13.9134453 17.1652857,14.4015852 L17.1010042,14.434726 C16.6311499,14.6818826 16.1952195,15.0197076 15.7917744,15.4439111 L15.7532812,15.4846537 L15.7458618,15.4816124 C14.8126547,15.0919735 14.0924717,14.6628841 13.5849053,14.2039049 L13.5499954,14.1718672 C13.073332,13.7279944 12.6147536,13.037106 12.1888303,12.0975599 L12.1643594,12.0431595 L12.1953915,12.0113605 C12.7041816,11.4835786 13.0600919,10.9333832 13.2525208,10.3525408 C13.6740075,9.08029271 13.1971323,7.14146877 12.1467582,5.62356082 C10.9960575,3.9606697 8.79448441,2.71914054 7.26119936,3.11913953 Z M8.16029377,5.25836839 C8.37797698,5.3115565 8.63233872,5.41647727 8.89678751,5.5656074 C9.46428168,5.88563338 10.0026496,6.36449325 10.3456775,6.86020693 C11.0414177,7.8656293 11.3530861,9.13277445 11.1752105,9.66968804 C11.0591587,10.0199876 10.7468506,10.4289625 10.2130214,10.8769919 L10.1653433,10.9166247 C9.80318859,11.2148278 9.67270406,11.7101161 9.84119053,12.1470316 C10.4725066,13.7841472 11.2203924,15.0086724 12.1145728,15.8172567 C12.9833813,16.6028977 14.1878319,17.2610914 15.7271417,17.8102098 C16.1846996,17.9734346 16.695502,17.8163249 16.9810198,17.4245491 C17.3623913,16.901247 17.7553761,16.5466639 18.1546637,16.3449647 C18.1930964,16.3255506 18.2592531,16.3117102 18.3481521,16.3053049 L18.3944737,16.3027304 L18.4444472,16.3014467 C18.4789495,16.3010328 18.5157942,16.3015138 18.5547968,16.3029588 L18.6148959,16.305858 C18.6354531,16.3070711 18.6565267,16.3085338 18.6780936,16.3102547 L18.7442512,16.3162008 L18.8132306,16.323748 C18.8249546,16.3251422 18.8367904,16.3266052 18.8487351,16.3281381 L18.9216875,16.3381838 C18.971163,16.3454519 19.022289,16.3538735 19.0748809,16.3635176 L19.1548452,16.3789093 L19.23687,16.3961862 C19.2507049,16.3992257 19.2646198,16.4023459 19.2786119,16.4055479 C19.917467,16.5517448 20.6033984,16.8359094 21.1382273,17.1785419 C22.3251958,17.9389609 22.9802254,18.986317 22.7629836,19.7669274 C22.3573398,21.2245187 20.7984807,22.6380597 19.3046875,22.6380597 C17.2823392,22.6380597 12.5219566,20.2424068 10.2045499,17.9047735 C7.11743413,14.790713 5.12407371,11.2230376 5.27958491,8.27236974 C5.36078546,6.7316713 6.46682906,5.57884963 7.81540602,5.22703675 C7.87016962,5.21275018 7.99088572,5.21697569 8.16029377,5.25836839 Z" id="路径-18"></path>\n            </g>\n        </g>\n    </g>\n</svg>',updatedAt:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组" fill="currentColor" fill-rule="nonzero">\n            <g id="1.line/5.数据表编辑器/人员备份-2">\n                <path d="M20.6941805,14.2845788 C21.4463193,12.9818363 23.116255,12.5378655 24.4240864,13.2929423 C25.7319178,14.0480191 26.1823957,15.7162113 25.430257,17.0189538 L25.430257,17.0189538 L21.8645398,23.194957 C21.7462249,23.3998845 21.5696551,23.5650636 21.3570867,23.6696737 L21.3570867,23.6696737 L18.1299711,25.2578171 C17.4469114,25.5939676 16.6545228,25.0586372 16.7120494,24.2998822 L16.7120494,24.2998822 L16.9636072,20.9819233 C16.9771552,20.8032306 17.0306646,20.6299745 17.1202021,20.474891 L17.1202021,20.474891 Z M18.59375,1.85214008 C19.1978114,1.85214008 19.6875,2.33992323 19.6875,2.94163424 L19.6875,3.81322957 L21.546875,3.81322957 C23.4798716,3.81322957 25.046875,5.37413566 25.046875,7.29961089 L25.046875,10.8906858 C25.046875,11.4947472 24.5571864,11.9844358 23.953125,11.9844358 L5.140625,11.9844358 L5.140625,21.463035 C5.140625,22.1739797 5.71030954,22.7523852 6.41976838,22.770014 L6.453125,22.770428 L14.21875,22.770428 L14.2188703,22.7758193 C14.7715198,22.8305374 15.203125,23.2950225 15.203125,23.8599222 C15.203125,24.4248218 14.7715198,24.889307 14.2188703,24.944025 L14.21875,24.9494163 L6.453125,24.9494163 C4.52012838,24.9494163 2.953125,23.3885103 2.953125,21.463035 L2.953125,7.29961089 C2.953125,5.37413566 4.52012838,3.81322957 6.453125,3.81322957 L8.421875,3.81322957 L8.421875,2.94163424 C8.421875,2.33992323 8.91156355,1.85214008 9.515625,1.85214008 C10.1196864,1.85214008 10.609375,2.33992323 10.609375,2.94163424 L10.609375,3.81322957 L17.5,3.81322957 L17.5,2.94163424 C17.5,2.33992323 17.9896886,1.85214008 18.59375,1.85214008 Z M23.4435417,14.9912956 C23.0773489,14.7798741 22.6097669,14.9041859 22.399168,15.2689538 L22.399168,15.2689538 L18.911765,21.3092414 L18.8036709,22.7345908 L20.2750181,22.0105177 L23.7252694,16.0345788 C23.9314808,15.6774103 23.8148439,15.2221349 23.4661153,15.0048391 L23.4661153,15.0048391 Z M8.421875,5.9922179 L6.453125,5.9922179 C5.73940317,5.9922179 5.15873829,6.55968577 5.14104061,7.26638407 L5.140625,9.80544747 L22.859375,9.80544747 L22.859375,7.29961089 C22.859375,6.58866619 22.2896905,6.01026071 21.5802316,5.99263189 L19.6875,5.9922179 L19.6875,6.86381323 C19.6875,7.46552424 19.1978114,7.95330739 18.59375,7.95330739 C17.9896886,7.95330739 17.5,7.46552424 17.5,6.86381323 L17.5,5.9922179 L10.609375,5.9922179 L10.609375,6.86381323 C10.609375,7.46552424 10.1196864,7.95330739 9.515625,7.95330739 C8.91156355,7.95330739 8.421875,7.46552424 8.421875,6.86381323 L8.421875,5.9922179 Z" id="形状结合"></path>\n            </g>\n        </g>\n    </g>\n</svg>',userId:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组" fill="currentColor" fill-rule="nonzero">\n            <g id="编组">\n                <path d="M14,14.109375 C14.6040614,14.109375 15.09375,14.5990636 15.09375,15.203125 C15.09375,15.8071864 14.6040614,16.296875 14,16.296875 C11.3613725,16.296875 9.0591243,16.9578063 7.38010891,18.0664234 C6.0279609,18.9592172 5.26323789,20.0418029 5.24281663,20.8168001 L5.24210055,20.9164914 L5.24196789,20.9598563 L5.24260775,21.0415086 C5.24622712,21.2637335 5.26574883,21.4110617 5.31513818,21.5510788 C5.35896615,21.6753296 5.41878797,21.7604057 5.51246915,21.8259884 L5.53469707,21.8407858 L5.56685435,21.861153 L5.5975179,21.8837064 C5.66350656,21.932242 5.74743514,21.978762 5.84855688,22.0231659 L5.90054706,22.0451911 L5.95538203,22.0668608 L6.01304104,22.0881722 L6.04292308,22.0986927 L6.10477926,22.1194614 L6.16940762,22.1398649 C6.18040888,22.1432349 6.19152478,22.1465896 6.20275489,22.1499288 L6.27150264,22.1697792 L6.34297072,22.1892573 L6.41713838,22.2083603 L6.49398488,22.2270855 L6.57348948,22.2454301 L6.65563144,22.2633912 L6.74039001,22.2809661 L6.87238863,22.3065982 L7.01015796,22.3313455 L7.10517554,22.3473476 L7.20270603,22.3629494 L7.30272867,22.3781482 L7.40522272,22.3929413 L7.56355232,22.4143638 L7.67213415,22.4281301 L7.78311479,22.4414809 L7.95403815,22.4607216 L8.13024215,22.4790116 L8.25061061,22.4906721 L8.43546011,22.5073564 L8.56152741,22.5179378 L8.68983795,22.5280825 L8.88646446,22.542475 L9.08802157,22.5558696 L9.29443928,22.5682568 L9.50564759,22.5796271 L9.64907999,22.5866378 L9.79458969,22.5931896 L10.0167038,22.6021506 L10.2433751,22.6100634 L10.4496832,22.6162956 L10.7053996,22.6230282 L11.137266,22.63179 L11.3344696,22.6347229 L11.7494284,22.6389977 L12.1457184,22.6411792 L12.7884437,22.6421579 L13.8104456,22.6407303 L13.9999987,22.640625 C14.6040601,22.6406243 15.09375,23.1303122 15.09375,23.7343737 C15.09375,24.3281968 14.6205217,24.8114918 14.0306159,24.8277048 L13.9810297,24.8281259 L12.7124973,24.8296623 L12.008776,24.8281395 L11.6686189,24.8259486 L11.2476388,24.8212671 L10.9966264,24.8172019 L10.7991495,24.8132605 L10.5282863,24.8067685 L10.2532009,24.7989484 L9.98227198,24.79001 L9.80493941,24.7833933 L9.63022574,24.7762343 L9.45812204,24.7685193 L9.28861935,24.7602344 L9.12170875,24.7513658 L8.87618341,24.7369385 L8.71571386,24.7265505 L8.55780508,24.7155306 L8.32572378,24.6977857 L8.17417779,24.6851257 L8.02516126,24.6717856 L7.87866526,24.6577515 L7.73468082,24.6430096 L7.59319902,24.6275462 L7.4542109,24.6113475 L7.31770752,24.5943997 L7.18367993,24.576689 L7.0521192,24.5582016 L6.92301638,24.5389237 L6.79636251,24.5188415 L6.67214866,24.4979414 L6.55036589,24.4762093 C6.51017582,24.4688252 6.47038943,24.4613001 6.43100525,24.4536317 L6.31405778,24.4301946 C6.23689522,24.4142804 6.16133547,24.397784 6.08736663,24.3806871 L5.97760505,24.3545891 C5.94141459,24.3457381 5.90562037,24.3367347 5.87022088,24.3275765 L5.76520517,24.2996356 C5.73059368,24.2901657 5.69637545,24.2805387 5.66254897,24.2707525 L5.56224335,24.2409135 C5.46311003,24.2105919 5.36748915,24.1788157 5.27534046,24.1455229 L5.18434767,24.1117223 C4.86991338,23.9916346 4.59784905,23.852715 4.36642895,23.692303 L4.3295,23.6662344 L4.31520521,23.6570401 C3.81369919,23.3247256 3.47096353,22.8663774 3.27111044,22.3308179 L3.25221533,22.2787502 C3.09448372,21.8315866 3.05459004,21.4654555 3.05444298,20.9684802 L3.05489681,20.8484749 C3.05489681,19.2245127 4.24833756,17.5129419 6.1747879,16.2409488 C8.21950126,14.8908693 10.9417115,14.109375 14,14.109375 Z M20.34375,12.796875 C20.9478114,12.796875 21.4375,13.2865636 21.4375,13.890625 L21.437443,17.717875 L25.265625,17.71875 C25.8696864,17.71875 26.359375,18.2084386 26.359375,18.8125 C26.359375,19.4165614 25.8696864,19.90625 25.265625,19.90625 L21.437443,19.905875 L21.4375,23.734375 C21.4375,24.3384364 20.9478114,24.828125 20.34375,24.828125 C19.7396886,24.828125 19.25,24.3384364 19.25,23.734375 L19.249443,19.905875 L15.421875,19.90625 C14.8178136,19.90625 14.328125,19.4165614 14.328125,18.8125 C14.328125,18.2084386 14.8178136,17.71875 15.421875,17.71875 L19.249443,17.717875 L19.25,13.890625 C19.25,13.2865636 19.7396886,12.796875 20.34375,12.796875 Z M14,2.625 C16.7786826,2.625 19.03125,4.87756735 19.03125,7.65625 C19.03125,10.4349326 16.7786826,12.6875 14,12.6875 C11.2213174,12.6875 8.96875,10.4349326 8.96875,7.65625 C8.96875,4.87756735 11.2213174,2.625 14,2.625 Z M14,4.8125 C12.4294402,4.8125 11.15625,6.08569024 11.15625,7.65625 C11.15625,9.22680976 12.4294402,10.5 14,10.5 C15.5705598,10.5 16.84375,9.22680976 16.84375,7.65625 C16.84375,6.08569024 15.5705598,4.8125 14,4.8125 Z" id="形状结合"></path>\n            </g>\n        </g>\n    </g>\n</svg>',modifierId:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ICON</title>\n    <g id="ICON" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组" fill="currentColor" fill-rule="nonzero">\n            <g id="编组" transform="translate(0.000000, -0.109375)">\n                <path d="M20.7024795,14.3457186 C21.4575563,13.0378872 23.1298738,12.589791 24.4377052,13.3448678 C25.7455366,14.0999446 26.1936327,15.7722622 25.4385559,17.0800936 L25.4385559,17.0800936 L21.8589102,23.2802218 C21.7401331,23.4859498 21.5631115,23.6519114 21.3501586,23.7571876 L21.3501586,23.7571876 L18.1172052,25.3554422 C17.4329099,25.6937329 16.6406529,25.1581744 16.6995191,24.3970992 L16.6995191,24.3970992 L16.9569348,21.0689943 C16.9707982,20.8897551 17.0246529,20.715901 17.1145402,20.5602116 L17.1145402,20.5602116 Z M14,14.109375 C14.6040614,14.109375 15.09375,14.5990636 15.09375,15.203125 C15.09375,15.8071864 14.6040614,16.296875 14,16.296875 C11.3613725,16.296875 9.0591243,16.9578063 7.38010891,18.0664234 C6.0279609,18.9592172 5.26323789,20.0418029 5.24281663,20.8168001 L5.24210055,20.9164914 L5.24196789,20.9598563 L5.24260775,21.0415086 C5.24622712,21.2637335 5.26574883,21.4110617 5.31513818,21.5510788 C5.35896615,21.6753296 5.41878797,21.7604057 5.51246915,21.8259884 L5.53469707,21.8407858 L5.56685435,21.861153 L5.5975179,21.8837064 C5.66350656,21.932242 5.74743514,21.978762 5.84855688,22.0231659 L5.90054706,22.0451911 L5.95538203,22.0668608 L6.01304104,22.0881722 L6.04292308,22.0986927 L6.04292308,22.0986927 L6.10477926,22.1194614 L6.16940762,22.1398649 L6.20275489,22.1499288 L6.20275489,22.1499288 L6.27150264,22.1697792 L6.34297072,22.1892573 L6.41713838,22.2083603 L6.49398488,22.2270855 L6.57348948,22.2454301 L6.65563144,22.2633912 L6.74039001,22.2809661 L6.87238863,22.3065982 L7.01015796,22.3313455 L7.10517554,22.3473476 L7.20270603,22.3629494 L7.30272867,22.3781482 L7.40522272,22.3929413 L7.56355232,22.4143638 L7.67213415,22.4281301 L7.78311479,22.4414809 L7.95403815,22.4607216 L8.13024215,22.4790116 L8.25061061,22.4906721 L8.43546011,22.5073564 L8.56152741,22.5179378 L8.68983795,22.5280825 L8.88646446,22.542475 L9.08802157,22.5558696 L9.29443928,22.5682568 L9.50564759,22.5796271 L9.64907999,22.5866378 L9.79458969,22.5931896 L10.0167038,22.6021506 L10.2433751,22.6100634 L10.4496832,22.6162956 L10.7053996,22.6230282 L11.137266,22.63179 L11.3344696,22.6347229 L11.7494284,22.6389977 L12.1457184,22.6411792 L12.7884437,22.6421579 L13.8104456,22.6407303 L13.9999987,22.640625 C14.6040601,22.6406243 15.09375,23.1303122 15.09375,23.7343737 C15.09375,24.3281968 14.6205217,24.8114918 14.0306159,24.8277048 L13.9810297,24.8281259 L12.7124973,24.8296623 L12.008776,24.8281395 L11.6686189,24.8259486 L11.2476388,24.8212671 L10.9966264,24.8172019 L10.7991495,24.8132605 L10.5282863,24.8067685 L10.2532009,24.7989484 L9.98227198,24.79001 L9.80493941,24.7833933 L9.63022574,24.7762343 L9.45812204,24.7685193 L9.28861935,24.7602344 L9.12170875,24.7513658 L8.87618341,24.7369385 L8.71571386,24.7265505 L8.55780508,24.7155306 L8.32572378,24.6977857 L8.17417779,24.6851257 L8.02516126,24.6717856 L7.87866526,24.6577515 L7.73468082,24.6430096 L7.59319902,24.6275462 L7.4542109,24.6113475 L7.31770752,24.5943997 L7.18367993,24.576689 L7.0521192,24.5582016 L6.92301638,24.5389237 L6.79636251,24.5188415 L6.67214866,24.4979414 L6.55036589,24.4762093 C6.51017582,24.4688252 6.47038943,24.4613001 6.43100525,24.4536317 L6.31405778,24.4301946 C6.23689522,24.4142804 6.16133547,24.397784 6.08736663,24.3806871 L5.97760505,24.3545891 C5.94141459,24.3457381 5.90562037,24.3367347 5.87022088,24.3275765 L5.76520517,24.2996356 C5.73059368,24.2901657 5.69637545,24.2805387 5.66254897,24.2707525 L5.56224335,24.2409135 C5.46311003,24.2105919 5.36748915,24.1788157 5.27534046,24.1455229 L5.18434767,24.1117223 C4.86991338,23.9916346 4.59784905,23.852715 4.36642895,23.692303 L4.3295,23.6662344 L4.31520521,23.6570401 C3.81369919,23.3247256 3.47096353,22.8663774 3.27111044,22.3308179 L3.25221533,22.2787502 C3.09448372,21.8315866 3.05459004,21.4654555 3.05444298,20.9684802 L3.05489681,20.8484749 C3.05489681,19.2245127 4.24833756,17.5129419 6.1747879,16.2409488 C8.21950126,14.8908693 10.9417115,14.109375 14,14.109375 Z M23.4533302,15.0498554 C23.0871374,14.8384338 22.6188885,14.9639008 22.407467,15.3300936 L22.407467,15.3300936 L18.9064414,21.393976 L18.7958308,22.8236841 L20.2698396,22.095001 L23.7335684,16.0957186 C23.9405853,15.7371548 23.8246045,15.2807429 23.4759029,15.0634004 L23.4759029,15.0634004 Z M14,2.625 C16.7786826,2.625 19.03125,4.87756735 19.03125,7.65625 C19.03125,10.4349326 16.7786826,12.6875 14,12.6875 C11.2213174,12.6875 8.96875,10.4349326 8.96875,7.65625 C8.96875,4.87756735 11.2213174,2.625 14,2.625 Z M14,4.8125 C12.4294402,4.8125 11.15625,6.08569024 11.15625,7.65625 C11.15625,9.22680976 12.4294402,10.5 14,10.5 C15.5705598,10.5 16.84375,9.22680976 16.84375,7.65625 C16.84375,6.08569024 15.5705598,4.8125 14,4.8125 Z" id="形状结合"></path>\n            </g>\n        </g>\n    </g>\n</svg>',indexLock:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1650271467028" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12130" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css">@font-face { font-family: feedback-iconfont; src: url("//at.alicdn.com/t/font_1031158_u69w8yhxdu.woff2?t=1630033759944") format("woff2"), url("//at.alicdn.com/t/font_1031158_u69w8yhxdu.woff?t=1630033759944") format("woff"), url("//at.alicdn.com/t/font_1031158_u69w8yhxdu.ttf?t=1630033759944") format("truetype"); }\n</style></defs><path d="M512 80c116.468 0 211.104 93.472 212.988 209.492l0.028 3.52L725.012 356H744c65.612 0 118.924 52.656 119.984 118.016L864 476v340c0 65.612-52.656 118.924-118.016 119.984L744 936H280c-65.612 0-118.924-52.656-119.984-118.016L160 816v-340c0-65.612 52.656-118.924 118.016-119.984L280 356h18.984V293.016C298.984 175.372 394.36 80 512 80z m0 492c-44.184 0-80 35.816-80 80s35.816 80 80 80 80-35.816 80-80-35.816-80-80-80z m0-412c-72.728 0-131.824 58.368-133 130.816l-0.016 2.2V356h266.028V293.016C645.016 219.552 585.468 160 512 160z" p-id="12131" fill="currentColor"></path></svg>',extDefault:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>default</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="default" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组">\n            <mask id="mask-2" fill="white">\n                <use xlink:href="#path-1"></use>\n            </mask>\n            <g id="蒙版"></g>\n            <g id="编组-2" mask="url(#mask-2)">\n                <g transform="translate(3.562500, 1.500000)">\n                    <path d="M10.875,0 L16.875,6 L16.875,18.75 C16.875,19.9926407 15.8676407,21 14.625,21 L2.25,21 C1.00735931,21 -7.35998826e-16,19.9926407 0,18.75 L0,2.25 C-1.52179594e-16,1.00735931 1.00735931,2.28269391e-16 2.25,0 L10.875,0 Z M8.48648856,8.625 C6.77126516,8.625 5.730995,9.72576483 5.3246024,10.9648306 C4.41894182,11.1956168 3.75,11.9956758 3.75,12.9485666 C3.75,14.0819836 4.69581822,15 5.86250349,15 L11.1062465,15 C12.2729318,15 13.21875,14.0819836 13.21875,12.9485666 C13.21875,11.9977273 12.5519217,11.1976683 11.6483747,10.9658563 C11.2419821,9.72679055 10.201712,8.625 8.48648856,8.625 Z" id="形状结合" fill="#4E86E6"></path>\n                    <path d="M10.875,0 L10.875,4.5 C10.875,5.32842712 11.5465729,6 12.375,6 L16.875,6 L16.875,6 L10.875,0 Z" id="路径-3" fill="#A9C6F3"></path>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extAxure:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>rp</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="rp">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <g id="编组-3" mask="url(#mask-2)">\n                    <g transform="translate(3.562500, 1.500000)">\n                        <path d="M10.875,0 L16.875,6 L16.875,18.75 C16.875,19.9926407 15.8676407,21 14.625,21 L2.25,21 C1.00735931,21 -7.35998826e-16,19.9926407 0,18.75 L0,2.25 C-1.52179594e-16,1.00735931 1.00735931,2.28269391e-16 2.25,0 L10.875,0 Z M6.0700997,8.578125 L4.50714701,8.578125 L4.40830322,8.58610069 C4.11876146,8.63332752 3.89777201,8.88460633 3.89777201,9.1875 L3.89777201,9.1875 L3.89777201,11.8831271 L3.90073493,11.9436008 L3.90943722,12.0023888 L3.90980326,14.4810341 L3.91777895,14.5798779 C3.96500577,14.8694197 4.21628459,15.0904091 4.51917826,15.0904091 C4.85572678,15.0904091 5.12855326,14.8175827 5.12855326,14.4810341 L5.12855326,14.4810341 L5.12777201,12.492125 L5.61077201,12.492125 L6.36071154,14.6786707 L6.40031377,14.7695847 C6.53889385,15.0281584 6.84826259,15.1557059 7.13478339,15.0574695 C7.45313984,14.9483178 7.62273385,14.6017541 7.51358222,14.2833976 L7.51358222,14.2833976 L6.84487357,12.3331648 C7.54043943,12.0330119 8.02728826,11.3410175 8.02728826,10.5353136 C8.02728826,9.45438817 7.15102509,8.578125 6.0700997,8.578125 L6.0700997,8.578125 Z M11.2862175,8.578125 L9.7232648,8.578125 L9.62442101,8.58610069 C9.33487925,8.63332752 9.1138898,8.88460633 9.1138898,9.1875 L9.1138898,9.1875 L9.1138898,11.8831271 L9.11685273,11.9436008 L9.12555502,12.0023888 L9.12592105,14.4810341 L9.13389674,14.5798779 C9.18112357,14.8694197 9.43240238,15.0904091 9.73529605,15.0904091 C10.0718446,15.0904091 10.344671,14.8175827 10.344671,14.4810341 L10.344671,14.4810341 L10.3438898,12.492125 L11.2862175,12.4925021 L11.4322848,12.4871338 C12.4449927,12.412419 13.2434061,11.567106 13.2434061,10.5353136 C13.2434061,9.45438817 12.3671429,8.578125 11.2862175,8.578125 L11.2862175,8.578125 Z M6.0700997,9.796875 C6.47792805,9.796875 6.80853826,10.1274852 6.80853826,10.5353136 L6.80853826,10.5353136 L6.80179719,10.6355153 C6.75290032,10.9959477 6.44394236,11.2737521 6.0700997,11.2737521 L6.0700997,11.2737521 L5.12777201,11.273125 L5.12777201,9.796125 Z M11.2862175,9.796875 C11.6940458,9.796875 12.0246561,10.1274852 12.0246561,10.5353136 L12.0246561,10.5353136 L12.017915,10.6355153 C11.9690181,10.9959477 11.6600601,11.2737521 11.2862175,11.2737521 L11.2862175,11.2737521 L10.3438898,11.273125 L10.3438898,9.796125 Z" id="形状结合" fill="#8B6AD4"></path>\n                        <path d="M10.875,0 L10.875,4.5 C10.875,5.32842712 11.5465729,6 12.375,6 L16.875,6 L16.875,6 L10.875,0 Z" id="路径-3" fill="#CBBCEB"></path>\n                    </g>\n                </g>\n                <g id="编组-2" mask="url(#mask-2)">\n                    <g transform="translate(6.968750, 9.687500)"></g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extImage:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>image</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="image">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <g id="编组-3" mask="url(#mask-2)">\n                    <g transform="translate(3.562500, 1.500000)">\n                        <path d="M10.875,0 L16.875,6 L16.875,18.75 C16.875,19.9926407 15.8676407,21 14.625,21 L2.25,21 C1.00735931,21 -7.35998826e-16,19.9926407 0,18.75 L0,2.25 C-1.52179594e-16,1.00735931 1.00735931,2.28269391e-16 2.25,0 L10.875,0 Z M9.85558952,9.6272408 C9.73204536,9.54136254 9.56227494,9.57189679 9.47639668,9.69544095 L9.47639668,9.69544095 L7.0416991,13.196481 L6.03405615,11.7404158 C6.01541248,11.7134861 5.99206541,11.690139 5.96513568,11.6714954 C5.84142857,11.585852 5.67171647,11.6167087 5.5860731,11.7404158 L5.5860731,11.7404158 L3.65413965,14.5309864 C3.62259751,14.5765472 3.6056991,14.6306435 3.6056991,14.6860574 C3.6056991,14.8365175 3.72767109,14.9584895 3.87813117,14.9584895 L3.87813117,14.9584895 L13.0610913,14.9584895 C13.1166818,14.9584895 13.1709418,14.9414833 13.2165877,14.9097539 C13.3401318,14.8238757 13.3706661,14.6541052 13.2847878,14.5305611 L13.2847878,14.5305611 L9.92378967,9.69544095 C9.90529341,9.6688323 9.88219817,9.64573705 9.85558952,9.6272408 Z M5.94628066,8.625 C5.53251544,8.625 5.19709245,8.96042299 5.19709245,9.37418821 C5.19709245,9.78795343 5.53251544,10.1233764 5.94628066,10.1233764 C6.36004588,10.1233764 6.69546886,9.78795343 6.69546886,9.37418821 C6.69546886,8.96042299 6.36004588,8.625 5.94628066,8.625 Z" id="形状结合" fill="#F7AD2D"></path>\n                        <path d="M10.875,0 L10.875,4.5 C10.875,5.32842712 11.5465729,6 12.375,6 L16.875,6 L16.875,6 L10.875,0 Z" id="路径-3" fill="#FBDAA0"></path>\n                    </g>\n                </g>\n                <g id="编组-2" mask="url(#mask-2)">\n                    <g transform="translate(7.125000, 10.125000)" id="编组-3">\n                        <g></g>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extPPT:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>PPT</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="PPT">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <g id="编组-3" mask="url(#mask-2)">\n                    <g transform="translate(3.562500, 1.500000)">\n                        <path d="M10.875,0 L16.875,6 L16.875,18.75 C16.875,19.9926407 15.8676407,21 14.625,21 L2.25,21 C1.00735931,21 -7.35998826e-16,19.9926407 0,18.75 L0,2.25 C-1.52179594e-16,1.00735931 1.00735931,2.28269391e-16 2.25,0 L10.875,0 Z M8.82937493,7.21875 L6.3234375,7.21875 L6.22166694,7.22559662 C5.85559138,7.27525904 5.5734375,7.58905423 5.5734375,7.96875 L5.5734375,7.96875 L5.5734375,12.0693749 L5.57534778,12.1233204 L5.57534778,12.1233204 L5.58099218,12.1762338 L5.58125,15.73125 L5.58809662,15.8330206 C5.63775904,16.1990961 5.95155423,16.48125 6.33125,16.48125 C6.74546356,16.48125 7.08125,16.1454636 7.08125,15.73125 L7.08125,15.73125 L7.0804375,12.81875 L8.82937493,12.8193749 L8.99996216,12.8142643 C10.4670948,12.7261034 11.6296874,11.5083519 11.6296874,10.0190624 C11.6296874,8.47249259 10.3759448,7.21875 8.82937493,7.21875 L8.82937493,7.21875 Z M8.82937493,8.71875 C9.54751767,8.71875 10.1296874,9.30091971 10.1296874,10.0190624 L10.1296874,10.0190624 L10.122974,10.1520118 C10.056385,10.8077023 9.50263375,11.3193749 8.82937493,11.3193749 L8.82937493,11.3193749 L7.0804375,11.31875 L7.0804375,8.71875 Z" id="形状结合" fill="#DE5F31"></path>\n                        <path d="M10.875,0 L10.875,4.5 C10.875,5.32842712 11.5465729,6 12.375,6 L16.875,6 L16.875,6 L10.875,0 Z" id="路径-3" fill="#F0B7A2"></path>\n                    </g>\n                </g>\n                <g id="编组-2" mask="url(#mask-2)">\n                    <g transform="translate(8.843750, 8.468750)"></g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extTXT:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>text</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="text" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组">\n            <mask id="mask-2" fill="white">\n                <use xlink:href="#path-1"></use>\n            </mask>\n            <g id="蒙版"></g>\n            <path d="M14.4375,1.5 L20.4375,7.5 L20.4375,20.25 C20.4375,21.4926407 19.4301407,22.5 18.1875,22.5 L5.8125,22.5 C4.56985931,22.5 3.5625,21.4926407 3.5625,20.25 L3.5625,3.75 C3.5625,2.50735931 4.56985931,1.5 5.8125,1.5 L14.4375,1.5 Z M14.9999996,8.71875 L9.09375,8.71875 C8.62775974,8.71875 8.25,9.09650974 8.25,9.5625 C8.25,10.0284903 8.62775974,10.40625 9.09375,10.40625 L9.09375,10.40625 L11.203,10.40575 L11.2031249,17.15625 C11.2031249,17.6222403 11.5808847,18 12.0468749,18 C12.5128651,18 12.8906249,17.6222403 12.8906249,17.15625 L12.8906249,17.15625 L12.89,10.40575 L14.9999996,10.40625 C15.4659899,10.40625 15.8437496,10.0284903 15.8437496,9.5625 C15.8437496,9.09650974 15.4659899,8.71875 14.9999996,8.71875 L14.9999996,8.71875 Z" id="形状结合" fill="#4E86E6" mask="url(#mask-2)"></path>\n            <path d="M14.4375,1.5 L14.4375,6 C14.4375,6.82842712 15.1090729,7.5 15.9375,7.5 L20.4375,7.5 L20.4375,7.5 L14.4375,1.5 Z" id="路径-3" fill="#A9C6F3" mask="url(#mask-2)"></path>\n            <g id="编组-2" mask="url(#mask-2)">\n                <g transform="translate(8.250000, 8.718750)"></g>\n            </g>\n        </g>\n    </g>\n</svg>',extXmind:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>xmind</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="xmind">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <g id="编组-3" mask="url(#mask-2)">\n                    <g transform="translate(3.562500, 1.500000)">\n                        <path d="M10.875,0 L16.875,6 L16.875,18.75 C16.875,19.9926407 15.8676407,21 14.625,21 L2.25,21 C1.00735931,21 -7.35998826e-16,19.9926407 0,18.75 L0,2.25 C-1.52179594e-16,1.00735931 1.00735931,2.28269391e-16 2.25,0 L10.875,0 Z M12.143595,9 L9.76988636,9.40272887 C9.76988636,10.315581 9.43948003,10.8078052 8.77866736,10.8794014 C8.11785468,10.9509977 7.45704201,10.3692782 6.79622934,9.13424296 L6.79622934,9.13424296 L4.03125,9.51012324 C4.23992769,10.1723885 4.58772383,10.6467136 5.07463843,10.9330986 C5.56155303,11.2194836 6.2136708,11.5953638 7.03099174,12.0607394 C6.75138544,12.2660558 6.55140266,12.3913492 6.43104339,12.4366197 C5.66430814,12.7250105 5.15289256,12.7319542 4.65728306,13.2957746 C4.32687672,13.6716549 4.18775826,14.14598 4.23992769,14.71875 L4.23992769,14.71875 L6.58755165,14.3160211 C6.72667011,13.3315728 7.30922865,12.7946009 8.33522727,12.7051056 C9.29905618,12.6210332 10.0902924,13.1759041 10.708936,14.3697183 L10.708936,14.3697183 L13.5,13.993838 C13.3434917,13.4747653 13.1087293,13.098885 12.7957128,12.8661972 C11.7598203,12.0961435 10.7611054,11.8191021 10.4220041,11.4700704 C10.8393595,10.6914613 11.4393079,11.1210387 12.0653409,10.4229754 C12.2254183,10.2444798 12.251503,9.77015464 12.143595,9 L12.143595,9 Z" id="形状结合" fill="#DE5F31"></path>\n                        <path d="M10.875,0 L10.875,4.5 C10.875,5.32842712 11.5465729,6 12.375,6 L16.875,6 L16.875,6 L10.875,0 Z" id="路径-3" fill="#F0B7A2"></path>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extKeynote:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>keynote</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="keynote">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <path d="M14.4375,1.5 L20.4375,7.5 L20.4375,20.25 C20.4375,21.4926407 19.4301407,22.5 18.1875,22.5 L5.8125,22.5 C4.56985931,22.5 3.5625,21.4926407 3.5625,20.25 L3.5625,3.75 C3.5625,2.50735931 4.56985931,1.5 5.8125,1.5 L14.4375,1.5 Z M14.7509633,8.4375 L9.38309855,8.4375 L9.27297425,8.44479695 C8.94778285,8.48816716 8.67410747,8.72114842 8.58377824,9.0437528 L8.58377824,9.0437528 L7.58609457,12.6069088 L7.56307385,12.7177629 L7.56307385,12.7177629 L7.5553524,12.8307184 L7.56181976,12.9348397 C7.6130401,13.3441244 7.96224794,13.6607809 8.38541489,13.6607809 L8.38541489,13.6607809 L11.3433524,13.6605 L11.3433524,16.3125 L10.6896748,16.3125 C10.327238,16.3125 10.0334248,16.6063131 10.0334248,16.96875 C10.0334248,17.3311869 10.327238,17.625 10.6896748,17.625 L10.6896748,17.625 L13.444387,17.625 C13.8068239,17.625 14.100637,17.3311869 14.100637,16.96875 C14.100637,16.6063131 13.8068239,16.3125 13.444387,16.3125 L13.444387,16.3125 L12.6553524,16.3125 L12.6553524,13.6605 L15.748647,13.6607809 L15.8616026,13.6530595 L15.8616026,13.6530595 L15.9724567,13.6300388 C16.4139091,13.5064321 16.671574,13.0483612 16.5479673,12.6069088 L16.5479673,12.6069088 L15.5502836,9.0437528 L15.5135641,8.93967454 C15.3841188,8.63822083 15.0859752,8.4375 14.7509633,8.4375 L14.7509633,8.4375 Z M14.38525,9.74975 L15.11225,12.34775 L9.02125,12.34775 L9.74825,9.74975 L14.38525,9.74975 Z" id="形状结合" fill="#4E86E6" mask="url(#mask-2)"></path>\n                <path d="M14.4375,1.5 L14.4375,6 C14.4375,6.82842712 15.1090729,7.5 15.9375,7.5 L20.4375,7.5 L20.4375,7.5 L14.4375,1.5 Z" id="路径-3" fill="#A9C6F3" mask="url(#mask-2)"></path>\n                <g id="编组-2" mask="url(#mask-2)">\n                    <g transform="translate(7.156250, 8.093750)"></g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extMindnote:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>mindnote</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="mindnote">\n            <g id="文档">\n                <g id="编组">\n                    <mask id="mask-2" fill="white">\n                        <use xlink:href="#path-1"></use>\n                    </mask>\n                    <g id="蒙版"></g>\n                    <g id="编组-2" mask="url(#mask-2)">\n                        <g transform="translate(3.562500, 1.500000)">\n                            <path d="M10.875,0 L16.875,6 L16.875,18.75 C16.875,19.9926407 15.8676407,21 14.625,21 L2.25,21 C1.00735931,21 -2.95644487e-15,19.9926407 -3.55271368e-15,18.75 L-3.55271368e-15,2.25 C-3.70489327e-15,1.00735931 1.00735931,2.28269391e-16 2.25,0 L10.875,0 Z M13.125,10.2831038 C11.6275827,10.4755456 10.4981149,10.9122275 9.73659652,11.5931493 C8.59431892,12.6145321 8.31426186,13.3141625 8.18378174,15.0239873 C8.16829917,15.2268725 8.16829917,15.9688768 8.18378174,17.25 C8.33732796,16.4884706 8.92574335,15.8005982 9.94902791,15.1863827 C10.7052044,14.732496 11.7191873,13.8058292 12.5139832,12.237716 C12.8646882,11.5457836 13.0683604,10.8942462 13.125,10.2831038 Z M3.75,7.46106992 C4.19604111,8.72314468 4.03479863,10.9740457 4.11929176,11.6622557 C4.20378488,12.3504657 4.56369807,13.9562179 6.27653381,15.0124369 C6.76740075,15.3151296 7.16426868,15.6208645 7.46529268,15.9292009 C7.29282756,15.4065685 7.05107363,14.9072263 6.74003089,14.4311743 C6.11203975,13.4700318 5.53652008,11.256488 6.97767857,9.34922168 L6.97767857,9.34922168 L7.14366213,9.12755702 C5.77842326,8.06675833 4.17384697,7.55794971 3.75,7.46106992 Z M8.87551086,6.84375 C8.83260192,7.28063812 8.33518501,8.13277596 7.38326014,9.40016352 C5.95537283,11.3012449 6.52559272,13.5076104 7.14780089,14.4656362 C7.4500407,14.9310006 7.68625008,15.4186935 7.85589495,15.9277868 C7.85181298,15.2701526 7.85505422,14.8711354 7.86561866,14.7307351 C7.99405649,13.0238093 8.26973007,12.3253651 9.39412864,11.305714 C9.7565191,10.9770834 10.2035606,10.7054397 10.7371366,10.4915163 C10.6097381,8.90704378 9.98919618,7.69112168 8.87551086,6.84375 Z" id="形状结合" fill="#8B6AD4"></path>\n                            <path d="M10.875,0 L10.875,4.5 C10.875,5.32842712 11.5465729,6 12.375,6 L16.875,6 L16.875,6 L10.875,0 Z" id="路径-3" fill="#CBBCEB"></path>\n                        </g>\n                    </g>\n                    <g id="编组-3" mask="url(#mask-2)">\n                        <g transform="translate(7.500000, 9.750000)"></g>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extPSD:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>ps</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="ps">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <path d="M14.4375,1.5 L20.4375,7.5 L20.4375,20.25 C20.4375,21.4926407 19.4301407,22.5 18.1875,22.5 L5.8125,22.5 C4.56985931,22.5 3.5625,21.4926407 3.5625,20.25 L3.5625,3.75 C3.5625,2.50735931 4.56985931,1.5 5.8125,1.5 L14.4375,1.5 Z M14.705388,10.359375 C13.5535421,10.359375 12.5913206,11.2089513 12.5913206,12.2972914 C12.5913206,12.5564688 12.6470354,12.8092212 12.7533712,13.0433912 C13.0503697,13.697434 13.709806,14.1447134 14.4666523,14.2229471 L14.4666523,14.2229471 L14.56575,14.22975 L14.6314261,14.2373375 C15.2782328,14.2568509 15.6281248,14.5287973 15.6281248,14.9558334 C15.6281248,15.3841886 15.2443237,15.6749999 14.586874,15.6749999 C14.1125777,15.6749999 13.7176458,15.4467868 13.5886305,15.1548256 L13.5886305,15.1548256 L13.5413839,15.0676393 C13.3811574,14.8218909 13.0619974,14.721321 12.7849479,14.843747 C12.477115,14.9797758 12.3378404,15.3395968 12.4738692,15.6474297 C12.8090612,16.405968 13.6531872,16.8937499 14.586874,16.8937499 C15.8553855,16.8937499 16.8468748,16.1424851 16.8468748,14.9558334 C16.8468748,13.8368935 15.9946521,13.12366 14.8357607,13.0285074 L14.8357607,13.0285074 L14.72175,13.02175 L14.5476537,13.0051882 C14.2300518,12.9591989 13.9708295,12.7767916 13.863068,12.5394818 C13.8279554,12.4621579 13.8100706,12.3810226 13.8100706,12.2972914 C13.8100706,11.9181652 14.1951966,11.578125 14.705388,11.578125 C15.0964377,11.578125 15.4284194,11.7826978 15.5510846,12.0626699 L15.5510846,12.0626699 L15.5980564,12.1500046 C15.7575083,12.3962563 16.07635,12.4978307 16.3537837,12.3762777 C16.6620434,12.2412189 16.8024503,11.8818382 16.6673915,11.5735786 C16.3451789,10.8381573 15.5682088,10.359375 14.705388,10.359375 Z M9.6325997,10.359375 L8.069375,10.359375 C7.73282648,10.359375 7.46,10.6322015 7.46,10.96875 L7.46,10.96875 L7.46,16.2622841 L7.46797569,16.3611279 C7.51520252,16.6506697 7.76648133,16.8716591 8.069375,16.8716591 C8.40592352,16.8716591 8.67875,16.5988327 8.67875,16.2622841 L8.67875,16.2622841 L8.678,14.273375 L9.6325997,14.2737521 L9.77866697,14.2683838 C10.7913749,14.193669 11.5897883,13.348356 11.5897883,12.3165636 C11.5897883,11.2356382 10.7135251,10.359375 9.6325997,10.359375 L9.6325997,10.359375 Z M8.67875,11.57775 L9.6325997,11.578125 C10.0404281,11.578125 10.3710383,11.9087352 10.3710383,12.3165636 C10.3710383,12.7243919 10.0404281,13.0550021 9.6325997,13.0550021 L9.6325997,13.0550021 L8.67875,13.05475 L8.67875,11.57775 Z" id="形状结合" fill="#4E86E6" mask="url(#mask-2)"></path>\n                <path d="M14.4375,1.5 L14.4375,6 C14.4375,6.82842712 15.1090729,7.5 15.9375,7.5 L20.4375,7.5 L20.4375,7.5 L14.4375,1.5 Z" id="路径-3" fill="#A9C6F3" mask="url(#mask-2)"></path>\n                <g id="编组-3" mask="url(#mask-2)">\n                    <g transform="translate(6.968750, 9.968750)"></g>\n                </g>\n                <g id="编组-2" mask="url(#mask-2)">\n                    <g transform="translate(13.125000, 10.687500)"></g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extPDF:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>pdf</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="pdf" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组">\n            <mask id="mask-2" fill="white">\n                <use xlink:href="#path-1"></use>\n            </mask>\n            <g id="蒙版"></g>\n            <g id="编组-3" mask="url(#mask-2)">\n                <g transform="translate(3.562500, 1.500000)">\n                    <path d="M10.875,0 L16.875,6 L16.875,18.75 C16.875,19.9926407 15.8676407,21 14.625,21 L2.25,21 C1.00735931,21 -7.35998826e-16,19.9926407 0,18.75 L0,2.25 C-1.52179594e-16,1.00735931 1.00735931,2.28269391e-16 2.25,0 L10.875,0 Z M8.02955948,7.12591443 C7.58903802,7.10803242 7.18396705,7.35387432 7.08038205,7.73547113 C6.91174271,8.35184409 7.01050781,9.16346457 7.36786465,10.547024 C6.91256979,11.6323788 6.31113793,12.9045108 5.90755001,13.6140299 C5.36894793,13.8918141 4.94916059,14.1446434 4.59696588,14.4247663 C4.1320027,14.7945558 3.84175365,15.1745555 3.76172626,15.574291 C3.72308152,15.7591002 3.78146216,16.0011204 3.91459399,16.1992199 C4.06563643,16.4239286 4.29339795,16.5697225 4.56642086,16.5909413 C5.2552383,16.6444733 6.1016578,15.9342982 7.03597626,14.3305078 C7.12994999,14.2994211 7.22934253,14.2661383 7.35043887,14.2252693 C7.41669106,14.2029382 7.64887319,14.1243657 7.69011326,14.110448 C7.90461292,14.0380073 8.06030415,13.986101 8.2141986,13.93602 C8.88145484,13.7189262 9.3862606,13.5815457 9.84583348,13.5035722 C10.6436262,13.9306012 11.5660518,14.2107526 12.1872766,14.2107526 C12.7000395,14.2107526 13.0464731,13.9449753 13.1716478,13.5267018 C13.2816498,13.1591939 13.1942928,12.733163 12.9585171,12.4975883 C12.7143851,12.2577356 12.2654787,12.1429713 11.6563464,12.1233211 C11.2235824,12.1093748 10.763268,12.1424295 10.2403235,12.2078542 C9.54734212,11.7804258 9.08086738,11.1930577 8.74946383,10.330472 C8.75744945,10.2976171 8.77399111,10.2295685 8.77978069,10.2055547 C8.79329922,10.1497127 8.80450762,10.103054 8.81523117,10.0576788 C8.93766796,9.54061227 9.00389163,9.16335049 9.0234279,8.78298004 C9.03820131,8.49567015 9.0222871,8.23060582 8.97132168,7.98510617 C8.87726239,7.45509159 8.50205196,7.14510835 8.02955948,7.12591443 Z M6.2201087,13.986413 L5.98282726,14.3540076 L5.84941152,14.5560156 C5.54202155,15.010433 5.26238806,15.3468313 5.01812625,15.5762155 C4.91564521,15.6724767 4.82526202,15.7438982 4.75247039,15.7895136 C4.72245955,15.8083281 4.69648132,15.822027 4.67611369,15.8299848 C4.66416195,15.8346174 4.65358364,15.8376016 4.643093,15.8385679 C4.63199131,15.8398352 4.62074167,15.8382679 4.61045219,15.8340205 C4.58795387,15.8248546 4.57332736,15.8034322 4.57336957,15.7797084 L4.57336957,15.7797084 L4.57336957,15.7694769 L4.57705161,15.7598707 L4.62017224,15.6610737 C4.65279465,15.5941648 4.69310133,15.5251718 4.74069398,15.4541198 C4.8658804,15.2672246 5.03796789,15.070439 5.25125818,14.8611199 C5.36580785,14.7487156 5.48509145,14.6394377 5.62500567,14.5166598 C5.65636072,14.4891201 5.85615053,14.3160374 5.89352528,14.2821883 L5.89352528,14.2821883 L6.2201087,13.986413 Z M8.01281422,11.1046196 L8.07356771,11.213238 L8.20575138,11.4364315 C8.52472705,11.9457048 8.91570757,12.3727073 9.34037092,12.6819478 L9.34037092,12.6819478 L9.44497283,12.7581381 L9.31753018,12.7840119 L9.11533447,12.8285082 C8.71263423,12.9240339 8.31326879,13.0603479 7.7946196,13.2660544 C7.85787539,13.240982 7.16546608,13.5197263 6.99045066,13.5857274 L6.99045066,13.5857274 L6.83763587,13.6433424 L6.91916425,13.5037556 L7.05273649,13.2670958 C7.36189198,12.7007266 7.65515283,12.0331317 7.9681511,11.2205364 L7.9681511,11.2205364 L8.01281422,11.1046196 Z M11.1349891,12.8975417 C11.6957226,12.8689004 12.1009836,12.9101095 12.348454,13.0047661 C12.4668807,13.0500843 12.5460442,13.1072614 12.5811668,13.172758 C12.6190981,13.2434278 12.601725,13.3182724 12.5417298,13.363651 C12.5287579,13.3765688 12.5082866,13.3902732 12.4790129,13.4023137 C12.2513093,13.4962173 11.7615902,13.4122668 10.8989573,13.0275764 L10.8989573,13.0275764 L10.6800272,12.9299517 L10.9174307,12.9115885 Z M8.08029352,7.8111413 C8.25854296,7.8111413 8.34028911,8.12242655 8.3467685,8.59030487 C8.35248095,9.0015885 8.2930821,9.42963452 8.19612921,9.61692985 L8.19612921,9.61692985 L8.13636011,9.73233696 L8.09959947,9.60604293 L8.06037404,9.45339738 C7.99841515,9.1819171 7.95435968,8.83223642 7.9404973,8.51167712 C7.9215616,8.07398264 7.95345609,7.8111413 8.08029352,7.8111413 Z" id="形状结合" fill="#DE5F31"></path>\n                    <path d="M10.875,0 L10.875,4.5 C10.875,5.32842712 11.5465729,6 12.375,6 L16.875,6 L16.875,6 L10.875,0 Z" id="路径-3" fill="#F0B7A2"></path>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extExcel:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>excel</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="excel">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <g id="编组-2" mask="url(#mask-2)">\n                    <g transform="translate(3.562500, 1.500000)">\n                        <path d="M10.875,0 L16.875,6 L16.875,18.75 C16.875,19.9926407 15.8676407,21 14.625,21 L2.25,21 C1.00735931,21 -7.35998826e-16,19.9926407 0,18.75 L0,2.25 C-1.52179594e-16,1.00735931 1.00735931,2.28269391e-16 2.25,0 L10.875,0 Z M11.222739,8.05195764 C10.8878943,7.80813001 10.4187877,7.88191391 10.1749601,8.21675859 L10.1749601,8.21675859 L8.4835,10.538 L6.79378475,8.21675892 L6.72197096,8.13195275 C6.46577443,7.87112404 6.05040989,7.83029688 5.74600575,8.05195853 C5.4111612,8.29578633 5.33737755,8.76489297 5.58120536,9.09973752 L5.58120536,9.09973752 L7.5565,11.812 L5.58122518,14.5252631 L5.52255891,14.619643 C5.35297033,14.943538 5.44162187,15.3513805 5.74602613,15.573042 C6.08087081,15.8168696 6.54997741,15.7430857 6.79380504,15.408241 L6.79380504,15.408241 L8.4845,13.086 L10.1749452,15.4082417 L10.246759,15.4930479 C10.5029555,15.7538766 10.9183201,15.7947038 11.2227242,15.5730421 C11.5575687,15.3292143 11.6313524,14.8601077 11.3875246,14.5252631 L11.3875246,14.5252631 L9.4115,11.812 L11.3875399,9.09973655 L11.4462062,9.0053566 C11.6157948,8.68146157 11.5271432,8.27361912 11.222739,8.05195764 Z" id="形状结合" fill="#48A35F"></path>\n                        <path d="M10.875,0 L10.875,4.5 C10.875,5.32842712 11.5465729,6 12.375,6 L16.875,6 L16.875,6 L10.875,0 Z" id="路径-3" fill="#ACD5B7"></path>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extVideo:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>视频</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="视频">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <path d="M14.4375,1.5 L20.4375,7.5 L20.4375,20.25 C20.4375,21.4926407 19.4301407,22.5 18.1875,22.5 L5.8125,22.5 C4.56985931,22.5 3.5625,21.4926407 3.5625,20.25 L3.5625,3.75 C3.5625,2.50735931 4.56985931,1.5 5.8125,1.5 L14.4375,1.5 Z M12.7277143,10.875 L8.11960712,10.875 C7.67385417,10.875 7.3125,11.2363542 7.3125,11.6821071 L7.3125,11.6821071 L7.3125,14.9428929 C7.3125,15.3886458 7.67385417,15.75 8.11960712,15.75 L8.11960712,15.75 L12.7277143,15.75 C13.1734673,15.75 13.5348214,15.3886458 13.5348214,14.9428929 L13.5348214,14.9428929 L13.5348214,11.6821071 C13.5348214,11.2363542 13.1734673,10.875 12.7277143,10.875 L12.7277143,10.875 Z M16.7258382,10.9854078 C16.635518,10.8674266 16.4666564,10.8450029 16.3486751,10.9353231 L16.3486751,10.9353231 L14.7981861,12.1222956 C14.5986932,12.2750168 14.4816964,12.5119278 14.4816964,12.7631672 L14.4816964,12.7631672 L14.4816964,13.8618328 C14.4816964,14.1130722 14.5986932,14.3499832 14.7981861,14.5027044 L14.7981861,14.5027044 L16.3486751,15.6896769 C16.3956191,15.7256147 16.4530936,15.7450887 16.5122143,15.7450887 C16.6607986,15.7450887 16.78125,15.6246373 16.78125,15.476053 L16.78125,15.476053 L16.78125,11.148947 C16.78125,11.0898263 16.7617759,11.0323518 16.7258382,10.9854078 Z" id="形状结合" fill="#8B6AD4" mask="url(#mask-2)"></path>\n                <path d="M14.4375,1.5 L14.4375,6 C14.4375,6.82842712 15.1090729,7.5 15.9375,7.5 L20.4375,7.5 L20.4375,7.5 L14.4375,1.5 Z" id="路径-3" fill="#CBBCEB" mask="url(#mask-2)"></path>\n            </g>\n        </g>\n    </g>\n</svg>',extAi:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>ai</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="ai" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组">\n            <mask id="mask-2" fill="white">\n                <use xlink:href="#path-1"></use>\n            </mask>\n            <g id="蒙版"></g>\n            <path d="M14.4375,1.5 L20.4375,7.5 L20.4375,20.25 C20.4375,21.4926407 19.4301407,22.5 18.1875,22.5 L5.8125,22.5 C4.56985931,22.5 3.5625,21.4926407 3.5625,20.25 L3.5625,3.75 C3.5625,2.50735931 4.56985931,1.5 5.8125,1.5 L14.4375,1.5 Z M10.5560056,8.9953746 C10.2441133,8.99095554 9.95006829,9.18292819 9.8392086,9.49303629 L9.8392086,9.49303629 L7.26252063,16.7008129 L7.23470926,16.7989487 C7.15824354,17.1603774 7.35874563,17.5316955 7.71628203,17.6595102 C8.10632174,17.7989444 8.53554516,17.5957885 8.67497937,17.2057488 L8.67497937,17.2057488 L9.20554565,15.7212999 L11.9055457,15.7212999 L12.436271,17.2057488 L12.4769764,17.2992752 C12.6469703,17.6272687 13.0374319,17.7873249 13.3949683,17.6595102 C13.7525047,17.5316955 13.9530068,17.1603774 13.8765411,16.7989487 L13.8765411,16.7989487 L13.8487297,16.7008129 L11.2720417,9.49303629 L11.225456,9.38839352 C11.1001921,9.15632351 10.8634086,9.01102426 10.6080809,8.99650197 L10.6080809,8.99650197 Z M15.6374998,11.5406249 C15.2232863,11.5406249 14.8874998,11.8764114 14.8874998,12.2906249 L14.8874998,12.2906249 L14.8874998,16.8656248 C14.8874998,17.2798383 15.2232863,17.6156248 15.6374998,17.6156248 C16.0517134,17.6156248 16.3874998,17.2798383 16.3874998,16.8656248 L16.3874998,16.8656248 L16.3874998,12.2906249 C16.3874998,11.8764114 16.0517134,11.5406249 15.6374998,11.5406249 Z M10.5555457,11.9442999 L11.4365457,14.4092999 L9.67454565,14.4092999 L10.5555457,11.9442999 Z M15.6374998,9.09375 C15.2232863,9.09375 14.8874998,9.42953644 14.8874998,9.84375 C14.8874998,10.2579636 15.2232863,10.59375 15.6374998,10.59375 C16.0517134,10.59375 16.3874998,10.2579636 16.3874998,9.84375 C16.3874998,9.42953644 16.0517134,9.09375 15.6374998,9.09375 Z" id="形状结合" fill="#F7AD2D" mask="url(#mask-2)"></path>\n            <path d="M14.4375,1.5 L14.4375,6 C14.4375,6.82842712 15.1090729,7.5 15.9375,7.5 L20.4375,7.5 L20.4375,7.5 L14.4375,1.5 Z" id="路径-3" fill="#FBDAA0" mask="url(#mask-2)"></path>\n            <g id="编组-2" mask="url(#mask-2)">\n                <g transform="translate(6.968750, 8.093750)"></g>\n            </g>\n        </g>\n    </g>\n</svg>',extAudio:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>redio</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="redio">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <path d="M14.4375,1.5 L20.4375,7.5 L20.4375,20.25 C20.4375,21.4926407 19.4301407,22.5 18.1875,22.5 L5.8125,22.5 C4.56985931,22.5 3.5625,21.4926407 3.5625,20.25 L3.5625,3.75 C3.5625,2.50735931 4.56985931,1.5 5.8125,1.5 L14.4375,1.5 Z M12.1723948,8.82708169 C11.8825116,8.82708169 11.6475148,9.06207846 11.6475148,9.35196167 L11.6475148,9.35196167 L11.6475148,14.5273788 C11.6475148,14.7028195 11.6484631,15.0099303 11.4659964,15.2008653 C11.2835297,15.3918002 11.1212742,15.424416 10.9344801,15.424416 L10.9344801,15.424416 L10.1021495,15.424416 C9.69642395,15.424416 9.26806428,15.605113 9.03082242,15.8420769 C8.79358056,16.0790408 8.625,16.3471936 8.625,16.6653816 C8.625,17.0318322 8.76506966,17.3300566 9.04519745,17.5602705 C9.32532524,17.7909919 9.67771173,17.90625 10.1021495,17.90625 C10.6624166,17.90625 11.3826934,17.8516709 11.8706398,17.5364415 C12.3585862,17.221212 12.4818602,16.6124487 12.4818602,16.1813972 L12.4818602,16.1813972 L12.4818602,11.1144181 C12.4818602,11.0778883 12.4856737,11.0414584 12.4932386,11.0057205 C12.5532706,10.7221214 12.8318387,10.5408845 13.1154377,10.6009166 L13.1154377,10.6009166 L14.3790887,10.8684052 C14.4246883,10.8780576 14.471171,10.8829234 14.5177811,10.8829234 C14.8876566,10.8829234 15.1875,10.5830801 15.1875,10.2132045 C15.1875,9.73394358 14.8464576,9.32251233 14.3755113,9.23362683 L14.3755113,9.23362683 L12.269741,8.83618777 C12.2376462,8.83013027 12.2050562,8.82708169 12.1723948,8.82708169 Z" id="形状结合" fill="#4E86E6" mask="url(#mask-2)"></path>\n                <path d="M14.4375,1.5 L14.4375,6 C14.4375,6.82842712 15.1090729,7.5 15.9375,7.5 L20.4375,7.5 L20.4375,7.5 L14.4375,1.5 Z" id="路径-3" fill="#A9C6F3" mask="url(#mask-2)"></path>\n            </g>\n        </g>\n    </g>\n</svg>',extSheet:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>sheet</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="sheet">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <g id="编组-2" mask="url(#mask-2)">\n                    <g transform="translate(3.562500, 1.500000)">\n                        <path d="M10.875,0 L16.875,6 L16.875,18.75 C16.875,19.9926407 15.8676407,21 14.625,21 L2.25,21 C1.00735931,21 -7.35998826e-16,19.9926407 0,18.75 L0,2.25 C-1.52179594e-16,1.00735931 1.00735931,2.28269391e-16 2.25,0 L10.875,0 Z M12.090375,8.34375 L4.78462496,8.34375 C4.21321737,8.34375 3.75,8.80696737 3.75,9.37837496 L3.75,9.37837496 L3.75,14.434125 C3.75,15.0055326 4.21321737,15.46875 4.78462496,15.46875 L4.78462496,15.46875 L12.090375,15.46875 C12.6617826,15.46875 13.125,15.0055326 13.125,14.434125 L13.125,14.434125 L13.125,9.37837496 C13.125,8.80696737 12.6617826,8.34375 12.090375,8.34375 L12.090375,8.34375 Z M6.30384376,12.65625 C6.44669566,12.65625 6.5625,12.7720543 6.5625,12.9149062 L6.5625,12.9149062 L6.5625,13.7100938 L6.5556687,13.7694013 C6.52886105,13.8836693 6.42628824,13.96875 6.30384376,13.96875 L6.30384376,13.96875 L5.32115624,13.96875 L5.26184874,13.9619187 C5.14758074,13.9351111 5.0625,13.8325382 5.0625,13.7100938 L5.0625,13.7100938 L5.0625,12.9149062 L5.0693313,12.8555987 C5.09613895,12.7413307 5.19871176,12.65625 5.32115624,12.65625 L5.32115624,12.65625 Z M11.5538438,12.65625 C11.6966957,12.65625 11.8125,12.7720543 11.8125,12.9149062 L11.8125,12.9149062 L11.8125,13.7100938 L11.8056687,13.7694013 C11.7788611,13.8836693 11.6762882,13.96875 11.5538438,13.96875 L11.5538438,13.96875 L8.13365624,13.96875 L8.07434874,13.9619187 C7.96008074,13.9351111 7.875,13.8325382 7.875,13.7100938 L7.875,13.7100938 L7.875,12.9149062 L7.8818313,12.8555987 C7.90863895,12.7413307 8.01121176,12.65625 8.13365624,12.65625 L8.13365624,12.65625 Z M6.30384376,9.84375 C6.44669566,9.84375 6.5625,9.95955434 6.5625,10.1024062 L6.5625,10.1024062 L6.5625,10.8975938 L6.5556687,10.9569013 C6.52886105,11.0711693 6.42628824,11.15625 6.30384376,11.15625 L6.30384376,11.15625 L5.32115624,11.15625 L5.26184874,11.1494187 C5.14758074,11.1226111 5.0625,11.0200382 5.0625,10.8975938 L5.0625,10.8975938 L5.0625,10.1024062 L5.0693313,10.0430987 C5.09613895,9.92883074 5.19871176,9.84375 5.32115624,9.84375 L5.32115624,9.84375 Z M11.5538438,9.84375 C11.6966957,9.84375 11.8125,9.95955434 11.8125,10.1024062 L11.8125,10.1024062 L11.8125,10.8975938 L11.8056687,10.9569013 C11.7788611,11.0711693 11.6762882,11.15625 11.5538438,11.15625 L11.5538438,11.15625 L8.13365624,11.15625 L8.07434874,11.1494187 C7.96008074,11.1226111 7.875,11.0200382 7.875,10.8975938 L7.875,10.8975938 L7.875,10.1024062 L7.8818313,10.0430987 C7.90863895,9.92883074 8.01121176,9.84375 8.13365624,9.84375 L8.13365624,9.84375 Z" id="形状结合" fill="#48A35F"></path>\n                        <path d="M10.875,0 L10.875,4.5 C10.875,5.32842712 11.5465729,6 12.375,6 L16.875,6 L16.875,6 L10.875,0 Z" id="路径-3" fill="#ACD5B7"></path>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extDoc:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>doc</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="doc">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <path d="M14.4375,1.5 L20.4375,7.5 L20.4375,20.25 C20.4375,21.4926407 19.4301407,22.5 18.1875,22.5 L5.8125,22.5 C4.56985931,22.5 3.5625,21.4926407 3.5625,20.25 L3.5625,3.75 C3.5625,2.50735931 4.56985931,1.5 5.8125,1.5 L14.4375,1.5 Z M13.4144332,9.375 L9.28125,9.375 C8.86703644,9.375 8.53125,9.71078644 8.53125,10.125 L8.53125,10.125 L8.53125,16.875 C8.53125,17.2892136 8.86703644,17.625 9.28125,17.625 L9.28125,17.625 L14.71875,17.625 C15.1329636,17.625 15.46875,17.2892136 15.46875,16.875 L15.46875,16.875 L15.46875,11.485373 C15.46875,11.2919214 15.3940004,11.1059518 15.2601167,10.9663141 L15.2601167,10.9663141 L13.9557999,9.60594112 C13.8143497,9.45841179 13.6188178,9.375 13.4144332,9.375 L13.4144332,9.375 Z M13.03125,14.25 C13.3419102,14.25 13.59375,14.5018398 13.59375,14.8125 C13.59375,15.1231602 13.3419102,15.375 13.03125,15.375 L13.03125,15.375 L10.96875,15.375 L10.8775096,15.3676378 C10.6102403,15.3240438 10.40625,15.0920942 10.40625,14.8125 C10.40625,14.5018398 10.6580898,14.25 10.96875,14.25 L10.96875,14.25 Z M13.03125,11.625 C13.3419102,11.625 13.59375,11.8768398 13.59375,12.1875 C13.59375,12.4981602 13.3419102,12.75 13.03125,12.75 L13.03125,12.75 L10.96875,12.75 L10.8775096,12.7426378 C10.6102403,12.6990438 10.40625,12.4670942 10.40625,12.1875 C10.40625,11.8768398 10.6580898,11.625 10.96875,11.625 L10.96875,11.625 Z" id="形状结合" fill="#4E86E6" mask="url(#mask-2)"></path>\n                <path d="M14.4375,1.5 L14.4375,6 C14.4375,6.82842712 15.1090729,7.5 15.9375,7.5 L20.4375,7.5 L20.4375,7.5 L14.4375,1.5 Z" id="路径-3" fill="#A9C6F3" mask="url(#mask-2)"></path>\n                <g id="编组-2" mask="url(#mask-2)">\n                    <g transform="translate(8.531250, 9.375000)" id="编组-3">\n                        <g></g>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extMinimap:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>mindmap</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="mindmap">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <g id="编组-2" mask="url(#mask-2)">\n                    <g transform="translate(3.750000, 1.500000)">\n                        <path d="M10.5,0 L16.5,6 L16.5,18.75 C16.5,19.9926407 15.4926407,21 14.25,21 L2.25,21 C1.00735931,21 1.52179594e-16,19.9926407 0,18.75 L0,2.25 C-1.52179594e-16,1.00735931 1.00735931,2.28269391e-16 2.25,0 L10.5,0 Z M6.62093037,8.25 L4.01595851,8.25 C3.86907368,8.25 3.75,8.36907368 3.75,8.51595851 L3.75,8.51595851 L3.75,15.0319419 C3.75,15.1788268 3.86907368,15.2979004 4.01595851,15.2979004 L4.01595851,15.2979004 L12.5266307,15.2979004 L12.5876126,15.2908763 C12.7051065,15.2633118 12.7925892,15.1578432 12.7925892,15.0319419 L12.7925892,15.0319419 L12.7925892,8.51595851 L12.7855651,8.45497666 C12.7580006,8.3374827 12.652532,8.25 12.5266307,8.25 L12.5266307,8.25 L9.92165887,8.25 L9.82474751,8.258888 C9.66659815,8.28817652 9.52810216,8.38815017 9.45134136,8.53344739 L9.45134136,8.53344739 L8.271,10.767 L7.09124787,8.53344739 C6.99913492,8.35909072 6.81812328,8.25 6.62093037,8.25 L6.62093037,8.25 Z" id="形状结合" fill="#4E86E6"></path>\n                        <path d="M10.5,0 L10.5,4.5 C10.5,5.32842712 11.1715729,6 12,6 L16.5,6 L16.5,6 L10.5,0 Z" id="路径-3" fill="#A9C6F3"></path>\n                    </g>\n                </g>\n                <g id="编组-3" mask="url(#mask-2)" fill="#E8E8E8">\n                    <g transform="translate(9.500000, 11.750000)" id="路径-24">\n                        <path d="M2.52129462,0.515968247 L4.70884602,4.65773153 C4.77744553,4.78761324 4.72776649,4.94851407 4.59788477,5.01711358 C4.5596041,5.03733224 4.51696645,5.04790043 4.47367437,5.04790043 L0.568914866,5.04790043 C0.422030038,5.04790043 0.302956359,4.92882676 0.302956359,4.78194193 C0.302956359,4.73864985 0.313524549,4.6960122 0.333743217,4.65773153 L2.52129462,0.515968247 L2.52129462,0.515968247 Z"></path>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extNumbers:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>numbers</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="numbers">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <g id="编组-2" mask="url(#mask-2)">\n                    <g transform="translate(3.562500, 1.500000)">\n                        <path d="M10.875,0 L16.875,6 L16.875,18.75 C16.875,19.9926407 15.8676407,21 14.625,21 L2.25,21 C1.00735931,21 -7.35998826e-16,19.9926407 0,18.75 L0,2.25 C-1.52179594e-16,1.00735931 1.00735931,2.28269391e-16 2.25,0 L10.875,0 Z M12.9547018,15.84375 L3.92029817,15.84375 C3.670915,15.84375 3.46875,16.045915 3.46875,16.2952982 C3.46875,16.5446813 3.670915,16.7468463 3.92029817,16.7468463 L3.92029817,16.7468463 L12.9547018,16.7468463 C13.204085,16.7468463 13.40625,16.5446813 13.40625,16.2952982 C13.40625,16.045915 13.204085,15.84375 12.9547018,15.84375 L12.9547018,15.84375 Z M12.9511364,9.49577944 L11.9863636,9.49577944 C11.786788,9.49577944 11.625,9.65756745 11.625,9.85714308 L11.625,9.85714308 L11.625,14.4511364 C11.625,14.650712 11.786788,14.8125 11.9863636,14.8125 L11.9863636,14.8125 L12.9511364,14.8125 C13.150712,14.8125 13.3125,14.650712 13.3125,14.4511364 L13.3125,14.4511364 L13.3125,9.85714308 C13.3125,9.65756745 13.150712,9.49577944 12.9511364,9.49577944 L12.9511364,9.49577944 Z M4.79488636,12.9334674 L3.83011364,12.9334674 C3.63053801,12.9334674 3.46875,13.0952554 3.46875,13.2948311 L3.46875,13.2948311 L3.46875,14.4511364 C3.46875,14.650712 3.63053801,14.8125 3.83011364,14.8125 L3.83011364,14.8125 L4.79488636,14.8125 C4.99446199,14.8125 5.15625,14.650712 5.15625,14.4511364 L5.15625,14.4511364 L5.15625,13.2948311 C5.15625,13.0952554 4.99446199,12.9334674 4.79488636,12.9334674 L4.79488636,12.9334674 Z M7.51363636,11.1746503 L6.54886364,11.1746503 C6.34928801,11.1746503 6.1875,11.3364383 6.1875,11.536014 L6.1875,11.536014 L6.1875,14.4511364 C6.1875,14.650712 6.34928801,14.8125 6.54886364,14.8125 L6.54886364,14.8125 L7.51363636,14.8125 C7.71321199,14.8125 7.875,14.650712 7.875,14.4511364 L7.875,14.4511364 L7.875,11.536014 C7.875,11.3364383 7.71321199,11.1746503 7.51363636,11.1746503 L7.51363636,11.1746503 Z M10.2323864,6.9375 L9.26761364,6.9375 C9.06803801,6.9375 8.90625,7.09928801 8.90625,7.29886364 L8.90625,7.29886364 L8.90625,14.4511364 C8.90625,14.650712 9.06803801,14.8125 9.26761364,14.8125 L9.26761364,14.8125 L10.2323864,14.8125 C10.431962,14.8125 10.59375,14.650712 10.59375,14.4511364 L10.59375,14.4511364 L10.59375,7.29886364 C10.59375,7.09928801 10.431962,6.9375 10.2323864,6.9375 L10.2323864,6.9375 Z" id="形状结合" fill="#48A35F"></path>\n                        <path d="M10.875,0 L10.875,4.5 C10.875,5.32842712 11.5465729,6 12.375,6 L16.875,6 L16.875,6 L10.875,0 Z" id="路径-3" fill="#ACD5B7"></path>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extGraffle:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>graffle</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="graffle">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <g id="编组-2" mask="url(#mask-2)">\n                    <g transform="translate(3.562500, 1.500000)">\n                        <path d="M10.875,0 L16.875,6 L16.875,18.75 C16.875,19.9926407 15.8676407,21 14.625,21 L2.25,21 C1.00735931,21 -7.35998826e-16,19.9926407 0,18.75 L0,2.25 C-1.52179594e-16,1.00735931 1.00735931,2.28269391e-16 2.25,0 L10.875,0 Z M10.1965461,7.3125 C9.62236975,7.3125 9.15690789,7.77577754 9.15690789,8.34725936 C9.15690789,8.54900976 9.21491859,8.73727461 9.3152437,8.89643131 L9.3152437,8.89643131 L7.99419651,10.2895167 C7.75648552,10.1414221 7.47545819,10.0558155 7.17434211,10.0558155 C6.92518872,10.0558155 6.68978902,10.1144257 6.48130137,10.2185493 L6.48130137,10.2185493 L5.85206616,9.4150961 C6.01296108,9.23289 6.11052632,8.99392837 6.11052632,8.7322861 C6.11052632,8.16080428 5.64506446,7.69752674 5.07088816,7.69752674 C4.49671186,7.69752674 4.03125,8.16080428 4.03125,8.7322861 C4.03125,9.30376791 4.49671186,9.76704545 5.07088816,9.76704545 C5.1705565,9.76704545 5.26694908,9.75308611 5.35819998,9.72702459 L5.35819998,9.72702459 L6.02035105,10.5698865 C5.7757056,10.8422763 5.62697368,11.2018118 5.62697368,11.5959225 C5.62697368,12.2113717 5.98967764,12.7425045 6.51394142,12.9891206 L6.51394142,12.9891206 L6.13887597,14.2442791 L6.13887597,14.2442791 L6.08634868,14.2429813 C5.51217238,14.2429813 5.04671053,14.7062588 5.04671053,15.2777406 C5.04671053,15.8492225 5.51217238,16.3125 6.08634868,16.3125 C6.66052498,16.3125 7.12598684,15.8492225 7.12598684,15.2777406 C7.12598684,14.9297717 6.95341887,14.6219191 6.68881613,14.4343379 L6.68881613,14.4343379 L7.0761016,13.1329756 C7.10858681,13.1350013 7.14134383,13.1360294 7.17434211,13.1360294 C7.54375924,13.1360294 7.88294072,13.0071827 8.14899685,12.7921778 L8.14899685,12.7921778 L9.86774788,14.1518152 C9.81481002,14.275939 9.78552632,14.4124735 9.78552632,14.5558155 C9.78552632,15.1272973 10.2509882,15.5905749 10.8251645,15.5905749 C11.3993408,15.5905749 11.8648026,15.1272973 11.8648026,14.5558155 C11.8648026,13.9843337 11.3993408,13.5210561 10.8251645,13.5210561 C10.6061268,13.5210561 10.4029102,13.5884761 10.2353199,13.7036035 L10.2353199,13.7036035 L8.52346313,12.3506976 C8.60421584,12.2080146 8.66278055,12.0512326 8.69449865,11.8849882 L8.69449865,11.8849882 L11.3014711,11.886155 C11.485975,12.174615 11.8100907,12.3659759 12.1791118,12.3659759 C12.7532881,12.3659759 13.21875,11.9026984 13.21875,11.3312166 C13.21875,10.7597348 12.7532881,10.2964572 12.1791118,10.2964572 C11.6130655,10.2964572 11.1526767,10.7467083 11.1397526,11.3070073 L11.1397526,11.3070073 L8.69449865,11.3068567 C8.65050373,11.0762657 8.55485762,10.8638796 8.41999239,10.6820722 L8.41999239,10.6820722 L9.74866097,9.28133744 C9.88429373,9.34587959 10.0361796,9.38201872 10.1965461,9.38201872 C10.7707224,9.38201872 11.2361842,8.91874117 11.2361842,8.34725936 C11.2361842,7.77577754 10.7707224,7.3125 10.1965461,7.3125 Z" id="形状结合" fill="#48A35F"></path>\n                        <path d="M10.875,0 L10.875,4.5 C10.875,5.32842712 11.5465729,6 12.375,6 L16.875,6 L16.875,6 L10.875,0 Z" id="路径-3" fill="#ACD5B7"></path>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extSketch:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>sketch</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="sketch" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组">\n            <mask id="mask-2" fill="white">\n                <use xlink:href="#path-1"></use>\n            </mask>\n            <g id="蒙版"></g>\n            <g id="编组-3" mask="url(#mask-2)">\n                <g transform="translate(3.562500, 1.500000)">\n                    <path d="M10.875,0 L16.875,6 L16.875,18.75 C16.875,19.9926407 15.8676407,21 14.625,21 L2.25,21 C1.00735931,21 -7.35998826e-16,19.9926407 0,18.75 L0,2.25 C-1.52179594e-16,1.00735931 1.00735931,2.28269391e-16 2.25,0 L10.875,0 Z M6.0027959,10.8349901 L8.5467959,15.7699901 L8.56090625,15.740625 L8.56090625,10.842625 L6.0027959,10.8349901 Z M8.56190625,10.842625 L8.56190625,15.738625 L11.0827959,10.8509901 L8.56190625,10.842625 Z M11.6787959,10.8529901 L9.39490625,15.283625 L13.1869062,10.857625 L11.6787959,10.8529901 Z M3.91190625,10.827625 L7.65490625,15.197625 L5.4047959,10.8329901 L3.91190625,10.827625 Z M11.6759062,7.996625 L11.7697959,10.2979901 L11.7737959,10.3019901 L13.3679062,10.307625 L11.6759062,7.996625 Z M8.56190625,7.746625 L8.56190625,10.291625 L11.0847959,10.2999901 L8.56190625,7.746625 Z M8.5467959,7.73099015 L6.0257959,10.2839901 L8.56090625,10.291625 L8.56090625,7.745625 L8.5467959,7.73099015 Z M5.49790625,7.926625 L3.77790625,10.276625 L5.2517959,10.2809901 L5.49790625,7.926625 Z M8.25890625,7.317625 L5.90290625,7.580625 L5.8127959,9.80099015 L8.25890625,7.317625 Z M8.83090625,7.313625 L11.1937959,9.71299015 L11.1059062,7.567625 L8.83090625,7.313625 Z" id="形状结合" fill="#F7AD2D"></path>\n                    <path d="M10.875,0 L10.875,4.5 C10.875,5.32842712 11.5465729,6 12.375,6 L16.875,6 L16.875,6 L10.875,0 Z" id="路径-3" fill="#FBDAA0"></path>\n                </g>\n            </g>\n            <g id="编组-2" mask="url(#mask-2)">\n                <g transform="translate(7.312500, 8.812500)"></g>\n            </g>\n        </g>\n    </g>\n</svg>',extRar:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>rar</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="rar">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <g id="编组-3" mask="url(#mask-2)">\n                    <g transform="translate(3.562500, 1.500000)">\n                        <path d="M10.875,0 L16.875,6 L16.875,18.75 C16.875,19.9926407 15.8676407,21 14.625,21 L2.25,21 C1.00735931,21 -7.35998826e-16,19.9926407 0,18.75 L0,2.25 C-1.52179594e-16,1.00735931 1.00735931,2.28269391e-16 2.25,0 L10.875,0 Z M8.296875,13.440581 L6.9225,13.440581 C6.82723088,13.440581 6.75,13.5178119 6.75,13.613081 L6.75,13.613081 L6.75,16.60875 C6.75,16.7040191 6.82723088,16.78125 6.9225,16.78125 L6.9225,16.78125 L9.67125,16.78125 C9.76651912,16.78125 9.84375,16.7040191 9.84375,16.60875 L9.84375,16.60875 L9.84375,14.4845599 C9.84375,14.3892907 9.76651912,14.3120599 9.67125,14.3120599 L9.67125,14.3120599 L8.296875,14.3120599 L8.296875,13.440581 Z M8.93464285,15.1835387 C9.02991198,15.1835387 9.10714286,15.2607696 9.10714286,15.3560387 L9.10714286,15.3560387 L9.10714286,15.8825176 L9.09834869,15.9370409 C9.07552897,16.0055898 9.01085815,16.0550176 8.93464285,16.0550176 L8.93464285,16.0550176 L7.65910715,16.0550176 L7.6045838,16.0462234 C7.53603491,16.0234037 7.48660714,15.9587329 7.48660714,15.8825176 L7.48660714,15.8825176 L7.48660714,15.3560387 L7.49540131,15.3015154 C7.51822103,15.2329665 7.58289185,15.1835387 7.65910715,15.1835387 L7.65910715,15.1835387 Z M9.67125,12.5691021 L8.296875,12.5691021 L8.296875,13.440581 L9.67125,13.440581 C9.76651912,13.440581 9.84375,13.3633501 9.84375,13.268081 L9.84375,13.268081 L9.84375,12.7416021 C9.84375,12.646333 9.76651912,12.5691021 9.67125,12.5691021 L9.67125,12.5691021 Z M8.296875,11.6976232 L6.9225,11.6976232 C6.82723088,11.6976232 6.75,11.7748541 6.75,11.8701232 L6.75,11.8701232 L6.75,12.3966021 C6.75,12.4918712 6.82723088,12.5691021 6.9225,12.5691021 L6.9225,12.5691021 L8.296875,12.5691021 L8.296875,11.6976232 Z M9.67125,10.8261444 L8.296875,10.8261444 L8.296875,11.6976232 L9.67125,11.6976232 C9.76651912,11.6976232 9.84375,11.6203924 9.84375,11.5251232 L9.84375,11.5251232 L9.84375,10.9986444 C9.84375,10.9033752 9.76651912,10.8261444 9.67125,10.8261444 L9.67125,10.8261444 Z M8.296875,9.95466549 L6.9225,9.95466549 C6.82723088,9.95466549 6.75,10.0318964 6.75,10.1271655 L6.75,10.1271655 L6.75,10.6536444 C6.75,10.7489135 6.82723088,10.8261444 6.9225,10.8261444 L6.9225,10.8261444 L8.296875,10.8261444 L8.296875,9.95466549 Z M9.67125,9.08318662 L8.296875,9.08318662 L8.296875,9.95466549 L9.67125,9.95466549 C9.76651912,9.95466549 9.84375,9.87743461 9.84375,9.78216549 L9.84375,9.78216549 L9.84375,9.25568662 C9.84375,9.1604175 9.76651912,9.08318662 9.67125,9.08318662 L9.67125,9.08318662 Z M8.296875,8.21170775 L6.9225,8.21170775 C6.82723088,8.21170775 6.75,8.28893863 6.75,8.38420775 L6.75,8.38420775 L6.75,8.91068662 C6.75,9.00595574 6.82723088,9.08318662 6.9225,9.08318662 L6.9225,9.08318662 L8.296875,9.08318662 L8.296875,8.21170775 Z M9.67125,7.34022887 L8.296875,7.34022887 L8.296875,8.21170775 L9.67125,8.21170775 C9.76651912,8.21170775 9.84375,8.13447686 9.84375,8.03920774 L9.84375,8.03920774 L9.84375,7.51272888 C9.84375,7.41745976 9.76651912,7.34022887 9.67125,7.34022887 L9.67125,7.34022887 Z M8.124375,6.46875 L6.9225,6.46875 C6.82723088,6.46875 6.75,6.54598088 6.75,6.64125 L6.75,6.64125 L6.75,7.16772887 C6.75,7.26299799 6.82723088,7.34022887 6.9225,7.34022887 L6.9225,7.34022887 L8.296875,7.34022887 L8.296875,6.64125 C8.296875,6.54598088 8.21964412,6.46875 8.124375,6.46875 L8.124375,6.46875 Z" id="形状结合" fill="#8B6AD4"></path>\n                        <path d="M10.875,0 L10.875,4.5 C10.875,5.32842712 11.5465729,6 12.375,6 L16.875,6 L16.875,6 L10.875,0 Z" id="路径-3" fill="#CBBCEB"></path>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',extWord:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>word</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="word">\n            <g id="编组">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="蒙版"></g>\n                <path d="M14.4375,1.5 L20.4375,7.5 L20.4375,20.25 C20.4375,21.4926407 19.4301407,22.5 18.1875,22.5 L5.8125,22.5 C4.56985931,22.5 3.5625,21.4926407 3.5625,20.25 L3.5625,3.75 C3.5625,2.50735931 4.56985931,1.5 5.8125,1.5 L14.4375,1.5 Z M16.0392492,9.11967819 C15.6393554,9.01170686 15.2276494,9.24835679 15.119678,9.64825061 L15.119678,9.64825061 L13.909,14.129 L12.7480918,10.241571 L12.6935686,10.1275558 L12.6401799,10.0486326 L12.5817612,9.98180582 L12.5003744,9.91033032 L12.4170403,9.85546596 L12.3249987,9.81117772 L12.2740224,9.79290148 L12.1847945,9.7703836 L12.0864918,9.75862792 L11.977075,9.76080885 L11.8852992,9.77533124 L11.8325797,9.78902021 L11.737975,9.8242237 C11.6428672,9.86706052 11.5601714,9.92817516 11.4936453,10.0011045 L11.4936453,10.0011045 L11.4689815,10.0295732 L11.4307328,10.079766 L11.3979868,10.1316587 L11.3449707,10.2433848 L10.184,14.129 L8.97407181,9.64825061 L8.94093378,9.55178304 C8.79756484,9.21130834 8.42106995,9.02070447 8.05450061,9.11967819 C7.65460679,9.22764952 7.41795686,9.63935557 7.52592819,10.0392494 L7.52592819,10.0392494 L9.42436565,17.0704994 L9.46214416,17.1797158 C9.72747062,17.7992767 10.6626582,17.7752182 10.8671708,17.0892952 L10.8671708,17.0892952 L12.047,13.132 L13.2265791,17.0892952 L13.2671899,17.1974904 C13.5485659,17.8099293 14.4828094,17.7615172 14.6693842,17.0704994 L14.6693842,17.0704994 L16.5678217,10.0392494 L16.5877398,9.93921245 C16.6352177,9.57284716 16.4058186,9.21865191 16.0392492,9.11967819 Z" id="形状结合" fill="#4E86E6" mask="url(#mask-2)"></path>\n                <path d="M14.4375,1.5 L14.4375,6 C14.4375,6.82842712 15.1090729,7.5 15.9375,7.5 L20.4375,7.5 L20.4375,7.5 L14.4375,1.5 Z" id="路径-3" fill="#A9C6F3" mask="url(#mask-2)"></path>\n            </g>\n        </g>\n    </g>\n</svg>',extLake:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>文档</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="24" height="24"></rect>\n    </defs>\n    <g id="文档" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组">\n            <mask id="mask-2" fill="white">\n                <use xlink:href="#path-1"></use>\n            </mask>\n            <g id="蒙版"></g>\n            <path d="M18.375,2.625 C20.0318542,2.625 21.375,3.96814575 21.375,5.625 L21.375,18.375 C21.375,20.0318542 20.0318542,21.375 18.375,21.375 L5.625,21.375 C3.96814575,21.375 2.625,20.0318542 2.625,18.375 L2.625,5.625 C2.625,3.96814575 3.96814575,2.625 5.625,2.625 L18.375,2.625 Z M10.96875,15.09375 L7.03125,15.09375 C6.46170635,15.09375 6,15.5554564 6,16.125 C6,16.6945436 6.46170635,17.15625 7.03125,17.15625 L7.03125,17.15625 L10.96875,17.15625 C11.5382936,17.15625 12,16.6945436 12,16.125 C12,15.5554564 11.5382936,15.09375 10.96875,15.09375 L10.96875,15.09375 Z M16.96875,10.96875 L7.03125,10.96875 C6.46170635,10.96875 6,11.4304564 6,12 C6,12.5695436 6.46170635,13.03125 7.03125,13.03125 L7.03125,13.03125 L16.96875,13.03125 C17.5382936,13.03125 18,12.5695436 18,12 C18,11.4304564 17.5382936,10.96875 16.96875,10.96875 L16.96875,10.96875 Z M16.96875,6.84375 L7.03125,6.84375 C6.46170635,6.84375 6,7.30545635 6,7.875 C6,8.44454365 6.46170635,8.90625 7.03125,8.90625 L7.03125,8.90625 L16.96875,8.90625 C17.5382936,8.90625 18,8.44454365 18,7.875 C18,7.30545635 17.5382936,6.84375 16.96875,6.84375 L16.96875,6.84375 Z" id="形状结合" fill="#4E86E6" mask="url(#mask-2)"></path>\n        </g>\n    </g>\n</svg>',extLakesheet:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n    <title>表格</title>\n    <desc>Created with Sketch.</desc>\n    <g id="表格" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组">\n            <rect id="蒙版" x="0" y="0" width="24" height="24"></rect>\n            <path d="M18.375,2.625 C20.0318542,2.625 21.375,3.96814575 21.375,5.625 L21.375,18.375 C21.375,20.0318542 20.0318542,21.375 18.375,21.375 L5.625,21.375 C3.96814575,21.375 2.625,20.0318542 2.625,18.375 L2.625,5.625 C2.625,3.96814575 3.96814575,2.625 5.625,2.625 L18.375,2.625 Z M16.21875,5.34375 L7.6875,5.34375 L7.5272337,5.34893474 C6.25574754,5.43146229 5.25,6.48890369 5.25,7.78125 L5.25,7.78125 L5.25,16.21875 L5.25518474,16.3790163 C5.33771229,17.6505025 6.39515369,18.65625 7.6875,18.65625 L7.6875,18.65625 L16.21875,18.65625 L16.3790163,18.6510653 C17.6505025,18.5685377 18.65625,17.5110963 18.65625,16.21875 L18.65625,16.21875 L18.65625,7.78125 L18.6510653,7.6209837 C18.5685377,6.34949754 17.5110963,5.34375 16.21875,5.34375 L16.21875,5.34375 Z M9.375,14.53075 L9.375,16.78075 L7.6875,16.78125 L7.59625958,16.7738878 C7.32899026,16.7302938 7.125,16.4983442 7.125,16.21875 L7.125,16.21875 L7.125,14.53075 L9.375,14.53075 Z M16.781,14.53075 L16.78125,16.21875 L16.7738878,16.3099904 C16.7302938,16.5772597 16.4983442,16.78125 16.21875,16.78125 L16.21875,16.78125 L10.312,16.78075 L10.312,14.53075 L16.781,14.53075 Z M9.375,10.87475 L9.375,13.21875 L7.125,13.21875 L7.125,10.87475 L9.375,10.87475 Z M16.781,10.87475 L16.781,13.21875 L10.312,13.21875 L10.312,10.87475 L16.781,10.87475 Z M9.375,7.21875 L9.375,9.56175 L7.125,9.56175 L7.125,7.78125 L7.13236218,7.69000958 C7.17595617,7.42274026 7.40790585,7.21875 7.6875,7.21875 L7.6875,7.21875 L9.375,7.21875 Z M16.21875,7.21875 L16.3099904,7.22611218 C16.5772597,7.26970617 16.78125,7.50165585 16.78125,7.78125 L16.78125,7.78125 L16.781,9.56175 L10.312,9.56175 L10.312,7.21875 L16.21875,7.21875 Z" id="形状结合" fill="#009D5C"></path>\n        </g>\n    </g>\n</svg>',addRow:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>矩形</title>\n    <g id="分组+数据统计" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="分组视图2" transform="translate(-28.000000, -508.000000)">\n            <g id="编组" transform="translate(16.000000, 203.000000)">\n                <g id="plus" transform="translate(12.000000, 305.000000)">\n                    <rect id="矩形" fill="currentColor" fill-rule="nonzero" opacity="0" x="0" y="0" width="16" height="16"></rect>\n                    <path d="M8,2.5 C8.32791907,2.5 8.59375,2.76583093 8.59375,3.09375 L8.593,7.406 L12.65625,7.40625 C12.9841691,7.40625 13.25,7.67208093 13.25,8 C13.25,8.32791907 12.9841691,8.59375 12.65625,8.59375 L8.593,8.593 L8.59375,12.90625 C8.59375,13.2341691 8.32791907,13.5 8,13.5 C7.67208093,13.5 7.40625,13.2341691 7.40625,12.90625 L7.406,8.593 L3.34375,8.59375 C3.01583093,8.59375 2.75,8.32791907 2.75,8 C2.75,7.67208093 3.01583093,7.40625 3.34375,7.40625 L7.406,7.406 L7.40625,3.09375 C7.40625,2.76583093 7.67208093,2.5 8,2.5 Z" id="形状" fill="currentColor2"></path>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',expand:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="256px" height="256px" viewBox="0 0 256 256" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 58 (84663) - https://sketch.com --\x3e\n    <title>展开</title>\n    <desc>Created with Sketch.</desc>\n    <g id="展开" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="arrowsalt" fill-rule="nonzero">\n            <rect id="矩形" fill="currentColor" opacity="0" x="0" y="0" width="256" height="256"></rect>\n            <path d="M120.382213,133.555287 C124.221265,137.39434 124.286334,143.578245 120.577419,147.496784 L120.382213,147.697423 L61.2111429,206.866857 L98.6697107,206.866095 C104.098951,206.866095 108.517642,211.192766 108.665869,216.58619 L108.669711,216.866095 C108.669711,222.295335 104.34304,226.714026 98.9496155,226.862253 L98.6697107,226.866095 L44.8571429,226.866095 C35.0264743,226.866095 27.0364613,218.985311 26.8601192,209.19676 L26.8571429,208.866095 L26.8571429,156.017857 C26.8571429,150.49501 31.3342954,146.017857 36.8571429,146.017857 C42.2863828,146.017857 46.7050746,150.344528 46.8533011,155.737952 L46.8571429,156.017857 L46.8571429,192.936857 L106.240077,133.555287 C110.14532,129.650044 116.47697,129.650044 120.382213,133.555287 Z M211.669711,25.0178571 C221.500379,25.0178571 229.490392,32.8986405 229.666734,42.6871919 L229.669711,43.0178571 L229.669711,95.8660947 C229.669711,101.388942 225.192558,105.866095 219.669711,105.866095 C214.240471,105.866095 209.821779,101.539424 209.673552,96.1459996 L209.669711,95.8660947 L209.668143,58.9728571 L147.755439,120.886713 C143.850188,124.791948 137.518538,124.791948 133.613287,120.886713 C129.774243,117.047653 129.709174,110.863747 133.418089,106.945208 L133.613295,106.744569 L195.340143,45.0168571 L157.857143,45.0178571 C152.427903,45.0178571 148.009211,40.6911864 147.860985,35.297762 L147.857143,35.0178571 C147.857143,29.5886172 152.183814,25.1699254 157.577238,25.0216989 L157.857143,25.0178571 L211.669711,25.0178571 Z" id="形状结合" fill="currentColor2"></path>\n        </g>\n    </g>\n</svg>',upload:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="12px" height="12px" viewBox="0 0 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>形状</title>\n    <g id="控件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="上传按钮" transform="translate(-7.000000, -7.000000)" fill="currentColor">\n            <g id="plus" transform="translate(5.000000, 5.000000)">\n                <path d="M8,2.5 C8.32791907,2.5 8.59375,2.76583093 8.59375,3.09375 L8.593,7.406 L12.65625,7.40625 C12.9841691,7.40625 13.25,7.67208093 13.25,8 C13.25,8.32791907 12.9841691,8.59375 12.65625,8.59375 L8.593,8.593 L8.59375,12.90625 C8.59375,13.2341691 8.32791907,13.5 8,13.5 C7.67208093,13.5 7.40625,13.2341691 7.40625,12.90625 L7.406,8.593 L3.34375,8.59375 C3.01583093,8.59375 2.75,8.32791907 2.75,8 C2.75,7.67208093 3.01583093,7.40625 3.34375,7.40625 L7.406,7.406 L7.40625,3.09375 C7.40625,2.76583093 7.67208093,2.5 8,2.5 Z" id="形状"></path>\n            </g>\n        </g>\n    </g>\n</svg>',dragger:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1638499714022" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11125" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20"><defs><style type="text/css"></style></defs><path d="M352 748c39.764 0 72 32.236 72 72s-32.236 72-72 72-72-32.236-72-72 32.236-72 72-72z m320 0c39.764 0 72 32.236 72 72s-32.236 72-72 72-72-32.236-72-72 32.236-72 72-72zM352 444c39.764 0 72 32.236 72 72s-32.236 72-72 72-72-32.236-72-72 32.236-72 72-72z m320 0c39.764 0 72 32.236 72 72s-32.236 72-72 72-72-32.236-72-72 32.236-72 72-72zM352 140c39.764 0 72 32.236 72 72s-32.236 72-72 72-72-32.236-72-72 32.236-72 72-72z m320 0c39.764 0 72 32.236 72 72s-32.236 72-72 72-72-32.236-72-72 32.236-72 72-72z" p-id="11126" fill="currentColor"></path></svg>',renderFailImage:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1643008975424" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1345" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M696.43 465.25c40.61 0 73.53-32.72 73.53-73.09s-32.96-73.08-73.53-73.08-73.54 32.72-73.54 73.08 32.92 73.09 73.54 73.09zM535.74 650.62l-273.61-259.4a56.19 56.19 0 0 0-15.36 11.58l-114 119.63-6-222.77c-0.73-26.82 20.84-49.41 47.67-50.14l201.77-5.44 47.34-50-250.43 6.75C119 202.33 76.33 247.17 77.78 301l7.32 271.4 4.5 166.78C91.06 793 136.05 835.47 190.2 834l176-4.75 12-0.32 47.34-50 116.18-122.64z" p-id="1346" fill="currentColor"></path><path d="M861.71 214.8l-242.83-33.86-55.09 41.46L855 263a49.05 49.05 0 0 1 41.79 55.13l-54.33 389.59-120.87-159.05A59.86 59.86 0 0 0 638.06 537l-44 33.08 65.07 86.15L603.84 698l-79.57 60.1-54.92 41.48 34.17 4.76 270.73 37.76a97.55 97.55 0 0 0 109.88-79.6 22.37 22.37 0 0 0 0.65-3.44l60.53-434.16c7.44-53.32-29.95-102.62-83.6-110.1z" p-id="1347" fill="currentColor"></path></svg>',dropdown:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1657006369458" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="24215" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css">@font-face { font-family: feedback-iconfont; src: url("//at.alicdn.com/t/font_1031158_u69w8yhxdu.woff2?t=1630033759944") format("woff2"), url("//at.alicdn.com/t/font_1031158_u69w8yhxdu.woff?t=1630033759944") format("woff"), url("//at.alicdn.com/t/font_1031158_u69w8yhxdu.ttf?t=1630033759944") format("truetype"); }\n</style></defs><path d="M756.352 465.92l-212.096 212.736a45.44 45.44 0 0 1-64.32 0L267.712 465.984a45.76 45.76 0 0 1 32.256-77.952h424.064a45.632 45.632 0 0 1 32.256 77.952h0.064z" p-id="24216" fill="currentColor"></path></svg>'},Ds={colWidth:180,rowHeight:36,colHeaderHeight:36,rowHeaderWidth:54,rowHeaderTinyWidth:36,draggableWidth:30,iconSize:16,actionIconSize:16,addGridColWidth:120,addGridColX:25,addGridRowHeight:32,addGridRowIconSize:24,statsBarHeight:32,defaultFontSize:14,defaultTextSpacing:8,groupPaddingX:16,groupPaddingTitleX:14,groupPaddingY:20,groupHeaderHeight:36,groupRadius:4,groupPaddingColor:"transparent",cellBorder:2,scrollBarWidth:15,groupCollapseSize:20,defaultFont:'normal normal 14px "Helvetica Neue", "Chinese Quote", BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif',cellPaddingX:10,cellPaddingY:12,labelPaddingX:8,labelPaddingY:5,tipSize:12,minColSize:80,maxColSize:800,maxCols:50,colTypeIcons:{input:"svgIcon(input, @yuque-color-icon-primary)",textarea:"svgIcon(textarea, @yuque-color-icon-primary)",number:"svgIcon(number, @yuque-color-icon-primary)",select:"svgIcon(select, @yuque-color-icon-primary)",multiSelect:"svgIcon(multiSelect, @yuque-color-icon-primary)",date:"svgIcon(date, @yuque-color-icon-primary)",createdAt:"svgIcon(createdAt, @yuque-color-icon-primary)",checkbox:"svgIcon(checkbox, @yuque-color-icon-primary)",image:"svgIcon(image, @yuque-color-icon-primary)",mention:"svgIcon(mention, @yuque-color-icon-primary)",file:"svgIcon(file, @yuque-color-icon-primary)",link:"svgIcon(link, @yuque-color-icon-primary)",email:"svgIcon(email, @yuque-color-icon-primary)",phone:"svgIcon(phone, @yuque-color-icon-primary)",updatedAt:"svgIcon(updatedAt, @yuque-color-icon-primary)",userId:"svgIcon(userId, @yuque-color-icon-primary)",modifierId:"svgIcon(modifierId, @yuque-color-icon-primary)",indexLock:"svgIcon(indexLock, #bfbfbf)"},fileIcons:{default:"svgIcon(extDefault, @yuque-color-icon-primary)",axure:"svgIcon(extAxure, @yuque-color-icon-primary)",image:"svgIcon(extImage, @yuque-color-icon-primary)",ppt:"svgIcon(extPPT, @yuque-color-icon-primary)",txt:"svgIcon(extTXT, @yuque-color-icon-primary)",xmind:"svgIcon(extXmind, @yuque-color-icon-primary)",keynote:"svgIcon(extKeynote, @yuque-color-icon-primary)",mindnote:"svgIcon(extMindnote, @yuque-color-icon-primary)",psd:"svgIcon(extPSD, @yuque-color-icon-primary)",pdf:"svgIcon(extPDF, @yuque-color-icon-primary)",excel:"svgIcon(extExcel, @yuque-color-icon-primary)",video:"svgIcon(extVideo, @yuque-color-icon-primary)",ai:"svgIcon(extAi, @yuque-color-icon-primary)",audio:"svgIcon(extAudio, @yuque-color-icon-primary)",sheet:"svgIcon(extSheet, @yuque-color-icon-primary)",doc:"svgIcon(extDoc, @yuque-color-icon-primary)",minimap:"svgIcon(extMinimap, @yuque-color-icon-primary)",numbers:"svgIcon(extNumbers, @yuque-color-icon-primary)",graffle:"svgIcon(extGraffle, @yuque-color-icon-primary)",sketch:"svgIcon(extSketch, @yuque-color-icon-primary)",rar:"svgIcon(extRar, @yuque-color-icon-primary)",word:"svgIcon(extWord, @yuque-color-icon-primary)",lake:"svgIcon(extLake, @yuque-color-icon-primary)",lakesheet:"svgIcon(extLakesheet, @yuque-color-icon-primary)"},widgetIcons:{addRow:"svgIcon(addRow, @black, @yuque-color-icon-secondary)",expand:"svgIcon(expand, @black, @yuque-color-text-link)",upload:"svgIcon(upload, @yuque-color-icon-primary)",dragger:"svgIcon(dragger, @yuque-color-icon-primary)",renderFailImage:"svgIcon(renderFailImage, @yuque-color-icon-disable)",dropdown:"svgIcon(dropdown, @yuque-color-icon-primary)"},fileIconWidth:24,fileIconHeight:24,resizeLine:{strokeStyle:"@yuque-color-cardborder-hover",lineWidth:1},indexLock:{size:14},default:{fillStyle:"@yuque-color-bg-primary",strokeStyle:"@yuque-color-sheetborder",lineWidth:1,textAlign:"left",textBaseline:"middle",fontSize:14,color:"@yuque-color-text-primary",font:'14px "Helvetica Neue", "Chinese Quote", BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif'},header:{fillStyle:"@yuque-color-bg-secondary",strokeStyle:"@yuque-color-sheetborder",lineWidth:1,textAlign:"center",textBaseline:"middle",font:'14px "Helvetica Neue", "Chinese Quote", BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif',color:"@yuque-color-text-body"},gridHeader:{strokeStyle:"@yuque-color-sheetborder",lineWidth:1,textAlign:"left",textBaseline:"middle",font:'14px "Helvetica Neue", "Chinese Quote", BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif',fillStyle:"@yuque-color-text-primary"},activeGrid:{fillStyle:"@yuque-color-bg-secondary"},rowHeader:{fillStyle:"@yuque-color-text-caption",strokeStyle:"@yuque-color-sheetborder",font:'14px "Helvetica Neue", "Chinese Quote", BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif'},disabledGridPlus:{strokeStyle:"@yuque-color-text-disable",fillStyle:"@yuque-color-text-disable"},gridPlus:{strokeStyle:"@yuque-color-text-body"},sortingHeader:{fillStyle:"@yuque-color-bg-secondary",strokeStyle:"@yuque-color-text-link",lineWidth:2},frozenline:{strokeStyle:"@yuque-color-sheetborder",lineWidth:1,fillStyle:"fade(@black, 5%)"},tip:{fillStyle:"@yuque-color-function-error"},selections:{fillStyle:"fade(@cyan-4, 10%)",strokeStyle:"@yuque-color-cardborder-selected",lineWidth:1},actived:{fillStyle:"fade(@white, 10%)",strokeStyle:"@yuque-color-cardborder-selected",lineWidth:2},drag:{strokeStyle:"@yuque-color-text-link"},highlight:{fillStyle:"fade(@yellow-4, 45%)"},activeStats:{fillStyle:"@yuque-color-bg-tertiary"},stats:{textAlign:"right",fillStyle:"@yuque-color-text-caption",font:'12px "Helvetica Neue", "Chinese Quote", BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif'},tempState:{fillStyle:"@yuque-color-table-temp"},emptyGroupHeader:{fillStyle:"@yuque-color-text-caption",textAlign:"left"},dropdown:{fillStyle:"@yuque-color-text-caption"},activeDropdown:{fillStyle:"@yuque-color-bg-tertiary"},mention:{cellPaddingX:6,cellPaddingY:6,bgSize:24,bgRadius:4,bg:{fillStyle:"@yuque-color-bg-primary-hover"},bgNormal:{fillStyle:"@yuque-color-bg-primary"},avatarSize:20,avatarPaddingRight:4,avatarPaddingTop:2,avatarPaddingLeft:2,text:{fillStyle:"@yuque-color-text-primary",textBaseLine:"top"},textPaddingTop:13,textPaddingRight:6,closeSize:20,close:{lineWidth:1,strokeStyle:"@yuque-color-text-caption"},closeBg:{fillStyle:"@yuque-color-sheetborder"},closePaddingTop:2,closeIconPadding:6,contentPaddingRight:2,mentionHeight:24,mentionPaddingBottom:4,mentionPaddingRight:8,dropdownIconPaddingLeft:8,dropdownIconPaddingTop:10},action:{bgSize:20,bgRadius:4,bg:{fillStyle:"@yuque-color-bg-tertiary"},bg2:{fillStyle:"@yuque-color-sheetborder"},icon:{fillStyle:"@yuque-color-cardborder-selected"},iconSize:14},link:{fillStyle:"@yuque-color-text-link"},checkbox:{iconSize:16,common:{lineWidth:1,lineCap:"round",lineJoin:"round"},default:{strokeStyle:"@yuque-color-sheetborder"},hover:{strokeStyle:"@yuque-color-border-primary-active"},checked:{lineWidth:2,fillStyle:"@yuque-color-border-primary-active",strokeStyle:"@yuque-color-bg-primary"}},image:{cellPaddingX:4,cellPaddingY:4},file:{cellPaddingX:4,cellPaddingY:4},card:{maxRowWidth:1440,minRowCount:2,colPadding:20,rowPadding:20,titleHeight:27,lineHeight:22,lineGap:15},kanbanGroup:{groupItemWidth:296,groupTop:6,groupPaddingTop:10,groupPaddingBottom:10,groupPaddingLeft:16,groupPaddingRight:16,headerHeight:32,headerMarginBottom:8,addGroupWidth:170}},Ps={};function Ms(e,t){var n=t;if(t||"string"!=typeof e||(n=e),!n)return null;var r=(null==e?void 0:e.current)||"light";r&&(n=r+"$"+n);var o=Ps[n];if(o)return o;var a=function(e,t){t||(t=e,e=null);var n=function(e){return e.toLowerCase().startsWith("@")||e.toLowerCase().startsWith("#")||e.toLowerCase().startsWith("rgb(")||e.toLowerCase().startsWith("rgba(")||e.toLowerCase().startsWith("fade(")};if(n(t))return js(e,t);var r=wc(Ds),o=t.split(".").reduce((function(e,t){return e?e[t]:null}),r);if(null==o)return null;if("string"==typeof o&&o.startsWith("svgIcon(")){var a=o.match(/svgIcon\((.*)\)/)[1].split(",").map((function(e){return e.trim()})),i=ie()(a,3),l=i[0],c=i[1],s=i[2];return function(e,t,n){var r,o=Ls[e];if(!o)return null;o=(o=o.replace(/[\n\t\r]/gi,"")).replace(/\"currentColor\"/gi,'"'.concat(t,'"')),n&&(o=o.replace(/\"currentColor2\"/gi,'"'.concat(n,'"')));try{r="data:image/svg+xml;base64,".concat(fe.a.encode(o))}catch(e){return console.error(e),null}return r}(l,js(e,c),js(e,s))}return function t(r){return null==r?r:"string"==typeof r&&n(r)?js(e,r):("object"!==z()(r)||Array.isArray(r)||Object.keys(r).forEach((function(e){r[e]=t(r[e])})),r)}(o)}(e,t);return Ps[n]=a,a}var Ns,Is,Fs=function(e){window.__tableThemeManager=e},Bs=function(){if(window.__tableThemeManager)return window.__tableThemeManager;var e=new pe.DefaultThemeManager;return Fs(e),e},Vs=function(){return Bs().current===de.Theme.dark},Hs=function(){return Bs().current||"light"},zs=wc(Ds),qs={ERROR:"error",UPDATED:"updated",CHANGED:"changed",SAVE:"save",SEARCHED:"searched",SEARCH:"search",RESIZE:"resize",DESTROY:"destroy",COL_CONFIGS:"colConfigs",SHOW_TOOLBAR_MENU:"showToolbarMenu",HIDE_TOOLBAR_MENU:"hideToolbarMenu",UPDATE_TOOLBAR_MENU:"updateToolbarMenu",SHOW_MENU:"showMenu",ENTER_WARNING:"enterWarning",SCROLL:"scroll",BACKSPACE:"backspace",DATA_READY:"dataReady",STATS_OPTIONS:"statsOptions",SHOW_CELL_EDITOR:"showCellEditor",HIDE_CELL_EDITOR:"hideCellEditor",TOGGLE_CELL_PREVIEWER:"toggleCellPreviewer",UPDATE_CELL_PREVIEWER_RECT:"updateCellPreviewerRect",REMOVE_SELECTIONS:"removeSelections",VIEW_CELL_DATA:"viewCellData",UPLOAD_RETRY:"uploadRetry",DRAW_DOM:"drawDom",SHOW_ROW_EDITOR:"showRowEditor",HIDE_ROW_EDITOR:"hideRowEditor",MOVE_INDEX_COL:"moveIndexCol",PASTE_FILE:"pasteFile",SHOW_FILE_MANAGE_MODAL:"show_file_manage_modal",HIDE_MENU:"hide_menu",HIDE_COL_CONFIG:"hide_col_config",SHOW_ADD_VIEW:"show_add_view",HIDE_ADD_VIEW:"hide_add_view",TO_DO_FOCUS:"to_do_focus",CANVAS_RESIZE:"canvas_resize",OPEN_FORM_ON_CREATE:"open_form_on_create",COMMAND_END:"commandEnd"};!function(e){e.GRID="GRID",e.FORM="FORM",e.CARD="CARD",e.KANBAN="KANBAN"}(Ns||(Ns={})),function(e){e.GRID="GRID",e.FORM="FORM",e.CARD="CARD",e.KANBAN="KANBAN"}(Is||(Is={}));var Us=[{type:Ns.GRID,title:_c("表格视图"),desc:_c("支持数据的筛选、分组和排序")},{type:Ns.CARD,title:_c("画册视图"),desc:_c("用于展示图片集")},{type:Ns.KANBAN,title:_c("看板视图"),desc:_c("用于任务管理")}],Gs=Ns,Ws=function(){function e(t){d()(this,e);try{this.urlObj=new URL(t)}catch(e){console.error(e)}}return p()(e,[{key:"isEmbed",value:function(){return!!this.urlObj&&"doc_embed"===this.urlObj.searchParams.get("view")}},{key:"getHash",value:function(){return this.urlObj&&this.urlObj.searchParams.get("inner")||""}}]),e}(),Ys=function(){function e(t){d()(this,e),this.actions={},this.kernel=t}return p()(e,[{key:"start",value:function(e){this.actions[e]=new Date}},{key:"end",value:function(e){if(this.actions[e]){var t=new Date-this.actions[e];this.kernel.emit(gc.COMMAND_END,e,t),delete this.actions[e]}}}]),e}(),$s={readerEnable:!1,affectViewKeys:[],indexChanged:!1,refreshFilter:!1,refreshSort:!1,refreshSearch:!1,metaData:void 0,viewChanged:!0,refreshStats:!1,refreshAffectedStats:!1,refreshGroup:!1,refreshAffectedGroup:!1,colChanged:!1,checkBeforeRefresh:!1,enable:function(){return!0},execute:function(){},afterExecute:function(){},undo:function(e){var t=this,n=e.oldActionValue;e.actionSelections&&n&&n.forEach((function(e){t.recordsModel.setRecord(e.id,JSON.parse(e.data))}))},afterUndo:function(e){var t=e.oldViewData,n=e.viewId;if(t){var r=this.tableModel.getView(n);Object.keys(t).forEach((function(e){r.set(e,wc(t[e]))}))}},getCheckSelections:function(){return this.tableModel.getActiveView().get("selections")}},Ks=Object.assign({},$s,{readerEnable:!0,tableChanged:!0,viewChanged:!1,execute:function(e){var t=this.tableModel.getView(e);t||(e=this.tableModel.defaultView,t=this.tableModel.getView(e)),this.kernel.statsService.dispose(e),this.kernel.groupService.dispose(e);var n=this.kernel.getViewService(t);n&&n.active(t),t.type!==Gs.FORM&&(this.tableModel.activeView=t,this.kernel.filterService.refreshFilter(e),t.type===Gs.KANBAN?this.kernel.sortService.refreshGroupSort(t):this.kernel.sortService.refreshSort(e),this.kernel.groupService.refreshAllGroups(e),this.kernel.emit(gc.VIEW_CHANGED,e),this.kernel.searchService.checkSearch(),t.type===Gs.GRID?this.kernel.statsService.refreshAllStats(e):this.kernel.statsService.dispose(),this.kernel.options.disableHash||"undefined"!=typeof window&&(window.location.hash=e))}}),Xs=Object.assign({},$s,{readerEnable:!0,viewChanged:!1,execute:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scrollInView:!1},n=this.tableModel.getActiveView();n.setSelections(e),this.kernel.emit(gc.SELECTED,n.get("selections"),t)}}),Zs=Object.assign({},$s,{enable:function(){return!this.tableModel.tableId},snapshot:function(e){return e},arguments:function(){for(var e=fs(32),t=fs(32),n=[],r=0;r<kc.colCount;r++){for(var o=void 0;!o||n.includes(o);)o=fs(32);n.push(o),o=null}return[e,t,n]},execute:function(e,t,n){this.kernel.tableService.insertTable(e,t,n),this.kernel.execute("activeView",t)}}),Qs=Object.assign({},$s,{refreshFilter:!0,refreshSort:!0,refreshStats:!0,refreshGroup:!0,viewChanged:!0,checkBeforeRefresh:!0,enable:function(){var e=this.recordsModel.records,t=this.kernel.options.maxRecordCount;return!(e.length>=t)},arguments:function(e,t,n){var r,o=Object.keys(this.recordsModel.rowMap),a=this.tableModel.getActiveView();if(!a)return[];for(;!r||o.includes(r);)r=fs(32);if(e||(e=0),a.get("type")===Gs.GRID&&this.kernel.groupService.grouping&&void 0===t){var i=e-1||0,l=a.get("rows")[i];if(!l)return(t=this.kernel.filterService.getFilterColumnValue(a))?[e,r,t,n]:[];var c=l.id,s=a.get("group"),u=this.recordsModel.getRecord(c);t=t||{},s.forEach((function(e){t[e.id]=wc(u[e.id])}))}return[e,r,t,n]},snapshot:function(e){return e},execute:function(e,t,n,r,o){var a=this.tableModel.getActiveView(o);if(a){a.get("type")===Gs.GRID&&this.execute("setSelections",{}),this.recordsModel.addRecord(t,n);var i=this.kernel.getViewService(a);i&&i.insertRows(a,e,1,[t],[n]),a.get("type")===Gs.GRID&&(this.kernel.execute("setSelections",{row:e,col:0,rowCount:1,colCount:1,activeRow:e,activeCol:0}),this.kernel.groupService.refreshWhenAddRow(e,o))}},getCheckSelections:function(e){return{row:e,col:0,rowCount:1,colCount:this.tableModel.colCount,activeRow:e,activeCol:0}},beforeUndo:function(e){var t=e.args[0],n=e.args[1],r=e.args[3];this.recordsModel.removeRecord(e.args[1]);var o=this.tableModel.getActiveView();if(o.get("type"),o){var a=this.kernel.getViewService(o);a&&a.removeRows(o,[n],r),this.kernel.groupService.refreshWhenRemoveRow(t,e.viewId),this.kernel.emit(gc.VIEW_CHANGED,e.viewId)}},getExecuteData:function(e){var t=e.args[1],n=e.args[2],r=this.tableModel.getView(e.viewId);return{records:{inserted:{viewId:e.viewId,type:r.type,data:[{id:t,data:JSON.stringify(n)}]}}}},getUndoData:function(e){return{records:{removed:[e.args[1]]}}},getRedoData:function(e){return{records:{restored:[e.args[1]]}}}}),Js=Object.assign({},$s,{refreshFilter:!0,refreshSort:!0,refreshStats:!0,refreshGroup:!0,viewChanged:!0,affectViewKeys:["groupData","rows","rowCount"],snapshot:function(e){var t=this,n=this.tableModel.getView(e.viewId);return e.rows=wc(n.get("rows")),e.records=wc(e.args[0].map((function(e){return t.recordsModel.getRecord(e)}))),e},execute:function(e,t){var n=this;e.forEach((function(e){n.recordsModel.removeRecord(e)}));var r=this.tableModel.getView(t);if(r){var o=this.kernel.getViewService(r);o&&o.removeRows(r,e),this.kernel.groupService.refreshAllGroups(t),this.remote||r.type!==Gs.GRID||this.kernel.execute("setSelections",{})}},beforeUndo:function(e){var t=this,n=e.records;e.args[0].forEach((function(e,r){t.recordsModel.addRecord(e,n[r])})),this.kernel.emit(gc.VIEW_CHANGED,e.viewId)},getExecuteData:function(e){var t=e.args[0];return{views:{modified:this.tableModel.getView(e.viewId).getDataForSave()},records:{removed:t}}},getUndoData:function(e){return{records:{restored:e.args[0]},views:{modified:this.tableModel.getView(e.viewId).getDataForSave()}}}}),eu=Object.assign({},$s,{snapshot:function(e){return e},arguments:function(){return[this.tableModel.generateUid(32)]},execute:function(e){this.kernel.formService.createForm(e)},getExecuteData:function(e){var t=e.args[0];return{view:{inserted:this.tableModel.getView(t).data}}},beforeUndo:function(e){var t=e.args[0];this.kernel.tableService.removeView(t)}}),tu=Object.assign({},$s,{tableChanged:!0,viewChanged:!1,snapshot:function(e){var t=this.tableModel.getView(e.args[0]);return e.data=wc(t.data),e},execute:function(e){var t=this.tableModel.getView(e);t&&this.kernel.getViewService(t).removeForm(e)},getExecuteData:function(e){return{view:{removed:{viewId:e.args[0]}}}},beforeUndo:function(e){this.tableModel.addView(e.data)},getUndoData:function(e){return{view:{restored:{viewId:e.viewId}}}}}),nu=Object.assign({},$s,{readerEnable:!0,execute:function(e){this.kernel.formService.enableForm(e)}}),ru=Object.assign({},$s,{readerEnable:!0,execute:function(e){this.kernel.formService.disableForm(e)}}),ou=Object.assign({},$s,{execute:function(e,t){this.kernel.formService.updateForm(t,e)}}),au=Object.assign({},$s,{affectViewKeys:["columns","colCount"],colChanged:!0,viewChanged:!0,enable:function(e){if(e.name){for(var t=this.tableModel.getTableFields(),n=0;n<t.length;n++)if(t[n].name===e.name)return!1;return!0}},snapshot:function(e){return e},execute:function(e,t,n){this.tableModel.insertColumn(e),Gc.includes(e.type)&&this.recordsModel.autoFillByColType(e.id,e.type);var r=this.tableModel.getView(n);if(r){var o=this.kernel.getViewService(r);o&&o.insertColumn(r,t,e,this.remote)}},beforeUndo:function(e){var t=e.args[0];this.tableModel.removeColumn(t.id),this.kernel.emit(gc.VIEW_CHANGED,e.viewId)},getExecuteData:function(e){return{field:{inserted:e.args[0]}}}}),iu=Object.assign({},$s,{refreshFilter:!0,refreshSort:!0,refreshSearch:!0,refreshAffectedStats:!0,refreshGroup:!0,selections:!0,viewChanged:!1,checkBeforeRefresh:!0,enable:function(e,t,n){var r=this.tableModel.getActiveView().data;if(!r.rows[e]||!r.columns[t])return!1;var o=r.rows[e].id,a=r.columns[t].id,i=this.recordsModel.getCell(o,a);return!Ee()(n.value,i)},arguments:function(e,t,n){var r,o,a=this.tableModel.getActiveView().data;return[e,t,n,null===(r=a.rows[e])||void 0===r?void 0:r.id,null===(o=a.columns[t])||void 0===o?void 0:o.id]},snapshot:function(e){var t=e.args[2],n=e.args[3],r=e.args[4];if(e.selections={row:e.args[0],col:e.args[1],rowCount:1,colCount:1},!t.cache){var o=wc(this.recordsModel.getCell(n,r));return o&&o.cache?e.cellValue={}:e.cellValue=o,e}},execute:function(e,t,n,r,o){this.recordsModel.setCell(r,o,n);var a=this.tableModel.getActiveView();this.kernel.groupService.grouping&&this.kernel.groupRowService.refreshRowInGroup(r,o,a)},getCheckSelections:function(e,t){return{row:e,col:t,rowCount:1,colCount:1,activeRow:e,activeCol:t}},beforeUndo:function(e){var t=e.cellValue;this.recordsModel.setCell(e.args[3],e.args[4],t)},getExecuteData:function(e){var t=e.args[2];if(!t.cache)return this.tableModel.getView(e.viewId),{recordValue:{modified:[{colId:e.args[4],rowId:e.args[3],value:t}]}}},getUndoData:function(e){if(!e.args[2].cache)return this.tableModel.getView(e.viewId),{recordValue:{modified:[{colId:e.args[4],rowId:e.args[3],value:e.cellValue}]}}}}),lu=Object.assign({},$s,{refreshFilter:!0,refreshSort:!0,refreshSearch:!0,refreshAffectedStats:!0,refreshGroup:!0,selections:!0,viewChanged:!1,checkBeforeRefresh:!0,snapshot:function(e){for(var t=this,n=this.tableModel.getView(e.viewId).data,r=n.rows,o=n.columns,a=n.selections,i=a.row,l=a.col,c=a.rowCount,s=a.colCount,u=this.tableModel.getFieldsMap(),d=[],f=[],p=l;p<l+s;p++){var h=u[o[p].id];Gc.includes(h.type)||d.push(p)}for(var m=function(){var e=r[v].id;d.forEach((function(n){var r=o[n].id;f.push({rowId:e,colId:r,value:wc(t.recordsModel.getCell(e,r))})}))},v=i;v<i+c;v++)m();return e.actionSelections=wc(e.selections),e.records=f,e},execute:function(e){this.kernel.gridService.clearValue(e)},getExecuteData:function(e){return this.tableModel.getView(e.viewId),{recordValue:{modified:e.records.map((function(e){return{rowId:e.rowId,colId:e.colId,value:{value:""}}}))}}},getUndoData:function(e){return this.tableModel.getView(e.viewId),{recordValue:{modified:e.records}}}}),cu=Object.assign({},$s,{affectViewKeys:["columns"],colChanged:!0,enable:function(e,t){return e!==t&&0!==e},snapshot:function(e){return e},execute:function(e,t,n){this.kernel.gridService.moveColumn(e,t,n),this.remote||this.tableModel.getView(n).set("selections",{})}}),su=Object.assign({},$s,{readerEnable:!0,affectViewKeys:["columns"],colChanged:!0,snapshot:function(e){return e},execute:function(e,t,n,r){this.tableModel.getView(r).get("columns")[e].size=n}}),uu=Object.assign({},$s,{readerEnable:!0,viewChanged:!1,execute:function(e,t){var n=this.tableModel.getView(t);return this.kernel.searchService.search(e,t,!0,n.getSearchMode())}}),du=Object.assign({},$s,{readerEnable:!0,viewChanged:!1,execute:function(e,t){return this.kernel.searchService.searchPrev(e,t)}}),fu=Object.assign({},$s,{readerEnable:!0,viewChanged:!1,execute:function(e,t){return this.kernel.searchService.searchNext(e,t)}}),pu=Object.assign({},$s,{readerEnable:!0,viewChanged:!1,execute:function(){this.kernel.searchService.clearSearch()}});function hu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hu(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vu=Object.assign({},$s,{affectViewKeys:["columns","colCount"],refreshFilter:!0,refreshSort:!0,refreshStats:!0,refreshGroup:!0,colChanged:!0,viewChanged:!0,arguments:function(e){var t=[],n=[],r=[],o=[];return Object.values(this.tableModel.views).forEach((function(a){var i=a.data,l=i.filter,c=i.stats,s=i.group,u=i.sort;if(l&&l.options)for(var d=0;d<l.options.length;d++)l.options[d].id===e&&t.push(a.data.id);if(u&&u.options)for(var f=0;f<u.options.length;f++)if(u.options[f].id===e){n.push(a.data.id);break}if(s&&s.length>0)for(var p=0;p<s.length;p++)if(s[p].id===e){r.push(a.data.id);break}c&&c[e]&&o.push(a.data.id)})),[e,{removedFilters:t,removedSorts:n,removedGroups:r,removedStats:o,removedColId:e}]},snapshot:function(e){var t=this,n=e.args[0],r=e.args[1],o=r.removedFilters,a=r.removedSorts,i=r.removedGroups,l=r.removedStats;return e.colConfigs=wc(this.tableModel.getTableFields().find((function(e){return e.id===n}))),e.removedFilters=o.map((function(e){return wc(t.tableModel.getView(e).get("filter"))})),e.removedSorts=a.map((function(e){return wc(t.tableModel.getView(e).get("sort"))})),e.removedGroups=i.map((function(e){return wc(t.tableModel.getView(e).get("group"))})),e.removedStats=l.map((function(e){return t.tableModel.getView(e).get("stats")[n]})),e.modifiedData=this.tableModel.recordsModel.getValueMapByCol(e.colConfigs),e},execute:function(e,t,n){var r=this;this.tableService.removeColumn(e);var o=t.removedFilters,a=t.removedSorts,i=t.removedGroups,l=t.removedStats,c=t.removedColId;o.forEach((function(e){var t=r.tableModel.getView(e).get("filter"),n=((null==t?void 0:t.options)||[]).filter((function(e){return e.id!==c})),o=n.length>0?mu(mu({},t),{},{options:n}):{};r.tableModel.getView(e).set("filter",o)})),a.forEach((function(e){r.tableModel.getView(e).set("sort",{})})),i.forEach((function(e){r.kernel.groupService.removeGroup(e)})),l.forEach((function(e){var t=r.tableModel.getView(e).get("stats");delete t[e],r.tableModel.getView(e).set("stats",t)}));var s=this.tableModel.getView(n);if(s){var u=this.kernel.getViewService(s);u&&u.removeColumn(s,e),this.remote||this.kernel.execute("setSelections",{})}},beforeUndo:function(e){var t=this,n=e.args[0],r=e.args[1],o=r.removedFilters,a=r.removedSorts,i=r.removedGroups,l=r.removedStats;this.tableModel.columns.push(e.colConfigs),this.tableModel.updateColumnMap(),o.forEach((function(n,r){t.tableModel.getView(n).set("filter",e.removedFilters[r])})),a.forEach((function(n,r){t.tableModel.getView(n).set("sort",e.removedSorts[r])})),i.forEach((function(n,r){t.tableModel.getView(n).set("group",e.removedGroups[r])})),l.forEach((function(r,o){var a=t.tableModel.getView(r).get("stats");a[n]=e.removedStats[o],t.tableModel.getView(r).set("stats",a)})),this.kernel.emit(gc.VIEW_CHANGED,e.viewId)},getExecuteData:function(e){return{field:{removed:{fieldId:e.colConfigs.id}}}},getUndoData:function(e){var t=this,n=e.colConfigs,r=n.id;this.tableModel.getFieldsMap()[r];var o=[];return Object.keys(e.modifiedData).forEach((function(e){o.push({id:e,data:JSON.stringify(t.recordsModel.getRecord(e))})})),{field:{inserted:n},records:{modified:o}}}});function gu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gu(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yu=Object.assign({},$s,{affectViewKeys:["columns","colCount"],refreshFilter:!0,refreshSort:!0,refreshSearch:!0,refreshAffectedStats:!0,refreshGroup:!0,colChanged:!0,arguments:function(e){var t=this.tableModel.getTableFields(),n=e.id,r=e.type;if(t.find((function(e){return e.id===n})).type===r)return[e,{}];var o=[],a=[],i=[],l=[];return Object.values(this.tableModel.views).forEach((function(e){var t,c=e.data,s=c.filter,u=c.stats,d=c.group,f=c.sort,p=c.id;if(s&&s.options)for(var h=0;h<s.options.length;h++)s.options[h].id===n&&o.push(p);u&&u[n]&&a.push(p),Array.isArray(d)&&((null===(t=d[0])||void 0===t?void 0:t.id)!==n||Bc.includes(r)||i.push(p)),f&&f.options&&f.options.forEach((function(e){e.id!==n||Fc.includes(r)||l.push(p)}))})),[e,{removedFilters:o,removedStats:a,removedGroups:i,removedSorts:l,removedColId:n}]},snapshot:function(e){var t=this,n=e.args[0].id,r=this.tableModel.getFieldsMap();e.colConfigs=r[n];var o=e.args[1],a=o.removedFilters,i=o.removedStats,l=o.removedGroups,c=o.removedSorts;if(!a)return e;var s=this.tableModel.getView(e.viewId),u=s.get("columns");return e.selections={row:0,col:u.findIndex((function(e){return e.id===n})),rowCount:s.get("rowCount"),colCount:1},e.removedFilters=a.map((function(e){return wc(t.tableModel.getView(e).get("filter"))})),e.removedStats=i.map((function(e){return t.tableModel.getView(e).get("stats")[n]})),e.removedGroups=l.map((function(e){return wc(t.tableModel.getView(e).get("group"))})),e.removedSorts=c.map((function(e){return wc(t.tableModel.getView(e).get("sort"))})),e.modifiedData=this.tableModel.recordsModel.getValueMapByCol(r[n]),e},execute:function(e,t){var n=this,r=e.id,o=this.tableModel.getFieldsMap()[r],a=null==o?void 0:o.type,i=e.type;o&&[Ac.SELECT,Ac.MULTI_SELECT].includes(a)&&![Ac.SELECT,Ac.MULTI_SELECT].includes(i)&&this.tableModel.recordsModel.selectToText(o,e),this.tableService.updateColumn(e),this.formService.updateFieldByColConfigs(e);var l=this.tableModel.getActiveView(),c=l.get("columns");c.forEach((function(t,n){if(t.id===r){var o=bu(bu({},t),e);return c[n]=o,void l.set("columns",c)}})),Gc.includes(i)&&this.recordsModel.autoFillByColType(e.id,i);var s=t.removedFilters,u=t.removedStats,d=t.removedColId,f=t.removedGroups,p=t.removedSorts;s&&(s.forEach((function(e){var t=n.tableModel.getView(e).get("filter"),r=((null==t?void 0:t.options)||[]).filter((function(e){return e.id!==d})),o=r.length>0?bu(bu({},t),{},{options:r}):{};n.tableModel.getView(e).set("filter",o)})),u.forEach((function(t){var r=n.tableModel.getView(t).get("stats");delete r[e.id],n.tableModel.getView(t).set("stats",r),t===l.get("id")&&n.kernel.groupStatsService.refreshGroupStatsByCol(e.id,t)})),f.forEach((function(e){n.kernel.groupService.removeGroup(e)})),p.forEach((function(e){n.tableModel.getView(e).set("sort",{}),n.kernel.sortService.removeSort(e,{force:!0})})))},beforeUndo:function(e){var t=this,n=e.args[0].id;e.modifiedData&&this.recordsModel.fillValueByMap(e.modifiedData,n),this.tableService.updateColumn(e.colConfigs),this.formService.updateFieldByColConfigs(e.colConfigs);var r=e.args[1],o=r.removedFilters,a=r.removedStats,i=r.removedGroups,l=r.removedSorts;if(o){o.forEach((function(n,r){t.tableModel.getView(n).set("filter",e.removedFilters[r])})),a.forEach((function(r,o){var a=t.tableModel.getView(r).get("stats");a[n]=e.removedStats[o],t.tableModel.getView(r).set("stats",a)})),i.forEach((function(n,r){t.tableModel.getView(n).set("group",e.removedGroups[r])})),l.forEach((function(n,r){t.tableModel.getView(n).set("sort",e.removedSorts[r])}));var c=this.tableModel.getActiveView(),s=c.get("group");s&&s.find((function(e){return e.id===n}))&&this.kernel.groupService.refreshAllGroups(c.get("id"))}},getExecuteData:function(e){var t=this,n=e.colConfigs.id,r=this.tableModel.getFieldsMap()[n],o=[];return e.modifiedData&&Object.keys(e.modifiedData).forEach((function(e){o.push({id:e,data:JSON.stringify(t.recordsModel.getRecord(e))})})),{records:{modified:o},field:{modified:{field:r}}}},getUndoData:function(e){var t=this,n=e.colConfigs.id,r=this.tableModel.getFieldsMap()[n],o=[];return Object.keys(e.modifiedData).forEach((function(e){o.push({id:e,data:JSON.stringify(t.recordsModel.getRecord(e))})})),{records:{modified:o},field:{modified:{field:r}}}},getRedoData:function(e){var t=this,n=e.colConfigs.id,r=this.tableModel.getFieldsMap()[n],o=[];return Object.keys(e.modifiedData).forEach((function(e){o.push({id:e,data:JSON.stringify(t.recordsModel.getRecord(e))})})),{records:{modified:o},field:{modified:{field:r}}}}}),wu={type:{_map:{name:"n",decimal:"d",symbol:"s",formatter:"f",lang:"l"},_token:{n:"name",d:"decimal",s:"symbol",f:"formatter",l:"lang"},name:{_map:{auto:1,text:2,number:3,percentage:4,currency:5,date:6,time:7,datetime:8},_token:{1:"auto",2:"text",3:"number",4:"percentage",5:"currency",6:"date",7:"time",8:"datetime"}},symbol:{type:"string"},decimal:{type:"int"},formatter:{_map:{default:12,"YYYY-MM-DD":1,"YYYY-MM-DD HH:mm:ss":2,"YYYY.MM.DD":4,"MM/DD/YYYY":5,"YYYY-MM":6,"MM/DD":7,YYYY:8,MMMM:9,dddd:10,LL:11,"YYYY-MM-DD hh:mm:ss":12,"YYYY/MM/DD hh:mm:ss":13,"YYYY/MM/DD HH:mm:ss":13,"YYYY/MM/DD h:mm A":14,"hh:mm:ss":15,"HH:mm:ss":15,"h:mm:ss A":16,"hh:mm":17,"HH:mm":17,"h:mm A":18,"YYYY/MM/DD":19,"YYYY年M月D日":20,ll:21,LLL:22,"YYYY年M月":23,"M月D日":24},_token:{1:"YYYY-MM-DD",2:"YYYY-MM-DD HH:mm:ss",3:"HH:mm:ss",4:"YYYY.MM.DD",5:"MM/DD/YYYY",6:"YYYY-MM",7:"MM/DD",8:"YYYY",9:"MMMM",10:"dddd",11:"LL",12:"YYYY-MM-DD HH:mm:ss",13:"YYYY/MM/DD HH:mm:ss",14:"YYYY/MM/DD h:mm A",15:"HH:mm:ss",16:"h:mm:ss A",17:"HH:mm",18:"h:mm A",19:"YYYY/MM/DD",20:"YYYY年M月D日",21:"ll",22:"LLL",23:"YYYY年M月",24:"M月D日"}},lang:{_map:{default:0,"sheet-en":0,"sheet-cn":1},_token:{0:"sheet-en",1:"sheet-cn"}}},style:{_map:{fontWeight:"w",hAlign:"h",vAlign:"v",fontStyle:"s",underline:"u",strikeThrough:"t",overflow:"o",backColor:"b",color:"c",fontSize:"z",border:"d"},_token:{w:"fontWeight",h:"hAlign",v:"vAlign",s:"fontStyle",u:"underline",t:"strikeThrough",o:"overflow",b:"backColor",c:"color",z:"fontSize",d:"border"},fontWeight:{_map:{default:4,100:1,200:2,300:3,400:4,500:5,600:6,700:7,800:8,900:9,normal:4,bold:7,lighter:2},_token:{1:100,2:200,3:300,4:400,5:500,6:600,7:700,8:800,9:900}},fontSize:{type:"int"},hAlign:{_map:{default:1,left:1,start:1,center:2,right:3},_token:{1:"left",2:"center",3:"right"}},vAlign:{_map:{default:2,top:1,start:1,middle:2,bottom:3},_token:{1:"top",2:"middle",3:"bottom"}},fontStyle:{_map:{default:1,normal:1,italic:2},_token:{1:"normal",2:"italic"}},overflow:{_map:{default:1,overflow:1,clip:2,wrap:3},_token:{1:"overflow",2:"clip",3:"wrap"}},underline:{_map:{true:1,false:2},_token:{1:!0,2:!1}},strikeThrough:{_map:{true:1,false:2},_token:{1:!0,2:!1}},border:{type:"object"}}};var ku=/^-?[$¥£€]?\s?\d{0,3}(,?\d{3}){0,5}(\.\d+)?(?:[eE]{1}[+-]{1}\d{1,3})?%?$/;function xu(e,t){var n={};void 0!==e.v?n.value=wc(e.v):void 0!==e.value&&(n.value=wc(e.value)),""===n.value&&delete n.value;var r=function(e,t){return e.type?wc(e.type):e.style&&e.style.cellType?{name:Eu[e.style.cellType.dataType]||"auto"}:void 0!==e.t?function(e,t){return function(e,t,n){var r={},o=n[e][t];return""===o?null:(o.split("_").forEach((function(t){var o,a=t.substr(0,1),i=t.substr(1),l=wu[e]._token[a];if(wu[e][l])if(wu[e][l]._token)o=wu[e][l]._token[i];else if("int"===wu[e][l].type)o=parseInt(i);else if("object"===wu[e][l].type)try{o=JSON.parse(i)}catch(e){console.error(i)}else o=i;else n[e+"_"+l]&&(o=n[e+"_"+l][i]);l&&(r[l]=o)})),r)}("type",e,t)}(e.t,t):null}(e,t);return r&&(n.type=r),n.type&&["percentage","currency"].includes(n.type.name)&&(n.value=Su(n.value)),n}var Eu={text:"text",currency:"currency",date:"date",number:"number"};function Cu(e,t,n){for(var r=0,o=t>0?1:-1;Math.abs(r)<Math.abs(t)&&!1!==n(e+r);)r+=o}function Ou(e,t){var n=e.dataTransfer||e.clipboardData;if(t)return n.getData(t);var r=n.getData("text/html"),o=n.getData("text"),a=[];return""===r&&/^.+\.\w+$/.test(o)?(a=_u(e)).length>0&&(o=""):""===o&&/^(<meta.+?>)?<img.+?>$/.test(r)?(a=_u(e)).length>0&&(r=""):r||o||(a=_u(e)),{html:r,text:o,files:a}}function _u(e){var t=e.dataTransfer||e.clipboardData,n=t.getData("text"),r=[];try{t.items&&t.items.length>0?r=Array.from(t.items).map((function(e){var t="file"===e.kind?e.getAsFile():null;return null!==t&&(t.type&&t.type.indexOf("image/png")>-1&&!t.lastModified&&(t=new File([t],"image.png",{type:t.type})),t.ext=n.split(".").pop()),t})).filter((function(e){return e})):t.files&&t.files.length>0&&(r=Array.from(t.files))}catch(e){t.files&&t.files.length>0&&(r=Array.from(t.files))}return r}function Su(e){var t,n=""+e;return t="%"===(n=n.replace(/[$¥£€,]/g,""))[n.length-1]?(n=n.replace("%",""))/100:n/1,isNaN(t)?e:t}var Ru=Object.assign({},$s,{readerEnable:!0,selections:!0,viewChanged:!1,arguments:function(e){var t=this.tableModel.getActiveView();return[e,t.get("id"),t.get("selections")]},enable:function(){return!(!window.formulaCopy&&this.kernel.readOnly&&ss.disableDocumentCopy&&(this.kernel.emit("error",_c("空间已开启禁止复制功能，如有疑问，请联系空间管理员")),1))},execute:function(e,t,n){if(this.executed)delete this.executed;else if(n&&!isNaN(n.row)){e&&e.preventDefault();var r=this.kernel.processService.copy(t,n),o=function(e){var t=wc(e),n=t.startCell,r=t.columns,o=function(e){var t,n=wc(e),r=n.table,o=n.columns,a=n.rowHeight,i=[];i.length=r.length;var l=r.length;return Cu(0,(null===(t=r[0])||void 0===t?void 0:t.length)||0,(function(e){var t=o[e];Cu(0,l,(function(n){i[n]=i[n]||'<tr style="height: '.concat(a.value,'px">');var l=r[n][e],c="",s="";if(l&&(l.value||[Ac.CHECKBOX,Ac.SELECT,Ac.MULTI_SELECT].includes(t.type))){var u=l.value;switch(t.type){case Ac.SELECT:case Ac.MULTI_SELECT:var d=o[e].options,f=[];u&&u.length>0&&d.forEach((function(e){u.includes(e.id)&&f.push(e.value)})),c=' data-value="'.concat(encodeURIComponent(JSON.stringify({class:"select",value:f,options:o[e].options,color:!!o[e].options[0].color,multi:o[e].type===Ac.MULTI_SELECT})),'"'),s=f?f.join(","):"";break;case Ac.MENTION:c=' data-value="'.concat(encodeURIComponent(JSON.stringify({class:t.type,value:u})),'"'),s=u.map((function(e){return e.name})).join(",");break;case Ac.IMAGE:s='<img src="'.concat(u.src,'" height=').concat(t.size," />");break;case Ac.LINK:case Ac.FILE:s='<a href="'.concat(u.src,'">').concat(u.name,"</a>");break;case Ac.CHECKBOX:s=l&&"true"===String(l.value)?"✅":"🔲",c=' data-value="'.concat(encodeURIComponent(JSON.stringify({class:t.type,value:l&&"true"===String(l.value)})),'"');break;default:s=ms(l.formatValue)}i[n]+="<td ".concat(c,">").concat(s,"</td>")}else i[n]+="<td></td>"}))})),Cu(0,l,(function(e){i[e]+="</tr>"})),i}(e),a=[];r&&r.forEach((function(e){a.push("<col width=".concat(e.size,">"))}));var i="<colgroup>".concat(a.join(""),"</colgroup>");return"\x3c!--StartFragment--\x3e".concat('<style type="text/css">\x3c!--\n  td {border: 0.5pt solid #ccc;white-space: nowrap;}\n  br {mso-data-placement:same-cell;}\n  .numberstr{mso-number-format:"@";}\n  .perc {mso-number-format:0%;}\n  .curr¥ {mso-number-format:"¥#,##0.00;[red]¥#,##0.00";}\n  .curr$ {mso-number-format:"$#,##0.00;[red]$#,##0.00";}\n  .curr£ {mso-number-format:"£#,##0.00;[red]£#,##0.00";}\n  .curr€ {mso-number-format:"€#,##0.00;[red]€#,##0.00";}\n  --\x3e</style>','<table style="font-size: 12px;" data-startCell="').concat(n.row,":").concat(n.col,'">').concat(i).concat(o.join(""),"</table>\x3c!--EndFragment--\x3e")}(r),a=function(e){var t=wc(e),n=t.table,r=t.columns,o=[],a=n.length,i=n[0].length;return Cu(0,a,(function(e){var t=[];Cu(0,i,(function(o){var a,i=n[e][o];a=r[o].type===Ac.CHECKBOX?i&&"true"===String(i.value)?"TRUE":"FALSE":i?i.formatValue:"",t.push(a)})),o.push(t.join("\t"))})),o.join("\n")}(r),i=e&&(e.dataTransfer||e.clipboardData);null!=i&&i.setData?(i.setData("text/html",o),i.setData("text",a),i.setData("innerCopy",this.kernel.processService.clipId)):(this.executed=!0,function(e){var t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.clip="rect(0, 0, 0, 0)",document.body.appendChild(t),t.innerHTML=e;var n=document.createRange(),r=window.getSelection();n.selectNodeContents(t.querySelector("table")),r.removeAllRanges(),r.addRange(n);try{if(!document.execCommand("copy"))throw"copy command was unsuccessful"}catch(e){throw new Error("unable to copy using execCommand: ",e)}finally{t.remove(),r.removeAllRanges()}}(o))}}});function ju(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Au=Object.assign({},$s,{affectViewKeys:["rows","rowCount"],refreshFilter:!0,refreshSort:!0,refreshSearch:!0,refreshAffectedStats:!0,refreshGroup:!0,selections:!0,enable:function(e){if(!e.table||!e.table[0])return!1;var t=e.colCount||e.table[0].length,n=e.rowCount||e.table.length,r=this.tableModel.getActiveView().data,o=this.tableModel.getFieldsMap(),a=r.selections;if(a.col+t>r.colCount)return this.kernel.emit("error",_c("复制失败，没有足够的列")),!1;for(var i=0;i<t;i++){var l=o[r.columns[a.col+i].id].type;if(Gc.includes(l))return this.kernel.emit("error",_c("该记录的此字段不支持编辑")),!1}return!(a.row+n>this.kernel.options.maxRecordCount&&(this.kernel.emit("error",_c("数据表已达最大行数限制")),1))},arguments:function(e){var t=this.tableModel.getActiveView(),n=t.data,r=t.getPasteSelections(e,n.selections),o=this.kernel.groupService,a={ids:[],startRow:n.rowCount},i={},l=e.rowCount||e.table.length;if(this.kernel.groupService.grouping){var c=o.getGroupByRow(r.row),s=o.getGroupRangeByRow(r.row).max-r.row+1;if(s<r.rowCount){i[c.groupBy]=this.recordsModel.getRecord(c.rows[0].id)[c.groupBy],a.startRow=r.row;for(var u=0;s+u<r.rowCount;u++)a.ids.push(fs(32))}}else if(r.row+l>=n.rowCount)for(var d=r.row+l-n.rowCount,f=0;f<d;f++)a.ids.push(fs(32));return[e,r,a,i]},snapshot:function(e){for(var t=e.args[1],n=t.row,r=t.rowCount,o=this.tableModel.getView(e.viewId).get("rows"),a=e.args[2].ids.length,i=[],l=n;l<n+r-a;l++)i.push(o[l].id);return e.actionSelections=wc(t),e.ids=i,e},execute:function(e,t,n,r,o){this.kernel.processService.paste(e,t,n,r,o),this.remote||this.kernel.emit("finished")},afterExecute:function(e){if(!this.remote){var t=e.ids[0],n=this.tableModel.getView(e.viewId).get("rows").findIndex((function(e){return e.id===t}));this.kernel.emit(gc.PASTE_END,{row:n,col:e.actionSelections.col})}},getCheckSelections:function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ju(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ju(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({activeRow:t.row,activeCol:t.col},t)},beforeUndo:function(e){var t=this,n=e.args[2].ids;n&&n.length>0&&n.forEach((function(e){t.recordsModel.removeRecord(e)}))},getExecuteData:function(e){var t=e.args[1],n=e.args[2].ids,r=this.tableModel.getView(e.viewId),o={records:{}};return n&&n.length>0?(o.records.inserted={viewId:e.viewId,type:r.get("type"),data:this.recordsModel.getRecordsByIds(n)},o.records.modified=this.recordsModel.getRecordsByIds(e.ids)):o.records.modified=r.getRecordsBySelections(t),o},getUndoData:function(e){var t=e.args[2].ids,n=e.args[1],r=this.tableModel.getView(e.viewId),o={records:{}};return t&&t.length>0&&(o.records.removed=t.concat(),o.records.modified=this.recordsModel.getRecordsByIds(e.ids)),o.records.modified=r.getRecordsBySelections(n),o},getRedoData:function(e){var t=e.args[1],n=e.args[2].ids,r=this.tableModel.getView(e.viewId),o={records:{}};return n&&n.length>0?(o.records.restored=n,o.records.modified=this.recordsModel.getRecordsByIds(e.ids)):o.records.modified=r.getRecordsBySelections(t),o}}),Tu=Object.assign({},$s,{readerEnable:!0,viewChanged:!1,execute:function(){this.kernel.processService.clearCopy()}});function Lu(e,t){return!(!e||!t||e.operator&&t.operator&&e.operator!==t.operator||!Ee()(e.options,t.options))}var Du=Object.assign({},$s,{readerEnable:!0,refreshStats:!0,refreshGroup:!0,refreshSearch:!0,viewChanged:!0,affectViewKeys:["filter"],snapshot:function(e){return e},execute:function(e,t){var n=this.tableModel.getView(t);if(n){var r=n.get("filter");this.kernel.filterService.setFilter(e,t),Lu(r,e)||this.kernel.emit(gc.FILTER_CHANGED,t)}},beforeUndo:function(e){var t=e.args[1],n=this.tableModel.getView(t);if(n){var r=n.get("filter");this.kernel.filterService.setFilter(e.oldViewData.filter,t),this.kernel.emit(gc.VIEW_CHANGED,t),Lu(e.oldViewData.filter,r)||this.kernel.emit(gc.FILTER_CHANGED,t)}}}),Pu=Object.assign({},$s,{readerEnable:!0,mataData:"sort",affectViewKeys:["sort","groupData"],refreshGroup:!0,viewChanged:!0,snapshot:function(e){return e},execute:function(e,t){this.kernel.sortService.setSort(e,t)},beforeUndo:function(e){var t=e.args[1];this.kernel.sortService.setSort(e.oldViewData.sort,t),this.kernel.emit(gc.VIEW_CHANGED,t)}}),Mu=Object.assign({},$s,{affectViewKeys:["stats"],refreshStats:!0,readerEnable:!0,viewChanged:!0,snapshot:function(e){return e},execute:function(e,t,n){this.kernel.statsService.setStat(e,t,n),this.kernel.groupStatsService.refreshGroupStatsByCol(e,n)}}),Nu=Object.assign({},$s,{readerEnable:!0,mataData:"group",affectViewKeys:["group","groupData","groupStates"],refreshGroup:!0,viewChanged:!0,snapshot:function(e){return e},execute:function(e,t){var n=e.filter((function(e){return!!e}));this.kernel.groupService.setGroup(n,t)}}),Iu=Object.assign({},$s,{readerEnable:!0,viewChanged:!0,execute:function(e,t,n,r){this.kernel.groupItemService.setGroupState(e,t,n,r),this.kernel.command.execute("setSelections",{})}}),Fu=Object.assign({},$s,{snapshot:function(e){return e},arguments:function(){return[fs(32)]},execute:function(e,t){this.kernel.tableService.insertCard(e,t)},afterExecute:function(e){var t=e.args[0];this.kernel.execute("activeView",t)},beforeUndo:function(e){var t=e.args[0],n=e.args[1];this.kernel.tableService.removeView(t),this.kernel.execute("activeView",n)},getExecuteData:function(e){var t=e.args[0];return{view:{inserted:this.tableModel.getView(t).data}}}}),Bu=Object.assign({},$s,{snapshot:function(e){return e},arguments:function(){return[fs(32)]},execute:function(e,t){this.kernel.tableService.insertGrid(e,t)},getExecuteData:function(e){var t=e.args[0];return{view:{inserted:this.tableModel.getView(t).data}}},afterExecute:function(e){var t=e.args[0];this.kernel.execute("activeView",t)},beforeUndo:function(e){var t=e.args[0],n=e.args[1];this.kernel.tableService.removeView(t),this.kernel.execute("activeView",n)}}),Vu=Object.assign({},$s,{snapshot:function(e){return e},arguments:function(){return[fs(32)]},execute:function(e,t){this.kernel.tableService.insertKanban(e,t)},getExecuteData:function(e){var t=e.args[0];return{view:{inserted:this.tableModel.getView(t).data}}},afterExecute:function(e){var t=e.args[0];this.kernel.execute("activeView",t)},beforeUndo:function(e){var t=e.args[0],n=e.args[1];this.kernel.tableService.removeView(t),this.kernel.execute("activeView",n)}}),Hu=Object.assign({},$s,{readerEnable:!0,viewChanged:!0,affectViewKeys:["rowHeight"],snapshot:function(e){return e},execute:function(e,t){var n=this.tableModel.getView(t);n&&n.setRowHeight(e)}}),zu=Object.assign({},$s,{readerEnable:!1,viewChanged:!0,affectViewKeys:["name"],snapshot:function(e){return e},execute:function(e,t){this.kernel.tableService.renameView(t,e),this.kernel.emit(gc.VIEW_NAME_CHANGED)},getExecuteData:function(e){var t=e.args[1],n=this.tableModel.getView(t);if(n)return{view:{modified:n.data}}}}),qu=Object.assign({},$s,{snapshot:function(e){return e},arguments:function(e){return[e,fs(32)]},execute:function(e,t){this.tableModel.getView(e)&&(this.kernel.tableService.copyView(e,t),this.kernel.execute("activeView",t))},getExecuteData:function(e){var t=e.args[1];return{view:{inserted:this.tableModel.getView(t).data}}},beforeUndo:function(e){var t=e.args[0],n=e.args[1];this.kernel.tableService.removeView(n),this.kernel.execute("activeView",t)}}),Uu=Object.assign({},$s,{tableChanged:!0,viewChanged:!1,snapshot:function(e){var t=this.tableModel.getView(e.args[0]);return e.data=wc(t.data),e},execute:function(e){if(this.tableModel.getView(e)){var t=this.tableModel.getViews();1===t.length&&t[0].get("id")===e||(this.kernel.tableService.removeView(e),this.tableModel.getActiveView().get("id")===e&&(t=this.tableModel.getViews(),this.kernel.execute("activeView",t[t.length-1].get("id"))))}},getExecuteData:function(e){return{view:{removed:{viewId:e.args[0]}}}},beforeUndo:function(e){this.tableModel.addView(e.data)},getUndoData:function(e){return{view:{restored:{viewId:e.viewId}}}}}),Gu=Object.assign({},$s,{readerEnable:!1,viewChanged:!1,execute:function(){this.tempState&&(this.refresh(this.tempState.snapshot),this.tempState=null,this.kernel.emit(gc.RECORD_WILL_MOVE,null))}}),Wu=Object.assign({},$s,{readerEnable:!0,viewChanged:!0,affectViewKeys:["columns"],snapshot:function(e){return e},execute:function(e,t){var n=this.tableModel.getView(t);n&&n.setColumns(e)}}),Yu=Object.assign({},$s,{readerEnable:!0,viewChanged:!0,affectViewKeys:["cover"],snapshot:function(e){return e},execute:function(e,t){var n=this.tableModel.getView(t);n&&n.set("cover",e)}}),$u=Object.assign({},$s,{readerEnable:!0,viewChanged:!0,affectViewKeys:["showField"],snapshot:function(e){return e},execute:function(e,t){var n=this.tableModel.getView(t);n&&n.set("showField",e)}}),Ku=Object.assign({},$s,{refreshFilter:!0,refreshSort:!0,refreshStats:!0,refreshGroup:!0,viewChanged:!0,enable:function(){var e=this.recordsModel.records,t=this.kernel.options.maxRecordCount;return!(e.length>=t)},arguments:function(e,t){var n=this.tableModel.getActiveView().data,r=n.rows,o=n.group,a=r[e].id,i=r.findIndex((function(e){return e.id===a})),l=this.recordsModel.getRecord(a),c=wc(l);return c.id=fs(32),l[o[0].id]={value:wc(t.titleValue)},[i,c,t.value]},snapshot:function(e){return e},execute:function(e,t,n,r){var o=this.tableModel.getView(r);if(o){o.get("type"),this.recordsModel.addRecord(t.id,t);var a=this.kernel.getViewService(o);a&&a.insertRows(o,e,1,[t.id],[t])}},beforeUndo:function(e){var t=e.args[1];this.recordsModel.removeRecord(t.id);var n=this.tableModel.getView(e.viewId);n&&(this.kernel.kanbanService.removeRows(n,[t.id]),this.kernel.emit(gc.VIEW_CHANGED,e.viewId))},getExecuteData:function(e){var t=e.args[1],n=this.tableModel.getView(e.viewId);return{records:{inserted:{viewId:e.viewId,type:n.type,data:[{id:t.id,data:JSON.stringify(t)}]}}}},getUndoData:function(e){return{records:{removed:[e.args[1].id]}}},getRedoData:function(e){return{records:{restored:[e.args[1].id]}}}}),Xu=Object.assign({},$s,{refreshFilter:!0,refreshSort:!0,refreshStats:!0,refreshGroup:!0,viewChanged:!0,affectViewKeys:["groupData","rows"],snapshot:function(e){return e.record={id:e.args[0],data:wc(this.recordsModel.getRecord(e.args[0]))},e},execute:function(e,t,n,r,o){var a=this.tableModel.getView(o);a&&this.kernel.getViewService(a).moveRow(e,t,n,r,a)},beforeUndo:function(e){this.recordsModel.setRecord(e.record.id,e.record.data);var t=this.kernel.tableModel.getActiveView();this.kernel.getViewService(t),this.kernel.emit(gc.VIEW_CHANGED,e.viewId)},getExecuteData:function(e){var t=e.args[0];return{records:{modified:[{id:t,data:JSON.stringify(this.recordsModel.getRecord(t))}]}}},getUndoData:function(e){var t=e.args[0];return{records:{modified:[{id:t,data:JSON.stringify(this.recordsModel.getRecord(t))}]}}}}),Zu=Object.assign({},$s,{readerEnable:!0,mataData:"group",affectViewKeys:["groupData","groupValueMap"],refreshGroup:!0,snapshot:function(e){var t=e.args[1];return e.colConfigs=wc(t),e.options=wc(e.args[1].options),e},execute:function(e,t){t.type===Ac.SELECT&&this.tableModel.columns.find((function(e){return e.id===t.id})).options.push(wc(e));var n=this.tableModel.getActiveView(),r=n.get("group");r&&r[0].id===t.id&&(t.type===Ac.SELECT&&this.kernel.groupItemService.create({titleValue:[e.id],value:e.value,rows:[]},n),t.type===Ac.MENTION&&this.kernel.groupItemService.create({titleValue:e,value:e.map((function(e){return e.name})).join(","),rows:[]},n))},beforeUndo:function(e){var t=e.args[1],n=e.options;this.tableModel.columns.find((function(e){return e.id===t.id})).options=wc(n)},getExecuteData:function(e){var t=e.colConfigs.id;return{field:{modified:{field:this.tableModel.getFieldsMap()[t]}}}},getUndoData:function(e){var t=e.colConfigs.id;return{field:{modified:{field:this.tableModel.getFieldsMap()[t]}}}}}),Qu=Object.assign({},$s,{refreshFilter:!0,refreshSort:!0,viewChanged:!0,affectViewKeys:["groupData","groupValueMap"],snapshot:function(e){var t=this,n=e.args[1];e.rows=wc(n),e.colConfigs=wc(e.args[2]),e.records=e.rows.map((function(e){return t.recordsModel.getRecord(e)}));var r=this.kernel.tableModel.getView(e.viewId).get("group")[0].id,o=this.kernel.tableModel.getFieldsMap()[r];return o.type===Ac.SELECT&&(e.options=wc(o.options)),e},execute:function(e,t,n,r){var o=this.kernel.tableModel.getView(r);if(o){var a=this.kernel.getViewService(o);this.kernel.groupItemService.remove(e,t,o);var i=this.kernel.tableModel.getActiveView();i.get("id")!==r&&a.refreshRows(i,!0)}},beforeUndo:function(e){var t=this;if(e.records.forEach((function(e){t.recordsModel.setRecord(e.id,e.data)})),e.options){var n=this.kernel.tableModel.getView(e.viewId).get("group")[0].id;this.kernel.tableModel.getFieldsMap()[n].options=wc(e.options)}var r=this.kernel.tableModel.getActiveView();r.get("id")!==e.viewId&&this.kernel.getViewService(r).refreshRows(r,!0),this.kernel.emit(gc.VIEW_CHANGED,e.viewId)},getExecuteData:function(e){var t=e.colConfigs.id,n={field:{modified:{field:this.tableModel.getFieldsMap()[t]}}},r=e.rows;if(r){var o=this.recordsModel.getRecordsByIds(r);n.records={modified:o}}return n},getUndoData:function(e){var t=e.colConfigs.id,n={field:{modified:{field:this.tableModel.getFieldsMap()[t]}}},r=e.rows;if(r){var o=this.recordsModel.getRecordsByIds(r);n.records={modified:o}}return n}}),Ju={activeView:Ks,setSelections:Xs,insertTable:Zs,insertRow:Qs,removeRows:Js,insertForm:eu,removeForm:tu,enableForm:nu,disableForm:ru,updateForm:ou,insertCol:au,setCellValue:iu,clearValue:lu,moveCol:cu,resizeCol:su,search:uu,searchPrev:du,searchNext:fu,clearSearch:pu,removeCol:vu,updateCol:yu,copy:Ru,paste:Au,clearCopy:Tu,setFilter:Du,setSort:Pu,setStats:Mu,setGroup:Nu,setGroupState:Iu,insertCard:Fu,insertGrid:Bu,updateRowHeight:Hu,updateViewName:zu,copyView:qu,removeView:Uu,clearTempState:Gu,insertKanban:Vu,setColumns:Wu,setCover:Yu,setShowField:$u,copyRow:Ku,addGroupItem:Zu,removeGroupItem:Qu,updateGroupItem:Object.assign({},$s,{refreshFilter:!0,refreshSort:!0,refreshGroup:!0,refreshStats:!0,affectViewKeys:["groupData","groupValueMap"],snapshot:function(e){var t=this,n=e.args[0],r=e.args[2],o=this.tableModel.getView(e.viewId).data,a=o.groupData[o.groupValueMap[n]];return e.colConfigs=wc(r),e.rows=wc(a.rows),e.records=wc(e.rows.map((function(e){return t.recordsModel.getRecord(e)}))),e},execute:function(e,t,n,r){var o=this.tableModel.getView(r);this.kernel.groupItemService.update(e,t,n,o)},beforeUndo:function(e){var t=this;e.colConfigs&&this.tableModel.updateColumn(e.colConfigs),e.records&&e.records.forEach((function(n,r){t.recordsModel.setRecord(e.rows[r],n)}))},getExecuteData:function(e){var t=e.colConfigs.id,n={field:{modified:{field:this.tableModel.getFieldsMap()[t]}}};if(e.rows){var r=this.recordsModel.getRecordsByIds(e.rows);n.records={modified:r}}return n},getUndoData:function(e){var t=e.colConfigs.id,n={field:{modified:{field:this.tableModel.getFieldsMap()[t]}}};if(e.rows){var r=this.recordsModel.getRecordsByIds(e.rows);n.records={modified:r}}return n}}),moveGroupItem:Object.assign({},$s,{readerEnable:!0,affectViewKeys:["groupData","groupValueMap"],snapshot:function(e){var t=e.args[2];return e.colConfigs=wc(t),e},execute:function(e,t,n,r){var o=this.tableModel.getView(r);this.kernel.groupItemService.move(e,t,o)},beforeUndo:function(e){e.colConfigs&&this.tableModel.updateColumn(e.colConfigs)},getExecuteData:function(e){var t=e.colConfigs.id;return{field:{modified:{field:this.tableModel.getFieldsMap()[t]}}}},getUndoData:function(e){var t=e.colConfigs.id;return{field:{modified:{field:this.tableModel.getFieldsMap()[t]}}}}}),moveRow:Xu};function ed(e,t){if(!e)throw new Error("[lake-table] assert error ".concat(t));return e}function td(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nd(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var od=function(e){g()(c,ce.a);var t,n,r,o,a,i,l=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(c);function c(e){var t;return d()(this,c),t=l.call(this),s()(m()(t),"onRequestError",(function(e){console.error(e),t.kernel.emit(gc.REQEUST_ERROR,e)})),s()(m()(t),"executeRemote",(function(e){var n=e.action,r=e.args;if(e.uid,t.commands[n]){var o=t.commands[n];t.remote=!0,o.execute.apply(m()(t),r),t.refresh(e),t.refreshView(e),t.remote=!1,t.kernel.emit(gc.CONTENT_CHANGED)}})),t.kernel=e,t.commands=Ju,t.requestQueue=[],t.processing=!1,t.tableService=e.tableService,t.formService=e.formService,t.tableModel=e.tableModel,t.recordsModel=t.tableModel.recordsModel,t.tempState=null,t.remote=!1,t}return p()(c,[{key:"enqueue",value:function(e,t,n){var r=this.requestQueue;this.enqueueing=!0,r.push({name:e,snapshot:t,data:n}),this.processing||this.dequeue()}},{key:"dequeue",value:(i=E()(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.requestQueue,this.processing=!0;case 2:if(!(t.length>0)){e.next=13;break}if(n=this.requestQueue.shift()){e.next=6;break}return e.abrupt("continue",2);case 6:return this.emit("dequeue",n),e.next=9,this.requestChanges(n.data,n.snapshot,n.name);case 9:(r=e.sent)&&!r.success&&(this.kernel.emit(gc.RECROD_SYNC_FAILURE,n.data.records),this.kernel.emit(gc.SYNC_ERROR,r.message)),e.next=2;break;case 13:this.processing=!1;case 14:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"requestChanges",value:(a=E()(O.a.mark((function e(t,n,r){var o,a,i,l,c,s,u,d,f,p,h,m,v,g,b,y,w;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.kernel.options,a=o.webSdk,i=o.webProxy,l=o.docId,c=o.docType,(a||i)&&l&&c){e.next=3;break}return e.abrupt("return");case 3:if(!t.field||!a){e.next=17;break}return s=n.viewId||n.args[0],u=this.tableModel.getView(s),d=u.type,e.prev=7,e.next=10,this.requestField(t.field,a,l,c,s,d);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(7),this.onRequestError(e.t0),ed(!1,"requestField error 数据同步失败并可能影响后续的数据同步");case 16:this.refresh(n,{afterRequest:!0,commandName:r});case 17:if(!t.view||!a){e.next=31;break}return f=n.viewId||n.args[0],p=this.tableModel.getView(f),h=null==p?void 0:p.type,e.prev=21,e.next=24,this.requestView(t.view,a,l,c,f,h);case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(21),this.onRequestError(e.t1),ed(!1,"requestView error 数据同步失败并可能影响后续的数据同步");case 30:this.refresh(n,{afterRequest:!0,commandName:r});case 31:if(!t.recordValue){e.next=45;break}return m=this.tableModel.getView(n.viewId),v=n.viewId,g=m.type,e.prev=35,e.next=38,this.requestRecordValue(t.recordValue,a,i,l,c,v,g);case 38:e.next=44;break;case 40:e.prev=40,e.t2=e.catch(35),this.onRequestError(e.t2),ed(!1,"requestRecordValue error 数据同步失败并可能影响后续的数据同步");case 44:this.refresh(n,{afterRequest:!0,commandName:r});case 45:if(!t.records){e.next=59;break}return b=this.tableModel.getView(n.viewId),y=n.viewId,w=b.type,e.prev=49,e.next=52,this.requestRecord(t.records,a,i,l,c,y,w);case 52:e.next=58;break;case 54:e.prev=54,e.t3=e.catch(49),this.onRequestError(e.t3),ed(!1,"requestRecord error 数据同步失败并可能影响后续的数据同步");case 58:this.refresh(n,{afterRequest:!0,commandName:r});case 59:case"end":return e.stop()}}),e,this,[[7,12],[21,26],[35,40],[49,54]])}))),function(e,t,n){return a.apply(this,arguments)})},{key:"requestRecord",value:(o=E()(O.a.mark((function e(t,n,r,o,a,i,l){var c,s,u,d,f,p,h,m,v,g,b,y,w,k=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=this.tableModel.tableId,this.kernel.emit(gc.RECROD_SYNC_SAVING,t),!t.inserted){e.next=10;break}return s=[],u=[],d=ye()(t.inserted.data,50),e.next=8,ke()(d.map((function(e){return E()(O.a.mark((function d(){var f,p,h,m;return O.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,p=(null==n?void 0:n.TableRecordController.create)||r.tables.createRecords,d.next=4,p({docId:o,docType:a,sheetId:c,viewId:t.inserted.viewId||i,type:t.inserted.type||l,data:e},{useOriginResp:!0});case 4:f=d.sent,d.next=10;break;case 7:return d.prev=7,d.t0=d.catch(0),d.abrupt("return",k.onRequestError(d.t0));case 10:if(f){d.next=12;break}return d.abrupt("return",!1);case 12:h=f.users,m=void 0===h?[]:h,(f.records||f.data||[]).forEach((function(e){s.push({recordId:e.uuid,createdAt:e.created_at,updatedAt:e.updated_at,userId:e.user_id,modifierId:e.modifier_id})})),u=[].concat(me()(u),me()(m));case 15:case"end":return d.stop()}}),d,null,[[0,7]])})))})));case 8:this.recordsModel.cacheUserInfo(u),this.recordsModel.updateRecordByDbData(s,this.tableModel.getTableFields(),Gc);case 10:if(!t.modified){e.next=19;break}return f=[],p=[],h=ye()(t.modified,50),m=this.tableModel.getTableFields(),e.next=17,ke()(h.map((function(e){return E()(O.a.mark((function t(){var s,u,d,h,m,v,g;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u=(null==n?void 0:n.TableRecordController.update)||r.tables.updateRecords,t.next=4,u({docId:o,docType:a,sheetId:c,viewId:i,type:l,data:e},{useOriginResp:!0});case 4:s=t.sent,t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",k.onRequestError(t.t0));case 10:if(s){t.next=12;break}return t.abrupt("return",!1);case 12:h=(d=s).data,m=void 0===h?[]:h,v=d.users,g=void 0===v?[]:v,m.forEach((function(e){f.push({recordId:e.uuid,updatedAt:e.updated_at,modifierId:e.modifier_id})})),p=[].concat(me()(p),me()(g));case 15:case"end":return t.stop()}}),t,null,[[0,7]])})))})));case 17:this.recordsModel.cacheUserInfo(p),this.recordsModel.updateRecordByDbData(f,m,[Ac.UPDATED_AT,Ac.MODIFIER_ID]);case 19:if(!t.removed){e.next=24;break}return t.removed=Array.isArray(t.removed)?t.removed:[t.removed],v=ye()(t.removed,50),e.next=24,ke()(v.map((function(e){return E()(O.a.mark((function t(){var s,u;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=(null==n?void 0:n.TableRecordController.remove)||r.tables.destroyRecords,u={docId:o,docType:a,sheetId:c,viewId:i,type:l},n?u.recordIds=e:u.ids=e,t.next=6,s(u);case 6:t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",k.onRequestError(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))})));case 24:if(!t.restored){e.next=34;break}return t.restored=Array.isArray(t.restored)?t.restored:[t.restored],g=this.tableModel.getTableFields(),b=[],y=[],w=ye()(t.restored,50),e.next=32,ke()(w.map((function(e){return E()(O.a.mark((function t(){var s,u,d,f,p,h,m,v;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u=(null==n?void 0:n.TableRecordController.restore)||r.tables.restoreRecords,d={docId:o,docType:a,sheetId:c,viewId:i,type:l},n?d.recordIds=e:d.ids=e,t.next=6,u(d,{useOriginResp:!0});case 6:s=t.sent,t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",k.onRequestError(t.t0));case 12:if(s){t.next=14;break}return t.abrupt("return",!1);case 14:p=(f=s).data,h=void 0===p?[]:p,m=f.users,v=void 0===m?[]:m,h.forEach((function(e){b.push({recordId:e.uuid,updatedAt:e.updated_at,modifierId:e.modifier_id})})),y=[].concat(me()(y),me()(v));case 17:case"end":return t.stop()}}),t,null,[[0,9]])})))})));case 32:this.recordsModel.cacheUserInfo(y),this.recordsModel.updateRecordByDbData(b,g,[Ac.UPDATED_AT,Ac.MODIFIER_ID]);case 34:this.kernel.emit(gc.RECROD_SYNC_SUCCESS,t);case 35:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r,a,i,l){return o.apply(this,arguments)})},{key:"requestRecordValue",value:(r=E()(O.a.mark((function e(t,n,r,o,a,i,l){var c,s,u,d,f,p=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=this.tableModel.tableId,!t.modified){e.next=10;break}return s=[],u=[],d=ye()(t.modified,50),f=this.tableModel.getTableFields(),e.next=8,ke()(d.map((function(e){return E()(O.a.mark((function t(){var d,f,h,m,v,g;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!n){t.next=7;break}return t.next=4,n.TableRecordValueController.bulkUpdate({docId:o,docType:a,sheetId:c,viewId:i,type:l,records:e.map((function(e){return{fieldId:e.colId,recordId:e.rowId,data:e.value,record:p.recordsModel.getRecord(e.rowId)}}))});case 4:d=t.sent,t.next=10;break;case 7:return t.next=9,r.tables.updateRecords({docId:o,docType:a,sheetId:c,viewId:i,type:l,data:e.map((function(e){return{uuid:e.rowId,data:JSON.stringify(p.recordsModel.getRecord(e.rowId))}}))},{useOriginResp:!0});case 9:d=t.sent;case 10:t.next=15;break;case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",p.onRequestError(t.t0));case 15:if(d){t.next=17;break}return t.abrupt("return",!1);case 17:h=(f=d).records,m=void 0===h?[]:h,v=f.users,g=void 0===v?[]:v,m.forEach((function(e){s.push({recordId:e.uuid,updatedAt:e.updated_at,modifierId:e.modifier_id})})),u=[].concat(me()(u),me()(g));case 20:case"end":return t.stop()}}),t,null,[[0,12]])})))})));case 8:this.recordsModel.cacheUserInfo(u),this.recordsModel.updateRecordByDbData(s,f,[Ac.UPDATED_AT,Ac.MODIFIER_ID]);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n,o,a,i,l){return r.apply(this,arguments)})},{key:"requestField",value:(n=E()(O.a.mark((function e(t,n,r,o,a,i){var l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=this.tableModel.tableId,!t.inserted){e.next=11;break}return e.prev=2,e.next=5,n.TableFieldController.create({docId:r,docType:o,sheetId:l,viewId:a,type:i,field:t.inserted});case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",this.onRequestError(e.t0));case 10:case 20:case 30:return e.abrupt("return");case 11:if(!t.modified){e.next=21;break}return e.prev=12,e.next=15,n.TableFieldController.update({docId:r,docType:o,sheetId:l,field:t.modified.field});case 15:e.next=20;break;case 17:return e.prev=17,e.t1=e.catch(12),e.abrupt("return",this.onRequestError(e.t1));case 21:if(!t.removed){e.next=31;break}return e.prev=22,e.next=25,n.TableFieldController.remove({docId:r,docType:o,sheetId:l,fieldId:t.removed.fieldId});case 25:e.next=30;break;case 27:return e.prev=27,e.t2=e.catch(22),e.abrupt("return",this.onRequestError(e.t2));case 31:case"end":return e.stop()}}),e,this,[[2,7],[12,17],[22,27]])}))),function(e,t,r,o,a,i){return n.apply(this,arguments)})},{key:"requestView",value:(t=E()(O.a.mark((function e(t,n,r,o,a,i){var l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=this.tableModel.tableId,!t.inserted){e.next=11;break}return e.prev=2,e.next=5,n.TableViewController.create({docId:r,docType:o,sheetId:l,viewId:t.inserted.id,type:t.inserted.type,data:t.inserted});case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",this.onRequestError(e.t0));case 10:case 20:case 30:return e.abrupt("return");case 11:if(!t.modified){e.next=21;break}return e.prev=12,e.next=15,n.TableViewController.update({docId:r,docType:o,sheetId:l,viewId:a,data:t.modified});case 15:e.next=20;break;case 17:return e.prev=17,e.t1=e.catch(12),e.abrupt("return",this.onRequestError(e.t1));case 21:if(!t.removed){e.next=31;break}return e.prev=22,e.next=25,n.TableViewController.remove({docId:r,docType:o,sheetId:l,viewId:t.removed.viewId});case 25:e.next=30;break;case 27:return e.prev=27,e.t2=e.catch(22),e.abrupt("return",this.onRequestError(e.t2));case 31:if(!t.restored){e.next=40;break}return e.prev=32,e.next=35,n.TableViewController.restore({docId:r,docType:o,sheetId:l,viewId:t.restored.viewId});case 35:e.next=40;break;case 37:return e.prev=37,e.t3=e.catch(32),e.abrupt("return",this.onRequestError(e.t3));case 40:case"end":return e.stop()}}),e,this,[[2,7],[12,17],[22,27],[32,37]])}))),function(e,n,r,o,a,i){return t.apply(this,arguments)})},{key:"allowed",value:function(e){var t=this.commands[e];return!((!this.kernel.editable||this.kernel.readOnly)&&!t.readerEnable&&!this.kernel.commandCanToDB(e)&&(this.kernel.emit(gc.EDIT_WARNING),1))}},{key:"arguments",value:function(e,t){var n=this.commands[e];(t=Array.prototype.slice.call(t)).splice(0,1),n.arguments&&(t=n.arguments.apply(this,t));var r=this.tableModel.getActiveView();return r&&t.push(r.get("id")),t}},{key:"snapshot",value:function(e,t){var n=this.tableModel.getActiveView(),r=this.commands[e],o=n?n.get("id"):"",a={action:e,args:wc(t),viewId:o,tableId:this.tableModel.getTableId(),uid:fs(16)};return n&&r.selections&&(a.selections=n.get("selections")),(a=r.snapshot.call(this,a))?(0!==r.affectViewKeys.length&&(a.oldViewData={},r.affectViewKeys.forEach((function(e){a.oldViewData[e]=wc(n.get(e))}))),a.actionSelections&&(a.oldActionValue=this.tableModel.getView(o).getRecordsBySelections(a.actionSelections)),a):a}},{key:"execute",value:function(e){if(this.commands[e]&&this.allowed(e)){var t,n=this.commands[e],r=this.arguments(e,arguments);if(!n.enable.apply(this,r))return!1;this.kernel.monitor.start(e),n.snapshot&&(t=this.snapshot(e,r));var o=n.execute.apply(this,r);if(this.kernel.commandCanToDB(e)&&!this.remote&&n.getExecuteData&&t){var a=n.getExecuteData.call(this,t);a&&this.enqueue(e,t,a)}if(t&&"insertTable"!==e){if(this.emit("snapshot",t),this.kernel.history.add(t),n.checkBeforeRefresh){var i=n.getCheckSelections.apply(this,r),l=this.getRecordMoveWaring(i,e);l?(this.tempState={selections:i,type:l,snapshot:t},this.kernel.emit(gc.RECORD_WILL_MOVE,this.tempState,n.name)):(this.tempState=null,this.refresh(t),this.kernel.emit(gc.RECORD_WILL_MOVE,this.tempState))}else this.tempState||this.refresh(t);(n.viewChanged||n.tableChanged)&&(this.tableService.changed(t.uid),this.kernel.emit(gc.VIEW_CHANGED,t.viewId)),this.kernel.emit(gc.CONTENT_CHANGED),n.colChanged&&this.kernel.emit(gc.COL_CHANGED)}else(n.viewChanged||n.tableChanged)&&this.tableService.changed();if("setSelections"===e&&this.tempState){var c=r[0],s=this.tempState.selections;if(void 0!==c.row&&s.row<=c.row&&s.row+s.rowCount>=c.row+c.rowCount)return[].concat(me()(r),[o]);this.refresh(this.tempState.snapshot),this.tempState=null,this.kernel.emit(gc.RECORD_WILL_MOVE,this.tempState)}return n.afterExecute.call(this,t),this.kernel.monitor.end(e),[].concat(me()(r),[o])}}},{key:"refresh",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.afterRequest,r=t.commandName,o=e.action,a=this.commands[o],i=this.tableModel.getActiveView(),l=i.get("id"),c=this.tableModel.getView(e.viewId);if(e.viewId===l){if(n){if(["insertRow","setCellValue"].includes(r)){var s=this._checkColsRefreshAfterRequest();s&&this.kernel.emit(gc.CONTENT_CHANGED_ASYNC)}var u=this._checkComputedRefreshAfterRequest();if(!u)return}var d,f,p=i.get("rows"),h=i.get("selections");if(h&&(d=null===(f=p[h.row])||void 0===f?void 0:f.id),a.refreshFilter&&c&&this.kernel.filterService.refreshFilter(e.viewId),a.refreshSearch&&this.kernel.searchService.checkSearch(),a.refreshSort&&this.kernel.sortService.isAuto(i)&&(i.type===Gs.KANBAN?this.kernel.sortService.refreshGroupSort(i):c&&this.kernel.sortService.refreshSort(e.viewId)),a.refreshAffectedStats&&c){var m=e.selections,v=this.tableModel.getView(e.viewId).get("columns"),g=[];if(m&&!isNaN(m.col)){for(var b=m.col;b<m.col+m.colCount;b++)v[b]&&g.push(v[b].id);this.kernel.statsService.refreshStatsByCols(g,e.viewId)}}if(a.refreshStats&&c&&this.kernel.statsService.refreshAllStats(e.viewId),a.refreshAffectedGroup&&this.kernel.groupService.refreshSingleGroups(e.selections),a.refreshGroup&&c)if("insertRow"===o){var y=this.kernel.sortService.isSorting(i)||this.kernel.filterService.isFiltering(i)||this.kernel.groupService.isGrouping(i)||this._checkColsRefreshAfterRequest();y&&this.kernel.groupService.refreshAllGroups(e.viewId)}else this.kernel.groupService.refreshAllGroups(e.viewId);if(h&&d){var w=(p=i.get("rows")).findIndex((function(e){return e.id===d}));w!==h.row&&this.kernel.execute("setSelections",rd(rd({},h),{},{row:w,activeRow:w}),{scrollInView:!0})}}}},{key:"_checkComputedRefreshAfterRequest",value:function(){for(var e=this,t=this.tableModel.getActiveView(),n=t.get("filter"),r=t.get("sort"),o=t.get("group"),a=0,i=[null==n?void 0:n.options,null==r?void 0:r.options,o];a<i.length;a++){var l=i[a];if(Array.isArray(l)&&l.some((function(t){var n=t.id,r=(e.tableModel.getFieldsMap()[n]||{}).type;return Gc.includes(r)})))return!0}return!1}},{key:"_checkColsRefreshAfterRequest",value:function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return td(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?td(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(this.tableModel.getTableFields());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=null==n?void 0:n.type;if(Gc.includes(r))return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"undo",value:function(e,t){if(this.commands[e]){var n=this.commands[e];if(t.viewId&&t.viewId!==this.tableModel.getActiveView().get("id")&&this.execute("activeView",t.viewId),n.beforeUndo&&n.beforeUndo.apply(this,[t]),n.undo.apply(this,[t]),n.afterUndo&&n.afterUndo.apply(this,[t]),this.kernel.commandCanToDB(e)&&n.getUndoData){var r=n.getUndoData.call(this,t);r&&this.enqueue(e,t,r)}n.checkBeforeRefresh&&this.tempState&&(this.tempState=null),this.refresh(t),this.tableModel.getActiveView().get("id")!==t.viewId&&this.execute("activeView",t.viewId),n.selections&&this.execute("setSelections",t.selections),n.viewChanged&&(this.tableService.changed(t.uid),this.kernel.emit(gc.VIEW_CHANGED,t.viewId)),this.kernel.emit(gc.CONTENT_CHANGED),n.colChanged&&this.kernel.emit(gc.COL_CHANGED),this.emit("undo",t)}}},{key:"redo",value:function(e,t){if(this.commands[e]){var n,r=this.commands[e],o=this.tableModel.getActiveView();t.viewId!==o.get("id")&&this.execute("activeView",t.viewId),t.selections&&this.execute("setSelections",t.selections),r.execute.apply(this,t.args),this.kernel.commandCanToDB(e)&&r.getRedoData?n=r.getRedoData.call(this,t):this.kernel.readOnly&&r.getExecuteData&&(n=r.getExecuteData.call(this,t)),n&&this.enqueue(e,t,n),this.refresh(t),r.viewChanged&&(this.tableService.changed(t.uid),this.kernel.emit(gc.VIEW_CHANGED,t.viewId)),this.kernel.emit(gc.CONTENT_CHANGED),r.colChanged&&this.kernel.emit(gc.COL_CHANGED),this.emit("redo",t)}}},{key:"refreshView",value:function(e){var t=this.tableModel.getActiveView();if(t.id!==e.viewId){var n=this.kernel.getViewService(t);n&&n.updateView(t)}}},{key:"executeUndoRemote",value:function(e){var t=e.action,n=e.uid;if(this.commands[t]){var r=this.commands[t];this.remote=!0,r.beforeUndo&&r.beforeUndo.apply(this,[e]),r.undo.apply(this,[e]),r.afterUndo&&r.afterUndo.apply(this,[e]),this.refresh(e),this.refreshView(e),this.remote=!1,r.viewChanged&&(this.tableService.changed(n),this.kernel.emit(gc.VIEW_CHANGED,e.viewId)),this.kernel.emit(gc.CONTENT_CHANGED)}}},{key:"executeRedoRemote",value:function(e){var t=e.action,n=e.uid;if(this.commands[t]){var r=this.commands[t];this.remote=!0,r.beforeRedo&&r.beforeRedo.apply(this,[e]),r.redo.apply(this,[e]),this.refresh(e),this.refreshView(e),this.remote=!1,r.viewChanged&&(this.tableService.changed(n),this.kernel.emit(gc.VIEW_CHANGED,e.viewId)),this.kernel.emit(gc.CONTENT_CHANGED)}}},{key:"getRecordMoveWaring",value:function(e,t){var n=this.tableModel.getActiveView(),r=this.kernel.groupService,o=n.data,a=o.columns,i=o.group,l=o.sort,c=o.filter,s=this.tableModel.getFieldsMap(),u=e.row,d=e.col,f=e.colCount,p=n.get("rows")[u].id;if("insertRow"===t)return!!(c&&c.options&&c.options.length)&&"filter";if(n.type===Gs.GRID&&r.grouping)for(var h=i.map((function(e){return e.id})),m=d;m<d+f;m++)if(h.includes(a[m].id)&&!r.isCellInGroup(u,p,s[a[m].id]))return"group";if(c&&c.options&&c.options.length>0)for(var v=c.options.map((function(e){return e.id})),g=d;g<d+f;g++)if(v.includes(a[g].id)&&this.kernel.filterService.isCellFiltered(p,s[a[g].id]))return"filter";if(this.kernel.sortService.isAuto(n))for(var b=l.options.map((function(e){return e.id})),y=d;y<d+f;y++)if(b.includes(a[y].id))return"sort";return!1}}]),c}(),ad=function(){function e(t){d()(this,e),this.kernel=t,this.snapshots=[],this.index=0}return p()(e,[{key:"add",value:function(e){void 0!==this.index&&this.snapshots.splice(this.index),this.snapshots.push(e),this.index+=1,this.snapshots.length>=100&&(this.snapshots.shift(),this.index--)}},{key:"undo",value:function(){if(this.canUndo()){var e=this.index-1,t=this.snapshots[e];this.index=e,this.kernel.command.undo(t.action,t)}}},{key:"redo",value:function(){var e=this.index,t=this.snapshots[e];t&&(this.index=e+1,this.kernel.command.redo(t.action,t))}},{key:"canUndo",value:function(){return!(this.index<=0||!this.snapshots[this.index-1])}},{key:"canRedo",value:function(){return this.snapshots[this.index]}}]),e}(),id=["YYYY-MM-DD","YYYY/MM/DD","YYYYMMDD"];function ld(e){return"string"==typeof e}_e.a.utc("1899-12-30");var cd=[/^([1-9]\d{3,4})(.{1})(0?[1-9]|1[0-2])(.{1})(0?[1-9]|[1-2][0-9]|3[0-1])(日?)$/,/^(0?[1-9]|1[0-2])(.{1})(0?[1-9]|[1-2][0-9]|3[0-1])(.{1})([1-9]\d{3,4})$/],sd=/^(20|21|22|23|[0-1]\d):[0-5]\d$/,ud=/^(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/,dd=/^([A-Za-z]{3,8})\s(0?[1-9]|[1-2][0-9]|3[0-1]),(([1-9]\d{3,4}))$/,fd={zh:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],zhNum:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],en:["January","February","March","April","May","June","July","August","September","October","November","December"],enShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"]},pd={mmdd:/^(0?[1-9]|1[0-2])(\-|\/|月)(0?[1-9]|[1-2][0-9]|3[0-1])(日?)$/,ddmm:/^(0?[1-9]|[1-2][0-9]|3[0-1])(\-|\/)(0?[1-9]|1[0-2])$/,yymm:/^(\d{2})(\-|\/)(0?[1-9]|1[0-2])$/,yymmdd:/^(\d{2})(\-|\/)(0?[1-9]|1[0-2])(\-|\/)(0?[1-9]|[1-2][0-9]|3[0-1])$/,yyyymm:/^([1-9]\d{3,4})(\-|\/|年)(0?[1-9]|1[0-2])(月?)$/};function hd(e){var t=_e.a.utc("1899-12-30").add(e.seconds,"seconds");return"Invalid date"!==t.toString()?(e.text=t.format("YYYY-MM-DD"),e.text):(e.text="","")}function md(e){var t=_e()(e.time);return"Invalid date"!==t.toString()?(e.text=t.format("YYYY-MM-DD HH:mm:ss"),e.text):(e.text="","")}function vd(e){return e>=31708800&&(e+=_e()("1901-01-01").diff("1900-12-31 23:59:59","seconds")-1),_e()("1899-12-30").add(e,"seconds").format("YYYY-MM-DDTHH:mm:ssZ")}function gd(e){return _e.a.utc(e).diff(_e.a.utc("1899-12-30"),"seconds")}_e.a.locale("sheet-en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"}}),_e.a.locale("sheet-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"}});var bd=/^-?[$¥£€]?\s?\d{0,3}(,?\d{3}){0,5}(\.\d+)?(?:[eE]{1}[+-]{1}\d{1,3})?%?$/;function yd(e,t){if(""===e||null==e)return"";if(!ne()(e)&&!t)return e;if(Array.isArray(e)&&(e=e.join(",")),ne()(e)){if("formula"===e.class){var n=e.value;return"boolean"==typeof n?n.toString().toUpperCase():e.error||!1===e.valid?e.value:(Array.isArray(n)&&(n=n[0]),["date","datetime","time"].indexOf(t.name)>=0?(_e.a.locale(wd(t)),Ed(86400*n,t)):"number"==typeof n?(n=Cd(n),void 0!==t.decimal&&(n=Re()(n).format(kd(t))),"currency"===t.name&&(n="".concat(n).replace("$",t.symbol||"¥")),n+""):n)}return function(e){switch(e.class){case"link":return e.text;case"checkbox":return(""+e.value).toUpperCase();case"image":case"file":return e.name||"";case"mention":return e.value?e.value.map((function(e){return e.name})).join(","):"";case"select":return"string"==typeof e.value?e.value:e.value.join(",");case"formula":return"="+e.formula;default:return""}}(e)}if(Q()(e)&&"'"===e[0])return e.substring(1);switch(t.name){case"currency":case"number":case"percentage":if(xd(e)){var r=Re()(Cd(e)).format(kd(t));return"currency"===t.name&&(r=r.replace("$",t.symbol||"¥")),r}break;case"date":case"datetime":case"time":oe()(e)&&(e=Ed(e,t));break;case"auto":if(xd(e)&&void 0!==t.decimal)return Re()(Cd(e)).format(kd(t))}return e}function wd(e){return e.lang?e.lang:"dddd"===e.formatter?"sheet-cn":"sheet-en"}function kd(e){switch(e.name){case"auto":return"0.".concat("0".repeat(void 0===e.decimal?0:e.decimal));case"currency":return e.decimal?"$0,0.".concat("0".repeat(e.decimal)):"$0,0";case"percentage":return e.decimal?"0.".concat("0".repeat(e.decimal),"%"):"0%";case"number":return e.decimal?"0,0.".concat("0".repeat(e.decimal)):"0,0";case"date":return e.formatter||"YYYY-MM-DD";case"datetime":return e.formatter||"YYYY-MM-DD HH:mm:ss";case"time":return e.formatter||"HH:mm:ss"}}function xd(e){return"number"==typeof e||""!=(e=""+e)&&!!bd.test(e)}function Ed(e,t){_e.a.locale(wd(t));var n=_e.a.utc("1899-12-30").add(e,"seconds");return"Invalid date"!==n.toString()?n.format(kd(t)):e+""}function Cd(e){var t=Re()(e).value(),n=function(e){if(!oe()(e))return 0;var t=""+e;return-1!==t.indexOf(".")?t.split(".").pop().length:0}(t);if(function(e){if(!oe()(e))return 0;var t=""+e;return(t=t.replace(/^-/,"").replace(/\./g,"").replace(/^0*/,"")).length}(t)<16)return t;var r=Math.pow(10,Math.min(16,n)-1);return Math.round(t*r)/r}var Od={getValue:function(e){var t=e.value;return"boolean"==typeof t?"":Array.isArray(t)?t.map((function(e){return e?e.name?e.name:e:""})).join(","):t.seconds?hd(t):t.time?md(t):t.name?t.name:isNaN(t)?"string"==typeof t&&-1!==t.indexOf("\n")?t.replace(/\n/g," "):e.value+"":t+""},getFormattedValue:function(e){return this.getValue(e)},getFilterValue:function(e){return this.getValue(e)},getSortValue:function(e){return this.getValue(e)},getSearchValue:function(e){return this.getValue(e)},getGroupValue:function(e){return{sortValue:this.getSortValue(e),formatValue:this.getFormattedValue(e)}},convertSheetValue:function(e){return yd(e.value,e.type)}},_d=Object.assign({},Od,{getValue:function(e){var t=e.value;return"boolean"==typeof t?"":Array.isArray(t)?t.map((function(e){return e?e.name?e.name:e:""})).join(","):t.seconds?hd(t):t.time?md(t):t.name?t.name:e.value+""},getFormattedValue:function(e){return this.getValue(e)},getFilterValue:function(e){return this.getValue(e)},getSortValue:function(e){return this.getValue(e)},getSearchValue:function(e){return this.getValue(e)}}),Sd=Object.assign({},Od,{getValue:function(e){var t=e.value;return"boolean"==typeof t?Cs(t?1:0):Array.isArray(t)&&!(t=t[0])?"":(t.name&&(t=t.name),Cs(t))},getFormattedValue:function(e){return this.getValue(e)+""},getSearchValue:function(e){return this.getValue(e)+""},convertSheetValue:function(e){var t=yd(e.value,e.type);return isNaN(t)?"":parseFloat(t)}}),Rd=Object.assign({},Od,{getValue:function(e,t){var n,r=e.value,o=e.value;if(Array.isArray(r))o=r[0];else if(void 0!==r.seconds)o=r.text||hd(r);else if(void 0!==r.time)o=r.text||md(r);else{if(r&&"boolean"==typeof r)return"";isNaN(r)||(o=r+"")}if(!o)return"";o.name&&(o=o.name);var a=null===(n=t.options)||void 0===n?void 0:n.find((function(e){return e.id===o||e.value===o}));return a?[a.id]:""},getFilterValue:function(e,t){return this.getValue(e,t)},getFormattedValue:function(e,t){var n=this.getValue(e,t);return n[0]?t.options.find((function(e){return e.id===n[0]})).value:""},getSortValue:function(e,t){return this.getValue(e,t)},getSearchValue:function(e,t){return this.getFormattedValue(e,t)},getGroupValue:function(e,t){var n=this.getValue(e,t);return""===n?{value:"",formatValue:""}:{sortValue:this.getValue(e,t),formatValue:t.options.find((function(e){return e.id===n[0]})).value}},convertSheetValue:function(e,t){var n,r=e.value;return r="select"===(null===(n=r)||void 0===n?void 0:n.class)?r.value:yd(r,e.type),this.getValue({value:r},t)}}),jd=Object.assign({},Od,{getValue:function(e,t){var n=e.value,r=e.value;if(Array.isArray(n)){var o=[];return n.forEach((function(e){var n;if(e){e=e.name||e;var r=null===(n=t.options)||void 0===n?void 0:n.find((function(t){return t.id===e||t.value===e}));r&&o.push(r.id)}})),0!==o.length?o:""}if(void 0!==n.seconds)r=n.text||hd(n);else if(void 0!==n.time)r=n.text||md(n);else{if("boolean"==typeof n)return"";isNaN(n)||(r=n+"")}n.name&&(r=n.name);var a=t.options.find((function(e){return e.id===r||e.value===r}));return a?[a.id]:""},getFormattedValue:function(e,t){var n=this.getValue(e,t);if(!n)return"";var r=[];return n.forEach((function(e){var n=t.options.find((function(t){return t.id===e||t.value===e}));n&&r.push(n.value)})),r.join(",")},getFilterValue:function(e,t){return this.getValue(e,t)},getSortValue:function(e,t){return this.getValue(e,t)},getSearchValue:function(e,t){return this.getFormattedValue(e,t)},getGroupValue:function(e,t){var n=this.getValue(e,t);if(""===n)return{value:"",formatValue:""};var r=[];return t.options.forEach((function(e){n.includes(e.id)&&r.push(e.value)})),{sortValue:this.getValue(e,t),formatValue:r.join(",")}},convertSheetValue:function(e,t){var n,r=e.value;return r="select"===(null===(n=r)||void 0===n?void 0:n.class)?r.value:yd(r,e.type),this.getValue({value:r},t)}}),Ad={getValue:function(e){var t=e.value;if("boolean"==typeof t)return"";if(Array.isArray(t)&&(t=t[0]),void 0!==t.time||void 0!==t.seconds){var n={seconds:t.seconds||gd(t.time),time:t.time||vd(t.seconds)};return n.text=hd(n),n}return isNaN(t)?"string"==typeof t&&-1!==t.indexOf("\n")?"":(t.name&&(t=t.name),function(e){var t=function(e){var t,n,r,o="";if(function(e){return ud.test(e)||sd.test(e)}(e))return function(e){return _e()("".concat("1899-12-30"," ").concat(e)).diff(_e.a.utc("1899-12-30"),"seconds")}(e);var a=e.match(/ (20|21|22|23|[0-1]\d):[0-5]\d(:([0-5]\d))?$/);return a&&(o=a[0],e=e.slice(0,-o.length)),(a=e.match(cd[0]))?(t=a[1],n=a[3],r=a[5]):(a=e.match(cd[1]))?(t=a[5],n=a[1],r=a[3]):(a=e.match(dd))&&(t=a[3],n=0===(n=fd.en.indexOf(a[1])+1)?NaN:n,r=a[2]),isNaN(t)||isNaN(n)||isNaN(r)?function(e){if(!e)return!1;var t,n,r,o="sheet-en";for(var a in pd){var i=e.match(pd[a]);if(i){t=a,n=i[2];break}}if(!t||["年","月","-","/"].indexOf(n)<0)return!1;switch(t){case"mmdd":"月"===n?(o="sheet-cn",r="M月D日"):r="MM/DD";break;case"ddmm":r="MM/DD";break;case"yymm":r="YYYY-MM";break;case"yymmdd":r="YYYY".concat(n,"MM").concat(n,"DD");break;case"yyyymm":"年"===n?(r="YYYY年M月",o="sheet-cn"):r="YYYY-MM"}return{name:"date",formatter:r,lang:o}}(e+=o)?function(e){var t=_e()(),n=1*t.format("YY"),r=t.format("YYYY");for(var o in pd){var a=e.match(pd[o]);if(a){var i="";switch(o){case"yymm":i=(1*a[1]>n?"19":"20")+ps(a[1],2)+"-"+ps(a[3],2)+"-01";break;case"yyyymm":i=a[1]+"-"+ps(a[3],2)+"-01";break;case"mmdd":i=r+"-"+ps(a[1],2)+"-"+ps(a[3],2);break;case"ddmm":i=r+"-"+ps(a[3],2)+"-"+ps(a[1],2);break;case"yymmdd":i=(1*a[1]>n?"19":"20")+a[1]+"-"+ps(a[3],2)+"-"+ps(a[5],2);break;default:i=e}return _e.a.utc(i).diff(_e.a.utc("1899-12-30"),"seconds")}}return 0}(e):e:gd("".concat(t,"-").concat(ps(n,2),"-").concat(ps(r,2)).concat(o))}(e);return isNaN(t)?"":{seconds:t,text:hd({seconds:t})}}(t)):""},getFormattedValue:function(e){var t=this.getValue(e);if(""===t)return"";if(t.text)return t.text;if(void 0!==t.seconds){var n=_e.a.utc("1899-12-30").add(t.seconds,"seconds");return"Invalid date"!==n.toString()?n.format("YYYY-MM-DD"):""}return t.time?_e()(t.time).format("YYYY-MM-DD"):""},getFilterValue:function(e){var t=this.getValue(e);return void 0!==t.seconds||void 0!==t.time?t:""},getSortValue:function(e){return this.getValue(e).seconds||""},getSearchValue:function(e){return this.getFormattedValue(e)},getGroupValue:function(e){var t=this.getValue(e);return{sortValue:t.seconds||"",formatValue:t.text}},convertSheetValue:function(e){var t=e.value;return t&&void 0!==t.seconds?{seconds:t.seconds}:this.getValue({value:yd(t,e.type)})}},Td=Object.assign({},Od,{getValue:function(e){return e.value},getFormattedValue:function(e){return _e()(e.value.time).format("YYYY-MM-DD HH:mm:ss")},getSortValue:function(e){return e.value.time},getGroupValue:function(e){return{sortValue:this.getSortValue(e),formatValue:this.getFormattedValue(e)}},getSearchValue:function(e){return this.getFormattedValue(e)}}),Ld=je.FileUtils.EXTS,Dd=je.FileUtils.getFileKey;je.FileUtils.getPreviewUrl;var Pd=je.FileUtils.getFileExtname,Md=function(e){var t=e;try{var n=new URL(e);t=n.origin+n.pathname}catch(e){}return je.FileUtils.isImage(t)},Nd=function(e,t){var n=je.FileUtils.getFileExtname(e);return je.FileUtils.isFileCanPreview(n,t)?je.FileUtils.getPreviewUrl(e):e},Id=Object.assign({},Od,{getValue:function(e){var t=this,n=e.value;return n?(Array.isArray(n)||(n=[n]),n.map((function(e){return t.formatImageValue(e)}))):[]},formatImageValue:function(e){return e?(e.login&&(e.src=e.avatar_url),"error"===e.status||"progress"===e.status?e:void 0!==e.src&&Md(e.src)?(e.name||(e.name=e.src),e.src=ks(e.src),e):""):""},getFormattedValue:function(e){var t=this.getValue(e)||[];return Array.isArray(t)?t.map((function(e){return null==e?void 0:e.name})).join(","):""},getSearchValue:function(e){return this.getFormattedValue(e)},convertSheetValue:function(e){var t=e.value;return"image"===(null==t?void 0:t.class)?"":this.getValue({value:t})}}),Fd=Object.assign({},Od,{getValue:function(e){var t=e.value;if(!t||t.seconds||t.time)return"";if("boolean"==typeof t)return"";if(t.src)return t.src=ks(t.src),t.name=t.name||"",t;if(Array.isArray(t)&&!(t=t[0]))return"";if(t.login)return{name:t.name,src:"/".concat(t.login)};t.name&&(t=t.name);var n=ks(t=(t=String(t)).replace(/\n/gi,""));return Es(t)&&(n="mailto:"+t),n?{src:n,name:t}:{name:t,src:"http://"+t}},getFormattedValue:function(e){var t=this.getValue(e);return t.name?t.name+"":""},getSearchValue:function(e){return this.getFormattedValue(e)},getSortValue:function(e){return this.getFormattedValue(e)},getFilterValue:function(e){return this.getFormattedValue(e)},getGroupValue:function(e){var t=this.getFormattedValue(e);return{sortValue:t,formatValue:t}},convertSheetValue:function(e){var t=e.value;if("link"===(null==t?void 0:t.class))return{src:t.url,name:t.text};var n=yd(t,e.type);return this.getValue({value:n})}}),Bd=Object.assign({},Od,{getValue:function(e){var t=e.value;return!(!t||!["1","true","是","yes","✅"].includes(String(t).toLowerCase()))},getFormattedValue:function(e){return this.getValue(e)+""},getSearchValue:function(e){return String(this.getValue(e))},getSortValue:function(e){return"true"===this.getFormattedValue(e)?1:0},getGroupValue:function(e){var t=this.getFormattedValue(e);return{sortValue:"true"===t?1:0,formatValue:t}},getFilterValue:function(e){return"true"===this.getFormattedValue(e)},convertSheetValue:function(e){var t,n=e.value;return"checkbox"===(null===(t=n)||void 0===t?void 0:t.class)&&!!n.value}}),Vd=Object.assign({},Od,{getValue:function(e){var t=this,n=e.value;return n?(Array.isArray(n)||(n=[n]),n.map((function(e){return t.formatFileValue(e)}))):[]},formatFileValue:function(e){return"error"===e.status||"progress"===e.status?e:void 0===e.src?"":e.uid?(e.fileKey=Dd(e.src),e.fileKey?(e.name||(e.name=e.src),e.src=ks(e.src),e):""):""},getFormattedValue:function(e){return(this.getValue(e)||[]).map((function(e){return e.name})).join(",")||""},getSearchValue:function(e){return this.getFormattedValue(e)},convertSheetValue:function(e){var t=e.value;return"file"===(null==t?void 0:t.class)?{uid:fs(4),src:t.src,name:t.name||t.src}:""}}),Hd=Object.assign({},Od,{getValue:function(e){var t,n,r=e.value;return Array.isArray(r)&&0!==r.length&&null!==(t=r[0])&&void 0!==t&&t.avatar_url&&null!==(n=r[0])&&void 0!==n&&n.name?r.map((function(e){return e.work_id&&(e.avatar_url="/__workers/r/avatar_buc/".concat(e.work_id)),e})):""},getFormattedValue:function(e){var t=this.getValue(e);return t&&Array.isArray(t)?t.map((function(e){return e.name})).join(","):""},getFilterValue:function(e){var t=this.getValue(e);return Array.isArray(t)?t.map((function(e){return e.id})):""},getSortValue:function(e){return this.getFormattedValue(e)},getSearchValue:function(e){return this.getFormattedValue(e)},getGroupValue:function(e){var t=this.getValue(e);if(!t)return{sortValue:"",formatValue:""};var n=t.map((function(e){return e.name})).sort((function(e,t){return e.localeCompare(t)})).join(",");return{sortValue:n,formatValue:n}},convertSheetValue:function(e){var t=e.value;return"mention"===(null==t?void 0:t.class)?e.value.value:""}}),zd=Object.assign({},Od,{getValue:function(e){var t=e.value;return"boolean"==typeof t||Array.isArray(t)&&!(t=t[0])?"":(t.name&&(t=t.name),"string"!=typeof t?"":t=t.replace(/\n/g,""))},getFormattedValue:function(e){return this.getValue(e)+""},getSearchValue:function(e){return this.getFormattedValue(e)},getSortValue:function(e){var t=this.getFormattedValue(e);return Es(t)?t:""},getFilterValue:function(e){return this.getFormattedValue(e)},convertSheetValue:function(e){var t=yd(e.value,e.type);return this.getValue({value:t})}}),qd=Object.assign({},Od,{getValue:function(e){var t=e.value;return"boolean"==typeof t||Array.isArray(t)&&!(t=t[0])?"":(t.name&&(t=t.name),"string"!=typeof t&&"number"!=typeof t?"":t=(t=String(t)).replace(/\n/g,""))},getFormattedValue:function(e){return this.getValue(e)+""},getSearchValue:function(e){return this.getFormattedValue(e)},getSortValue:function(e){var t=this.getFormattedValue(e);return xs(t)?t:""},getFilterValue:function(e){return this.getFormattedValue(e)},convertSheetValue:function(e){var t=yd(e.value,e.type);return this.getValue({value:t})}}),Ud=function(e){switch(e){case Ac.TEXTAREA:return _d;case Ac.NUMBER:return Sd;case Ac.SELECT:return Rd;case Ac.MULTI_SELECT:return jd;case Ac.DATE:return Ad;case Ac.CREATED_AT:case Ac.UPDATED_AT:return Td;case Ac.IMAGE:return Id;case Ac.LINK:return Fd;case Ac.CHECKBOX:return Bd;case Ac.FILE:return Vd;case Ac.MENTION:case Ac.USER_ID:case Ac.MODIFIER_ID:return Hd;case Ac.EMAIL:return zd;case Ac.PHONE:return qd;default:return Od}},Gd=function(){function e(){d()(this,e),this.rowMap={},this.records=[],this.recordCount=0,this.userMap=new Map}return p()(e,[{key:"getRecord",value:function(e){return this.records[this.rowMap[e]]||{}}},{key:"setRecord",value:function(e,t){this.records[this.rowMap[e]]=t}},{key:"clearRecord",value:function(e){this.records[this.rowMap[e]]={}}},{key:"addRecord",value:function(e,t){this.records.push(t||{}),this.rowMap[e]=this.recordCount,this.recordCount++}},{key:"removeRecord",value:function(e){var t=this,n=this.rowMap[e];void 0!==n&&(this.records.splice(n,1),delete this.rowMap[e],this.records[this.rowMap[e]]=void 0,this.recordCount--,Object.keys(this.rowMap).forEach((function(e){t.rowMap[e]>n&&(t.rowMap[e]-=1)})))}},{key:"getRecordsByIds",value:function(e){var t=this,n=[];return e.forEach((function(e){n.push({id:e,data:JSON.stringify(t.getRecord(e))})})),n}},{key:"getCell",value:function(e,t){var n=this.getRecord(e);return n&&n[t]||{}}},{key:"setCell",value:function(e,t,n){this.getRecord(e)[t]=n}},{key:"clearCell",value:function(e,t){delete this.getRecord(e)[t]}},{key:"cacheUserInfo",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Array.isArray(e)&&e.forEach((function(e){var r=e.id;(!t.userMap.get(r)||n.force)&&r&&e&&t.userMap.set(r,e)}))}},{key:"updateRecordByDbData",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=this.rowMap,a=new Map;Array.isArray(t)&&Array.isArray(r)&&(t.forEach((function(e){var t=null==e?void 0:e.id,n=null==e?void 0:e.type;r.forEach((function(e){n===e&&(a.get(n)||a.set(n,[]),a.get(n).push(t))}))})),e.forEach((function(e){var t=n.records[o[e.recordId]];t||(console.warn("record does not exist: ".concat(e.recordId)),n.records[o[e.recordId]]=t={}),r.forEach((function(r){t[r]=e[r],(a.get(r)||[]).forEach((function(e){n.autoFillByColType(e,r)}))}))})))}},{key:"getCellValue",value:function(e,t,n){var r=this.getCell(e,t);return void 0===r.value||null===r.value?"":Ud(n.type).getValue(r,n)}},{key:"getCellFormattedValue",value:function(e,t,n){var r=this.getCell(e,t);return void 0===r.value||null===r.value?"":Ud(n.type).getFormattedValue(r,n)}},{key:"getCellSearchValue",value:function(e,t,n){var r=this.getCell(e,t);return void 0===r.value||null===r.value?"":Ud(n.type).getSearchValue(r,n)}},{key:"getCellSortValue",value:function(e,t,n){var r=this.getCell(e,t);return void 0===r.value||null===r.value?n.type!==Ac.CHECKBOX&&"":Ud(n.type).getSortValue(r,n)}},{key:"getCellFilterValue",value:function(e,t,n){var r=this.getCell(e,t);return void 0===r.value||null===r.value?n.type!==Ac.CHECKBOX&&"":Ud(n.type).getFilterValue(r,n)}},{key:"getCellGroupValue",value:function(e,t,n){var r=this.getCell(e,t);return n.type!==Ac.CHECKBOX&&void 0===r.value||null===r.value?{sortValue:"",formatValue:""}:Ud(n.type).getGroupValue(r,n)}},{key:"autoFillByColType",value:function(e,t){var n=this;this.records.forEach((function(r){var o,a;switch(t){case Ac.CREATED_AT:r[e]={value:{time:r.createdAt}};break;case Ac.UPDATED_AT:r[e]={value:{time:r.updatedAt}};break;case Ac.USER_ID:(o=n.userMap.get(r.userId))&&(r[e]={value:[o]});break;case Ac.MODIFIER_ID:(a=n.userMap.get(r.modifierId))&&(r[e]={value:[a]});break;default:ed(!1,"cannot autofill in this kind of col_".concat(t))}}))}},{key:"initHistoryData",value:function(e){for(var t=this,n=e.data,r=e.rowCount,o=e.colCount,a=e.rowIds,i=e.createdTimes,l=e.columns,c=[],s=0;s<r;){if(c[s]=[],c[s].length=o,n[s])for(var u=0;u<o;)n[s][u]&&(c[s][u]=Wd(n[s][u])),u++;s++}a.forEach((function(e,n){t.rowMap[e]=n})),this.recordCount=r,c.forEach((function(e,n){var r={};Object.values(l).forEach((function(t,n){e[n]&&(r[t.id]=e[n])})),r.createdAt=i[a[n]],t.records.push(r)}))}},{key:"setData",value:function(e){var t=this;if(!e||0===e.length)return this.records=[],void(this.recordCount=0);this.records=e.map((function(e,n){t.rowMap[null==e?void 0:e.uuid]=n;var r={};if(null!=e&&e.data)try{r=JSON.parse(null==e?void 0:e.data)}catch(e){console.warn("parse record error",e)}return r.createdAt=null==e?void 0:e.created_at,r.updatedAt=null==e?void 0:e.updated_at,r.userId=null==e?void 0:e.user_id,r.modifierId=null==e?void 0:e.modifier_id,r})),this.recordCount=e.length}},{key:"getRowIds",value:function(){var e=this,t=[];return t.length=this.recordCount,Object.keys(this.rowMap).forEach((function(n){t[e.rowMap[n]]=n})),t}},{key:"getRecordCount",value:function(){return this.recordCount}},{key:"getValueMapByCol",value:function(e){var t=this,n={};return Object.keys(this.rowMap).forEach((function(r){var o=t.getCellValue(r,e.id,e);o&&(n[r]=o)})),n}},{key:"fillValueByMap",value:function(e,t){var n=this;Object.keys(e).forEach((function(r){n.setCell(r,t,{value:e[r]})}))}},{key:"selectToText",value:function(e,t){var n=this,r={};e.options.forEach((function(e){r[e.id]=e.value})),Object.keys(this.rowMap).forEach((function(o){var a=n.getCellValue(o,t.id,e);if(a){var i=a.map((function(e){return r[e]}));n.records[n.rowMap[o]][t.id]={value:Ud(t.type).getValue({value:i},t)}}}))}},{key:"getDataForSave",value:function(){var e=this.getRowIds();return this.records.map((function(t,n){var r=t.createdAt,o=t.updatedAt,a=t.userId,i=t.modifierId,l=wc(t);delete l.createdAt,delete l.updatedAt,delete l.userId,delete l.modifierId;var c=e[n];return{id:c,uuid:c,data:JSON.stringify(l),created_at:r,updated_at:o,user_id:a,modifier_id:i}}))}}]),e}();function Wd(e){var t={};return void 0!==e.v?t.value=e.v:void 0!==e.value&&(t.value=e.value),""===t.value&&delete t.value,t}var Yd=function(){function e(t,n){d()(this,e),this.data=Te()(t,this.fields),this.kernel=n,this.webProxy=n.webProxy}return p()(e,[{key:"fields",get:function(){return["id","name","desc","type","fields","viewId","tableId","createdAt"]}},{key:"type",get:function(){return this.data.type}},{key:"isEnable",value:function(){return 1===this.data.status}},{key:"set",value:function(e,t){this.data[e]=t}},{key:"get",value:function(e){return this.data[e]}},{key:"active",value:function(){this.isActive=!0}},{key:"bulkSet",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.data,e)}},{key:"getDataForSave",value:function(){var e=this.data;return Te()(e,this.fields)}},{key:"destroy",value:function(){}}]),e}(),$d="record",Kd=function(){function e(){d()(this,e)}return p()(e,[{key:"refreshGroupMap",value:function(){var e={},t=this.get("groupData");t&&(t.forEach((function(t,n){e[t.value]=n})),this.set("groupValueMap",e))}},{key:"getGroupByValue",value:function(e){var t=this.get("groupData");return t?t.find((function(t){return t.value===e})):null}},{key:"getUngrouped",value:function(){return this.getGroupByValue("")}},{key:"removeRowFromGroup",value:function(e){var t=this.get("groupData");if(!t)return null;for(var n=0;n<t.length;n++){var r=t[n].rows.indexOf(e);if(r>=0)return void t[n].rows.splice(r,1)}}},{key:"getGroupByRow",value:function(e){var t=this.get("groupData");return t?t.find((function(t){return t.rows.indexOf(e)>=0})):null}}]),e}();function Xd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Zd=function(e){g()(n,Kd);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r){var o;if(d()(this,n),(o=t.call(this,e,r)).data=e,o.isActive=!1,o.type=Gs.GRID,o.tableModel=r,o.recordsModel=r.recordsModel,o.data.rows=o.data.rows?o.data.rows.filter((function(e){return!!e})):[],void 0===o.data.scrollX&&(o.data.scrollX=0),void 0===o.data.scrollY&&(o.data.scrollY=0),!o.data.rowHeight||"number"==typeof o.data.rowHeight){var a=Rc.rowHeights[0];o.data.rowHeight=a}return o.data.selections={},o.refreshRowMap(),o.refreshGroupMap(),o}return p()(n,[{key:"fields",get:function(){return["id","tableId","type","name","selections","scrollX","scrollY","rows","rowCount","colCount","rowHeight","index","frozenCol","filter","filterConfigs","sort","columns","stats","group","groupData","groupStates"]}},{key:"set",value:function(e,t){this.data[e]=t}},{key:"get",value:function(e){return this.data[e]}},{key:"getData",value:function(){var e=this,t={};return this.fields.forEach((function(n){t[n]=e.get(n)})),t}},{key:"setRowHeight",value:function(e){var t=Rc.rowHeights.find((function(t){return t.type===e}));t&&this.set("rowHeight",t)}},{key:"setRows",value:function(e){this.data.rows=e,this.data.rowCount=e.length,this.refreshRowMap()}},{key:"refreshRowMap",value:function(){var e,t=this;this.rowMap={},null===(e=this.data.rows)||void 0===e||e.forEach((function(e,n){t.rowMap[e.id]=n}))}},{key:"setColumns",value:function(e){this.data.columns=e,this.data.colCount=e.length}},{key:"setSelections",value:function(e){this.set("selections",e),this.activeFirstCell()}},{key:"getSelections",value:function(){return this.get("selections")}},{key:"activeFirstCell",value:function(){var e=this.data.selections||{};void 0===e.activeRow&&void 0!==e.row&&(e.activeRow=Math.max(0,e.row)),void 0===e.activeCol&&void 0!==e.col&&(e.activeCol=Math.max(0,e.col))}},{key:"getRecordsBySelections",value:function(e){for(var t=this.recordsModel,n=this.get("rows"),r=[],o=e.row,a=e.rowCount,i=Math.max(o,0);i<o+a;i++){var l=n[i];l&&r.push({id:l.id,data:JSON.stringify(t.getRecord(l.id))})}return r}},{key:"active",value:function(){var e=this;this.isActive=!0,this.data.stats||(this.data.stats={},this.data.columns.forEach((function(t,n){0!==n||(e.data.stats[t.id]="count")}))),this.data.groupStates||(this.data.groupStates={})}},{key:"inactive",value:function(){this.isActive=!1}},{key:"getPasteSelections",value:function(e){var t=this.get("selections");if(!e)return t;var n=e.table,r=t.rowCount,o=t.colCount,a=n.length,i=Math.max.apply(Math,me()(n.map((function(e){return e.length})))),l=wc(t);r%a==0&&o%i==0||(l.rowCount=a,l.colCount=i);for(var c=0,u=0,d=Math.max(l.row,0),f=this.data;u<a;)d>=f.rowCount?u++:f.rows[d].filtered?c++:u++,d++;return l.rowCount+=c,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xd(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l)}},{key:"getDataForSave",value:function(){var e=this.data,t=e.columns.map((function(e){return{id:e.id,size:e.size,hidden:e.hidden}})),n=e.rows.filter((function(e){return!!e})).map((function(e){return{id:e.id}}));return{id:e.id,rows:n,columns:t,frozenCol:e.frozenCol,index:e.index,name:e.name,tableId:e.tableId,filter:e.filter,sort:e.sort,type:e.type,status:e.status,stats:e.stats,group:e.group,groupData:e.groupData,groupStates:e.groupStates,rowHeight:e.rowHeight}}},{key:"getSearchMode",value:function(){return"cell"}},{key:"destroy",value:function(){}}]),n}(),Qd=function(){function e(t,n){d()(this,e),this.type=Gs.CARD,this.data=t,t.scrollY=0,this.kernel=n,this.recordsModel=n.recordsModel,this.data.rows=this.data.rows?this.data.rows.filter((function(e){return!!e})):[]}return p()(e,[{key:"set",value:function(e,t){this.data[e]=t}},{key:"get",value:function(e){return this.data[e]}},{key:"setRows",value:function(e){this.data.rows=e,this.data.rowCount=e.length}},{key:"setColumns",value:function(e){this.data.columns=e,this.data.colCount=e.length}},{key:"getRecordsBySelections",value:function(e){for(var t=this.recordsModel,n=this.get("rows"),r=[],o=e.row,a=e.rowCount,i=Math.max(o,0);i<o+a;i++){var l=n[i];l&&r.push({id:l.id,data:JSON.stringify(t.getRecord(l.id))})}return r}},{key:"getDataForSave",value:function(){var e=this.data,t=e.columns.map((function(e){return{id:e.id,hidden:e.hidden}})),n=e.rows.filter((function(e){return!!e})).map((function(e){return{id:e.id}}));return{id:e.id,rows:n,columns:t,index:e.index,name:e.name,tableId:e.tableId,filter:e.filter,sort:e.sort,type:e.type,cover:e.cover,showField:e.showField,frozenCol:e.frozenCol}}},{key:"getSearchMode",value:function(){return $d}},{key:"setSelections",value:function(){}},{key:"destroy",value:function(){}}]),e}();var Jd=function(e){g()(n,Kd);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r){var o;return d()(this,n),(o=t.call(this,e,r)).type=Gs.KANBAN,o.data=e,e.scrollY=0,o.kernel=r,o.recordsModel=r.recordsModel,o.data.rows=o.data.rows?o.data.rows.filter((function(e){return!!e})):[],o.refreshRowMap(),o.refreshGroupMap(),o}return p()(n,[{key:"set",value:function(e,t){this.data[e]=t}},{key:"get",value:function(e){return this.data[e]}},{key:"setRows",value:function(e){this.data.rows=e,this.data.rowCount=e.length,this.refreshRowMap()}},{key:"refreshRowMap",value:function(){var e,t=this;this.rowMap={},null===(e=this.data.rows)||void 0===e||e.forEach((function(e,n){t.rowMap[e.id]=n}))}},{key:"setColumns",value:function(e){this.data.columns=e,this.data.colCount=e.length}},{key:"getRecordsBySelections",value:function(e){for(var t=this.recordsModel,n=this.get("rows"),r=[],o=e.row,a=e.rowCount,i=Math.max(o,0);i<o+a;i++){var l=n[i];l&&r.push({id:l.id,data:JSON.stringify(t.getRecord(l.id))})}return r}},{key:"getDataForSave",value:function(){var e=this.data,t=e.columns.map((function(e){return{id:e.id,hidden:e.hidden}})),n=e.rows.filter((function(e){return!!e})).map((function(e){return{id:e.id}}));return{id:e.id,rows:n,columns:t,index:e.index,name:e.name,tableId:e.tableId,filter:e.filter,sort:e.sort,type:e.type,group:e.group,groupData:e.groupData,showField:e.showField,frozenCol:e.frozenCol}}},{key:"getSearchMode",value:function(){return $d}},{key:"setSelections",value:function(){}},{key:"destroy",value:function(){}}]),n}();function ef(e,t){return function(e,t){return t.forEach((function(e){"multiSelect"!==e.type&&"select"!==e.type||(e.options=Array.isArray(e.options)?e.options.map((function(e){return{id:e.id||fs(6),value:e.value,color:(Array.isArray(e.color)?e.color[0]:e.color)||""}})):[])})),t}(0,t)}function tf(){var e,t=null===(e=window.appData)||void 0===e?void 0:e.form;window.appData.form.fields=ef(0,t.fields)}var nf={}.toString,rf=function(e,t){return nf.call(e)==="[object "+t+"]"};function of(e){return"function"==typeof e}var af=function(e){return rf(e,"Number")},lf=function(e){return rf(e,"String")};function cf(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return sf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function sf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var df=function(){function e(t,n){var r=this;d()(this,e),s()(this,"initData",function(){var e=E()(O.a.mark((function e(t,n){var o,a,i,l,c,s,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t="string"==typeof t?JSON.parse(ge.a.inflate(t,{to:"string"}))[0]:t[0],o=t.columns,a=[],i=Object.keys(o).length,t.colCount>i&&(t.colCount=i),l=t.colCount>0?t.colCount:i,a.length=l,c=0;c<l;)a[c]=o[c],c++;if(r.tableId=t.id,r.columns=a,r.viewData=t.views,r.initViews(t.views),r.dataVersion=n,t.views[t.defaultView]?r.defaultView=t.defaultView:(s=Object.values(t.views),u=s.filter((function(e){return e.type===Gs.GRID}))[0],r.defaultView=u?u.id:s[0].id),t.activeView&&(r.activeView=r.views[t.activeView]),r.updateColumnMap(),r.dataLoaded=!1,t.isBlank){e.next=27;break}if(!r.options.records){e.next=23;break}r.setRecords(r.options.records),e.next=25;break;case 23:return e.next=25,r.requestRecords();case 25:return e.next=27,r.requestForm();case 27:r.kernel.emit(gc.INIT_DATA,t);case 28:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.views={},this.viewData={},this.columns=[],this.columnMap={},this.colCount=0,this.options=n||{},this.activeView=null,this.version="1.3",this.versionId="",this.tableId="",this.defaultView="",this.kernel=t,this.recordsModel=new Gd}var t,n;return p()(e,[{key:"getTableId",value:function(){return this.tableId}},{key:"addView",value:function(e){var t=this.initView(e);this.views[e.id]=t}},{key:"removeView",value:function(e){this.views[e].destroy(),delete this.views[e]}},{key:"renameView",value:function(e,t){var n=this.views[e];n&&t&&n.set("name",t)}},{key:"getView",value:function(e){return this.views[e]}},{key:"getViews",value:function(){return Object.values(this.views).filter((function(e){return[Gs.GRID,Gs.CARD,Gs.KANBAN].includes(e.type)}))}},{key:"getTableFields",value:function(){return this.columns}},{key:"getFieldsMap",value:function(){return this.columnMap}},{key:"getViewByType",value:function(e){return this.getAllViewsByType(e)[0]}},{key:"getAllViewsByType",value:function(e){for(var t=[],n=0,r=Object.values(this.views);n<r.length;n++){var o=r[n];o&&o.type===e&&t.push(o)}return t}},{key:"getActiveView",value:function(){return this.activeView}},{key:"getMetaData",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uf(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object.values(this.views).reduce((function(e,t){return e[t.type]?e[t.type]+=1:e[t.type]=1,e}),{}))}},{key:"insertColumn",value:function(e){this.columns.push(e),this.colCount++,this.updateColumnMap()}},{key:"removeColumn",value:function(e){this.columns=this.columns.filter((function(t){return t.id!==e})),this.colCount--,this.updateColumnMap()}},{key:"updateColumn",value:function(e){for(var t,n=0;n<this.columns.length;n++)if(e.id===this.columns[n].id){t=n;break}this.columns[t]=e,this.updateColumnMap()}},{key:"updateColumnMap",value:function(){var e=this;this.columnMap={},this.columns.forEach((function(t){e.columnMap[t.id]=t}))}},{key:"isTableModified",value:function(){var e,t=Object.keys(this.recordsModel.rowMap),n=cf(this.columns);try{for(n.s();!(e=n.n()).done;){var r,o=e.value,a=cf(t);try{for(a.s();!(r=a.n()).done;){var i=r.value,l=this.recordsModel.getCellValue(i,o.id,o);if(Array.isArray(l)){if(l.length>0)return!0}else if(l)return!0}}catch(e){a.e(e)}finally{a.f()}}}catch(e){n.e(e)}finally{n.f()}return Object.keys(this.views).length>1}},{key:"updateColumns",value:function(e){this.columns=e,this.colCount=e.length}},{key:"requestRecords",value:(n=E()(O.a.mark((function e(){var t,n,r,o,a,i,l,c,s,u,d,f,p,h,m,v=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.options,n=t.docId,r=t.docType,o=t.limit,a=void 0===o?2e3:o,i=t.webProxy,l=t.webSdk,c=t.mention,s=[],u=[],!i&&!l||void 0===n){e.next=31;break}d={docId:n,docType:r,sheetId:this.tableId,offset:0,limit:a},(f=this.columns.filter((function(e){return e.type===Ac.MENTION})))&&f.length>0&&(d.mention_columns=f.map((function(e){return e.id})).join(","),setTimeout(E()(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!of(null==c?void 0:c.defaultList)){e.next=8;break}return e.next=3,c.defaultList();case 3:t=e.sent,n=De()(t,"id").map((function(e){return Te()(e,["id","avatar_url","name","login","user_id","work_id"])})),v.recordsModel.cacheUserInfo(n,{force:!0}),e.next=9;break;case 8:Array.isArray(null==c?void 0:c.defaultList)&&v.recordsModel.cacheUserInfo(c.defaultList,{force:!0});case 9:case"end":return e.stop()}}),e)}))),1e3)),p=!0,h=100;case 10:if(!p||!h){e.next=29;break}if(m=void 0,!l){e.next=19;break}return e.next=15,l.TableRecordController.show(d);case 15:(m=e.sent).records&&m.records.length>0&&(s=s.concat(m.records)),e.next=23;break;case 19:return e.next=21,i.tables.getRecords(d,{useOriginResp:!0});case 21:(m=e.sent).data&&m.data.length>0&&(s=s.concat(m.data));case 23:m.users&&m.users.length>0&&(u=u.concat(m.users)),p=m.hasMore,d.offset+=d.limit,h--,e.next=10;break;case 29:this.recordsModel.cacheUserInfo(u),this.setRecords(s);case 31:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setRecords",value:function(e){var t=this;this.recordsModel.setData(e),this.columns.forEach((function(e){Gc.includes(e.type)&&t.recordsModel.autoFillByColType(e.id,e.type)})),this.fixDataByVersion(),this.kernel.emit(gc.DATA_LOADED),this.dataLoaded=!0,this.activeView&&this.kernel.execute("activeView",this.activeView.get("id"))}},{key:"requestForm",value:(t=E()(O.a.mark((function e(){var t,n,r,o,a,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.options,n=t.docId,r=t.docType,o=t.webProxy,"Doclet"!==r){e.next=3;break}return e.abrupt("return");case 3:if((a=this.getViewByType("FORM"))&&null!=o&&o.shares){e.next=6;break}return e.abrupt("return");case 6:return a.set("loading",!0),e.next=9,o.shares.findOne({target_id:n,target_type:r,type:"form"});case 9:if(i=e.sent,a.set("loading",!1),i&&i.token){e.next=13;break}return e.abrupt("return");case 13:a.set("url","/forms/share/".concat(i.token)),a.set("status",0===i.status?1:0);case 15:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"initViews",value:function(e){var t=this;this.views={},Object.values(e).forEach((function(e){t.views[e.id]=t.initView(e)}))}},{key:"initView",value:function(e){switch(e.type){case Gs.FORM:return new Yd(e,this.kernel);case Gs.GRID:return new Zd(e,this);case Gs.CARD:return new Qd(e,this);case Gs.KANBAN:return new Jd(e,this);default:console.warn("cannot match view type ".concat(e.type))}}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};Object.values(this.views).forEach((function(e){t[e.get("id")]=e.getDataForSave()}));var n=[{rowIds:this.recordsModel.getRowIds(),rowCount:this.recordsModel.getRecordCount(),columns:this.columns,colCount:this.columns.length,defaultView:this.activeView&&this.activeView.get("id"),activeView:this.activeView&&this.activeView.get("id"),id:this.tableId,views:t,meta:this.getMetaData()}],r={format:"laketable",type:"Table",version:"1.3",larkJson:!0};if(r.sheet=ge.a.deflate(JSON.stringify(n),{to:"string"}),e.fullBody){var o=this.recordsModel.getDataForSave();r.records=ge.a.deflate(JSON.stringify(o),{to:"string"})}return JSON.stringify(r)}},{key:"getVersionId",value:function(){return this.versionId}},{key:"setVersionId",value:function(e){this.versionId=e}},{key:"generateUid",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,n=Object.values(this.views),r=[];!e||r.length>0;)e=fs(t),r=n.filter((function(t){return t.get("id")===e}));return e}},{key:"fixDataByVersion",value:function(){var e,t,n;this.views=function(e,t){return e&&e<"1.1"?(Object.values(t).forEach((function(e){var t=e.get("name");e.set("name",t.replace("未命名视图","表格视图"))})),t):t}(this.dataVersion,this.views),this.columns=ef(this.dataVersion,this.columns),this.recordsModel.records=(e=this.recordsModel.records,t=this.columns,n=t.filter((function(e){return Ac.SELECT===e.type})),e.map((function(e){for(var t=function(){var t=n[r],o=e[t.id];if(o&&"string"==typeof o.value){var a,i,l=null===(a=t.options)||void 0===a||null===(i=a.find((function(e){return e.value===o.value})))||void 0===i?void 0:i.id;l&&(e[t.id].value=[l])}},r=0;r<n.length;r++)t();return e})))}},{key:"fixViewName",value:function(){Object.values(this.views).forEach((function(e){var t=e.get("name");e.set("name",t.replace("未命名视图","表格视图"))}))}}]),e}(),ff={name:"画册视图",type:"CARD",rowCount:0,rows:[],columns:[],filter:{},sort:{},index:0,scrollX:0,scrollY:0,tableId:"",frozenCol:0,showField:!1,cover:{show:!0,id:"colId",display:"clip"}},pf={name:"看板视图",type:"KANBAN",index:0,tableId:"",rowCount:0,frozenCol:0,rows:[],columns:[],filter:{options:[]},sort:{options:[]},group:[],groupStates:{},showField:!1};function hf(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return mf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function mf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vf=function(){function e(t){d()(this,e),this.kernel=t,this.tableModel=t.tableModel,this.recordsModel=this.tableModel.recodsModel}return p()(e,[{key:"insertTable",value:function(e,t,n){var r=wc(kc);r.columns.forEach((function(e,t){e.id=n[t]})),this.tableModel.tableId=e,this.tableModel.defaultView=t,this.tableModel.columns=r.columns,this.tableModel.colCount=r.colCount,this.tableModel.updateColumnMap(),this.insertGrid(t)}},{key:"insertGrid",value:function(e,t){var n=wc(jc);n.id=e;var r=-1;if(this.tableModel.getViews().forEach((function(e){e.get("type")===Gs.GRID&&(r=Math.max(r,e.get("index")))})),t){var o=this.tableModel.getView(t);n.index=r+1,n.name=_c("表格视图$1",n.index||""),n.columns=o.get("columns").map((function(e){var t={id:e.id};return e.size&&(t.size=e.size),t})),n.rows=o.get("rows").map((function(e){return{id:e.id}}))}else n.defaultView=!0,n.id=e,n.tableId=this.tableModel.tableId,n.columns=this.tableModel.columns.map((function(e){return{id:e.id}}));this.tableModel.addView(n)}},{key:"insertCard",value:function(e,t){var n=wc(ff);n.id=e;var r=-1;Object.values(this.tableModel.views).forEach((function(e){e.get("type")===Gs.CARD&&(r=Math.max(r,e.get("index")))})),n.index=r+1,n.name=_c("画册视图$1",n.index||"");for(var o=this.tableModel.getView(t),a=this.tableModel.getFieldsMap(),i=o.get("columns").map((function(e,t){return{id:e.id,hidden:0!==t}})),l=null,c=0,s=1;s<i.length;s++)a[i[s].id].type===Ac.IMAGE?l||(l=i[s].id):c<2&&(delete i[s].hidden,c++);l?n.cover.id=l:n.cover.show=!1,n.columns=i,n.rows=o.get("rows").map((function(e){return{id:e.id}})),this.tableModel.addView(n)}},{key:"insertKanban",value:function(e,t){var n=wc(pf);n.id=e;var r=-1;Object.values(this.tableModel.views).forEach((function(e){e.get("type")===Gs.KANBAN&&(r=Math.max(r,e.get("index")))})),n.index=r+1,n.name=_c("看板视图$1",n.index||"");var o=this.tableModel.getView(t),a=this.tableModel.getFieldsMap(),i=o.get("columns").map((function(e,t){return{id:e.id,type:a[e.id].type,color:a[e.id].color,hidden:0!==t}})),l=this._getKanbanGroupCol(i);if(l&&(n.group=[{id:l.id}],delete l.hidden),0===n.group.length){var c=this.kernel.kanbanService.createDefaultGroupCol(t);n.group=[{id:c.id}],a=this.tableModel.getFieldsMap(),i.push({id:c.id,type:a[c.id].type,color:a[c.id].color})}n.columns=i,n.rows=o.get("rows").map((function(e){return{id:e.id}})),this.tableModel.addView(n)}},{key:"_getKanbanGroupCol",value:function(e){for(var t=[],n=0,r=[Ac.SELECT,Ac.MENTION];n<r.length;n++){var o,a=r[n],i=hf(e);try{for(i.s();!(o=i.n()).done;){var l=o.value;a===l.type&&t.push(l)}}catch(e){i.e(e)}finally{i.f()}}for(var c=0,s=t;c<s.length;c++){var u=s[c];if(u.type===Ac.SELECT&&u.color)return u}return t[0]}},{key:"changed",value:function(e){e=e||fs(16),this.tableModel.setVersionId(e),this.kernel.emit(gc.CHANGED),this.autoSave()}},{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gc.SAVE;this.kernel.emit(e)}},{key:"autoSave",value:function(){var e=this;this.saveTimer&&clearTimeout(this.saveTimer),this.saveTimer=setTimeout((function(){e.save(gc.AUTO_SAVE),e.saveTimer=null}),5e3)}},{key:"lazyAutoSave",value:function(){this.saveTimer&&this.autoSave()}},{key:"removeColumn",value:function(e){var t=this.tableModel.getTableFields();this.tableModel.columns=t.filter((function(t){return t.id!==e})),this.tableModel.updateColumnMap()}},{key:"updateColumn",value:function(e){for(var t=this.tableModel.getTableFields(),n=0;n<t.length;n++)if(t[n].id===e.id){if(e.name=e.name.substr(0,128),e.options){var r,o=hf(e.options);try{for(o.s();!(r=o.n()).done;){var a=r.value;a.value=a.value.substr(0,128)}}catch(e){o.e(e)}finally{o.f()}}t[n]=e,this.tableModel.columnMap[e.id]=e;break}}},{key:"copyView",value:function(e,t){var n=this.tableModel.getView(e),r=wc(n.data);r.id=t,r.name+=" (".concat(_c("副本"),") ");var o=0;this.tableModel.getViews().forEach((function(e){e.get("type")===n.get("type")&&(o=Math.max(o,e.get("index")))})),r.index=o+1,this.tableModel.addView(r)}},{key:"removeView",value:function(e){this.tableModel.getView(e).destroy(),delete this.tableModel.views[e]}},{key:"renameView",value:function(e,t){this.tableModel.renameView(e,t)}}]),e}(),gf=function(){function e(t){d()(this,e),this.kernel=t,this.tableModel=t.tableModel,this.recordsModel=this.tableModel.recordsModel}return p()(e,[{key:"active",value:function(e){if(this.tableModel.activeView=e,this.kernel.groupService.isEnable(e)){var t=e.get("group"),n=e.get("groupData");t&&t.length>0&&(!n||0===n.length)&&(this.refreshRows(e,!1),this.kernel.groupService.setGroup(t,e.get("id")),e.refreshGroupMap())}this.updateView(e),e.active&&e.active()}},{key:"inactive",value:function(){}},{key:"updateView",value:function(){}},{key:"insertRows",value:function(e,t,n,r){var o=e.get("rows");if(void 0===t)r=r.map((function(e){return{id:e}})),o=o.concat(r);else for(var a=0;a<n;a++)o.splice(t+a,0,{id:r[a]});e.setRows(o)}},{key:"moveRow",value:function(e,t,n,r,o){var a,i=wc(o.get("rows")),l=i.findIndex((function(t){return t.id===e}));i.splice(l,1),n?0===(a=i.findIndex((function(e){return e.id===n})))?i.unshift({id:e}):i.splice(a,0,{id:e}):i.push({id:e}),o.setRows(i);var c=this.kernel.groupService.grouping;c&&this.kernel.groupRowService.move(e,t,n,r,o);var s=this.kernel.sortService;s.isSorting(o)&&(s.isAuto(o)?c?s.refreshGroupSort(o):s.refreshSort(o):s.removeGroupSort(o.get("id")))}},{key:"removeRows",value:function(e,t,n){var r=e.get("rows"),o=[];r.forEach((function(e){t.includes(e.id)||o.push(e)})),e.setRows(o),this.kernel.groupService.grouping&&this.kernel.groupRowService.batchRemove(t,e,n)}},{key:"insertColumn",value:function(e,t,n){var r=e.get("columns"),o={id:n.id};void 0!==n.size&&(o.size=n.size),void 0===t?r.push(o):r.splice(t,0,o),e.setColumns(r)}},{key:"removeColumn",value:function(e,t){var n=e.get("columns");n=n.filter((function(e){return e.id!==t})),e.setColumns(n)}},{key:"moveColumn",value:function(e,t,n){var r=this.tableModel.getView(n).get("columns");if(e>t){var o=r.splice(e,1);r.splice.apply(r,[t,0].concat(me()(o)))}else{var a=r.splice(e,1);r.splice.apply(r,[t-1,0].concat(me()(a)))}}},{key:"clearValue",value:function(e){for(var t=this,n=this.tableModel.getView(e).data,r=n.rows,o=n.columns,a=n.selections,i=a.row,l=a.col,c=a.rowCount,s=a.colCount,u=this.tableModel.getFieldsMap(),d=[],f=l;f<l+s;f++){var p=u[o[f].id];Gc.includes(p.type)||d.push(f)}for(var h=function(){var e=r[m].id;d.forEach((function(n){var r=o[n].id;t.recordsModel.clearCell(e,r)}))},m=i;m<i+c;m++)h()}},{key:"refreshRows",value:function(e,t){var n=this,r=this.recordsModel.getRowIds(),o=e.data,a=o.rows,i=o.group,l=i&&i[0]&&i[0].id,c={},s=[];a.forEach((function(o){r.includes(o.id)?(c[o.id]=!0,l&&t&&n.kernel.groupRowService.refreshRowInGroup(o.id,l,e),s.push(o)):l&&t&&e.removeRowFromGroup(o.id)})),r.forEach((function(r){c[r]||(s.push({id:r}),l&&t&&n.kernel.groupRowService.refreshRowInGroup(r,l,e))})),e.setRows(s)}}]),e}();var bf,yf=function(e){g()(n,gf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"updateView",value:function(e){e.get("rows");var t,n,r,o,a=e.get("columns"),i=this.tableModel.getTableFields();if(this.tableModel.dataLoaded){this.refreshRows(e,!1);var l=e.get("group");l&&l.length>0&&(this.kernel.groupService.setGroup(l,e.get("id")),e.refreshGroupMap())}e.setColumns((t=a,n=i.map((function(e){return e.id})),r=[],o={},t.forEach((function(e){n.includes(e.id)&&r.push(e),o[e.id]=!0})),n.forEach((function(e){o[e]||r.push({id:e})})),r))}},{key:"insertRows",value:function(e,t,r,o){var a=this;if(Me()(k()(n.prototype),"insertRows",this).call(this,e,t,r,o),this.kernel.groupService.grouping){var i=e.get("group")[0].id;o.forEach((function(t){a.kernel.groupRowService.refreshRowInGroup(t,i,e)}))}}}]),n}(),wf=[{type:"number",func:"equalTo",text:_c("等于")},{type:"number",func:"notEqualTo",text:_c("不等于")},{type:"number",func:"greaterThan",text:_c("大于")},{type:"number",func:"greaterThanOrEqualTo",text:_c("大于等于")},{type:"number",func:"lessThan",text:_c("小于")},{type:"number",func:"lessThanOrEqualTo",text:_c("小于等于")},{type:"number",func:"isEmpty",text:_c("为空")},{type:"number",func:"isNotEmpty",text:_c("非空")},{type:"text",func:"startsWith",text:_c("开头是")},{type:"text",func:"notStartsWith",text:_c("开头不是")},{type:"text",func:"endsWith",text:_c("结尾是")},{type:"text",func:"notEndsWith",text:_c("结尾不是")},{type:"text",func:"contains",text:_c("包含")},{type:"text",func:"notContains",text:_c("不包含")},{type:"text",func:"isEmpty",text:_c("为空")},{type:"text",func:"isNotEmpty",text:_c("非空")},{type:"timePeriod",func:"yesterday",text:_c("昨天")},{type:"timePeriod",func:"today",text:_c("今天")},{type:"timePeriod",func:"tomorrow",text:_c("明天")},{type:"timePeriod",func:"last7days",text:_c("过去7天")},{type:"timePeriod",func:"lastWeek",text:_c("上周")},{type:"timePeriod",func:"thisWeek",text:_c("本周")},{type:"timePeriod",func:"nextWeek",text:_c("下周")},{type:"timePeriod",func:"lastMonth",text:_c("上月")},{type:"timePeriod",func:"thisMonth",text:_c("本月")},{type:"timePeriod",func:"nextMonth",text:_c("下月")},{type:"timePeriod",func:"isEmpty",text:_c("为空")},{type:"timePeriod",func:"isNotEmpty",text:_c("非空")},{type:"select",func:"is",text:_c("是")},{type:"select",func:"isNot",text:_c("不是")},{type:"select",func:"isEmptySelect",text:_c("为空")},{type:"select",func:"isNotEmptySelect",text:_c("非空")},{type:"multiSelect",func:"isExactly",text:_c("是")},{type:"multiSelect",func:"isNot",text:_c("不是")},{type:"multiSelect",func:"hasAnyOf",text:_c("包含一个")},{type:"multiSelect",func:"hasAllOf",text:_c("包含所有")},{type:"multiSelect",func:"hasNoneOf",text:_c("不包含")},{type:"multiSelect",func:"isEmptySelect",text:_c("为空")},{type:"multiSelect",func:"isNotEmptySelect",text:_c("非空")},{type:"checkbox",func:"equalTo",text:_c("等于")},{type:"file",func:"isEmpty",text:_c("为空")},{type:"file",func:"isNotEmpty",text:_c("非空")}],kf=(s()(bf={},Ac.INPUT,"text"),s()(bf,Ac.TEXTAREA,"text"),s()(bf,Ac.LINK,"text"),s()(bf,Ac.EMAIL,"text"),s()(bf,Ac.PHONE,"text"),s()(bf,Ac.DATE,"timePeriod"),s()(bf,Ac.CREATED_AT,"timePeriod"),s()(bf,Ac.UPDATED_AT,"timePeriod"),s()(bf,Ac.NUMBER,"number"),s()(bf,Ac.SELECT,"select"),s()(bf,Ac.MULTI_SELECT,"multiSelect"),s()(bf,Ac.MENTION,"multiSelect"),s()(bf,Ac.USER_ID,"multiSelect"),s()(bf,Ac.MODIFIER_ID,"multiSelect"),s()(bf,Ac.CHECKBOX,"checkbox"),s()(bf,Ac.IMAGE,"file"),s()(bf,Ac.FILE,"file"),bf),xf=["isEmpty","isNotEmpty","yesterday","today","tomorrow","last7days","lastWeek","thisWeek","nextWeek","lastMonth","thisMonth","nextMonth","duplicate","unique","isEmptySelect","isNotEmptySelect"];function Ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Of(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cf(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _f={equalTo:function(e,t){return null===t||e===t},notEqualTo:function(e,t){return null===t||e!==t},greaterThan:function(e,t){return null===t||e>t},greaterThanOrEqualTo:function(e,t){return null===t||e>=t},lessThan:function(e,t){return null===t||e<t},lessThanOrEqualTo:function(e,t){return null===t||e<=t},startsWith:function(e,t){return null===t||"string"==typeof e&&e.startsWith(t)},notStartsWith:function(e,t){return null===t||"string"==typeof e&&!e.startsWith(t)},endsWith:function(e,t){return null===t||"string"==typeof e&&e.endsWith(t)},notEndsWith:function(e,t){return null===t||"string"==typeof e&&!e.endsWith(t)},contains:function(e,t){return null===t||-1!==e.indexOf(t)},notContains:function(e,t){return null===t||-1===e.indexOf(t)},yesterday:function(e){if(!e)return!1;var t=_e()().add(-1,"days").startOf("day");return 0===e.startOf("day").diff(t,"days")},today:function(e){if(!e)return!1;var t=_e()().startOf("day");return 0===e.startOf("day").diff(t,"days")},tomorrow:function(e){if(!e)return!1;var t=_e()().add(1,"days").startOf("day");return 0===e.startOf("day").diff(t,"days")},last7days:function(e){if(!e)return!1;var t=_e()().add(-7,"days"),n=e.diff(t,"days",!0);return n>=0&&n<7},lastWeek:function(e){if(!e)return!1;var t=_e()().startOf("week").add(-7,"days").valueOf(),n=e.diff(t,"days",!0);return n>=0&&n<7},thisWeek:function(e){if(!e)return!1;var t=_e()().endOf("week");t.valueOf();var n=t.add(-7,"days").valueOf(),r=e.diff(n,"days",!0);return r>=0&&r<7},nextWeek:function(e){if(!e)return!1;var t=_e()().endOf("week").valueOf(),n=e.diff(t,"days",!0);return n>=0&&n<7},lastMonth:function(e){if(!e)return!1;var t=_e()().startOf("month"),n=t.valueOf(),r=t.add(-1,"months").valueOf();return e.valueOf()>=r&&e.valueOf()<n},thisMonth:function(e){if(!e)return!1;var t=_e()().endOf("month").valueOf(),n=_e()().startOf("month");return e.valueOf()>=n&&e.valueOf()<=t},nextMonth:function(e){if(!e)return!1;var t=_e()().endOf("month"),n=t.valueOf(),r=t.add(1,"months").valueOf();return e.valueOf()>n&&e.valueOf()<=r},is:function(e,t){return null===t||e[0]===t},isNot:function(e,t){if(null===t)return!0;if(!Array.isArray(t))return!e||e[0]!==t;if(!e||e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(!t.includes(e[n]))return!0;return!1},isEmpty:function(e){return!e},isNotEmpty:function(e){return!!e},isEmptySelect:function(e){return!e||0===e.length},isNotEmptySelect:function(e){return e&&e.length>0},hasAnyOf:function(e,t){if(null===t)return!0;t=Array.isArray(t)?t:[t];for(var n=0;n<t.length;n++)if(e.includes(t[n]))return!0;return!1},hasAllOf:function(e,t){if(null===t)return!0;t=Array.isArray(t)?t:[t];for(var n=0;n<t.length;n++)if(!e.includes(t[n]))return!1;return!0},isExactly:function(e,t){return null===t||Ee()(e,t)},hasNoneOf:function(e,t){if(null===t)return!0;t=Array.isArray(t)?t:[t];for(var n=0;n<t.length;n++)if(e.includes(t[n]))return!1;return!0}};function Sf(e,t,n){var r=t.type,o=t.expected,a=t.func;return"text"===r||"file"===r?_f[a](e+"",o):"number"===r?!isNaN(e)&&_f[a](parseFloat(e),parseFloat(o)):"timePeriod"===r?""===e||void 0===e?_f[a](""):e.text?_f[a](_e()(e.text)):!!e.time&&_f[a](_e()(e.time)):("select"===r||"multiSelect"===r||"checkbox"===r)&&_f[a](e,o)}function Rf(e,t,n,r){var o,a=kf[r.type];if(1===t.length)return Sf(e,Of({type:a},t[0]));for(var i=0;i<t.length;i++){var l=Sf(e,Of({type:a},t[i]));if("and"===n){if(!1===(o=(0===i||o)&&l))break}else if(!0===(o=o||l))break}return o}var jf=function(){function e(t){d()(this,e),s()(this,"filterRowsBeforeSearch",null),this.kernel=t,this.tableModel=t.tableModel,this.recordsModel=t.tableModel.recordsModel}return p()(e,[{key:"isFiltering",value:function(e){var t=e.get("filter");return t&&t.options&&t.options.length>0}},{key:"getFilterColumns",value:function(){return this.tableModel.getTableFields().filter((function(e){return Ic.includes(e.type)}))}},{key:"setFilter",value:function(e,t){var n=this.tableModel.getView(t);n&&(e.options||(e.options=[]),e.options=e.options.filter((function(e){return!!xf.includes(e.func)||void 0!==e.expected&&""!==e.expected})),1===e.options.length&&delete e.operator,n.set("filter",e),this.refreshFilter(t))}},{key:"getFilter",value:function(e){return e.get("filter")}},{key:"getFilterColumnValue",value:function(e){var t,n=null===(t=this.getFilter(e))||void 0===t?void 0:t.options;if(n){var r={};return n.forEach((function(e){r[e.id]={value:e.expected}})),r}}},{key:"addOption",value:function(e){e.options=e.options||[];var t=this.getFilterColumns()[0],n=kf[t.type],r=wf.filter((function(e){return e.type===n}));return e.options.push({id:t.id,func:r[0].func,expected:null}),e.operator=e.operator||"and",e}},{key:"removeOption",value:function(e,t){return e.options.splice(t,1),e}},{key:"updateOption",value:function(e,t,n,r){if(e.options[t]&&(e.options[t][n]=r,"id"===n)){var o=this.getColumnById(r),a=kf[o.type],i=wf.find((function(e){return e.type===a}));e.options[t].func=i.func,e.options[t].expected=a===Ac.CHECKBOX||""}return e}},{key:"getColumnById",value:function(e){return this.tableModel.getFieldsMap()[e]}},{key:"updateOperator",value:function(e,t){return e.operator=t,e}},{key:"resetFilter",value:function(e){var t=this.tableModel.getView(e);if(t.get("filterConfigs")){var n=this.recordsModel.records;t.set("filterConfigs",null);var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ef(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ef(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;this._unFilterRowOnly(a),delete a.actualRow}}catch(e){o.e(e)}finally{o.f()}this.kernel.emit("viewChanged",e)}}},{key:"convertFilter",value:function(e){var t=this,n=this.tableModel.getView(e);if(n){n.data;var r=n.get("filter");if(r){var o=[],a={};if(!r.options||0===r.options.length){if(n.get("filterConfigs")){var i=wc(n.get("rows"));n.set("filterConfigs",null),i.forEach((function(e,n){t._unFilterRowOnly(e),delete e.actualRow})),n.set("rows",i)}return null}return r.options.forEach((function(e,t){var n=a[e.id];if(void 0!==n)o[n].conditions.push({func:e.func,expected:e.expected});else{var r=o.push({id:e.id,conditions:[Of({},e)]});a[e.id]=r-1}})),n.set("filterConfigs",!0),{options:o,operator:r.operator}}}}},{key:"refreshFilter",value:function(e){var t=this,n=this.tableModel.getView(e),r=this.convertFilter(e);if(r){n.data.rowCount;var o=wc(n.get("rows"));this.getFilterColumns();var a=this.tableModel.getFieldsMap(),i=r.options,l=r.operator;if(!i||0===i.length)return o.forEach((function(e,n){t._unFilterRowOnly(e),delete o[n].actualRow})),n.set("rows",o),n.set("filterConfigs",null),void this.kernel.getViewService(n).refreshRows(n);for(var c=null,s=function(){if(o&&0===o.length)return"break";var e=i[u],n=a[e.id];if(!n)return{v:void 0};var r=[];o.forEach((function(o,a){Rf(t.recordsModel.getCellFilterValue(o.id,n.id,n),e.conditions,l,n)&&r.push(o.id)})),c=c?"and"===l?Be()(c,r):He()(c,r):r},u=0;u<i.length;u++){var d=s();if("break"===d)break;if("object"===z()(d))return d.v}this.setTargetRows(c,n)}}},{key:"_unFilterRowOnly",value:function(e){return delete e.filtered,e}},{key:"_filterRowOnly",value:function(e){return e.filtered=!0,e}},{key:"isCellFiltered",value:function(e,t){var n=this.tableModel.getActiveView(),r=this.convertFilter(n.get("id"));if(!r)return!1;for(var o=r.options,a=r.operator,i=this.recordsModel.getCellFilterValue(e,t.id,t),l=0;l<o.length;l++)if(!Rf(i,o[l].conditions,a,t))return!0;return!1}},{key:"setTargetRows",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;n||(n=this.tableModel.getActiveView());var r=wc(n.get("rows"))||[],o=0;r.forEach((function(n,r){t.includes(n.id)?(e._unFilterRowOnly(n),n.actualRow=o,o++):(e._filterRowOnly(n),delete n.actualRow)})),n.set("rows",r);var a=this.kernel.getViewService(n);a.refreshRows(n)}}]),e}(),Af=function(){function e(t,n){d()(this,e),s()(this,"isSearchByFilter",!1),s()(this,"searching",!1),this.kernel=t,this.tableModel=t.tableModel,this.recordsModel=t.tableModel.recordsModel,this.filterService=n,this.isSearchByFilter=this.kernel.searchFilter}return p()(e,[{key:"search",value:function(e,t,n,r){var o,a=this,i=this.tableModel.getView(t),l=this.tableModel.getTableFields(),c=i.data,s=[],u=[],d={};if(console.time("search"),l.forEach((function(e,t){d[e.id]=t})),""===e)return this.clearSearch(),void this.kernel.emit(gc.SEARCHED,null);e=e.toUpperCase();for(var f=0;f<c.rowCount;f++){var p=c.rows[f].id;c.rows[f].filtered||s.push(p)}for(var h=0;h<c.colCount;h++)c.columns[h].hidden&&r!==$d||u.push(l[d[c.columns[h].id]]);if(this.searchQuery=e,this.searchCache&&Object.keys(this.searchCache).forEach((function(t){e===t&&(o=t)})),o){var m=[];this.searchCache[o].forEach((function(t){var n=a.recordsModel.getCellSearchValue(t.row,t.col.id,t.col);if(Array.isArray(n)){for(var r=0;r<n.length;r++)if(-1!==n[r].toUpperCase().indexOf(e)){m.push({row:t.row,col:t.col});break}}else-1!==n.toUpperCase().indexOf(e)&&m.push({row:t.row,col:t.col})})),this.searchCache[e]=m,this.currentSearchResult=this.searchCache[e]}else{this.searchCache=this.searchCache||{};for(var v=[],g=0;g<s.length;g++)for(var b=!1,y=0;y<u.length;y++){var w=this.recordsModel.getCellSearchValue(s[g],u[y].id,u[y]);if(Array.isArray(w)){for(var k=0;k<w.length;k++)if(-1!==w[k].toUpperCase().indexOf(e)){b=!0,v.push({row:s[g],col:u[y]});break}}else-1!==w.toUpperCase().indexOf(e)&&(b=!0,v.push({row:s[g],col:u[y]}));if(b&&r===$d)break}this.searchCache[e]=v,this.currentSearchResult=v}this.currentSearchResult.length>0&&(this.currentSearchIndex=0);var x={count:this.currentSearchResult.length,current:this.currentSearchIndex||0,cell:this.currentSearchResult[0],selectCell:n};return this.kernel.emit(gc.SEARCHED,x),this.searching=!0,console.timeEnd("search"),x}},{key:"checkSearch",value:function(){delete this.searchCache,this.searchQuery&&this.search(this.searchQuery,this.tableModel.getActiveView().get("id"),!0)}},{key:"searchNext",value:function(){if(this.currentSearchResult&&0!==this.currentSearchResult.length){this.currentSearchIndex=this.currentSearchIndex||0,this.currentSearchIndex++,this.currentSearchIndex>=this.currentSearchResult.length&&(this.currentSearchIndex=0),this.searching=!0;var e={count:this.currentSearchResult.length,current:this.currentSearchIndex,cell:this.currentSearchResult[this.currentSearchIndex],selectCell:!0};return this.kernel.emit(gc.SEARCHED,e),e}}},{key:"searchPrev",value:function(){if(this.currentSearchResult&&0!==this.currentSearchResult.length){this.currentSearchIndex=this.currentSearchIndex||0,this.currentSearchIndex--,this.currentSearchIndex<0&&(this.currentSearchIndex=this.currentSearchResult.length-1),this.searching=!0;var e={count:this.currentSearchResult.length,current:this.currentSearchIndex,cell:this.currentSearchResult[this.currentSearchIndex],selectCell:!0};return this.kernel.emit(gc.SEARCHED,e),e}}},{key:"clearSearch",value:function(){this.currentSearchResult=[],delete this.searchQuery,delete this.searching,this.kernel.emit(gc.SEARCHED,{count:0,current:0,cell:null})}},{key:"isCellInSearch",value:function(e,t){if(this.currentSearchResult&&0!==this.currentSearchResult.length)return-1!==Ie()(this.currentSearchResult,(function(n){return n.row===e&&n.col.id===t}))}},{key:"isRecordInSearch",value:function(e){return!(!this.currentSearchResult||0===this.currentSearchResult.length)&&-1!==Ie()(this.currentSearchResult,(function(t){return t.row===e}))}}]),e}(),Tf=function(){function e(t){d()(this,e),this.kernel=t,this.tableModel=t.tableModel,this.recordsModel=t.tableModel.recordsModel}return p()(e,[{key:"copy",value:function(e,t){var n=this.getDataBySelections(e,t);this.clipboardData=n,this.clipId=fs(6),this.copySelections=wc(t),this.copyViewId=e;var r=n.table.length*n.columns.length;return this.kernel.emit("copy",r,this.copyViewId),n}},{key:"clearCopy",value:function(){this.clipboardData=null,this.clipId=null,this.copySelections=null,this.copyViewId=null}},{key:"paste",value:function(e,t,n,r,o){var a=this;if(e&&t){var i=e.table,l=e.columns,c=i.length,s=i[0].length,u=t.row,d=t.col,f=t.rowCount,p=t.colCount,h=this.tableModel.getView(o),m=this.tableModel.getFieldsMap(),v=h.get("columns");n.ids.length>0&&(n.ids.forEach((function(e){a.recordsModel.addRecord(e,wc(r))})),this.kernel.gridService.insertRows(h,n.startRow,n.ids.length,n.ids));for(var g=u,b=u;g<u+f;)if(h.data.rows[g].filtered)g++;else{for(var y=(b-u)%c,w=d;w<d+p;){var k=(w-d)%s;this.fillCellData(g,w,i[y][k],e,l?l[k]:{},m[v[w].id],h),w++}g++,b++}}}},{key:"fillCellData",value:function(e,t,n,r,o,a,i){var l=i.data,c=l.rows,s=l.columns;if(n){var u=n;if(o.type){if([Ac.SELECT,Ac.MULTI_SELECT].includes(o.type)&&n.value){var d=[];o.options.forEach((function(e){n.value.includes(e.id)&&d.push(e.value)})),u={value:d}}u={value:Ud(a.type).getValue(u,a)}}else u={value:Ud(a.type).convertSheetValue(n,a)};this.recordsModel.setCell(c[e].id,s[t].id,u)}else this.recordsModel.setCell(c[e].id,s[t].id,{})}},{key:"getDataBySelections",value:function(e,t){for(var n=this.tableModel.getView(e),r=this.recordsModel,o=n.get("rows"),a=n.get("columns"),i={table:[]},l=t.row,c=t.rowCount,s=t.col,u=t.colCount,d=this.tableModel.getFieldsMap(),f=[],p=0,h=0,m=function(){if(o[l+p].filtered)return p++,"continue";var e=o[l+p].id;i.table[h]=[];for(var t=0,n=0;t<u;){var c=a[s+t],m=d[c.id];if(c.hidden)t++;else{0===h&&f.push(m);var v=r.getCellValue(e,m.id,m);v&&(Vc.includes(m.type)?(ed(Array.isArray(v)),v.forEach((function(e,t){var r;Array.isArray(null===(r=i.table[h][n])||void 0===r?void 0:r.value)||(i.table[h][n]={value:[]}),["success"].includes(e.status)&&i.table[h][n].value.push(wc(e))}))):i.table[h][n]={value:wc(v),formatValue:r.getCellFormattedValue(e,m.id,m)}),t++,n++}}i.table[h].length=n,p++,h++};p<c;)m();return i.rowHeight=n.get("rowHeight").value,i.startCell={row:l,col:s},i.columns=wc(f),i.type="table",i}}]),e}(),Lf={name:"",desc:"",type:"FORM",fields:[],viewId:"",tableId:""},Df=function(){function e(t){d()(this,e),this.kernel=t,this.tableModel=t.tableModel,this.webProxy=t.options.webProxy}var t,n;return p()(e,[{key:"active",value:function(e){var t=e.get("fields"),n=this.tableModel.getTableFields().map((function(e){return e.id}));e.set("fields",t.filter((function(e){return n.includes(e.columnId)}))),e.active()}},{key:"createForm",value:function(e){var t=this,n=wc(Lf),r=this.tableModel.getTableFields(),o=this.tableModel.getActiveView();n.id=e,n.name=_c("未命名表单"),n.viewId=o.get("id"),n.tableId=this.tableModel.id,n.createdAt=new Date,r.forEach((function(e){if(t.isSupportType(e.type)){var r={columnId:e.id,columnName:e.name,title:e.name,type:e.type,validations:[{required:!0}]};"select"!==e.type&&"multiSelect"!==e.type||(r.options=wc(e.options)),n.fields.push(r)}})),this.tableModel.addView(n),this.kernel.emit(gc.CREATE_FORM,e)}},{key:"removeForm",value:function(e){this.tableModel.removeView(e),this.kernel.emit(gc.REMOVE_FORM,e)}},{key:"updateForm",value:function(e,t){var n=this.tableModel.getView(e);n&&n.bulkSet(t)}},{key:"updateFieldByColConfigs",value:function(e){var t=this.tableModel.getViewByType(Gs.FORM);if(t){var n=t.get("fields");n&&(n=n.map((function(t){return t.columnId===e.id&&(t.type=e.type,t.options=e.options),t})),t.set("fields",n))}}},{key:"isSupportType",value:function(e){return"createdAt"!==e}},{key:"validate",value:function(e){var t=e.fields,n=t.length;if(0===n)return!1;for(var r=!0,o=0;o<n;o++){var a=t[o];if(""===a.title||["select","multiSelect"].includes(a.type)&&(!a.options||0===a.options.length)){r=!1;break}}return r}},{key:"enableForm",value:(n=E()(O.a.mark((function e(t){var n,r,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.webProxy){e.next=2;break}return e.abrupt("return");case 2:if(n=this.tableModel.getView(t),r={target_id:this.kernel.options.docId,target_type:this.kernel.options.docType,type:"form",status:0,scope:0},!n.get("url")){e.next=9;break}return e.next=7,this.webProxy.shares.update(r);case 7:e.next=13;break;case 9:return e.next=11,this.webProxy.shares.create(r);case 11:o=e.sent,n.set("url","/forms/share/".concat(o.token));case 13:n.set("status",1),this.kernel.emit(gc.ENABLE_FORM,n.get("id"));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"disableForm",value:(t=E()(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.tableModel.getView(t),e.next=3,this.webProxy.shares.update({target_id:this.kernel.options.docId,target_type:this.kernel.options.docType,type:"form",status:1});case 3:n.set("status",0),this.kernel.emit(gc.DISABLE_FORM,n.get("id"));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function Pf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mf(e,t,n){var r=function(e,t){var n={},r=[];return e.forEach((function(e){e.value[t]?n[e.value[t]]?n[e.value[t]].push(e):n[e.value[t]]=[e]:r.push(e)})),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pf(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({undefinedVal:r},n)}(e,t);if(1===Object.keys(r).length)return e;var o=r.undefinedVal;return n.forEach((function(e){r[e]&&(o=o.concat(Mf(r[e],t+1,n)))})),o}var Nf=function(){function e(t){d()(this,e),this.kernel=t,this.tableModel=t.tableModel,this.recordsModel=t.tableModel.recordsModel}return p()(e,[{key:"getSortColumns",value:function(){return this.tableModel.getTableFields().filter((function(e){return Fc.includes(e.type)}))}},{key:"setSort",value:function(e,t){var n=this.tableModel.getView(t);n.set("sort",e),this.isSorting(n)?this.refreshSort(t,!0):this.removeSort(t)}},{key:"isSorting",value:function(e){var t=e.get("sort");return t&&t.options&&t.options.length>0}},{key:"isAuto",value:function(e){e||(e=this.tableModel.getActiveView());var t=e.get("sort");return!!this.isSorting(e)&&(null==t?void 0:t.auto)}},{key:"setAuto",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.auto=t,e}},{key:"addOption",value:function(e,t){return e.options=[{id:t,type:"asc"}],e}},{key:"updateOption",value:function(e,t,n,r){return e.options[t][n]=r,e}},{key:"removeOption",value:function(e,t){return e.options.splice(t,1),e}},{key:"removeSort",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.tableModel.getView(e);if(n&&(null!=t&&t.force||n.get("id")===this.tableModel.getActiveView().get("id"))){var r=n.data.rows;if(r.length){var o=this.recordsModel.getRowIds(),a={},i=[];r.forEach((function(e,t){a[e.id]=t})),o.forEach((function(e){i.push(r[a[e]])})),n.set("rows",i),this.kernel.groupService.isGrouping(n)&&this.removeGroupSort(e)}}}},{key:"removeGroupSort",value:function(e){var t=this.tableModel.getView(e);t&&t.get("id")===this.tableModel.getActiveView().get("id")&&(t.get("sort")&&t.set("sort",null),this.kernel.getViewService(t).refreshRows(t))}},{key:"getSortedData",value:function(e,t,n){return e=this.ascSortCreatedAt(e),[Ac.SELECT,Ac.MULTI_SELECT].includes(t.type)?"asc"===n?this.ascSortSelect(e,t):this.descSortSelect(e,t):[Ac.DATE,Ac.NUMBER,Ac.CHECKBOX].includes(t.type)?"asc"===n?this.ascSortNumber(e):this.descSortNumber(e):"asc"===n?this.ascSortText(e):this.descSortText(e)}},{key:"refreshSort",value:function(e,t){var n=this.tableModel.getView(e),r=n.get("rows"),o=n.get("sort");if(this.isAuto(n)||t){var a=null==o?void 0:o.options[0],i=this.tableModel.getFieldsMap()[null==a?void 0:a.id];if(i)if(this.kernel.groupService.isGrouping(n))this.refreshGroupSort(n);else{var l=this.sortRows(r,a,i);n.setRows(l)}}}},{key:"refreshGroupSort",value:function(e){var t=this,n=e.data,r=n.groupData,o=n.rows,a=n.sort,i=e.rowMap;if(this.isSorting(e)&&i){var l=a.options[0],c=this.tableModel.getFieldsMap()[l.id],s=[];r.forEach((function(e){var n=e.rows.map((function(e){var n=o[i[e]];if(!n)return null;var r=t.kernel.tableModel.recordsModel.getRecord(e);return n.createdAt=r.createdAt,n})),r=t.sortRows(n,l,c);e.rows=r.map((function(e){return e.id})),s=s.concat(r)})),e.setRows(s)}}},{key:"sortRows",value:function(e,t,n){var r=this,o=[],a=[],i=[];e.forEach((function(e,t){if(null!=e)if(e.filter)i.push({index:t,value:e,createdAt:e.createdAt});else{var l=r.recordsModel.getCellSortValue(e.id,n.id,n);void 0===l||""===l?a.push({index:t}):o.push({index:t,value:l,createdAt:e.createdAt})}})),o=this.getSortedData(o,n,t.type);var l=[];return(o=o.concat(a)).forEach((function(t){l.push(e[t.index])})),l.concat(i.map((function(e){return e.value})))}},{key:"ascSortCreatedAt",value:function(e){return e.sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)}))}},{key:"ascSortText",value:function(e){return e.sort((function(e,t){return e.value.localeCompare(t.value)}))}},{key:"descSortText",value:function(e){return e.sort((function(e,t){return t.value.localeCompare(e.value)}))}},{key:"ascSortNumber",value:function(e){return e.sort((function(e,t){return e.value-t.value}))}},{key:"descSortNumber",value:function(e){return e.sort((function(e,t){return t.value-e.value}))}},{key:"ascSortSelect",value:function(e,t){return Mf(e,0,t.options.map((function(e){return e.id})))}},{key:"descSortSelect",value:function(e,t){return Mf(e,0,t.options.map((function(e){return e.id})).reverse())}}]),e}();function If(e,t,n){var r;e=""===e||null===e?0:e,t=""===t||null===t?0:t;try{r=(e=new Ge.a(e))[n](t).valueOf()}catch(e){r=NaN}return r}var Ff=function(e,t){return isNaN(e)?NaN:""===t||0===parseFloat(t)?1/0:If(e,t,"div")};function Bf(e,t){if(0===t)return"";var n=function(e,t){return If(e,t,"times")}(Ff(e,t),100);return-1===n.indexOf(".")?n+"%":parseFloat(n).toFixed(2)+"%"}var Vf={count:function(e){return e.length},sum:function(e){return e.reduce((function(e,t){return function(e,t){return If(e,t,"plus")}(e,t)}),0)},average:function(e){var t=this.sum(e),n=Ff(t,e.length);return isNaN(n)?0:parseFloat(n).toFixed(2)},max:function(e){return 0===(e=e.filter((function(e){return""!==e}))).length?"":Math.max.apply(Math,me()(e))},min:function(e){return 0===(e=e.filter((function(e){return""!==e}))).length?"":Math.min.apply(Math,me()(e))},filled:function(e){return e.filter((function(e){return""!==e})).length},empty:function(e){return e.filter((function(e){return""===e})).length},unique:function(e){var t={};return e.forEach((function(e){""!==e&&(t[e]=!0)})),Object.keys(t).length},percentEmpty:function(e){return Bf(this.empty(e),e.length)},percentFilled:function(e){return Bf(this.filled(e),e.length)},percentUnique:function(e){return Bf(this.unique(e),e.length)},earliestDate:function(e){for(var t=e[0],n=1;n<e.length;n++)""!==e[n]&&(e[n]<t||""===t)&&(t=e[n]);return t},latestDate:function(e){for(var t=e[0],n=1;n<e.length;n++)""!==e[n]&&e[n]>t&&(t=e[n]);return t},dateRange:function(e){for(var t=e[0],n=e[0],r=1;r<e.length;r++)""!==e[r]&&e[r]>n?n=e[r]:""!==e[r]&&(e[r]<t||""===t)&&(t=e[r]);return n===t||""===t?0:_e()(n).diff(_e()(t),"days")},monthRange:function(e){for(var t=e[0],n=e[0],r=1;r<e.length;r++)""!==e[r]&&e[r]>n?n=e[r]:""!==e[r]&&(e[r]<t||""===t)&&(t=e[r]);return n===t||""===t?0:_e()(n).diff(_e()(t),"months")},checked:function(e){return e.reduce((function(e,t){return"true"===t?e+1:e}),0)},unchecked:function(e){return e.reduce((function(e,t){return"true"!==t?e+1:e}),0)},percentChecked:function(e){return Bf(this.checked(e),e.length)},percentUnchecked:function(e){return Bf(this.unchecked(e),e.length)}},Hf=function(){function e(t){d()(this,e),this.kernel=t,this.tableModel=t.tableModel,this.recordsModel=t.tableModel.recordsModel,this.statsMethods=Vf,this.stats={}}return p()(e,[{key:"isEnable",value:function(e){return e.type===Gs.GRID}},{key:"setStat",value:function(e,t,n){var r=this.tableModel.getView(n),o=r.get("stats")||{};"none"===t?(delete o[e],delete this.stats[e]):o[e]=t,r.set("stats",o)}},{key:"refreshStatsByCols",value:function(e,t){var n=this,r=this.tableModel.getView(t);if(this.isEnable(r)){var o=r.get("stats"),a=this;e.forEach((function(e){o[e]?a.refreshStatsByCol(e,o[e],r):delete n.stats[e]})),this.kernel.emit(gc.STATS_UPDATED,this.stats)}}},{key:"refreshAllStats",value:function(e){var t=this,n=this.tableModel.getView(e);if(this.isEnable(n)){var r=n.get("stats");r&&(Object.keys(r).forEach((function(e){t.refreshStatsByCol(e,r[e],n)})),this.kernel.emit(gc.STATS_UPDATED,this.stats))}}},{key:"refreshStatsByCol",value:function(e,t,n){var r=this;if(this.isEnable(n)){var o=[],a=this.tableModel.getFieldsMap()[e];a&&(n.data.rows.forEach((function(e){e.filtered||o.push(r.recordsModel.getCellFormattedValue(e.id,a.id,a))})),this.stats[e]={type:t,value:Vf[t](o)},this.kernel.groupStatsService.refreshGroupStatsByCol(e,n.get("id")))}}},{key:"getStatsBySelections",value:function(e){if(qe()(e))return this.stats;for(var t=this.tableModel.getActiveView().data,n=t.rows,r=t.columns,o=t.stats,a=e.row,i=e.rowCount,l=e.col,c=e.colCount,s=this.tableModel.getFieldsMap(),u={},d=l;d<l+c;d++){var f=r[d].id;if(o[f]){for(var p=s[f],h=[],m=a;m<a+i;m++){if(n[m].filtered||n[m].hidden)return;h.push(this.recordsModel.getCellFormattedValue(n[m].id,p.id,p))}u[f]={type:o[f],value:Vf[o[f]](h)}}}return u}},{key:"dispose",value:function(){this.stats={}}}]),e}(),zf=function(){function e(t){d()(this,e),s()(this,"tableModel",null),s()(this,"recordsModel",null),s()(this,"grouping",!1),this.kernel=t,this.tableModel=t.tableModel,this.recordsModel=t.tableModel.recordsModel,this.valueMap=[],this.groupMap=[],this.group=[]}return p()(e,[{key:"isEnable",value:function(e){return[Gs.GRID,Gs.KANBAN].includes(e.type)}},{key:"isGrouping",value:function(e){var t=e.get("group");return t&&t.length>0}},{key:"setGroup",value:function(e,t){var n=this,r=this.tableModel.getView(t);r.set("group",e),this.grouping=e.length>0;var o={},a=[];if(this.grouping){this.refreshAllGroups(t),a=wc(this.group);var i=e[0].id,l=this.tableModel.getFieldsMap()[i];a.forEach((function(e,t){e.rows=e.rows.map((function(e){return e.id})),e.titleValue=n.recordsModel.getCellValue(e.rows[0],i,l)})),l.type===Ac.SELECT&&l.options.forEach((function(e,t){a[t]&&a[t].value===e.value||a.splice(t,0,{value:e.value,titleValue:[e.id],rows:[]})})),a.forEach((function(e,t){o[e.value]=t})),void 0===o[""]&&(a.push({value:"",titleValue:"",rows:[]}),o[""]=a.length-1)}r.set("group",e),r.set("groupData",a),r.set("groupValueMap",o)}},{key:"getGroup",value:function(e){var t,n=(t=e?this.tableModel.getView(e):this.tableModel.getActiveView()).get("columns"),r=t.get("group");if(!r||0===r.length)return null;if(t.type!==Gs.KANBAN)return r;var o=this.kernel.tableModel.getFieldsMap(),a=o[r[0].id];if(zc.includes(null==a?void 0:a.type))return r;var i=n.filter((function(e){var t;return zc.includes(null===(t=o[e.id])||void 0===t?void 0:t.type)})).map((function(e){return o[e.id]}));return 0!==i.length?(this.setGroup(i,t.get("id")),[{id:i[0].id}]):(t.set("group",[]),[])}},{key:"removeGroup",value:function(e){this.tableModel.getView(e).set("group",[]),this.refreshAllGroups(e)}},{key:"resetGroup",value:function(e){var t=this.tableModel.getView(e),n=t.get("rows"),r=this.recordsModel.getRowIds(),o={},a=[];n.forEach((function(e,t){delete e.hidden,o[e.id]=t})),r.forEach((function(e){a.push(n[o[e]])})),t.set("rows",a),this.kernel.filterService.refreshFilter(e),this.kernel.sortService.refreshSort(e),this.group=[]}},{key:"dispose",value:function(){this.grouping=!1,this.valueMap=[],this.group=[],this.groupMap={}}},{key:"refreshAllGroups",value:function(e,t){var n=this,r=this.tableModel.getView(e),o=r.data,a=o.rows,i=o.group,l=o.groupStates,c=void 0===l?{}:l;if(!i||0===i.length)return this.grouping=!1,void(this.group.length>0&&this.resetGroup(e));this.group=[],this.grouping=!0;var s=i[0],u=this.tableModel.getFieldsMap()[s.id],d={},f=[],p={},h=[],m=[];a.forEach((function(e){if(e.filtered)m.push(e);else{delete e.hidden;var t=n.recordsModel.getCellGroupValue(e.id,u.id,u);""!==t.formatValue?""!==t.sortValue?d[t.formatValue]?d[t.formatValue].rows.push(e):d[t.formatValue]={value:t.sortValue,rows:[e]}:p[t.formatValue]?p[t.formatValue].rows.push(e):(h.push(t.formatValue),p[t.formatValue]={value:t.sortValue,rows:[e]}):f.push(e)}}));var v=Object.keys(d).map((function(e){return{value:d[e].value}})),g=this.kernel.sortService.getSortedData(v,u,s.type||"asc").map((function(e){return e.value}));function b(t,n){var r=this.group.push({value:t,rows:n,groupBy:u.id})-1;c&&c[t]&&c[t].collapsed&&(this.group[r].collapsed=!0,this.group[r].rows.forEach((function(e){e.hidden=!0}))),this.kernel.groupStatsService.refreshGroupStats(this.group[r],e)}this.group=[],Object.keys(d).forEach((function(t){var r=d[t],o=g.indexOf(r.value);n.group[o]={value:t,rows:r.rows,groupBy:u.id},c&&c[t]&&c[t].collapsed&&(n.group[o].collapsed=!0,r.rows.forEach((function(e){e.hidden=!0}))),n.kernel.groupStatsService.refreshGroupStats(n.group[o],e)})),qe()(p)||h.forEach((function(e){b.call(n,e,p[e].rows)})),f.length>0&&b.call(this,"",f),this.refreshGroupMap();var y=[];this.group.forEach((function(e){y=y.concat(e.rows)})),y=y.concat(m),r.setRows(y)}},{key:"refreshGroupMap",value:function(){var e=this;this.groupMap=[0];var t=0;this.group.forEach((function(n){t+=n.rows.length,e.groupMap.push(t)}))}},{key:"getGroupByRow",value:function(e){e<0&&(e=0);for(var t=0;t<this.groupMap.length;t++)if(e>=this.groupMap[t]&&e<this.groupMap[t+1])return this.group[t]}},{key:"getGroupRangeByRow",value:function(e){for(var t=this.groupMap,n=0;n<t.length;n++)if(e>=t[n]&&e<this.groupMap[n+1])return{min:t[n],max:t[n+1]-1}}},{key:"getGroupValueByRow",value:function(e,t){var n={},r=e.get("rows")[t].id,o=e.get("group"),a=this.recordsModel.getRecord(r);return o.forEach((function(e){n[e.id]=wc(a[e.id])})),n}},{key:"isGroupByCreatedAt",value:function(e){if(!this.grouping)return!1;if(e!==this.tableModel.getActiveView().get("id"))return!1;var t=this.tableModel.getView(e).get("group")[0].id;return"createdAt"===this.tableModel.getFieldsMap()[t].type}},{key:"refreshWhenAddRow",value:function(e,t){if(this.grouping&&!this.isGroupByCreatedAt(t)){var n=this.tableModel.getActiveView(),r=this.getGroupByRow(e-1);r&&(r.rows.push(n.get("rows")[e]),this.refreshGroupMap(),this.kernel.groupStatsService.refreshGroupStats(r,t))}}},{key:"refreshWhenPasteData",value:function(e,t,n){if(this.grouping&&!this.isGroupByCreatedAt(n)){for(var r=this.tableModel.getActiveView(),o=this.getGroupByRow(e),a=0;a<t;)o.rows.push(r.get("rows")[e+a]),a++;this.refreshGroupMap(),this.kernel.groupStatsService.refreshGroupStats()}}},{key:"refreshWhenRemoveRow",value:function(e,t){if(this.grouping&&!this.isGroupByCreatedAt(t)){var n=this.getGroupByRow(e);n.rows.pop(),this.refreshGroupMap(),this.kernel.groupStatsService.refreshGroupStats(n,t)}}},{key:"isCellInGroup",value:function(e,t,n){var r=this.getGroupByRow(e);return!!r&&this.recordsModel.getCellFormattedValue(t,n.id,n)===r.value}}]),e}(),qf=function(){function e(t){d()(this,e),s()(this,"statsService",null),this.kernel=t,this.tableModel=t.tableModel,this.recordsModel=t.tableModel.recordsModel,this.groupService=t.groupService,this.statsService=t.statsService}return p()(e,[{key:"setGroupStats",value:function(e,t,n){var r=this.tableModel.getActiveView().get("groupStates");r[e]=r[e]||{},n?r[e][t]=n:(delete r[e][t],qe()(r[e])&&delete r[e])}},{key:"refreshGroupStats",value:function(e,t){var n=this,r=this.tableModel.getView(t).get("stats");if(r){var o=this.tableModel.getFieldsMap(),a=this.kernel.statsService,i={};r?(Object.keys(r).forEach((function(t){var l=[];o[t]&&(e.rows.forEach((function(e){l.push(n.recordsModel.getCellFormattedValue(e.id,t,o[t]))})),i[t]={type:r[t],value:a.statsMethods[r[t]](l)})})),e.stats=i):e.stats={}}}},{key:"refreshGroupStatsByCol",value:function(e,t){var n=this;if(this.groupService.grouping){var r=this.groupService.group,o=this.tableModel.getView(t).get("stats");if(o)if(o[e]){var a=this.tableModel.getFieldsMap()[e];r.forEach((function(t){var r=[];t.rows.forEach((function(t){r.push(n.recordsModel.getCellFormattedValue(t.id,e,a))})),t.stats&&(t.stats[e]={type:o[e],value:n.statsService.statsMethods[o[e]](r)})}))}else r.forEach((function(t){delete t.stats[e]}))}}}]),e}(),Uf=function(){function e(t){d()(this,e),this.kernel=t,this.tableModel=t.tableModel,this.recordsModel=t.tableModel.recordsModel,this.groupService=t.groupService}return p()(e,[{key:"create",value:function(e,t){var n=t.data,r=n.groupData,o=null;void 0!==n.groupValueMap[""]&&(o=r.pop()),r.push(e),o&&r.push(o),t.refreshGroupMap()}},{key:"update",value:function(e,t,n,r){var o=this,a=r.data,i=a.groupData[a.groupValueMap[e]];if(i){if(n.type===Ac.SELECT){var l=n.options.findIndex((function(t){return e===t.value}));n.options.splice(l,1,t),i.value=t.value}else{i.value=t.map((function(e){return e.name})).join(","),i.titleValue=wc(t);var c=wc(t);i.rows.forEach((function(e){o.recordsModel.setCell(e,n.id,{value:c})}))}r.refreshGroupMap();var s=this.tableModel.getActiveView();s.type===r.type&&i.rows.forEach((function(e){o.kernel.groupRowService.refreshRowInGroup(e,n.id,s)}))}}},{key:"move",value:function(e,t,n){var r=n.get("groupData");if(e>t){var o=r.splice(e,1);r.splice.apply(r,[t,0].concat(me()(o)))}else{var a=r.splice(e,1);r.splice.apply(r,[t-1,0].concat(me()(a)))}n.refreshGroupMap()}},{key:"remove",value:function(e,t,n){var r=this,o=n.data,a=o.groupValueMap,i=o.groupData,l=o.group[0].id,c=this.tableModel.getFieldsMap()[l];if(c){c.type===Ac.SELECT&&(c.options=c.options.filter((function(t){return t.value!==e}))),t.forEach((function(e){r.recordsModel.clearCell(e,l)}));var s=i[a[""]];s?s.rows=s.rows.concat(t):this.create({titleValue:"",value:"",rows:t},n),i.splice(a[e],1),n.refreshGroupMap()}}},{key:"setGroupState",value:function(e,t,n,r){var o=this.tableModel.getActiveView();if(r===o.get("id")){if("collapsed"===t){var a=this.kernel.groupService.group.find((function(t){return t.value===e}));if(!a)return;a.collapsed=n,a.rows.forEach((function(e){n?e.hidden=!0:delete e.hidden})),o.get("groupData").find((function(t){return t.value===e})).collapsed=n}this.kernel.groupStatsService.setGroupStats(e,t,n)}}}]),e}(),Gf=function(){function e(t){var n=this;d()(this,e),s()(this,"batchRemove",(function(e,t,r){e.forEach((function(e){n.remove(e,t,r)}))})),s()(this,"refreshRowInGroup",(function(e,t,r){var o=r.data,a=o.groupValueMap,i=o.groupData,l=o.group;if(l&&l[0]&&t===l[0].id){var c=n.tableModel.getFieldsMap(),s=c[t],u=n.recordsModel.getCellGroupValue(e,t,c[t]),d=r.getGroupByRow(e);if(!d||!Ee()(u.formatValue,d.value)){if(d){var f=d.rows.indexOf(e);if(d.rows.splice(f,1),s.type!==Ac.SELECT&&0===d.rows.length){var p=i.findIndex((function(e){return e.value===d.value}));i.splice(p,1)}}if(void 0===a[u.formatValue])n.kernel.groupItemService.create({value:u.formatValue,rows:[e],titleValue:n.recordsModel.getCellValue(e,t,c[t])},r),r.set("groupData",i);else{var h,m=null===(h=i[a[u.formatValue]])||void 0===h?void 0:h.rows;if(!m)return;var v=r.get("rows"),g=v.findIndex((function(t){return t.id===e})),b=v[g+1],y=v[g-1];if(b){var w=m.indexOf(b.id);if(w>-1)return void m.splice(w,0,e)}if(y){var k=m.indexOf(y.id);if(k>-1)return void m.splice(k+1,0,e)}r.type===Gs.KANBAN?m.unshift(e):m.push(e)}}}})),this.kernel=t,this.tableModel=t.tableModel,this.recordsModel=t.tableModel.recordsModel}return p()(e,[{key:"insert",value:function(e,t,n,r,o){var a=o.data,i=a.groupData,l=a.groupValueMap,c=a.rows;i[l[r]].rows.splice(e,0,t),c.unshift({id:t}),o.setRows(c)}},{key:"remove",value:function(e,t,n){var r=t.data,o=r.groupData,a=r.groupValueMap,i=t.getGroupByRow(e);if(i&&i.rows){var l=i.rows.indexOf(e);i.rows.splice(l,1)}if(void 0!==n){var c=a[n];o[c].rows=o[c].rows.filter((function(t){return t!==e}))}else for(var s=0;s<o.length;s++){var u=o[s],d=u.rows.findIndex((function(t){return t===e}));if(d>-1){u.rows.splice(d,1);break}}}},{key:"move",value:function(e,t,n,r,o){var a=o.data,i=a.groupData,l=a.groupValueMap,c=l[o.getGroupByRow(e).value],s=i[c].rows.findIndex((function(t){return t===e}));i[c].rows.splice(s,1);var u=null!==n?o.getGroupByRow(n):o.getGroupByValue(r);this.recordsModel.setCell(e,t,{value:wc(u.titleValue)});var d=l[u.value];if(null!==n){var f=i[d].rows.findIndex((function(e){return e===n}));i[d].rows.splice(f,0,e)}else i[d].rows.push(e);o.set("groupData",i)}}]),e}();var Wf=function(e){g()(n,gf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"updateView",value:function(e){var t=e.get("rows"),n=e.get("columns"),r=this.tableModel.getFieldsMap();if(this.tableModel.dataLoaded){var o=this.recordsModel.getRowIds();e.setRows(Yf(t,o))}e.setColumns(Yf(n,Object.keys(r),!0));var a=e.get("cover");a.id&&!r[a.id]&&(a.id=null,a.show=!1)}},{key:"moveRow",value:function(e,t,n,r,o){var a,i=wc(o.get("rows")),l=i.findIndex((function(t){return t.id===e}));i.splice(l,1),n?0===(a=i.findIndex((function(e){return e.id===n})))?i.unshift({id:e}):i.splice(a,0,{id:e}):i.push({id:e}),o.setRows(i);var c=this.kernel.sortService;c.isSorting(o)&&c.isAuto(o)&&c.refreshSort(o)}}]),n}();function Yf(e,t,n){var r=[],o={};return e.forEach((function(e){t.includes(e.id)&&r.push(e),o[e.id]=!0})),t.forEach((function(e){if(!o[e]){var t={id:e};n&&(t.hidden=!0),r.push(t)}})),r}function $f(e,t){var n={};Tc.forEach((function(e){n[e.type]=e.name}));for(var r=n[e],o=t.map((function(e){return e.name})),a=1,i=r;o.includes(i);)i="".concat(r," ").concat(a),a+=1;return i}function Kf(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Xf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function Xf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zf=function(e){g()(n,gf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"updateView",value:function(e){var t=e.data,n=t.columns,r=t.group,o=t.groupData,a=this.tableModel.getFieldsMap();if(e.setColumns(this.updateData(e,n,Object.values(a),!0)),r[0]){var i=a[r[0].id];if(i.type===Ac.SELECT){for(var l=[],c={},s=[],u=0;u<i.options.length;u++){var d=i.options[u];s.push(d.id),c[d.id]=d}for(var f,p=Ye()(o,"titleValue[0]"),h=0;h<p.length;h++)if(""!==p[h].value){var m=p[h].titleValue[0];s.includes(m)||""===p[h].value?(c[m]&&""!==c[m].value&&(p[h].value=c[m].value,p[h].titleValue=[c[m].id]),l.push(m)):p.splice(h)}else f=p[h],delete p[h];p=p.filter((function(e){return!!e})),i.options.forEach((function(e,t){l.includes(e.id)||p.push({value:e.value,titleValue:[e.id],rows:[]})})),f&&p.push(f),e.set("groupData",p)}e.refreshGroupMap();var v=[];e.get("groupData").forEach((function(e){e.rows&&e.rows.length>0&&(v=v.concat(e.rows.map((function(e){return{id:e}}))))})),e.set("rows",v),this.tableModel.dataLoaded&&this.refreshRows(e,!0)}}},{key:"removeColumn",value:function(e,t){Me()(k()(n.prototype),"removeColumn",this).call(this,e,t),this.updateView(e)}},{key:"insertRows",value:function(e,t,r,o){var a=this;if(Me()(k()(n.prototype),"insertRows",this).call(this,e,t,r,o),e.get("group")[0]){var i=e.get("group")[0].id;o.forEach((function(t){a.kernel.groupRowService.refreshRowInGroup(t,i,e)}))}}},{key:"updateData",value:function(e,t,n,r){var o=e.get("group"),a=n.map((function(e){return e.id})),i=[],l={};if(t.forEach((function(e){a.includes(e.id)&&i.push(e),l[e.id]=!0})),!o[0]||!a.includes(o[0].id)){var c=this.getKanbanGroupCol(n);c?this.kernel.groupService.setGroup([{id:c.id}],e.get("id")):e.set("group",[])}return a.forEach((function(e){if(!l[e]){var t={id:e};r&&(t.hidden=!0),i.push(t)}})),i}},{key:"getGroupColumns",value:function(){var e=this.tableModel.getFieldsMap();return this.tableModel.getActiveView().get("columns").filter((function(t){return zc.includes(e[t.id].type)})).map((function(t){return e[t.id]}))}},{key:"getKanbanGroupCol",value:function(e){for(var t=0,n=[Ac.SELECT,Ac.MENTION];t<n.length;t++){var r,o=n[t],a=Kf(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(o===i.type)return i}}catch(e){a.e(e)}finally{a.f()}}}},{key:"createDefaultGroupCol",value:function(e){var t=this.tableModel.getView(e);if(t){var n,r=[],o=0;t.get("columns").forEach((function(e){o=Math.max(o,e.index),r.push(e.id)}));for(var a=o+1;!n||r.includes(n);)n=fs(32);var i={id:n,index:a,name:$f(Ac.SELECT,this.tableModel.getTableFields()),type:Ac.SELECT,options:[],color:!0};return this.kernel.execute("insertCol",i),i}}}]),n}();function Qf(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Jf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function Jf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ep=[gc.INSERT_GRID,gc.INSERT_CARD,gc.INSERT_KANBAN,gc.SET_COLS,gc.SET_COVER,gc.SET_SHOW_FIELD,gc.SET_GROUP,gc.SET_SORT,gc.SET_FILTER,gc.INSERT_COL],tp=function(e){g()(o,ce.a);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(o);function o(e,t){var n;return d()(this,o),n=r.call(this),s()(m()(n),"tableService",void 0),s()(m()(n),"searchService",void 0),s()(m()(n),"processService",void 0),s()(m()(n),"filterService",void 0),s()(m()(n),"sortService",void 0),s()(m()(n),"statsService",void 0),s()(m()(n),"groupService",void 0),s()(m()(n),"groupStatsService",void 0),s()(m()(n),"groupItemService",void 0),s()(m()(n),"groupRowService",void 0),s()(m()(n),"gridService",void 0),s()(m()(n),"cardService",void 0),s()(m()(n),"kanbanService",void 0),s()(m()(n),"formService",void 0),s()(m()(n),"command",void 0),s()(m()(n),"history",void 0),s()(m()(n),"monitor",void 0),s()(m()(n),"tableModel",void 0),s()(m()(n),"editable",void 0),s()(m()(n),"theme",void 0),s()(m()(n),"options",void 0),s()(m()(n),"readOnly",void 0),s()(m()(n),"platform",void 0),s()(m()(n),"abilities",void 0),s()(m()(n),"renderConfig",void 0),s()(m()(n),"executeRemote",(function(e,t){"undo"===e?n.command.executeUndoRemote(t):"redo"===e?n.command.executeRedoRemote(t):n.command.executeRemote(t)})),n.theme=t,n.options=e,n.readOnly=e.readOnly,n.platform=e.platform||{},n.abilities=e.abilities,n.renderConfig=e.renderConfig,n.tableModel=new df(m()(n),e),function(e){var t={tableService:vf,processService:Tf,filterService:jf,sortService:Nf,statsService:Hf,groupService:zf,groupStatsService:qf,groupItemService:Uf,groupRowService:Gf,gridService:yf,cardService:Wf,kanbanService:Zf,formService:Df};Object.keys(t).forEach((function(n){e[n]=new t[n](e)})),e.searchService=new Af(e,e.filterService)}(m()(n)),n.command=new od(m()(n)),n.history=new ad(m()(n)),n.monitor=new Ys(m()(n)),n.editable=!0,e.data&&n.setValue(e.data.sheet,e.data.version),n}return p()(o,[{key:"execute",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this.command).execute.apply(t,[e].concat(r))}},{key:"undo",value:function(){this.history.undo()}},{key:"getValue",value:function(e){return this.tableModel.getValue(e)}},{key:"getMetaData",value:function(){return this.tableModel.getMetaData()}},{key:"getFormattedValue",value:function(){for(var e=[],t=this.tableModel,n=t.columns,r=t.recordsModel,o=r.getRowIds(),a=function(e,t,n){var o=r.getCellValue(e,t,n),a=r.getCellFormattedValue(e,t,n);if([Ac.FILE,Ac.LINK,Ac.IMAGE].includes(n.type)){if(!o)return a;if(Array.isArray(o)){if(o.length>1)return o.map((function(e){return"[".concat(e.name,"](").concat(e.src,")")})).join(",");o=o[0]}return o&&o.src?o.name:a}return Ac.CHECKBOX===n.type?!0===o?"已勾选":"未勾选":a},i=[],l=0;l<n.length;l++){var c=n[l];i.push(c.name)}e.push(i);var s,u=Qf(o);try{for(u.s();!(s=u.n()).done;){var d,f=s.value,p=[],h=Qf(n);try{for(h.s();!(d=h.n()).done;){var m=d.value,v=a(f,m.id,m);p.push(v)}}catch(e){h.e(e)}finally{h.f()}e.push(p)}}catch(e){u.e(e)}finally{u.f()}return e}},{key:"setValue",value:(n=E()(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.tableModel.initData(t,n);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"setContent",value:(t=E()(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if("string"==typeof(n=t))try{n=JSON.parse(t)}catch(e){console.warn(e)}return e.next=6,this.setValue(n.sheet,n.version);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getViewService",value:function(e){if(e)return this.getViewServiceByType(e.get("type"))}},{key:"getViewServiceByType",value:function(e){if(e)return this["".concat(e.toLowerCase(),"Service")]}},{key:"getColTypes",value:function(){return Tc}},{key:"isEmptyTable",value:function(){return!this.history.canUndo()&&!this.tableModel.isTableModified()}},{key:"commandCanToDB",value:function(e){return this.platform.isH5&&this.editable&&this.abilities.update?ep.includes(e):!this.readOnly}}]),o}();function np(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rp=function(){function e(){d()(this,e),s()(this,"_store",new Set),s()(this,"_isDisposed",!1)}return p()(e,[{key:"_register",value:function(e){return this._store.add(e),e}},{key:"dispose",value:function(){if(!this._isDisposed){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return np(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?np(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(this._store.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&n.dispose()}}catch(e){t.e(e)}finally{t.f()}this._store.clear(),this._isDisposed=!0}}}]),e}();var op=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r){var o,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d()(this,n),a=t.call(this),s()(m()(a),"_rect",null),s()(m()(a),"_el",null),s()(m()(a),"_resizeObserver",null),s()(m()(a),"getRect",(function(){return a.options.full?a._el.getBoundingClientRect().toJSON():{width:a._rect.width,height:a._rect.height}})),s()(m()(a),"startObserver",(function(){a._resizeObserver||(a._resizeObserver=new ResizeObserver((function(e){var t,n=e&&(null===(t=e[0])||void 0===t?void 0:t.contentRect);n?a.observe(n.toJSON()):a.observe()})),a._resizeObserver.observe(a._el))})),s()(m()(a),"stopObserver",(function(){a._resizeObserver&&(a._resizeObserver.disconnect(),a._resizeObserver=null)})),s()(m()(a),"dispose",(function(){a.stopObserver(),Me()((o=m()(a),k()(n.prototype)),"dispose",o).call(o)})),a.options=i,ed(e instanceof HTMLElement,"el not a valid element type"),a._el=e,a._measure(!1,r),a}return p()(n,[{key:"observe",value:function(e){this._measure(!0,e)}},{key:"_measure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;t||(t=this._el.getBoundingClientRect()),Ee()(this._rect,t)||(this._rect=t,e&&this.onDidChange(this.getRect()))}}]),n}(),ap=!1,ip=!1;function lp(){if(ap)return ip;var e=document.createElement("canvas");return ip=!(!e.getContext||!e.getContext("2d"))&&(as.chrome||as.firefox||0===e.toDataURL("image/webp").indexOf("data:image/webp")),ap=!0,ip}var cp=function(e){return{src:e.src,msrc:e.src,w:null==e?void 0:e.width,h:null==e?void 0:e.height}};function sp(e,t,n){if(t&&t>16383)return e;if(n&&n>16383)return e;if(lp()&&je.OssUtil.isURLInOSS(e)){var r=new URL(e);if(!r.pathname)return e;var o=r.pathname.toLowerCase(),a=o.substring(o.lastIndexOf("."));[".webp",".svg"].includes(a)||(e=je.OssUtil.addImageProcess(r,"format","webp"))}return e}function up(e,t,n,r){return e=sp(e,t,n),je.OssUtil.resizeImage({maxWidth:r,src:e,data:{width:r,originWidth:t||r,originHeight:n}})||e}function dp(e,t){var n=Object(je.getImageBrowser)(),r=Array.isArray(e)?e.map((function(e){return cp(e)})):[e].map((function(e){return cp(e)}));lp()&&r.map((function(e){return e.src=sp(e.src,e.w,e.h),e})),n.open(r,t||0)}var fp=function(e){g()(i,ce.a);var t,n,r,o,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(i);function i(e,t){var n;return d()(this,i),n=a.call(this),s()(m()(n),"container",null),s()(m()(n),"clear",(function(){n.ctx.clearRect(-1,-1,n.container.offsetWidth+2,n.container.offsetHeight+2)})),s()(m()(n),"show",(function(){n.content.style.display="block",n.setSize(),n.setMatrix()})),s()(m()(n),"hide",(function(){n.content.style.display="none"})),n.container=e,n.engine=t,n.theme=t.theme,n.images={},n.colTypeIcons={},n.fileTypeIcons={},n.widgetIcons={},n.ratio=2,n.initialize(),n}return p()(i,[{key:"initialize",value:function(){this.content=this.container.querySelector(".".concat("lake-table-canvas-renderer")),this.content?this.content.innerHTML="":(this.content=document.createElement("div"),this.content.className="lake-table-canvas-renderer",this.container.appendChild(this.content));var e=document.createElement("canvas");this.content.appendChild(e),this.canvas=e,this.ctx=e.getContext("2d"),this.setSize(),this.setMatrix(),this.refreshImage()}},{key:"getCtx",value:function(){return this.ctx}},{key:"useStyle",value:function(e,t){e&&Object.assign(this.ctx,e,t)}},{key:"onResize",value:function(){this.setSize(),this.setMatrix()}},{key:"setSize",value:function(){var e=this.container,t=this.canvas,n=e.offsetWidth,r=e.offsetHeight;t.setAttribute("width",n*this.ratio),t.setAttribute("height",r*this.ratio),t.style.width=n+"px",t.style.height=r+"px"}},{key:"setMatrix",value:function(){this.ctx.scale(this.ratio,this.ratio),this.ctx.translate(-.5,.5)}},{key:"refreshImage",value:(o=E()(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadColumnTypeIcons();case 2:return e.next=4,this.loadFileTypeIcons();case 4:return e.next=6,this.loadWidgetIcons();case 6:this.emit("image-loaded");case 7:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"loadColumnTypeIcons",value:(r=E()(O.a.mark((function e(){var t,n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=zs.colTypeIcons,e.next=3,Promise.all(Object.keys(t).map((function(e){return new Promise((function(t,r){var o=new Image;o.setAttribute("crossOrigin","Anonymous"),o.src=Ms(n.engine.themeManager,"colTypeIcons.".concat(e)),n.colTypeIcons[e]=o,o.onload=function(){t(!0)}}))})));case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"loadFileTypeIcons",value:(n=E()(O.a.mark((function e(){var t,n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=zs.fileIcons,e.next=3,Promise.all(Object.keys(t).map((function(e){return new Promise((function(t,r){var o=new Image;o.setAttribute("crossOrigin","Anonymous"),o.src=Ms(n.engine.themeManager,"fileIcons.".concat(e)),n.fileTypeIcons[e]=o,o.onload=function(){t(!0)}}))})));case 3:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"loadWidgetIcons",value:(t=E()(O.a.mark((function e(){var t,n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=zs.widgetIcons,e.next=3,Promise.all(Object.keys(t).map((function(e){return new Promise((function(t,r){var o=new Image;o.setAttribute("crossOrigin","Anonymous"),o.src=Ms(n.engine.themeManager,"widgetIcons.".concat(e)),n.widgetIcons[e]=o,o.onload=function(){t(!0)}}))})));case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"createImageCache",value:function(e,t,n,r){var o=this,a=new Image;a.setAttribute("crossOrigin","Anonymous");var i=Math.floor(2*t.width),l=Math.floor(2*t.height);a.onload=function(){var t={width:a.width,height:a.height,image:a,isMaxSize:a.width!==i&&a.height!==l};o.images[e]=t,o.emit("image-loaded",t)},a.onerror=function(){o.images[e]={error:!0}},a.src=up(e,n,r,t.width),this.images[e]={loading:!0}}}]),i}();var pp=function(e){g()(n,ce.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),(r=t.call(this)).container=e,r.initialize(),r}return p()(n,[{key:"initialize",value:function(){var e=document.createElement("div");e.classList.add("lake-table-dom-renderer"),this.container.appendChild(e),this.dom=e}},{key:"onResize",value:function(){this.setSize()}},{key:"setSize",value:function(){var e=this.container,t=this.dom,n=e.offsetWidth,r=e.offsetHeight;t.style.width=n+"px",t.style.height=r+"px"}},{key:"show",value:function(){this.dom.style.display="block",this.setSize()}},{key:"hide",value:function(){this.dom.style.display="none"}},{key:"clear",value:function(){}}]),n}(),hp=function(){function e(t,n,r){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};d()(this,e),this._node=t,this._type=Array.isArray(n)?n:[n],this._handler=r,this._options=a,this._type.forEach((function(e){o._node.on?o._node.on(e,o._handler,o._options):o._node.addEventListener(e,o._handler,o._options)}))}return p()(e,[{key:"dispose",value:function(){var e=this;this._handler&&(this._type.forEach((function(t){e._node.off?e._node.off(t,e._handler,e._options):e._node.removeEventListener(t,e._handler,e._options)})),this._node=null,this._type=null,this._handler=null,this._options=null)}}]),e}();function mp(e,t,n,r){return new hp(e,t,n,r)}function vp(e,t){throw new Error("".concat(t," is not valid value in [").concat(e,"] attribute."))}function gp(e,t){return ld(t)||vp(e,t),!0}function bp(e,t){return function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}(t)||vp(e,t),!0}function yp(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return wp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wp(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function wp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kp(e,t,n,r){Object.defineProperty(e.prototype,t,{get:function(){this.attrs||(this.attrs={});var e=this.attrs[t];return void 0===e?n:e},set:function(e){if(!r||r(t,e)){this.attrs||(this.attrs={});var n=this.attrs[t];this.attrs[t]=e,this.fireChanged&&this.fireChanged(t,n,e)}}})}var xp=function(){function e(t,n,r){d()(this,e),this._node=t,this._type=n,this._handler=r,this._node._event.addEventListener(this._type,this._handler)}return p()(e,[{key:"dispose",value:function(){this._handler&&(this._node._event.removeEventListener(this._type,this.handler),this._node=null,this._handler=null)}}]),e}(),Ep=function(){function e(t){d()(this,e),s()(this,"_node",null),s()(this,"_stopPropagation",!1),s()(this,"_preventDefault",!1),this._node=t}return p()(e,[{key:"target",get:function(){return this._node}},{key:"currentTarget",get:function(){return this._node}},{key:"stopPropagation",value:function(){this._stopPropagation=!0}},{key:"preventDefault",value:function(){this._preventDefault=!0}}]),e}();function Cp(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Op(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Op(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function Op(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _p=function(){function e(t){d()(this,e),this._events={}}return p()(e,[{key:"addEventListener",value:function(e,t){var n,r=Cp(e.split(" "));try{for(r.s();!(n=r.n()).done;){var o=n.value;this._events[o]||(this._events[o]=[]),this._events[o].push({handler:t})}}catch(e){r.e(e)}finally{r.f()}}},{key:"removeEventListener",value:function(e,t){var n,r=Cp(e.split(" "));try{for(r.s();!(n=r.n()).done;){var o=n.value;if(this._events[o]){var a=this._events[o].findIndex((function(e){return e.handler===t}));a>-1&&this._events[o].splice(a,1)}}}catch(e){r.e(e)}finally{r.f()}}},{key:"dispatchEvent",value:function(e,t){var n,r=Cp(e.split(" "));try{for(r.s();!(n=r.n()).done;){var o=n.value,a=this._events[o];a&&a.forEach((function(e){e.handler(t)}))}}catch(e){r.e(e)}finally{r.f()}}}]),e}();function Sp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rp,jp,Ap,Tp,Lp=1,Dp=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this),s()(m()(r),"nodeType","Node"),s()(m()(r),"id",Lp++),s()(m()(r),"parentNode",null),s()(m()(r),"childNodes",[]),s()(m()(r),"_event",new _p),Object.keys(e).forEach((function(t){r[t]=e[t]})),r}return p()(n,[{key:"hasChildren",value:function(){return this.childNodes.length>0}},{key:"getParent",value:function(){return this.parentNode}},{key:"getChildren",value:function(){return this.childNodes}},{key:"getLayer",value:function(){var e=this.getParent();return e?"Layer"===e.nodeType?e:e.getLayer():null}},{key:"on",value:function(e,t){this._register(function(e,t,n){return new xp(e,t,n)}(this,e,t))}},{key:"off",value:function(e,t){this._event.removeEventListener(e,t)}},{key:"fire",value:function(e,t){t||(t=new Ep(this)),this._event.dispatchEvent(e,t)}},{key:"fireChanged",value:function(e,t,n){this._event.dispatchEvent(e+"Change",{oldVal:t,newVal:n})}},{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"removeChildren",value:function(e,t){for(var n=0;n<this.childNodes.length;n++)if(this.childNodes[n]===e){t&&e.dispose(),this.childNodes.splice(n,1);break}}},{key:"removeAllChildren",value:function(){for(var e=0;e<this.childNodes.length;e++){var t=this.childNodes[e];this.removeChildren(t)}}},{key:"isPointInner",value:function(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length>1)return n.forEach((function(t){return e.add(t)})),this;var o=n[0];o.parentNode=this;var a=this.childNodes.findIndex((function(e){return e.id===o.id}));a>-1&&this.childNodes.splice(a,1),this.childNodes.push(o)}},{key:"dispose",value:function(){var e;null===(e=this.parentNode)||void 0===e||e.removeChildren(this),this.parentNode=null;var t,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Sp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sp(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(this.childNodes);try{for(r.s();!(t=r.n()).done;)t.value.dispose()}catch(e){r.e(e)}finally{r.f()}this.childNodes=[],Me()(k()(n.prototype),"dispose",this).call(this)}}]),n}();kp(Dp,"name","",gp),kp(Dp,"x",0,bp),kp(Dp,"y",0,bp),kp(Dp,"width",0,bp),kp(Dp,"height",0,bp),kp(Dp,"zIndex",0,bp),kp(Dp,"visible",!0,(function(e,t){return function(e){return"boolean"==typeof e}(t)||vp(e,t),!0})),kp(Dp,"opacity",1,bp),kp(Dp,"offsetX",0,bp),kp(Dp,"offsetY",0,bp),Rp=Dp,jp="offset",Ap=["x","y"],Tp=bp,Object.defineProperty(Rp.prototype,jp,{get:function(){this.attrs||(this.attrs={});var e,t={},n=yp(Ap);try{for(n.s();!(e=n.n()).done;){var r=e.value,o=jp+r.toUpperCase();t[r]=this.attrs[o]}}catch(e){n.e(e)}finally{n.f()}return t},set:function(e){if(e){this.attrs||(this.attrs={});var t,n=yp(Ap);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=jp+r.toUpperCase();if(!Tp||Tp(o,e[r])){var a=this.attrs[o];this.attrs[o]=e[r],this.fireChanged&&this.fireChanged(jp,a,e[r])}}}catch(e){n.e(e)}finally{n.f()}}}});var Pp=function(){function e(){d()(this,e),s()(this,"x",0),s()(this,"y",0),s()(this,"width",0),s()(this,"height",0)}return p()(e,[{key:"isPointInner",value:function(e,t){return e>this.x&&e<this.x+this.width&&t>this.y&&t<this.y+this.height}}],[{key:"create",value:function(t){var n=t.x,r=t.y,o=t.width,a=t.height,i=new e;return i.x=n,i.y=r,i.width=o,i.height=a,i}},{key:"createByDom",value:function(t){var n=t.getBoundingClientRect(),r=new e;return r.x=n.left,r.y=n.top,r.width=n.width,r.height=n.height,r}}]),e}();function Mp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}kp(Pp,"x",0,bp),kp(Pp,"y",0,bp),kp(Pp,"width",0,bp),kp(Pp,"height",0,bp);var Np={cache:{enter:{},down:{},move:{},up:{},leave:{},over:{},cancel:{},out:{}},hasCache:function(e,t){var n=Np.cache[e];if(!n)return!0;var r=n["".concat(t.x,"_").concat(t.y)];return n["".concat(t.x,"_").concat(t.y)]=!0,setTimeout((function(){delete Np.cache[e]["".concat(t.x,"_").concat(t.y)]}),20),r}},Ip=[],Fp=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,n),e=t.call(this),s()(m()(e),"dom",null),s()(m()(e),"node",null),s()(m()(e),"events",[["mouseenter","enter"],["mousedown","down"],["mousemove","move"],["mouseup","up"],["mouseleave","leave"],["mouseover","over"],["mouseout","out"],["touchstart","down"],["touchmove","move"],["touchend","up"],["touchcancel","cancel"],["pointerdown","down"],["pointermove","move"],["pointerup","up"],["pointercancel","cancel"],["wheel","wheel"],["contextmenu","contextmenu"]]),e.options=r,e.dom=r.dom,e.node=r.node,e.bindEvents(),e.hasEvent=!1,e}return p()(n,[{key:"bindEvents",value:function(){var e=this;this.events.forEach((function(t){e._register(mp(e.dom,t[0],(function(n){if(e._isValidTarget(n)){var r=e._getEventPosition(n);Np.hasCache(t[1],r)||e[t[1]](n,r)}})))})),this.hasEvent=!0}},{key:"unbindEvents",value:function(){this.dispose(),this.hasEvent=!1}},{key:"_getDomBbox",value:function(){return Pp.createByDom(this.dom)}},{key:"_getEventPosition",value:function(e){var t=this._getDomBbox();if(void 0!==(e=e||window.event).touches){var n=e.touches[0];return n||(n=e.changedTouches[0]),{x:parseInt(n.clientX-t.x),y:parseInt(n.clientY-t.y)}}return{x:parseInt(e.clientX-t.x),y:parseInt(e.clientY-t.y)}}},{key:"_getTargetsByEvent",value:function(e,t){t=t||this._getEventPosition(e);var n=[];return function e(r){r.isPointInner(t.x,t.y)&&n.push(r);var o=r.getChildren();if(o.length>0){var a,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mp(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(o);try{for(i.s();!(a=i.n()).done;)e(a.value)}catch(e){i.e(e)}finally{i.f()}}}(this.node),n}},{key:"_isValidTarget",value:function(e){return e.target===this.dom||"CANVAS"===e.target.tagName}},{key:"out",value:function(e){}},{key:"leave",value:function(e){}},{key:"over",value:function(e){}},{key:"enter",value:function(e){}},{key:"move",value:function(e,t){var n=this,r=this._getTargetsByEvent(e,t),o=Ip.filter((function(e){return!r.find((function(t){return t.id===e.id}))}));o.length>0&&o.forEach((function(t){n._fire(t,"out",e)}));var a=r.filter((function(e){return!Ip.find((function(t){return t.id===e.id}))}));a.length>0&&a.forEach((function(t){n._fire(t,"over",e)})),r.length>0&&r.forEach((function(t){n._fire(t,"move",e)})),Ip=r}},{key:"down",value:function(e){var t=this,n=this._getTargetsByEvent(e);n.length>0&&n.forEach((function(n){t._fire(n,"down",e)}))}},{key:"up",value:function(e){var t=this,n=this._getTargetsByEvent(e);n.length>0&&n.forEach((function(n){t._fire(n,"up",e)}))}},{key:"cancel",value:function(e){}},{key:"wheel",value:function(e){}},{key:"contextmenu",value:function(e){}},{key:"_fire",value:function(e,t,n){this.events.forEach((function(r){r[1]===t&&e.fire(r[0],n)}))}}]),n}();var Bp=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,n),e=t.call(this),s()(m()(e),"_pixelRatio",2),s()(m()(e),"_nativeCanvas",null),s()(m()(e),"_context",null),s()(m()(e),"width",0),s()(m()(e),"height",0),e.options=r,e._pixelRatio=r.pixelRatio||("undefined"!=typeof window?window.devicePixelRatio:2),e._initCanvas(),e}return p()(n,[{key:"_initCanvas",value:function(){this._nativeCanvas=document.createElement("canvas"),this._nativeCanvas.style.padding="0",this._nativeCanvas.style.margin="0",this._nativeCanvas.style.border="0",this._nativeCanvas.style.background="transparent"}},{key:"getContext",value:function(){return this._context}},{key:"getNativeCanvas",value:function(){return this._nativeCanvas}},{key:"setContext",value:function(e){this._context=e}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeCanvas.width=this.width=e*this._pixelRatio,this._nativeCanvas.style.width=e+"px",this.setMatrix()}},{key:"getWidth",value:function(){return this.width}},{key:"setHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeCanvas.height=this.height=e*this._pixelRatio,this._nativeCanvas.style.height=e+"px",this.setMatrix()}},{key:"getHeight",value:function(){return this.height}},{key:"setSize",value:function(e,t){this.setWidth(e),this.setHeight(t)}},{key:"setMatrix",value:function(){this.getContext().scale(this._pixelRatio,this._pixelRatio),this.getContext().translate(-.5,.5)}},{key:"dispose",value:function(){var e=this.getNativeCanvas(),t=e.parentNode;t&&t.removeChild(e)}}]),n}(),Vp=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},Hp=window.cancelAnimationFrame;var zp=function(e){g()(n,Dp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,n),e=t.call(this,r),s()(m()(e),"_canvas",null),s()(m()(e),"_context",null),s()(m()(e),"_isDrawing",!1),s()(m()(e),"draw",(function(){e._isDrawing||(e._isDrawing=!0,Vp((function(){e._context.clear(),e.getChildren().forEach((function(t){t.draw(e._context)})),e._isDrawing=!1})))})),e.nodeType="Layer",e._canvas=new Bp({pixelRatio:r.pixelRatio,width:e.width,height:e.height}),e._context=new Gp({canvas:e._canvas,layer:m()(e)}),e._canvas.setContext(e._context),e.on("cursorChange",$()((function(e){document.body.style.cursor=e.newVal})),200),e}return p()(n,[{key:"connect",value:function(){var e=this.getParent();"Root"===e.nodeType&&(e.content.appendChild(this._canvas.getNativeCanvas()),this._canvas.setWidth(e.width),this._canvas.setHeight(e.height))}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getContext",value:function(){return this._context}},{key:"getLayer",value:function(){return this}},{key:"resize",value:function(e,t){var n=this.getParent();e||(e=n.container.offsetWidth),t||(t=n.container.offsetHeight),this._canvas.setSize(e,t),this.draw()}},{key:"add",value:function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];(e=Me()(k()(n.prototype),"add",this)).call.apply(e,[this].concat(r)),this.draw()}},{key:"show",value:function(){this._canvas.getNativeCanvas().style.display="block",this.resize()}},{key:"hide",value:function(){this._canvas.getNativeCanvas().style.display="none"}},{key:"dispose",value:function(){this._canvas.dispose(),this._canvas=null,this._context=null}}]),n}();kp(zp,"cursor",null,gp);var qp=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createImageData","createLinearGradient","createPattern","createRadialGradient","drawFocusIfNeeded","drawImage","ellipse","fill","fillRect","fillText","getContextAttributes","getImageData","getLineDash","getTransform","isPointInPath","lineTo","measureText","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setTransform","stroke","strokeRect","strokeText","transform","translate"],Up=["fillStyle","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline"],Gp=function(){function e(t){var n=t.canvas,r=t.layer;d()(this,e),s()(this,"_nativeContext",null),s()(this,"_layer",null),this._canvas=n,this._layer=r,this._nativeContext=n.getNativeCanvas().getContext("2d"),this._proxyContext()}return p()(e,[{key:"_proxyContext",value:function(){var e=this;qp.forEach((function(t){var n=e._nativeContext[t];n&&(e[t]=n.bind(e._nativeContext))}))}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getLayer",value:function(){return this._layer}},{key:"getNativeContext",value:function(){return this._nativeContext}},{key:"setLineDash",value:function(e){"setLineDash"in this._nativeContext?this._nativeContext.setLineDash(e):"mozData"in this._nativeContext?this._nativeContext.mozData=e:"webkitLineDash"in this._nativeContext&&(this._nativeContext.webkitLineDash=e)}},{key:"clear",value:function(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.getPixelRatio(),t.getHeight()/t.getPixelRatio())}}]),e}();Up.forEach((function(e){Object.defineProperty(Gp.prototype,e,{get:function(){return this._nativeContext[e]},set:function(t){if(!Up.includes(e))throw new Error("".concat(e," is not context2d attributes"));this._nativeContext[e]=t}})}));var Wp=function(e){g()(n,Dp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"draw",value:function(e){this.visible&&(e.save(),this.alpha&&this.drawAlpha(e),this.background&&this.drawBackgroundBefore(e),this.border&&this.drawBorderBefore(e),this.radius&&this.drawRadius(e),this.drawShape(e),this.border&&this.drawBorder(e),this.background&&this.drawBackground(e),this.alpha&&this.drawAlphaAfter(e),e.restore(),this.getChildren().forEach((function(t){t.draw(e)})))}},{key:"drawShape",value:function(){}},{key:"drawRadius",value:function(){}},{key:"drawBackgroundBefore",value:function(e){e.fillStyle=this.background,e.strokeStyle=this.background}},{key:"drawBackground",value:function(e){e.fill()}},{key:"drawBorderBefore",value:function(e){var t=this.border.split(" ");e.lineWidth=t[0],e.strokeStyle=t[1]}},{key:"drawBorder",value:function(e){e.stroke()}},{key:"drawAlpha",value:function(e){this._globalAlpha=e.globalAlpha,e.globalAlpha=this.alpha}},{key:"drawAlphaAfter",value:function(e){e.globalAlpha=this._globalAlpha}},{key:"requestDraw",value:function(){var e=this.getLayer();e&&e.draw()}},{key:"add",value:function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];(e=Me()(k()(n.prototype),"add",this)).call.apply(e,[this].concat(r)),this.requestDraw()}},{key:"fireChanged",value:function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];(e=Me()(k()(n.prototype),"fireChanged",this)).call.apply(e,[this].concat(r)),this.requestDraw()}}]),n}();kp(Wp,"alpha",null,bp),kp(Wp,"radius",null,bp),kp(Wp,"border",null,gp),kp(Wp,"background",null,gp);var Yp=function(e){g()(n,Wp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"nodeType","Arc"),e}return p()(n)}();var $p=function(e){g()(n,Wp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"nodeType","Arrow"),e}return p()(n)}();var Kp=function(e){g()(n,Wp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"nodeType","Circle"),e}return p()(n)}();var Xp=function(e){g()(n,Wp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"nodeType","Ellipse"),e}return p()(n)}();function Zp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zp(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jp={},eh=function(e){g()(n,Wp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,n),e=t.call(this,r),s()(m()(e),"nodeType","Image"),e}return p()(n,[{key:"drawShape",value:function(e){this.image&&e.drawImage(this.image,this.x,this.y,this.width,this.height)}}],[{key:"fromURL",value:function(e,t,r,o,a){var i=Math.floor(2*t.width),l=Math.floor(2*t.height),c=je.OssUtil.resizeImage({maxWidth:t.width,src:e,data:{width:t.width,originWidth:r,originHeight:o}});c&&(e=c);var s=function(e){var r=new n(Qp(Qp({},t),{},{image:e,isMaxSize:e.width!==i&&e.height!==l}));a(null,r),Jp[e.src]=e};if(Jp[e])s(Jp[e]);else{var u=new Image;u.setAttribute("crossOrigin","Anonymous"),u.onload=function(){s(u)},u.onerror=function(e){a(e)},u.src=e}}}]),n}();kp(eh,"image"),kp(eh,"isMaxSize");var th=function(e){g()(n,Wp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"nodeType","Line"),e}return p()(n,[{key:"drawShape",value:function(e){e.lineWidth=this.height,e.beginPath(),e.moveTo(this.x,this.y),e.lineTo(this.x+this.width,this.y),e.stroke()}}]),n}();var nh=function(e){g()(n,Wp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"nodeType","Path"),e}return p()(n)}();var rh=function(e){g()(n,Wp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"nodeType","Rect"),e}return p()(n,[{key:"drawShape",value:function(e){this.radius||(e.beginPath(),e.rect(this.x,this.y,this.width,this.height),e.closePath())}},{key:"drawRadius",value:function(e){var t=this.x,n=this.y;e.beginPath(),e.moveTo(t,n+this.height/2),e.arcTo(t,n,t+this.width/2,n,this.radius),e.arcTo(t+this.width,n,t+this.width,n+this.height/2,this.radius),e.arcTo(t+this.width,n+this.height,t+this.width/2,n+this.height,this.radius),e.arcTo(t,n+this.height,t,n+this.height/2,this.radius),e.closePath()}}]),n}();var oh=function(e){g()(n,Wp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"nodeType","Tag"),e}return p()(n)}();var ah=function(e){g()(n,Wp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"nodeType","Text"),e}return p()(n,[{key:"drawShape",value:function(e){this.font&&(e.font=this.font),e.fillText(this.text,this.x,this.y)}}]),n}();function ih(e){return new Proxy(e,{apply:function(e,t,n){return Ke()(e,me()(n))}})}kp(ah,"text","",gp),kp(ah,"font","",gp);var lh=function(e){g()(n,Dp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,n),ed(r.container,"missing options.container"),e=t.call(this,r),s()(m()(e),"container",null),s()(m()(e),"content",null),s()(m()(e),"eventProxy",null),s()(m()(e),"contentClassName","lake-convas-content"),s()(m()(e),"resize",(function(){e.getChildren().forEach((function(e){e.resize()}))})),e.nodeType="Root",e.options=r,r.contentClassName&&(e.contentClassName=r.contentClassName),e._initDom(),e._initEvents(),e.on("widthChange",e.resize),e.on("heightChange",e.resize),e}return p()(n,[{key:"_initDom",value:function(){var e=this;this.options.container instanceof HTMLDivElement?this.container=this.options.container:this.container=document.querySelector(this.options.container),this.content=this.container.querySelector(".".concat(this.contentClassName)),this.content?this.content.innerHTML="":this.content=document.createElement("div"),this.content.style.userSelect="none",this.content.className=this.contentClassName,this.container.appendChild(this.content),this.containerRect=this.getContainerRect(),this._register(mp(window,"resize",(function(){e.resize()}))),this._containerObserver=new op(this.container,null,{full:!0}),this._containerObserver.startObserver(),this._containerObserver.onDidChange=function(t){e.resize(),e.containerRect=t},this._register(this._containerObserver),this._register(mp(this.container,"contextmenu",(function(e){e.preventDefault(),window.getSelection().removeAllRanges()})))}},{key:"getContainerRect",value:function(){return this.container.getBoundingClientRect().toJSON()}},{key:"_initEvents",value:function(){this.eventProxy=new Fp({dom:this.container,node:this})}},{key:"add",value:function(e){Me()(k()(n.prototype),"add",this).call(this,e),e.connect()}},{key:"dispose",value:function(){this.content&&this.container.removeChild(this.content),this.eventProxy.dispose()}}]),n}();lh.Layer=ih(zp),lh.Arc=ih(Yp),lh.Arrow=ih($p),lh.Circle=ih(Kp),lh.Ellipse=ih(Xp),lh.Image=ih(eh),lh.Line=ih(th),lh.Path=ih(nh),lh.Rect=ih(rh),lh.Tag=ih(oh),lh.Text=ih(ah);var ch=ih(lh),sh=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d()(this,e),s()(this,"container",null),s()(this,"canvas",null),s()(this,"layer",null),this.container=t,this.theme=n,this.options=r,this.initialize()}return p()(e,[{key:"initialize",value:function(){this.canvas=new ch({container:this.container,width:this.container.offsetWidth,height:this.container.offsetHeight,contentClassName:"lake-table-lakecanvas-renderer"}),this.layer=new ch.Layer({pixelRatio:2}),this.canvas.add(this.layer);var e=this.options.rect;if(e){var t=this.layer.getContext();t.save(),t.beginPath(),t.rect(e.x,e.y,e.width,e.height),t.clip()}}},{key:"getContainer",value:function(){return this.container}},{key:"getCtx",value:function(){return this.layer.getContext()}},{key:"getLayer",value:function(){return this.layer}},{key:"getCanvas",value:function(){return this.canvas}},{key:"onResize",value:function(){this.layer.resize()}},{key:"show",value:function(){this.layer.show(),this.layer.getParent().eventProxy.hasEvent||this.layer.getParent().eventProxy.bindEvents()}},{key:"hide",value:function(){this.layer.hide(),this.layer.getParent().eventProxy.bindEvents()}}]),e}();var uh=function(e){g()(o,ce.a);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(o);function o(e){var t;return d()(this,o),(t=r.call(this,e)).options=e,t.upload=t.upload.bind(m()(t)),t.acceptFileType=e.acceptFileType,t}return p()(o,[{key:"getAccept",value:function(e){return this.acceptFileType?this.acceptFileType:e===Ac.IMAGE?(null===(t=this.options)||void 0===t?void 0:t.accept)||Ld.IMAGE_EXT_STR:e===Ac.FILE?(null===(n=this.options)||void 0===n?void 0:n.accept)||Ld.FILE_EXT_STR:void 0;var t,n}},{key:"getType",value:function(){return this.cellType===Ac.IMAGE?"image":"attachment"}},{key:"tryQuickUpload",value:(n=E()(O.a.mark((function e(t){var n,r,o,a,i,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.quickUploadAction){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Object(je.fileMd5)(t);case 4:return n=e.sent,r=t.size,o=t.name,a=t.type,l=Object(je.ajax)({xhr:function(){return new window.XMLHttpRequest},url:this.options.quickUploadAction,data:{md5:n,filesize:r,filename:o,filetype:a,type:this.getType()},dataType:"json",success:function(e){e&&!1===e.data.success||(i=e)},error:function(e){console.error(e)},method:"POST",processData:!0}),e.next=11,l.xhr.promise;case 11:if(i&&!1!==i.success){e.next=13;break}return e.abrupt("return",!1);case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"uploadFile",value:(t=E()(O.a.mark((function e(t){var n,r,o,a=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=new FormData).append("file",t,t.name),"function"!=typeof this.options.uploadAction){e.next=11;break}return e.next=5,this.options.uploadAction(n);case 5:if((r=e.sent).data){e.next=9;break}return this.handleChange({status:"error",message:_c("上传失败"),file:t}),e.abrupt("return");case 9:return this.handleChange({status:"success",url:r.data.url,file:t}),e.abrupt("return");case 11:o=(this.options.uploadAction||"").replace(/ctoken=[^&]+&/,""),Object(je.ajax)({xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){e.lengthComputable&&a.handleChange({file:t,status:"progress",percent:parseInt(e.loaded/e.total*100,10)})}),!1),e},url:o,data:n,dataType:"json",success:function(e){var n=e.data;n?a.handleChange({status:"success",url:n.url,file:t}):a.handleChange({status:"error",message:_c("上传失败"),file:t})},error:function(e){var n,r="";if(e&&e.xhr&&e.xhr.response)try{r=(n=JSON.parse(e.xhr.response)).message||""}catch(e){r=""}else r=e.message;r||(r=_c("上传失败")),a.handleChange({status:"error",file:t,message:r,res:n})},method:"POST",processData:!0});case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"upload",value:function(e,t){var n=this,r=this.handleBeforeUpload(e,t);r&&r.then(E()(O.a.mark((function t(){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.tryQuickUpload(e);case 3:if(!(r=t.sent)){t.next=8;break}n.handleChange({status:"success",url:r.data.url,file:e}),t.next=10;break;case 8:return t.next=10,n.uploadFile(e);case 10:t.next=17;break;case 12:return t.prev=12,t.t0=t.catch(0),console.error(t.t0),t.next=17,n.uploadFile(e);case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))).catch((function(e){console.error(e),Xe.a.error(_c("文件读取失败，请重新上传"))}))}},{key:"handleBeforeUpload",value:function(e,t){var n=this;e.uid=(null==e?void 0:e.uid)||fs();var r,o=Pd(e),a=this.getAccept(t);if(e.extName=o,a&&"image/*"!==a&&a.indexOf("."+o)<0)return this.handleChange({status:"unsupport",file:e}),!1;r=Md(e.name)?"max_single_image_size":"max_single_file_size";try{if(window.__member_message_ref){var i=window.__member_message_ref.current.getMessageWithFile({filesize:e.size},r)||{},l=i.msg,c=i.alwaysOpen,s=i.level,u=i.callback;if(l)return u(Xe.a[s||"error"](l,c?0:void 0)),this.handleChange({status:"limit",file:e}),!1}}catch(e){console.error(e)}return new Promise((function(r,o){var a=new FileReader;a.addEventListener("load",(function(o){var a=function(){n.handleChange({status:"start",file:e}),r(e)};if(t===Ac.IMAGE){var i=new Image;i.src=o.target.result,i.onload=function(){e.width=i.width,e.height=i.height,a()},i.onerror=function(){a()}}else a()}),!1),a.addEventListener("error",(function(){o(e)})),a.readAsDataURL(e)}))}},{key:"handleChange",value:function(e){var t=e.status,n=e.file;t&&this.emit("change",t,n,e)}}]),o}();function dh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var fh=function(){function e(t,n){var r=this;d()(this,e),s()(this,"engine",void 0),s()(this,"kernel",void 0),s()(this,"onPasteFile",(function(e,t){if(!r.engine.readonly){var n=r.engine.viewManager.getViewRenderer().viewportHelper,o=n.getColConfigs(t.col),a=o.type,i=new uh(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dh(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r.getOptions(a)));i.on("change",(function(e,i,l){if("error"===e&&Xe.a.error(l.message||_c("上传失败，请重试")),"unsupport"===e)r.engine.emit("unSupportFileUpload",i);else if("success"===e){var c=n.getCellValue(t.row,o),s={uid:i.uid,name:i.name,src:l.url,file:i.size};a===Ac.IMAGE&&(s.width=i.width,s.height=i.height),c?c.push(s):c=[s],r.kernel.execute("setCellValue",t.row,t.col,{value:c})}})),i.upload(e,a)}})),this.engine=t,this.kernel=n,this.engine.on(qs.PASTE_FILE,this.onPasteFile)}return p()(e,[{key:"getOptions",value:function(e){switch(e){case Ac.IMAGE:return{uploadAction:Qe()(this.engine.options,["image","uploadAction"]),quickUploadAction:Qe()(this.engine.options,["image","quickUploadAction"]),accept:this.getAcceptType(Ac.IMAGE)};case Ac.FILE:return{uploadAction:Qe()(this.engine.options,["file","uploadAction"]),quickUploadAction:Qe()(this.engine.options,["file","quickUploadAction"]),accept:this.getAcceptType(Ac.FILE)};default:ed(!1,"no file manage options")}}},{key:"getAcceptType",value:function(e){var t,n;return e===Ac.IMAGE?(null===(t=this.engine.options.image)||void 0===t?void 0:t.accept)||Ld.IMAGE_EXT_STR:e===Ac.FILE?(null===(n=this.engine.options.file)||void 0===n?void 0:n.accept)||Ld.FILE_EXT_STR:void 0}}]),e}(),ph=function(){function e(){d()(this,e)}return p()(e,[{key:"getViewport",value:function(){}},{key:"getRenderer",value:function(){}},{key:"draw",value:function(){}},{key:"reRender",value:function(){}},{key:"onResize",value:function(){}},{key:"onSelected",value:function(){}},{key:"onDestroy",value:function(){}}]),e}();var hh=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r){var o;return d()(this,n),(o=t.call(this)).gridRenderer=e,o.kernel=r,o.engine=e.engine,o.theme=r.theme,o.tableModel=r.tableModel,o.recordsModel=o.tableModel.recordsModel,o.container=e.container,o.columnConfigs={},o}return p()(n,[{key:"getViewData",value:function(e){var t=this.tableModel.getActiveView();return t?e?t.get(e):t.data:null}},{key:"setViewData",value:function(e,t){var n=this.tableModel.getActiveView();n&&e&&n.set(e,t)}},{key:"isColExist",value:function(e){return!!this.getViewData("columns")[e]}},{key:"getContainerSize",value:function(){}},{key:"getUsers",value:function(){var e=this.recordsModel.userMap;return me()(e).map((function(e){var t=ie()(e,2);return t[0],t[1]}))}}]),n}(),mh={none:{stats:_c("统计"),option:_c("不展示")},noneSeperator:{seperator:!0},count:{stats:_c("$1 条记录"),option:_c("记录总数")},filled:{stats:_c("已填写 $1"),option:_c("已填写数"),types:["input","textarea","select","multiSelect","number","date","createdAt","updatedAt","image","file","phone"].concat(me()(Pc),["link","email"])},empty:{stats:_c("未填写 $1"),option:_c("未填写数"),types:["input","textarea","select","multiSelect","number","date","createdAt","updatedAt","image","file","phone"].concat(me()(Pc),["link","email"])},checked:{stats:_c("已勾选 $1"),option:_c("已勾选"),types:["checkbox"]},unchecked:{stats:_c("未勾选 $1"),option:_c("未勾选"),types:["checkbox"]},unique:{stats:_c("唯一数 $1"),option:_c("唯一数"),types:["input","textarea","select","multiSelect","number","date","createdAt","updatedAt","image","file","phone"].concat(me()(Pc),["link","email"])},commonSeperator:{seperator:!0,types:["input","textarea","select","multiSelect","number","date","createdAt","updatedAt","checkbox","image","file","phone"].concat(me()(Pc),["link","email"])},percentFilled:{stats:_c("已填写占比 $1"),option:_c("已填写占比"),types:["input","textarea","select","multiSelect","number","date","createdAt","updatedAt","image","file","phone"].concat(me()(Pc),["link","email"])},percentEmpty:{stats:_c("未填写占比 $1"),option:_c("未填写占比"),types:["input","textarea","select","multiSelect","number","date","createdAt","updatedAt","image","file","phone"].concat(me()(Pc),["link","email"])},percentUnique:{stats:_c("唯一数占比 $1"),option:_c("唯一数占比"),types:["input","textarea","select","multiSelect","number","date","createdAt","updatedAt","image","file","phone"].concat(me()(Pc),["link","email"])},formatSeperator:{seperator:!0,types:["date","createdAt","updatedAt","number"]},sum:{stats:_c("求和 $1"),option:_c("求和"),types:["number"]},average:{stats:_c("平均值 $1"),option:_c("平均值"),types:["number"]},max:{stats:_c("最大值 $1"),option:_c("最大值"),types:["number"]},min:{stats:_c("最小值 $1"),option:_c("最小值"),types:["number"]},earliestDate:{stats:_c("最早时间 $1"),option:_c("最早时间"),types:["date","createdAt","updatedAt"]},latestDate:{stats:_c("最晚时间 $1"),option:_c("最晚时间"),types:["date","createdAt","updatedAt"]},dateRange:{stats:_c("时间范围 $1 天"),option:_c("时间范围（日）"),types:["date","createdAt","updatedAt"]},monthRange:{stats:_c("时间范围 $1 月"),option:_c("时间范围（月）"),types:["date","createdAt","updatedAt"]},percentChecked:{stats:_c("已勾选占比 $1"),option:_c("已勾选占比"),types:["checkbox"]},percentUnchecked:{stats:_c("未勾选占比 $1"),option:_c("未勾选占比"),types:["checkbox"]}};function vh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vh(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bh=function(e){g()(n,hh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r){var o;return d()(this,n),o=t.call(this,e,r),s()(m()(o),"groupService",null),s()(m()(o),"getContainerSize",(function(){return{width:o.gridRenderer.viewManager.getContainerWidth(),height:o.gridRenderer.viewManager.getContainerHeight()}})),s()(m()(o),"getViewportMaxWidth",(function(){return Math.min(o.container.offsetWidth,o.totalWidth-o.getViewData("scrollX")+o.getRowHeaderWidth())})),s()(m()(o),"setCellPreviewerRect",(function(e){var t=o.tableModel.getActiveView(),n=t.get("cellpreviewer"),r=o.getSelections();n&&JSON.stringify(n)===JSON.stringify(e)||qe()(r)||(t.set("cellpreviewer",e||{}),o.engine.emit(qs.UPDATE_CELL_PREVIEWER_RECT))})),s()(m()(o),"_getDisplayRowCount",(function(){var e=o.getViewData("rows"),t=o.getViewData("filterConfigs");if(!e)return 0;var n=e.filter((function(e){return!e.hidden}));return t?n.filter((function(e){return!e.filtered})).length:n.length})),s()(m()(o),"scrollBy",(function(e,t){var n=o.getViewData(),r=n.scrollX+(e||0),a=n.scrollY+(t||0);o.scrollTo(r,a)})),s()(m()(o),"isScrollYAtTop",(function(){return 0===o.getViewData().scrollY})),s()(m()(o),"isScrollYAtBottom",(function(){return o.getViewData().scrollY>=o.getScrollYBottom()})),s()(m()(o),"getScrollYBottom",(function(){var e=(o.kernel.readOnly?0:Ms("addGridRowHeight"))+Ms("statsBarHeight")+Ms("colHeaderHeight");return Math.max(o.totalHeight-o.container.offsetHeight+e,0)})),s()(m()(o),"onPasteEnd",(function(e){o.scrollToCell(e.row,e.col),o.selectCell(e.row,e.col)})),s()(m()(o),"activeRow",(function(e){var t=o.getViewData();t.rowCount;var n=t.colCount;o.kernel.execute("setSelections",{row:e,col:0,rowCount:1,colCount:n})})),o.groupService=r.groupService,o.freezeX=!1,o.rowSizes=[],o.columnSizes=[],o.columnConfigs={},o.hiddenColumnConfigs={},o.tempState=null,o.kernel.on(gc.PASTE_END,o.onPasteEnd),o}return p()(n,[{key:"getCellValue",value:function(e,t){var n,r=this.getViewData("rows");return this.recordsModel.getCellValue(null===(n=r[e])||void 0===n?void 0:n.id,null==t?void 0:t.id,t)}},{key:"getCellFormattedValue",value:function(e,t){var n,r=this.getViewData("rows");return this.recordsModel.getCellFormattedValue(null===(n=r[e])||void 0===n?void 0:n.id,null==t?void 0:t.id,t)}},{key:"getRowId",value:function(e){var t;return null===(t=this.getViewData("rows")[e])||void 0===t?void 0:t.id}},{key:"todo_getRowByRowId",value:function(e){return this.getViewData("rows").findIndex((function(t){return t.id===e}))}},{key:"todo_getColByColId",value:function(e){return this.getViewData("columns").findIndex((function(t){return t.id===e}))}},{key:"getCellByRowCol",value:function(e,t){var n=this.getColConfigs(t);return this.getCellValue(e,n)}},{key:"setFreeze",value:function(e){this.freezeX=e}},{key:"getRows",value:function(){return this.getViewData("rows")}},{key:"isHiddenCol",value:function(e){var t=this.getViewData("columns");return!t[e]||!!t[e].hidden}},{key:"isFilteredRow",value:function(e){var t=this.getViewData("rows");if(!t[e])return!0;var n=this.kernel.groupService.getGroupByRow(e);return!(!n||!n.collapsed)||!!t[e].filtered||!!t[e].hidden}},{key:"isFirstCellActived",value:function(){var e=this.getViewData("selections");return 0===e.row&&0===e.col}},{key:"isLastCellActived",value:function(){var e=this.getViewData("selections"),t=this.getViewData("rowCount"),n=this.getViewData("colCount");return e.row===t-1&&e.col===n-1}},{key:"hasFrozenCol",value:function(){var e,t;return void 0===this.getViewData("frozenCol")?-1:-1===(null===(e=this.kernel.renderConfig)||void 0===e||null===(t=e.grid)||void 0===t?void 0:t.freezeColIdx)?0:1}},{key:"shouldCellRenderNoActive",value:function(){return os}},{key:"isSortCol",value:function(e){var t=this.getViewData(),n=this.tableModel.getActiveView();return!!this.kernel.sortService.isAuto(n)&&!!t.sort.options.find((function(t){return t.id===e}))}},{key:"isFilterCol",value:function(e){var t=this.getViewData();return!(!t.filter||!t.filter.options||!t.filter.options.find((function(t){return t.id===e})))}},{key:"getGridSize",value:function(){var e=this.getViewData();return{rowCount:e.rowCount,colCount:e.colCount}}},{key:"getColConfigs",value:function(e){return this.columnConfigs[e]||this.hiddenColumnConfigs[e]}},{key:"getAllColConfigs",value:function(){return[].concat(me()(Object.values(this.columnConfigs)),me()(Object.values(this.hiddenColumnConfigs)))}},{key:"getViewportSelections",value:function(){var e=this.getContainerSize(),t=e.width,n=e.height,r=0===this.hasFrozenCol()?0:this.getFrozenColWidth();this.refreshRowSize(),this.refreshColSize();var o=this.getCellByOffset(r,Ms("colHeaderHeight")),a=this.getCellByOffset(t,n),i=this.tableModel.getActiveView().data;return this.getTotalWidth(),this.getTotalHeight(),0===i.rowCount?{row:0,col:o.col,rowCount:0,colCount:a.col-o.col+1}:{row:o.row,col:o.col,rowCount:a.row-o.row+1,colCount:a.col-o.col+1}}},{key:"getFrozenHeaderSelections",value:function(){var e=this.getViewData(),t=e.frozenCol+(0===this.hasFrozenCol()?0:1);return this.refreshColSize(0,e.frozenCol),{row:0,col:0,rowCount:0,colCount:t}}},{key:"getViewportRect",value:function(){var e=0===this.hasFrozenCol()?0:this.getFrozenColWidth(),t=Ms("colHeaderHeight"),n=this.getContainerSize();return{left:e,top:t,width:n.width-e,height:n.height-t}}},{key:"getRowHeaderWidth",value:function(){var e=Ms(os?"rowHeaderTinyWidth":"rowHeaderWidth");return this.kernel.readOnly||(e+=Ms("draggableWidth")),this.kernel.groupService.grouping?e+Ms("groupPaddingX"):e}},{key:"getFrozenViewportSelections",value:function(){var e=this.getViewData(),t=this.getContainerSize(),n=this.getRowHeaderWidth(),r=this.getCellByOffset(n,Ms("colHeaderHeight")),o=this.getCellByOffset(t.width,t.height);return 0===e.rowCount?{row:0,col:r.col,rowCount:0,colCount:o.col-r.col+1}:{row:r.row,col:0,rowCount:o.row-r.row+1,colCount:e.frozenCol+1}}},{key:"getFrozenViewportRect",value:function(){var e=this.getContainerSize(),t=Ms("colHeaderHeight"),n=this.getRowHeaderWidth();return this.groupService.grouping?{left:Ms("groupPaddingX"),top:t,width:this.getFrozenColWidth()-Ms("cellPaddingX")-2,height:e.height}:{left:n,top:t,width:this.getFrozenColWidth()-n,height:e.height}}},{key:"getFrozenRect",value:function(){return{top:Ms("colHeaderHeight"),width:this.getFrozenColWidth()}}},{key:"getClosestCellByOffset",value:function(e,t){var n=this.getCellByOffset(e,t),r=Math.max(0,n.row),o=Math.max(0,n.col),a=this.getRectByCell(r,o),i=a.left,l=a.width,c=this.getViewData("scrollX"),s=this.getFrozenColWidth(),u=i+l/2>e?Math.max(0,o-1):o;return 0!==u&&(i+l<s?u=Math.max(this.getColByOffset(c+s)-1,0):i<s&&i+l/2>e&&(u+=1)),{row:r,col:u}}},{key:"inSelections",value:function(e){var t=this.getSelections();if(!t)return!1;var n=t.row,r=t.col,o=t.rowCount,a=t.colCount;return n<=e.row&&r<=e.col&&n+o>e.row&&r+a>e.col}},{key:"isRowInSelections",value:function(e){var t=this.getViewportSelections();if(!t)return!1;var n=t.row;t.col;var r=t.rowCount;return t.colCount,n<=e&&n+r>e}},{key:"findClosestSelection",value:function(e,t,n,r){var o=null,a=Ms("colHeaderHeight"),i=this.getViewData(),l=i.selections,c=this.getRowHeaderWidth();if(e<0&&t<0){var s=this.getCellByOffset(c,a);return{type:"cell",row:s.row,col:s.col}}if(e>0&&t>0){var u=this.getClosestCellByOffset(n,r);return{type:"cell",row:u.row,col:u.col}}if(e<0){if(0===l.col)return{type:"cell",row:this.getRowByOffset(r),col:0};o=this.getCellByOffset(c,r)}else if(e>0){if(l.col===i.colCount-1)return{type:"cell",row:this.getRowByOffset(r),col:i.colCount-1};o=this.getCellByOffset(this.container.offsetWidth,r)}if(t<0){if(0===l.row)return{type:"cell",row:0,col:this.getColByOffset(n)};o=this.getCellByOffset(n,a)}else if(t>0){if(l.row===i.rowCount-1)return{type:"cell",row:i.rowCount-1,col:this.getColByOffset(n)};o=this.getCellByOffset(n,this.container.offsetHeight)}return o?{type:"cell",row:o.row,col:o.col}:null}},{key:"getCellByOffset",value:function(e,t){return{row:this.getRowByOffset(t),col:this.getColByOffset(e)}}},{key:"getRectByCell",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.getViewData(),o=r.rowHeight,a=r.scrollY,i=this.freezeX?0:r.scrollX,l=this.columnSizes[n]?this.columnSizes[n].offset:0,c=this.rowSizes[e]?this.rowSizes[e]:0,s=(null===(t=this.columnSizes[n])||void 0===t?void 0:t.size)||0,u=l-i+this.getRowHeaderWidth(),d=c-a+Ms("colHeaderHeight"),f=this.isHiddenCol(n)?0:s,p=this.isFilteredRow(e)?0:o.value||Ms("rowHeight");return{left:u,top:d,width:f,height:p}}},{key:"getColIdxByColId",value:function(e){var t=this.getViewData("columns");for(var n in t)if(t[n].id===e)return n;ed(!1,"getColIdxByColId colId is not matched")}},{key:"getFrozenRectByCell",value:function(e,t){this.isFrozenCol(t)&&this.setFreeze(!0);var n=this.getRectByCell(e,t);return this.setFreeze(!1),n}},{key:"getCellPreviewerRect",value:function(e,t,n){var r=this.getFrozenRectByCell(e,t);if(Mc.includes(n))return r;var o=this.tableModel.getActiveView().get("cellpreviewer")||{};return gh(gh({},r),{},{width:o.width||0,height:o.height||0})}},{key:"getRectBySelections",value:function(e){var t={row:Math.max(e.row,0),col:Math.max(e.col,0)},n={row:t.row+e.rowCount-1,col:t.col+e.colCount-1},r=this.getRectByCell(t.row,t.col),o=this.getRectByCell(n.row,n.col);return{left:r.left,top:r.top,width:o.left-r.left+o.width,height:o.top-r.top+o.height}}},{key:"getTotalWidth",value:function(){var e=this.getViewData("columns");return this.totalWidth=e.reduce((function(e,t){return t.hidden?e:e+(t.size||Ms("colWidth"))}),0),this.totalWidth}},{key:"getTotalHeight",value:function(){var e=this.getViewData("groupData"),t=null==e?void 0:e.filter((function(e){var t;return null===(t=e.rows)||void 0===t?void 0:t.length})).length;if(t)return this.totalHeight=this.getHeightWithGroup(t),this.totalHeight;var n=this._getRowHeight(),r=this.kernel.readOnly?1.5:this._getAddRowHeight();return this.totalHeight=n+r,this.totalHeight}},{key:"getHeightWithGroup",value:function(e){var t=this.theme;t.statsBarHeight;var n=t.groupPaddingY,r=this.getViewData("groupData"),o=this._getRowHeight(),a=r.filter((function(e){return e.collapsed})).length,i=this.kernel.readOnly?0:this._getAddRowHeight(e-a);return this.getGroupHeight(e)+o+i+n}},{key:"getGroupHeight",value:function(e){return this.theme.groupPaddingY*e+this._getGroupColHeaders(e)}},{key:"_getGroupColHeaders",value:function(e){return e*this.theme.groupHeaderHeight}},{key:"_getRowHeight",value:function(){var e=this.getViewData("rowHeight").value;return this._getDisplayRowCount()*e}},{key:"_getAddRowHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e*(this.theme.addGridRowHeight+.5)}},{key:"getRowOffset",value:function(e){return this.rowSizes[e]+Ms("colHeaderHeight")}},{key:"getRowByOffset",value:function(e){var t=this.getViewData();if(0===t.rowCount)return-1;var n=Ms("colHeaderHeight");if(e<n)return-1;for(var r=e-n+t.scrollY,o=this.rowSizes,a=0;a<o.length;a++)if(o[a]>=r)return Math.max(a-1,0);return t.rowCount-1}},{key:"getColByOffset",value:function(e){var t=this.getViewData(),n=this.getRowHeaderWidth();if(e<n)return-1;for(var r=e-n+(this.freezeX?0:t.scrollX||0),o=this.columnSizes,a=0;a<o.length;a++)if(o[a].offset>=r)return Math.max(a-1,0);return t.colCount-1}},{key:"getFrozenColWidth",value:function(){var e=this.getViewData(),t=e.frozenCol,n=e.columns,r=this.getRowHeaderWidth();if(void 0===t||0===this.hasFrozenCol())return r;for(var o=0;o<=t;o++)n[o]&&(r+=n[o].size||Ms("colWidth"));return r}},{key:"isFrozenCol",value:function(e){var t=this.getViewData("frozenCol");return void 0!==t&&e<=t}},{key:"isHiddenByFrozen",value:function(e,t){var n=this.getFrozenColWidth();return t<Ms("colHeaderHeight")||e<n}},{key:"isCellInSearch",value:function(e,t){var n=this.getViewData("rows");return!!n[e]&&this.kernel.searchService.isCellInSearch(n[e].id,t.id)}},{key:"getColumnsSize",value:function(e){return this.getViewData("columns")[e].size||Ms("colWidth")}},{key:"refreshRowSize",value:function(){var e=this,t=this.getViewData();isNaN(t.scrollX)&&(t.scrollX=0),isNaN(t.scrollY)&&(t.scrollY=0),this.rowSizes=[];var n=t.rowHeight.value||Ms("rowHeight");if(this.groupService.grouping){var r=this.groupService.group,o=0,a=0;r.forEach((function(t){o+=Ms("groupPaddingY"),o+=Ms("groupHeaderHeight"),t.rows.forEach((function(){e.rowSizes[a]=o,t.collapsed||(o+=n),a++})),t.collapsed||e.kernel.readOnly||(o+=Ms("addGridRowHeight"))}))}else for(var i=t.rows,l=0,c=0;c<i.length;c++)this.rowSizes[c]=l,!i[c]||i[c].hidden||i[c].filtered||(l+=n)}},{key:"refreshColSize",value:function(){var e=this.getViewData().columns,t=this.kernel.tableModel.getTableFields(),n={};this.columnSizes=[],this.columnConfigs={},this.hiddenColumnConfigs={},t.forEach((function(e,t){n[e.id]=t}));for(var r=0,o=0;o<e.length;o++)this.columnSizes[o]={offset:r,size:e[o].size||Ms("colWidth")},e[o].hidden?this.hiddenColumnConfigs[o]=t[n[e[o].id]]:(r+=e[o].size||Ms("colWidth"),this.columnConfigs[o]=t[n[e[o].id]])}},{key:"getSelections",value:function(){return this.getViewData("selections")||{}}},{key:"removeSelections",value:function(){this.engine.emit(qs.REMOVE_SELECTIONS),this.kernel.command.execute("setSelections",{})}},{key:"getPrevVisibleCol",value:function(e){for(var t=e-1;this.isHiddenCol(t);)t--;return t}},{key:"selectTo",value:function(e){var t=this.getViewData(),n=t.selections;if("col"===e.type&&(e.row=0),"row"===e.type&&(e.col=0),n.row!==e.row||n.col!==e.col||1!==n.rowCount||1!==n.colCount){if(this.groupService.grouping){var r=this.groupService.getGroupRangeByRow(n.row);if(!r)return;if(e.row<r.min||e.row>r.max)return}var o=Math.max(0,e.row),a=Math.max(0,e.col);Object.assign(n,{row:Math.min(n.activeRow,o),col:Math.min(n.activeCol,a),rowCount:"col"===e.type?t.rowCount:Math.abs(n.activeRow-o)+1,colCount:"row"===e.type?t.colCount:Math.abs(n.activeCol-a)+1}),this.kernel.execute("setSelections",n)}}},{key:"getScrollData",value:function(){var e=this.getViewData();return{scrollX:e.scrollX,scrollY:e.scrollY,scrollWidth:this.totalWidth+Ms("addGridColWidth")+this.getRowHeaderWidth(),scrollHeight:this.totalHeight+Ms("addGridRowHeight")+42+Ms("colHeaderHeight")}}},{key:"scrollTo",value:function(e,t){var n=this.getViewData();if(e=void 0===e?n.scrollX:e,t=void 0===t?n.scrollY:t,e!==n.scrollX||t!==n.scrollY){var r=this.tableModel.getActiveView(),o=this.container;if(null!=e){var a=Ms("addGridColWidth")+this.getRowHeaderWidth();e=Math.min(Math.max(this.totalWidth-o.offsetWidth+a,0),Math.max(0,e)),r.set("scrollX",e)}if(null!=t){var i=Ms("statsBarHeight")+Ms("colHeaderHeight");t=Math.min(Math.max(this.totalHeight+i-o.offsetHeight,0),Math.max(0,t)),r.set("scrollY",t)}this.scrolled()}}},{key:"scrolled",value:function(){this.engine.emit(qs.SCROLL),this.kernel.tableService.lazyAutoSave()}},{key:"selectById",value:function(e,t){for(var n=this.getViewData(),r=n.rows,o=n.columns,a=0,i=0,l=0;l<r.length;l++)if(r[l].id===e){a=l;break}for(var c=0;c<o.length;c++)if(o[c].id===t){i=c;break}this.selectCell(a,i)}},{key:"selectCell",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.getViewData();0!==r.rowCount?(this.kernel.execute("setSelections",{row:e,col:t,rowCount:1,colCount:1,activeRow:e,activeCol:t}),n||this.scrollToCell(e,t)):r.selections={}}},{key:"scrollToCell",value:function(e,t){var n=Ms("cellBorder"),r=Ms("scrollBarWidth"),o=this.getViewData();if(o.columns[t]&&o.rows[e]){var a,i,l=this.getFrozenRectByCell(e,t),c=l.left,s=l.top,u=l.width,d=l.height;if(!this.isFrozenCol(t)){var f=this.getFrozenColWidth(),p=this.getRowHeaderWidth();c<f?a=Math.max(0,this.columnSizes[t].offset-f+p-n):c+u>this.container.offsetWidth&&(a=this.columnSizes[t].offset+u-this.container.offsetWidth+p+n+r)}s<=Ms("colHeaderHeight")?i=Math.max(0,this.rowSizes[e]-Ms("colHeaderHeight")):s+d>this.container.offsetHeight-Ms("colHeaderHeight")&&(i=this.rowSizes[e]+d-this.container.offsetHeight+Ms("colHeaderHeight")+Ms("addGridRowHeight")+20),void 0===a&&void 0===i||this.scrollTo(a,i)}}},{key:"scrollToRowIfNeed",value:function(e){if(this.getViewData().rows[e]&&!this.isRowInSelections(e)){var t=this.getFrozenRectByCell(e,0);t.left;var n=t.top;t.width;var r,o=t.height;n<=Ms("colHeaderHeight")?r=Math.max(0,this.rowSizes[e]-Ms("colHeaderHeight")):n+o>this.container.offsetHeight-Ms("colHeaderHeight")&&(r=this.rowSizes[e]+o-this.container.offsetHeight+Ms("colHeaderHeight")+Ms("addGridRowHeight")+20),void 0!==r&&(this.tableModel.getActiveView().set("scrollY",r),this.scrolled())}}},{key:"onSearched",value:function(){}},{key:"isSelectionVisible",value:function(){var e=this.kernel.groupService,t=this.getViewData("selections");if(qe()(t)||0===t.rowCount)return!1;if(!e.grouping)return!0;var n=this.kernel.groupService.getGroupByRow(t.activeRow);return!n||!n.collapsed}},{key:"getGroupColConfig",value:function(){var e=this.kernel.groupService.getGroup();if(e&&0!==e.length)return this.getAllColConfigs().find((function(t){return t.id===e[0].id}))}},{key:"getGroupRect",value:function(e){var t=this.getViewportMaxWidth()-Ms("groupPaddingX"),n=e.rows[0],r=this.tableModel.getActiveView().rowMap[n.id],o=this.getRectByCell(r,0,void 0,!1),a=e.rows.length*this.getViewData("rowHeight").value;return this.kernel.readOnly?a+=Ms("groupHeaderHeight"):a+=2*Ms("groupHeaderHeight"),{left:Ms("groupPaddingX"),top:o.top-Ms("groupHeaderHeight"),width:t,height:a}}},{key:"isSortable",value:function(e){return e||(e=this.kernel.tableModel.getActiveView()),!(!this.kernel.groupService.isGrouping(e)&&this.kernel.sortService.isAuto(e))}},{key:"diffRows",value:function(e,t){for(var n=t.row,r=t.row+t.rowCount,o=[],a=e.row;a<e.row+e.rowCount;a++)(a<n||a>=r)&&o.push(a);return o}},{key:"getStatTextByCol",value:function(e,t){var n=e.stats,r=this.getColConfigs(t),o=_c(mh.none.stats);return n&&n[r.id]&&(o=_c(mh[n[r.id].type].stats,n[r.id].value+"")),o}}]),n}(),yh=document.createElement("canvas").getContext("2d");function wh(e){var t=e.length;return t>0?14*t+8*t:14}var kh,xh={};function Eh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14,n=(e+"").split(""),r=0;return n.forEach((function(e){var n=e+"_"+t;xh[n]||(yh.font="normal normal ".concat(t,'px "Helvetica Neue", "Chinese Quote", BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif'),xh[n]=yh.measureText(e).width),r+=xh[n]})),r}function Ch(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:14,r=arguments.length>3?arguments[3]:void 0;if(r&&r<t)return e;for(var o=Eh("...",n),a=(e+"").split(""),i="",l=t-o,c=0;c<a.length;c++){var s=Eh(a[c],n);if(s>l){i+="...";break}i+=a[c],l-=s}return i}function Oh(e){return'\n  <div class="lake-table-tooltip-placement-'.concat(e.placement,'" style="transform-origin: 50% 45px 0px;">\n    <div class="lake-table-tooltip-content">\n      <div class="lake-table-tooltip-arrow"></div>\n      <div class="lake-table-tooltip-inner" data-role="tooltip"></div>\n    </div>\n  </div>\n  ')}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-tooltip {\n  font-size: 14px;\n  font-variant: tabular-nums;\n  line-height: 1.5;\n  color: var(--yq-text-primary);\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  position: absolute;\n  z-index: 1060;\n  display: none;\n  visibility: visible;\n  white-space: nowrap;\n}\n.lake-table-tooltip-active {\n  display: block;\n}\n.lake-table-tooltip-content {\n  position: relative;\n}\n.lake-table-tooltip-placement-top,\n.lake-table-tooltip-placement-topLeft,\n.lake-table-tooltip-placement-topRight {\n  padding-bottom: 8px;\n}\n.lake-table-tooltip-placement-right,\n.lake-table-tooltip-placement-rightTop,\n.lake-table-tooltip-placement-rightBottom {\n  padding-left: 8px;\n}\n.lake-table-tooltip-placement-bottom,\n.lake-table-tooltip-placement-bottomLeft,\n.lake-table-tooltip-placement-bottomRight {\n  padding-top: 8px;\n}\n.lake-table-tooltip-placement-left,\n.lake-table-tooltip-placement-leftTop,\n.lake-table-tooltip-placement-leftBottom {\n  padding-right: 8px;\n}\n.lake-table-tooltip-inner {\n  padding: 6px 8px;\n  color: #fff;\n  text-align: left;\n  text-decoration: none;\n  background-color: rgba(0, 0, 0, 0.75);\n  border-radius: 4px;\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  min-height: 32px;\n  word-wrap: break-word;\n}\n.lake-table-tooltip-arrow {\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-color: transparent;\n  border-style: solid;\n}\n.lake-table-tooltip-placement-top .lake-table-tooltip-arrow,\n.lake-table-tooltip-placement-topLeft .lake-table-tooltip-arrow,\n.lake-table-tooltip-placement-topRight .lake-table-tooltip-arrow {\n  bottom: -5px;\n  border-width: 5px 5px 0;\n  border-top-color: rgba(0, 0, 0, 0.75);\n}\n.lake-table-tooltip-placement-top .lake-table-tooltip-arrow {\n  left: 50%;\n  margin-left: -5px;\n}\n.lake-table-tooltip-placement-topLeft .lake-table-tooltip-arrow {\n  left: 16px;\n}\n.lake-table-tooltip-placement-topRight .lake-table-tooltip-arrow {\n  right: 16px;\n}\n.lake-table-tooltip-placement-right .lake-table-tooltip-arrow,\n.lake-table-tooltip-placement-rightTop .lake-table-tooltip-arrow,\n.lake-table-tooltip-placement-rightBottom .lake-table-tooltip-arrow {\n  left: 3px;\n  border-width: 5px 5px 5px 0;\n  border-right-color: rgba(0, 0, 0, 0.75);\n}\n.lake-table-tooltip-placement-right .lake-table-tooltip-arrow {\n  top: 50%;\n  margin-top: -5px;\n}\n.lake-table-tooltip-placement-rightTop .lake-table-tooltip-arrow {\n  top: 8px;\n}\n.lake-table-tooltip-placement-rightBottom .lake-table-tooltip-arrow {\n  bottom: 8px;\n}\n.lake-table-tooltip-placement-left .lake-table-tooltip-arrow,\n.lake-table-tooltip-placement-leftTop .lake-table-tooltip-arrow,\n.lake-table-tooltip-placement-leftBottom .lake-table-tooltip-arrow {\n  right: 3px;\n  border-width: 5px 0 5px 5px;\n  border-left-color: rgba(0, 0, 0, 0.75);\n}\n.lake-table-tooltip-placement-left .lake-table-tooltip-arrow {\n  top: 50%;\n  margin-top: -5px;\n}\n.lake-table-tooltip-placement-leftTop .lake-table-tooltip-arrow {\n  top: 8px;\n}\n.lake-table-tooltip-placement-leftBottom .lake-table-tooltip-arrow {\n  bottom: 8px;\n}\n.lake-table-tooltip-placement-bottom .lake-table-tooltip-arrow,\n.lake-table-tooltip-placement-bottomLeft .lake-table-tooltip-arrow,\n.lake-table-tooltip-placement-bottomRight .lake-table-tooltip-arrow {\n  top: -4px;\n  border-width: 0 5px 5px;\n  border-bottom-color: rgba(0, 0, 0, 0.75);\n}\n.lake-table-tooltip-placement-bottom .lake-table-tooltip-arrow {\n  left: 50%;\n  margin-left: -5px;\n}\n.lake-table-tooltip-placement-bottomLeft .lake-table-tooltip-arrow {\n  left: 16px;\n}\n.lake-table-tooltip-placement-bottomRight .lake-table-tooltip-arrow {\n  right: 16px;\n}\n");var _h={show:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r=Object.assign({},{placement:"top",timeout:4e3},r);var o=document.querySelector(".lake-table-tooltip");o||((o=document.createElement("div")).classList.add("lake-table-tooltip"),o.innerHTML=Oh(r),document.body.appendChild(o));var a,i,l=Eh(t=ms(t));return o.querySelector("[data-role=tooltip]").innerHTML=t,"left"===r.placement?(i=e.left-l-24,a=e.top+e.height):"top"===r.placement?(a=e.top-41,i=e.left+e.width/2-(l+16)/2):(i=e.left,a=e.top),o.style.top=a+"px",o.style.left=Math.max(Math.floor(i),0)+"px",o.classList.add("lake-table-tooltip-active"),r.shouldHiddenOnHover&&o.addEventListener("mouseenter",(function(){n.hide(o)})),r.timeout&&(clearTimeout(kh),kh=setTimeout((function(){n.hide(o)}),r.timeout)),o},hide:function(){var e=document.querySelector(".lake-table-tooltip");e&&e.parentNode.removeChild(e)}},Sh=function(){function e(t,n,r){d()(this,e),s()(this,"renderWidgets",null),s()(this,"groupBoundaryLines",[]),this.theme=n.theme,this.engine=t.engine,this.gridRenderer=t,this.kernel=n,this.canvasRenderer=t.canvasRenderer,this.lakeCanvasRenderer=t.lakeCanvasRenderer,this.viewportHelper=t.viewportHelper,this.area=t.area,this.ctx=this.canvasRenderer.getCtx(),this.activeAddGridRow=!1,this.renderWidgets=r,this.activeRow=null,this.groupBoundaryLines=[]}return p()(e,[{key:"render",value:function(e,t){var n=e.row,r=e.col,o=e.rowCount,a=e.colCount,i=this.viewportHelper.getSelections(),l=this.viewportHelper.container.clientWidth,c=n,s=r,u=n+o-1,d=r+a-1,f=this.ctx,p=Ms("colWidth"),h=Ms("rowHeight"),m=Ms("iconSize"),v=this.kernel.readOnly,g=this.viewportHelper.getRowHeaderWidth();this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"gridHeader"));for(var b=this.kernel.groupService.grouping,y=[];r<=d;){if(!this.viewportHelper.isHiddenCol(r)){var w=this.viewportHelper.getRectByCell(c,r),k=w.left,x=w.width;p=k+x;var E=Ms("colHeaderHeight"),C=this.viewportHelper.getColConfigs(r);if(!C){r++;continue}var O=C.name;if(this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"gridHeader")),this.area.add({left:k,top:0,width:x,height:E},{type:"col",col:r,id:C.id}),0!==r&&this.area.add({left:k,top:0,width:5,height:E},{type:"col_split",col:this.viewportHelper.getPrevVisibleCol(r)}),this.area.add({left:k+x-5,top:0,width:10,height:E},{type:"col_split",col:r,id:C.id}),f.fillStyle=Ms(this.engine.themeManager,"@yuque-color-bg-primary"),f.fillRect(k,0,x,E),y.push(k+x),(this.viewportHelper.isSortCol(C.id)||this.viewportHelper.isFilterCol(C.id))&&(this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"sortingHeader")),f.fillRect(k,0,x,E),f.lineWidth=2,f.beginPath(),f.moveTo(k,1),f.lineTo(k+x,1),f.stroke(),f.lineWidth=1),0===i.row&&r>=i.col&&r<i.col+i.colCount&&(f.strokeStyle=Ms(this.engine.themeManager,"@yuque-color-cardborder-selected"),f.beginPath(),f.moveTo(k,0+E),f.lineTo(k+x,0+E),f.stroke()),this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"gridHeader")),f.save(),f.beginPath(),v?f.rect(k,0,x,E):f.rect(k,0,x-m-Ms("cellPaddingX"),E),f.clip(),f.fillText(O,k+36,E/2),this.drawIcon(C.type,{left:k+12,top:10,width:m,height:m}),f.restore(),v){r++;continue}var _=k+x-20,S={type:"colConfigIcon",col:r,id:C.id,x:_,y:16};this.area.add({left:_-8,top:6,width:24,height:24},S)}r++}f.beginPath(),f.moveTo(0,Ms("colHeaderHeight")),f.lineTo(y[y.length-1],Ms("colHeaderHeight")),y.forEach((function(e){f.moveTo(e,0),f.lineTo(e,Ms("colHeaderHeight"))})),f.stroke(),f.beginPath(),f.moveTo(0,0),f.lineTo(p,0),f.stroke();var R=this.viewportHelper.getRectByCell(u,s);if(h=R.top+R.height,this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"header")),t&&(this.maxHeight=h),t&&!v){var j=this.viewportHelper.getGridSize(),A=j.rowCount,T=j.colCount,L={left:p,top:0,width:Math.max(l-this.viewportHelper.totalWidth+this.viewportHelper.getScrollData().scrollX,Ms("addGridColWidth")),height:Ms("colHeaderHeight")};if(d===T-1){this.canvasRenderer.hoverAddCol?this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"hoverGrid")):this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"default")),f.fillRect(L.left,L.top,L.width,L.height),f.strokeRect(L.left,L.top,L.width+1,L.height);var D=L.left+Ms("addGridColX"),P=L.top+L.height/2;this.viewportHelper.getGridSize().colCount>=Ms("maxCols")?(this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"disabledGridPlus")),this.renderWidgets.drawPlusIcon(D,P)):(this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"gridPlus")),this.renderWidgets.drawPlusIcon(D,P),this.area.add(L,{type:"addGridCol",bbox:L}))}!b&&u>=A-1&&this.renderWidgets.drawAddRow({left:0,top:h,width:l+1,height:Ms("addGridRowHeight")},0,0)}t&&v&&(f.beginPath(),f.moveTo(g,h),f.lineTo(p,h),f.stroke())}},{key:"renderSerialNumCol",value:function(e){var t=this;this.groupBoundaryLines=[];var n=e.row,r=n+e.rowCount-1,o=this.ctx,a=[],i=[],l=0,c=this.kernel.groupService.grouping,s=this.viewportHelper.getSelections(),u=this.viewportHelper.warningSelections,d=this.viewportHelper.getRowHeaderWidth(),f=d,p=this.viewportHelper.getRows();for(c&&(l=Ms("groupPaddingX"),f-=Ms("groupPaddingX"),o.fillStyle=Ms(this.engine.themeManager,"groupPaddingColor"),o.fillRect(0,Ms("rowHeight"),Ms("groupPaddingX")-.5,this.maxHeight||0),o.restore());n<=r;){if(!this.viewportHelper.isFilteredRow(n)){var h=n===this.canvasRenderer.activeRow,m=n===s.activeRow,v=this.viewportHelper.getRectByCell(n,0,void 0,!1),g=v.top,b=v.height;u&&u.row<=n&&u.row+u.rowCount>n?this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"tempState")):h||m?this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"activeGrid")):this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"default")),o.fillRect(l,g+.5,f,b),i.push(g),this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"rowHeader")),this.area.add({left:l,top:g,width:f,height:b},{type:"row",row:n}),a.push(g+b),this.kernel.readOnly||this.renderWidgets.drawDragger({key:n,bbox:{x:l+8,y:g+8},visible:h}),o.textAlign="center";var y=l+17;this.kernel.readOnly||(y+=Ms("draggableWidth")),o.fillText(1+(void 0===p[n].actualRow?n:p[n].actualRow),y,g+Ms("rowHeight")/2),this.renderRowExpand(n,s)}n++}if(c){var w=this.viewportHelper.getViewData("rowHeight");o.beginPath(),i.forEach((function(e){o.moveTo(l,e),o.lineTo(l,e+w.value);var n=Math.max(e,Ms("colHeaderHeight"));t.groupBoundaryLines.push([n,n+w.value])})),a.forEach((function(e){o.moveTo(l,e),o.lineTo(d,e)})),o.stroke()}else o.beginPath(),a.forEach((function(e){o.moveTo(l,e),o.lineTo(f,e)})),o.stroke();o.fillStyle=Ms(this.engine.themeManager,"@yuque-color-bg-primary"),o.fillRect(0,0,d,Ms("colHeaderHeight")),o.strokeStyle=Ms(this.engine.themeManager,"@yuque-color-table-header-border"),o.beginPath(),o.moveTo(0,Ms("colHeaderHeight")),o.lineTo(d,Ms("colHeaderHeight")),this.renderIndexLockIcon(),o.stroke()}},{key:"renderIndexLockIcon",value:function(){if(!os){var e=Ms("indexLock.size"),t={top:10,left:40,width:e,height:e};this.drawIcon("indexLock",t),this.area.add(t,{type:"indexLockIcon",coord:t,size:e})}}},{key:"renderRowExpand",value:function(e,t){if(!os){var n=this.viewportHelper.getRectByCell(e).top,r=30+(this.kernel.groupService.grouping?Ms("groupPaddingX"):0);this.kernel.readOnly||(r+=Ms("draggableWidth"));var o={top:n+Ms("rowHeight")/2-Ms("action.bgSize")/2,left:r,width:Ms("action.bgSize"),height:Ms("action.bgSize")},a=e===this.canvasRenderer.activeRow;this.renderWidgets.drawRowExpand({key:e,bbox:{x:o.left,y:o.top,width:o.width,height:o.width},visible:a})}}},{key:"drawIcon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"input",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.left,r=t.top,o=t.width,a=t.height,i=this.canvasRenderer.colTypeIcons[e];if(i){var l=this.ctx;try{l.drawImage(i,n,r,o,a)}catch(e){}}}},{key:"drawFrozenLine",value:function(){var e=this.kernel.groupService.grouping,t=this.ctx;this.canvasRenderer.useStyle(Ms("frozenline"));var n=this.viewportHelper.getFrozenColWidth()+.25;if(-1!==this.viewportHelper.hasFrozenCol()){var r=n;e?(t.beginPath(),this.groupBoundaryLines.forEach((function(e){var n=ie()(e,2),o=n[0],a=n[1];t.moveTo(r,o),t.lineTo(r,a)})),t.stroke()):(t.beginPath(),t.moveTo(r,0),t.lineTo(r,this.maxHeight),t.stroke(),this.canvasRenderer.scrolling&&t.fillRect(r,0,3,this.maxHeight))}}}]),e}(),Rh={draw:function(e,t,n,r,o){var a=r.ctx,i=r.viewportHelper,l=r.area,c=this.getCellData(e,t,i,n,o),s=this.getDrawStyles(c,this.engine),u=i.getSelections();if(e===u.activeRow&&t===u.activeCol&&!c.isTitle||i.shouldCellRenderNoActive()||c.search){a.fillStyle=c.search?Ms(this.engine.themeManager,"highlight.fillStyle"):Ms(this.engine.themeManager,"@yuque-color-bg-primary");var d=c.bbox;a.fillRect(d.left,d.top,d.width,d.height)}s&&Object.keys(s).forEach((function(e){a[e]=s[e]})),c.blankCell||this.drawCell(c,a,r),this.drawAccessories(c,a,this.engine);var f=this.getHitAreas(c,n);return this.formatHitAreas(f).forEach((function(e){l.add(Object.assign({},e.bbox),e.info)})),c},formatHitAreas:function(e){var t=[];return e.forEach((function(e){Array.isArray(e)?e.forEach((function(e){return t.push(e)})):t.push(e)})),t},getCellData:function(e,t,n,r,o){var a=o;a||(a=n.getRectByCell(e,t));var i=n.isCellInSearch(e,r),l=n.getCellValue(e,r),c=n.getCellFormattedValue(e,r),s=null==r?void 0:r.type,u=Gc.includes(s),d={row:e,col:t,value:l,colConfigs:r,align:o?"left":this.getHAlign(r),bbox:a,formatterValue:c,blankCell:""===c,search:i,isTitle:!!o,disableEdit:u},f=this.addAdditionalData(d,n);return f.tip=this.getCellTip(d),o&&(f.isActive=!1,f.search=!1),f},addAdditionalData:function(e){return e},getHitAreas:function(e,t){var n=e.value,r=e.row,o=e.col,a=e.bbox,i=e.note,l=[{bbox:a,info:{type:e.isTitle?"title":"cell",row:r,col:o,note:i,value:n}}],c=this.addHitAreas(l,e);if(e.tip){var s=Ms("tipSize");c.push({bbox:{left:a.left,top:a.top,width:s,height:s},info:{type:"cellTipIcon",row:r,col:o,x:a.left,y:a.top,value:e.tip}})}return c&&c.forEach((function(e){Array.isArray(e)?e.forEach((function(e){ed(e.info,"set area.info fail"),e.info.cellType=t.type})):e.info.cellType=t.type})),c},addHitAreas:function(e){return e},drawBackground:function(e,t){e.search&&this.drawSearchBackground(e,t)},drawSearchBackground:function(e,t){var n=e.bbox;t.fillStyle=Ms(this.engine.themeManager,"highlight.fillStyle"),t.fillRect(n.left,n.top,n.width,n.height)},getDrawStyles:function(e){var t=e.align,n={fillStyle:Ms(this.engine.themeManager,"default.color"),textAlign:t};return this.getCellStyle(n,e)},getCellStyle:function(e){return e},drawCell:function(){},drawAccessories:function(e,t){if(!e.isTitle){var n=e.tip;n&&this.drawTip(e,n,t)}},clipCtx:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.width-.5,t.height),e.clip()},getCellTip:function(){return null},drawTip:function(e,t,n){var r=e.bbox,o=r.left,a=r.top;r.width;var i=Ms("tipSize"),l=o,c=a,s=i;n.fillStyle=Ms(this.engine.themeManager,"tip.fillStyle"),n.beginPath(),n.moveTo(l,c),n.lineTo(l,c+i),n.lineTo(l+s,c),n.closePath(),n.fill()},getHAlign:function(e){return"number"===e.type?"right":"left"},drawActionIcon:function(e,t,n,r,o,a){e.globalAlpha=a?1:.6;var i=Ms("action.bgSize"),l=Ms("action.iconSize");if(a){var c=n,s=r;o.canvasRenderer.useStyle(Ms(this.engine.themeManager,"action.bg")),e.beginPath(),e.moveTo(c,s+i/2),e.arcTo(c,s,c+i/2,s,Ms("action.bgRadius")),e.arcTo(c+i,s,c+i,s+i/2,Ms("action.bgRadius")),e.arcTo(c+i,s+i,c+i/2,s+i,Ms("action.bgRadius")),e.arcTo(c,s+i,c,s+i/2,Ms("action.bgRadius")),e.closePath(),e.fill()}e.fillStyle=Ms(this.engine.themeManager,"@black");var u=n+(i-l)/2,d=r+(i-l)/2;try{e.drawImage(t,u,d,l,l)}catch(e){}e.globalAlpha=1},getActionIconArea:function(e,t){var n=e.value,r=e.row,o=e.col,a=this.getActionIconCoord(e),i=a.x,l=a.y,c=Ms("action.bgSize");return{bbox:{left:i,top:l,width:c,height:c},info:{type:t,row:r,col:o,value:n,x:i,y:l}}},getActionIconCoord:function(e){var t=e.bbox,n=Ms("action.bgSize");return{x:t.left+t.width-n-6,y:t.top+Ms("rowHeight")/2-n/2}}},jh=Object.assign({},Rh,{addAdditionalData:function(e){var t=e.blankCell,n=e.bbox,r=e.align,o=e.formatterValue;if("textarea"!==e.colConfigs.type||t)e.contentHeight=Ms("defaultFontSize");else if(n.height<=36)o=o.replace(/\s/g," ");else{var a=function(e,t,n){var r=(e+"").split("");if(n<12)return{textArr:r,wrapHeight:wh(r)};if(yh.font=14,e.indexOf("\n")<0&&Eh(e)<n)return{textArr:[e],wrapHeight:wh([e])};var o=[],a=0,i=0;return r.forEach((function(e){if("\n"===e)return a=0,i++,void(o[i]="");var t=Eh(e);if(a+t<=n)a+=t,o[i]=o[i]||"",o[i]+=e;else{var r=o[i].lastIndexOf(" ");if(/[A-Za-z0-9]/.test(e)&&(r>0&&r<o[i].length-1||o[i].match(/[\u4e00-\u9fa5]/))){for(var l=o[i].length-1,c=e;/[A-Za-z0-9]/.test(o[i][l]);)c=o[i][l]+c,o[i]=o[i].substring(0,l),l-=1;a=Eh(c),i++,o[i]=c}else a=" "===e?0:t,i++,o[i]=" "===e?"":e}})),{textArr:o,wrapHeight:wh(o)}}(o,0,n.width-12);e.contentHeight=a.wrapHeight,o=a.textArr}if(e.formatterValue=o,!e.blankCell){e.textLen=this.getTextWidth(o);var i={x:this.getXCoord(n.left,n.width,r),y:n.top+Ms("cellPaddingY")+Ms("defaultFontSize")/2};e.coord=i}return e},drawCell:function(e,t){this.drawText(e,t)},drawText:function(e,t){var n=this,r=e.bbox,o=e.formatterValue,a=e.style,i=e.textLen,l=e.align,c=e.coord;c||(c={x:this.getXCoord(r.left,r.width,l),y:r.top+Ms("cellPaddingY")+Ms("defaultFontSize")/2});var s=e.clip||i+Ms("cellPaddingX")>r.width||e.contentHeight>r.height;if(s&&this.clipCtx(t,r),Array.isArray(o)){var u=Ms("defaultFontSize"),d=Ms("defaultTextSpacing")+u,f=o.length;o.forEach((function(l,s){var u=r.top+r.height,p=c.y<=u,h=c.y+d>u;if(!p)return!1;if(h){var m=e.textSpace||r.width-Ms("cellPaddingX")-10,v=Ch(s!==f-1?l+o[s+1]:l,m,14,i);n.drawSingleLineText(v,c,a,i,t)}else n.drawSingleLineText(l,c,a,!1,t);c.y+=d}))}else{var p=e.textSpace||r.width-Ms("cellPaddingX"),h=Ch(o,p,14,i);this.drawSingleLineText(h,c,a,i,t)}s&&t.restore()},drawSingleLineText:function(e,t,n,r,o){var a=t.x,i=t.y;o.fillText(e,a,i)},getXCoord:function(e,t,n){var r=0;switch(n){case"center":r=e+t/2;break;case"right":r=e+t-Ms("cellPaddingX");break;default:r=e+Ms("cellPaddingX")}return r},getYCoord:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,a=r.vAlign||"middle",i=Array.isArray(o)?o.length:1,l=i>1?Ms("defaultTextSpacing"):0,c=Ms("defaultFontSize");switch(a){case"bottom":n=e+t-(i-1)*(c+l)-Ms("cellPaddingY")-l;break;case"middle":n=e+t/2-(i-1)*(c+l)/2;break;default:n=e+Ms("cellPaddingY")+l}return n},getTextWidth:function(e){if(!Array.isArray(e))return Eh(e,Ms("defaultFontSize"),Ms("defaultFont"));var t="";return e.forEach((function(e){e.length>t.length&&(t=e)})),Eh(t,Ms("defaultFontSize"),Ms("defaultFont"))}}),Ah=function(){function e(){d()(this,e),this.dataStore=[],this.top=0}return p()(e,[{key:"push",value:function(e){this.dataStore[this.top++]=e}},{key:"pop",value:function(){var e=this.dataStore[this.top-1];return this.top--,e}},{key:"peek",value:function(){return this.dataStore[this.top-1]}},{key:"clear",value:function(){this.dataStore=[],this.top=0}},{key:"length",value:function(){return this.top}},{key:"isEmpty",value:function(){return 0===this.top}},{key:"toString",value:function(){return this.dataStore.toString()}}]),e}(),Th=["+","-","/","*","(",")"],Lh={},Dh=function(e,t){return t.includes(e)};function Ph(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ph(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ph(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nh=zs.default.fontSize,Ih=function(e,t){var n=[e.left,e.top,e.left+e.width,e.top+e.height],r=n[0],o=n[1],a=n[2],i=n[3],l=[t.left,t.top,t.left+t.width,t.top+t.height];return r>=l[0]&&o>=l[1]&&a<=l[2]&&i<=l[3]},Fh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length;if(!e||!t)return[0,0,0,0];if(1===t)return new Array(4).fill(e[0]);if(2===t){var n=ie()(e,2),r=n[0],o=n[1];return[r,o,r,o]}if(3===t){var a=ie()(e,3),i=a[0],l=a[1],c=a[2];return[i,l,c,l]}return e},Bh=function(e,t){var n=Fh(t),r=ie()(n,4),o=r[0],a=r[1],i=r[2],l=r[3];ed(void 0!==e.left,"getInnerBox计算rect: rect.left 不存在"),ed(void 0!==e.top,"getInnerBox计算rect: rect.top 不存在"),ed(void 0!==e.width,"getInnerBox计算rect: rect.width 不存在"),ed(void 0!==e.height,"getInnerBox计算rect: rect.height 不存在");var c=e.left+l,s=e.top+o,u=e.width-a-l,d=e.height-o-i;return ed(![c,s,u,d].some(isNaN),"getInnerBox计算rect出现了非number"),{left:c,top:s,width:u,height:d}},Vh=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.top,o=e.height,a=Fh(n.padding),i=ie()(a,3),l=i[0],c=i[2],s=r+l,u=o-c-l,d=s+.5*(u-t.height);return d},Hh=new(function(){function e(){d()(this,e),s()(this,"_bbox",null),s()(this,"_nodes",null),s()(this,"_isTextCliped",!1),s()(this,"_contentWrapRect",null),s()(this,"_configOptions",{isWrapLayout:!1,lineSpace:2,blockSpace:2,nodeMaxHeight:26}),s()(this,"paintBlocks",[]),s()(this,"contentBox",{})}return p()(e,[{key:"calc",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._bbox=n,this._nodes=t,this._configOptions=Object.assign(this._configOptions,r),this.paintBlocks=[],Array.isArray(this._nodes)&&(this.checkValid(),this._nodes.forEach((function(t){e.getInlineBoxMaxWidth(t,n),e.setInlineBoxWidth(t)})),this.calLayout()),this.contentBox=Mh(Mh({},this._bbox),{},{height:this._configOptions.isWrapLayout?this.contentBox.height:this._bbox.height}),{paintBlocks:this.paintBlocks,contentBox:this.contentBox}}},{key:"checkValid",value:function(){var e=this;this._nodes.forEach((function(t){t.height=t.height||e._bbox.height,t.nodes=t.nodes.filter((function(e){return e&&"text"!==e.type&&ed(void 0!==e.height&&void 0!==e.width,"非text元素需要配置width、height"),!!e}))}))}},{key:"correctionNodeWH",value:function(e){var t=this._configOptions.nodeMaxHeight;e.width=e.width||0,e.height=e.height||0,e.height=Math.min(t,e.height)}},{key:"getInlineBoxMaxWidth",value:function(e,t){var n=this;e&&(this.calcTextMaxWidth(e,t),e.nodes&&Array.isArray(e.nodes)&&e.nodes.forEach((function(t){return n.getInlineBoxMaxWidth(t,e)})))}},{key:"calcTextMaxWidth",value:function(e,t){var n=t.width||t.maxWidth,r=Fh(t.padding),o=ie()(r,4),a=n-o[1]-o[3];if(e.maxWidth=Math.floor(e.width||this._parseVal(e.maxWidth,a)||a),ed(!isNaN(e.maxWidth),"给每个元素parse最大宽度 maxWidth 非数值错误!"),"text"===e.type){var i=e.val,l=Eh(i),c=Nh,s=Ch(i,e.maxWidth,c,l);e.val=s,e.width=Math.round(Math.min(l,e.maxWidth)),e.height=Nh,this._isTextCliped=l>=e.maxWidth,this._isTextCliped&&(e.maxWidth-=e.marginRight||0)}}},{key:"setInlineBoxWidth",value:function(e){var t=Fh(e.padding),n=ie()(t,4),r=n[1],o=n[3];if(this._isTextCliped)e.width=e.maxWidth,e.nodes.forEach((function(e){e.width=e.maxWidth}));else{var a=e.nodes.reduce((function(e,t){return e+(t.width+(t.marginRight||0))}),0);e.width=a,e.width+=r+o}ed(!isNaN(e.width),"计算inlineBox width 非数值错误!")}},{key:"calLayout",value:function(){var e=this,t=this._configOptions,n=t.isWrapLayout,r=t.blockSpace,o=t.lineSpace,a=t.nodeMaxHeight,i=this._bbox,l=i.width,c=i.left,s=i.top,u=i.height,d=function(e){ed(!isNaN(e.width),"callLayout width 非数值错误!"),ed(!isNaN(e.left),"callLayout left 非数值错误!"),ed(!isNaN(e.top),"callLayout top 非数值错误!")};if(!n&&u<=a)for(var f=0,p=this._nodes.length,h=0;h<p;h++){var m=this._nodes[h];this.correctionNodeWH(m);var v=m.width;if(m.left=c+f,m.top=Vh(this._bbox,m),d(m),f+v+r>=l){this._nodes=this._nodes.slice(0,h+1),this.transLastNodeWhenHasMore(l,f);break}f+=v+r}else{for(var g=0,b=1,y=0,w=this._nodes.length,k=0;k<w;k++){var x,E=this._nodes[k];this.correctionNodeWH(E);var C=E.height,O=E.width;if(y=b*C+(b-1)*o,E.left=c+g,E.top=s+y-C,g+=O+r,!n&&E.top>=s+u){this._nodes=this._nodes.slice(0,k+1);break}g+((null===(x=this._nodes[k+1])||void 0===x?void 0:x.width)||0)+r>l&&(b++,g=0),d(E)}this.contentBox.height=y}this._nodes.forEach((function(t){e.getLayoutInlineBox(t)}))}},{key:"transLastNodeWhenHasMore",value:function(e,t){var n=e-t,r=this._nodes[this._nodes.length-1]||{},o=r.width-n,a=(r.nodes||[]).find((function(e){return"text"===e.type})),i=Ch(a.val,a.width-o-4,Nh,Eh(a.val));a.val=i}},{key:"getLayoutInlineBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nodes,n=void 0===t?[]:t,r=e.padding;if(n&&Array.isArray(n)){var o=Bh(e,r),a=0;n.forEach((function(t){t.left=Math.floor(o.left+a),a+=t.width+(t.marginRight||0),t.top=Vh(o,t),t.value=e.values})),e.background&&this.paintBlocks.push({type:"background",background:e.background,backgroundRadius:e.backgroundRadius||0,left:Math.floor(e.left),top:e.top,width:e.width,height:e.height,value:e.values}),this.paintBlocks=this.paintBlocks.concat(n)}}},{key:"_parseVal",value:function(e,t){if(!e)return null;if(Q()(e)&&e.startsWith("calc(")){if((e=e.replace(/^(\s|calc\()+|(\s|\))+$/g,"")).includes("%")){var n=e.split("%"),r=ie()(n,2),o=r[0],a=r[1];e=(o=parseInt(o,10)/100*t)+a}return function(e){Lh["+"]=100,Lh["-"]=100,Lh["*"]=200,Lh["/"]=200,Lh["("]=1e3,Lh[")"]=0;for(var t=e.split(" "),n=new Ah,r=[];0!==t.length;)if(""!==t[0]){if(Dh(t[0],Th))if("("===t[0])n.push(t[0]);else if(")"===t[0]){for(;"("!==n.peek();)r.push(n.pop());n.pop()}else if(n.isEmpty())n.push(t[0]);else if(Lh[t[0]]>Lh[n.peek()])n.push(t[0]);else{for(;!n.isEmpty()&&Lh[n.peek()]>=Lh[t[0]]&&"("!==n.peek();)r.push(n.pop());n.push(t[0])}else r.push(t[0]);t.shift()}else t.shift();for(;!n.isEmpty();)r.push(n.pop());return function(e){for(var t=new Ah;0!==e.length;){if(Dh(e[0],Th)){var n=t.pop(),r=t.peek(),o=0;switch(e[0]){case"+":o=Number(r)+Number(n);break;case"-":o=Number(r)-Number(n);break;case"*":o=Number(r)*Number(n);break;case"/":o=Number(r)/Number(n);break;default:return e[0]}t.pop(),t.push(o)}else t.push(e[0]);e.shift()}var a=t.pop();return isNaN(a)&&(a="错误"),a===1/0&&(a="无穷"),a}(r)}(e)}}}]),e}()),zh=[],qh=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pool",n=arguments.length>1?arguments[1]:void 0;d()(this,e),s()(this,"_dicKey",Symbol("pool"));var r=zh.find((function(e){return e._name===t}));if(r)return r;this._name=t,this.destroyFunc=n,this._pool={},zh.push(this)}return p()(e,[{key:"get",value:function(e){return e=void 0===e?this._dicKey:e,this._get(e)}},{key:"recover",value:function(e,t){"function"==typeof this.destroyFunc&&this.destroyFunc(e),this._pool[t]=e}},{key:"clear",value:function(){this._pool={}}},{key:"getList",value:function(){return Object.values(this._pool)}},{key:"_get",value:function(e){return this._pool[e]||(this._pool[e]=Object.create(null)),this._pool[e]}},{key:"_set",value:function(e,t){this._pool[e]=t}}]),e}())("cell-layout",(function(e){e.innerBox=null,e.contentBox=null,e.wrapBox=null,e.operator=null,e.paintBlocks=null})),Uh=function(e,t,n,r){var o=e(t,n),a=qh.get(),i=o.bbox;if(i.height<=0||i.width<=0)return a.contentBox=a.wrapBox=i,a;var l,c,s=Fh(o.padding),u=Bh(i,s),d=(l=u,(c=o.operator)?{left:l.left,top:l.top,width:l.width-c.width,height:l.height}:l),f=Hh.calc(o.nodes,d,r),p=f.paintBlocks,h=f.contentBox,m=Math.max(h.height+s[0]+s[2],i.height);return a.contentBox=h,a.wrapBox=i,a.wrapBox.height=m,o.operator&&(a.operator=o.operator,a.operator.left=u.left+u.width-o.operator.width,a.operator.top=u.top),a.paintBlocks=p,a},Gh=function(e){return qh.recover(e)},Wh={"#FFA39E":"#FBD3D0","#FFEC3D":"#F7E9BC","#91D5FF":"#C4E4F5","#FFADD2":"#E4F7D2","#FFD591":"#E8D5CB","#87E8DE":"#C0EBE5","#D3ADF7":"#DBCEF5","#FFBB96":"#E8E8E8","#B7EB8F":"#E5EDCA","#ADC6FF":"#C2CDF0"},Yh=["#F1A2AB","#F5D480","#C1E77E","#82EDC0","#81DFE4","#81BBF8","#96A7FD","#BA9BF2","#DBC39A","#BEC0BF"],$h=function(e){return lf(e)&&e.startsWith("$label-back-color:")},Kh=[["$label-back-color:0-0","$label-back-color:0-1","$label-back-color:0-2","$label-back-color:0-3","$label-back-color:0-4"],["$label-back-color:1-0","$label-back-color:1-1","$label-back-color:1-2","$label-back-color:1-3","$label-back-color:1-4"],["$label-back-color:2-0","$label-back-color:2-1","$label-back-color:2-2","$label-back-color:2-3","$label-back-color:2-4"],["$label-back-color:3-0","$label-back-color:3-1","$label-back-color:3-2","$label-back-color:3-3","$label-back-color:3-4"]],Xh={labelColor:[["@yuque-green-1","@yellow-1","@blue-1","@yuque-grey-3","@red-1"],["@brown-1","@cyan-1","@purple-1","@pea-green-1","@sea-blue-1"],["@red-3","@yellow-3","@pea-green-3","@yuque-green-3","@cyan-3"],["@blue-3","@sea-blue-3","@purple-3","@brown-3","@yuque-grey-6"]],labelTextColor:[["@yuque-green-9","@yellow-9","@blue-9","@yuque-grey-9","@red-9"],["@brown-9","@cyan-9","@purple-9","@pea-green-9","@sea-blue-9"],["@red-9","@yellow-9","@pea-green-9","@yuque-green-9","@cyan-9"],["@blue-9","@sea-blue-9","@purple-9","@brown-9","@yuque-grey-9"]]},Zh=function(e){if(e.startsWith("$label-back-color:")){var t=e.split("$label-back-color:"),n=ie()(t,2);n[0];var r=n[1].split("-"),o=ie()(r,2),a=o[0],i=o[1],l=[Number(a),Number(i)];return[l[0],l[1]]}return[0,0]},Qh=new Map,Jh={getByIndex:function(e){var t=nt()(Kh);return t[e%t.length]},getRenderColor:function(e,t){var n="labelColor:".concat(Hs(),":").concat(e),r=Qh.get(n);if(r)return r;t||(t=Bs());var o,a=this.getColor(e);return o=$h(a)?function(e,t){if(!e.startsWith("$label-back-color:"))return As(t,"@yuque-color-bg-primary");var n=Zh(e),r=ie()(n,2),o=r[0],a=r[1];return As(t,Xh.labelColor[o][a]||"@yuque-color-bg-primary")}(a,t):As(t,a),Qh.set(n,o),o},getColor:function(e){return lf(e)?$h(e)?e:Wh[e.toUpperCase()]||e:""},getRenderTextColor:function(e,t){var n="labelTextColor:".concat(Hs(),":").concat(e),r=Qh.get(n);if(r)return r;t||(t=Bs());var o;return o=e?$h(e)?function(e,t){if(!e.startsWith("$label-back-color:"))return As(t,"@yuque-color-text-primary");var n=Zh(e),r=ie()(n,2),o=r[0],a=r[1];return As(t,Xh.labelTextColor[o][a]||"@yuque-color-text-primary")}(e,t):Vs()||et()(e).getBrightness()<200&&!Yh.includes(e)?"#fff":"rgba(0,0,0,0.65)":As(t,"@yuque-color-text-primary"),Qh.set(n,o),o},getNextColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.getColor(e),n=nt()(Kh),r=n.indexOf(t);return r>=0?n[(r+1)%n.length]:n[0]}};function em(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tm(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.bbox,r=e.selectedList,o=e.isActive,a=e.readOnly,i=wc(r),l=o&&!a;return nm(nm({bbox:n,padding:[6]},l&&{operator:{type:"icon",icon:"dropdownIcon",width:24,height:24}}),i&&{nodes:i.map((function(e){return{padding:[4],background:Jh.getRenderColor(e.color,t.themeManager),backgroundRadius:4,maxWidth:"100%",values:e,nodes:[{type:"text",color:Jh.getRenderTextColor(e.color,t.themeManager),maxWidth:l?"calc(100% - 20)":"100%",val:e.value,marginRight:l?4:0},l?{type:"icon",icon:"closeIcon",width:20,height:20,fillColor:e.color}:null]}}))})},om=null,am=Object.assign({},jh,{addAdditionalData:function(e,t){var n;e.clip=!0,e.blankCell=!1,e.readOnly=t.kernel.readOnly;var r=e.colConfigs,o=t.getSelections();e.isActive=o.activeRow===e.row&&o.activeCol===e.col;var a=e.value||"";return"string"==typeof a&&(a=[a]),e.selectedList=null===(n=r.options)||void 0===n?void 0:n.filter((function(e){return a.includes(e.id)})),e},addHitAreas:function(e,t){var n=this.getExtraAreas(t),r=[].concat(me()(e),me()(n));return Gh(om),om=null,r},getExtraAreas:function(e){var t=e.row,n=e.col,r=[],o=om,a=o.paintBlocks,i=o.operator,l=o.contentBox,c=o.wrapBox;if(i&&(r.push({bbox:c,info:{type:"selectCellViewer",row:t,col:n,value:e.value,x:c.left,y:c.top}}),r.push({bbox:{left:i.left,top:i.top,width:i.width,height:i.height},info:{type:"selectDropDownIcon",row:t,col:n,value:e.value,x:i.left,y:i.top}})),!a||!a.length)return r;var s,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return em(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?em(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(a);try{for(u.s();!(s=u.n()).done;){var d=s.value,f="icon"===d.type&&"closeIcon"===d.icon,p=Ih(d,l);if(f&&p){var h={left:d.left,top:d.top,width:d.width,height:d.height},m={type:"selectCloseIcon",row:t,col:n,value:d,x:d.left,y:d.top};r.push({bbox:h,info:m})}}}catch(e){u.e(e)}finally{u.f()}return r},drawCell:function(e,t,n){var r=this,o=n.viewportHelper.shouldCellRenderNoActive(),a=Uh(rm,e,this.engine,{isWrapLayout:e.isActive&&!o,blockSpace:4,lineSpace:6}),i=e.isActive;i&&n.viewportHelper.setCellPreviewerRect(a.wrapBox),om=a;var l=a.paintBlocks,c=a.operator,s=a.contentBox,u=a.wrapBox;this.drawNode(t,n,nm(nm({},u),{},{background:i&&Ms(this.engine.themeManager,"@yuque-color-bg-primary"),border:!o&&i&&Ms(this.engine.themeManager,"actived")})),this.clipCtx(t,s),Array.isArray(l)&&l.forEach((function(e){return r.drawNode(t,n,e)})),t.restore(),c&&this.drawNode(t,n,c)},drawNode:function(e,t,n){if(n){var r=n.left,o=n.top,a=n.width,i=n.height;n.background&&(t.canvasRenderer.useStyle({fillStyle:js(this.engine.themeManager,n.background)}),n.backgroundRadius?this.drawRoundRect(e,t,n,n.backgroundRadius):e.fillRect(r,o,a,i)),n.border&&(t.canvasRenderer.useStyle(n.border),e.strokeRect(n.left,n.top,n.width,n.height),e.fillRect(r,o,a,i)),"text"===n.type?this.drawText(e,n,t):"icon"===n.type&&this.drawIcon(e,t,n)}},drawIcon:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"dropdownIcon"===n.icon?this.drawDropdownIcon(e,n.left,n.top,t,r.hover):"closeIcon"===n.icon&&this.drawCloseIcon(e,n,t,r.hover)},drawRoundRect:function(e,t,n,r){var o=n.left,a=n.top,i=n.width,l=n.height;e.beginPath(),e.moveTo(o,a+l/2),e.arcTo(o,a,o+i/2,a,r),e.arcTo(o+i,a,o+i,a+l/2,r),e.arcTo(o+i,a+l,o+i/2,a+l,r),e.arcTo(o,a+l,o,a+l/2,r),e.closePath(),e.fill()},drawDropdownIcon:function(e,t,n,r,o){var a=Ms("mention.bgSize"),i=Ms("mention.bgRadius"),l=Ms("mention.dropdownIconPaddingTop"),c=Ms("mention.dropdownIconPaddingLeft");r.canvasRenderer.useStyle(Ms(this.engine.themeManager,o?"mention.bg":"mention.bgNormal")),e.beginPath(),e.moveTo(t,n+a/2),e.arcTo(t,n,t+a/2,n,i),e.arcTo(t+a,n,t+a,n+a/2,i),e.arcTo(t+a,n+a,t+a/2,n+a,i),e.arcTo(t,n+a,t,n+a/2,i),e.closePath(),e.fill();var s=t+c,u=n+l;e.fillStyle=Ms(this.engine.themeManager,"@yuque-color-icon-primary"),e.globalAlpha=o?.85:.5,e.beginPath(),e.moveTo(s,u),e.lineTo(s+8,u),e.lineTo(s+4,u+5),e.closePath(),e.fill(),e.globalAlpha=1},drawCloseIcon:function(e,t,n,r){var o=Ms("mention.closeIconPadding"),a=t.left,i=t.top,l=t.width,c=t.height;n.canvasRenderer.useStyle(r?{fillStyle:Ms(this.engine.themeManager,"rgba(0,0,0,.12)")}:{fillStyle:Jh.getRenderColor(t.fillColor||"@yuque-color-bg-primary",this.engine.themeManager)}),e.beginPath(),e.moveTo(a,i+c/2),e.arcTo(a,i,a+l/2,i,4),e.arcTo(a+l,i,a+l,i+c/2,4),e.arcTo(a+l,i+c,a+l/2,i+c,4),e.arcTo(a,i+c,a,i+c/2,4),e.closePath(),e.fill(),e.beginPath(),n.canvasRenderer.useStyle({lineWidth:1,strokeStyle:Ms(this.engine.themeManager,"@yuque-color-icon-primary")}),e.moveTo(a+o,i+o),e.lineTo(a+l-o,i+l-o),e.moveTo(a+l-o,i+o),e.lineTo(a+o,i+l-o),e.stroke()},drawText:function(e,t,n){var r=t.color;n.canvasRenderer.useStyle({fillStyle:Ms(this.engine.themeManager,r)||Ms(this.engine.themeManager,"@yuque-color-text-primary"),textBaseLine:"top"}),e.fillText(t.val,t.left,t.top+7)}}),im=[Image,HTMLCanvasElement,SVGImageElement],lm=Object.assign({},jh,{fileIconHeight:null,fileIconWidth:null,cellPaddingX:null,cellPaddingY:null,rowHeight:null,failIcon:null,addAdditionalData:function(e,t){e.readOnly=t.kernel.readOnly;var n=t.getSelections();return e.isActive=!e.readOnly&&n.activeRow===e.row&&n.activeCol===e.col,e.blankCell=!1,e},initCellPadding:function(){this.cellPaddingY&&this.cellPaddingX||(this.cellPaddingX=Ms("image.cellPaddingX"),this.cellPaddingY=Ms("image.cellPaddingY"))},initRenderFailIcon:function(e){this.failIcon||(this.failIcon=e.canvasRenderer.widgetIcons.renderFailImage)},addHitAreas:function(e,t){if(t.value){var n=this.getFileAreas(t);e=[].concat(me()(e),me()(n))}if(!t.isActive)return e;var r=this.getUploadIconArea(t);return e.push(r),e},getUploadIconArea:function(e){var t=e.bbox,n=e.row,r=e.col,o=t.left+t.width-26-6,a=t.top;return{bbox:{left:o,top:a,width:32,height:t.height},info:{value:e.value,type:"uploadFileIcon",row:n,col:r,x:o,y:a}}},drawCell:function(e,t,n){var r=e.value,o=e.bbox,a=e.isActive;this.initRenderFailIcon(n),r&&(this.initCellPadding(),this.fileIconWidth=Ms("fileIconWidth"),this.fileIconHeight=Ms("fileIconHeight"),this.rowHeight=Ms("rowHeight"),this.drawFileCell(r,t,o,n)),a&&this.drawUploadFileIcon(o,t,n)},drawUploadFileIcon:function(e,t,n,r){this.initCellPadding(),this.drawIconContainer(e,t),this.drawIconBg(e,t,r),this.drawIcon(e,t,n)},drawIconContainer:function(e,t){var n=e.left+e.width-26-6-1,r=e.top+2,o=e.height-2;t.save(),t.fillStyle=Ms(this.engine.themeManager,"@yuque-color-bg-primary"),t.fillRect(n,r,32,o),t.restore()},drawIconBg:function(e,t,n){var r=e.left+e.width-26-3,o=e.top+this.cellPaddingY+1,a=e.height-2*this.cellPaddingY;this.drawBorder(t,r,o,26,a,4),t.fillStyle=Ms(this.engine.themeManager,n?"@yuque-color-icon-hover":"@yuque-color-bg-primary-hover"),t.fillRect(r,o,26,a),t.restore()},drawBorder:function(e,t,n,r,o,a){var i=a||2;e.save(),e.beginPath(),e.moveTo(t,n+o/2),e.arcTo(t,n,t+r/2,n,i),e.arcTo(t+r,n,t+r,n+o/2,i),e.arcTo(t+r,n+o,t+r/2,n+o,i),e.arcTo(t,n+o,t,n+o/2,i),e.clip()},drawIcon:function(e,t,n){var r=n.canvasRenderer.widgetIcons.upload;if(r){var o=e.top+e.height/2-6+1,a=e.left+e.width-6-3-13;try{t.drawImage(r,a,o,12,12)}catch(e){}}},drawFileCell:function(e,t,n,r){var o=this;this.drawFileContainer(t,n),e.forEach((function(e,a){return o.drawSignalFile(e,t,r,n,a)})),t.restore()},drawFileContainer:function(e,t){e.save();var n=t.width,r=t.height,o=t.left,a=t.top;e.beginPath(),e.rect(o,a,n,r),e.clip()},drawSignalFile:function(e,t,n,r,o){var a=this.cellPaddingX,i=this.rowHeight,l=this.fileIconWidth,c=this.fileIconHeight,s=a*(o+1)+l*o+r.left,u=r.top+i/2-c/2,d=n.canvasRenderer.fileTypeIcons[e.fileKey];if(d)if(this.iconCanBeRender(d))try{t.drawImage(d,s,u,l,c)}catch(e){}else this.renderFailIcon(t,{x:s,y:u,w:l,h:c})},renderFailIcon:function(e,t){var n=t.x,r=t.y,o=t.w,a=t.h;if(n&&r&&o&&a&&this.failIcon){this.drawBorder(e,n,r,o,a);var i=n+o/2-13,l=r+a/2-13;try{e.drawImage(this.failIcon,i,l,26,26)}catch(e){}e.restore()}},iconCanBeRender:function(e){for(var t=0,n=im;t<n.length;t++)if(e instanceof n[t])return!0;return!1},getFileAreas:function(e){var t=e.row,n=e.col,r=e.value,o=e.bbox,a=this.cellPaddingX,i=this.cellPaddingY,l=this.fileIconWidth,c=this.fileIconHeight,s=[];return r.forEach((function(e,r){var u=a*(r+1)+l*r+o.left,d=o.top+i;s.push({bbox:{left:u,top:d,width:l,height:c},info:{type:"fileLinkIcon",row:t,col:n,value:e,x:u,y:d,w:l,h:c}})})),s}});function cm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cm(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var um=[Image,HTMLCanvasElement,SVGImageElement],dm=Object.assign({},lm,{cellPaddingX:null,cellPaddingY:null,renderFailIcon:null,addAdditionalData:function(e,t){e.readOnly=t.kernel.readOnly;var n=t.getSelections();return e.isActive=!e.readOnly&&n.activeRow===e.row&&n.activeCol===e.col,e.blankCell=!1,e},addHitAreas:function(e,t){if(t.value){var n=this.getImageArea(t);e=[].concat(me()(e),[n])}if(!t.isActive)return e;var r=this.getUploadIconArea(t);return e.push(r),e},getUploadIconArea:function(e){var t=e.bbox,n=e.row,r=e.col,o=t.left+t.width-26-6,a=t.top;return{bbox:{width:32,height:t.height,left:o,top:a},info:{value:e.value,type:"uploadFileIcon",row:n,col:r,x:o,y:a}}},initCellPadding:function(){this.cellPaddingY&&this.cellPaddingX||(this.cellPaddingX=Ms("image.cellPaddingX"),this.cellPaddingY=Ms("image.cellPaddingY"))},initRenderFailIcon:function(e){this.renderFailIcon||(this.renderFailIcon=e.canvasRenderer.widgetIcons.renderFailImage)},calculateImagePosition:function(e,t){var n=[];this.initCellPadding();for(var r=0;r<e.length;r++){var o=e[r],a=this.calculateImageXY(r,t,0!==r&&n[r-1]),i=this.calculateImageDisplayWH(o,t);if(n.push(sm(sm({},a),i)),a.x>t.left+t.width)return n}return n},calculateImageXY:function(e,t,n){if(0===e)return{x:t.left+this.cellPaddingX,y:t.top+this.cellPaddingY};var r=n.x,o=n.y;return{x:r+n.w+this.cellPaddingX,y:o}},calculateImageDisplayWH:function(e,t){(e=e||{}).width||(e.width=300),e.height||(e.height=400);var n=t.width-2*this.cellPaddingX,r=t.height-2*this.cellPaddingY,o=n/e.width*e.height,a=r/e.height*e.width;return o<t.height?{w:n,h:o}:{w:a,h:r}},drawCell:function(e,t,n){var r=e.value,o=e.bbox,a=e.isActive;this.initRenderFailIcon(n);var i=this.calculateImagePosition(r,o,n),l=n.canvasRenderer;this.drawImageCell(l,t,o,r,i),a&&this.drawUploadFileIcon(o,t,n)},drawUploadFileIcon:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.initCellPadding(),this.drawIconContainer(e,t),this.drawIconBg(e,t,r),this.drawIcon(e,t,n)},drawIconContainer:function(e,t){var n=e.left+e.width-26-6-1,r=e.top+2,o=e.height-2;t.save(),t.fillStyle=Ms(this.engine.themeManager,"@yuque-color-bg-primary"),t.fillRect(n,r,32,o),t.restore()},drawIconBg:function(e,t,n){var r=e.left+e.width-26-3,o=e.top+this.cellPaddingY+1,a=e.height-2*this.cellPaddingY;this.drawBorder(t,r,o,26,a,4),t.fillStyle=Ms(this.engine.themeManager,n?"@yuque-color-icon-hover":"@yuque-color-bg-primary-hover"),t.fillRect(r,o,26,a),t.restore()},drawIcon:function(e,t,n){var r=n.canvasRenderer.widgetIcons.upload;if(r){var o=e.top+e.height/2-6+1,a=e.left+e.width-6-3-13;try{t.drawImage(r,a,o,12,12)}catch(e){}}},drawImageCell:function(e,t,n,r,o){var a=this;this.drawImageContainer(t,n),o.forEach((function(o,i){var l=r[i];a.drawSignalImage(l,e,t,n,o)})),t.restore()},drawImageContainer:function(e,t){e.save();var n=t.width,r=t.height,o=t.left,a=t.top;e.beginPath(),e.rect(o,a,n,r),e.clip()},drawSignalImage:function(e,t,n,r,o){var a=t.images[e.src];a&&a.image&&(a.width>=r.width||a.height>=r.height||a.isMaxSize)?this.drawImage(n,a.image,o):!e.src||a&&(a.loading||a.error)||t.createImageCache(e.src,r,e.width,e.height)},drawImage:function(e,t,n){if(t){if(!this.imageCanBeRender(t))return this.drawRenderFailImage(e,n);var r=n.x,o=n.y,a=n.w,i=n.h;this.drawBorder(e,r,o,a,i);try{e.drawImage(t,r,o,a,i)}catch(e){}e.restore()}},drawRenderFailImage:function(e,t){var n=t.x,r=t.y,o=t.w,a=t.h;if(n&&r&&o&&a&&this.renderFailIcon){this.drawBorder(e,n,r,o,a);var i=n+o/2-13,l=r+a/2-13;try{e.drawImage(this.renderFailIcon,i,l,26,26)}catch(e){}e.restore()}},imageCanBeRender:function(e){for(var t=0,n=um;t<n.length;t++)if(e instanceof n[t])return!0;return!1},drawBorder:function(e,t,n,r,o,a){var i=a||2;e.save(),e.beginPath(),e.moveTo(t,n+o/2),e.arcTo(t,n,t+r/2,n,i),e.arcTo(t+r,n,t+r,n+o/2,i),e.arcTo(t+r,n+o,t+r/2,n+o,i),e.arcTo(t,n+o,t,n+o/2,i),e.clip()},getImageArea:function(e){var t=e.value,n=e.bbox,r=e.row,o=e.col;return this.calculateImagePosition(t,n).map((function(e,n){var a=e.x,i=e.y,l=e.w,c=e.h;return{bbox:{left:a,top:i,width:l,height:c},info:{type:"imageLinkIcon",row:r,col:o,value:t[n],list:t,index:n,x:a,y:i,w:l,h:c}}}))}}),fm=Object.assign({},jh,{addAdditionalData:function(e,t){e.clip=!0,e.blankCell=!1,e.readOnly=t.kernel.readOnly;var n=t.getSelections();return e.isActive=!e.readOnly&&n.activeRow===e.row&&n.activeCol===e.col,e},addHitAreas:function(e,t){var n=this.getLinkTextArea(t);if(e.push(n),!t.isActive)return e;var r=this.getActionIconArea(t,"linkIcon");return e.push(r),e},drawCell:function(e,t,n){if(this.drawLink(e,t,n),e.isActive){var r=this.getActionIconCoord(e);this.drawLinkIcon(t,r.x,r.y,n,!1)}},drawLink:function(e,t,n){var r=e.bbox,o=this.getLink(e);e.coord=o,n.canvasRenderer.useStyle(Ms(this.engine.themeManager,"link")),e.textSpace=r.width-Ms("cellPaddingX"),e.isActive&&(e.textSpace=e.textSpace-Ms("action.bgSize")-4),this.drawText(e,t)},drawLinkIcon:function(e,t,n,r,o){var a=r.canvasRenderer.colTypeIcons.link;a&&this.drawActionIcon(e,a,t,n,r,o)},getLink:function(e){var t=e.bbox,n=e.align;return{x:this.getXCoord(t.left,t.width,n),y:t.top+Ms("cellPaddingY")+Ms("defaultFontSize")/2,w:this.getTextWidth(e.formatterValue),h:Ms("defaultFontSize")-4}},getLinkTextArea:function(e){var t=e.row,n=e.col,r=e.value,o=this.getLink(e),a=o.x,i=o.y,l=o.w,c=o.h;return{bbox:{left:a,top:i,width:Math.min(l,e.bbox.width),height:Math.min(c,e.bbox.height)},info:{type:"linkTextIcon",row:t,col:n,value:r,x:a,y:i,w:l,h:c}}}}),pm=["http:","https:","blob:","data:","dingtalk:","ftp:","mailto:","fleamarket:","alipays:","qinpai:"];function hm(e){return"string"==typeof e&&(e=e.trim()),function(e){if("string"!=typeof e)return!1;if((e=e.toLowerCase()).startsWith("data:text/html"))return!1;var t=e.split("#")[0];return!/\s/.test(t)&&(!!pm.some((function(t){return e.startsWith(t)}))||!(!e.startsWith("./")&&!e.startsWith("/"))||e.indexOf(":")<0)}(e)?e:""}var mm=function(){function e(){d()(this,e)}return p()(e,null,[{key:"sanitizeUrl",value:function(){return hm.apply(void 0,arguments)}},{key:"isFullHttpURL",value:function(e){if("string"!=typeof e)return!1;if(!e)return!1;if(/[\u0020\n]/.test(e))return!1;try{var t=new URL(e).protocol;return"http:"===t||"https:"===t}catch(e){return!1}}}]),e}();function vm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gm(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ym=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.bbox,r=e.value,o=e.isActive,a=e.readOnly,i=e.disableEdit,l=wc(r),c=o&&!a&&!i;return bm(bm({bbox:n,padding:[6]},c&&{operator:{type:"icon",icon:"dropdownIcon",width:24,height:24}}),l&&{nodes:l.map((function(e){return{padding:[2],background:Ms(t.themeManager,"@yuque-color-bg-tertiary"),backgroundRadius:4,maxWidth:"100%",values:e,nodes:[{type:"avatar",width:20,height:20,marginRight:2,val:e.avatar_url},{type:"text",color:Ms(t.themeManager,"@yuque-color-text-primary"),maxWidth:c?"calc(100% - 40)":"calc(100% - 20)",val:e.name,marginRight:4},c?{type:"icon",icon:"closeIcon",width:20,height:20}:null]}}))})},wm=null,km=Object.assign({},jh,{addAdditionalData:function(e,t){e.clip=!0,e.blankCell=!1,e.readOnly=t.kernel.readOnly;var n=t.getSelections();return e.isActive=n.activeRow===e.row&&n.activeCol===e.col,e},addHitAreas:function(e,t){var n=this.getMentionAreas(t),r=[].concat(me()(e),me()(n));return Gh(wm),wm=null,r},drawCell:function(e,t,n){var r=this,o=n.viewportHelper.shouldCellRenderNoActive(),a=e.isActive,i=Uh(ym,e,this.engine,{isWrapLayout:e.isActive&&!o});wm=i,a&&n.viewportHelper.setCellPreviewerRect(i.wrapBox);var l=i.paintBlocks,c=i.operator,s=i.contentBox,u=i.wrapBox;this.drawNode(t,n,bm(bm({},u),{},{background:a&&Ms(this.engine.themeManager,"@yuque-color-bg-primary"),border:!o&&a&&Ms(this.engine.themeManager,"actived")})),this.clipCtx(t,s),Array.isArray(l)&&l.forEach((function(e){return r.drawNode(t,n,e)})),t.restore(),c&&this.drawNode(t,n,c)},drawNode:function(e,t,n){if(n){var r=n.left,o=n.top,a=n.width,i=n.height;n.background&&(t.canvasRenderer.useStyle({fillStyle:js(this.engine.themeManager,n.background)}),n.backgroundRadius?this.drawRoundRect(e,t,n):e.fillRect(r,o,a,i)),n.border&&(t.canvasRenderer.useStyle(n.border),e.strokeRect(n.left,n.top,n.width,n.height),e.fillRect(r,o,a,i)),"avatar"===n.type?this.drawMentionAvatar(e,n,t):"text"===n.type?this.drawMentionText(e,n,t):"icon"===n.type&&this.drawIcon(e,t,n)}},drawRoundRect:function(e,t,n){var r=n.left,o=n.top,a=n.width,i=n.height,l=i/2;e.beginPath(),e.moveTo(r,o+i/2),e.arcTo(r,o,r+a/2,o,l),e.arcTo(r+a,o,r+a,o+i/2,l),e.arcTo(r+a,o+i,r+a/2,o+i,l),e.arcTo(r,o+i,r,o+i/2,l),e.closePath(),e.fill()},drawIcon:function(e,t,n){"dropdownIcon"===n.icon?this.drawMentionIcon(e,n.left,n.top,t,!1):"closeIcon"===n.icon&&this.drawMentionClose(e,n,t,!1)},formatAvatarUrl:function(e,t){if("string"!=typeof e)return"";var n=mm.sanitizeUrl(e);return mm.isFullHttpURL(n)||!t?n:t+n},drawMentionAvatar:function(e,t,n){var r=n.canvasRenderer,o=n.kernel.options.avatarOrigin,a=t.val,i=t.left,l=t.top,c=t.width,s=t.height,u=this.formatAvatarUrl(a,o),d=r.images[u];if(d){if(d.error||d.loading)return;var f=c/2;e.save(),e.beginPath(),e.arc(i+f,l+f,f,0,2*Math.PI,!0),e.clip();try{e.drawImage(d.image,i,l,c,s)}catch(e){}e.restore()}u&&!d&&r.createImageCache(u,{width:c,height:s})},drawMentionText:function(e,t,n){n.canvasRenderer.useStyle(Ms(this.engine.themeManager,"mention.text")),e.fillText(t.val,t.left,t.top+7)},drawMentionClose:function(e,t,n,r){var o=Ms("mention.closeIconPadding"),a=t.left,i=t.top,l=t.width,c=t.height;n.canvasRenderer.useStyle(Ms(this.engine.themeManager,r?"mention.closeBg":"mention.bg"));var s=l/2;e.beginPath(),e.moveTo(a,i+c/2),e.arcTo(a,i,a+l/2,i,s),e.arcTo(a+l,i,a+l,i+c/2,s),e.arcTo(a+l,i+c,a+l/2,i+c,s),e.arcTo(a,i+c,a,i+c/2,s),e.closePath(),e.fill(),e.beginPath(),n.canvasRenderer.useStyle(Ms(this.engine.themeManager,"mention.close")),e.moveTo(a+o,i+o),e.lineTo(a+l-o,i+l-o),e.moveTo(a+l-o,i+o),e.lineTo(a+o,i+l-o),e.stroke()},drawMentionIcon:function(e,t,n,r,o){var a=Ms("mention.bgSize"),i=Ms("mention.bgRadius"),l=Ms("mention.dropdownIconPaddingTop"),c=Ms("mention.dropdownIconPaddingLeft");r.canvasRenderer.useStyle(Ms(this.engine.themeManager,o?"mention.bg":"mention.bgNormal")),e.beginPath(),e.moveTo(t,n+a/2),e.arcTo(t,n,t+a/2,n,i),e.arcTo(t+a,n,t+a,n+a/2,i),e.arcTo(t+a,n+a,t+a/2,n+a,i),e.arcTo(t,n+a,t,n+a/2,i),e.closePath(),e.fill();var s=t+c,u=n+l;e.fillStyle=Ms(this.engine.themeManager,"@black"),e.globalAlpha=o?.85:.5,e.beginPath(),e.moveTo(s,u),e.lineTo(s+8,u),e.lineTo(s+4,u+5),e.closePath(),e.fill(),e.globalAlpha=1},getMentionAreas:function(e){var t=wm,n=t.paintBlocks,r=t.operator,o=t.contentBox,a=t.wrapBox,i=e.row,l=e.col,c=[];if(r&&(c.push({bbox:a,info:{type:"mentionCellViewer",row:i,col:l,value:e.value,x:a.left,y:a.top}}),c.push({bbox:{left:r.left,top:r.top,width:r.width,height:r.height},info:{type:"mentionDropDownIcon",row:i,col:l,value:e.value,x:r.left,y:r.top}})),!n||!n.length)return c;var s,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vm(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(n);try{for(u.s();!(s=u.n()).done;){var d=s.value,f="background"===d.type&&e.isActive,p="icon"===d.type&&"closeIcon"===d.icon,h=Ih(d,o);if((f||p)&&h){var m={left:d.left,top:d.top,width:d.width,height:d.height},v={type:f?"mentionLinkIcon":p?"mentionCloseIcon":"",row:i,col:l,value:d,x:d.left,y:d.top};c.push({bbox:m,info:v})}}}catch(e){u.e(e)}finally{u.f()}return c}}),xm=Object.assign({},jh,{addAdditionalData:function(e,t){e.clip=!0,e.blankCell=!1;var n=t.getSelections();e.isActive=n.activeRow===e.row&&n.activeCol===e.col;var r=e.value;return r&&!Es(r)&&(e.error=!0),e},addHitAreas:function(e,t){var n=this.getActionIconArea(t,"emailIcon");return t.isActive&&t.value&&e.push(n),e},getCellTip:function(e){return e.error?{state:"error",stateInfo:_c("请输入有效邮箱地址")}:null},drawCell:function(e,t,n){if(this.drawEmail(e,t),e.isActive&&e.value){var r=this.getActionIconCoord(e);this.drawEmailIcon(t,r.x,r.y,n,!1)}},drawEmail:function(e,t){var n=e.bbox,r={x:this.getXCoord(n.left,n.width),y:n.top+Ms("cellPaddingY")+Ms("defaultFontSize")/2};e.coord=r,e.textSpace=n.width-Ms("cellPaddingX"),e.isActive&&(e.textSpace=e.textSpace-Ms("action.bgSize")-4),this.drawText(e,t)},drawEmailIcon:function(e,t,n,r,o){var a=r.canvasRenderer.colTypeIcons.email;a&&this.drawActionIcon(e,a,t,n,r,o)}}),Em=Object.assign({},jh,{addAdditionalData:function(e,t){e.clip=!0,e.blankCell=!1;var n=t.getSelections();e.isActive=n.activeRow===e.row&&n.activeCol===e.col;var r=e.value;return r&&!xs(r)&&(e.error=!0),e},addHitAreas:function(e,t){var n=this.getActionIconArea(t,"phoneIcon");return t.isActive&&t.value&&e.push(n),e},getCellTip:function(e){return e.error?{state:"error",stateInfo:_c("请输入有效手机号码")}:null},drawCell:function(e,t,n){if(this.drawPhone(e,t),e.isActive&&e.value){var r=this.getActionIconCoord(e);this.drawPhoneIcon(t,r.x,r.y,n,!1)}},drawPhone:function(e,t){var n=e.bbox,r={x:this.getXCoord(n.left,n.width),y:n.top+Ms("cellPaddingY")+Ms("defaultFontSize")/2};e.coord=r,e.textSpace=n.width-Ms("cellPaddingX"),e.isActive&&(e.textSpace=e.textSpace-Ms("action.bgSize")-4),this.drawText(e,t)},drawPhoneIcon:function(e,t,n,r,o){var a=r.canvasRenderer.colTypeIcons.phone;a&&this.drawActionIcon(e,a,t,n,r,o)}}),Cm=Object.assign({},Rh,{addAdditionalData:function(e){return e.blankCell=!1,e},addHitAreas:function(e,t){var n=t.row,r=t.col,o=t.value;if(t.isTitle)return e;var a=Ms("checkbox.iconSize"),i=this.getCheckboxPosition(t),l=i.x,c=i.y;return e.push({bbox:{left:l,top:c,width:a,height:a},info:{type:"checkboxIcon",row:n,col:r,value:o}}),e},drawCell:function(e,t,n){this.drawCheckbox(t,e,e.value,n,!1)},drawCheckbox:function(e,t,n,r,o){var a=this.getCheckboxPosition(t),i=a.x,l=a.y,c=Ms("checkbox.iconSize");r.canvasRenderer.useStyle(Ms(this.engine.themeManager,"checkbox.common")),o?r.canvasRenderer.useStyle(Ms(this.engine.themeManager,"checkbox.hover")):r.canvasRenderer.useStyle(Ms(this.engine.themeManager,"checkbox.default")),e.beginPath(),e.moveTo(i+2,l),e.lineTo(i+c-2,l),e.arc(i+c-2,l+2,2,-Math.PI/2,0),e.lineTo(i+c,l+c-2),e.arc(i+c-2,l+c-2,2,0,Math.PI/2),e.lineTo(i+2,l+c),e.arc(i+2,l+c-2,2,Math.PI/2,Math.PI),e.lineTo(i,l+2),e.arc(i+2,l+2,2,Math.PI,1.5*Math.PI),e.stroke(),n&&(r.canvasRenderer.useStyle(Ms(this.engine.themeManager,"checkbox.checked")),e.fill(),e.beginPath(),e.moveTo(i+3,l+8.7),e.lineTo(i+6,l+12.3),e.lineTo(i+13,l+5),e.stroke())},getCheckboxPosition:function(e){var t=e.bbox,n=e.isTitle,r=Ms("cellPaddingX"),o=Ms("cellPaddingY"),a=Ms("checkbox.iconSize");return n?{x:t.left+r,y:t.top+(t.height-a)/2}:{x:t.left+t.width/2-a/2,y:t.top+o-1}}}),Om=[jh,am,lm,dm,fm,km,xm,Em,Cm];function _m(e){switch(e){case Ac.SELECT:case Ac.MULTI_SELECT:return am;case Ac.LINK:return fm;case Ac.CHECKBOX:return Cm;case Ac.IMAGE:return dm;case Ac.FILE:return lm;case Ac.MENTION:case Ac.USER_ID:case Ac.MODIFIER_ID:return km;case Ac.PHONE:return Em;case Ac.EMAIL:return xm;default:return jh}}var Sm=function(){function e(t,n,r){var o;d()(this,e),s()(this,"viewportHelper",null),s()(this,"main",!0),this.kernel=n,this.engine=t.engine,this.viewportHelper=t.viewportHelper,this.canvasRenderer=t.canvasRenderer,this.container=t.container,this.ctx=this.canvasRenderer.getCtx(),this.area=t.area,this.renderWidgets=r,o=this.engine,Om.forEach((function(e){e.engine=o}))}return p()(e,[{key:"render",value:function(e,t,n){!n&&this.kernel.groupService.grouping&&(t.left-=.5),this.clipRect(t);var r=e.row,o=e.col,a=r+e.rowCount-1,i=o+e.colCount-1,l=this.ctx;this.main=n;var c=this.viewportHelper.getViewportMaxWidth();if(this.kernel.groupService.grouping)this.drawGroups(e,o,i,c);else{var s=this.viewportHelper.getViewData("scrollY"),u=this.viewportHelper.getScrollYBottom();for(s>u&&this.viewportHelper.setViewData("scrollY",u);r<=a;)this.viewportHelper.isFilteredRow(r)||this.drawRow(r,o,i,c),r++}l.strokeStyle=Ms(this.engine.themeManager,"default.strokeStyle"),l.lineWidth=1,l.beginPath(),l.stroke(),this.ctx.restore()}},{key:"drawGroups",value:function(e,t,n,r){var o=this,a=e.row,i=this.ctx,l=e.row+e.rowCount-1,c=this.kernel.groupService.group,s=this.kernel.readOnly,u=0,d=!0,f=this.viewportHelper.getRectByCell(0,n);f.left+f.width>r&&(d=!1),c.forEach((function(e){if(u+e.rows.length<a||u>l)u+=e.rows.length;else{if(s&&!e.collapsed){i.save(),o.canvasRenderer.useStyle(Ms(o.engine.themeManager,"default"));var c=o.viewportHelper.getRectByCell(u,t);o.renderWidgets.strokeRadiusRect(i,o.viewportHelper.getGroupRect(e,c),[Ms("groupRadius"),Ms("groupRadius"),d?Ms("groupRadius"):0,Ms("groupRadius")]),i.stroke(),i.clip()}o.drawGroupHeader(u,t,n,r,d,e),e.collapsed?u+=e.rows.length:(e.rows.forEach((function(){u<a?u++:(o.drawRow(u,t,n,r),u+=1)})),s||o.drawGroupFooter(u-1,t,r,d)),s&&!e.collapsed&&i.restore()}}))}},{key:"drawGroupHeader",value:function(e,t,n,r,o,a){var i=this.viewportHelper.getRectByCell(e,t),l=this.ctx,c=Ms("groupRadius");l.save(),l.beginPath(),this.main?l.moveTo(i.left,i.top):a.collapsed?(l.moveTo(Ms("groupPaddingX"),i.top-c),l.arc(Ms("groupPaddingX")+c,i.top-c,c,Math.PI,.5*Math.PI,!0)):l.moveTo(Ms("groupPaddingX"),i.top+1),a.collapsed&&this.main?(l.lineTo(r-c,i.top),l.arc(r-c,i.top-c,c,.5*Math.PI,0,!0)):l.lineTo(r,i.top+1),o&&this.main?(l.lineTo(r,i.top-Ms("groupHeaderHeight")+c),l.arc(r-c,i.top-Ms("groupHeaderHeight")+c,c,0,1.5*Math.PI,!0)):l.lineTo(r,i.top-Ms("groupHeaderHeight")),this.main?l.lineTo(i.left,i.top-Ms("groupHeaderHeight")):(l.lineTo(Ms("groupPaddingX")+c,i.top-Ms("groupHeaderHeight")),l.arc(Ms("groupPaddingX")+c,i.top-Ms("groupHeaderHeight")+c,c,1.5*Math.PI,Math.PI,!0)),l.closePath(),this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"default")),l.fill(),l.stroke(),l.clip(),this.drawGroupHeaderCols(a,t,n,i.top,e),l.restore()}},{key:"drawGroupHeaderCols",value:function(e,t,n,r,o){this.drawCollapse(e,r),this.drawGroupHeaderTitle(e,o),this.drawGroupHeaderStats(e,t,n,r)}},{key:"drawGroupHeaderStats",value:function(e,t,n,r){if(this.kernel.renderConfig.grid.groupStats)for(var o=this.viewportHelper,a=e.stats,i=this.ctx,l=t;l<=n;l++){var c=o.getColConfigs(l);if(!this.viewportHelper.isHiddenCol(l)&&c){var s=o.getRectByCell(0,l),u=this.activeGroupStats&&this.activeGroupStats.value===e.value&&this.activeGroupStats.id===c.id,d=this.viewportHelper.getStatTextByCol(e,l),f=Eh(d,12);if(u&&(this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"activeStats")),0!==l?i.fillRect(s.left,r-Ms("groupHeaderHeight")+1,s.width,Ms("groupHeaderHeight")-2):i.fillRect(s.left+s.width-f-40,r-Ms("groupHeaderHeight")+1,f+40,Ms("groupHeaderHeight")-2)),(u||a[c.id])&&(i.save(),i.rect(s.left,r-Ms("groupHeaderHeight"),s.width,Ms("groupHeaderHeight")),i.clip(),this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"stats")),i.fillText(d,s.left+s.width-30,r-18),i.beginPath(),i.moveTo(s.left+s.width-20,r-20),i.lineTo(s.left+s.width-12,r-20),i.lineTo(s.left+s.width-16,r-15),i.closePath(),i.fill(),i.restore()),0!==l||this.main)this.area.add({left:s.left,width:s.width,top:r-Ms("groupHeaderHeight"),height:Ms("groupHeaderHeight")},{type:"groupStats",id:c.id,value:e.value,x:s.left+s.width,y:r});else{var p=r-Ms("groupHeaderHeight");this.area.add({left:s.left+s.width-34,width:f+34,top:p,height:Ms("groupHeaderHeight")},{type:"groupStats",id:c.id,value:e.value,x:s.left+s.width,y:r})}}}}},{key:"drawGroupHeaderTitle",value:function(e,t){var n=this.viewportHelper.getRectByCell(t,0).top,r=this.kernel.renderConfig.grid.groupStats;if(!isNaN(n)){var o=this.viewportHelper.getRectByCell(0,0),a=2*Ms("groupPaddingX")+Ms("groupCollapseSize"),i=n-Ms("groupHeaderHeight"),l=this.viewportHelper.getStatTextByCol(0),c=this.ctx;c.font=Ms("defaultFont");var s=this.kernel.tableModel.getFieldsMap()[e.groupBy],u=this.viewportHelper.getColIdxByColId(e.groupBy);if(""===e.value)this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"emptyGroupHeader")),c.fillText(_c("（空）"),a,i+18);else{var d=_m(s.type),f=Ms("groupHeaderHeight"),p=r?Math.max(o.width-Eh(l,12)-Ms("groupPaddingTitleX"),Ms("groupPaddingTitleX")):this.viewportHelper.getViewportMaxWidth();d.draw(t,u,s,this,{left:a,top:i,width:p,height:f})}}}},{key:"drawCollapse",value:function(e,t,n){var r=this.ctx,o=Ms("groupPaddingX")+18;r.fillStyle=Ms(this.engine.themeManager,n?"activeDropdown.fillStyle":"@yuque-color-bg-primary"),this.renderWidgets.strokeRadiusRect(r,{left:o-10,top:t-28,width:Ms("groupCollapseSize"),height:Ms("groupCollapseSize")},2),r.fill(),r.beginPath(),e.collapsed?(r.moveTo(o-4,t-21),r.lineTo(o-4,t-13),r.lineTo(o+2,t-17)):(r.moveTo(o-4,t-20),r.lineTo(o+4,t-20),r.lineTo(o,t-15)),r.fillStyle=Ms(this.engine.themeManager,n?"default.color":"dropdown.fillStyle"),r.closePath(),r.fill(),this.area.add({left:o-6,top:t-20,width:12,height:12},{type:"groupCollapseIcon",group:e,bottom:t})}},{key:"drawGroupFooter",value:function(e,t,n,r){var o=this.viewportHelper.getRectByCell(e,t);if(this.main){var a={left:o.left,top:o.top+o.height,width:n-o.left,height:Ms("addGridRowHeight")};return this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"header")),this.ctx.fillStyle=Ms(this.engine.themeManager,"@yuque-color-bg-primary"),this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(a.left,a.top),this.ctx.lineTo(a.left+a.width,a.top),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),void this.ctx.restore()}this.renderWidgets.drawAddRow({left:Ms("groupPaddingX"),top:o.top+o.height,width:n-o.left,height:Ms("addGridRowHeight")},Ms("groupRadius"),0,e)}},{key:"drawRow",value:function(e,t,n,r){var o=this.ctx,a=this.viewportHelper.getViewData(),i=this.viewportHelper.container.clientWidth,l=Math.max(i-this.viewportHelper.totalWidth+this.viewportHelper.getScrollData().scrollX,Ms("addGridColWidth")),c=this.viewportHelper.getSelections(),s=a.rowHeight.value,u=a.scrollY,d=this.viewportHelper.getRowOffset(e)-u,f=[],p=this.viewportHelper.getRowHeaderWidth(),h=this.kernel.groupService.grouping;this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"default"));var m=this.viewportHelper.warningSelections;m&&m.row<=e&&m.row+m.rowCount>e?this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"tempState")):this.canvasRenderer.activeRow!==e&&c.activeRow!==e||this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"activeGrid")),o.fillRect(p,d,r-p,s-.5);for(var v=t;v<=n;){var g=this.viewportHelper.getColConfigs(v);if(!this.viewportHelper.isHiddenCol(v)&&g){var b=_m(g.type),y=c.activeRow===e&&c.activeCol===v,w=null;w=Uc.includes(g.type)&&y?this.viewportHelper.getRectByCell(e,v):b.draw(e,v,g,this).bbox,f.push(w.left+w.width),v++}else v++}o.strokeStyle=Ms(this.engine.themeManager,"default.strokeStyle"),o.beginPath(),f.forEach((function(e){o.moveTo(e,d),o.lineTo(e,d+s)})),o.stroke(),this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"default")),h||this.kernel.readOnly||(o.fillStyle=Ms(this.engine.themeManager,"@yuque-color-bg-primary"),o.fillRect(r,d,l,s)),o.beginPath(),o.moveTo(0,d),o.lineTo(r,d),o.lineTo(r,d+s),h||this.kernel.readOnly||(o.moveTo(r,d),o.lineTo(r+l,d),o.lineTo(r+l,d+s),o.lineTo(r,d+s)),o.stroke()}},{key:"clipRect",value:function(e){var t=this.ctx;t.save(),t.beginPath(),t.rect(e.left,e.top,e.width-.5,e.height),t.clip()}}]),e}();var Rm=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,n),e=t.call(this),s()(m()(e),"ctx",null),s()(m()(e),"layer",null),s()(m()(e),"bbox",null),s()(m()(e),"gridRenderer",null),s()(m()(e),"getNode",(function(){return e.widget})),s()(m()(e),"show",(function(){e.visible=!0,e.widget.visible=!0})),s()(m()(e),"hide",(function(){e.visible=!1,e.widget.visible=!1})),e.options=r,e.key=r.key,e.ctx=r.ctx,e.bbox=r.bbox,e.kernel=r.kernel,e.layer=e.ctx.getLayer(),e.gridRenderer=r.gridRenderer,e.engine=r.gridRenderer.engine,e.viewportHelper=e.gridRenderer.viewportHelper,e.visible=r.visible||!1,e.widget=e.initialize(),e.layer.add(e.widget),e._cancelThemeChangeListener=Ts(e.engine.themeManager,(function(){var t,n;null===(t=(n=e).reload)||void 0===t||t.call(n)})),e}return p()(n,[{key:"initialize",value:function(){}},{key:"rerender",value:function(e){this.options=e,this.bbox=Object.assign({},this.bbox,e.bbox),null!=e.bbox.x&&(this.widget.x=e.bbox.x),null!=e.bbox.y&&(this.widget.y=e.bbox.y),null!=e.bbox.width&&(this.widget.width=e.bbox.width),null!=e.bbox.height&&(this.widget.height=e.bbox.height),null!=e.visible&&(this.visible=e.visible,this.widget.visible=e.visible)}},{key:"dispose",value:function(){var e;this.hide(),this.widget.dispose(),null===(e=this._cancelThemeChange)||void 0===e||e.call(this)}}]),n}();function jm(e){return Object.assign(e,{render:function(t){var n=t.cache,r=e.widgetName+"-"+t.key;if(n.has(r)){var o=n.get(r);return o.rerender(t),o}var a=new e(t);return n.set(r,a),a}})}function Am(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Am(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Am(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lm=function(e){g()(n,Rm);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"initialize",value:function(e){var t=this;e=e||this.bbox,this.bbox.width||(this.bbox.width=20),this.bbox.height||(this.bbox.height=20);var n=ch.Rect(Tm(Tm({},this.bbox),{},{radius:4,visible:this.visible}));return n.on("mouseover",(function(){if(!t.gridRenderer.renderView.isSorting&&t.viewportHelper.isRowInSelections(t.key)&&!t.viewportHelper.isFilteredRow(t.key)){if(n.background=Ms(t.engine.themeManager,"action.bg2.fillStyle"),t.show(),t._image&&(t._image.alpha=1),t.viewportHelper.isSortable())t.layer.cursor="grab";else{var e=t.layer.getParent().getContainerRect();t.viewportHelper.getViewData("scrollY"),_h.show({top:t.bbox.y+e.y,left:t.bbox.x+e.x,width:t.bbox.width,height:t.bbox.height},_c("取消排序后，可进行拖拽"),{placement:"top",shouldHiddenOnHover:!0,shouldArrowCenter:!0}),t.layer.cursor="no-drop"}t.gridRenderer.event.canvasEvents.emit("hoverRow",t.key)}})),n.on("mouseout",(function(){t.visible&&(n.background="",t.layer.cursor="default",t._image&&(t._image.alpha=.6)),t.gridRenderer.renderView.isSorting||t.viewportHelper.isRowInSelections(t.key)&&(t.viewportHelper.isFilteredRow(t.key)||(t.viewportHelper.isSortable()||_h.hide(),t.visible||t.hide()))})),this.gridRenderer.event.canvasEvents.on("scroll",(function(){t.hide()})),this.rect=n,this.loadImage(),n}},{key:"loadImage",value:function(){var e=this;ch.Image.fromURL(Ms(this.engine.themeManager,"widgetIcons.dragger"),{x:this.bbox.x+2,y:this.bbox.y+2,width:16,height:16,alpha:.6},null,null,(function(t,n){t||(e.rect.add(n),e._image=n)}))}},{key:"reload",value:function(){this.loadImage()}},{key:"rerender",value:function(e){Me()(k()(n.prototype),"rerender",this).call(this,e),this._image&&(null!=e.bbox.x&&(this._image.x=e.bbox.x+2),null!=e.bbox.y&&(this._image.y=e.bbox.y+2))}}]),n}();s()(Lm,"widgetName","DraggableWidget");var Dm=jm(Lm);function Pm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pm(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nm=function(e){g()(n,Rm);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"initialize",value:function(){return ch.Line(Mm(Mm({},this.bbox),{},{background:Ms(this.engine.themeManager,"@black"),visible:!1}))}}]),n}();s()(Nm,"widgetName","LineWidget");var Im=jm(Nm);function Fm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fm(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vm=function(e){g()(n,Rm);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"initialize",value:function(e){var t=this;e=e||this.bbox,this.bbox.width||(this.bbox.width=20),this.bbox.height||(this.bbox.height=20);var n=ch.Rect(Bm(Bm({},this.bbox),{},{radius:4,visible:this.visible}));return n.on("mouseover",(function(){if(!t.gridRenderer.renderView.isSorting&&t.viewportHelper.isRowInSelections(t.key)&&!t.viewportHelper.isFilteredRow(t.key)){var e=t.layer.getParent().getContainerRect();_h.hide(),clearTimeout(t.tooltip),t.tooltip=setTimeout((function(){_h.show({top:t.bbox.y+e.y,left:t.bbox.x+e.x,width:t.bbox.width,height:t.bbox.height},_c("展开行 (Space)"),{placement:"top",shouldHiddenOnHover:!0,shouldArrowCenter:!0})}),1e3),n.background=Ms(t.engine.themeManager,"action.bg2.fillStyle"),t.show(),t.layer.cursor="pointer"}})),n.on("mouseout",(function(){t.tooltip&&(_h.hide(),clearTimeout(t.tooltip)),t.visible&&(n.background="",t.layer.cursor="default"),t.gridRenderer.renderView.isSorting||t.viewportHelper.isRowInSelections(t.key)&&(t.viewportHelper.isFilteredRow(t.key)||t.visible||t.hide())})),n.on("mousedown",(function(e){var r;t.tooltip&&(_h.hide(),clearTimeout(t.tooltip)),n.background="",t.layer.cursor="default",null===(r=t.options)||void 0===r||r.onMousedown(e)})),this.gridRenderer.event.canvasEvents.on("scroll",(function(){t.hide()})),this.rect=n,this.loadImage(),n}},{key:"loadImage",value:function(){var e=this;ch.Image.fromURL(Ms(this.engine.themeManager,"widgetIcons.expand"),{x:this.bbox.x+2,y:this.bbox.y+2,width:16,height:16},null,null,(function(t,n){t||(e.rect.add(n),e._image=n)}))}},{key:"reload",value:function(){this.loadImage()}},{key:"rerender",value:function(e){Me()(k()(n.prototype),"rerender",this).call(this,e),this._image&&(null!=e.bbox.x&&(this._image.x=e.bbox.x+2),null!=e.bbox.y&&(this._image.y=e.bbox.y+2))}}]),n}();s()(Vm,"widgetName","RowExpandWidget");var Hm=jm(Vm),zm=[Dm.widgetName,Im.widgetName,Hm.widgetName],qm=function(){function e(){d()(this,e),s()(this,"caches",{})}return p()(e,[{key:"getAll",value:function(){return this.caches}},{key:"keys",value:function(){return Object.keys(this.caches)}},{key:"values",value:function(){return Object.values(this.caches)}},{key:"get",value:function(e){return this.caches[e]}},{key:"has",value:function(e){return!!this.get(e)}},{key:"set",value:function(e,t){this.caches[e]=t}},{key:"del",value:function(e){delete this.caches[e]}},{key:"clear",value:function(){this.caches={}}}]),e}(),Um=function(){function e(t,n,r){d()(this,e),s()(this,"lakeCanvasRenderer",null),s()(this,"lakeCtx",null),this.engine=r,this.gridRenderer=t,this.kernel=n,this.canvasRenderer=t.canvasRenderer,this.lakeCanvasRenderer=t.lakeCanvasRenderer,this.viewportHelper=t.viewportHelper,this.area=t.area,this.ctx=this.canvasRenderer.getCtx(),this.lakeCtx=this.lakeCanvasRenderer.getCtx(),this.activeAddGridRow=!1,this.activeRow=null,this.widgetCache=new qm,this.maxRecordCount=n.options.maxRecordCount}return p()(e,[{key:"drawAddRow",value:function(e,t,n,r,o){var a=this.ctx,i=e.left,l=e.top,c=e.width,s=e.height;this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"header")),a.fillStyle=Ms(this.engine.themeManager,"@yuque-color-bg-primary"),a.save(),a.beginPath(),a.moveTo(i,l),a.lineTo(i+c,l),a.closePath(),a.fill(),a.stroke(),a.fillStyle=Ms(this.engine.themeManager,"@white"),a.strokeStyle=Ms(this.engine.themeManager,"@yuque-color-border-primary");var u=Ms("addGridRowIconSize"),d={top:l+4,left:i+6,width:u,height:u};this.strokeRadiusRect(a,d,u/2),a.fill(),a.stroke(),a.clip();var f=i+18,p=l+s/2;this.viewportHelper.getGridSize().rowCount>=this.maxRecordCount?(this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"disabledGridPlus")),this.drawPlusIcon(f,p),a.rect(i,l,c,s),a.textAlign="left",!1!==o&&a.fillText(_c("数据表已达最大行数限制"),i+Ms("rowHeaderWidth")+12,p)):(this.activeAddGridRow===r&&(this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"activeGrid")),a.fillRect(i+1,l+1,c-2,s-2)),this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"gridPlus")),!1!==o&&this.drawPlusIcon(f,p),this.area.add(d,{type:"addGridRow",row:r,bbox:d})),a.restore()}},{key:"drawDropDown",value:function(e,t){var n=this.ctx,r=e.id,o=e.x,a=e.y;if(e.id?n.fillStyle=this.viewportHelper.isSortCol(r)||this.viewportHelper.isFilterCol(r)?Ms(this.engine.themeManager,"@yuque-color-bg-secondary"):Ms(this.engine.themeManager,"@yuque-color-bg-primary"):n.fillStyle=Ms(this.engine.themeManager,"@yuque-color-bg-primary"),n.fillRect(o-8,a-10,24,24),t){var i=o-8,l=a-10;n.fillStyle=Ms(this.engine.themeManager,"@yuque-color-bg-primary-hover"),n.beginPath(),n.moveTo(i,l+12),n.arcTo(i,l,i+12,l,4),n.arcTo(i+24,l,i+24,l+12,4),n.arcTo(i+24,l+24,i+12,l+24,4),n.arcTo(i,l+24,i,l+12,4),n.closePath(),n.fill()}this.drawDropdownIcon(n,o,a,t)}},{key:"drawDropdownIcon",value:function(e,t,n,r){e.fillStyle=Ms(this.engine.themeManager,"@yuque-color-icon-primary"),e.globalAlpha=r?.85:.5,e.beginPath(),e.moveTo(t,n),e.lineTo(t+8,n),e.lineTo(t+4,n+5),e.closePath(),e.fill(),e.globalAlpha=1}},{key:"drawPlusIcon",value:function(e,t){var n=this.ctx,r=this.canvasRenderer.widgetIcons.addRow;r&&n.drawImage(r,e-8,t-8)}},{key:"strokeRadiusRect",value:function(e,t,n){Array.isArray(n)||(n=[n,n,n,n]);var r=t.left+t.width,o=t.top+t.height;e.beginPath(),n[3]?(e.moveTo(t.left,o-n[3]),e.arc(t.left+n[3],o-n[3],n[3],Math.PI,.5*Math.PI,!0)):e.moveTo(t.left,o),n[2]?(e.lineTo(r-n[2],o),e.arc(r-n[2],o-n[2],n[2],.5*Math.PI,0,!0)):e.lineTo(r,o),n[1]?(e.lineTo(r,t.top+n[1]),e.arc(r-n[1],t.top+n[1],n[1],0,1.5*Math.PI,!0)):e.lineTo(r,t.top),n[0]?(e.lineTo(t.left+n[0],t.top),e.arc(t.left+n[0],t.top+n[0],n[0],1.5*Math.PI,Math.PI,!0)):e.lineTo(t.left,t.top),e.closePath()}},{key:"drawDragger",value:function(e){var t=e.key,n=e.bbox,r=e.visible;return Dm.render({cache:this.widgetCache,key:t,ctx:this.lakeCtx,kernel:this.kernel,bbox:n,gridRenderer:this.gridRenderer,visible:r})}},{key:"drawLine",value:function(e){var t=e.key,n=e.bbox;return Im.render({cache:this.widgetCache,key:t,ctx:this.lakeCtx,kernel:this.kernel,bbox:n,gridRenderer:this.gridRenderer})}},{key:"drawRowExpand",value:function(e){var t=this,n=e.key,r=e.bbox,o=e.visible;return Hm.render({cache:this.widgetCache,key:n,ctx:this.lakeCtx,kernel:this.kernel,bbox:r,gridRenderer:this.gridRenderer,visible:o,onMousedown:function(e){0===e.button&&t.engine.emit(qs.SHOW_ROW_EDITOR,{row:n})}})}},{key:"getWidget",value:function(e,t){return this.widgetCache.get(e+"-"+t)}},{key:"hideWidget",value:function(e){var t=this;zm.forEach((function(n){var r=t.widgetCache.get("".concat(n,"-").concat(e));r&&r.hide()}))}}]),e}(),Gm=function(){function e(t,n){d()(this,e),this.gridRenderer=t,this.engine=t.engine,this.kernel=n,this.canvasRenderer=t.canvasRenderer,this.viewportHelper=t.viewportHelper,this.area=t.area,this.ctx=this.canvasRenderer.getCtx()}return p()(e,[{key:"render",value:function(e,t){var n=this.viewportHelper.getViewData("selections"),r=this.viewportHelper.getColConfigs(n.col),o=null==r?void 0:r.type,a=!(t||1===this.viewportHelper.hasFrozenCol());if(this.viewportHelper.isSelectionVisible()&&!Uc.includes(o)&&!a){var i=this.ctx;i.save(),i.beginPath(),i.rect(e.left,e.top,e.width+1,e.height),i.clip(),this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"selections")),this.hilightSeletionAll(n);var l=this.viewportHelper.getRectByCell(n.activeRow,n.activeCol);this.hilightSeletionBorder(l),i.restore()}}},{key:"renderCellPreviewer",value:function(e){var t=this.viewportHelper.getViewData("selections"),n=this.viewportHelper.getColConfigs(t.col),r=null==n?void 0:n.type;if(this.viewportHelper.isSelectionVisible()&&Uc.includes(r)){var o=this.ctx;o.save(),o.beginPath(),o.rect(e.left-1,e.top-1,e.width+1,e.height),o.clip(),this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"selections")),this.hilightSeletionAll(t),_m(n.type).draw(t.row,t.col,n,this),o.restore()}}},{key:"hilightSeletionBorder",value:function(e){this.viewportHelper.shouldCellRenderNoActive()||(this.canvasRenderer.useStyle(Ms(this.engine.themeManager,"actived")),this.ctx.strokeRect(e.left,e.top+1,e.width,e.height))}},{key:"hilightSeletionAll",value:function(e){if(1!==e.rowCount||1!==e.colCount){var t=this.viewportHelper.getRectBySelections(e,void 0,!1),n=t.left,r=t.top,o=t.width,a=t.height;this.ctx.fillRect(n,r,o,a)}}}]),e}();function Wm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ym(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wm(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Km(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$m(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xm={clickHeader:function(e){var t=this.viewportHelper.getViewData(),n=t.rowCount,r=t.colCount;if("col"===e.type&&n>0)if(this.kernel.groupService.grouping){var o=this.kernel.groupService.group[0];this.kernel.execute("setSelections",{row:0,col:e.col,rowCount:o?o.rows.length:1,colCount:1})}else this.kernel.execute("setSelections",{row:0,col:e.col,rowCount:n,colCount:1});"row"===e.type&&this.kernel.execute("setSelections",{row:e.row,col:0,rowCount:1,colCount:r})},clickCell:function(e){var t=this,n=function(){t.kernel.execute("setSelections",{row:e.row,col:e.col,rowCount:1,colCount:1}),os?t.engine.emit(qs.SHOW_ROW_EDITOR,{row:e.row}):t.viewportHelper.scrollToCell(e.row,e.col)};if("cell"===e.type)n();else if("uploadFileIcon"===e.type)this.engine.emit(qs.SHOW_FILE_MANAGE_MODAL,Ym(Ym({},e),{},{colConfigs:this.viewportHelper.getColConfigs(e.col),rowId:this.viewportHelper.getRowId(e.row)}));else if("mentionDropDownIcon"===e.type||"mentionCellViewer"===e.type)n(),this.viewportHelper.isHiddenByFrozen(e.x,e.y)||this.engine.emit(qs.TOGGLE_CELL_PREVIEWER);else if("mentionCloseIcon"===e.type){if(this.engine.readOnly)return;var r=this.viewportHelper.getColConfigs(e.col),o=this.viewportHelper.getCellValue(e.row,r);if(!Array.isArray(o))return;var a=e.value,i=o.findIndex((function(e){return e.id===a.value.id}));o.splice(i,1),this.kernel.execute("setCellValue",e.row,e.col,{value:o})}else if("mentionLinkIcon"===e.type)n(),this.engine.emit(qs.VIEW_CELL_DATA,e);else if("selectDropDownIcon"===e.type||"selectCellViewer"===e.type)n(),this.viewportHelper.isHiddenByFrozen(e.x,e.y)||this.engine.emit(qs.TOGGLE_CELL_PREVIEWER);else if("selectCloseIcon"===e.type){var l,c=null===(l=e.value.value)||void 0===l?void 0:l.id,s=this.viewportHelper.getColConfigs(e.col),u=this.viewportHelper.getCellValue(e.row,s).filter((function(e){return e!==c}));this.kernel.execute("setCellValue",e.row,e.col,{value:u})}else if("linkIcon"===e.type)this.engine.emit(qs.SHOW_CELL_EDITOR,e);else if("emailIcon"===e.type)this.engine.emit(qs.VIEW_CELL_DATA,e);else if("phoneIcon"===e.type)this.engine.emit(qs.VIEW_CELL_DATA,e);else if("checkboxIcon"===e.type)n(),this.engine.readOnly||this.kernel.execute("setCellValue",e.row,e.col,{value:!e.value});else if("errorReUploadIcon"===e.type)this.engine.emit(qs.UPLOAD_RETRY,e);else if("errorCloseIcon"===e.type)this.kernel.execute("setCellValue",e.row,e.col,{value:""});else if("fileLinkIcon"===e.type){if(!e.value.src)return;n(),this.engine.emit(qs.VIEW_CELL_DATA,e)}else if("imageLinkIcon"===e.type){if(!e.value.src)return;n(),this.engine.emit(qs.VIEW_CELL_DATA,e)}else"linkTextIcon"===e.type&&(n(),this.engine.emit(qs.VIEW_CELL_DATA,e))},doubleClick:function(e){var t=!this.engine.readOnly;if("cell"===e.type){var n=this.viewportHelper.getColConfigs(e.col).type;if(n===Ac.DATE&&t&&this.engine.emit(qs.SHOW_CELL_EDITOR,e,{focus:!0}),Mc.includes(n)&&t&&this.engine.emit(qs.TOGGLE_CELL_PREVIEWER,!1),[Ac.FILE,Ac.IMAGE].includes(e.cellType)&&this.engine.emit(qs.SHOW_FILE_MANAGE_MODAL,Km(Km({},e),{},{colConfigs:this.viewportHelper.getColConfigs(e.col),rowId:this.viewportHelper.getRowId(e.row)})),Nc.includes(n))return}},dragend:function(e){var t=e.target,n=e.dragTarget;if(t){var r=this.viewportHelper.getSelections(),o=r.col,a=r.colCount;"col"===n.type&&(t.col<o||t.col>=o+a)&&this.kernel.execute("moveCol",o,t.col+1)}},dragSelect:function(e){void 0!==e.row&&void 0!==e.col&&"row"!==e.type&&"col"!==e.type&&this.viewportHelper.selectTo(e)},resize:function(e){var t=e.e,n=e.startSize,r=e.resizeCol,o=Ms("minColSize"),a=Ms("maxColSize"),i=this.viewportHelper.getFrozenRectByCell(0,r,void 0,!1).left,l=Math.min(Math.max(o,t.offsetX-i),a);this.kernel.execute("resizeCol",r,n,l),this.emit("resizeEnd",r,l)},addGridRow:function(e,t){var n;n=void 0===e.row?this.viewportHelper.getViewData("rowCount"):e.row+1,this.kernel.command.execute("insertRow",n)&&(this.kernel.groupService.isGroupByCreatedAt(this.viewportHelper.getViewData("id"))||this.viewportHelper.selectCell(n,0,!t))},addGridCol:function(){var e=this.kernel.tableModel.getTableFields().length;this.engine.emit(qs.COL_CONFIGS,{col:e,options:{create:!0}})},clickGroupStats:function(e){this.engine.emit(qs.STATS_OPTIONS,e.id,{left:e.x-180,top:e.y})},clickGroupCollapse:function(e){this.kernel.command.execute("setGroupState",e.group.value,"collapsed",!e.group.collapsed),this.emit("groupStateChanged")},scroll:function(e,t){var n,r,o=new Date;null!=e&&(this.cacheX=(this.cacheX||0)+e,n=Math.abs(this.cacheX)),null!=t&&(this.cacheY=(this.cacheY||0)+t,r=Math.abs(this.cacheY)),(!this.cacheTime||o-this.cacheTime>20)&&(null!=e&&(e=n>r?this.cacheX:0),null!=t&&(t=n>r?0:this.cacheY),this.viewportHelper.scrollBy(e,t),this.cacheX=0,this.cacheY=0,this.cacheTime=o)}};function Zm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zm(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jm=["lake-table-dropdown","lake-table-view-manage","option-list","lake-table-stats-options","textarea-container"],ev=["emailIcon","phoneIcon","mentionLinkIcon","fileLinkIcon","linkTextIcon","groupCollapseIcon"],tv=["imageLinkIcon"],nv=["addGridRow","filterIcon","selectCellViewer","selectDropDownIcon","selectCloseIcon","checkboxIcon","colConfigIcon","linkIcon","mentionCellViewer","mentionDropDownIcon","mentionCloseIcon","cellTipIcon","errorReUploadIcon","errorCloseIcon","groupStats","uploadFileIcon"].concat(ev),rv=[Ac.LINK],ov={preventScroll:!0,enableXScroll:!0,enableYScroll:!0,scrollOnAddRow:!0},av=function(e){g()(n,ce.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r){var o;return d()(this,n),o=t.call(this),s()(m()(o),"bindEvents",(function(){["mouseout","contextmenu","mouseover","touchmove","touchend","mousemove","mouseup","mousedown","touchstart"].forEach((function(e){o.container.addEventListener(e,o.canvasEventHandler)})),["wheel","DOMMouseScroll"].forEach((function(e){o.container.addEventListener(e,o.wheel)})),["mousedown","mousemove","mouseup"].forEach((function(e){window.addEventListener(e,o.globalEventHandler),o.engine.on(qs.DESTROY,(function(){window.removeEventListener(e,o.globalEventHandler)}))}))})),s()(m()(o),"globalEventHandler",(function(e){o.disabled||("mousedown"!==e.type?!o.isCanvasEvent(e)&&o.status&&o["body"+e.type](e):o.bodymousedown(e))})),s()(m()(o),"canvasEventHandler",(function(e){o.disabled||o.isCanvasEvent(e)&&o[e.type](e)})),s()(m()(o),"wheel",(function(e){if(o.isScrollableDom(e.target)){(new Ws(window.location.href).isEmbed()||0!==e.deltaX)&&e.preventDefault(),isNaN(e.wheelDelta)&&(e.delta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0));var t=o.options,n=t.enableYScroll,r=t.enableXScroll,a=!isNaN(e.deltaX)&&r?e.deltaX:0,i=isNaN(e.deltaY)?e.delta:e.deltaY;i=n?i:0,o.emit("scroll",a,i)}})),s()(m()(o),"touchmove",(function(e){o.options.preventScroll&&(e.preventDefault(),e.stopPropagation());var t=e.touches;if(t[0]){var n=t[0].clientX,r=t[0].clientY,a=0,i=0;o.touchX&&(a=o.touchX-n),o.touchY&&(i=o.touchY-r),o.touchX=n,o.touchY=r,o.emit("scroll",a,i)}})),s()(m()(o),"touchstart",(function(e){var t=e.touches;t[0]&&(o.touchX=t[0].clientX,o.touchY=t[0].clientY)})),s()(m()(o),"touchend",(function(){o.touchX=0,o.touchY=0})),o.eventManager=e,o.handlers=e.handlers,o.engine=e.engine,o.kernel=o.engine.kernel,o.container=o.engine.container,o.theme=o.engine.theme,o.handlers=Xm,o.area=e.area,o.canvas=o.engine.viewManager.getCanvas(),o.options=Qm(Qm({},ov),r),Object.keys(o.handlers).forEach((function(e){o.on(e,o.handlers[e].bind(m()(o)))})),o.disabled=!1,o}return p()(n,[{key:"setDisabled",value:function(e){this.disabled=e}},{key:"unbindEvents",value:function(){var e=this;["mouseout","contextmenu","mouseover","touchmove","touchend","mousemove","mouseup","mousedown","touchstart"].forEach((function(t){e.container.removeEventListener(t,e.canvasEventHandler)})),["wheel","DOMMouseScroll"].forEach((function(t){e.container.removeEventListener(t,e.wheel)})),["mousedown","mousemove","mouseup"].forEach((function(t){window.removeEventListener(t,e.globalEventHandler),e.engine.on(qs.DESTROY,(function(){window.removeEventListener(t,e.globalEventHandler)}))}))}},{key:"isCanvasEvent",value:function(e){return"canvas"===e.target.tagName.toLowerCase()}},{key:"contextmenu",value:function(e){e.preventDefault(),window.getSelection().removeAllRanges()}},{key:"allowed",value:function(e,t){if(t){if("pointer"===e&&(ev.includes(t.type)||rv.includes(t.cellType)))return!0;if("zoomIn"===e&&tv.includes(t.type))return!0}return!this.engine.readOnly||!!["selecting","mousedown","col_resize","col_split","filterIcon","zoomIn","hoverCell",null].includes(e)}},{key:"setStatus",value:function(e){this.allowed(e)&&(this.status=e,this.clearCursor(),e&&this.container.classList.add(e))}},{key:"setCursor",value:function(e,t){this.allowed(e,t)&&this.cursor!==e&&(this.clearCursor(),this.container.classList.add(e),this.cursor=e,this.emit("hover"))}},{key:"clearCursor",value:function(){this.cursor=null,this.container.classList.remove("dragging","selecting","col_resize","col_split","row_resize","pointer","mousedown","autofill","grab","grabbing","filterIcon","zoomIn")}},{key:"isInnerTarget",value:function(e){if("CANVAS"===e.tagName)return!0;for(var t=!1;e&&e!==document.body;){if(e===this.container.parentNode){t=!0;break}e=e.parentNode}return t}},{key:"mousedown",value:function(e){var t=this,n=this.area.find(e.offsetX,e.offsetY);if(n){if(!this.isRowDragging(e,n)){var r=this.viewportHelper.getSelections(),o=2===e.button,a=e.shiftKey;if(this.mousedownX=e.offsetX,this.mousedownY=e.offsetY,e.preventDefault(),o||e.ctrlKey)return this.viewportHelper.inSelections(n)||("col"===n.type||"row"===n.type||"colConfigIcon"===n.type?this.emit("clickHeader",n):"cell"===n.type&&this.emit("clickCell",n,e)),void this.engine.emit(qs.SHOW_MENU,{e:e,mode:this.getSelectionsModel(n),selections:this.viewportHelper.getSelections(),target:n});if(this.setStatus("mousedown"),this.emit("mouseDown"),a)this.emit("shiftClick",n);else switch(n.type){case"col_split":this.setStatus("col_split"),this.startSize=this.viewportHelper.columnSizes[n.col],this.resizeCol=n.col;break;case"colConfigIcon":e.stopPropagation(),this.emit("clickHeader",{type:"col",col:n.col});var i=this.container.getBoundingClientRect();this.engine.emit(qs.SHOW_MENU,{e:{clientX:n.x+i.x,clientY:n.y+i.y},mode:"col",selections:r,colConfig:!0,target:n});break;case"groupStats":this.emit("clickGroupStats",n);break;case"checkbox":this.emit("clickCell",n),this.emit("setCheckbox",n);break;case"addGridCol":this.handlers.addGridCol.apply(this,n);break;case"addGridRow":this.emit("addGridRow",n,this.options.scrollOnAddRow);break;case"autofill":this.setStatus("autofill");break;case"groupCollapseIcon":this.emit("clickGroupCollapse",n);break;case"mentionCellViewer":case"mentionLinkIcon":case"mentionDropDownIcon":case"mentionCloseIcon":case"imageLinkIcon":case"fileLinkIcon":case"linkIcon":case"emailIcon":case"phoneIcon":case"linkTextIcon":case"checkboxIcon":case"errorReUploadIcon":case"errorCloseIcon":case"uploadFileIcon":case"cell":case"selectCellViewer":case"selectDropDownIcon":case"selectCloseIcon":this.emit("clickCell",n,e);break;case"row":this.emit("clickHeader",n);break;case"col":if(this.isHeaderInSelection(n)){if(this.doubleClick)return"col"===n.type&&this.engine.emit(qs.COL_CONFIGS,{col:n.col}),void this.setStatus(null);this.dragTarget=Qm({},n),this.setStatus("dragstart")}if(this.emit("clickHeader",n),"col"===n.type)return this.doubleClick=!0,setTimeout((function(){t.doubleClick=!1}),300),void(this.dragTarget=n)}if(!this.clickTarget||!Ee()(this.clickTarget,n))return this.clickTarget=n,void setTimeout((function(){t.clickTarget=null,t.mousedownX=null,t.mousedownY=null}),300);this.emit("doubleClick",n),this.setStatus(null)}}else this.viewportHelper.removeSelections()}},{key:"isRowDragging",value:function(e,t){if(!t)return!1;if(!this.kernel.readOnly){var n=(this.kernel.groupService.grouping?Ms("groupPaddingX"):0)+Ms("draggableWidth");if(e.offsetX<n&&"row"===t.type)return!0}return!1}},{key:"mouseup",value:function(e){var t;(this.clearDragTimer(),this.status)&&("mousedown"!==this.status&&"selecting"!==this.status||(this.emit("mouseUp"),this.emit("selectend")),"dragging"===this.status&&(this.doubleClick||(t=this.viewportHelper.getClosestCellByOffset(e.offsetX,e.offsetY)),this.emit("dragend",{target:t,dragTarget:this.dragTarget}),delete this.dragTarget),"col_resize"!==this.status&&"row_resize"!==this.status||this.emit("resize",{e:e,startSize:this.startSize,resizeCol:this.resizeCol}),"autofill"===this.status&&this.emit("autofilled"),this.scrollTimer&&(clearInterval(this.scrollTimer),this.scrollTimer=null),this.lastSelectedCell=null,this.lastDragTarget=null,this.doublerClick=!1,this.setStatus(null))}},{key:"isSameTarget",value:function(e,t){return!(!e||!t)&&e.cellType===t.cellType&&e.type===t.type&&e.col===t.col&&e.row===t.row}},{key:"mousemove",value:function(e){var t=this.area.find(e.offsetX,e.offsetY);if(!this.isRowDragging(e,t)&&(this.status||this.handleHover(t,e),!this.lastDragTarget||!Ee()(this.lastDragTarget,t)||["col_resize","dragging","grabbing"].includes(this.status))){if(this.lastDragTarget=t,"col_split"===this.status){var n=e.offsetX,r=e.offsetY;if(this.clickTarget&&this.mousedownX&&this.mousedownY&&Math.abs(n-this.mousedownX)<2&&Math.abs(r-this.mousedownY)<2)return;this.mousedownX=null,this.mousedownY=null,this.setStatus("col_resize")}else if("col_resize"===this.status){var o=this.viewportHelper.getRectByCell(0,this.resizeCol).left,a=Math.max(80,e.offsetX-o)+o;this.emit("resizing",{offset:a})}if(t){if("selecting"===this.status&&["row","col","row_split","col_split"].includes(t.type)&&this.lastSelectedCell)return this.scrollTarget(e,t),void(this.lastSelectedCell=null);if(this.clearDragTimer(),this.status){if("mousedown"!==this.status&&"selecting"!==this.status||(this.setStatus("selecting"),t&&("cell"===t.type&&(this.lastSelectedCell=t),this.emit("dragSelect",t))),"dragstart"===this.status){if(0===this.dragTarget.col)return this.setStatus(null),delete this.dragTarget,void this.engine.emit(qs.MOVE_INDEX_COL);this.setStatus("dragging")}if("dragging"===this.status){e.offsetX<Ms("rowHeaderWidth")&&e.offsetY<Ms("colHeaderHeight")&&this.scrollTarget(e);var i=this.viewportHelper.getClosestCellByOffset(e.offsetX,e.offsetY);this.emit("dragging",{target:i,dragTarget:this.dragTarget})}"autofill"===this.status&&this.emit("autofill",t)}else if(nv.includes(t.type)||rv.includes(t.cellType)&&t.value&&!["error","progress"].includes(t.value.status)&&this.isTargetSelected(t))this.setCursor("pointer",t);else if("col_split"===t.type)this.setCursor("col_resize");else if("autofill"===t.type)this.setCursor("autofill");else if("col"===t.type&&this.isHeaderInSelection(t)){if(0===t.col)return;this.setCursor("grab")}else tv.includes(t.type)?this.setCursor("zoomIn"):this.clearCursor()}else this.clearCursor()}}},{key:"isTargetSelected",value:function(e){var t=this.viewportHelper.getSelections();return t.row===e.row&&t.col===e.col&&1===t.rowCount&&1===t.colCount}},{key:"bodymousedown",value:function(e){if(!this.isCanvasEvent(e)&&this.kernel.tableModel.getActiveView().type===Gs.GRID){for(var t=e.target;t&&t!==document.body&&t.classList;){if(t.classList.contains("lake-table-input")||t.classList.contains("lake-table-menubar")||t.classList.contains("lake-table-form")||t.classList.contains("textarea-container")||t.classList.contains("lake-table-dropdown-popover-container")||t.classList.contains("lake-table-colorpicker")||t.classList.contains("lake-table-cell-preview-container"))return;t=t.parentNode}this.kernel.execute("setSelections",{})}}},{key:"bodymousemove",value:function(e){var t=this._wrapBodyEvent(e);"col_resize"===this.status?this.emit("resizing",{e:e,resizeCol:this.resizeCol}):"dragging"!==this.status&&"selecting"!==this.status||this.scrollTarget(t)}},{key:"bodymouseup",value:function(e){var t=this._wrapBodyEvent(e);this.mouseup(t)}},{key:"_shouldHoverIcon",value:function(e){return!(!e||-1===e.type.indexOf("Icon")||this.kernel.readOnly&&![].concat(ev,tv).includes(e.type))}},{key:"mouseLeave",value:function(e){e&&"addGridRow"===e.type&&this.emit("hoverAddGridRow",e,"mouseleave"),e&&"groupStats"===e.type&&this.emit("hoverGroupStats",e,"mouseleave"),e&&"addGridCol"===e.type&&this.emit("hoverAddGridCol",e,"mouseleave"),e&&"col"===e.type&&this.emit("hoverCol",e,"mouseleave"),e&&(e.state||e.note)&&this.emit("hoverCell",{type:"mouseleave",target:e,event:event}),this._shouldHoverIcon(e)&&this.emit("hoverIcon",{type:"mouseleave",target:e})}},{key:"mouseEnter",value:function(e){!e||"cell"!==e.type&&"row"!==e.type||this.activeRow===e.row||(this.activeRow=e.row,this.emit("hoverRow",e.row)),e&&(!e||["cell","row","addGridRow","addGridCol","groupStats","groupCollapseIcon"].includes(e.type)||isNaN(this.activeRow))||(delete this.activeRow,this.emit("hoverRow",null)),e&&"addGridRow"===e.type&&this.emit("hoverAddGridRow",e,"mouseenter"),e&&"groupStats"===e.type&&this.emit("hoverGroupStats",e,"mouseenter"),e&&"addGridCol"===e.type&&this.emit("hoverAddGridCol",e,"mouseenter"),e&&"col"===e.type&&this.emit("hoverCol",e,"mouseenter"),e&&(e.state||e.note)&&this.emit("hoverCell",{type:"mouseenter",target:e,event:event}),this._shouldHoverIcon(e)&&this.emit("hoverIcon",{type:"mouseenter",target:e})}},{key:"handleHover",value:function(e,t){var n=this.preTarget;n&&!Ee()(n,e)&&(this.isSameTarget(n,e)&&(n.value=e.value),this.mouseLeave(n)),n&&Ee()(n,e)||this.mouseEnter(e),e&&e.state&&this.emit("hoverCell",{type:"mousemove",target:e,event:t}),this.preTarget=e}},{key:"isHeaderInSelection",value:function(e){var t=this.viewportHelper.getSelections(),n=t.row,r=t.col,o=t.rowCount,a=t.colCount;return"row"===e.type?0===r&&e.row>=n&&e.row<n+o:0===n&&e.col>=r&&e.col<r+a}},{key:"_wrapBodyEvent",value:function(e){var t=this.container.getBoundingClientRect(),n=new Event(e.type);return n.offsetX=e.clientX-t.left,n.offsetY=e.clientY-t.top,n.clientX=e.clientX,n.clientY=e.clientY,n.x=e.x,n.y=e.y,n}},{key:"mouseover",value:function(){this.scrollTimer&&(clearInterval(this.scrollTimer),this.scrollTimer=null)}},{key:"mouseout",value:function(e){this.clearHover(e),this.status&&this.scrollTarget(e)}},{key:"clearHover",value:function(){this.emit("hoverAddGridRow",null,"mouseleave"),this.emit("hoverGroupStats",null,"mouseleave"),this.emit("hoverAddGridCol",null,"mouseleave"),this.emit("hoverCell",{type:"mouseleave"})}},{key:"isScrollableDom",value:function(e){if("CANVAS"===e.tagName)return!0;for(var t=!0;e&&e!==this.container;){for(var n=0;n<Jm.length;n++)if(e.classList.contains(Jm[n])){t=!1;break}if(!t)break;e=e.parentNode}return t}},{key:"clearDragTimer",value:function(){this.dragTimer&&(clearTimeout(this.dragTimer),this.dragTimer=null)}},{key:"scrollTarget",value:function(e){var t=this,n=this._getDeltaScroll(e);if("dragging"===t.status){var r=t.viewportHelper.getClosestCellByOffset(t.eventOffsetX,t.eventOffsetY);this.emit("dragging",{e:e,target:r,dragTarget:this.dragTarget}),"row"===this.dragTarget.type?(this.scrollOffsetX=0,this.scrollOffsetY=2*n.y):(this.scrollOffsetX=2*n.x,this.scrollOffsetY=0)}else this.scrollOffsetX=2*n.x,this.scrollOffsetY=2*n.y;this.eventOffsetX=e.offsetX,this.eventOffsetY=e.offsetY,this.scrollTimer||(this.scrollTimer=setInterval((function(){t.emit("scroll",t.scrollOffsetX,t.scrollOffsetY),t.dragScroll(e)}),100))}},{key:"dragScroll",value:function(){if("selecting"===this.status){var e=this.viewportHelper.findClosestSelection(this.scrollOffsetX,this.scrollOffsetY,this.eventOffsetX,this.eventOffsetY);e&&this.emit("dragSelect",e)}}},{key:"_getDeltaScroll",value:function(e){var t={x:0,y:0},n=this.container.getBoundingClientRect();return e.y<n.top+Ms("colHeaderHeight")&&(t.y=e.y-(n.top+Ms("colHeaderHeight"))),e.y>n.top+n.height-20&&(t.y=e.y-n.top-n.height+20),e.x>n.left+n.width-20&&(t.x=e.x-n.left-n.width+20),e.x<n.left+Ms("rowHeaderWidth")&&(t.x=e.x-n.left-Ms("rowHeaderWidth")),t}},{key:"getSelectionsModel",value:function(e){if("colConfigIcon"===e.type||"col"===e.type)return"col";var t=this.viewportHelper.getViewData(),n=t.selections;n.row;var r=n.col,o=n.rowCount,a=n.colCount;return"row"===e.type||0===r&&a===t.colCount?"row":o>1||a>1?"selection":"cell"}}]),n}(),iv={end:["touched","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]};function lv(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflowX","overflowY","overflow"].find((function(e){return n.test(t[e])}))}function cv(e){return e instanceof HTMLElement?lv(e)?e:cv(e.parentNode):null}function sv(e){for(var t=[],n=e;n&&!(n instanceof HTMLHtmlElement);){var r=cv(n);if(!r){n=null;break}t.push(r),n=r.parentNode}return t}function uv(e){return e.touches&&e.touches.length?{left:e.touches[0].pageX,top:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{left:e.changedTouches[0].pageX,top:e.changedTouches[0].pageY}:{left:e.clientX,top:e.clientY}}function dv(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}var fv=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,n),e=t.call(this),s()(m()(e),"getParentScrollNodes",(function(){return sv(e.node)})),e.node=r.node,e.isOuterScroller=r.isOuterScroller,e.scrollNode=r.scrollNode||cv(e.node),e}return p()(n,[{key:"rect",get:function(){return this.node.getBoundingClientRect()}},{key:"ownerDocument",get:function(){return this.node.ownerDocument||document}},{key:"window",get:function(){return this.ownerDocument.defaultView||window}},{key:"top",get:function(){return this.rect.top||0}},{key:"left",get:function(){return this.rect.left||0}},{key:"width",get:function(){return this.rect.width||0}},{key:"height",get:function(){return this.rect.height||0}},{key:"scrollTop",get:function(){return this.scrollNode?parseInt(this.scrollNode.scrollTop||0,10):0}},{key:"scrollLeft",get:function(){return this.scrollNode?parseInt(this.scrollNode.scrollLeft||0,10):0}},{key:"getInnerPosition",value:function(e){return{top:Math.abs(e.top-this.top)+(this.isOuterScroller?0:this.scrollTop),left:Math.abs(e.left-this.left)+this.scrollLeft}}}]),n}();var pv=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r){var o,a;d()(this,n),a=t.call(this),s()(m()(a),"updateScroll",(function(e,t){if(t){var n=t.getBoundingClientRect(),r={x:0,y:0},o={x:15,y:15},i=a.node,l=i.scrollHeight,c=i.scrollWidth,s=i.clientHeight,u=i.clientWidth,d=a.rect,f=d.top,p=d.left,h=d.bottom,m=d.right,v=0===a.scrollTop,g=l-a.scrollTop-s==0,b=0===a.scrollLeft,y=c-a.scrollLeft-u==0;"y"===a.axis?n.top<f+a.triggerSize&&!v?(r.y=-1,o.y=8*Math.abs((f-n.top)/a.triggerSize)):n.bottom>h-a.triggerSize&&!g&&(r.y=1,o.y=8*Math.abs((h-n.top)/a.triggerSize)):"x"===a.axis&&(n.left<p+a.triggerSize&&!b?(r.x=-1,o.x=8*Math.abs((p-n.left)/a.triggerSize)):n.right>m-a.triggerSize&&!y&&(r.x=1,o.x=8*Math.abs((m-(n.left+n.width))/a.triggerSize))),a.interval&&(a.dispose(),a.isScrolling=!1),0===r.x&&0===r.y||(a.interval=setInterval((function(){a.isScrolling=!0;var e=o.x*r.x,t=o.y*r.y;if(a.node instanceof HTMLBodyElement)return document.documentElement.scrollLeft+=e,void(document.documentElement.scrollTop+=t);a.node.scrollLeft+=e,a.node.scrollTop+=t}),20))}})),s()(m()(a),"dispose",(function(){clearInterval(a.interval),a.interval=null,Me()((o=m()(a),k()(n.prototype)),"dispose",o).call(o)})),a.node=e,a.container=r,a.axis="y";var i=lv(e);return"overflowX"===i?a.axis="x":"overflowY"===i&&(a.axis="y"),a.triggerSize=60,a}return p()(n,[{key:"rect",get:function(){var e=this.node.getBoundingClientRect().toJSON();return this.node instanceof HTMLBodyElement&&(e.top=0,e.bottom=e.height,e.x=0,e.y=e.height),e}},{key:"width",get:function(){return this.rect.width}},{key:"height",get:function(){return this.rect.height}},{key:"top",get:function(){return this.rect.top-this.container.top}},{key:"left",get:function(){return this.rect.left-this.container.left+this.container.scrollLeft}},{key:"scrollTop",get:function(){return this.node instanceof HTMLBodyElement?window.scrollY:parseInt(this.node.scrollTop||0,10)}},{key:"scrollLeft",get:function(){return this.node instanceof HTMLBodyElement?window.scrollX:parseInt(this.node.scrollLeft||0,10)}}]),n}();var hv=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this),s()(m()(r),"isDragger",(function(e){return e.classList.contains("sortable-dragger")})),s()(m()(r),"createNode",(function(e,t){r.nodeType===n.NODE_TYPE.clone?r.node=r.createCloneNode(e):r.nodeType===n.NODE_TYPE.shadow&&(r.node=r.createShadowNode(e)),r.container.node.appendChild(r.node);var o=uv(t);r.offsetParent={left:o.left-e.rect.left,top:o.top-e.rect.top}})),s()(m()(r),"updatePosition",(function(e){if(!r.node)return null;r.node.style.display="block";var t=r.container.getInnerPosition(e),n=t.top-r.offsetParent.top,o=t.left-r.offsetParent.left;r.setTop(n),r.setLeft(o)})),s()(m()(r),"setTop",(function(e){r.node.style.top=e+"px"})),s()(m()(r),"setLeft",(function(e){r.node.style.left=e+"px"})),s()(m()(r),"dispose",(function(){r.node&&r.node.parentNode&&(r.node.parentNode.removeChild(r.node),r.node=null)})),r.container=e.container,r.scroller=e.scroller,r.node=null,r.nodeType=e.nodeType||n.NODE_TYPE.clone,r}return p()(n,[{key:"createShadowNode",value:function(e){var t=document.createElement("div");return t.style.position="absolute",t.style.cursor="move",t.style.display="none",t.style.zIndex=1e3,t.style.width=e.width+"px",t.style.height=e.height+"px",t}},{key:"createCloneNode",value:function(e){var t=e.node,n=document.createElement("div");n.innerHTML=t.outerHTML,n.style.position="absolute",n.style.cursor="grabbing",n.style.display="none",n.style.zIndex=1e3,n.firstChild.style.boxShadow="0 1px 4px -2px rgba(0,0,0,0.13), 0 2px 8px 0 rgba(0,0,0,0.08), 0 8px 16px 4px rgba(0,0,0,0.04)";var r=window.getComputedStyle(t);n.style.width=r.width,n.style.height=r.height;var o=n.firstChild;return o.style.position="relative",o.style.left="0px",o.style.top="0px",o.style.cursor="grabbing",o.style.width="100%",o.style.height="100%",o.removeAttribute("data-dragging"),o.classList.add("sortable-dragger"),n}}]),n}();hv.NODE_TYPE={shadow:"shadow",clone:"clone"};var mv="element",vv="group",gv=function(){function e(t){d()(this,e),this.options=t,this.container=t.container,this.nodeService=t.nodeService}return p()(e,[{key:"type",get:function(){}},{key:"rect",get:function(){if(this.node){var e=this.node.getBoundingClientRect(),t=parseInt(window.getComputedStyle(this.node).marginBottom,10)||0,n=parseInt(window.getComputedStyle(this.node).marginTop,10)||0;return e.height=e.height+t+n,e.marginBottom=t,e.marginTop=n,e}return this.options.rect}},{key:"node",get:function(){return this.options.node}},{key:"id",get:function(){return this.options.id}},{key:"disabled",get:function(){var e=this.options.disabled;return null!=e&&e}},{key:"sortable",get:function(){var e=this.options.sortable;return null==e||e}},{key:"width",get:function(){return this.rect.width}},{key:"height",get:function(){return this.rect.height}},{key:"top",get:function(){return this.rect.top-this.container.top}},{key:"left",get:function(){return this.rect.left-this.container.left+this.container.scrollLeft}},{key:"marginTop",get:function(){return this.rect.marginTop||0}},{key:"marginBottom",get:function(){return this.rect.marginBottom||0}},{key:"dragNode",get:function(){return this.options.dragNode}},{key:"noDragNode",get:function(){return this.options.noDragNode}}]),e}();var bv=function(e){g()(n,gv);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),e.scroller?r.scroller=e.scroller:e.scrollNode&&(r.scroller=new pv(e.scrollNode,e.container)),r}return p()(n,[{key:"type",get:function(){return vv}},{key:"isGroup",get:function(){return!0}}]),n}();var yv=function(e){g()(n,gv);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;d()(this,n);var o=(r=t.call(this,e)).nodeService.getGroupById(r.groupId);return r.groupScrollTop=o&&o.scroller?o.scroller.scrollTop:0,r}return p()(n,[{key:"type",get:function(){return mv}},{key:"isElement",get:function(){return!0}},{key:"top",get:function(){return Math.abs(this.rect.top-this.container.top)+this.groupScrollTop}},{key:"groupId",get:function(){return null==this?void 0:this.options.groupId}}]),n}();var wv="vertical",kv="horizontal",xv=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isFullArea:!1};return d()(this,n),(r=t.call(this)).options=o,r.container=r.options.container,r._groupMap={},r._groups=[],r._elementMap={},r._elements=[],r.groupDirection="",r.useAreaChecker=o.useAreaChecker,r.initialize(e),r}return p()(n,[{key:"initialize",value:function(e){var t=this;e.forEach((function(e){var n,r,o={nodeService:t,container:t.container,node:e.node,id:e.id,rect:e.rect,dragNode:e.dragNode,noDragNode:e.noDragNode,sortable:e.sortable,disabled:e.disabled};return e.type===vv?(o.scrollNode=e.scrollNode,o.scroller=e.scroller,r=new bv(o),t._groupMap[e.id]=r,void t._groups.push(r)):(o.groupId=e.groupId,n=new yv(o),t._elementMap[e.id]=n,void t._elements.push(n))}));var n=this.getGroups();n.length<=1?this.groupDirection=kv:(n[0].top===n[1].top&&(this.groupDirection=wv),n[0].left===n[1].left&&(this.groupDirection=kv))}},{key:"getElements",value:function(){return this._elements}},{key:"getGroups",value:function(){return this._groups}},{key:"getGroupById",value:function(e){return this._groupMap[e]}},{key:"getCurrentTargetByPosition",value:function(e){for(var t=this,n=this.getElements(),r=0;r<n.length;r++){var o=n[r];if(this.isInRect(e,o.rect)&&!o.disabled)return o.noDragNode&&o.noDragNode.some((function(n){return t.isInRect(e,n.rect)}))||o.dragNode&&!this.isInRect(e,o.dragNode.rect)?null:o}for(var a=this.getGroups(),i=0;i<a.length;i++){var l=a[i];if(this.isInRect(e,l.rect)&&!l.disabled)return l.noDragNode&&l.noDragNode.some((function(n){return t.isInRect(e,n.rect)}))||l.dragNode&&!this.isInRect(e,l.dragNode.rect)?null:l}return null}},{key:"isInRect",value:function(e,t){return t.left<e.left&&t.left+t.width>e.left&&t.top<e.top&&t.top+t.height>e.top}},{key:"getGroupByPosition",value:function(e){for(var t=this.getGroups(),n=0;n<t.length;n++){var r=t[n],o=r.left-this.container.scrollLeft+this.container.rect.left,a=r.rect.top;if(this.groupDirection===wv&&o<e.left&&o+r.width>e.left)return r;if(this.groupDirection===kv&&a<e.top&&a+r.height>e.top)return r}if(this.options.isFullArea){var i=t.filter((function(e){return!e.disabled})),l=i[0],c=i[i.length-1];if(this.groupDirection===wv){if(c.rect.left+c.width<e.left)return c;if(l.rect.left>e.left)return l}if(this.groupDirection===kv){if(c.rect.top+c.height<e.top)return c;if(l.rect.top>e.top)return l}}}},{key:"checkGroupEnd",value:function(e){var t=this._groups.filter((function(e){return!e.disabled})),n=t[t.length-1];return!!n&&(""===n.id&&(n=t[t.length-2]),!!n&&n.left-this.container.scrollLeft+this.container.rect.left+n.width<e.left&&n)}},{key:"getElementByPosition",value:function(e,t){for(var n=this.getElements(),r=this.getGroupByPosition(e),o=this.container.getInnerPosition(e),a=0;a<n.length;a++){var i=n[a];if(null===i.groupId||r&&i.groupId===r.id)if(this.useAreaChecker){if(t){var l=t.getBoundingClientRect();if(this.isInElementByArea(i,{rect:l},r))return i}}else{var c=i.rect.top-this.container.top,s=c-i.marginTop,u=c+i.height+i.marginBottom;if(s<=o.top&&u>=o.top){var d=c+i.height/2;if(o.top<=d)return i;if(o.top>d){var f=n[a+1];if((null==f?void 0:f.groupId)===r.id)return f}}}}if(r){var p=n.filter((function(e){return e.groupId===r.id}));if(p.length>0){var h=p[0].rect.top-this.container.top;if(h>0&&o.top<h)return p[0]}}}},{key:"isInElementByArea",value:function(e,t){var n=e.rect.left,r=e.rect.left+e.width,o=e.rect.top-e.marginTop,a=e.rect.top+e.height+e.marginBottom;if(!(a<0)){var i=t.rect,l=i.left,c=i.left+i.width,s=i.top,u=i.top+i.height,d=e.width*e.height/3;return function(e,t,n,r,o,a,i,l){return Math.max(Math.min(t,a)-Math.max(e,o),0)*Math.max(Math.min(r,l)-Math.max(n,i),0)}(n,r,o,a,l,c,s,u)>=d}}},{key:"dispose",value:function(){this._groupMap={},this._groups=[],this._elementMap={},this._elements=[]}}]),n}();var Ev=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r,o){var a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16;return d()(this,n),a=t.call(this),s()(m()(a),"createNode",(function(){a.node=document.createElement("div"),a.node.classList.add("sortable-placeholder"),a.node.style.position="absolute",a.node.style.backgroundColor="#096DD9",a.node.style.display="none",a.node.style.zIndex=1e3,a.setWidth(a.width),a.setHeight(a.height),a.container.node.appendChild(a.node)})),s()(m()(a),"updatePosition",(function(e,t,n,r){if(a.controller.checkValid()){var o,i;if(n===mv){if(e)i=e.left,o=e.rect.top-a.container.top-e.marginBottom/2,a.setWidth(e.width);else if(t){var l=parseInt(window.getComputedStyle(t.node).paddingLeft,10)||0;i=t.left+l;var c=a.controller.node.getElements().filter((function(e){return e.groupId===t.id})),s=c[c.length-1];if(s){var u=s.rect.top-a.container.top;if(t.scroller){var d=u+s.height+2,f=t.scroller.top+t.scroller.height;o=Math.min(d,f)}else o=u+s.height+2}else o=t.scroller?t.scroller.top:t.top;a.setWidth(t.scroller?t.scroller.width:t.width)}if(t){var p=t.scroller?t.scroller.top:t.top;o<p&&(o=p)}}else if(n===vv){if(!t)return void a.hide();o=t.top,i=r?t.left+t.width:t.left+a.groupSpace/2}a.show(),a.setTop(o),a.setLeft(i)}else a.hide()})),s()(m()(a),"setWidth",(function(e){e&&(a.node.style.width=e+"px")})),s()(m()(a),"setHeight",(function(e){e&&(a.node.style.height=e+"px")})),s()(m()(a),"setTop",(function(e){a.node.style.top=e+"px"})),s()(m()(a),"setLeft",(function(e){a.node.style.left=e+"px"})),s()(m()(a),"show",(function(){a.node.style.display="block"})),s()(m()(a),"hide",(function(){a.node.style.display="none"})),s()(m()(a),"dispose",(function(){a.node&&a.node.parentNode&&a.node.parentNode.removeChild(a.node)})),a.controller=e,a.container=e.container,a.width=r,a.height=o,a.node=null,a.groupSpace=i,a}return p()(n)}();function Cv(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ov(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ov(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function Ov(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _v=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,n),r=t.call(this),s()(m()(r),"refreshNodeWithDebounce",$()((function(){r.refreshNode()}),100)),s()(m()(r),"refreshNode",(function(){r.node=new xv(r.options.getNodes(),{container:r.container,isFullArea:r.options.isFullArea,useAreaChecker:r.options.useAreaChecker})})),s()(m()(r),"getNode",(function(){return r.node})),s()(m()(r),"initPlaceholder",(function(){if(!r.options.disablePlaceholder){var e;e=r.targetNode.type===vv&&r.node.groupDirection===wv?{width:2,height:r.targetNode.height}:{width:r.targetNode.width,height:2},r.options.createPlaceholder?r.placeholder=r.options.createPlaceholder(m()(r),e.width,e.height):r.placeholder=new Ev(m()(r),e.width,e.height)}})),s()(m()(r),"onStart",(function(e){var t;if(r.toElement=null,r.toGroup=null,r.targetNode=null,(!r.options.checkVisible||r.options.checkVisible(e))&&2!==e.button&&(r.touched=!0,r.position=uv(e),!r.sorting&&(r.refreshNode(),dv(e)||"A"!==e.target.tagName||e.preventDefault(),r.targetNode=null===(t=r.node)||void 0===t?void 0:t.getCurrentTargetByPosition(r.position),r.targetNode))){if(!r.targetNode.sortable)return void(r.targetNode=null);r.type=r.targetNode.type}})),s()(m()(r),"onMove",(function(e){if(r.sorting||!r.touched||!r.targetNode)return null;var t=uv(e),n={x:r.position.left-t.left,y:r.position.top-t.top};Math.abs(n.x)+Math.abs(n.y)>r.options.pressThreshold&&r.handleSortStart(e)})),s()(m()(r),"onStop",(function(){r.touched=!1,r.sorting||(r.targetNode&&r.options.onSortStop(),r.targetNode=null,clearTimeout(r.pressTimer)),r.sorting=!1})),s()(m()(r),"onKeyDown",(function(e){27===e.keyCode&&r.clear()})),s()(m()(r),"handleSortStart",function(){var e=E()(O.a.mark((function e(t){var n,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.targetNode&&!r.sorting){e.next=2;break}return e.abrupt("return");case 2:r.sorting=!0,r.initPlaceholder(),null===(n=r.placeholder)||void 0===n||n.createNode(),null===(o=r.dragger)||void 0===o||o.createNode(r.targetNode,t),r.listenerNode=t.touches?t.target:r.container.window,iv.move.forEach((function(e){r._register(mp(r.listenerNode,e,r.handleSortMove,!1))})),iv.end.forEach((function(e){r._register(mp(r.listenerNode,e,r.handleSortEnd,!1))})),r._register(mp(document.body,"keydown",r.onKeyDown,!1)),r.options.onSortStart(t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s()(m()(r),"handleSortMove",(function(e){var t;if(r.targetNode){"function"==typeof e.preventDefault&&e.cancelable&&e.preventDefault();var n=uv(e);if(r.toGroup=r.node.getGroupByPosition(n),r.toElement=r.node.getElementByPosition(n,null===(t=r.dragger)||void 0===t?void 0:t.node),r.toElement&&r.options.checkElement&&!r.options.checkElement(r.toElement,r.dragger)&&(r.toElement=null),r.toGroup)r.isGroupDragToEnd=!1;else{var o=r.node.checkGroupEnd(n);o&&(r.toGroup=o,r.isGroupDragToEnd=!0)}r.type===vv&&r.toGroup&&!r.toGroup.sortable&&(r.toGroup=null),r.updateDrag(e),r.updatePlaceholder(e),r.scroller&&r.updateScroll(e),r.options.onSortMove(e)}})),s()(m()(r),"handleSortEnd",(function(e){if(r.targetNode){var t=r.targetNode.id,n=r.toElement&&r.toElement.id,o=r.type===vv?r.targetNode.id:r.targetNode.groupId,a=r.toGroup&&r.toGroup.id;r.isChange(t,n,o,a)&&r.options.onSort(e,r.type,t,n,o,a,r.isGroupDragToEnd),r.options.onSortEnd(e,r.type,t,n,o,a,r.isGroupDragToEnd),r.clear()}})),s()(m()(r),"isChange",(function(e,t,n,o){if(null==o)return!1;if(r.type===vv&&n===o)return!1;if(null!=n&&n!==o)return!0;if(e===t)return!1;if(e!==t){var a=r.node.getElements().filter((function(e){return e.groupId===o})),i=a.findIndex((function(t){return t.id===e}));if(-1===i)return!0;var l=a[i+1];if(l){if(l&&l.id===t)return!1}else if(null==t)return!1}return!0})),s()(m()(r),"updateDrag",(function(e){var t,n=uv(e);null===(t=r.dragger)||void 0===t||t.updatePosition(n)})),s()(m()(r),"updateScroll",(function(e){if(r.dragger)return r.scroller.updateScroll(e,r.dragger.node),void(r.toGroup&&r.type===mv&&r.toGroup.scroller&&r.toGroup.scroller.updateScroll(e,r.dragger.node));r.scroller.updateScroll(e)})),s()(m()(r),"updatePlaceholder",(function(){if(r.node&&r.placeholder){var e,t=Cv(r.node.getGroups());try{for(t.s();!(e=t.n()).done;){var n=e.value;n!==r.toGroup&&n.scroller&&n.scroller.dispose()}}catch(e){t.e(e)}finally{t.f()}r.placeholder.updatePosition(r.toElement,r.toGroup,r.type,r.isGroupDragToEnd)}})),s()(m()(r),"clear",(function(){var e,t,n;if(null===(e=r.scroller)||void 0===e||e.dispose(),null===(t=r.dragger)||void 0===t||t.dispose(),null===(n=r.placeholder)||void 0===n||n.dispose(),r.container.dispose(),r.node){var o,a=Cv(r.node.getGroups());try{for(a.s();!(o=a.n()).done;){var i=o.value;i.scroller&&i.scroller.dispose()}}catch(e){a.e(e)}finally{a.f()}r.node.dispose(),r.node=null}r.options.onDispose(),r.touched=!1,r.sorting=!1,r.toElement=null,r.toGroup=null,r.isGroupDragToEnd=!1,r.targetNode=null})),s()(m()(r),"dispose",(function(){Me()((e=m()(r),k()(n.prototype)),"dispose",e).call(e),r.clear()})),ed(o.container,"missing options.container"),ed(o.getNodes,"missing options.getNodes"),o.pressThreshold||(o.pressThreshold=20),o.onSort||(o.onSort=function(){}),o.onSortMove||(o.onSortMove=function(){}),o.onSortStart||(o.onSortStart=function(){}),o.onSortStop||(o.onSortStop=function(){}),o.onSortEnd||(o.onSortEnd=function(){}),r.options=o,r.events={start:r.onStart,move:r.onMove,end:r.onStop},r.touched=null,r.sorting=!1,r.type=null,r.targetNode=null,r.toElement=null,r.toGroup=null,r.isGroupDragToEnd=null,r.initialize(),r}return p()(n,[{key:"initialize",value:function(){var e=this;if(this.container=new fv({node:this.options.container,scrollNode:this.options.scrollNode,isOuterScroller:this.options.isOuterScroller}),this.bindEvents(),this.options.scroller)this.scroller=this.options.scroller;else if(this.container.scrollNode){this.scroller=new pv(this.container.scrollNode,{container:this.container});var t,n=Cv(this.container.getParentScrollNodes());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._register(mp(r,"scroll",(function(){e.sorting&&e.refreshNodeWithDebounce()})))}}catch(e){n.e(e)}finally{n.f()}}this.refreshNodeWithDebounce(),this.options.disableDragger||(this.dragger=new hv({container:this.container,scroller:this.scroller,nodeType:this.options.draggerType}))}},{key:"bindEvents",value:function(){var e=this;Object.keys(this.events).forEach((function(t){iv[t].forEach((function(n){e._register(mp(e.container.node,n,e.events[t],!1))}))}))}},{key:"checkValid",value:function(){if(this.targetNode&&this.node){var e=this.targetNode.id,t=this.toElement&&this.toElement.id,n=this.type===vv?this.targetNode.id:this.targetNode.groupId,r=this.toGroup&&this.toGroup.id;return this.isChange(e,t,n,r)}}}]),n}();var Sv=function(e){g()(n,Ev);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r,o,a,i){var l;return d()(this,n),l=t.call(this,e,r,o),s()(m()(l),"node",null),s()(m()(l),"renderWidgets",null),s()(m()(l),"createNode",(function(){l.lineWidget=l._register(l.renderWidgets.drawLine({key:fs(6),bbox:{x:0,y:0,width:l.width,height:l.height}})),l.node=l.lineWidget.getNode(),l.node.background=Ms(l.engine.themeManager,"@yuque-color-cardborder-selected"),l.show()})),s()(m()(l),"updatePosition",(function(e,t,n,r){var o,a;if(e)a=e.left,o=e.top;else{if(!t)return void l.hide();var i=l.controller.node.getElements().filter((function(e){return e.groupId===t.id})),c=i[i.length-1];o=c?c.top+c.height:t.top}o<Ms("colHeaderHeight")?l.hide():(l.show(),l.setTop(o),l.setLeft(a))})),s()(m()(l),"setWidth",(function(e){l.node.width=e})),s()(m()(l),"setHeight",(function(e){l.node.height=e})),s()(m()(l),"setTop",(function(e){null!=e&&(l.node.y=e)})),s()(m()(l),"setLeft",(function(e){null!=e&&(l.node.x=e)})),s()(m()(l),"show",(function(){l.node.visible=!0})),s()(m()(l),"hide",(function(){l.node.visible=!1})),s()(m()(l),"dispose",(function(){l.lineWidget._isDisposed||l.lineWidget.dispose()})),l.renderWidgets=a,l.engine=i,l}return p()(n,[{key:"getSiblingGroupDistance",value:function(){return 0}}]),n}(),Rv=p()((function e(t){var n=this;d()(this,e),s()(this,"container",null),s()(this,"canvasEvents",null),s()(this,"viewportHelper",null),s()(this,"updateScroll",(function(e){var t=uv(e),r=n.container.getBoundingClientRect(),o=n.viewportHelper.isScrollYAtTop(),a=n.viewportHelper.isScrollYAtBottom(),i=r.top+35,l=r.bottom-35,c={y:0},s={y:1};t.top<i+n._triggerSize&&!o?(c.y=-1,s.y=Math.min(i+n._triggerSize-t.top,n._triggerSize)/n._triggerSize*20):t.top>l-n._triggerSize&&!a&&(c.y=1,s.y=Math.min(t.top-(l-n._triggerSize),n._triggerSize)/n._triggerSize*20),n.interval&&(n.dispose(),n.isScrolling=!1);var u=s.y*c.y;if(u){var d=Date.now();n.interval=Vp((function e(){var t,r,o=(Date.now()-d)/2e3;o>1&&(o=1),n.isScrolling=!0,n.canvasEvents.emit("scroll",null,u),null===(t=n.sortable.sortController)||void 0===t||null===(r=t.placeholder)||void 0===r||r.hide(),n.timerId&&clearTimeout(n.timerId),n.timerId=setTimeout((function(){var e;null===(e=n.sortable.sortController)||void 0===e||e.refreshNode()}),100),o<1&&(n.interval=Vp(e))})),n._prevValue=u}})),s()(this,"dispose",(function(){n.canvasEvents.scrollTimer&&(clearInterval(n.canvasEvents.scrollTimer),n.canvasEvents.scrollTimer=null),Hp(n.interval),n.interval=null})),this.sortable=t,this.container=t.container,this.canvasEvents=t.canvasEvents,this.viewportHelper=t.viewportHelper,this.timerId=null,this.interval=null,this._prevValue=null,this._triggerSize=40}));var jv=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r,o,a){var i;return d()(this,n),i=t.call(this),s()(m()(i),"container",null),s()(m()(i),"sortController",null),s()(m()(i),"viewportHelper",null),s()(m()(i),"renderWidgets",null),s()(m()(i),"canvasEvents",null),s()(m()(i),"sorting",!1),s()(m()(i),"refreshNode",$()((function(){var e,t;i.enabled&&null!==(e=i.sortController)&&void 0!==e&&e.sorting&&(null===(t=i.sortController)||void 0===t||t.refreshNode())}),300)),s()(m()(i),"createGridSort",$()((function(){if(i.viewportHelper.getViewData()&&i.viewportHelper.getViewData("type")===Gs.GRID){i.sortController&&i.sortController.dispose();var e=i.kernel.options.handleScrollEvent;i.sortController=new _v({container:i.container,getNodes:i.getNodes,onSort:i.onSort,onSortStart:i.onSortStart,onSortMove:function(){},onSortStop:i.onSortStop,onDispose:i.onSortDispose,checkVisible:i.checkVisible,disableDragger:!0,createPlaceholder:i.createPlaceholder,scroller:e&&new Rv(m()(i)),isOuterScroller:!e})}}),300)),s()(m()(i),"createPlaceholder",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ke()(Sv,t.concat([i.renderWidgets,i.engine]))})),s()(m()(i),"checkVisible",(function(){return i.viewportHelper.getViewData("type")===Gs.GRID})),s()(m()(i),"getNodes",(function(){var e=i.viewportHelper.getViewportSelections(),t=i.container.getBoundingClientRect(),n=e.row,r=e.col,o=n+e.rowCount-1,a=i.kernel.groupService.grouping,l=[],c=i.viewportHelper.getViewportMaxWidth(),s=0;a&&(c-=Ms("groupPaddingX"),s=Ms("groupPaddingX"));var u=i.viewportHelper.getRectByCell(n,r,void 0,!1),d=i.viewportHelper.getContainerSize();a||l.push({id:"group",type:vv,disabled:!0,rect:{top:u.top+t.top,left:u.left+t.left,width:d.width,height:d.height}});for(var f={},p=function(e){if(f[e.value])return!1;var n=i.viewportHelper.getGroupRect(e),r={top:n.top+t.top,left:n.left+t.left,width:n.width,height:n.height};l.push({id:e.value,type:vv,rect:r,sortable:!1}),f[e.value]=!0};n<=o;)if(i.viewportHelper.isFilteredRow(n))n++;else{var h=i.viewportHelper.getRectByCell(n,r,void 0,!1),m=i.renderWidgets.getWidget("DraggableWidget",n);if(m){var v=m.getNode(),g=void 0;a&&(g=i.kernel.groupService.getGroupByRow(n))&&p(g),l.push({id:n,type:mv,rect:{top:h.top+t.top,left:s+t.left,width:c,height:h.height},groupId:g?g.value:"group",dragNode:{node:v,rect:{top:v.y+t.top,left:v.x+t.left,width:v.width,height:v.height}},sortable:i.viewportHelper.isSortable()}),n++}else n++}return l})),s()(m()(i),"onSortStart",(function(){i.sorting=!0,i.canvasEvents.setDisabled(!0),i.canvasEvents.setStatus(null),i.kernel.execute("setSelections",{}),i.container.setAttribute("data-dragging",!0),i.container.style.cursor="grabbing"})),s()(m()(i),"onSortStop",(function(){i.container.removeAttribute("data-dragging"),i.container.style.cursor=null})),s()(m()(i),"onSort",(function(e,t,n,r,o,a,l){var c=i.kernel.tableModel.getActiveView(),s=c.get("rows")[n].id,u=null!=r?c.get("rows")[r].id:null,d=a,f=i.viewportHelper.getGroupColConfig(),p=f?f.id:null;i.kernel.execute("moveRow",s,p,u,d)})),s()(m()(i),"onSortDispose",(function(){i.sorting=!1,i.container.removeAttribute("data-dragging"),i.container.style.cursor=null,i.canvasEvents.setDisabled(!1)})),s()(m()(i),"enable",(function(){i.enabled=!0})),s()(m()(i),"disable",(function(){i.enabled=!1})),i.kernel=r,i.engine=e.engine,i.viewportHelper=e.viewportHelper,i.lakeCanvasRenderer=e.lakeCanvasRenderer,i.container=i.lakeCanvasRenderer.getContainer(),i.renderWidgets=o,i.canvasEvents=a,i.enabled=!0,i.bindEvents(),i.createPlaceholder=i.createPlaceholder.bind(m()(i)),i}return p()(n,[{key:"bindEvents",value:function(){var e=this;this._register(mp(this.kernel,[gc.VIEW_CHANGED,gc.COL_CHANGED],(function(){e.createGridSort()}))),this._register(mp(this.canvasEvents,"scroll",(function(){e.refreshNode()}))),this._containerObserver=new op(this.container,null,{full:!0}),this._containerObserver.startObserver(),this._containerObserver.onDidChange=function(t){e.refreshNode()}}},{key:"dispose",value:function(){this._containerObserver.dispose(),Me()(k()(n.prototype),"dispose",this).call(this)}}]),n}(),Av=function(){function e(t,n){var r=this;d()(this,e),s()(this,"container",null),s()(this,"viewportHelper",null),s()(this,"draw",(function(){if(r.viewportHelper.getViewData()&&r.viewportHelper.getViewData("type")===Gs.GRID){r.area.dispose(),r.canvasRenderer.clear();var e=r.viewportHelper.getViewportSelections(),t=r.viewportHelper.getViewportRect();if(r._prevSelections&&r.viewportHelper.diffRows(r._prevSelections,e).forEach((function(e){r.renderWidgets.hideWidget(e)})),r.renderViewport.render(e,t,!0),r.renderHeader.render(e,!0),r._prevSelections=e,-1!==r.viewportHelper.hasFrozenCol()){var n=r.viewportHelper.getFrozenViewportSelections(),o=r.viewportHelper.getFrozenHeaderSelections(),a=r.viewportHelper.getFrozenViewportRect();r.viewportHelper.setFreeze(!0),r.renderViewport.render(n,a,!1),r.renderHeader.render(o,!1),r.viewportHelper.setFreeze(!1),r.renderSelections.render(t,!0),r.renderSelections.renderCellPreviewer(t),r.viewportHelper.setFreeze(!0),r.renderSelections.render(a,!1),r.renderHeader.renderSerialNumCol(e),r.renderHeader.drawFrozenLine(),r.viewportHelper.setFreeze(!1)}}})),s()(this,"onHoverIcon",(function(e){var t=e.type,n=e.target;r.viewportHelper.kernel;var o,a,i,l=r.canvasRenderer,c=l.ctx,s=l.container;switch(["colConfigIcon","groupCollapseIcon"].includes(n.type)||(c.save(),c.beginPath(),c.rect(Ms("rowHeaderWidth"),Ms("colHeaderHeight"),s.offsetWidth,s.offsetHeight),c.clip()),n.type){case"selectDropDownIcon":am.drawDropdownIcon(c,n.x,n.y,r.renderViewport,"mouseenter"===t);break;case"mentionDropDownIcon":km.drawMentionIcon(c,n.x,n.y,r.renderViewport,"mouseenter"===t);break;case"linkIcon":fm.drawLinkIcon(c,n.x,n.y,r.renderViewport,"mouseenter"===t);break;case"cellTipIcon":if(clearTimeout(r.cellTipTimer),"mouseenter"===t){var u=r.engine.container.getBoundingClientRect();o=r.viewportHelper.getRectByCell(n.row,n.col);var d=r.viewportHelper.getViewData("rowHeight"),f={left:n.x+u.left,top:n.y+u.top-d.value,width:o.width,height:o.height};r.cellTipTimer=setTimeout((function(){_h.show(f,n.value.stateInfo,{placement:"left"})}),200)}else _h.hide();break;case"checkboxIcon":o=r.viewportHelper.getRectByCell(n.row,n.col),Cm.drawCheckbox(c,{bbox:o},n.value,r.renderViewport,"mouseenter"===t);break;case"phoneIcon":Em.drawPhoneIcon(c,n.x,n.y,r.renderViewport,"mouseenter"===t);break;case"mentionCloseIcon":if(!(a=r.viewportHelper.getColConfigs(n.col)))break;if(!(i=r.viewportHelper.getCellValue(n.row,a)))break;if(!i.map((function(e){return e.id})).includes(n.value.value.id))break;km.drawMentionClose(c,n.value,r.renderViewport,"mouseenter"===t);break;case"selectCloseIcon":if(!(a=r.viewportHelper.getColConfigs(n.col)))break;if(!(i=r.viewportHelper.getCellValue(n.row,a)))break;if(!i.includes(n.value.value.id))break;am.drawCloseIcon(c,n.value,r.renderViewport,"mouseenter"===t);break;case"emailIcon":xm.drawEmailIcon(c,n.x,n.y,r.renderViewport,"mouseenter"===t);break;case"fileLinkIcon":clearTimeout(r.tipTimer),"mouseenter"===t?r.tipTimer=setTimeout((function(){var e=r.engine.container.getBoundingClientRect();_h.show({left:n.x+e.left,top:n.y+e.top,width:n.w,height:n.h},n.value.name,{placement:"top",shouldHiddenOnHover:!0})}),200):_h.hide();break;case"colConfigIcon":r.renderWidgets.drawDropDown(n,"mouseenter"===t);break;case"groupCollapseIcon":r.renderViewport.drawCollapse(n.group,n.bottom,"mouseenter"===t);break;case"uploadFileIcon":o=r.viewportHelper.getRectByCell(n.row,n.col),n.cellType===Ac.IMAGE?dm.drawUploadFileIcon(o,c,r.renderViewport,"mouseenter"===t):lm.drawUploadFileIcon(o,c,r.renderViewport,"mouseenter"===t);break;case"indexLockIcon":var p=r.engine.container.getBoundingClientRect(),h=n.coord;_h.show({left:h.left+p.left-n.size,top:h.top+p.top+h.height,width:h.width,height:h.height},_c("索引列无法被删除、移动、替换"),{placement:"bottomLeft",timeout:1e3})}["colConfigIcon","groupCollapseIcon"].includes(n.type)||c.restore()})),s()(this,"onDragging",(function(e){var t=e.target,n=e.dragTarget,o=r.canvasRenderer.container;r.currentTarget!==t&&(r.draw(),r.currentTarget=t),r.canvasRenderer.useStyle(Ms(r.engine.themeManager,"drag"));var a=r.canvasRenderer.getCtx();if(!("col"===n.type&&n.col===t.col+1||"row"===n.type&&n.row===t.row+1||"col"!==n.type)){var i=r.viewportHelper.columnSizes[t.col],l=i.offset+i.size+r.viewportHelper.getRowHeaderWidth()-r.viewportHelper.getViewData("scrollX");a.lineWidth=2,a.beginPath(),a.moveTo(l,0),a.lineTo(l,o.offsetHeight),a.stroke()}})),s()(this,"onResizing",(function(e){r.draw();var t=r.canvasRenderer.getCtx();r.canvasRenderer.useStyle(Ms(r.engine.themeManager,"resizeLine"));var n=r.canvasRenderer.container;t.beginPath(),t.moveTo(e.offset,0),t.lineTo(e.offset,n.offsetHeight),t.stroke()})),s()(this,"show",(function(){r.gridSortable&&r.gridSortable.enable()})),s()(this,"hide",(function(){r.gridSortable&&r.gridSortable.disable()})),this.kernel=n,this.engine=t.engine,this.event=this.engine.eventManager,this.canvasEvents=this.event.canvasEvents,this.area=this.event.area,this.canvasRenderer=t.canvasRenderer,this.viewportHelper=t.viewportHelper,this.renderWidgets=new Um(t,n,this.engine),this.renderHeader=new Sh(t,n,this.renderWidgets),this.renderViewport=new Sm(t,n,this.renderWidgets),this.renderSelections=new Gm(t,n),this.kernel.readOnly||(this.gridSortable=new jv(t,n,this.renderWidgets,this.canvasEvents)),this.bindEvents(),this._prevSelections=null}return p()(e,[{key:"getRenderer",value:function(){return this.canvasRenderer()}},{key:"isSorting",get:function(){return this.gridSortable&&this.gridSortable.sorting}},{key:"bindEvents",value:function(){var e=this;this.canvasEvents.on("hoverAddGridRow",(function(t,n){"mouseenter"===n&&(e.renderWidgets.activeAddGridRow=t.row),e.canvasRenderer.hoverAddCol=!1,e.canvasRenderer.activeRow=null,e.renderViewport.activeGroupStats=!1,e.draw()})),this.canvasEvents.on("hoverAddGridCol",(function(t,n){e.canvasRenderer.hoverAddCol="mouseenter"===n,e.renderWidgets.activeAddGridRow=!1,e.renderViewport.activeGroupStats=!1,e.draw()})),this.canvasEvents.on("hoverRow",(function(t){(void 0!==e.canvasRenderer.activeRow||t)&&(e.canvasRenderer.activeRow=t,e.renderWidgets.activeAddGridRow=!1,e.canvasRenderer.hoverAddCol=!1,e.renderViewport.activeGroupStats=!1,e.draw())})),this.canvasEvents.on("hoverGroupStats",(function(t,n){"mouseenter"===n&&(e.renderViewport.activeGroupStats=t),e.canvasRenderer.activeRow=!1,e.renderWidgets.activeAddGridRow=!1,e.canvasRenderer.hoverAddCol=!1,e.draw()})),this.canvasEvents.on("hoverCol",(function(t,n){if(!e.kernel.readOnly&&(e.draw(),"mouseenter"===n)){var r=e.viewportHelper.getRectByCell(0,t.col),o=r.left,a=r.width;e.renderWidgets.drawDropDown({type:"colConfigIcon",col:t.col,id:t.id,x:o+a-20,y:16},!1)}})),this.canvasEvents.on("hoverIcon",this.onHoverIcon),this.canvasEvents.on("dragging",this.onDragging),this.canvasEvents.on("resizing",this.onResizing),this.canvasEvents.on("groupStateChanged",(function(){e.kernel.emit(gc.GROUP_STATE_CHANGED),e.draw()})),this.kernel.on(gc.RECORD_WILL_MOVE,(function(t){t?e.viewportHelper.warningSelections=t.selections:delete e.viewportHelper.warningSelections,e.draw()}))}}]),e}();var Tv=function(e){g()(n,ph);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r){var o;return d()(this,n),o=t.call(this),s()(m()(o),"canvasEvents",null),s()(m()(o),"draw",(function(){var e=o.tableModel.getActiveView();e&&e.get("type")===Gs.GRID&&(o.area.dispose(),o.renderView.draw())})),s()(m()(o),"onSelected",(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.draw(),e&&n.scrollInView&&(null===(t=o.viewportHelper)||void 0===t||t.scrollToRowIfNeed(e.activeRow))})),s()(m()(o),"onFilterChanged",(function(e){var t=o.tableModel.getView(e);o.viewportHelper.scrollTo(t.get("scrollX"),0)})),s()(m()(o),"onGroupByCreatedAt",(function(){var e=o.viewportHelper.getViewData("rowCount");o.viewportHelper.selectCell(e-1,0)})),s()(m()(o),"show",(function(){o.canvasRenderer.show(),o.lakeCanvasRenderer.show(),o.renderView.show()})),s()(m()(o),"hide",(function(){o.canvasRenderer.clear(),o.canvasRenderer.hide(),o.lakeCanvasRenderer.hide(),o.renderView.hide()})),o.viewManager=e,o.engine=e.engine,o.kernel=o.engine.kernel,o.event=o.engine.eventManager,o.area=o.event.area,o.renderer="canvas",o.container=r,o.viewportHelper=new bh(m()(o),e.kernel),o.tableModel=e.kernel.tableModel,o.type=Gs.GRID,o.canvasRenderer=e.canvasRenderer,o.lakeCanvasRenderer=e.lakeCanvasRenderer,o.ctx=o.canvasRenderer.getCtx(),o.renderView=new Av(m()(o),o.engine.kernel),o.cellUploader=new fh(o.engine,o.kernel),o.bindEvents(),o}return p()(n,[{key:"getRenderer",value:function(){return this.canvasRenderer}},{key:"bindEvents",value:function(){this.kernel.on(gc.CONTENT_CHANGED,this.draw),this.kernel.on(gc.CONTENT_CHANGED_ASYNC,this.draw),this.kernel.on(gc.SELECTED,this.onSelected),this.kernel.on(gc.GROUP_BY_CREATED_AT,this.onGroupByCreatedAt),this.kernel.on(gc.FILTER_CHANGED,this.onFilterChanged),this.engine.on(qs.SCROLL,this.draw)}}]),n}();var Lv=function(e){g()(n,hh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r){var o;return d()(this,n),o=t.call(this,e,r),s()(m()(o),"isScrollYAtTop",(function(){return 0===o.getViewData().scrollY})),s()(m()(o),"isScrollYAtBottom",(function(){return o.getViewData().scrollY>=o.totalHeight})),s()(m()(o),"scrollBy",(function(e){var t=o.getViewData().scrollY+(e||0);o.scrollTo(t)})),s()(m()(o),"scrollTo",(function(e){var t=o.getViewData();t.scrollY!==e&&(t.scrollY=Math.max(0,Math.min(e,o.totalHeight-o.container.offsetHeight)),o.engine.emit(qs.SCROLL),o.kernel.tableService.lazyAutoSave())})),s()(m()(o),"scrollToCard",(function(e){var t=o.getViewData("scrollY"),n=o.rowPositions[e];t<n.top?o.scrollTo(n.top):t+o.container.offsetHeight>n.top+o.cardHeight&&o.scrollTo(n.top-o.cardHeight)})),o.rowSizes=[],o.columnSizes=[],o.hiddenColumnConfigs={},o.cardHeight=null,o}return p()(n,[{key:"isFrozenCol",value:function(e){var t=this.getViewData("frozenCol");return void 0!==t&&e<=t}},{key:"isLastRow",value:function(e){return this.getViewData("rows").length-1===Number(e)}},{key:"isLastRowById",value:function(e){var t=this.getViewData("rows");return t[t.length-1].id===e}},{key:"getCellValueByColId",value:function(e,t){var n=this.getViewData("rows"),r=this.tableModel.getFieldsMap()[t];return this.recordsModel.getCellValue(n[e].id,t,r)}},{key:"updateLayout",value:function(){var e=this.container.offsetWidth,t=Ms("card"),n=t.maxRowWidth,r=t.colPadding,o=t.minRowCount,a=5;e<n&&(a=Math.max(5-Math.ceil((n-e)/300),o)),this.colCardCount=a,this.cardWidth=Math.floor(e-r*(a+1))/a}},{key:"updateCardHeight",value:function(){var e=this,t=Ms("card"),n=t.rowPadding,r=t.colPadding,o=t.titleHeight,a=t.lineHeight,i=t.lineGap,l=this.tableModel.getFieldsMap(),c=this.getViewData(),s=(c.showField?o:0)+a+i,u=0;c.cover.show&&(u+=Math.round(this.cardWidth/1.6));for(var d=0;d<c.columns.length;d++){var f=l[c.columns[d].id];f&&(c.columns[d].hidden||(u+=s,f.type===Ac.IMAGE?u+=4:f.type===Ac.TEXTAREA&&(u+=14)))}this.cardHeight=u-i+46,this.rowPositions={};var p=n,h=r,m=0,v=1;c.rows.forEach((function(t,o){t.filtered||(e.rowPositions[o]={top:p,left:h},++m===e.colCardCount?(p+=e.cardHeight+n,h=r,m=0,v++):h+=r+e.cardWidth)})),0===m&&v--,this.totalHeight=this.cardHeight*v+n*(v+1),this.cardRows=v}},{key:"getContainerSize",value:function(){return this.updateLayout(),this.updateCardHeight(),{width:"100%",height:this.totalHeight}}},{key:"getColConfigs",value:function(e){return this.columnConfigs[e]||this.hiddenColumnConfigs[e]}},{key:"onResize",value:function(){this.updateLayout()}},{key:"isDataReady",value:function(){return!0}},{key:"getScrollData",value:function(){return{}}},{key:"getViewportData",value:function(){var e=this.getViewData();if(0===e.rows.length)return null;var t=e.scrollY,n=Math.max(this.getRowByHeight(t,"start")-this.colCardCount,0),r=this.getRowByHeight(t+this.container.offsetHeight,"end")+this.colCardCount-1,o=Object.keys(this.rowPositions);return{start:n,end:r=Math.min(r,o[o.length-1])}}},{key:"getRowByHeight",value:function(e,t){var n=Object.keys(this.rowPositions),r=this.cardHeight;if(e<=Ms("card").colPadding)return parseInt(n[0],10);for(var o=0;o<n.length;o++){var a=this.rowPositions[n[o]];if(a.top+r>=e&&"start"===t)return parseInt(n[o],10);if(a.top>=e&&"end"===t)return parseInt(n[o],10)}return parseInt(n[n.length-1],10)}},{key:"getCellValue",value:function(e,t){var n=this.getViewData("rows");return this.recordsModel.getCellValue(n[e].id,t.id,t)}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getViewData("rows");return this.recordsModel.getCellFormattedValue(n[e].id,t.id,t)}},{key:"refreshColumns",value:function(){var e=this.getViewData();if(e){var t=e.columns,n=this.kernel.tableModel.getTableFields(),r={};n.forEach((function(e,t){r[e.id]=t})),this.columnConfigs={},this.hiddenColumnConfigs={};for(var o=0;o<t.length;o++){var a=n[r[t[o].id]];t[o].hidden?this.hiddenColumnConfigs[o]=a:this.columnConfigs[o]=a}}}},{key:"onSearched",value:function(e){e&&0!==e.count?(this.rowPositions||(this.updateLayout(),this.updateCardHeight()),e.cell&&e.selectCell||delete this.searchTarget):delete this.searchTarget}},{key:"isSortable",value:function(e){return e||(e=this.kernel.tableModel.getActiveView()),!this.kernel.sortService.isAuto(e)}},{key:"selectById",value:function(e){var t=this.getViewData("rows").findIndex((function(t){return t.id===e}));this.searchTarget=t,this.scrollToCard(t)}},{key:"isRowInSearch",value:function(e){var t=this.getViewData("rows");return this.kernel.searchService.isRecordInSearch(t[e].id)}},{key:"isSearchTarget",value:function(e){return e===this.searchTarget}}]),n}();var Dv=function(e){g()(n,ph);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r){var o;return d()(this,n),o=t.call(this),s()(m()(o),"draw",(function(){var e=o.tableModel.getActiveView();e&&e.get("type")===Gs.CARD&&(o.viewportHelper.refreshColumns(),o.engine.emit(qs.DRAW_DOM))})),s()(m()(o),"onSearched",(function(e){e&&0!==e.count?e.cell&&(e.selectCell?o.viewportHelper.selectCellById(e.cell.row,e.cell.col.id):o.draw()):o.draw()})),s()(m()(o),"onTempState",(function(e){e||o.draw()})),s()(m()(o),"show",(function(){o.domRenderer.show()})),s()(m()(o),"hide",(function(){o.domRenderer.hide(),setTimeout((function(){o.domRenderer.clear()}),160)})),o.viewManager=e,o.engine=e.engine,o.renderer="dom",o.container=r,o.viewportHelper=new Lv(m()(o),e.kernel),o.tableModel=e.kernel.tableModel,o.type=Gs.CARD,o.domRenderer=e.domRenderer,o.bindEvents(),o}return p()(n,[{key:"getRenderer",value:function(){return this.domRenderer}},{key:"bindEvents",value:function(){var e=this.engine.kernel;e.on(gc.CONTENT_CHANGED,this.draw),e.on(gc.RECORD_WILL_MOVE,this.onTempState)}},{key:"unbindEvents",value:function(){this.engine.kernel.off(gc.CONTENT_CHANGED,this.draw)}},{key:"onReize",value:function(){this.viewportHelper.onResize()}}]),n}();var Pv=function(e){g()(n,hh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r){var o;return d()(this,n),o=t.call(this,e,r),s()(m()(o),"scrollToCard",(function(e){var t=o.container.querySelector(".lake-table-card-row-".concat(e));t&&Object(rt.a)(t,{scrollMode:"if-needed",block:"nearest"})})),o.hiddenColumnConfigs={},o}return p()(n,[{key:"isFrozenCol",value:function(e){var t=this.getViewData("frozenCol");return void 0!==t&&e<=t}},{key:"getCellValueByColId",value:function(e,t){var n=this.getViewData("rows"),r=this.tableModel.getFieldsMap()[t];return this.recordsModel.getCellValue(n[e].id,t,r)}},{key:"getCellValue",value:function(e,t){var n=this.getViewData("rows");return this.recordsModel.getCellValue(n[e].id,t.id,t)}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getViewData("rows");return this.recordsModel.getCellFormattedValue(n[e].id,t.id,t)}},{key:"getRowIndexById",value:function(e){return this.tableModel.getActiveView().rowMap[e]}},{key:"getGroupColConfig",value:function(){var e=this.kernel.groupService.getGroup();if(e&&0!==e.length)return this.getColConfig(e[0].id)}},{key:"isDataReady",value:function(){return!!this.tableModel.getActiveView().rowMap}},{key:"isEmptyUngrouped",value:function(e){return!e.value&&0===e.rows.length}},{key:"isUngrouped",value:function(e){return!e.value}},{key:"getColConfigs",value:function(e){return this.columnConfigs[e]||this.hiddenColumnConfigs[e]}},{key:"refreshColumns",value:function(){var e=this.getViewData();if(e){var t=e.columns,n=this.kernel.tableModel.getTableFields(),r={};n.forEach((function(e,t){r[e.id]=t})),this.columnConfigs={},this.hiddenColumnConfigs={};for(var o=0;o<t.length;o++){var a=n[r[t[o].id]];t[o].hidden?this.hiddenColumnConfigs[o]=a:this.columnConfigs[o]=a}}}},{key:"getGroupPostionByIndex",value:function(e){return 0===e?{left:6}:{left:280*e+6}}},{key:"getGroupPosition",value:function(e){var t=this;if(""===e.value)return this.getGroupPostionByIndex(0);var n=this.getViewData("groupData"),r=n.findIndex((function(t){return t.value===e.value})),o=n.find((function(e){return t.isEmptyUngrouped(e)}));return n.find((function(e){return t.isUngrouped(e)}))&&!o&&(r+=1),this.getGroupPostionByIndex(r)}},{key:"getAddGroupPostion",value:function(){var e=this,t=this.getViewData("groupData"),n=t.length;return t.find((function(t){return e.isEmptyUngrouped(t)}))&&(n-=1),this.getGroupPostionByIndex(n)}},{key:"getColConfig",value:function(e){return this.kernel.tableModel.getFieldsMap()[e]}},{key:"getContainerSize",value:function(){return{width:"100%",height:"100%"}}},{key:"getTotalWidth",value:function(){return 300*this.kernel.groupService.group.length}},{key:"getViewportData",value:function(){var e=this.getViewData();return 0===e.rows.length?null:{start:0,end:e.rows.length}}},{key:"isFilteredRow",value:function(e){return!!this.getViewData("rows")[e].filtered}},{key:"onSearched",value:function(e){e&&0!==e.count&&e.cell&&e.selectCell||delete this.searchTarget}},{key:"selectById",value:function(e){var t=this.getViewData("rows"),n=t.findIndex((function(t){return t.id===e}));this.searchTarget=t[n].id,this.scrollToCard(n)}},{key:"isRowInSearch",value:function(e){var t=this.getViewData("rows");return this.kernel.searchService.isRecordInSearch(t[e].id)}},{key:"isSearchTarget",value:function(e){var t=this.getViewData("rows");return!!t[e]&&t[e].id===this.searchTarget}}]),n}();var Mv=function(e){g()(n,ph);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r){var o;return d()(this,n),o=t.call(this),s()(m()(o),"draw",(function(){var e=o.tableModel.getActiveView();e&&e.get("type")===Gs.KANBAN&&(o.viewportHelper.refreshColumns(),o.engine.emit(qs.DRAW_DOM))})),s()(m()(o),"onSearched",(function(e){e&&0!==e.count?e.cell&&(e.selectCell?o.viewportHelper.selectCellById(e.cell.row,e.cell.col.id):o.draw()):o.draw()})),s()(m()(o),"onTempState",(function(e){e||o.draw()})),s()(m()(o),"show",(function(){o.domRenderer.show()})),o.viewManager=e,o.engine=e.engine,o.renderer="dom",o.container=r,o.viewportHelper=new Pv(m()(o),e.kernel),o.tableModel=e.kernel.tableModel,o.type=Gs.KANBAN,o.domRenderer=e.domRenderer,o.bindEvents(),o}return p()(n,[{key:"getRenderer",value:function(){return this.domRenderer}},{key:"bindEvents",value:function(){var e=this.engine.kernel;e.on(gc.CONTENT_CHANGED,this.draw),e.on(gc.RECORD_WILL_MOVE,this.onTempState)}},{key:"unbindEvents",value:function(){this.engine.kernel.off(gc.CONTENT_CHANGED,this.draw)}},{key:"onResize",value:function(){}},{key:"hide",value:function(){var e=this;this.domRenderer.hide(),setTimeout((function(){e.domRenderer.clear()}),160)}}]),n}();var Nv=function(e){g()(r,ce.a);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(r);function r(e){var t;return d()(this,r),t=n.call(this),s()(m()(t),"container",null),s()(m()(t),"changeView",(function(e){var n=t.tableModel.getView(e);if(n){var r=t.getViewRendererByType(n.type);t.viewRenderer||(t.viewRenderer=t.getViewRendererByType(Gs.GRID)),t.viewRenderer!==r&&(t.viewRenderer.hide(),t.viewRenderer=r,t.viewRenderer.show()),t.viewRenderer.draw()}})),s()(m()(t),"draw",(function(){var e;null===(e=t.viewRenderer)||void 0===e||e.draw()})),s()(m()(t),"onSearched",(function(e){t.viewRenderer.viewportHelper.onSearched(e),t.draw()})),s()(m()(t),"watchContainer",(function(){t._containerObserver=new op(t.container),t._containerObserver.startObserver(),t._containerObserver.onDidChange=function(){t.onResize()}})),s()(m()(t),"onResize",(function(){t.resizing||(t.resizing=!0,t.resizeTimer=setTimeout((function(){t.resizing=!1;var e=t.container.getBoundingClientRect();t._containerWidth=e.width,t._containerHeight=e.height,t.resize()}),100))})),s()(m()(t),"getContainerWidth",(function(){return t._containerWidth})),s()(m()(t),"getContainerHeight",(function(){return t._containerHeight})),s()(m()(t),"resizeCanvas",(function(){t.canvasRenderer.onResize(),t.draw()})),t.engine=e,t.container=e.container,t.kernel=e.kernel,t.tableModel=t.kernel.tableModel,t.initRenderers(),t.bindEvent(),t._containerWidth=t.container.offsetWidth,t._containerHeight=t.container.offsetHeight,t}return p()(r,[{key:"initRenderers",value:function(){this.canvasRenderer=new fp(this.container,this.engine),this.lakeCanvasRenderer=new sh(this.container,this.engine.theme,{rect:{x:0,y:Ms("colHeaderHeight")-1,width:this.container.offsetWidth-.5,height:this.container.offsetHeight-Ms("colHeaderHeight")}}),this.domRenderer=new pp(this.container,this.engine.theme)}},{key:"initViews",value:function(){var e=new Tv(this,this.container),t=new Dv(this,this.container),n=new Mv(this,this.container);this.viewRenderers=[e,t,n];var r=this.tableModel.getActiveView();r&&this.changeView(r.get("id"))}},{key:"getViewRendererByType",value:function(e){return this.viewRenderers.find((function(t){return t.type===e}))}},{key:"getCanvas",value:function(){return this.canvasRenderer.canvas}},{key:"getDom",value:function(){return this.domRenderer.dom}},{key:"getLakeCanvas",value:function(){return this.lakeCanvasRenderer.getCanvas()}},{key:"bindEvent",value:function(){var e=this;this.kernel.on(gc.VIEW_CHANGED,this.changeView),this.engine.on(qs.CANVAS_RESIZE,this.resizeCanvas),window.addEventListener("resize",this.onResize),this.watchContainer(),this.engine.on(qs.DESTROY,(function(){var t;null===(t=e._containerObserver)||void 0===t||t.dispose(),window.removeEventListener("resize",e.onResize)})),this.kernel.on(gc.SEARCHED,this.onSearched),this.canvasRenderer.on("image-loaded",this.draw)}},{key:"refreshImage",value:(t=E()(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.canvasRenderer.refreshImage();case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getViewRenderer",value:function(){return this.viewRenderer}},{key:"resize",value:function(){this.engine.emit(qs.RESIZE),this.viewRenderer&&(this.viewRenderer.getRenderer().onResize(),this.viewRenderer.onResize&&this.viewRenderer.onResize(),this.viewRenderer.draw())}}]),r}(),Iv={search:function(e){e.preventDefault(),this.engine.emit(qs.SEARCH)},save:function(e){e.preventDefault(),this.kernel.tableService.save()},undo:function(e){e.preventDefault(),this.kernel.history.undo()},redo:function(){this.kernel.history.redo()},enter:function(e){e.preventDefault();var t=this.viewportHelper.getSelections(),n=t.activeRow,r=t.activeCol,o=this.viewportHelper.getColConfigs(r),a=o.type,i=this.viewportHelper.getCellValue(n,o),l=this.engine.readOnly;if([Ac.FILE,Ac.IMAGE].includes(a)&&this.engine.emit(qs.SHOW_FILE_MANAGE_MODAL,{cellType:a,row:n,col:r,colConfigs:o,rowId:this.viewportHelper.getRowId(n),value:i}),[Ac.CHECKBOX].includes(a)&&(l||this.kernel.execute("setCellValue",n,r,{value:!i})),[Ac.DATE,Ac.LINK].includes(a)){var c={cellType:a,row:n,col:r,value:i,note:void 0};this.engine.emit(qs.SHOW_CELL_EDITOR,c,{focus:!0})}},shiftClick:function(e){this.viewportHelper.selectTo(e)},input:function(e){var t=e.target,n=e.value,r=t.row,o=t.col,a=t.colType;if(Mc.includes(a)){var i=this.viewportHelper.getCellByRowCol(r,o),l="";switch(a){case Ac.INPUT:n.indexOf("\n")>=0&&(l=n.replace(/\n/g,"")),l=n.slice(0,300);break;case Ac.TEXTAREA:l=n.slice(0,1e4);break;case Ac.NUMBER:l=Cs(n);break;case Ac.LINK:l=null!=i&&i.src||n?{src:(null==i?void 0:i.src)||"",name:n}:null;break;case Ac.PHONE:case Ac.EMAIL:l=n.slice(0,1e4);break;case Ac.DATE:l=n?function(e){var t=e;return ld(e)&&4===e.length&&/^(0[1-9]|1[0-2]).*(0[1-9]|[12][0-9]|3[01])/g.test(e)&&(t=_e()().year()+e),_e()(t).format("YYYY-MM-DD")}(n.slice(0,1e4)):""}l=void 0===l?"":l,this.kernel.command.execute("setCellValue",r,o,{value:l})}},backspace:function(){var e=this.engine,t=this.viewportHelper.getSelections().activeCol,n=this.viewportHelper.getColConfigs(t),r=null==n?void 0:n.type;Gc.includes(r)||(e.emit(qs.BACKSPACE),this.kernel.execute("clearValue"))},esc:function(e){"INPUT"===e.target.tagName&&e.stopPropagation(),this.kernel.execute("clearCopy")},moveDirection:function(e){var t=e.key,n=this.viewportHelper.getViewData(),r=n.selections,o=r.activeRow,a=r.activeCol;switch(t){case"ArrowLeft":a=0;break;case"ArrowRight":a=n.colCount-1;break;case"ArrowUp":o=0;break;case"ArrowDown":o=n.rowCount-1}this.viewportHelper.selectCell(o,a)},movePage:function(e){for(var t="PageUp"===e.key?-1:1,n=this.viewportHelper.getViewData(),r=n.selections,o=r.activeRow,a=r.activeCol,i=this.container.offsetHeight-Ms("colHeaderHeight"),l=o;i>0;)if(this.viewportHelper.isFilteredRow(l))l+=t;else{if((l+=t)<0){l-=t;break}if(l>=n.rowCount){l=n.rowCount-1;break}i-=n.rowHeight.value}this.viewportHelper.selectCell(l,a)},selectDirection:function(e){var t=e.key,n=this.viewportHelper.getSelections(),r=n.row,o=n.col,a=n.rowCount,i=n.colCount,l=n.activeRow,c=n.activeCol,s=this.viewportHelper.getGridSize();switch(t){case"ArrowLeft":c<o+i-1?i-=1:o>0&&(o-=1,i+=1);break;case"ArrowRight":c<=o?i+=1:(o+=1,i-=1);break;case"ArrowUp":l<r+a-1?a-=1:r>0&&(r-=1,a+=1);break;case"ArrowDown":l<=r?a+=1:(r+=1,a-=1)}"ArrowLeft"===t||"ArrowUp"===t?this.viewportHelper.scrollToCell(r,o):this.viewportHelper.scrollToCell(r+a-1,o+i-1),this.kernel.execute("setSelections",{row:r,col:o,rowCount:Math.min(a,s.rowCount-r),colCount:Math.min(i,s.colCount-o),activeRow:l,activeCol:c})},insertRowUp:function(e){e.preventDefault();var t=this.viewportHelper.getSelections(),n=t.activeRow,r=t.activeCol;this.kernel.execute("insertRow",n),this.viewportHelper.selectCell(n,r)},insertRowDown:function(e){e.preventDefault();var t=this.viewportHelper.getSelections(),n=t.activeRow,r=t.activeCol;this.kernel.execute("insertRow",n+1),this.viewportHelper.selectCell(n+1,r,!0)},shiftTab:function(e){e.preventDefault();var t=this.viewportHelper.getSelections(),n=t.activeRow,r=t.activeCol;if(0!==r){for(var o=r-1;o>0&&this.viewportHelper.isHiddenCol(o);)o-=1;this.viewportHelper.selectCell(n,o)}},tab:function(e){e.preventDefault();for(var t=this.viewportHelper.getViewData(),n=t.selections,r=n.activeRow,o=n.activeCol+1,a=r,i=t.colCount-1,l=t.rowCount-1;o<i&&this.viewportHelper.isHiddenCol(o);)o+=1;o>i&&(o=0,a=Math.min(l,a+1));var c={row:a,col:o,rowCount:1,colCount:1};this.viewportHelper.scrollToCell(c.row,c.col),this.kernel.execute("setSelections",c)},down:function(e){e.preventDefault();for(var t=this.viewportHelper.getViewData(),n=t.selections,r=n.activeRow,o=n.activeCol,a=r,i=Math.min(t.rowCount-1,a+1);i<t.rowCount-1&&this.viewportHelper.isFilteredRow(i);)i+=1;if(!this.viewportHelper.isFilteredRow(i)){var l={row:i,col:o,rowCount:1,colCount:1};this.kernel.execute("setSelections",l),this.viewportHelper.scrollToCell(i,o)}},copy:function(e){this.kernel.execute("copy",e)},paste:function(e){var t=this;if(!this.engine.readOnly&&"INPUT"!==e.target.tagName){e.preventDefault();var n=Ou(e,"innerCopy"),r=this.kernel.processService,o=Ou(e),a=o.html,i=o.text,l=o.files;if(n&&n===r.clipId)this.kernel.execute("paste",r.clipboardData);else if(a)this.emit("waiting","pasting"),setTimeout((function(){var e=function(e){var t=Object(Ce.b)(e),n=t.rowCount,r=t.colCount,o=t.columns,a=t.vStore,i=[],l=[];l.length=r;for(var c=0,s={};c<n;){if(i[c]=[],i[c].length=r,t.data[c])for(var u=0;u<r;)t.data[c][u]&&(i[c][u]=xu(t.data[c][u],a)),u++;c++}for(var d=0;d<r;)l[d]=wc(o[d])||{},d++;return s.table=i,s.columns=l,s.startCell=t.startCell||{row:0,col:0},s}(a);t.kernel.execute("paste",e)}),100);else if(i)this.emit("waiting","pasting"),setTimeout((function(){var e=function(e){var t=e.split("\n"),n=[];return t.forEach((function(e,t){var r=e.split("\t");n[t]=[],r.forEach((function(e,r){var o=e;!function(e){return"number"==typeof e||""!=(e=""+e)&&!!ku.test(e)}(o)?n[t][r]={value:o}:n[t][r]={value:Su(o)}}))})),{table:n}}(i);t.kernel.execute("paste",e)}),100);else if(l&&l.length>0){var c=this.viewportHelper.getViewData().selections,s=c.activeRow,u=c.activeCol;this.engine.emit(qs.PASTE_FILE,l[0],{row:s,col:u})}}},up:function(e){e.preventDefault();for(var t=this.viewportHelper.getViewData().selections,n=t.activeRow,r=t.activeCol,o=n,a=Math.max(0,o-1);a>0&&this.viewportHelper.isFilteredRow(a);)a-=1;if(!this.viewportHelper.isFilteredRow(a)){var i={row:a,col:r,rowCount:1,colCount:1};this.viewportHelper.scrollToCell(a,r),this.kernel.execute("setSelections",i)}},selectAll:function(e){e.preventDefault();var t=this.kernel.tableModel.getActiveView().data,n=t.selections,r=t.rows,o=t.columns;this.kernel.execute("setSelections",{row:0,col:0,rowCount:r.length,colCount:o.length,activeRow:n.activeRow||0,activeCol:n.activeCol||0})},space:function(e){e.preventDefault();var t=this.viewportHelper.getViewData().selections.activeRow;this.engine.emit(qs.SHOW_ROW_EDITOR,{row:t})},editLink:function(){var e=this.kernel.tableModel,t=e.getActiveView().data,n=t.selections,r=t.columns,o=n.activeRow,a=n.activeCol;isNaN(a)||e.getFieldsMap()[r[a].id].type===Ac.LINK&&this.engine.emit(qs.SHOW_CELL_EDITOR,{row:o,col:a})}};var Fv=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;return d()(this,n),(e=t.call(this)).data=[],e}return p()(n,[{key:"add",value:function(e,t){this.data.push({rect:e,data:t})}},{key:"find",value:function(e,t){var n=at()(this.data,(function(n){var r=n.rect,o=r.left,a=r.top,i=r.width,l=r.height;if(o<=e&&a<=t&&o+i>=e&&a+l>=t)return!0}));return n&&n.data}},{key:"dispose",value:function(){this.data=[]}}]),n}();for(var Bv=function(e){g()(n,ce.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this),s()(m()(r),"onScroll",(function(e){for(var t=e.target;t&&t!==document.body;){if(t.classList&&t.classList.contains("lake-table-dom-renderer")){var n=r.engine.viewManager.getViewRenderer().viewportHelper;n.scrollTo&&n.scrollTo(r.dom.scrollTop),e.preventDefault();break}t=t.parentNode}})),r.eventManager=e,r.handlers=e.handlers,r.engine=e.engine,r.kernel=r.engine.kernel,r.container=r.engine.container,r.theme=r.engine.theme,r.dom=r.engine.viewManager.getDom(),r.bindEvents(),r}return p()(n,[{key:"bindEvents",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"unbindEvents",value:function(){window.removeEventListener("scroll",this.onScroll,!0)}}]),n}(),Vv={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},Hv=1;Hv<13;Hv++)Vv["f"+Hv]=111+Hv;var zv={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},qv={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"},Uv=function(e){return Vv[e]||e.toUpperCase().charCodeAt(0)};function Gv(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Wv(e){var t=(e=e.replace(/\s/g,"")).split(",");return""===t[t.length-1]&&(t[t.length-2]+=","),t}var Yv=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,n),r=t.call(this),s()(m()(r),"options",void 0),s()(m()(r),"container",void 0),s()(m()(r),"filter",void 0),s()(m()(r),"isPressed",void 0),s()(m()(r),"getPressedKeyCodes",void 0),s()(m()(r),"handlers",{}),s()(m()(r),"downKeys",[]),s()(m()(r),"mods",void 0),s()(m()(r),"init",(function(){r._register(mp(r.container,"keydown",r.dispatch)),r._register(mp(r.container,"keyup",r.clearModifier)),r._register(mp(window,"focus",r.resetModifiers))})),s()(m()(r),"on",(function(e,t){for(var n=Wv(e),o=0;o<n.length;o++){var a=[];(e=n[o].split("+")).length>1&&(a=r._getMods(e),e=[e[e.length-1]]),e=e[0],(e=Uv(e))in r.handlers||(r.handlers[e]=[]),r.handlers[e].push({shortcut:n[o],method:t,key:n[o],mods:a})}})),s()(m()(r),"off",(function(e){for(var t=Wv(e),n=0;n<t.length;n++){var o=[],a=t[n].split("+");if(a.length>1&&(o=r._getMods(a)),e=a[a.length-1],e=Uv(e),!r.handlers[e])return;for(var i=0;i<r.handlers[e].length;i++){var l=r.handlers[e][i];null!=l&&l.mods&&Gv(l.mods,o)&&(delete r.handlers[e][i],r.handlers[e]=r.handlers[e].filter((function(e){return!!e})))}}})),s()(m()(r),"clear",(function(){r.handlers={}})),s()(m()(r),"_getMods",(function(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=zv[t[n]];return t})),s()(m()(r),"dispatch",(function(e){var t,n,o,a,i;if(t=e.keyCode,-1===r.downKeys.indexOf(t)&&r.downKeys.push(t),93!==t&&224!==t||(t=91),t in r.mods)r.mods[t]=!0;else if(t in r.handlers&&(r.updateModifierKey(e),r.filter(e)))for(a=0;a<r.handlers[t].length;a++){if(!(n=r.handlers[t][a]))return;for(o in i=n.mods.length>0,r.mods)(!r.mods[o]&&n.mods.indexOf(+o)>-1||r.mods[o]&&-1===n.mods.indexOf(+o))&&(i=!1);(0!==n.mods.length||r.mods[16]||r.mods[18]||r.mods[17]||r.mods[91])&&!i||!1===n.method(e,n)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}})),s()(m()(r),"clearModifier",(function(e){var t=e.keyCode,n=r.downKeys.indexOf(t);n>=0&&r.downKeys.splice(n,1),93!==t&&224!==t||(t=91),t in r.mods&&(r.mods[t]=!1)})),s()(m()(r),"resetModifiers",(function(){for(var e in r.mods)r.mods[e]=!1})),s()(m()(r),"dispose",(function(){Me()((e=m()(r),k()(n.prototype)),"dispose",e).call(e),r.clear()})),r.options=o,r.container=o.container||document,r.filter=o.filter||function(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"===t||"SELECT"===t||"TEXTAREA"===t)},r.isPressed=o.isPressed||function(e){return"string"==typeof e&&(e=Uv(e)),-1!==this.downKeys.indexOf(e)},r.getPressedKeyCodes=o.getPressedKeyCodes||function(){return this.downKeys.slice(0)},r.mods={16:!1,18:!1,17:!1,91:!1},r.init(),r}return p()(n,[{key:"updateModifierKey",value:function(e){for(var t in this.mods)this.mods[t]=e[qv[t]]}}]),n}(),$v=[{name:"enter",key:"enter",readEnable:!1,editingDisable:!1,requireSelections:!0,views:[Gs.GRID]},{name:"down",key:"down",readEnable:!0,editingDisable:!0,requireSelections:!0,views:[Gs.GRID]},{name:"up",key:"up",readEnable:!0,editingDisable:!1,requireSelections:!0,views:[Gs.GRID]},{name:"insertRowDown",key:"shift+enter",readEnable:!1,editingDisable:!0,requireSelections:!0,views:[Gs.GRID]},{name:"insertRowUp",key:"⌘+shift+enter",readEnable:!1,editingDisable:!0,requireSelections:!0,views:[Gs.GRID]},{name:"backspace",key:"backspace, del, delete",readEnable:!1,editingDisable:!0,requireSelections:!0,views:[Gs.GRID]},{name:"tab",key:"tab, right",readEnable:!0,editingDisable:!1,requireSelections:!0,views:[Gs.GRID]},{name:"shiftTab",key:"shift+tab, left",readEnable:!0,editingDisable:!1,requireSelections:!0,views:[Gs.GRID]},{name:"esc",key:"esc",readEnable:!0,editingDisable:!1,views:[Gs.GRID]},{name:"moveDirection",key:"⌘+up, ⌘+down, ⌘+left, ⌘+right",readEnable:!0,editingDisable:!0,requireSelections:!0,views:[Gs.GRID]},{name:"movePage",key:"pagedown, pageup",readEnable:!0,editingDisable:!0,requireSelections:!0,views:[Gs.GRID]},{name:"selectPage",key:"shift+pagedown, shift+pageup",readEnable:!0,editingDisable:!0,requireSelections:!0,views:[Gs.GRID]},{name:"selectToRowStart",key:"shift+home",readEnable:!0,editingDisable:!0,requireSelections:!0,views:[Gs.GRID]},{name:"selectToEnd",key:"⌘+shift+home, ⌘+shift+end",readEnable:!0,editingDisable:!0,requireSelections:!0,views:[Gs.GRID]},{name:"selectDirection",key:"shift+up, shift+down, shift+left, shift+right",readEnable:!0,editingDisable:!0,requireSelections:!0,views:[Gs.GRID]},{name:"selectAll",key:"⌘+A",readEnable:!0,editingDisable:!1,views:[Gs.GRID]},{name:"editLink",key:"⌘+K",readEnable:!1,editingDisable:!1,views:[Gs.GRID]},{name:"copy",readEnable:!0,editingDisable:!0,requireSelections:!0,views:[Gs.GRID]},{name:"cut",readEnable:!1,editingDisable:!0,requireSelections:!0,views:[Gs.GRID]},{name:"paste",readEnable:!1,editingDisable:!1,requireSelections:!0,views:[Gs.GRID]},{name:"search",key:"⌘+F",readEnable:!0,editingDisable:!1},{name:"undo",key:"⌘+Z",readEnable:!1,editingDisable:!0},{name:"redo",key:"⌘+shift+Z",readEnable:!1,editingDisable:!0},{name:"save",key:"⌘+S",readEnable:!1,editingDisable:!1},{key:"space",name:"space",readEnable:!0,editingDisable:!0,requireSelections:!0,views:[Gs.GRID]}],Kv=$v,Xv=$v.filter((function(e){return e.readEnable}));$v.filter((function(e){return e.editingDisable})).map((function(e){return e.name}));var Zv=$v.filter((function(e){return e.requireSelections})).map((function(e){return e.name})),Qv={ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,TAB:9,BACKSPACE:8,DELETE:46,DEL:46,END:35,SPACE:32},Jv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return as.macos?e:e.replace(/⌘/g,"ctrl")},eg=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=r?Xv:Kv,a=o.concat([{name:"copy",key:"⌘+C"},{name:"paste",key:"⌘+V"}]),i=n.keyCode,l=n.shiftKey,c=n.altKey,u=n.ctrlKey,d=n.metaKey,f=Object.keys(Qv).reduce((function(e,t){return e[Qv[t]]=t,e}),{}),p=(f[i]||"").toLowerCase(),h=p?null:null===(e=n.key)||void 0===e?void 0:e.toUpperCase(),m=(s()(t={"⌘":d,shift:l,alt:c,ctrl:u},h,h),s()(t,p,p),t),v=Object.keys(m).reduce((function(e,t){return m[t]&&e.push(t),e}),[]).join("+"),g=a.find((function(e){return Jv(e.key).split(/[,]\s*/).find((function(e){return e===v}))}))||{};return{hotKey:g.key,eventName:g.name}};var tg=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this),s()(m()(r),"engineEvent",void 0),s()(m()(r),"engine",void 0),s()(m()(r),"kernel",void 0),s()(m()(r),"hotkeys",void 0),s()(m()(r),"keymaster",void 0),s()(m()(r),"bindHotkeys",(function(){(r.engine.readOnly?Xv:Kv).forEach((function(e){var t=function(t){r.isValidHotkeyEvent(t,e.name)&&r.engineEvent.emit(e.name,t)};if(e.key){var n=Jv(e.key);r.keymaster.on(n,t)}else window.addEventListener(e.name,t),r.engine.on("focusChanged",(function(n){n||window.removeEventListener(e.name,t)})),r.engine.on(qs.DESTROY,(function(){window.removeEventListener(e.name,t)}))}))})),s()(m()(r),"isValidHotkeyEvent",(function(e,t){var n;if(!r.engineEvent.active)return!1;if(null===(n=r.hotkeys)||void 0===n||!n.includes(t))return!1;var o=r.kernel.tableModel.getActiveView();if(Zv.includes(t)&&qe()(o.get("selections")))return!1;var a=e.target;return"INPUT"!==a.tagName&&"TEXTAREA"!==a.tagName})),r.engineEvent=e,r.engine=e.engine,r.kernel=e.kernel,r.keymaster=new Yv({filter:function(){return!0}}),r.bindEvent(),r}return p()(n,[{key:"bindEvent",value:function(){var e=this;this._register(mp(this.engine,"focusChanged",(function(t){e.keymaster.clear(),t&&e.bindHotkeys()}))),this._register(mp(this.kernel,gc.VIEW_CHANGED,(function(t){var n,r,o=e.kernel.tableModel.getView(t);o&&(e.hotkeys=(n=o.type,r=[],$v.forEach((function(e){e.views&&!e.views.includes(n)||r.push(e.name)})),r))})))}},{key:"dispose",value:function(){Me()(k()(n.prototype),"dispose",this).call(this),this.keymaster.dispose()}}]),n}();var ng=function(e){g()(n,ce.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r){var o;return d()(this,n),o=t.call(this),s()(m()(o),"onViewChanged",(function(e){var t=o.kernel.tableModel.getView(e);if(t){var n=o.engine.viewManager.getViewRendererByType(t.type);n.type!==o.rendererType&&(o.rendererEvent&&o.rendererEvent.unbindEvents(),o.rendererEvent=o.getRendererEvent(n.type),o.rendererEvent&&o.rendererEvent.bindEvents(),o.rendererType=n.type),o.viewportHelper=n.viewportHelper,o.rendererEvent.viewportHelper=o.viewportHelper}})),o.options=r,o.container=e.container,o.engine=e,o.kernel=o.engine.kernel,o.theme=o.engine.theme,o.handlers=Iv,o.active=!0,o.area=new Fv,o.bindEvents(),o.initRendererEvents(),o.hotkeyManage=new tg(m()(o)),o}return p()(n,[{key:"bindEvents",value:function(){var e=this;Object.keys(this.handlers).forEach((function(t){e.on(t,e.handlers[t].bind(e))})),this.kernel.on(gc.VIEW_CHANGED,this.onViewChanged),this.engine.on("focusChanged",(function(t){var n,r;t||null!==(n=e.viewportHelper)&&void 0!==n&&n.removeSelections&&(null===(r=e.viewportHelper)||void 0===r||r.removeSelections())})),this.engine.on(qs.DESTROY,(function(){var t;null===(t=e.hotkeyManage)||void 0===t||t.dispose()}))}},{key:"initRendererEvents",value:function(){var e;this.canvasEvents=new av(this,null===(e=this.options)||void 0===e?void 0:e.canvasEvents),this.domEvents=new Bv(this)}},{key:"getRendererEvent",value:function(e){return e===Gs.GRID?this.canvasEvents:this.domEvents}}]),n}();var rg=["addGroupItem","clearValue","disableForm","enableForm","enableForm","insertCol","moveCol","removeCol","insertRow","moveRow","removeRows","removeView","removeForm","removeGroupItem","resizeCol","setCellValue","setColumns","setCover","setFilter","setGroup","setGroupState","setShowField","setSort","setStat","updateCol","updateForm","updateGroupItem","updateRowHeight","updateViewName","insertCard","insertForm","insertGrid","insertKanban","undo","redo"],og=function(e){g()(n,ce.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r){var o;return d()(this,n),o=t.call(this),s()(m()(o),"submitCommand",(function(e,t){rg.includes(e)&&(o.kernel.command.remote||o.collab.send(e,JSON.stringify(t)))})),s()(m()(o),"applyCommand",(function(e,t){(t=JSON.parse(t)).tableId===o.kernel.tableModel.getTableId()&&o.kernel.executeRemote(e,t)})),s()(m()(o),"memberChange",(function(e,t){switch(t=wc(t),e){case"members":o.members=t,o.emit("memberChange",o.members);break;case"join":if(o.members.find((function(e){return e.uuid===t.uuid})))break;o.members.push(t),o.emit("memberChange",o.members);break;case"leave":o.members=o.members.filter((function(e){return e.uuid!==t.uuid})),o.emit("memberChange",o.members)}})),s()(m()(o),"getMembers",(function(){return o.members})),o.engine=e,o.kernel=e.kernel,o.collab=r,o.members=[],o.init(),o}return p()(n,[{key:"init",value:function(){var e=this;this.collab.on("message",this.applyCommand),this.collab.on("member",this.memberChange),this.kernel.command.on("snapshot",(function(t){return e.submitCommand(t.action,t)})),this.kernel.command.on("undo",(function(t){return e.submitCommand("undo",t)})),this.kernel.command.on("redo",(function(t){return e.submitCommand("redo",t)}))}}]),n}();var ag=function(e){g()(o,ce.a);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(o);function o(e,t){var n;return d()(this,o),n=r.call(this),s()(m()(n),"kernel",null),s()(m()(n),"setPosition",(function(e){if(!isNaN(e.x)&&!isNaN(e.y)){var t=n.kernel.tableModel.activeView;if(t){var r=t.get("type"),o=n.viewManager.getViewRenderer().viewportHelper;r===Gs.GRID?o.scrollTo(e.x,e.y):r===Gs.CARD&&o.scrollTo(e.y)}}})),s()(m()(n),"prepareTable",(function(){if(n.disableHash||!n.defaultViewId){var e=n.kernel.tableModel.defaultView;n.kernel.tableModel.activeView&&(e=n.kernel.tableModel.activeView.get("id")),n.kernel.execute("activeView",e)}else n.kernel.execute("activeView",n.defaultViewId)})),n.container=e,n.options=t,n.lang=t.lang,n.locale=t.locale,n.readOnly=t.readOnly,n.platform=t.platform,n.abilities=t.abilities,n.theme=lt()(zs,null==t?void 0:t.theme),n.renderConfig=t.renderConfig,n.uid=fs(6),n.isFocus=!1,n.initialize(),n}return p()(o,[{key:"initialize",value:function(){this.kernel=new tp(this.options,this.theme),this.viewManager=new Nv(this),this.eventManager=new ng(this,this.options.eventManager),this.viewManager.eventManager=this.eventManager,this.viewManager.initViews(),this.bindEvents(),this.defaultViewId=this._getDefaultViewId()}},{key:"themeManager",get:function(){return this.options.themeManager}},{key:"setOT",value:function(e){return this.ot=new og(this,e),this.ot}},{key:"_getDefaultViewId",value:function(){var e=new Ws(window.location.href);return e.isEmbed()?e.getHash():window.location.hash.slice(1)}},{key:"enable",value:function(){this.readOnly=!1,this.emit(qs.DATA_READY)}},{key:"disable",value:function(){this.readOnly=!0}},{key:"getMetaData",value:function(){return this.kernel.getMetaData()}},{key:"setValue",value:function(e){e&&(this.kernel.setValue(e.sheet,e.version),this.emit(qs.DATA_READY))}},{key:"setContent",value:(n=E()(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.kernel.setContent(t);case 4:this.prepareTable();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getValue",value:function(e){return this.kernel.getValue(e)}},{key:"requestRecords",value:(t=E()(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kernel.tableModel.requestRecords();case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"bindEvents",value:function(){var e=this;this.kernel.on(gc.DATA_LOADED,this.prepareTable),this.proxy(this.kernel,[gc.CHANGED,gc.STATUS_CHANGED,gc.COL_CHANGED],qs.CHANGED),this.proxy(this.kernel,[gc.CHANGED,gc.SELECTED,gc.STATUS_CHANGED],qs.UPDATED),this.proxy(this.kernel,[gc.SAVE],qs.SAVE),this.proxy(this.kernel,[gc.SEARCHED],qs.SEARCHED),this.proxy(this.kernel,[gc.COMMAND_END],qs.COMMAND_END),this._cancelThemeChange=Ts(this.themeManager,E()(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.viewManager.refreshImage();case 2:e.viewManager.draw();case 3:case"end":return t.stop()}}),t)}))))}},{key:"proxy",value:function(e,t,n){var r=this;t.forEach((function(t){e.on(t,(function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];r.emit.apply(r,[n].concat(t))}))}))}},{key:"isEmptyTable",value:function(){return this.kernel.isEmptyTable()}},{key:"destroy",value:function(){var e;null===(e=this._cancelThemeChange)||void 0===e||e.call(this),_h.hide(),this.emit(qs.DESTROY)}},{key:"focus",value:function(){var e=!1===this.isFocus;this.isFocus=!0,e&&this.emit("focusChanged",this.isFocus)}},{key:"blur",value:function(){var e=!0===this.isFocus;this.isFocus=!1,e&&this.emit("focusChanged",this.isFocus)}}]),o}();var ig=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),(r=t.call(this,e)).engine=null,r.canvasContainer=l.a.createRef(),r.state={top:60},r}return p()(n,[{key:"getData",value:function(e){if(!e){var t=wc(kc);t.id=fs(32);var n=wc(jc);return n.id=fs(32),t.defaultView=n.id,t.columns.forEach((function(e){e.id=fs(32),[Ac.SELECT,Ac.MULTI_SELECT].includes(e.type)&&e.options.forEach((function(e){e.id=fs(6)}))})),n.tableId=t.id,t.views={},t.views[n.id]=n,t.isBlank=!0,{format:"laketable",type:"Table",version:"1.3",larkJson:!0,sheet:[t]}}return e}},{key:"componentDidMount",value:function(){var e=this.getData(this.props.value),t=new ag(this.canvasContainer.current,{data:e,lang:this.props.lang,readOnly:this.props.readOnly,platform:this.props.platform,ot:this.props.ot,locale:this.locale,docId:this.props.docId,versionMode:this.props.versionMode,docType:this.props.docType,type:this.props.type,abilities:this.props.abilities||{},webProxy:this.props.webProxy,webSdk:this.props.webSdk,mention:this.props.mention,disableHash:this.props.disableHash,renderConfig:this.props.renderConfig,downloadFileHandler:this.props.downloadFileHandler,theme:this.props.theme,maxRecordCount:this.props.maxRecordCount,focusCellContainer:this.props.focusCellContainer&&this.props.focusCellContainer.current,eventManager:this.props.eventManager,themeManager:this.props.themeManager,handleScrollEvent:this.props.handleScrollEvent,avatarOrigin:this.props.avatarOrigin});this.props.onTableReady(t),this.setState({table:t}),Cc.setLanguage(this.props.lang)}},{key:"componentWillUnmount",value:function(){this.state.table&&this.state.table.destroy()}},{key:"render",value:function(){var e;return l.a.createElement("div",{ref:this.canvasContainer,className:"".concat("lake-table","-container")},null===(e=this.props)||void 0===e?void 0:e.children)}}]),n}(l.a.Component);s()(ig,"propTypes",{platform:X.a.object,onTableReady:X.a.func,lang:X.a.string,value:X.a.object,readOnly:X.a.bool,ot:X.a.bool,disableHash:X.a.bool,docId:X.a.number,docType:X.a.string,type:X.a.string,webProxy:X.a.object,webSdk:X.a.object,mention:X.a.object,versionMode:X.a.bool,abilities:X.a.object,themeManager:X.a.object,downloadFileHandler:X.a.func,formulaContainer:X.a.oneOfType([X.a.object,X.a.element]),focusCellContainer:X.a.oneOfType([X.a.object,X.a.element]),handleScrollEvent:X.a.bool,theme:X.a.object,maxRecordCount:X.a.number,eventManager:X.a.object,renderConfig:X.a.object,avatarOrigin:X.a.string}),s()(ig,"defaultProps",{lang:"zh-cn",onTableReady:function(){},avatarOrigin:""}),ig.defaultProps={handleScrollEvent:!0,renderConfig:{searchFilter:!1,grid:{freezeColIdx:0,groupStats:!0}}};var lg=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"viewRaw",function(){var t=E()(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sleep();case 2:if("mentionLinkIcon"!==n.type){t.next=5;break}return e.viewMention(n.value),t.abrupt("return");case 5:t.t0=n.cellType,t.next=t.t0===Ac.IMAGE?8:t.t0===Ac.FILE?10:t.t0===Ac.LINK?12:t.t0===Ac.EMAIL?14:t.t0===Ac.PHONE?16:18;break;case 8:return e.viewImage(n),t.abrupt("break",19);case 10:return e.viewFile(n),t.abrupt("break",19);case 12:return e.viewLink(n),t.abrupt("break",19);case 14:return e.viewEmail(n),t.abrupt("break",19);case 16:return e.viewPhone(n),t.abrupt("break",19);case 18:return t.abrupt("break",19);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),s()(m()(e),"viewImage",(function(e){dp(e.list,e.index)})),s()(m()(e),"viewFile",(function(e){var t=Nd(e.value.src,e.value.size);t&&(as.desktop&&window.openExternalLink?window.openExternalLink(t,!0):window.open(t,"_blank","noopener,noreferrer"))})),s()(m()(e),"viewLink",(function(e){as.desktop&&window.openExternalLink?window.openExternalLink(e.value.src,!0):window.open(e.value.src,"_blank","noopener,noreferrer")})),s()(m()(e),"viewEmail",(function(e){window.open("mailto:"+e.value)})),s()(m()(e),"viewPhone",(function(e){location.href="tel:"+e.value})),s()(m()(e),"viewMention",(function(e){window.open("/"+e.value.login,"_blank")})),s()(m()(e),"sleep",(function(){return new Promise((function(e){setTimeout((function(){e()}),100)}))})),e}return p()(n,[{key:"componentDidMount",value:function(){this.props.table.on(qs.VIEW_CELL_DATA,this.viewRaw)}},{key:"render",value:function(){return null}}]),n}(l.a.Component),cg=function(e){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 257",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-index-todo-list",e.className].filter(Boolean).join(" ")}),i.createElement("g",{fill:"currentColor",fillRule:"nonzero"},i.createElement("path",{d:"M197 35c17.673 0 32 14.327 32 32v130c0 17.673-14.327 32-32 32H59c-17.673 0-32-14.327-32-32V67c0-17.673 14.327-32 32-32h138Zm0 20H59c-6.525 0-11.834 5.209-11.996 11.695L47 67v130c0 6.525 5.209 11.834 11.695 11.996L59 209h138c6.525 0 11.834-5.209 11.996-11.695L209 197V67c0-6.525-5.209-11.834-11.695-11.996L197 55Z"}),i.createElement("path",{d:"M47 90h162v20H47z"}),i.createElement("rect",{x:77,y:17,width:20,height:56,rx:10}),i.createElement("rect",{x:160,y:17,width:20,height:56,rx:10})))},sg=function(e){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-check-outlined",e.className].filter(Boolean).join(" ")}),i.createElement("defs",null,i.createElement("path",{id:"2733936519a",d:"M0 0h256v256H0z"})),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("mask",{id:"2733936519b",fill:"#fff"},i.createElement("use",{xlinkHref:"#2733936519a"})),i.createElement("path",{d:"M221.256 54.188c4.315-4.277 11.28-4.247 15.556.068 4.202 4.239 4.246 11.036.155 15.329l-.223.227-133.162 132c-4.212 4.176-10.957 4.25-15.258.221l-.229-.22-68.838-68.217c-4.315-4.276-4.347-11.24-.07-15.556 4.2-4.24 10.997-4.344 15.326-.292l.23.221 61.094 60.543L221.256 54.188Z",fill:"currentColor",fillRule:"nonzero",mask:"url(#2733936519b)"})))},ug=function(e){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-arrow-left",e.className].filter(Boolean).join(" ")}),i.createElement("path",{d:"M154.995 58.157c3.834 3.834 3.904 10.007.21 13.927l-.21.215-48.99 48.99c-3.834 3.834-3.904 10.007-.21 13.927l.21.215 48.99 48.99c3.905 3.905 3.905 10.237 0 14.142-3.834 3.834-10.008 3.904-13.927.21l-.215-.21-48.99-48.99c-11.599-11.599-11.715-30.331-.348-42.073l.348-.353 48.99-48.99c3.905-3.905 10.237-3.905 14.142 0Z",fill:"currentColor",fillRule:"nonzero"}))},dg=function(e){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-arrow-right",e.className].filter(Boolean).join(" ")}),i.createElement("path",{d:"M101.005 198.563c-3.834-3.834-3.904-10.008-.21-13.927l.21-.215 48.99-48.99c3.834-3.834 3.904-10.008.21-13.927l-.21-.215-48.99-48.99c-3.905-3.905-3.905-10.237 0-14.142 3.834-3.834 10.008-3.904 13.927-.21l.215.21 48.99 48.99c11.599 11.598 11.715 30.331.348 42.072l-.348.354-48.99 48.99c-3.905 3.905-10.237 3.905-14.142 0Z",fill:"currentColor",fillRule:"nonzero"}))},fg=function(e){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-review-arrow-down",e.className].filter(Boolean).join(" ")}),i.createElement("defs",null,i.createElement("path",{id:"3742204692a",d:"M0 0h256v256H0z"})),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("mask",{id:"3742204692b",fill:"#fff"},i.createElement("use",{xlinkHref:"#3742204692a"})),i.createElement("path",{d:"M181.1 118.925 135 165.096a9.889 9.889 0 0 1-14 0l-46.1-46.17c-3.866-3.873-3.866-10.15 0-14.022a9.892 9.892 0 0 1 7-2.904h92.2c5.468 0 9.9 4.439 9.9 9.915a9.922 9.922 0 0 1-2.9 7.01Z",fill:"currentColor",fillRule:"nonzero",mask:"url(#3742204692b)"})))},pg=function(e){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-review-arrow-right",e.className].filter(Boolean).join(" ")}),i.createElement("path",{d:"m115.925 74.9 46.171 46.1a9.889 9.889 0 0 1 0 14l-46.17 46.1c-3.873 3.866-10.15 3.866-14.022 0a9.892 9.892 0 0 1-2.904-7V81.9c0-5.468 4.439-9.9 9.915-9.9a9.922 9.922 0 0 1 7.01 2.9Z",fill:"currentColor",fillRule:"nonzero"}))},hg=function(e){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-icon-loading-desk",e.className].filter(Boolean).join(" ")}),i.createElement("defs",null,i.createElement("pattern",{id:"3718679761c",width:"100%",height:"100%",patternUnits:"objectBoundingBox"},i.createElement("use",{xlinkHref:"#3718679761a"})),i.createElement("image",{id:"3718679761a",width:22,height:22,xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFqADAAQAAAABAAAAFgAAAAAcITNaAAAEB0lEQVQ4EU2V3W4bNxCFZ0juSpaFukF9Y8Mx0su+QoG8aF+iQZ+i6Su0Nw1SBIhbVbb1uz9kv7OUahOguMsdnjlzZobynz/8UnIuVkq2nOscR62jvax6HmXTmdmDmf/tzjRfWfB/vZR1jPHRgj2zvwkWt8E9WAiYsNbpp3ftOTgvo+CftxHgnsfO3A7BbOcx7tjfgbQVaIy2TSEEmOhwZgqovodQYF0m8FcOBD3g74jbPcY7Tu2S+UZMIbZJqXkOIe9eAWN2GkXUiiKRJHCanE4fM757MYXEjnA3NXwDLDwhxxPrpm0vXjMW2xq6IqizgovxibXCks47ApWeTx58HTyuYbpOF83TPMZt2zZnxgKETMXlWePMuuag7k367gF7Lh7WHuIqeljNZumfpkmPl4vF83w+397e3h4S9JXtiVEpldk4nplLZ31TYvXNetZnL2GVYngg7K9xlr42i8XqzXL5eHd3R+Ji6LquOWmsQ5Whu4BGgUxDeqvUTlIoaasY/UsI8a/Z5fzzd1dXD9fX1+umaQK2LTPMZrNwYqyyqFWgKlHCtIqphurZXdLahtL8FGP6Y7n85vf7+5svgJa+79uUiIHR99RT6Stw1ZNCo8RqRchJtBgzs4Ifj0cbhv5z07S/vX17+/Hm5qaDWTsMg8jJSIyJ8xhSam1iLCoaAj2PFwette2sbpfy0/v3P/7KC8mPi773gEohZ3cqwWDuJBFSyaTxcAZjPSNrVWlpjvPZ7LC8XH76/t27b/dd/iEaHRdspIEyCmT4FJhjasiipbOkXxIzERRn3icwYhrpu45VHfZIif05juXejnsbInXrYW8xdSCNkBsBwEEd6F0SoJ1eBQgITaxatYGVQOmwbDv6Zk32DpjNSfqVEz+XRdPYcCjuPcyHjCoIDamUyUVJkBT5WmNWqOAwADC4LpkMsNtWrIlpLNQY1C6iBep5xDstUkpHrXN/JF4L7GUXc6rhKoypq/RxAKy3Qn0F21N4ByTsYJZJO/egtUDOQ4kU5UCYFKBY+0irhYHLdQzjkBOGXCoO06LrcKBPlAV12JFU6mrssVGHkCoVeCJ3pcmeW0jlqHvcowIImZb0kscBWWCssKuu0naatRt6safTtCfdkX3KMihUU/FE1TaqCOdPwSyiFjS4+TFwkuuEzcFJCoAlA85AAdBZiQS2zp1BBxmn9bcQsRO4EJHRUYrHoGCyD1BOCh1H7E4AyILGgGI6MYWCKgUTYKbOgjUZJumR0AHn0p7KVMKIH/HgX1L8z7ZKAiDsOTySFWqZ2sBIQWpwDBkLzW8R0Ig3NAAZx5zhA6b8SVBukp2wBYYTztWV62IChQ6YOjqFCj3U05aLKsE7rSdP5E4+kYx+sf8AV5aZ7yAju6MAAAAASUVORK5CYII="}),i.createElement("path",{id:"3718679761b",d:"M0 0h24v24H0z"})),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("mask",{id:"3718679761d",fill:"#fff"},i.createElement("use",{xlinkHref:"#3718679761b"})),i.createElement("path",{d:"M12 1.114a1.286 1.286 0 1 1 0 2.572A8.314 8.314 0 1 0 20.314 12c0-.805-.114-1.593-.336-2.349a1.286 1.286 0 0 1 2.467-.724c.291.99.44 2.022.44 3.073 0 6.012-4.873 10.886-10.885 10.886S1.114 18.012 1.114 12 5.988 1.114 12 1.114Z",fill:"url(#3718679761c)",fillRule:"nonzero",mask:"url(#3718679761d)"})))},mg=function(e){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-delete-solid",e.className].filter(Boolean).join(" ")}),i.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm46.1 67.1c-4.028-4.028-10.512-4.1-14.628-.216l-.222.216-30.651 30.65-30.65-30.65c-4.027-4.028-10.512-4.1-14.627-.216l-.222.216c-4.028 4.027-4.1 10.512-.216 14.627l.216.222 30.65 30.65L83.1 159.25c-4.028 4.028-4.1 10.512-.216 14.628l.216.222c4.027 4.027 10.512 4.099 14.627.215l.222-.215 30.65-30.652L159.25 174.1c4.028 4.027 10.512 4.099 14.628.215l.222-.215c4.027-4.028 4.099-10.512.215-14.628l-.215-.222-30.652-30.651 30.652-30.65c4.027-4.027 4.099-10.512.215-14.627l-.215-.222Z",fill:"currentColor",fillRule:"evenodd"}))},vg=function(e){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-add",e.className].filter(Boolean).join(" ")}),i.createElement("path",{d:"M128 28c5.523 0 10 4.477 10 10v80h80c5.523 0 10 4.477 10 10s-4.477 10-10 10h-80v80c0 5.523-4.477 10-10 10s-10-4.477-10-10v-80H38c-5.523 0-10-4.477-10-10s4.477-10 10-10h80V38c0-5.523 4.477-10 10-10Z",fill:"currentColor",fillRule:"evenodd"}))},gg=function(e){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-close",e.className].filter(Boolean).join(" ")}),i.createElement("path",{d:"M34.41 34.499c3.906-3.905 10.238-3.905 14.143 0l79.903 79.902 79.903-79.902c3.905-3.905 10.237-3.905 14.142 0 3.905 3.905 3.905 10.237 0 14.142l-79.903 79.903 79.903 79.903c3.834 3.834 3.904 10.008.21 13.927l-.21.215c-3.905 3.906-10.237 3.906-14.142 0l-79.903-79.903-79.903 79.903c-3.905 3.906-10.237 3.906-14.142 0-3.906-3.905-3.906-10.237 0-14.142l79.902-79.903L34.41 48.641c-3.835-3.834-3.904-10.007-.21-13.927Z",fill:"currentColor",fillRule:"evenodd"}))},bg=function(e){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-close-outlined",e.className].filter(Boolean).join(" ")}),i.createElement("path",{d:"M34.41 34.499c3.906-3.905 10.238-3.905 14.143 0l79.903 79.902 79.903-79.902c3.905-3.905 10.237-3.905 14.142 0 3.905 3.905 3.905 10.237 0 14.142l-79.903 79.903 79.903 79.903c3.834 3.834 3.904 10.008.21 13.927l-.21.215c-3.905 3.906-10.237 3.906-14.142 0l-79.903-79.903-79.903 79.903c-3.905 3.906-10.237 3.906-14.142 0-3.906-3.905-3.906-10.237 0-14.142l79.902-79.903L34.41 48.641c-3.835-3.834-3.904-10.007-.21-13.927Z",fill:"currentColor",fillRule:"evenodd"}))},yg=function(e){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-comment-hide",e.className].filter(Boolean).join(" ")}),i.createElement("defs",null,i.createElement("path",{id:"2573787990a",d:"M0 0h256v256H0z"})),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm0 20c-50.81 0-92 41.19-92 92s41.19 92 92 92 92-41.19 92-92-41.19-92-92-92Zm55.143 52.902c3.795 3.873 3.801 10.047.067 13.928l-.212.213-63.285 62a10 10 0 0 1-13.776.209l-.219-.208-32.715-32.041c-3.946-3.865-4.012-10.196-.147-14.142 3.794-3.873 9.966-4.007 13.924-.354l.217.207 25.717 25.187 56.288-55.144c3.945-3.865 10.276-3.8 14.141.145Z",fill:"currentColor",fillRule:"nonzero"})))};function wg(e){var t=Object(i.useRef)(null);return Object(i.useEffect)((function(){e.focus&&function(e){return e&&e instanceof HTMLDivElement}(t.current)&&Object(rt.a)(t.current,{scrollMode:"if-needed",block:"nearest"})}),[]),l.a.createElement("div",{ref:t},e.children)}var kg=999,xg=998,Eg=999,Cg=1e3,Og=1050;function _g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_g(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-row-editor-head {\n  position: relative;\n  margin: 24px;\n}\n.lake-table-row-editor-title {\n  font-size: 18px;\n  padding-right: 80px;\n  min-height: 28px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n.lake-table-row-editor-direction {\n  position: absolute;\n  top: 5px;\n  right: 32px;\n}\n.lake-table-row-editor .ant-modal-content {\n  border-radius: 8px;\n  overflow: hidden;\n}\n.lake-table-row-editor .ant-modal-content .ant-alert {\n  border: none;\n}\n.lake-table-row-editor .lake-icon-table-collpse {\n  position: absolute;\n  top: 5px;\n  right: 0;\n  width: 22px;\n  height: 22px;\n  line-height: 22px;\n  color: var(--yq-text-primary);\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 20px;\n}\n.lake-table-row-editor .lake-icon-table-collpse:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-row-editor .lake-table-row-editor-form-item-label {\n  padding: 5px 8px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\n.lake-table-row-editor .lake-table-row-editor-form-item-label .lake-icon {\n  margin-right: 6px;\n}\n.lake-table-row-editor .lake-table-row-editor-form-item-label > span {\n  display: flex;\n  align-items: center;\n}\n.lake-table-row-editor .lake-table-row-editor-form-item-label:hover {\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-table-row-editor .ant-form-item-label {\n  margin-left: -8px;\n}\n.lake-table-row-editor .ant-btn-text {\n  padding: 0;\n  margin-left: 8px;\n  font-size: 16px;\n  width: 20px;\n  height: 20px;\n}\n.lake-table-row-editor .ant-btn-text:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-row-editor-form.ant-form {\n  max-height: calc(100vh - 200px);\n  overflow-y: auto;\n  overflow-x: hidden;\n  padding: 0 24px 24px;\n}\n.lake-table-row-editor-form.ant-form .add-column-button {\n  display: flex;\n  align-items: center;\n  border-radius: 6px;\n  padding: 5px;\n  cursor: pointer;\n  width: 90px;\n}\n.lake-table-row-editor-form.ant-form .add-column-button:hover {\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-table-row-editor-form.ant-form .add-column-button .title {\n  margin-left: 5px;\n}\n.lake-table-row-editor .ant-modal-body {\n  padding: 0;\n  position: relative;\n}\n.lake-table-row-editor-direction-tip {\n  text-align: center;\n}\n.lake-table-row-editor-empty-title {\n  color: var(--yq-text-caption);\n}\n.lake-table-row-editor .lake-table-form-createdAt,\n.lake-table-row-editor .lake-table-form-updatedAt {\n  width: 216px;\n}\n.lake-table-row-editor .lake-table-form-createdAt .larkui-input,\n.lake-table-row-editor .lake-table-form-updatedAt .larkui-input {\n  border-radius: 6px;\n}\n.lake-table-row-editor .ant-alert-info {\n  width: 100%;\n  background-color: var(--yq-blue-1);\n  border: 1px solid var(--yq-cyan-3);\n  border-radius: 0;\n}\n.lake-table-row-editor .ant-alert-info .ant-alert-icon {\n  color: var(--yq-function-info);\n}\n.lake-table-row-editor-operation-button {\n  padding: 14px 24px;\n  border-top: 1px solid var(--yq-border-light);\n  display: flex;\n}\n.lake-table-row-editor-operation-button .create-row-footer {\n  text-align: right;\n  flex: 1;\n}\n.lake-table-row-editor-operation-button .create-row-footer button:not(:last-child) {\n  margin-right: 8px;\n}\n.ant-collapse {\n  margin-bottom: 10px;\n  margin-top: 0;\n}\n.ant-collapse .lake-table-row-editor-panel .ant-collapse-header {\n  padding: 8px 10px;\n  display: flex;\n  align-items: center;\n  background-color: var(--yq-bg-tertiary);\n  border-radius: 5px !important;\n}\n.ant-collapse .lake-table-row-editor-panel .ant-collapse-header:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.ant-collapse .lake-table-row-editor-panel .ant-collapse-header .ant-collapse-arrow {\n  position: static;\n}\n.ant-collapse .lake-table-row-editor-panel .ant-collapse-header .head-title {\n  font-size: 14px;\n  line-height: 22px;\n  color: var(--yq-text-primary);\n}\n.ant-collapse .lake-table-row-editor-panel .ant-collapse-content .ant-collapse-content-box {\n  padding-left: 0;\n  padding-right: 0;\n  padding-top: 15px;\n}\n");var Rg={group:{text:_c("本记录将被移至新的分组")},filter:{text:_c("本记录将被过滤")},sort:{text:_c("本记录将被移动到新的排序位置")}},jg=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"controller",null),s()(m()(r),"container",null),s()(m()(r),"handleKeyUp",(function(e){e.stopPropagation(),e.preventDefault(),27===e.keyCode&&r.state.visible&&r.onHide()})),s()(m()(r),"getHotKey",(function(e){return as.macos?e:e.replace(/⌘/g,"ctrl")})),s()(m()(r),"onColumnChange",(function(){r.setColumns()})),s()(m()(r),"setColumns",(function(){var e,t,n=m()(r).controller,o=null===(e=n.ViewHelper)||void 0===e?void 0:e.hiddenColumnConfigs,a=null===(t=n.ViewHelper)||void 0===t?void 0:t.columnConfigs;r.setState({columns:a?Object.values(a):null,hiddenColumns:o?Object.values(o):null})})),s()(m()(r),"onShow",$()((function(e){var t=m()(r).controller,n=e.row,o=e.mode||t.Mode,a=t.Kernel,i=t.ViewHelper;_h.hide();var l=Object.values(t.ViewHelper.columnConfigs),c=t.ViewHelper.hiddenColumnConfigs,s=null;if("create"===o)if(t.TableModel.getActiveView().get("type")===Gs.KANBAN)n=t.addKanbanRecord(n),s=a.command.tempState;else{if(a.groupService.grouping){var u=a.groupService.groupMap;n=u[u.length-1]}else n=i.getViewData("rowCount");t.executeKernelCommand("insertRow",n),s=a.command.tempState}var d=i.getViewData("rows"),f=i.getCellFormattedValue(n,l[0]);r.setState({mode:o,title:f,row:n,rowId:d[n].id,visible:!0,tempState:s,columns:l,hiddenColumns:c?Object.values(c):null,showAddNext:e.showAddNext},(function(){r.setFocus(n),r.refreshRows()}))}),100)),s()(m()(r),"onHide",(function(){r.state.visible&&(r.controller.executeKernelCommand("clearTempState"),r.controller.emitTableEvent(qs.HIDE_ROW_EDITOR),r.setState({visible:!1,tempState:null}))})),s()(m()(r),"onAddNext",(function(e){e.preventDefault(),e.stopPropagation();var t=m()(r).controller,n=r.state.mode,o=r.controller.rowCount-1;if(t.View.get("type")===Gs.KANBAN){var a=r.state.row,i=a;"create"!==n&&(i=t.addKanbanRecord(a)),r.onShow({mode:n,row:i,showAddNext:!0})}else t.executeKernelCommand("insertRow",o+1),r.onShow({row:o+1,mode:"edit",showAddNext:!0})})),s()(m()(r),"refreshRows",(function(){var e,t,n=m()(r),o=n.controller,a=n.state.mode,i=o.getRowExpandRows(r.state.row),l=-1,c=i.length;if("create"!==a){for(;l<i.length-1;)if(!i[++l].filtered){e=i[l].id;break}for(;c>0;)if(!i[--c].filtered){t=i[c].id;break}}r.setState({rows:i,firstRowId:e,lastRowId:t})})),s()(m()(r),"refreshRow",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=r.state.row,n=r.controller.ViewHelper.getViewData("rows"),o=(n[t]||{}).id;r.state.rowId&&r.state.rowId!==o&&(r.setState({prevRowId:o,row:n.findIndex((function(e){return e.id===r.state.rowId}))}),e&&r.setFocus(t))})),s()(m()(r),"showTempStateWarning",(function(e){if(r.state.visible){if(!e)return r.refreshRows(),r.refreshRow(!1),void r.setState({tempState:null});var t=e.type;r.setState({tempState:{type:t}})}})),s()(m()(r),"sync",$()((function(e,t){var n=m()(r).controller.ViewHelper.getViewData("columns").findIndex((function(e){return e.id===t.id}));if(!(e&&e.status&&["error","progress"].includes(e.status))){if(t.type===Ac.DATE&&e){var o=e.format("YYYY-MM-DD");e={seconds:_e.a.utc(o).diff(_e.a.utc("1899-12-30"),"seconds"),time:_e()(o).format("YYYY-MM-DDTHH:mm:ssZ")}}else Ac.SELECT===t.type&&(Array.isArray(e)||(e=[e]));r.setCellValue(t,n,e)}}),500)),s()(m()(r),"onChange",(function(e){var t=m()(r).controller;if(!t.isReadonly){var n=Object.keys(e)[0],o=Object.values(e)[0],a=t.TableModel.getFieldsMap()[n];r.sync(o,a),Mc.includes(a.type)||r.sync.flush()}})),s()(m()(r),"setCellValue",(function(e,t,n){var o=r.controller.getRowIndexById(r.state.rowId);r.controller.executeKernelCommand("setCellValue",o,t,{value:n}),clearTimeout(r.timer),r.timer=setTimeout((function(){0===Number(t)&&r.setState({title:r.controller.getCellFormattedValue(r.state.row,e)})}),100)})),s()(m()(r),"onCollapseChange",(function(e){e.includes("hidden")?r.setState({showHidden:!0}):r.setState({showHidden:!1})})),s()(m()(r),"getFormItemLabel",(function(e,t,n){return l.a.createElement("div",{className:"lake-table-row-editor-form-item-label",onClick:function(e){return r.onFormItemClick(e,t,n)}},e,!r.controller.isReadonly&&l.a.createElement("span",{className:"lake-icon lake-icon-table-arrow-down"}))})),s()(m()(r),"onFormItemClick",(function(e,t,n){r.controller.isReadonly||e.target&&(e.preventDefault(),e.stopPropagation(),r.controller.showConfigRowModal(t,{containerStyle:r.getConfigModalStyle(e.target,n.type),colConfigs:Sg({},n)}))})),s()(m()(r),"getConfigModalStyle",(function(e,t){var n=r.getColConfigTarget(e).getBoundingClientRect(),o=n.top,a=n.bottom,i=n.left,l=n.height,c=window.innerHeight-a,s={left:i};return r.shouldDisplayOnTop(c,o,t)?s.top=o-r.getCompareHeight(t):s.top=o+l,s})),s()(m()(r),"getCompareHeight",(function(e){return[Ac.SELECT,Ac.MULTI_SELECT].includes(e)?480:224})),s()(m()(r),"shouldDisplayOnTop",(function(e,t,n){var o=r.getCompareHeight(n);return e<o&&t>o||e<o&&t<o&&t-e>60})),s()(m()(r),"getColConfigTarget",(function(e){for(var t=e;t!==document.body&&"CANVAS"!==t.tagName&&!t.classList.contains("lake-table-row-editor-form-item-label");)t=t.parentNode;return t.classList.contains("lake-table-row-editor-form-item-label")||ed(!1,"cant find label item el"),t})),s()(m()(r),"showUp",(function(){r.showNext("up")})),s()(m()(r),"showDown",(function(){r.showNext("down")})),s()(m()(r),"showNext",(function(e){var t=m()(r).controller;t.executeKernelCommand("clearTempState");var n=r.state,o=n.rowId,a=n.rows,i=n.visible,l=n.columns,c=n.prevRowId;if(i){var s,u=null!==c?c:o,d=a.findIndex((function(e){return e.id===u}));if("up"===e)for(s=a[--d];s&&s.filtered;)s=a[--d];else if("down"===e)for(null!==c?d=a.findIndex((function(e){return e.id===c})):d++,s=a[d];s&&s.filtered;)s=a[++d];if(s){var f=t.getRowIndexById(s.id),p=t.ViewHelper.getCellFormattedValue(f,l[0]);r.setState({rowId:s.id,prevRowId:null,tempState:null,title:p,row:f}),r.setFocus(f)}}})),s()(m()(r),"openAddColumnModal",(function(e){ed(e.target,"need target"),r.controller.showAddColumnModal({containerStyle:r.getAddColumnModalStyle(e.target)})})),r.controller=r.props.controller,r.state={title:null,rowId:null,row:null,rows:[],firstRowId:null,lastRowId:null,visible:!1,columns:null,tempState:null,prevRowId:null,hiddenColumns:null,showHidden:!1,showAddNext:!1,focusCol:null},r}return p()(n,[{key:"componentDidMount",value:function(){this.keymaster=new Yv({filter:function(){return!0}}),this.keymaster.on(this.getHotKey("⌘+shift+,"),this.showUp),this.keymaster.on(this.getHotKey("⌘+shift+."),this.showDown),this.controller.onTableEvent(qs.SHOW_ROW_EDITOR,this.onShow),this.controller.onKernelEvent(gc.RECORD_WILL_MOVE,this.showTempStateWarning),this.controller.onKernelEvent(gc.CONTENT_CHANGED,this.onColumnChange),this.controller.onKernelEvent(gc.CONTENT_CHANGED_ASYNC,this.onColumnChange),window.addEventListener("keyup",this.handleKeyUp)}},{key:"componentWillUnmount",value:function(){this.keymaster.dispose(),this.keymaster=null,window.removeEventListener("keyup",this.handleKeyUp),this.controller.offTableEvent(qs.SHOW_ROW_EDITOR,this.onShow),this.controller.offKernelEvent(gc.RECORD_WILL_MOVE,this.showTempStateWarning),this.controller.offKernelEvent(gc.CONTENT_CHANGED,this.onColumnChange),this.controller.offKernelEvent(gc.CONTENT_CHANGED_ASYNC,this.onColumnChange),this.controller=null}},{key:"setFocus",value:function(e){var t=this.state.columns;if(t){for(var n,r=0;r<t.length;r++)if(this.isActiveCell(e,r)){n=e+"-"+r;break}n||(n=e+"-0"),this.setState({focusCol:n})}}},{key:"isActiveCell",value:function(e,t){var n=this.controller;if(!n.ViewHelper)return!1;var r=n.ViewHelper.getViewData("selections");return r&&void 0!==r.row?r.row===e&&r.col===t:0===t}},{key:"renderFormItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,o=this.controller,i=this.state,c=i.row,s=i.rowId,u=o.getFromItemRenderConfig(e,t,c,s,{name:t.name,focus:n}),d=u.formItemConfig,f=u.componentConfig,p=f.FormItemComponent,h=f.componentProperties,m=this.getFormItemLabel(d.label,r,t);delete d.label;var v="".concat(this.state.rowId," + ").concat(t.id);return l.a.createElement(pt.a.Item,a()({key:v,name:t.id,label:m},d),l.a.createElement(p,h))}},{key:"renderDirection",value:function(){var e=this,t=this.state,n=t.rowId,r=!1,o=!1;return n===t.firstRowId&&(r=!0),n===t.lastRowId&&(o=!0),l.a.createElement("span",{className:"lake-table-row-editor-direction"},l.a.createElement(dt.a,{placement:"top",title:l.a.createElement("div",{className:"lake-table-row-editor-direction-tip"},_c("上一条记录"),l.a.createElement("br",null),this.getHotKey("⌘+shift+,"))},l.a.createElement(ft.a,{className:"lake-table-row-editor-up",disabled:r,onClick:function(){return e.showUp()},type:"text"},l.a.createElement("span",{className:"lake-icon lake-icon-table-up"}))),l.a.createElement(dt.a,{placement:"top",title:l.a.createElement("div",{className:"lake-table-row-editor-direction-tip"},_c("下一条记录"),l.a.createElement("br",null),this.getHotKey("⌘+shift+."))},l.a.createElement(ft.a,{className:"lake-table-row-editor-down",disabled:o,onClick:function(){return e.showDown()},type:"text"},l.a.createElement("span",{className:"lake-icon lake-icon-table-down"}))))}},{key:"renderAddNext",value:function(){return l.a.createElement(ft.a,{onClick:this.onAddNext},_c("添加下一个"))}},{key:"renderFinish",value:function(){return l.a.createElement(ft.a,{onClick:this.onHide},_c("完成"))}},{key:"renderAddColumnButton",value:function(){return l.a.createElement("div",{id:"lark-table-row-editor-add-column",className:"add-column-button",onClick:this.openAddColumnModal},l.a.createElement(vg,null),l.a.createElement("div",{className:"title"},_c("新增字段")))}},{key:"getAddColumnModalStyle",value:function(e){for(var t=e;"lark-table-row-editor-add-column"!==t.id&&t!==document.body&&"CANVAS"!==t.tagName;)t=t.parentNode;"lark-table-row-editor-add-column"!==t.id&&ed(!1);var n=t.getBoundingClientRect(),r=n.left;return{top:n.bottom-224,left:r}}},{key:"render",value:function(){var e=this,t=this.controller,n=this.state,r=n.visible,o=n.columns,a=n.hiddenColumns,i=n.title,c=n.tempState,s=n.showHidden,u=n.mode,d=n.showAddNext;return r&&o&&t.ViewHelper?l.a.createElement(ct.a,{zIndex:kg,visible:r,footer:null,onCancel:this.onHide,centered:!0,wrapClassName:"lake-table-row-editor lake-table-input",closeIcon:l.a.createElement(dt.a,{placement:"top",title:_c("关闭弹窗 (ESC)")},l.a.createElement("span",{className:"lake-icon lake-icon-table-collpse"})),closable:!1,getContainer:function(){if(!e.container){var t=document.createElement("div");e.controller.modalContainer.appendChild(t),e.container=t}return e.container},destroyOnClose:!0},c&&l.a.createElement(ut.a,{message:Rg[c.type].text,type:"warning",showIcon:!0,closable:!0}),l.a.createElement("div",{className:"lake-table-row-editor-head"},l.a.createElement("h1",{className:"lake-table-row-editor-title"},i||l.a.createElement("span",{className:"lake-table-row-editor-empty-title"},_c("未命名记录"))),this.renderDirection(),l.a.createElement(dt.a,{placement:"top",title:_c("关闭弹窗 (ESC)")},l.a.createElement("span",{className:"lake-icon lake-icon-table-collpse",onClick:this.onHide}))),l.a.createElement(pt.a,{layout:"vertical",onValuesChange:this.onChange,className:"lake-table-row-editor-form"},o.map((function(t,n){var r=e.state.focusCol===e.state.row+"-"+n;return l.a.createElement(wg,{focus:r,key:n},e.renderFormItem(t.type,t,r,n))})),a&&a.length>0&&l.a.createElement(st.a,{bordered:!1,expandIcon:function(e){var t=e.isActive;return l.a.createElement(pg,{style:{color:"#8c8c8c"},rotate:t?90:0})},className:"lake-table-row-editor-collapse",ghost:!0,onChange:this.onCollapseChange},l.a.createElement(st.a.Panel,{header:l.a.createElement("span",{className:"head-title"},_c("$1 $2 个隐藏字段",_c(s?"收起":"显示"),a.length)),key:"hidden",className:"lake-table-row-editor-panel"},a.map((function(t){return e.renderFormItem(t.type,t)})))),!t.isReadonly&&this.renderAddColumnButton()),("create"===u||d||!t.isReadonly)&&l.a.createElement("div",{className:"lake-table-row-editor-operation-button"},l.a.createElement("div",{className:"create-row-footer"},("create"===u||d)&&this.renderAddNext(),!t.isReadonly&&this.renderFinish()))):null}}]),n}(l.a.Component);function Ag(){return l.a.createElement("div",{className:"lake-table-form-empty"},"(".concat(_c("空"),")"))}function Tg(e){var t=e.onChange,n=e.id,r=e.defaultValue,o=e.readonly,a=e.focus,c=Object(i.useState)(r),s=ie()(c,2),u=s[0],d=s[1];if(o)return r?l.a.createElement("div",{className:"lake-table-form-input-readonly"},r):l.a.createElement(Ag,null);var f=Object(i.useRef)(null);return Object(i.useEffect)((function(){a&&f.current&&f.current.focus({cursor:"end"})}),[a]),Object(i.useEffect)((function(){d(r)}),[r]),l.a.createElement("div",{className:"lake-table-form-input",id:n},l.a.createElement(ht.a,{allowClear:!0,value:u,placeholder:_c("请输入"),onChange:function(e){t(e),d(e.target.value)},autoFocus:a,ref:f}))}function Lg(e){var t=e.onChange,n=e.id,r=e.defaultValue,o=e.readonly,a=e.focus,c=e.itemKey,s=Object(i.useState)(r),u=ie()(s,2),d=u[0],f=u[1];if(o)return r?l.a.createElement("div",{className:"lake-table-form-textarea-readonly"},r):l.a.createElement(Ag,null);var p=Object(i.useRef)(null);return Object(i.useEffect)((function(){a&&p.current&&p.current.focus({cursor:"end"})}),[a]),Object(i.useEffect)((function(){f(r)}),[r]),l.a.createElement("div",{className:"lake-table-form-textarea",id:n},o?d:l.a.createElement(ht.a.TextArea,{key:c,value:d,placeholder:_c("请输入"),onChange:function(e){t(e),f(e.target.value)},autoFocus:a,ref:p}))}s()(jg,"propTypes",{controller:X.a.object}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-empty {\n  color: var(--yq-text-caption);\n}\n"),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-input .ant-input-clear-icon svg {\n  width: 14px;\n  height: 14px;\n}\n.lake-table-form-input .ant-input-affix-wrapper {\n  border-radius: 6px;\n}\n"),Tg.propTypes={id:X.a.string,onChange:X.a.func},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-textarea {\n  white-space: pre-wrap;\n}\n.lake-table-form-textarea textarea.ant-input {\n  height: 88px;\n  font-size: 14px;\n  border-radius: 6px;\n}\n.lake-table-form-textarea textarea.ant-input:hover {\n  border-color: var(--yq-yuque-green-5);\n}\n.lake-table-form-textarea-readonly {\n  line-height: 1.5;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n}\n.ant-form-item-has-error .lake-table-form-textarea textarea.ant-input:focus,\n.ant-form-item-has-error .lake-table-form-textarea textarea.ant-input {\n  border-color: var(--yq-red-4);\n}\n"),Lg.propTypes={id:X.a.string,onChange:X.a.func},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-colorpicker .lake-table-colorpicker-group .lake-table-colorpicker-item {\n  width: 24px;\n  height: 24px;\n  padding: 2px 2px;\n  display: inline-block;\n  border-radius: 3px 3px;\n  border: 1px solid transparent;\n  flex: 0 0 auto;\n  cursor: pointer;\n}\n.lake-table-colorpicker .lake-table-colorpicker-group .lake-table-colorpicker-item > span {\n  position: relative;\n  width: 18px;\n  height: 18px;\n  display: block;\n  border-radius: 2px 2px;\n  border: 1px solid transparent;\n}\n.lake-table-colorpicker .lake-table-colorpicker-group .lake-table-colorpicker-item > span svg {\n  position: absolute;\n  top: -1px;\n  left: 1px;\n  width: 12px;\n  height: 12px;\n}\n");var Dg=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"themeManager",get:function(){var e,t;return this.props.themeManager||(null===(e=window)||void 0===e||null===(t=e.appData)||void 0===t?void 0:t.themeManager)}},{key:"render",value:function(){var e=this,t=this.props,n=t.activeColors,r=t.onSelect,o=t.colorSource;return l.a.createElement("div",null,o.map((function(t,o){return l.a.createElement("div",{className:"lake-table-colorpicker-group",key:o},t.map((function(t,o){var a=lf(t)&&lf(n)&&t.toLowerCase()===n.toLowerCase();return l.a.createElement("span",{key:o,className:"lake-table-colorpicker-item",onClick:r.bind(e,t)},l.a.createElement("span",{style:{backgroundColor:Jh.getRenderColor(t,e.themeManager)}},a&&l.a.createElement("svg",{style:{fill:Ms(e.themeManager,"@yuque-color-icon-primary")},viewBox:"0 0 18 18"},l.a.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))})))})))}}]),n}(l.a.Component);s()(Dg,"propTypes",{activeColors:X.a.string,onSelect:X.a.func,colorSource:X.a.array,themeManager:X.a.object});var Pg=["allowEnter","onSave"],Mg=ht.a.TextArea,Ng=l.a.forwardRef((function(e,t){var n=e.allowEnter,r=void 0!==n&&n,o=e.onSave,c=xt()(e,Pg),s=Object(i.useRef)();Object(i.useImperativeHandle)(t,(function(){return{focus:function(){var e;null===(e=s.current)||void 0===e||e.focus()},blur:function(){var e;null===(e=s.current)||void 0===e||e.blur()}}}));var u=function(e){83===(e.keyCode||e.which)&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),null==o||o())};return r?l.a.createElement(Mg,a()({ref:s},c,{autoComplete:"off",onKeyDown:u})):l.a.createElement(ht.a,a()({ref:s},c,{autoComplete:"off",onKeyDown:u}))}));function Ig(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ig(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ig(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nc('/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-dropdown .mask {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.lake-table-dropdown .lake-table-dropdown-cellview {\n  position: relative;\n  border: 1px solid var(--yq-border-light);\n  border-radius: 4px;\n  background: var(--yq-bg-primary);\n  width: 100%;\n  min-height: 32px;\n}\n.lake-table-dropdown .lake-table-dropdown-cellview:hover {\n  cursor: pointer;\n  border: 1px solid var(--yq-yuque-green-5);\n}\n.lake-table-dropdown .lake-table-dropdown-cellview .lake-table-dropdown-selected-list {\n  font-size: 0;\n  margin-right: 20px;\n}\n.lake-table-dropdown .lake-table-dropdown-cellview .lake-table-dropdown-selected-list .lake-table-dropdown-selected-item {\n  font-size: 14px;\n  position: relative;\n  display: inline-block;\n  margin: 4px;\n  border-radius: 3px;\n  max-width: calc(100% - 5px);\n  padding: 0 6px;\n  height: 22px;\n  line-height: 22px;\n}\n.lake-table-dropdown .lake-table-dropdown-cellview .lake-table-dropdown-selected-list .lake-table-dropdown-selected-item-text {\n  display: inline-block;\n  overflow: hidden;\n  max-width: calc(100% - 15px);\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-right: 20px;\n  height: 22px;\n  line-height: 22px;\n}\n.lake-table-dropdown .lake-table-dropdown-cellview .lake-table-dropdown-selected-list .lake-table-dropdown-selected-item .lake-icon-close {\n  position: absolute;\n  right: 2px;\n  top: 50%;\n  transform: translateY(-50%);\n  cursor: pointer;\n  padding: 2px;\n  border-radius: 4px;\n}\n.lake-table-dropdown .lake-table-dropdown-cellview .lake-table-dropdown-selected-list .lake-table-dropdown-selected-item .lake-icon-close:hover {\n  background: rgba(0, 0, 0, 0.12);\n}\n.lake-table-dropdown .lake-table-dropdown-cellview .lake-table-form-mention-caret-down {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: var(--yq-text-primary);\n}\n.lake-table-dropdown .lake-table-dropdown-celleditor {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  width: 210px;\n  background: var(--yq-bg-primary);\n  border-radius: 4px;\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  z-index: 500;\n  max-width: 210px;\n}\n.lake-table-dropdown .lake-table-dropdown-search {\n  border-bottom: 1px solid var(--yq-border-light);\n  height: 38px;\n  line-height: 38px;\n}\n.lake-table-dropdown .lake-table-dropdown-list {\n  max-height: 210px;\n  overflow: auto;\n  overflow-x: hidden;\n}\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item {\n  position: relative;\n  padding: 8px 16px;\n  white-space: nowrap;\n  height: 40px;\n  box-sizing: border-box;\n  cursor: pointer;\n}\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item:hover,\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item.active {\n  background: var(--yq-bg-tertiary);\n}\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item:hover .lake-icon-table-dot,\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item.active .lake-icon-table-dot {\n  display: block;\n}\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item .lake-table-dropdown-item-text {\n  padding: 2px 4px;\n  font-size: 14px;\n  border-radius: 4px;\n  margin-left: 16px;\n  overflow: hidden;\n  display: inline-block;\n  max-width: calc(100% - 45px);\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  vertical-align: middle;\n}\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item.create {\n  font-size: 0;\n}\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item.create .lake-table-dropdown-item-text {\n  font-size: 14px;\n  max-width: calc(100% - 45px);\n  margin-left: 6px;\n  width: auto;\n}\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item.create .lake-table-dropdown-item-prefix {\n  font-size: 14px;\n  vertical-align: middle;\n}\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item .lake-icon-success {\n  position: absolute;\n  left: 8px;\n  top: 12px;\n  color: var(--yq-text-caption);\n  cursor: pointer;\n}\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item .lake-icon-success:hover {\n  background: var(--yq-bg-primary-hover);\n}\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item .lake-icon-table-dot {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  display: none;\n  padding: 5px;\n  cursor: pointer;\n  color: var(--yq-icon-primary);\n  border-radius: 6px;\n}\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item .lake-icon-table-dot:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item.editing {\n  display: flex;\n  align-items: center;\n}\n.lake-table-dropdown .lake-table-dropdown-list .lake-table-dropdown-item.editing .option-color {\n  width: 18px;\n  height: 18px;\n  display: inline-block;\n  padding: 9px;\n  border-radius: 2px;\n  cursor: pointer;\n  margin-left: 6px;\n}\n.lake-table-dropdown-popover-container .ant-popover-inner {\n  width: 100px;\n}\n.lake-table-dropdown-popover-container .ant-popover-inner-content {\n  padding: 0;\n}\nhtml[data-kumuhana="pouli"] .lake-table-dropdown .lake-table-dropdown-cellview {\n  background: var(--yq-bg-tertiary);\n}\n');var Bg=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"destroy",(function(){r.props.visible&&(r.selecting||r.editingId||r.setState(Fg(Fg({},r.defaultState),{},{isEditorOpen:!1})))})),s()(m()(r),"onBodyClick",(function(e){var t=r.state.editingId,n=r.props,o=n.visible,a=n.isFromGrid,i=e.target;if(o){for(;i&&i!==document.body;){if(i.classList.contains("lake-table-colorpicker")||i.classList.contains("lake-table-dropdown-popover-container")||i.classList.contains("lake-table-dropdown-celleditor")||i.classList.contains("lake-table-dropdown-cellview"))return;i=i.parentNode}t&&r.onChangeEditItem(),!a&&r.setState({isEditorOpen:!1}),r.destroy()}})),s()(m()(r),"onBoxKeyDown",(function(e){var t=r.props.isHiddenByKeyboardInput,n=r.state.selectingIdx;if(!t&&!r.props.readOnly){var o=e.keyCode,a=o===Qv.UP,i=o===Qv.DOWN,l=r.renderList.length;if(a||i){var c,s=r.showCreateNewOne?l:l-1;c=0===n?a?s:1:n===s?a?n-1:0:n+(a?-1:1),r.setState({selectingIdx:c},(function(){var e=document.querySelector(".lake-table-dropdown-list"),t=document.querySelector(".lake-table-dropdown-item.active");if(t){var n=t.offsetTop-38,r=n+t.getBoundingClientRect().height;n<e.scrollTop?e.scrollTop-=e.scrollTop-n:r-e.scrollTop>e.getBoundingClientRect().height&&(e.scrollTop=r-e.getBoundingClientRect().height)}}))}o===Qv.ENTER&&(n===l||0===l&&0===n?r.onAddItem():n>=0&&r.onSelectItem(r.renderList[n],r.props.options)),o===Qv.ESC&&r.setState({filterVal:""})}})),s()(m()(r),"editEnd",(function(){var e;null===(e=r.props.inputRefProp.current)||void 0===e||e.focus(),r.setState({editingId:null,editingVal:""})})),s()(m()(r),"onSelectItem",(function(e,t){var n,o=r.props,a=o.selectedIds,i=o.multi,l=a||[],c="object"===z()(e)?e.id:e,s=t.map((function(e){return e.id||e}));i?(l.includes(c)?l=l.filter((function(e){return e!==c})):l.push(c),l=Be()(s,l)):l=l[0]===c?[]:[c],r.selecting=!0,r.props.onSelectChange(l),r.setState({filterVal:""}),r.selecting=!1,null===(n=r.props.inputRefProp.current)||void 0===n||n.focus(),i||r.destroy()})),s()(m()(r),"onDeleteItem",(function(e){var t=r.props,n=t.options;if(t.editable){var o=n.filter((function(t){return t.id!==e}));r.submitChange(o),r.setState({selectingIdx:0},(function(){0===o.length&&r.props.inputRefProp.current.focus()}))}})),s()(m()(r),"onChangeEditItem",(function(e){var t=r.state,n=t.editingId,o=t.editingVal;if(r.props.editable)if(o){var a=r.props.options.reduce((function(e,t){return t.id===n?e.concat(Fg(Fg({},t),{},{value:o})):e.concat(t)}),[]);e&&r.setState({selectingIdx:e}),r.submitChange(Ye()(a,(function(e){return e.value}))),r.editEnd()}else Xe.a.error(_c("请输入"))})),s()(m()(r),"onAddItem",(function(){var e=r.state.filterVal,t=r.props,n=t.hasColor,o=t.options;if(t.editable){var a={value:e,id:fs(6)};n&&(a.color=r._getNextColor(o));var i=Ye()(o.concat(a),(function(e){return e.value}));r.submitChange(i),r.onSelectItem(a,i),r.setState({filterVal:""})}})),s()(m()(r),"submitChange",(function(e){r.props.onUpdateCol(e)})),s()(m()(r),"onInput",(function(e){r.props.isHiddenByKeyboardInput&&r.props.togglePanelHidden(!1);var t=e.target.value||"";r.setState({filterVal:t,selectingIdx:0})})),s()(m()(r),"filterOptions",(function(){var e,t=r.state.filterVal,n=r.props,o=n.options,a=n.editable,i=!1;return e=o.filter((function(e){var n=(null==e?void 0:e.value)||"";return n===t&&(i=!0),n.includes(t)})),r.renderList=e,r.showCreateNewOne=t&&!i&&a,e})),s()(m()(r),"renderCreateNeWOne",(function(){var e=r.state,t=e.filterVal,n=e.selectingIdx,o=r.props,a=o.hasColor,i=o.options,c=r._getNextColor(i),s=a?{background:Jh.getRenderColor(c,r.themeManager)||"none"}:{};return s.color=Jh.getRenderTextColor(c,r.themeManager),l.a.createElement("div",{className:S()("lake-table-dropdown-item create",{active:n===r.renderList.length||0===r.renderList.length}),onClick:r.onAddItem},l.a.createElement("span",{className:"lake-table-dropdown-item-prefix"},_c("新建选项")),l.a.createElement("span",{className:"lake-table-dropdown-item-text",style:s},t))})),s()(m()(r),"renderListItem",(function(e,t){var n=r.state,o=n.editingId,a=n.selectingIdx,i=n.editingVal,c=r.props,s=c.selectedIds,u=c.hasColor,d=c.editable,f=u?{background:e.color?Jh.getRenderColor(e.color,r.themeManager):"none",color:Jh.getRenderTextColor(e.color,r.themeManager)}:{};if(e.id===o){var p=null;return u&&(p=l.a.createElement(wt.a,{placement:"rightTop",overlayClassName:"lake-table-colorpicker",overlayStyle:{zIndex:Og},content:l.a.createElement(Dg,{colorSource:me()(Kh),activeColors:e.color,onSelect:function(e){var t=r.props.options.reduce((function(t,n){return n.id===o?t.concat(Fg(Fg({},n),{},{color:e})):t.concat(n)}),[]);r.submitChange(t)},themeManager:r.themeManager})},l.a.createElement("span",{className:"option-color",style:{background:Jh.getRenderColor(e.color)}}))),l.a.createElement("div",{key:e.id,className:"lake-table-dropdown-item editing active"},l.a.createElement(ht.a,{ref:r.editingInputRef,className:"lake-table-dropdown-item-input",value:i,onChange:function(e){r.setState({editingVal:e.target.value})},onPressEnter:function(e){e.stopPropagation(),r.onChangeEditItem(e.target.value,t)},onKeyDown:function(e){e.stopPropagation(),e.keyCode===Qv.ESC&&r.editEnd()},onBlur:function(){setTimeout(r.editEnd,200)},autoFocus:!0}),p)}return l.a.createElement("div",{key:e.id,className:S()("lake-table-dropdown-item",{active:a===t}),onClick:function(){r.state.editingId||r.onSelectItem(e,r.props.options)}},s.includes(e.id)&&l.a.createElement("span",{className:"lake-icon lake-icon-success"}),l.a.createElement("span",{className:"lake-table-dropdown-item-text",style:f},e.value),d&&l.a.createElement(wt.a,{overlayClassName:"lake-table-dropdown-popover-container",overlayStyle:{zIndex:Og},getPopupContainer:function(){var e=document.getElementById("lake-table-dropdown-popup-container");return e||((e=document.createElement("div")).id="lake-table-dropdown-popup-container",e.onmouseup=function(e){e.preventDefault(),e.stopPropagation()},document.body.appendChild(e),e)},content:l.a.createElement(yt.a,{onClick:function(n){var o=n.key;n.domEvent.stopPropagation(),"edit"===o?r.setState({editingId:e.id,selectingIdx:t,editingVal:e.value}):"del"===o&&r.onDeleteItem(e.id)}},l.a.createElement(yt.a.Item,{key:"edit",icon:l.a.createElement("span",{className:"lake-icon lake-icon-edit-new"})},_c("编辑")),l.a.createElement(yt.a.Item,{key:"del",icon:l.a.createElement("span",{className:"lake-icon lake-icon-table-delete"})},_c("删除"))),trigger:"click",placement:"rightTop",onClick:function(e){return e.stopPropagation()}},l.a.createElement("span",{className:"lake-icon lake-icon-table-dot"})))})),s()(m()(r),"renderCellView",(function(){var e=r.props,t=e.options,n=e.selectedIds,o=e.readOnly,a=e.isFromGrid,i=e.hasColor,c=null==t?void 0:t.filter((function(e){return n.includes(e.id)}));return c.length||!o||a?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"lake-table-dropdown-selected-list"},c.map((function(e){return l.a.createElement("div",{className:"lake-table-dropdown-selected-item",key:e.id,style:i?{background:e.color?Jh.getRenderColor(e.color,r.themeManager):"none",color:Jh.getRenderTextColor(e.color,r.themeManager)}:{}},l.a.createElement("span",{className:"lake-table-dropdown-selected-item-text"},e.value),!o&&l.a.createElement("span",{className:"lake-icon lake-icon-close",onClick:function(n){n.stopPropagation(),r.onSelectItem(e,t)}}))}))),!o&&l.a.createElement("span",{className:"lake-table-form-mention-caret-down"},l.a.createElement(fg,null))):l.a.createElement(Ag,null)})),r.state=r.defaultState,r}return p()(n,[{key:"defaultState",get:function(){return{editingId:null,selectingIdx:0,filterVal:"",editingVal:"",isEditorOpen:!!this.props.isFromGrid}}},{key:"themeManager",get:function(){var e,t;return this.props.themeManager||(null===(e=window)||void 0===e||null===(t=e.appData)||void 0===t?void 0:t.themeManager)}},{key:"componentDidMount",value:function(){document.body.addEventListener("click",this.onBodyClick)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.onBodyClick)}},{key:"_getNextColor",value:function(e){var t;return Array.isArray(e)&&0!==e.length?Jh.getNextColor(null===(t=e[e.length-1])||void 0===t?void 0:t.color,this.themeManager):Jh.getNextColor("")}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,r=t.readOnly,o=t.isFromGrid,a=t.isHiddenByKeyboardInput,i=t.editable,c=t.focus,s=this.state,u=s.filterVal,d=s.editingId,f=s.isEditorOpen,p=i?"可搜索或新建选项":"可搜索选项",h=this.filterOptions(),m=l.a.createElement("div",{className:"lake-table-dropdown-cellview",onClick:function(){var t;r||(e.setState({isEditorOpen:!f}),!f&&setTimeout(null===(t=e.props.inputRefProp.current)||void 0===t?void 0:t.focus,20))}},this.renderCellView()),v=l.a.createElement("div",{className:"lake-table-dropdown-search"},l.a.createElement(Ng,{ref:this.props.inputRefProp,type:"text",placeholder:_c(p),onChange:this.onInput,onSave:function(){a||(e.props.togglePanelHidden(!0),Xe.a.success(_c("文档已保存")))},autoFocus:!!c,bordered:!1,value:u})),g=!r&&l.a.createElement("div",{className:"lake-table-dropdown-celleditor"},v,!a&&l.a.createElement("div",{className:"lake-table-dropdown-list"},!!h.length&&h.map((function(t,n){return e.renderListItem(t,n)})),this.showCreateNewOne&&this.renderCreateNeWOne())),b=o?l.a.createElement(l.a.Fragment,null,g):l.a.createElement(l.a.Fragment,null,l.a.createElement(bt.a,{overlay:g,placement:"bottomLeft",visible:f,overlayClassName:"lake-table-dropdown fromForm lake-table-dropdown-overlay",overlayStyle:{zIndex:Og-1}},m));return n?l.a.createElement("div",{className:"lake-table-dropdown ".concat(o?"":"fromForm"),onKeyDown:this.onBoxKeyDown},d&&o&&!a&&l.a.createElement("div",{className:"mask"}),b):null}}]),n}(l.a.Component);function Vg(e){var t=e.field,n=void 0===t?{}:t,r=e.id,o=e.defaultValue,a=e.readonly,c=e.focus,s=e.className,u=void 0===s?"":s,d=e.onChange,f=e.onColChange,p=e.editable,h=void 0===p||p,m=e.themeManager;o&&!Array.isArray(o)&&(o=[o]);var v,g=n.options;function b(e){if(e.length<=1)d(e);else{var t=[];g.forEach((function(n){var r=n.id||n.value;e.includes(r)&&t.push(r)})),d(t)}}g&&0!==g.length||(g=[]);var y=Object(i.useRef)(null);if(Object(i.useEffect)((function(){c&&y.current&&y.current.focus()}),[c]),a){if(!o||0===o.length)return l.a.createElement(Ag,null);v=l.a.createElement("div",{className:"lake-table-form-select-readonly"},o.map((function(e){var t=g.find((function(t){return t.id===e}));return t?function(e,t,n){var r,o,a=t.value,i=t.closable,c=t.onClose,s=e.options.find((function(e){return e.value===a||e.id===a}));return s?(n=n||(null===(r=window)||void 0===r||null===(o=r.appData)||void 0===o?void 0:o.themeManager),l.a.createElement(gt.a,{key:s.value,className:"lake-table-form-tag",color:s.color?Jh.getRenderColor(s.color,n):"transparent",onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:i,onClose:c,style:{marginRight:5,color:Jh.getRenderTextColor(s.color,n)}},s.value)):null}(n,t,m):null})))}else if("dropdown"===n.display){var w=Object(i.useRef)(null),k="multiSelect"===n.type,x={boxId:n.id,multi:k,selectedIds:o||[],options:g,visible:!0,hasColor:n.color,readOnly:a,isHiddenByKeyboardInput:!1,focus:c,inputRefProp:w,onUpdateCol:function(e){f(e,n)},onSelectChange:function(e){d(e)},editable:h};v=l.a.createElement(Bg,x)}else v="select"===n.type?l.a.createElement(vt.a.Group,{onChange:function(e){b([e.target.value])},defaultValue:o,autoFocus:c,ref:y},g.map((function(e,t){return l.a.createElement(vt.a,{className:"lake-table-form-select-radio",value:e.id||e.value,key:t},l.a.createElement("span",{className:"lake-table-form-select-value"},e.value))}))):l.a.createElement(mt.a.Group,{onChange:b,defaultValue:o,autoFocus:c,ref:y},g.map((function(e,t){return l.a.createElement(mt.a,{className:"lake-table-form-select-checkbox",value:e.id||e.value,key:t},l.a.createElement("span",{className:"lake-table-form-select-value"},e.value))})));return l.a.createElement("div",{className:"lake-table-form-select lake-table-form-select-".concat(n.type||"normal"," ").concat(u),id:r},v)}s()(Bg,"propTypes",{boxId:X.a.string,multi:X.a.bool,isFromGrid:X.a.bool,style:X.a.object,selectedIds:X.a.array,options:X.a.array,hasColor:X.a.bool,visible:X.a.bool,isHiddenByKeyboardInput:X.a.bool,readOnly:X.a.bool,onUpdateCol:X.a.func,onSelectChange:X.a.func,togglePanelHidden:X.a.func,focus:X.a.bool,inputRefProp:X.a.shape({current:X.a.instanceOf(Object)}),editable:X.a.bool,themeManager:X.a.object}),s()(Bg,"defaultProps",{isHiddenByKeyboardInput:!0,editable:!0}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-select {\n  max-width: 328px;\n}\n.lake-table-form-select-radio,\n.lake-table-form-select-checkbox {\n  margin: 8px 0;\n  min-height: 38px;\n}\n.lake-table-form-select-value {\n  white-space: normal;\n  word-break: break-word;\n}\n.lake-table-form-select .ant-radio-group,\n.lake-table-form-select .ant-checkbox-group {\n  width: 100%;\n}\n.lake-table-form-select .ant-radio-wrapper,\n.lake-table-form-select .ant-checkbox-wrapper {\n  font-size: 14px;\n  display: block;\n}\n.lake-table-form-select .ant-checkbox-wrapper + .ant-checkbox-wrapper {\n  margin-left: 0;\n}\n.lake-table-form-select .ant-checkbox {\n  display: inline-block;\n}\n.lake-table-form-select .ant-select .ant-select-selector {\n  background: var(--yq-bg-primary);\n  min-height: 32px;\n  padding-left: 8px;\n  border-radius: 6px;\n}\n.lake-table-form-select .ant-select .ant-select-selector .ant-select-selection-item {\n  line-height: 32px;\n}\n.lake-table-form-select .ant-select .ant-select-selector .ant-select-selection-search-input {\n  height: 32px;\n}\n.lake-table-form-select .ant-select .ant-select-selector .ant-select-selection-placeholder {\n  line-height: 32px;\n}\n.lake-table-form-select .ant-select .ant-select-arrow {\n  pointer-events: none;\n}\n.lake-table-form-select .ant-select-single:not(.ant-select-customize-input) .ant-select-selector {\n  background: var(--yq-bg-primary);\n  height: 32px;\n  font-size: 14px;\n  border-radius: 6px;\n}\n.lake-table-form-select .ant-select-multiple .ant-select-selector .ant-select-selection-item {\n  line-height: 22px;\n}\n.lake-table-form-select .ant-select-item {\n  min-height: 32px;\n  line-height: 30px;\n}\n.lake-table-form-select .ant-select-single .ant-select-selection-item .ant-tag-has-color {\n  margin-top: 4px;\n  overflow: hidden;\n}\n.lake-table-form-select .ant-select-item-option-selected {\n  background-color: var(--yq-bg-primary);\n}\n.lake-table-form-select .ant-select-item-option-active:hover {\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-table-form-select-multiSelect-dropdown .ant-select-item-option-content {\n  margin-left: 26px;\n}\n.lake-table-form-select-multiSelect-dropdown .ant-select-item-option-selected:not(.ant-select-item-option-disabled) .ant-select-item-option-state {\n  position: absolute;\n  top: 5px;\n  left: 15px;\n}\n.lake-table-form-select-multiSelect .ant-select-selection-overflow {\n  padding-bottom: 4px;\n}\n.lake-table-form-select-multiSelect .ant-select-selection-overflow-item {\n  height: 22px;\n  margin-top: 4px;\n}\n.lake-table-form-select-multiSelect .lake-table-form-select-readonly {\n  margin-bottom: -4px;\n  overflow: hidden;\n}\n.lake-table-form-select-multiSelect .lake-table-form-select-readonly .ant-tag-has-color {\n  float: left;\n  margin-bottom: 4px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: pre;\n  display: block;\n  max-width: 100%;\n  height: 22px;\n  line-height: 22px;\n}\n.lake-table-form-select .ant-select-item-option-content {\n  white-space: normal;\n  line-break: anywhere;\n}\n.lake-table-form-select .ant-form label {\n  font-size: 14px;\n}\n.lake-table-form-select .ant-radio-wrapper:hover .ant-radio-inner {\n  border-color: var(--yq-border-primary-active);\n}\n.lake-table-form-select .ant-tag-has-color {\n  color: var(--yq-text-body);\n  font-size: 14px;\n  white-space: pre;\n}\n.lake-table-form-select .ant-tag-has-color .ant-tag-close-icon {\n  color: var(--yq-text-body);\n}\n.lake-table-form-select-readonly .ant-tag-has-color {\n  cursor: default;\n}\n.lake-table-form-select-select .lake-table-form-select-readonly {\n  display: flex;\n}\n.lake-table-form-select-select .lake-table-form-select-readonly .ant-tag-has-color {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: pre;\n}\n.lake-table-form-select .lake-table-form-tag {\n  margin-right: 5px;\n}\n"),Vg.propTypes={id:X.a.string,field:X.a.object,defaultValue:X.a.array,readonly:X.a.bool,focus:X.a.bool,className:X.a.string,onChange:X.a.func,onColChange:X.a.func,editable:X.a.bool},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-checkbox .ant-radio-wrapper {\n  margin: 8px 0;\n  min-height: 38px;\n  width: 100px;\n  display: inline-block;\n}\n.lake-table-form-checkbox-value {\n  white-space: normal;\n  word-break: break-word;\n}\n.lake-table-form-checkbox .ant-radio-wrapper:hover .ant-radio-inner {\n  border-color: var(--yq-border-primary-active);\n}\n");var Hg=[{value:!0,name:_c("是")},{value:!1,name:_c("否")}];function zg(e){var t=e.onChange,n=e.id,r=e.defaultValue,o=e.readonly,a=e.focus;return o?l.a.createElement("div",{className:"lake-table-form-checkbox-readonly"},l.a.createElement(mt.a,{checked:r})):l.a.createElement("div",{className:"lake-table-form-checkbox",id:n},l.a.createElement(vt.a.Group,{onChange:t,defaultValue:r,autoFocus:a},Hg.map((function(e,t){return l.a.createElement(vt.a,{value:e.value,key:t},l.a.createElement("span",{className:"lake-table-form-type-checkbox-value"},e.name))}))))}zg.propTypes={id:X.a.string,onChange:X.a.func};var qg={},Ug={},Gg={};Object.defineProperty(Gg,"__esModule",{value:!0}),Gg.default=void 0,Gg.default={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var Wg={},Yg={};Object.defineProperty(Yg,"__esModule",{value:!0}),Yg.default=void 0;Yg.default={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};var $g={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={placeholder:"Select time",rangePlaceholder:["Start time","End time"]}}($g),function(e){var t=Rt.a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(a.a),r=t(Yg),o=t($g),i={lang:(0,n.default)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},r.default),timePickerLocale:(0,n.default)({},o.default)};e.default=i}(Wg);var Kg={};!function(e){var t=Rt.a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Wg).default;e.default=n}(Kg),function(e){var t=Rt.a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Gg),r=t(Wg),o=t($g),a=t(Kg),i="${label} is not a valid ${type}",l={locale:"en",Pagination:n.default,DatePicker:r.default,TimePicker:o.default,Calendar:a.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:i,method:i,array:i,object:i,number:i,date:i,boolean:i,integer:i,float:i,regexp:i,email:i,url:i,hex:i},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};e.default=l}(Ug),function(e){var t=Rt.a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Ug).default;e.default=n}(qg);var Xg=cn(qg),Zg={},Qg={};Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.default=void 0,Qg.default={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};var Jg={},eb={};Object.defineProperty(eb,"__esModule",{value:!0}),eb.default=void 0;eb.default={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"};var tb={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]}}(tb),function(e){var t=Rt.a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(a.a),r=t(eb),o=t(tb),i={lang:(0,n.default)({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeWeekPlaceholder:["开始周","结束周"]},r.default),timePickerLocale:(0,n.default)({},o.default)};i.lang.ok="确 定";var l=i;e.default=l}(Jg);var nb={};!function(e){var t=Rt.a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Jg).default;e.default=n}(nb),function(e){var t=Rt.a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Qg),r=t(Jg),o=t(tb),a=t(nb),i="${label}不是一个有效的${type}",l={locale:"zh-cn",Pagination:n.default,DatePicker:r.default,TimePicker:o.default,Calendar:a.default,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:i,method:i,array:i,object:i,number:i,date:i,boolean:i,integer:i,float:i,regexp:i,email:i,url:i,hex:i},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"}};e.default=l}(Zg);var rb=cn(Zg);nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-date {\n  max-width: 216px;\n}\n.lake-table-form-date-input {\n  height: 32px;\n}\n.lake-table-form-date .ant-picker {\n  width: 216px;\n  height: 32px;\n  font-size: 16px;\n  border-radius: 6px;\n}\n.lake-table-form-date .ant-picker-clear {\n  margin-right: 6px;\n  background: transparent;\n}\n");var ob="zhCN"===Cc._lang?rb:Xg;function ab(e){var t=e.onChange,n=e.id,r=e.defaultValue,o=e.readonly,a=e.format,c=void 0===a?"YYYY-MM-DD":a,s=e.focus,u=window.h5,d=Object(i.useState)(r),f=ie()(d,2),p=f[0],h=f[1],m=Object(i.useState)(!1),v=ie()(m,2),g=v[0],b=v[1];if(Object(i.useEffect)((function(){h(r?_e()(r).format(c):null)}),[r]),o)return r?l.a.createElement("div",{className:"lake-table-form-date-readonly"},r?_e()(r).format(c):""):l.a.createElement(Ag,null);var y=Object(i.useRef)(null);return Object(i.useEffect)((function(){s&&y.current&&y.current.focus()}),[]),l.a.createElement("div",{className:"lake-table-form-date",id:n},u?g?l.a.createElement(_t.c,{visible:!0,onClose:function(){b(!1)},defaultValue:_e()(p||new Date).toDate(),onConfirm:function(e){h(e),t(_e()(e).format(c))},min:_e()("1970-01-01 00:00:00").toDate(),precision:"day"}):l.a.createElement(ht.a,{value:p?_e()(p).format(c):null,className:"lake-table-form-date-input",placeholder:_c("请选择"),suffix:l.a.createElement(cg,null),readonly:"readonly",onClick:function(){return b(!0)},onChange:t}):l.a.createElement(Ct.a,{locale:ob},l.a.createElement(Ot.a,{onChange:t,defaultValue:r?_e()(r):null,autoFocus:s,ref:y})))}function ib(e){var t=e.onChange,n=e.onBlur,r=e.id,o=e.defaultValue,a=e.prefix,c=e.readonly,s=e.focus,u=Object(i.useState)(o),d=ie()(u,2),f=d[0],p=d[1],h=function(e){e.stopPropagation(),window.open("mailto:"+f)};if(c)return o?l.a.createElement("div",{className:"lake-table-form-email-readonly"},l.a.createElement("span",{className:"lake-table-form-email-text"},o),l.a.createElement("span",{onClick:h,className:"lake-icon lake-icon-col-email lake-table-form-email-action"})):l.a.createElement(Ag,null);void 0===a&&(a=l.a.createElement("span",{className:"lake-icon lake-icon-col-email"}));var m=Object(i.useRef)(null);return Object(i.useEffect)((function(){s&&m.current&&m.current.focus({cursor:"end"})}),[s]),l.a.createElement("div",{className:"lake-table-form-email",id:r},l.a.createElement(ht.a,{allowClear:!0,defaultValue:o,type:"text",placeholder:_c("请输入"),prefix:a,onChange:function(e){p(e.target.value),t(e)},onBlur:n,suffix:f&&l.a.createElement("span",{onClick:h,className:"lake-icon lake-icon-col-email lake-table-form-email-action"}),autoFocus:s,ref:m}))}function lb(e){var t=e.onRetry,n=e.onRemove;return l.a.createElement("div",{className:"lake-table-form-upload-error"},l.a.createElement("span",{className:"lake-icon lake-icon-table-delete-file remove-file-icon",onClick:n}),_c("上传失败"),l.a.createElement("div",{className:"re-upload-file",onClick:t},_c("重新上传")))}function cb(e){return e.reduce((function(e,t){var n=t.getBoundingClientRect(),r=n.top,o=n.left;return e[t.dataset.id]={top:r,left:o},e}),{})}function sb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ub(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sb(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ab.propTypes={id:X.a.string,onChange:X.a.func},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-email {\n  max-width: 328px;\n}\n.lake-table-form-email .ant-input-clear-icon {\n  display: flex;\n  align-items: center;\n  font-size: 16px;\n}\n.lake-table-form-email .ant-input-prefix {\n  margin-right: 8px;\n}\n.lake-table-form-email .larkui-input {\n  border-radius: 6px;\n}\n.lake-table-form-email-action {\n  display: inline-block;\n  color: var(--yq-text-caption);\n  font-size: 16px;\n  cursor: pointer;\n  z-index: 1;\n  border-radius: 6px;\n  padding: 2px;\n  vertical-align: middle;\n}\n.lake-table-form-email-action:hover {\n  color: var(--yq-text-body);\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-form-email-readonly {\n  display: flex;\n  align-items: center;\n}\n.lake-table-form-email-readonly .lake-table-form-email-text {\n  max-width: calc(100% - 26px);\n  display: inline-block;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n.lake-table-form-email-readonly .lake-table-form-email-action {\n  margin-left: 8px;\n}\n"),ib.rules=[{validator:function(e,t){return""===t||null==t||Es(t)?Promise.resolve():Promise.reject(new Error(_c("输入格式有误")))}}],ib.propTypes={id:X.a.string,prefix:X.a.node,onChange:X.a.func},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-upload-error {\n  color: var(--yq-text-caption);\n  border-radius: 6px;\n  border: 1px solid var(--yq-border-light);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 143px;\n  height: 120px;\n  background-color: var(--yq-bg-secondary);\n  margin-left: 8px;\n  margin-top: 5px;\n}\n.lake-table-form-upload-error .ant-btn-link {\n  padding: 0 5px;\n}\n.lake-table-form-upload-error .ant-btn-link:hover,\n.lake-table-form-upload-error .ant-btn-link:active {\n  color: var(--yq-text-link-hover);\n}\n.lake-table-form-upload-error .re-upload-file {\n  font-size: 14px;\n  color: var(--yq-text-link);\n}\n.lake-table-form-upload-error-remove {\n  color: var(--yq-function-error);\n  font-size: 14px;\n  display: inline-block;\n  cursor: pointer;\n}\n.lake-table-form-upload-error .remove-file-icon {\n  color: var(--yq-icon-secondary);\n  font-size: 20px;\n  margin-bottom: 8px;\n}\n"),lb.propTypes={onRemove:X.a.func,onRetry:X.a.func},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.sortable-item.dragging {\n  cursor: grabbing;\n}\n.sortable-item .lake-icon-draggable:hover {\n  cursor: grab;\n}\n");var db=new Image(0,0);function fb(e){var t,n=e.list,r=e.onChange,o=e.isDraggable,a=e.render,c=e.ignoreRule,s=Object(i.useState)(n||[]),u=ie()(s,2),d=u[0],f=u[1],p=Object(i.useRef)(null),h=Object(i.useRef)(null),m=Object(i.useRef)(null),v=Object(i.useRef)(null),g=function(e,t){var n=Object(i.useRef)([]),r=Object(i.useRef)([]),o=Object(i.useRef)(!1),a=Object(i.useCallback)((function(){n.current=cb(r.current),r.current=[]}),[]);return Object(i.useLayoutEffect)((function(){if(t){var e=cb(r.current),a=n.current;Object.keys(a).forEach((function(t){var n=e[t];if(n){var i=a[t],l={left:i.left-n.left,top:i.top-n.top};if(!l.left||!l.top){var c=[{transform:"translate3d(".concat(l.left,"px, ").concat(l.top,"px, 0)")},{transform:"translate3d(0, 0, 0)"}];o.current=!0,r.current.find((function(e){return e.dataset.id===t})).animate(c,{duration:300,easing:"cubic-bezier(0,0,0.32,1)"}).onfinish=function(){o.current=!1}}}}))}}),[e,t]),{savePrevRects:a,setDoms:function(e){e&&r.current.push(e)},animatingRef:o}}(d,p.current),b=g.animatingRef,y=g.setDoms,w=g.savePrevRects,k=Object(i.useState)(!1),x=ie()(k,2),E=x[0],C=x[1],O=function(e){var t=c&&c(e.target);C(t)},_=function(e){if(E)return e.preventDefault(),void e.stopPropagation();p.current=e.currentTarget,m.current=e.currentTarget.dataset.index,p.current.classList.add("dragging"),e.dataTransfer.setDragImage(db,0,0),document.body.style.cursor="grabbing"},R=function(){r(d,m.current,v.current),p.current.classList.remove("dragging"),p.current=null,h.current=null,m.current=null,v.current=null,document.body.style.cursor="default"},j=$()((function(e,t,n){p.current&&(w(),f(e),v.current=n,h.current="".concat(t,"-").concat(n))}),10),A=function(e){if(e.preventDefault(),e.dataTransfer.dropEffect="move",document.body.style.cursor="grabbing",null==b||!b.current){var t=m.current,n=e.currentTarget.dataset.index;if(!(null==n||n>=d.length||t===n||h.current==="".concat(t,"-").concat(n))){var r=me()(d),o=r.splice(t,1)[0];r.splice(n,0,o),JSON.stringify(d)!==JSON.stringify(r)&&(j(r,t,n),m.current=n)}}};return Object(i.useEffect)((function(){f(n)}),[n]),l.a.createElement(l.a.Fragment,null,(t=a(d),t?Array.isArray(t)?t:[t]:[]).map((function(e,t){return function(e,t){return window.h5||!o?e:l.a.cloneElement(e,{draggable:!0,ref:y,"data-index":t,className:S()("sortable-item",e.props.className),onPointerDown:O,onDragStart:_,onDragOver:A,onDragEnd:R,style:ub({},e.props.style)})}(e,t)})))}function pb(e){var t=e.onChange,n=e.id,r=e.accept,o=e.unSupportFileUpload,a=e.uploadAction,i=e.quickUploadAction,c=e.defaultValue,s=e.readonly,u=e.uploadComponentHeight,d=e.uploadComponentEmptyHeight;e.controller;var f=e.sessionStoreKey,p=e.focusPasteContainer,h=void 0!==p&&p,m=function(e,n,r,o,a,i){var c=e.src,u=Dd(c),d=Ms("fileIcons.".concat(u))||Ms("fileIcons.default");return l.a.createElement("div",{className:S()("lake-table-file-form-item",!i&&"lake-table-file-form-disable"),key:"success-file-".concat(n),"data-id":e.uid},l.a.createElement("div",{className:"lake-table-file-form-file"},l.a.createElement("img",{loading:"lazy",src:d,className:"lake-table-file-form-file-image"}),l.a.createElement("div",{className:"lake-table-file-form-actions"},l.a.createElement("span",{className:"lake-icon lake-icon-view",onClick:function(t){return function(e,t){e.preventDefault(),e.stopPropagation();var n=Nd(t.src,t.size);n&&(as.desktop&&window.openExternalLink?window.openExternalLink(n,!0):window.open(n,"_blank","noopener,noreferrer"))}(t,e)}}),l.a.createElement("span",{className:"lake-icon lake-icon-table-download-file",onClick:function(){return e=c,void(as.desktop&&window.openExternalLink?window.openExternalLink(e,!0):window.open(e,"_blank"));var e}}),!s&&i&&l.a.createElement("span",{className:"lake-icon lake-icon-table-delete",onClick:function(){return function(e,n,r,o){var a=n;a.splice(e,1),a.length||o(!0),r(me()(a)),t(a)}(n,r,o,a)}}))),l.a.createElement("div",{className:"lake-table-file-form-name"},e.name))},v=function(e,t){return"progress"===e.status?function(e){return e?l.a.createElement("div",{className:"lake-table-file-form-uploading-file"},parseFloat(e.toFixed(2)),"%",l.a.createElement(jt.a,{indicator:l.a.createElement(hg,{className:"lake-table-file-form-image-loading-icon",spin:!0})})):null}(t):l.a.createElement("div",{className:"lake-table-file-form-uploading-file"},0,"%",l.a.createElement(jt.a,{indicator:l.a.createElement(hg,{className:"lake-table-file-form-image-loading-icon",spin:!0})}))};return l.a.createElement(l.a.Fragment,null,Cb.renderFileManageComponent({renderFileList:function(e,t,r,o,a,i,c,u,d,f,p,h){return f?null:l.a.createElement("div",{className:"lake-table-file-form",id:n},l.a.createElement(fb,{list:e,onChange:h,isDraggable:!(s||r&&r.length),render:function(e){return null==e?void 0:e.map((function(t,n){return m(t,n,e,c,p,!r||!r.length)}))}}),t&&v(t,i),null==r?void 0:r.map((function(e){return v(e)})),null==a?void 0:a.map((function(e,t){return l.a.createElement(lb,{key:t,onRetry:function(){return function(e,t,n,r){var o=t.splice(e,1);n(me()(t)),r(o)}(t,a,u,d)},onRemove:function(){return function(e,t,n,r){t.splice(e,1),t.length||r(!0),n(me()(t))}(t,a,u,p)}})})))},fileValue:c,onChange:t,unSupportFileUpload:o,readonly:s,showUploadComponent:!s,sessionStoreKey:f,acceptFileType:r,className:"lake-table-file-form-upload",focusPasteContainer:h,style:{uploadComponentHeight:u,uploadComponentEmptyHeight:d},uploaderOption:{uploadAction:a||"/api/tables/upload?token=".concat(ss.share.token,"&type=attachment"),quickUploadAction:i,cellType:Ac.FILE,uploadFileProperty:["uid","name"]}}))}function hb(e){var t=e.onChange,n=e.id,r=e.uploadAction,o=e.quickUploadAction,a=e.unSupportFileUpload,i=e.defaultValue,c=e.readonly,s=e.uploadComponentHeight,u=e.uploadComponentEmptyHeight,d=e.sessionStoreKey,f=e.accept,p=e.focusPasteContainer,h=void 0!==p&&p,m=function(e,t,n){n.stopPropagation(),dp(e,t)},v=function(e,t,n,r){var o=t.splice(e,1);n(me()(t)),r(o)},g=function(e,t,n,r){t.splice(e,1),t.length||r(!0),n(me()(t))},b=function(e,n,r,o,a,i){return l.a.createElement("div",{className:S()("lake-table-file-form-item",!i&&"lake-table-file-form-disable"),key:"success-".concat(n),"data-id":e.uid},l.a.createElement("div",{className:"lake-table-file-form-file"},l.a.createElement("img",{loading:"lazy",src:up(e.src,e.width,e.height,120),className:"lake-table-file-form-image",onClick:function(e){return m(r,n,e)}}),l.a.createElement("div",{className:"lake-table-file-form-actions"},l.a.createElement("span",{className:"lake-icon lake-icon-view",onClick:function(e){return m(r,n,e)}}),l.a.createElement("span",{className:"lake-icon lake-icon-table-download-file",onClick:function(){return function(e){as.desktop&&window.openExternalLink&&window.openExternalLink(e.src,!0),window.open(e.src,"_blank")}(e)}}),!c&&i&&l.a.createElement("span",{className:"lake-icon lake-icon-table-delete",onClick:function(){return function(e,n,r,o){var a=n;a.splice(e,1),a.length||o(!0),r(me()(a)),t(a)}(n,r,o,a)}}))),l.a.createElement("div",{className:"lake-table-file-form-name"},e.name))},y=function(e,t){return"progress"===e.status?function(e){return e?l.a.createElement("div",{className:"lake-table-file-form-uploading-file"},parseFloat(e.toFixed(2)),"%",l.a.createElement(jt.a,{indicator:l.a.createElement(hg,{className:"lake-table-file-form-image-loading-icon",spin:!0})})):null}(t):l.a.createElement("div",{className:"lake-table-file-form-uploading-file"},0,"%",l.a.createElement(jt.a,{indicator:l.a.createElement(hg,{className:"lake-table-file-form-image-loading-icon",spin:!0})}))};return l.a.createElement(l.a.Fragment,null,Cb.renderFileManageComponent({renderFileList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,d=arguments.length>9?arguments[9]:void 0,f=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return d?null:l.a.createElement("div",{className:"lake-table-file-form",id:n},l.a.createElement(fb,{list:e,onChange:p,isDraggable:!(c||r&&r.length),render:function(e){return null==e?void 0:e.map((function(t,n){return b(t,n,e,i,f,!r||!r.length)}))}}),t&&y(t,a),null==r?void 0:r.map((function(e){return y(e)})),null==o?void 0:o.map((function(e,t){return l.a.createElement(lb,{key:t,onRetry:function(){return v(t,o,s,u)},onRemove:function(){return g(t,o,s,f)}})})))},fileValue:i&&i.filter(Boolean),unSupportFileUpload:a,onChange:t,readonly:c,showUploadComponent:!c,sessionStoreKey:d,acceptFileType:f,className:"lake-table-file-form-upload",focusPasteContainer:h,style:{uploadComponentHeight:s,uploadComponentEmptyHeight:u},uploaderOption:{uploadAction:r||"/api/tables/upload?token=".concat(ss.share.token,"&type=image"),quickUploadAction:o,cellType:Ac.IMAGE,uploadFileProperty:["uid","name","width","height"]}}))}function mb(e){var t=e.controller,n=Object(i.useState)(!1),r=ie()(n,2),o=r[0],a=r[1],c=Object(i.useState)(""),s=ie()(c,2),u=s[0],d=s[1],f=Object(i.useRef)(null),p=function(){setTimeout((function(){var e;null===(e=document.querySelector(".lake-table-file-manage-modal"))||void 0===e||e.focus()}),300)},h=function(e){var n=e.cellType,r=e.value,o=e.colConfigs,i=e.rowId,l=t.getModalTitle(n);f.current=t.getModalContent(n,{defaultValue:r,focusPasteContainer:!0,sessionStoreKey:"lark-table-session-store-key"+i+o.id,onChange:function(e){t.onChange(e,i,o.id),p()}}),d(l),a(!0),p()};return Object(i.useEffect)((function(){return t.onTableEvent(qs.SHOW_FILE_MANAGE_MODAL,h),function(){t.offTableEvent(qs.SHOW_FILE_MANAGE_MODAL,h)}}),[]),l.a.createElement(ct.a,{visible:o,wrapClassName:"lake-table-file-manage-modal",title:u,footer:null,onCancel:function(){o&&a(!1)},width:"auto",destroyOnClose:!0,getContainer:t.modalContainer,centered:!0},l.a.createElement("div",{className:"lake-table-file-manage-modal-container"},f.current))}db.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",fb.defaultProps={onChange:function(){},render:function(){},isDraggable:!0},fb.propTypes={list:X.a.array,onChange:X.a.func,render:X.a.func,isDraggable:X.a.bool,ignoreRule:X.a.func},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-file-form {\n  display: flex;\n  flex-wrap: wrap;\n  min-height: 120px;\n  margin-top: 10px;\n  width: 100%;\n  border: 1px solid var(--yq-border-light);\n  border-radius: 6px;\n  padding-left: 4px;\n  padding-top: 5px;\n  padding-bottom: 5px;\n}\n.lake-table-file-form-item {\n  width: calc((100% - 35px) / 3);\n  margin-left: 8px;\n  margin-top: 5px;\n  position: relative;\n  cursor: grab;\n}\n.lake-table-file-form-disable {\n  cursor: default;\n}\n.lake-table-file-form-file {\n  line-height: 120px;\n  width: 100%;\n  height: 120px;\n  border-radius: 6px;\n  background: var(--yq-bg-secondary);\n  text-align: center;\n}\n.lake-table-file-form-file:hover .lake-table-file-form-actions {\n  display: flex;\n  justify-content: end;\n  align-items: center;\n}\n.lake-table-file-form-file .ant-spin-spinning {\n  margin-left: 5px;\n}\n.lake-table-file-form-uploading-file {\n  line-height: 120px;\n  height: 120px;\n  border-radius: 6px;\n  background: var(--yq-bg-tertiary);\n  text-align: center;\n  width: calc((100% - 35px) / 3);\n  margin-left: 8px;\n  margin-top: 5px;\n  position: relative;\n}\n.lake-table-file-form-actions {\n  position: absolute;\n  bottom: 26px;\n  background: linear-gradient(transparent, rgba(0, 0, 0, 0.55));\n  border-radius: 4px;\n  height: 40px;\n  line-height: 24px;\n  display: none;\n  width: 100%;\n  text-align: right;\n}\n.lake-table-file-form-actions :hover {\n  background-color: rgba(0, 0, 0, 0.2);\n  border-radius: 6px;\n}\n.lake-table-file-form-actions .lake-icon {\n  font-size: 20px;\n  margin-right: 4px;\n  padding: 2px;\n  cursor: pointer;\n  color: var(--yq-icon-primary);\n}\n.lake-table-file-form-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border: 1px solid var(--yq-border-light);\n  border-radius: 6px;\n}\n.lake-table-file-form-file-image {\n  width: 100%;\n  height: 100%;\n  object-fit: initial;\n  border: 1px solid var(--yq-border-light);\n  border-radius: 6px;\n}\n.lake-table-file-form-name {\n  font-size: 14px;\n  line-height: 17px;\n  text-align: left;\n  color: var(--yq-text-primary);\n  width: 100%;\n  overflow: hidden;\n  height: 17px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-top: 6px;\n  margin-bottom: 4px;\n}\n.lake-table-file-form-loading {\n  background: var(--yq-bg-tertiary);\n  width: calc((100% - 35px) / 3);\n  height: 120px;\n  text-align: center;\n  font-size: 14px;\n  line-height: 120px;\n  border-radius: 4px;\n}\n.lake-table-file-form-loading-icon {\n  font-size: 14px;\n  margin-left: 4px;\n}\n.lake-table-file-form-upload {\n  width: auto;\n}\n"),pb.propTypes={id:X.a.string,onChange:X.a.func,accept:X.a.string,unSupportFileUpload:X.a.func,uploadAction:X.a.oneOfType([X.a.string,X.a.func]),quickUploadAction:X.a.string,defaultValue:X.a.any,readonly:X.a.bool,uploadComponentHeight:X.a.number,uploadComponentEmptyHeight:X.a.number,controller:X.a.object,sessionStoreKey:X.a.string,focusPasteContainer:X.a.bool},hb.propTypes={id:X.a.string,onChange:X.a.func,unSupportFileUpload:X.a.func,defaultValue:X.a.any,readonly:X.a.bool,uploadAction:X.a.oneOfType([X.a.string,X.a.func]),quickUploadAction:X.a.string,uploadComponentHeight:X.a.number,uploadComponentEmptyHeight:X.a.number,sessionStoreKey:X.a.string,accept:X.a.string},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-file-manage-modal .ant-modal-content {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n}\n.lake-table-file-manage-modal .ant-modal-content .ant-modal-header {\n  border-bottom: none;\n}\n.lake-table-file-manage-modal .ant-modal-content .ant-modal-body {\n  padding-top: 8px;\n  border-radius: 6px;\n  overflow: auto;\n  max-height: 485px;\n}\n.lake-table-file-manage-modal .ant-modal-content .ant-modal-body .ant-upload.ant-upload-drag {\n  background: var(--yq-bg-secondary);\n}\n.lake-table-file-manage-modal-container {\n  width: 470px;\n}\n"),mb.propTypes={controller:X.a.object.isRequired};var vb=function(){function e(t){d()(this,e),this.storeKey=t,e.dataKeys.push(t)}return p()(e,[{key:"setData",value:function(e){var t=this.storeKey;if(t)try{sessionStorage.setItem(t,JSON.stringify(e))}catch(e){ed(!1,"set session data have some error ".concat(e))}}},{key:"appendData",value:function(e){var t=this.storeKey;if(t)try{var n=JSON.parse(sessionStorage.getItem(t));n&&n.push(e);var r=JSON.stringify(n||[e]);sessionStorage.setItem(t,r)}catch(e){ed(!1,"append session data have some error ".concat(e))}}},{key:"getData",value:function(){if(this.storeKey)try{return JSON.parse(sessionStorage.getItem(this.storeKey))}catch(e){ed(!1,"get session data have some error ".concat(e))}}},{key:"clearItem",value:function(){var e=this.storeKey;if(e)try{sessionStorage.removeItem(e)}catch(e){ed(!1,"clear item have some error ".concat(e))}}}],[{key:"clearData",value:function(){try{e.dataKeys.forEach((function(e){return sessionStorage.removeItem(e)})),e.dataKeys=[]}catch(e){ed(!1,"clear session data have some error ".concat(e))}}}]),e}();function gb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gb(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}s()(vb,"dataKeys",[]),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-file-manage-component {\n  width: auto;\n  border-radius: 8px;\n}\n.lake-table-file-manage-component-upload {\n  background-color: var(--yq-bg-secondary);\n}\n.lake-table-file-manage-component .ant-upload-drag {\n  border-radius: 8px;\n}\n.lake-table-file-manage-component .ant-upload {\n  padding: 0 !important;\n}\n.lake-table-file-manage-component .ant-btn:hover {\n  color: var(--yq-black);\n  border-color: var(--yq-bg-primary);\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-file-manage-component-empty-content {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border: 0 none;\n  display: flex;\n  flex-direction: column;\n  height: 218px;\n  justify-content: center;\n  align-items: center;\n  background-color: var(--yq-bg-secondary);\n  border-radius: 8px;\n}\n.lake-table-file-manage-component-empty-content .lake-table-file-manage-component-title {\n  margin-top: 25px;\n  margin-bottom: 20px;\n}\n.lake-table-file-manage-component-content {\n  display: flex;\n  justify-content: space-between;\n  padding: 0 20px;\n  align-items: center;\n  height: 60px !important;\n  border-radius: 8px;\n}\n.lake-table-file-manage-component-content .lake-table-file-manage-component-title {\n  margin-left: -125px;\n}\n.lake-table-file-manage-component-upload-button.ant-btn {\n  display: flex;\n  align-items: center;\n}\n.lake-table-file-manage-component-title {\n  font-size: 14px;\n  line-height: 22px;\n  color: var(--yq-text-caption);\n  text-align: center;\n}\n.lake-table-file-manage-component-tip {\n  color: var(--yq-text-disable);\n  font-size: 12px;\n  line-height: 20px;\n}\n.lake-table-file-manage-component-plus-icon {\n  font-size: 18px;\n  color: var(--yq-text-primary);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-table-file-manage-component-paste-container {\n  overflow: hidden;\n  position: absolute;\n  border: none;\n  width: 0;\n  height: 0;\n  left: -10px;\n  outline: none;\n  background: none;\n}\n.lake-table-file-manage-component-button-title {\n  color: var(--yq-black) !important;\n}\n.lake-table-file-manage-component .lake-icon-table-paste {\n  color: var(--yq-icon-disable);\n  font-size: 22px;\n}\n");var yb=Tt.a.Dragger,wb={status:"wait"};function kb(e){var t=e.fileValue,n=void 0===t?[]:t,r=e.unSupportFileUpload,o=void 0===r?function(){}:r,a=e.renderFileList,c=void 0===a?function(){}:a,s=e.acceptFileType,u=e.uploaderOption,d=e.className,f=e.onChange,p=void 0===f?function(){}:f,h=e.readonly,m=e.style,v=e.showUploadComponent,g=e.sessionStoreKey,b=e.focusPasteContainer,y=Object(i.useRef)(),w=window.h5,k=Object(i.useState)(Array.isArray(n)?!n.length:!n),x=ie()(k,2),E=x[0],C=x[1],O=Object(i.useState)(n),_=ie()(O,2),R=_[0],j=_[1],A=Object(i.useState)(0),T=ie()(A,2),L=T[0],D=T[1],P=Object(i.useRef)(!1),M=Object(i.useRef)(null),N=Object(i.useRef)([]),I=Object(i.useRef)([]),F=Object(i.useRef)([]),B=Object(i.useState)([]),V=ie()(B,2),H=V[0],z=V[1],q=Object(i.useMemo)((function(){return new uh(bb(bb({},u),{},{acceptFileType:s}))}));Object(i.useEffect)((function(){var e;b&&(null===(e=y.current)||void 0===e||e.focus())}),[b]),Object(i.useEffect)((function(){return window.addEventListener("beforeunload",(function(e){P.current&&(e.preventDefault(),e.returnValue="")})),window.removeEventListener("beforeunload",(function(e){P.current&&(e.preventDefault(),e.returnValue="")}))}),[]),Object(i.useEffect)((function(){return window.addEventListener("unload",(function(){vb.clearData()})),window.removeEventListener("unload",(function(){vb.clearData()}))}),[]);var U=Object(i.useMemo)((function(){return new vb(g)})),G=function(){N.current.length?q.upload(N.current.shift(),u.cellType):(P.current=!1,I.current=[],F.current=[])};q.on("change",(function(e,t,n){if(M.current||(M.current={}),u.uploadFileProperty.forEach((function(e){M.current[e]=t[e]})),"progress"===e)M.current.status="progress",Y("progress",n.percent),D(n.percent);else if("error"===e)Xe.a.error(n.message||_c("上传失败，请重试")),M.current=null,Y("error"),F.current.push({file:M.current}),z([].concat(me()(H),me()(F.current))),G();else if("success"===e){Y("success");var r=M.current;r.status="success",r.src=n.url,r.size=t.size,I.current.push(r);var a=[].concat(me()(R),me()(I.current));M.current=null,j(me()(a)),p(a),G()}else"limit"===e?(M.current=null,Y("error"),G()):"unsupport"===e&&(o(t),M.current=null,Y("error"),G())}));var W,Y=function(e,t){switch(e){case"progress":!function(e){var t=U.getData();t&&(t[0]={status:"progress",percent:e},U.setData(t))}(t);break;case"error":case"success":!function(){var e=U.getData();e&&(e.shift(),e.length?U.setData(e):U.clearItem())}();break;default:assert(!1,"error status")}},$=function(e){E&&C(!1),N.current.push(e),U.appendData(wb),P.current||(P.current=!0,function(e){q.upload(e,u.cellType)}(N.current.shift()))},K=function(e){var t=e.file;t&&$(t)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:S()("lake-table-file-manage-component",d)},v&&(w?l.a.createElement(Tt.a,{customRequest:function(e){return K(e)},accept:s,disabled:h,showUploadList:!1,multiple:!0},l.a.createElement(ft.a,{className:"lake-table-file-manage-component-upload-button"},l.a.createElement("span",{className:"lake-icon lake-icon-table-plus lake-table-file-manage-component-plus-icon"}),l.a.createElement("div",{className:"lake-table-file-manage-component-button-title"},_c("本地上传")))):l.a.createElement("div",{onPaste:function(e){var t;e.preventDefault(),e.stopPropagation();var n=null===(t=e.clipboardData)||void 0===t?void 0:t.files;n&&Array.from(n).forEach((function(e){return $(e)}))},className:"lake-table-file-manage-component-upload"},l.a.createElement("input",{className:"lake-table-file-manage-component-paste-container",ref:y}),l.a.createElement(yb,{showUploadList:!1,customRequest:function(e){return K(e)},disabled:h,openFileDialogOnClick:!1,multiple:!0},l.a.createElement("div",{style:{height:m.uploadComponentEmptyHeight},className:"lake-table-file-manage-component".concat(E?"-empty":"","-content")},l.a.createElement("span",{className:"lake-icon lake-icon-table-paste"}),l.a.createElement("span",{className:"lake-table-file-manage-component-title"},_c("直接粘贴或拖拽到这里")),l.a.createElement(Tt.a,{customRequest:function(e){return K(e)},accept:s,disabled:h,showUploadList:!1,multiple:!0},l.a.createElement(ft.a,{className:"lake-table-file-manage-component-upload-button"},l.a.createElement("span",{className:"lake-icon lake-icon-table-plus lake-table-file-manage-component-plus-icon"}),l.a.createElement("div",{className:"lake-table-file-manage-component-button-title"},_c("本地上传")))))))),c(R||[],function(){if(M.current)return M.current;var e=U.getData();return e&&e.length?(E&&C(!1),e.find((function(e){return"progress"===e.status}))):void 0}(),function(){if(N.current&&N.current.length)return N.current;var e=U.getData();return e&&e.length?(E&&C(!1),e.filter((function(e){return"wait"===e.status}))):void 0}(),I.current,H,function(){if(L)return L;var e=U.getData();if(e&&e.length){var t=e.find((function(e){return"progress"===e.status}));return(null==t?void 0:t.percent)||0}}(),j,z,$,(W=U.getData(),E&&!(null!=W&&W.length)),C,(function(e){j(e),p(e)}))))}function xb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xb(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}kb.propTypes={controller:X.a.object,unSupportFileUpload:X.a.func,fileValue:X.a.any,renderFileList:X.a.func,acceptFileType:X.a.string,uploaderOption:X.a.object,onChange:X.a.func,className:X.a.string,readonly:X.a.bool,style:X.a.object,sessionStoreKey:X.a.string,showUploadComponent:X.a.bool,focusPasteContainer:X.a.bool};var Cb=function(){function e(t,n,r){var o=this;d()(this,e),s()(this,"_row",null),s()(this,"_col",null),s()(this,"onChange",(function(e,t,n){var r=o.ViewHelper.todo_getColByColId(n),a=o.ViewHelper.todo_getRowByRowId(t);o.executeKernelCommand("setCellValue",a,r,{value:e})})),s()(this,"getModalContent",(function(t,n){var r=Eb(Eb({},o.getModalContentOptions(t)),n);switch(r.unSupportFileUpload=function(e){o._table.emit("unSupportFileUpload",e)},t){case Ac.IMAGE:return e.renderImageComponent(r);case Ac.FILE:return e.renderFileComponent(r);default:ed(!1,"no file manage component")}})),this._table=t,this._kernel=t.kernel,this._mode=n,this._modalContainer=r||document.body}return p()(e,[{key:"onTableEvent",value:function(e,t){this._table.on(e,t)}},{key:"offTableEvent",value:function(e,t){this._table.off(e,t)}},{key:"executeKernelCommand",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this._kernel).execute.apply(t,[e].concat(r))}},{key:"renderModalContent",value:function(t){var n=t.controller;return n||(t.table||ed(!1,"no important property table"),n=new e(t.table)),l.a.createElement(kb,a()({controller:n},t))}},{key:"ColType",get:function(){return this._colConfig.type}},{key:"isReadonly",get:function(){return"read"===this._mode}},{key:"TableModel",get:function(){return this._table.kernel.tableModel}},{key:"ViewHelper",get:function(){return this._table.viewManager.getViewRenderer().viewportHelper}},{key:"Col",get:function(){return this._col},set:function(e){this._col=e}},{key:"Row",get:function(){return this._row},set:function(e){this._row=e}},{key:"Table",get:function(){return this._table}},{key:"parseModalOptions",value:function(e){var t=e.row,n=e.col,r=e.value;return{row:t,col:n,colConfigs:this._table.viewManager.getViewRenderer().viewportHelper.getColConfigs(n),defaultValue:r}}},{key:"getModalOptions",value:function(e){return this._colConfig=e,{title:this.getModalTitle(this.ColType)}}},{key:"getModalContentOptions",value:function(e){switch(e){case Ac.IMAGE:return{readonly:this.isReadonly,uploadAction:Qe()(this._table.options,["image","uploadAction"]),quickUploadAction:Qe()(this._table.options,["image","quickUploadAction"]),accept:this.getAcceptType(Ac.IMAGE)};case Ac.FILE:return{readonly:this.isReadonly,uploadAction:Qe()(this._table.options,["file","uploadAction"]),quickUploadAction:Qe()(this._table.options,["file","quickUploadAction"]),accept:this.getAcceptType(Ac.FILE)};default:ed(!1,"no file manage options")}}},{key:"getModalTitle",value:function(e){switch(e){case Ac.IMAGE:return _c("图片列表");case Ac.FILE:return _c("附件列表");default:ed(!1,"file manage modal title")}}},{key:"getAcceptType",value:function(e){var t,n;return e===Ac.IMAGE?(null===(t=this._table.options.image)||void 0===t?void 0:t.accept)||Ld.IMAGE_EXT_STR:e===Ac.FILE?(null===(n=this._table.options.file)||void 0===n?void 0:n.accept)||Ld.FILE_EXT_STR:void 0}},{key:"modalContainer",get:function(){return this._modalContainer}}],[{key:"renderFileManageComponent",value:function(e){return l.a.createElement(kb,e)}},{key:"renderImageComponent",value:function(e){return l.a.createElement(hb,e)}},{key:"renderFileComponent",value:function(e){return l.a.createElement(pb,e)}},{key:"render",value:function(t,n,r){return l.a.createElement(mb,{controller:new e(t,n,r)})}}]),e}();function Ob(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ob(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ob(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sb=function(e){var t=_b(_b({},e),{},{uploadComponentEmptyHeight:166});return Cb.renderFileComponent(t)};function Rb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rb(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ab=function(e){var t=jb(jb({},e),{},{uploadComponentEmptyHeight:166});return Cb.renderImageComponent(t)};nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-link-editor {\n  color: var(--yq-text-primary);\n  font-size: 14px;\n  background: var(--yq-bg-primary);\n  padding: 20px 20px 1px;\n  width: 290px;\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n}\n.lake-table-link-editor-footer {\n  margin-bottom: 20px;\n  text-align: right;\n}\n.lake-table-link-editor .ant-form-item {\n  margin-bottom: 20px;\n}\n.lake-table-link-editor .ant-btn:first-child {\n  margin-right: 8px;\n}\n.lake-table-link-editor .ant-form-item-label > label.ant-form-item-required:not(.ant-form-item-required-mark-optional)::before {\n  display: none;\n}\n");var Tb=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onSubmit",(function(e){e.src||(e.src=e.name),e.name||(e.name=e.src);var t=ks(e.src);r.props.onChange({name:e.name,src:t||"http://".concat(e.src)},r.props.target),r.props.onBlur()})),r.inputRef=l.a.createRef(),r}return p()(n,[{key:"componentDidMount",value:function(){var e=this;this.inputRef.current&&!window._macaca_uitest&&setTimeout((function(){e.inputRef.current.focus({cursor:"end"})}),300)}},{key:"render",value:function(){var e=this,t=this.props.value,n=void 0===t?{}:t;return l.a.createElement("div",{className:"lake-table-link-editor"},l.a.createElement(pt.a,{initialValues:{name:n.name,src:n.src},onFinish:this.onSubmit},l.a.createElement(pt.a.Item,{name:"name",label:_c("文本"),className:"lake-table-link-editor-title"},l.a.createElement(ht.a,{ref:this.inputRef,placeholder:_c("请输入"),autoComplete:"off"})),l.a.createElement(pt.a.Item,{name:"src",label:_c("链接"),className:"lake-table-link-editor-link"},l.a.createElement(ht.a,{placeholder:_c("请输入"),autoComplete:"off"})),l.a.createElement(pt.a.Item,{className:"lake-table-link-editor-footer"},l.a.createElement(ft.a,{onClick:function(){return e.props.onBlur()}},_c("取消")),l.a.createElement(ft.a,{type:"primary",htmlType:"submit"},_c("确定")))))}}]),n}(l.a.Component);function Lb(e){var t=e.onChange,n=e.id,r=e.defaultValue,o=e.useLinkEditor,a=e.prefix,c=e.readonly,s=e.focus,u=Object(i.useState)(r),d=ie()(u,2),f=d[0],p=d[1],h=Object(i.useState)(!1),m=ie()(h,2),v=m[0],g=m[1];void 0===a&&(a=l.a.createElement("span",{className:"lake-icon lake-icon-col-link"}));var b=function(e){var n,r;if(e.target){if(!e.target.value)return void t(null);r=e.target.value,n=ks(e.target.value)}else n=e.src,r=e.name;var o={name:r,src:n};o.src||(o.src=o.name),o.name||(o.name=o.src),p(o),t(o)};if(Object(i.useEffect)((function(){var e=function(e){e.target.closest(".lake-table-form-link-popover")||g(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),Object(i.useEffect)((function(){p(r)}),[r]),c)return f?l.a.createElement("div",{className:"lake-table-form-link-readonly"},l.a.createElement("a",{href:f.src,target:"_blank",onClick:function(e){return e.stopPropagation()}},f.name)):l.a.createElement(Ag,null);var y=o?"lake-table-form-link-useeditor":"";return l.a.createElement("div",{className:"lake-table-form-link ".concat(y),id:n},!o&&l.a.createElement(ht.a,{allowClear:!0,defaultValue:r,type:"text",placeholder:_c("请输入链接"),prefix:a,onChange:b,autoFocus:s}),o&&l.a.createElement(bt.a,{overlayClassName:"lake-table-form-link-popover",destroyTooltipOnHide:!0,overlay:l.a.createElement(Tb,{value:f,onChange:b,onBlur:function(){return g(!1)}}),visible:v},l.a.createElement(l.a.Fragment,null,f?l.a.createElement("a",{href:f.src,target:"_blank",className:"lake-table-form-link-anchor",onClick:function(e){e.target.closest(".lake-table-form-link-anchor")&&(f||(e.preventDefault(),e.stopPropagation(),g(!0)))}},f.name):l.a.createElement(ht.a,{allowClear:!0,defaultValue:r,type:"text",placeholder:_c("请输入链接"),prefix:a,onBlur:b,onPressEnter:b,autoFocus:s}),l.a.createElement(dt.a,{title:_c("编辑链接")},l.a.createElement("span",{className:"lake-icon lake-icon-col-link",onClick:function(){return g(!0)}})))))}s()(Tb,"propTypes",{table:X.a.object}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-link {\n  position: relative;\n}\n.lake-table-form-link .ant-input-prefix {\n  margin-right: 8px;\n}\n.lake-table-form-link .ant-input-affix-wrapper {\n  border-radius: 6px;\n  padding-right: 25px;\n}\n.lake-table-form-link-popover .ant-popover-inner-content {\n  padding: 0;\n}\n.lake-table-form-link-popover .ant-popover-inner {\n  box-shadow: none;\n}\n.lake-table-form-link-popover .lake-table-link-editor {\n  width: auto;\n}\n.lake-table-form-link-useeditor .lake-icon-col-link {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  color: var(--yq-text-caption);\n  font-size: 14px;\n  cursor: pointer;\n  z-index: 1;\n  border-radius: 6px;\n  padding: 2px;\n}\n.lake-table-form-link-useeditor .lake-icon-col-link:hover {\n  color: var(--yq-text-body);\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-form-link-anchor {\n  display: inline-block;\n  margin-right: 20px;\n  width: 100%;\n  height: 32px;\n  line-height: 32px;\n  position: relative;\n  padding: 0 40px 0 11px;\n  font-size: 14px;\n  border: 1px solid var(--yq-border-light);\n  border-radius: 6px;\n  transition: all 0.3s;\n  overflow: hidden;\n}\n.lake-table-form-link-anchor:hover {\n  border-color: var(--yq-yuque-green-5);\n}\n"),Lb.propTypes={id:X.a.string,prefix:X.a.node,onChange:X.a.func},Lb.rules=[{validator:function(e,t){return""===t||null==t||ks(t.src||t)?Promise.resolve():Promise.reject(new Error(_c("输入格式有误")))}}],nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-mention {\n  min-height: 30px;\n  border: 1px solid var(--yq-border-light);\n  border-radius: 4px;\n  transition: all 0.3s;\n  background-color: var(--yq-bg-primary);\n  overflow: hidden;\n  max-width: 328px;\n}\n.lake-table-form-mention:hover {\n  border-color: var(--yq-border-primary-active);\n}\n.lake-table-form-mention-search {\n  padding: 5px;\n}\n.lake-table-form-mention-readonly {\n  margin-top: -4px;\n}\n.lake-table-form-mention-readonly .lake-table-form-mention-tag {\n  padding-right: 6px;\n}\n.lake-table-form-mention-avatar {\n  display: inline-block;\n  margin-top: 6px;\n  margin-right: 10px;\n  padding-right: 0;\n}\n.lake-table-form-mention-avatar img {\n  width: 24px;\n  min-width: 24px;\n  height: 24px;\n  border-radius: 12px;\n}\n.lake-table-form-mention-content {\n  padding: 0 24px 0 6px;\n  position: relative;\n  cursor: pointer;\n  overflow: hidden;\n}\n.lake-table-form-mention-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  vertical-align: middle;\n  line-height: 20px;\n  max-width: 130px;\n}\n.lake-table-form-mention-login {\n  color: var(--yq-text-caption);\n  line-height: 1;\n}\n.lake-table-form-mention-placeholder {\n  color: rgba(0, 0, 0, 0.25);\n  font-size: 14px;\n  line-height: 32px;\n  margin-bottom: 0;\n}\n.lake-table-form-mention-caret-down {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  right: 10px;\n  color: rgba(0, 0, 0, 0.25);\n  cursor: pointer;\n}\n.lake-table-form-mention-selector-container {\n  background-color: var(--yq-bg-primary);\n  background-clip: padding-box;\n  border-radius: 2px;\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  width: 260px;\n}\n.lake-table-form-mention-selector-nocontainer {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  color: var(--yq-text-primary);\n  font-size: 12px;\n  background: var(--yq-bg-primary);\n  width: 245px;\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 0px;\n}\n.lake-table-form-mention-selector-list {\n  max-height: 216px;\n  overflow: auto;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n.lake-table-form-mention-selector-list .highlight {\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-table-form-mention-selector-list .larkui-icon-check-outlined {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  margin-top: -7px;\n  margin-left: 9px;\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--yq-theme);\n}\n.lake-table-form-mention-selector-item {\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  position: relative;\n  padding: 8px 20px 8px 20px;\n  -webkit-transition: background 0.3s ease;\n  transition: background 0.3s ease;\n  font-size: 14px;\n  color: var(--yq-text-body);\n  cursor: pointer;\n  outline: none;\n  height: 50px;\n  box-sizing: border-box;\n}\n.lake-table-form-mention-selector-search {\n  position: relative;\n  border-bottom: 1px solid var(--yq-border-light);\n  height: 38px;\n  line-height: 38px;\n}\n.lake-table-form-mention-selector-search .anticon,\n.lake-table-form-mention-selector-search .larkui-icon {\n  position: absolute;\n  z-index: 1;\n  top: 8px;\n  left: 14px;\n  color: var(--yq-text-body);\n}\n.lake-table-form-mention-selector-search .larkui-input {\n  height: 38px;\n  line-height: 38px;\n}\n.lake-table-form-mention-selector-body {\n  max-height: 216px;\n  overflow: hidden;\n  overflow-y: auto;\n}\n.lake-table-form-mention-selector-spin,\n.lake-table-form-mention-selector-empty {\n  text-align: center;\n  padding: 10px;\n}\n.lake-table-form-mention-selector-avatar {\n  display: inline-block;\n  margin-top: 6px;\n  margin-right: 10px;\n  padding-right: 0;\n}\n.lake-table-form-mention-selector-avatar img {\n  width: 24px;\n  min-width: 24px;\n  height: 24px;\n  border-radius: 12px;\n}\n.lake-table-form-mention-selector-content {\n  display: flex;\n}\n.lake-table-form-mention-selector-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  vertical-align: middle;\n  line-height: 20px;\n  max-width: 130px;\n  color: var(--yq-text-primary);\n}\n.lake-table-form-mention-selector-login {\n  color: var(--yq-text-caption);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  vertical-align: middle;\n  line-height: 20px;\n  max-width: 150px;\n}\n.lake-table-form-mention-tag-wrap {\n  overflow: hidden;\n}\n.lake-table-form-mention-tag {\n  float: left;\n  height: 24px;\n  line-height: 24px;\n  border-radius: 12px;\n  margin: 3px;\n  background: var(--yq-bg-primary-hover);\n  cursor: pointer;\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  word-break: keep-all;\n  white-space: nowrap;\n  position: relative;\n  padding: 0 20px 0 25px;\n  min-width: 20px;\n  max-width: 100%;\n}\n.lake-table-form-mention-tag:hover {\n  background: var(--yq-bg-primary-hover);\n}\n.lake-table-form-mention-tag-avatar {\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  position: absolute;\n  top: 3px;\n  left: 2px;\n}\n.lake-table-form-mention-tag-close {\n  color: var(--yq-text-caption);\n  font-size: 12px;\n  margin-right: 4px;\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  right: 1px;\n}\n.lake-table-form-mention-tag-close:hover {\n  color: var(--yq-text-body);\n}\n.lake-table-form-mention-shadow-input {\n  display: none;\n}\n.ant-form-item-has-error .lake-table-form-mention {\n  border-color: var(--yq-red-4);\n}\n");var Db=function(e,t){if("string"!=typeof e)return"";var n=mm.sanitizeUrl(e);return mm.isFullHttpURL(n)||!t?n:t+n};function Pb(e,t){var n=e.map((function(e){var n={id:e.user?e.user.id:e.id,name:e.name,avatar_url:Db(e.avatar_url,t),login:e.login};return e.work_id&&(n.work_id=e.work_id,n.id||(n.id=n.work_id)),n}));return De()(n,"id")}function Mb(e){var t,n=e.onChange,r=e.id,o=e.webProxy,c=e.defaultList,s=void 0===c?[]:c,u=e.defaultValue,d=void 0===u?[]:u,f=e.docId,p=e.docType,h=e.disableContainer,m=void 0!==h&&h,v=e.readonly,g=e.focus,b=e.defaultOpen,y=e.onBlur,w=e.onClickItem,k=e.isHiddenByKeyboardInput,x=e.inputRefProp,C=e.togglePanelHidden,_=e.canKeyboardInput,R=void 0!==_&&_,j=e.avatarOrigin,A=function(){return Array.isArray(s)?Pb(me()(s),j):[]},T=Object(i.useState)(A()),L=ie()(T,2),D=L[0],P=L[1],M=Object(i.useState)(null===(t=D[0])||void 0===t?void 0:t.id),N=ie()(M,2),I=N[0],F=N[1],B=Object(i.useState)(d||[]),V=ie()(B,2),H=V[0],z=V[1],q=Object(i.useState)(!1),U=ie()(q,2),G=U[0],W=U[1],Y=Object(i.useState)(!1),K=ie()(Y,2),X=K[0],Z=K[1],Q=Object(i.useState)(m||b),J=ie()(Q,2),ee=J[0],te=J[1],ne=Object(i.useRef)(null),re=Object(i.useRef)(null),oe=Object(i.useState)(""),ae=ie()(oe,2),le=ae[0],ce=ae[1],se=$()(function(){var e=E()(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return P(A()),W(!1),e.abrupt("return");case 4:return Z(!0),n={optional_properties:"profile",q:t},f&&p&&!ss.isOfficialTemplate&&(n.target_id=f,n.target_type=p),e.next=9,o.users.complete(n);case 9:r=e.sent,Z(!1),W(!0),P(Pb(r,j));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),400),ue=function(e){k&&R&&C(!1),ce(e.target.value),!ne.current&&e.target&&se(e.target.value)};Object(i.useEffect)((function(){z(d)}),[d.map((function(e){return e.id})).join(",")]),Object(i.useEffect)((function(){"function"==typeof s&&s().then((function(e){var t=Pb(me()(e),j);P(t),z(d||[])}))}),[]),Object(i.useEffect)((function(){var e=function(e){if(!m){for(var t=e.target;t&&t!==document.body;){if(t.classList.contains("lake-table-mention-wrapper"))return;t=t.parentNode}te(!1),y&&y(H)}};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[m,y,H]),Object(i.useEffect)((function(){var e,t;!g&&!ee||window._macaca_uitest||(R?setTimeout(null==x||null===(e=x.current)||void 0===e?void 0:e.focus,300):setTimeout(null==re||null===(t=re.current)||void 0===t?void 0:t.focus,300))}),[g,ee,k,r]),Object(i.useEffect)((function(){ee&&!k||ce("")}),[ee,k]),Object(i.useEffect)((function(){var e=document.querySelector(".lake-table-form-mention-selector-list"),t=document.querySelector(".highlight");if(t){var n=t.offsetTop-38,r=n+t.getBoundingClientRect().height;n<e.scrollTop?e.scrollTop-=e.scrollTop-n:r-e.scrollTop>e.getBoundingClientRect().height&&(e.scrollTop=r-e.getBoundingClientRect().height)}}),[I]);var de=Object(i.useCallback)((function(e,t){t&&(t.preventDefault(),t.stopPropagation());var r=me()(H),o=r.findIndex((function(t){return t.id===e.id}));r.splice(o,1),z(r||[]),n&&n(r)}),[n,H]),fe=Object(i.useCallback)((function(e){var t=(Array.isArray(H)&&(null==H?void 0:H.findIndex((function(t){return!(!t||!t.id)&&t.id===e.id}))))>=0,r=S()("lake-table-form-mention-selector-item",{selected:t});return l.a.createElement("div",{onClick:function(r){t?de(e,r):function(e,t){t&&(t.preventDefault(),t.stopPropagation());var r=[].concat(me()(H),[e]);r.sort((function(e,t){return e.name.localeCompare(t.name)})),z(r||[]),n&&n(r),ce("")}(e,r)},className:r},l.a.createElement("div",{className:"lake-table-form-mention-selector-content"},l.a.createElement("span",{className:"lake-table-form-mention-selector-avatar"},l.a.createElement("img",{src:e.avatar_url})),l.a.createElement("div",null,l.a.createElement("div",{className:"lake-table-form-mention-selector-name"},e.name),l.a.createElement("div",{className:"lake-table-form-mention-selector-login"},e.login))),t&&l.a.createElement(sg,null))}),[n,H,de]),pe=Object(i.useMemo)((function(){return D&&D.length>0?l.a.createElement("ul",{className:"lake-table-form-mention-selector-list"},D.map((function(e){if(!e)return null;var t=S()({highlight:I===e.id});return l.a.createElement("li",{key:e.id,onMouseEnter:function(){!function(e){F(e)}(e.id)},className:t},fe(e))}))):G?l.a.createElement("div",{className:"lake-table-form-mention-selector-empty"},l.a.createElement("span",null,_c("未搜索到结果"))):null}),[G,I,D,fe]);Object(i.useEffect)((function(){z(d||[])}),[r]),Object(i.useEffect)((function(){var e;R&&Array.isArray(d)&&0===d.length&&(z([]),F(null===(e=D[0])||void 0===e?void 0:e.id))}),[d]);var he=Object(i.useMemo)((function(){var e,t=H;return e=v||t&&0!==t.length?l.a.createElement("div",{className:"lake-table-form-mention-tag-wrap"},null==t?void 0:t.map((function(e){return l.a.createElement("span",{className:"lake-table-form-mention-tag",key:e.id,onClick:function(t){return function(e,t){e.stopPropagation(),w?w():window.open("/"+t.login)}(t,e)}},l.a.createElement("img",{className:"lake-table-form-mention-tag-avatar",src:e.avatar_url}),l.a.createElement("span",{className:"lake-table-form-mention-tag-name"},e.name),!v&&l.a.createElement("span",{className:"lake-table-form-mention-tag-close",onClick:function(t){return de(e,t)}},l.a.createElement(gg,null)))}))):l.a.createElement("p",{className:"lake-table-form-mention-placeholder"},_c("请输入")),v?e:l.a.createElement("div",{className:"lake-table-form-mention-content",onClick:function(){return te(!0)}},e,l.a.createElement("span",{className:"lake-table-form-mention-caret-down"},l.a.createElement(fg,null)))}),[w,v,H,de]);if(v)return d&&0!==d.length?l.a.createElement("div",{className:"lake-table-form-mention-readonly"},he):l.a.createElement("div",{className:"lake-table-form-mention-readonly"},l.a.createElement(Ag,null));var ve={ref:R?x:re,type:"text",placeholder:_c("搜索人员"),onChange:ue,onCompositionStart:function(){ne.current=!0},onCompositionEnd:function(e){ne.current=!1,ue(e)},autoFocus:g,bordered:!1,value:le},ge=R?l.a.createElement(Ng,a()({},ve,{onSave:function(){k||(C(!0),Xe.a.success(_c("文档已保存")))}})):l.a.createElement(ht.a,ve),be=l.a.createElement("div",{className:"".concat(m?"lake-table-form-mention-selector-nocontainer":"lake-table-form-mention-selector-container lake-table-mention-wrapper"),onKeyDown:function(e){if(!k){var t=e.keyCode||e.which;if([Qv.UP,Qv.DOWN].includes(t))e.preventDefault(),function(e){var t,n=Array.isArray(D)&&D.findIndex((function(e){return e.id===I}));e===Qv.UP?(n-=1)<0&&(n=0):e===Qv.DOWN&&(n+=1)>=D.length&&(n=D.length-1),F(null===(t=D[n])||void 0===t?void 0:t.id)}(t);else if(t===Qv.ENTER){e.preventDefault();var n=document.querySelector(".highlight .lake-table-form-mention-selector-item");n&&n.click()}}}},l.a.createElement("div",{className:"lake-table-form-mention-selector-search"},ge),X?l.a.createElement("div",{className:"lake-table-form-mention-selector-spin"},l.a.createElement(jt.a,null)):l.a.createElement("div",{className:"lake-table-form-mention-selector-body"},pe));return l.a.createElement(l.a.Fragment,null,m?be:l.a.createElement(bt.a,{overlay:be,placement:"bottomLeft",visible:ee,dropdownClassName:"lake-table-mention-wrapper"},l.a.createElement("div",{className:"lake-table-form-mention lake-table-mention-wrapper",id:r},he)))}function Nb(e){var t=e.onChange,n=e.onBlur,r=e.id,o=e.defaultValue,a=e.prefix,c=e.readonly,s=e.focus;if(c)return o||0===o?l.a.createElement("div",{className:"lake-table-form-number-readonly"},o):l.a.createElement(Ag,null);void 0===a&&(a=l.a.createElement("span",{className:"lake-icon lake-icon-col-number"}));var u=Object(i.useRef)(null);return Object(i.useEffect)((function(){s&&u.current&&u.current.focus({cursor:"end"})}),[s]),l.a.createElement("div",{className:"lake-table-form-number",id:r},l.a.createElement(ht.a,{allowClear:!0,type:"text",defaultValue:o,placeholder:_c("请输入"),prefix:a,onChange:t,onBlur:n,autoFocus:s,ref:u}))}function Ib(e){var t=e.onChange,n=e.onBlur,r=e.id,o=e.defaultValue,a=e.prefix,c=e.readonly,s=e.focus,u=Object(i.useState)(o),d=ie()(u,2),f=d[0],p=d[1],h=function(e){e.stopPropagation(),location.href="tel:"+f};if(c)return o?l.a.createElement("div",{className:"lake-table-form-phone-readonly"},l.a.createElement("span",{className:"lake-table-form-phone-text"},o),l.a.createElement("span",{onClick:h,className:"lake-icon lake-icon-col-phone lake-table-form-phone-action"})):l.a.createElement(Ag,null);void 0===a&&(a=l.a.createElement("span",{className:"lake-icon lake-icon-col-phone"}));var m=Object(i.useRef)(null);return Object(i.useEffect)((function(){s&&m.current&&m.current.focus({cursor:"end"})}),[s]),l.a.createElement("div",{className:"lake-table-form-phone",id:r},l.a.createElement(ht.a,{allowClear:!0,defaultValue:o,autoFocus:s,type:"text",placeholder:_c("请输入"),prefix:a,onChange:function(e){p(e.target.value),t(e)},onBlur:n,suffix:f&&l.a.createElement("span",{onClick:h,className:"lake-icon lake-icon-col-phone lake-table-form-phone-action"}),ref:m}))}function Fb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fb(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Mb.propTypes={id:X.a.string,onChange:X.a.func,webProxy:X.a.object,defaultList:X.a.array,defaultValue:X.a.array,docId:X.a.number,docType:X.a.string,disableContainer:X.a.bool,readonly:X.a.bool,focus:X.a.bool,defaultOpen:X.a.bool,onBlur:X.a.func,onClickItem:X.a.func,canKeyboardInput:X.a.bool,isHiddenByKeyboardInput:X.a.bool,inputRefProp:X.a.shape({current:X.a.instanceOf(Object)}),togglePanelHidden:X.a.func},nc(".lake-table-form-number .ant-input-prefix {\n  margin-right: 8px;\n}\n.lake-table-form-number .ant-input-clear-icon svg {\n  width: 14px;\n  height: 14px;\n}\n.lake-table-form-number-readonly {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n"),Nb.rules=[{validator:function(e,t){return""===t||null==t||function(e){if("number"==typeof e)return e-e==0;if("string"==typeof e){if(/\s/gi.test(e))return!1;if(""!==e.trim())return Number.isFinite(+e)}return!1}(t)?Promise.resolve():Promise.reject(new Error(_c("请输入数字")))}}],Nb.propTypes={id:X.a.string,prefix:X.a.node,onChange:X.a.func},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-phone {\n  max-width: 328px;\n}\n.lake-table-form-phone .ant-input-clear-icon svg {\n  width: 14px;\n  height: 14px;\n}\n.lake-table-form-phone .ant-input-prefix {\n  margin-right: 8px;\n}\n.lake-table-form-phone .ant-input-affix-wrapper {\n  border-radius: 6px;\n}\n.lake-table-form-phone-action {\n  display: inline-block;\n  color: var(--yq-text-caption);\n  font-size: 14px;\n  cursor: pointer;\n  z-index: 1;\n  border-radius: 6px;\n  padding: 2px;\n  vertical-align: middle;\n}\n.lake-table-form-phone-action:hover {\n  color: var(--yq-text-body);\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-form-phone-readonly {\n  display: flex;\n  align-items: center;\n}\n.lake-table-form-phone-readonly .lake-table-form-phone-text {\n  max-width: calc(100% - 26px);\n  display: inline-block;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n.lake-table-form-phone-readonly .lake-table-form-phone-action {\n  margin-left: 8px;\n  vertical-align: -1px;\n}\n"),Ib.propTypes={id:X.a.string,prefix:X.a.node,onChange:X.a.func},Ib.rules=[{validator:function(e,t){return""===t||null==t||xs(t)?Promise.resolve():Promise.reject(new Error(_c("输入格式有误")))}}];var Vb=function(){function e(t){d()(this,e),s()(this,"controller",null),this.controller=t}return p()(e,[{key:"getFormItemArgs",value:function(e,t,n){switch(e){case Ac.INPUT:case Ac.TEXTAREA:case Ac.CHECKBOX:case Ac.EMAIL:case Ac.FILE:case Ac.IMAGE:case Ac.LINK:case Ac.MENTION:case Ac.USER_ID:case Ac.MODIFIER_ID:case Ac.NUMBER:case Ac.PHONE:return{value:this.getCellValue(n,t)};case Ac.DATE:case Ac.CREATED_AT:case Ac.UPDATED_AT:return{value:this.getCellFormattedValue(n,t)};case Ac.SELECT:case Ac.MULTI_SELECT:return{value:this.getCellValue(n,t),field:Bb(Bb({},t),{},{display:"dropdown"})};default:ed(!1)}}},{key:"getCellValue",value:function(e,t){return this.controller.ViewHelper.getCellValue(e,t)}},{key:"getCellFormattedValue",value:function(e,t){return this.controller.ViewHelper.getCellFormattedValue(e,t)}},{key:"getFormItemConfig",value:function(e,t,n,r,o){var a=this,i=Bb(Bb({},this.getFormItemArgs(e,t,n)),o);switch(e){case Ac.INPUT:return{formItemConfig:{label:l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-input"}),i.name)},componentConfig:{FormItemComponent:Tg,componentProperties:{defaultValue:i.value,readonly:this.controller.isReadonly,focus:i.focus}}};case Ac.TEXTAREA:return{formItemConfig:{label:l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-textarea"}),i.name)},componentConfig:{FormItemComponent:Lg,componentProperties:{defaultValue:i.value,readonly:this.controller.isReadonly,focus:i.focus}}};case Ac.SELECT:return{formItemConfig:{label:l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-select"}),i.name)},componentConfig:{FormItemComponent:Vg,componentProperties:{defaultValue:i.value,readonly:this.controller.isReadonly,focus:i.focus,field:i.field,onColChange:function(e,t){a.controller.updateColOptions(e,t)},themeManager:this.controller._table.themeManager}}};case Ac.MULTI_SELECT:return{formItemConfig:{label:l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-multiselect"}),i.name)},componentConfig:{FormItemComponent:Vg,componentProperties:{defaultValue:i.value,readonly:this.controller.isReadonly,focus:i.focus,field:i.field,onColChange:function(e,t){a.controller.updateColOptions(e,t)}}}};case Ac.CHECKBOX:return{formItemConfig:{label:l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-checkbox"}),i.name)},componentConfig:{FormItemComponent:zg,componentProperties:{defaultValue:i.value,readonly:this.controller.isReadonly,focus:i.focus}}};case Ac.DATE:return{formItemConfig:{label:l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-date"}),i.name)},componentConfig:{FormItemComponent:ab,componentProperties:{defaultValue:i.value,readonly:this.controller.isReadonly,focus:i.focus}}};case Ac.EMAIL:return{formItemConfig:{rules:ib.rules,validateTrigger:["onBlur"],label:l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-email"}),i.name)},componentConfig:{FormItemComponent:ib,componentProperties:{defaultValue:i.value,prefix:!1,readonly:this.controller.isReadonly,focus:i.focus}}};case Ac.FILE:return{formItemConfig:{label:l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-file"}),i.name)},componentConfig:{FormItemComponent:Sb,componentProperties:{defaultValue:i.value,readonly:this.controller.isReadonly,uploadAction:Qe()(this.controller._table.options,["file","uploadAction"]),quickUploadAction:Qe()(this.controller._table.options,["file","quickUploadAction"]),focus:i.focus,accept:this.controller.getAcceptType(Ac.FILE),sessionStoreKey:"lark-table-session-store-key"+r+t.id}}};case Ac.IMAGE:return{formItemConfig:{label:l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-image"}),i.name)},componentConfig:{FormItemComponent:Ab,componentProperties:{defaultValue:i.value,readonly:this.controller.isReadonly,uploadAction:Qe()(this.controller._table.options,["image","uploadAction"]),quickUploadAction:Qe()(this.controller._table.options,["image","quickUploadAction"]),focus:i.focus,accept:this.controller.getAcceptType(Ac.IMAGE),sessionStoreKey:"lark-table-session-store-key"+r+t.id}}};case Ac.LINK:return{formItemConfig:{label:l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-link"}),i.name)},componentConfig:{FormItemComponent:Lb,componentProperties:{defaultValue:i.value,prefix:!1,readonly:this.controller.isReadonly,focus:i.focus,useLinkEditor:!0}}};case Ac.MENTION:case Ac.USER_ID:case Ac.MODIFIER_ID:var c=Gc.includes(e);return{formItemConfig:{label:l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(e.toLowerCase())}),i.name)},componentConfig:{FormItemComponent:Mb,componentProperties:Bb({id:i.value,defaultValue:i.value||[],readonly:c||this.controller.isReadonly,focus:i.focus},this.getMentionProperties())}};case Ac.NUMBER:return{formItemConfig:{rules:Nb.rules,validateTrigger:["onBlur"],label:l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-number"}),i.name)},componentConfig:{FormItemComponent:Nb,componentProperties:{defaultValue:i.value,prefix:!1,readonly:this.controller.isReadonly,focus:i.focus}}};case Ac.PHONE:return{formItemConfig:{rules:Ib.rules,validateTrigger:["onBlur"],label:l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-phone"}),i.name)},componentConfig:{FormItemComponent:Ib,componentProperties:{defaultValue:i.value,prefix:!1,readonly:this.controller.isReadonly,focus:i.focus}}};case Ac.CREATED_AT:case Ac.UPDATED_AT:return{formItemConfig:{label:l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(e.toLowerCase())}),i.name)},componentConfig:{FormItemComponent:function(){return l.a.createElement("div",{className:"lake-table-form-".concat(e)},a.controller.isReadonly?i.value:l.a.createElement(ht.a,{defaultValue:i.value,disabled:!0}))}}};default:ed(!1)}}},{key:"getMentionProperties",value:function(){var e=(this.controller._table.options&&this.controller._table.options.mention||{defaultList:[]}).defaultList;"function"==typeof e&&(e=e());var t=this.controller.Kernel.options;return{defaultList:e,webProxy:t.webProxy,docId:t.docId,docType:t.docType,avatarOrigin:t.avatarOrigin}}}]),e}();function Hb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zb(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ub=function(){function e(t,n,r){d()(this,e),this._table=t,this._mode=n||"edit",this._kernel=t.kernel,this.rowFormItemManage=new Vb(this),this.modalContainer=r||document.body}return p()(e,[{key:"onTableEvent",value:function(e,t){this._table.on(e,t)}},{key:"emitTableEvent",value:function(e,t){this._table.emit(e,t)}},{key:"offTableEvent",value:function(e,t){this._table.off(e,t)}},{key:"onKernelEvent",value:function(e,t){this._kernel.on(e,t)}},{key:"offKernelEvent",value:function(e,t){this._kernel.off(e,t)}},{key:"executeKernelCommand",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this._kernel).execute.apply(t,[e].concat(r))}},{key:"getContainerRect",value:function(){return this._table.container.getBoundingClientRect()}},{key:"addKanbanRecord",value:function(e){var t,n=this.View.data.rows,r=this.ViewHelper.getGroupColConfig(),o={},a=0;if(void 0!==e){var i=n[e].id,l=wc((t=this.View.getGroupByRow(i)).titleValue);o[r.id]={value:l},a=this.View.get("rows").findIndex((function(e){return e.id===i}))+1}else t=this.View.getUngrouped();var c=this.executeKernelCommand("insertRow",a,o,t.value);return(n=this.ViewHelper.getViewData("rows")).findIndex((function(e){return e.id===c[1]}))}},{key:"updateColOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.executeKernelCommand("updateCol",qb(qb({},t),{},{options:e}))}},{key:"getRowIndexById",value:function(e){return this.View.rowMap?this.View.rowMap[e]:this.View.get("rows").findIndex((function(t){return t.id===e}))}},{key:"getRowExpandRows",value:function(e){var t=this.ViewHelper.getViewData("rows"),n=this.View;if(n.type===Gs.KANBAN){var r=t[e].id;return n.getGroupByRow(r).rows.map((function(e){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Hb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hb(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.id===e)return o}}catch(e){r.e(e)}finally{r.f()}return null})).filter((function(e){return!!e}))}return t}},{key:"getFromItemRenderConfig",value:function(e,t,n,r,o){return this.rowFormItemManage.getFormItemConfig(e,t,n,r,o)}},{key:"showConfigRowModal",value:function(e,t){this._table.emit(qs.COL_CONFIGS,{col:e,options:t})}},{key:"showAddColumnModal",value:function(e){var t=this.TableModel.getTableFields().length;this._table.emit(qs.COL_CONFIGS,{col:t,options:qb({create:!0},e)})}},{key:"getCellFormattedValue",value:function(e,t){return this.ViewHelper.getCellFormattedValue(e,t)}},{key:"Kernel",get:function(){return this._kernel}},{key:"ViewHelper",get:function(){return this._table.viewManager.getViewRenderer().viewportHelper}},{key:"TableModel",get:function(){return this._table.kernel.tableModel}},{key:"View",get:function(){return this.TableModel.getActiveView()}},{key:"Mode",get:function(){return this._mode}},{key:"activeView",get:function(){var e,t;return null===(e=this.Kernel)||void 0===e||null===(t=e.tableModel)||void 0===t?void 0:t.getActiveView()}},{key:"rowCount",get:function(){var e;return null===(e=this.activeView)||void 0===e?void 0:e.get("rowCount")}},{key:"isReadonly",get:function(){return"read"===this._mode||this._table.readOnly}},{key:"isEditMode",get:function(){return"edit"===this.Mode&&!this._table.readOnly}},{key:"getAcceptType",value:function(e){var t,n;return e===Ac.IMAGE?(null===(t=this._table.options.image)||void 0===t?void 0:t.accept)||Ld.IMAGE_EXT_STR:e===Ac.FILE?(null===(n=this._table.options.file)||void 0===n?void 0:n.accept)||Ld.FILE_EXT_STR:void 0}}],[{key:"render",value:function(t,n,r){return l.a.createElement(jg,{controller:new e(t,n,r)})}}]),e}(),Gb="resizeEnd",Wb=function(e,t){return(Wb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Yb(e,t){function n(){this.constructor=e}Wb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function $b(e){return"function"==typeof e}var Kb=!1,Xb={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,Kb=e},get useDeprecatedSynchronousErrorHandling(){return Kb}};function Zb(e){setTimeout((function(){throw e}),0)}var Qb={closed:!0,next:function(e){},error:function(e){if(Xb.useDeprecatedSynchronousErrorHandling)throw e;Zb(e)},complete:function(){}},Jb=Array.isArray||function(e){return e&&"number"==typeof e.length};function ey(e){return null!==e&&"object"===z()(e)}var ty=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),ny=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,o=this._unsubscribe,a=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var i=0;i<n.length;++i)n[i].remove(this);if($b(o)){r&&(this._unsubscribe=void 0);try{o.call(this)}catch(e){t=e instanceof ty?ry(e.errors):[e]}}if(Jb(a)){i=-1;for(var l=a.length;++i<l;){var c=a[i];if(ey(c))try{c.unsubscribe()}catch(e){t=t||[],e instanceof ty?t=t.concat(ry(e.errors)):t.push(e)}}}if(t)throw new ty(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(z()(t)){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=n._parentOrParents;if(null===o)n._parentOrParents=this;else if(o instanceof e){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function ry(e){return e.reduce((function(e,t){return e.concat(t instanceof ty?t.errors:t)}),[])}var oy="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),ay=function(e){function t(n,r,o){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=Qb;break;case 1:if(!n){a.destination=Qb;break}if("object"===z()(n)){n instanceof t?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new iy(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new iy(a,n,r,o)}return a}return Yb(t,e),t.prototype[oy]=function(){return this},t.create=function(e,n,r){var o=new t(e,n,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(ny),iy=function(e){function t(t,n,r,o){var a,i=e.call(this)||this;i._parentSubscriber=t;var l=i;return $b(n)?a=n:n&&(a=n.next,r=n.error,o=n.complete,n!==Qb&&($b((l=Object.create(n)).unsubscribe)&&i.add(l.unsubscribe.bind(l)),l.unsubscribe=i.unsubscribe.bind(i))),i._context=l,i._next=a,i._error=r,i._complete=o,i}return Yb(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;Xb.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=Xb.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Zb(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Zb(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};Xb.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),Xb.useDeprecatedSynchronousErrorHandling)throw e;Zb(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!Xb.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return Xb.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(Zb(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(ay),ly="function"==typeof Symbol&&Symbol.observable||"@@observable";function cy(e){return e}function sy(e){return 0===e.length?cy:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var uy=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=function(e,t,n){if(e){if(e instanceof ay)return e;if(e[oy])return e[oy]()}return e||t||n?new ay(e,t,n):new ay(Qb)}(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||Xb.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),Xb.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Xb.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,o=t.isStopped;if(n||o)return!1;e=r&&r instanceof ay?r:null}return!0}(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=dy(t))((function(t,r){var o;o=n.subscribe((function(t){try{e(t)}catch(e){r(e),o&&o.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[ly]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:sy(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=dy(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function dy(e){if(e||(e=Xb.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var fy=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),py=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return Yb(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(ny),hy=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return Yb(t,e),t}(ay),my=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return Yb(t,e),t.prototype[oy]=function(){return new hy(this)},t.prototype.lift=function(e){var t=new vy(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new fy;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].next(e)},t.prototype.error=function(e){if(this.closed)throw new fy;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new fy;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new fy;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new fy;return this.hasError?(e.error(this.thrownError),ny.EMPTY):this.isStopped?(e.complete(),ny.EMPTY):(this.observers.push(e),new py(this,e))},t.prototype.asObservable=function(){var e=new uy;return e.source=this,e},t.create=function(e,t){return new vy(e,t)},t}(uy),vy=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return Yb(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):ny.EMPTY},t}(my),gy=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return Yb(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new fy;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(my);function by(e,t){var n=e instanceof gy&&void 0===t?e.getValue():t,r=Object(i.useState)(n),o=ie()(r,2),a=o[0],l=o[1];return Object(i.useEffect)((function(){var t=e.subscribe((function(e){return l(e)}));return function(){return t.unsubscribe()}}),[e]),a}function yy(e){var t=Object(i.useState)(0),n=ie()(t,2)[1];Object(i.useEffect)((function(){var t=e.subscribe((function(){return n((function(e){return e+1}))}));return function(){return t.unsubscribe()}}),[])}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-textarea-cell-wrap {\n  position: relative;\n  font-family: 'Helvetica Neue', 'Chinese Quote', BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', Helvetica, Arial, sans-serif;\n  box-sizing: border-box;\n  box-shadow: 0 0 0px 2px var(--yq-blue-5);\n  border: 1px;\n}\n.lake-table-textarea-cell-wrap .textarea-cell {\n  box-sizing: border-box;\n  resize: none;\n  padding: 6px 10px;\n  border: none;\n  outline: none;\n  font-size: 14px;\n  line-height: 24px;\n  text-decoration: none;\n  background-color: var(--yq-bg-primary);\n  color: var(--yq-text-primary);\n  word-break: break-word;\n}\n.lake-table-textarea-cell-wrap .textarea-cell:focus {\n  box-shadow: none;\n}\n");var wy=function(e){var t,n,r,o,a=e.boxId,c=e.rect,s=e.containerH,u=e.colType,d=e.value,f=e.isHiddenByKeyboardInput,p=e.togglePanelHidden,h=e.onCellValueChange,m=e.inputRefProp,v=e.eventManager,g=Object(i.useState)(""),b=ie()(g,2),y=b[0],w=b[1],k=Object(i.useState)({}),x=ie()(k,2),E=x[0],C=x[1],O=Object(i.useMemo)((function(){return u===Ac.TEXTAREA}),[u]),_=(t=e,n=Object(i.useRef)(),Object(i.useEffect)((function(){n.current=t}),[t]),n.current);(o=Object(i.useRef)(r=function(){!f&&S(e)})).current=r,Object(i.useEffect)((function(){return function(){return o.current()}}),[]),Object(i.useLayoutEffect)((function(){_&&!_.isHiddenByKeyboardInput&&af(_.row)&&af(_.col)&&S(_),w(d)}),[a]),Object(i.useLayoutEffect)((function(){w(d)}),[d]),Object(i.useEffect)((function(){var e;null===(e=m.current)||void 0===e||e.focus(),f||requestAnimationFrame((function(){var e=document.getElementById("lake-table-cell-editor");e&&(e.scrollTop=e.scrollHeight,e.selectionStart=e.selectionEnd=e.value.length)}))}),[a]),Object(i.useLayoutEffect)((function(){if(lf(y))if(O){var e=y.split("\n"),t=c.width-20,n=c.height,r=s-c.top-10,o=24*(e.reduce((function(e,n){var r=Eh(n);return e+Math.floor(r/t)}),0)+e.length)+12;C({minHeight:n,maxHeight:r,height:o,overflowY:o<=r?"hidden":"auto"})}else C({height:c.height})}),[y]);var S=function(e){p(!0),h(y,e)},R=function(e){var t=e.isOverride;w(void 0===t||t?"":d),p(!1)};return l.a.createElement("div",{className:"lake-table-textarea-cell-wrap",onKeyDown:function(t){if(f){if(function(e){if(function(e){var t=e.shiftKey,n=e.altKey,r=e.ctrlKey,o=e.metaKey;return t||n||r||o}(e))return!1;var t=eg(e);if("enter"===t.eventName)return!0;if(t.eventName)return!1;var n=e.key;return!!(/^[a-zA-Z]{1}$/.test(n)||/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘'，。、]/im.test(n)||/^[0-9]{1}$/.test(n))}(t)){if("Enter"===t.key){if(u===Ac.LINK)return;return void requestAnimationFrame((function(){R({isOverride:!1})}))}return void R({isOverride:!0})}}else{var n=t.keyCode;if(n===Qv.ENTER){if(t.preventDefault(),O&&(t.shiftKey||t.altKey))return void function(e){var t=e.target;t.setRangeText("\n",t.selectionStart,t.selectionEnd,"end"),w(t.value),requestAnimationFrame((function(){t.scrollTop=t.scrollHeight}))}(t);S(e)}else if(n===Qv.ESC)S(e);else if(n===Qv.TAB){var r=eg(t).eventName;v.emit(r,t),S(e)}}}},l.a.createElement(Ng,{id:"lake-table-cell-editor",className:"textarea-cell",allowEnter:O,ref:m,type:"text",onChange:function(e){var t=e.target.value||"";w(t)},onSave:function(){S(e),f||Xe.a.success(_c("文档已保存"))},value:y,style:E}))};nc('/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-cell-overlook {\n  color: var(--yq-text-primary);\n  background: var(--yq-bg-primary);\n  font-family: "Helvetica Neue", "Chinese Quote", BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", Helvetica, Arial, sans-serif;\n  box-sizing: border-box;\n  box-shadow: 0 0 0px 2px var(--yq-blue-5);\n  cursor: default;\n  font-size: 14px;\n  line-height: 24px;\n  word-break: break-word;\n  outline: none;\n  padding: 6px 10px;\n  white-space: pre-line;\n  user-select: none;\n  overflow-y: auto;\n}\n');var ky=function(e){var t=e.textVal,n=e.enable,r=e.minHeight,o=e.maxHeight,a=e.onDoubleClick,i=e.onContextMenu;return n?l.a.createElement("div",{className:"lake-table-cell-overlook",onDoubleClick:a,onContextMenu:i,style:{minHeight:r,maxHeight:o}},t):null};function xy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ey(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xy(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-cell-preview-container {\n  position: absolute;\n  box-sizing: border-box;\n  z-index: 400;\n}\n.lake-table-cell-preview-container .lake-table-cell-preview-inner {\n  position: absolute;\n  left: 0;\n  font-size: 0;\n  background: var(--yq-bg-primary);\n}\n.lake-table-cell-preview-container .lake-table-cell-preview-inner .lake-table-cell-preview-inner-content {\n  position: relative;\n  height: 100%;\n  font-size: 12px;\n}\n");var Cy=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"_scrollStrategy",null),s()(m()(r),"inputObserverRef",void 0),s()(m()(r),"handleFocus",(function(){var e;r.state.showRowEditor||null===(e=r.inputObserverRef.current)||void 0===e||e.focus()})),s()(m()(r),"init",(function(){var e;if(r.props.table.kernel.tableModel.getActiveView().type===Gs.GRID&&r.containerIsVisible){var t=r.ViewHelper.getSelections();if(qe()(t))r.destroy();else{var n=t.row,o=t.col,a=t.colCount,i=t.rowCount,l=r.getColConfigs(o),c=null==l?void 0:l.type;if(r.isTargetColType(c)&&!r.ViewHelper.isCellInSearch(n,l)){var s=r.getCellInfo(n,o),u=Mc.includes(c)?"top":"bottom",d=r.getComputedInnerBoxH(c,o),f=r.ViewHelper.getCellPreviewerRect(n,o,c),p=1===i&&1===a;if(r.isHiddenByFrozen(f,o,c))r.setState({rect:f,col:o,colType:c,isHiddenByKeyboardInput:!0});else{var h,v=!r.state.showRowEditor&&[Ac.INPUT,Ac.TEXTAREA].includes(c)&&p;v&&(null===(h=r._scrollStrategy)||void 0===h||h.attach(m()(r))),null===(e=r.inputObserverRef.current)||void 0===e||e.focus(),r.setState({readOnly:r.props.table.readOnly,rect:f,colConfigs:l,visible:!0,cell:t,cellInfo:s,row:n,col:o,colType:c,isHiddenByKeyboardInput:!0,editorPositionType:u,computedInnerBoxH:d,shouldCellOverLook:v})}}else r.destroy()}}else r.destroy()})),s()(m()(r),"refresh",$()((function(){if(r.state.visible){var e=r.ViewHelper.getSelections();if(qe()(e))r.setState(r.defaultState);else{var t=r.state,n=t.row,o=t.col,a=t.colType,i=r.ViewHelper.getCellPreviewerRect(n,o,a);if(r.isHiddenByFrozen(i,o,a))return r.autoSaveWhenScroll(),void r.setState({rect:i,col:o,colType:a,isHiddenByKeyboardInput:!0,shouldCellOverLook:!1});r.setState({rect:i,shouldCellOverLook:!1})}}}))),s()(m()(r),"isInSameSelections",(function(e){var t=r.state.cell,n=void 0===t?{}:t;return e&&e.activeRow===n.row&&e.activeCol===n.col&&1===e.rowCount&&1===e.colCount})),s()(m()(r),"handleShowRowEditor",(function(e){r.setState({showRowEditor:!0},(function(){return r.hide(e)}))})),s()(m()(r),"handleHideRowEditor",(function(){r.setState({showRowEditor:!1},r.init)})),s()(m()(r),"hide",(function(e){r.state.visible&&(r.isInSameSelections(e)||requestAnimationFrame((function(){r.setState(r.defaultState)})))})),s()(m()(r),"unBindEvent",(function(){var e,t=r.props.table,n=r.gridEvent;t.kernel.off(gc.SELECTED,r.init),t.off(qs.HIDE_ROW_EDITOR,r.handleHideRowEditor),t.off(qs.TOGGLE_CELL_PREVIEWER,r.togglePanelHidden),t.kernel.off(gc.CONTENT_CHANGED,r.onColumnChange),t.kernel.off(gc.VIEW_CHANGED,r.handleViewChange),t.off(qs.UPDATE_CELL_PREVIEWER_RECT,r.refresh),t.off(qs.SCROLL,r.refresh),t.off(qs.SHOW_MENU,r.hide),t.off(qs.SHOW_ROW_EDITOR,r.hide),t.off(qs.REMOVE_SELECTIONS,r.hide),t.off(qs.TO_DO_FOCUS,r.handleFocus),t.off(qs.COL_CONFIGS,r.hide),t.off(qs.RESIZE,r.onTextOverLookResize),n.off(Gb,r.onTextOverLookResize),null===(e=r._scrollStrategy)||void 0===e||e.disable()})),s()(m()(r),"handleViewChange",(function(){if(r.state.visible){var e=r.props.table.kernel.tableModel.getActiveView();r.setState({visible:e.type===Gs.GRID})}})),s()(m()(r),"onColumnChange",(function(){if(r.state.visible){var e=r.ViewHelper.getSelections();if(qe()(e))r.destroy();else{var t=e.row,n=e.col,o=r.getCellInfo(t,n),a=r.getColConfigs(n),i=null==a?void 0:a.type;r.setState({row:t,col:n,cellInfo:o,colType:i,colConfigs:wc(a)})}}})),s()(m()(r),"onTextOverLookResize",(function(){var e=r.state,t=e.visible,n=e.isHiddenByKeyboardInput,o=e.shouldCellOverLook,a=e.colType,i=e.row,l=e.col,c=e.rect;if(t&&c&&a&&o&&n){var s=r.ViewHelper.getCellPreviewerRect(i,l,a);r.setState({rect:s})}})),s()(m()(r),"getColConfigs",(function(e){return r.ViewHelper.getColConfigs(e)||{}})),s()(m()(r),"getCellInfo",(function(e,t){return r.ViewHelper.getCellValue(e,r.getColConfigs(t))})),s()(m()(r),"getRender",(function(){var e=r.state,t=e.colType;return e.readOnly?null:Dc.includes(t)?r.renderSelectDropDown():t===Ac.MENTION?r.renderMentionSelector():Mc.includes(t)?r.renderTextareaEditor():null})),s()(m()(r),"isTargetColType",(function(e){return!!qc.includes(e)})),s()(m()(r),"isHiddenByFrozen",(function(e,t,n){var o=Mc.includes(n)&&0===t,a=r.ViewHelper.getFrozenColWidth();return!e||e.top<r.props.table.theme.colHeaderHeight||e.left<a&&!o})),s()(m()(r),"getComputedInnerBoxH",(function(e,t){if(Dc.includes(e)){var n,o,a=(null===(n=r.getColConfigs(t))||void 0===n||null===(o=n.options)||void 0===o?void 0:o.length)||0;return Math.min(40*a,216)+38}if(e===Ac.MENTION){var i=r.ViewHelper.getUsers()||[];return Math.min(50*i.length,216)+38}return 0})),s()(m()(r),"onCellTextOverlookContextMenu",(function(e){e.preventDefault();var t=r.ViewHelper.getSelections();r.props.table.emit(qs.SHOW_MENU,{e:e.nativeEvent,mode:"cell",selections:t,target:{row:r.state.row,col:r.state.col}})})),s()(m()(r),"onCellTextOverlookDbClick",(function(){var e;r.state.readOnly||(r.togglePanelHidden(!1),null===(e=r.inputObserverRef.current)||void 0===e||e.focus())})),s()(m()(r),"renderSelectDropDown",(function(){var e=r.state,t=e.visible,n=e.row,o=e.col,a=e.cellInfo,i=e.readOnly,c=e.isHiddenByKeyboardInput,s=r.state.colConfigs,u=s.options||[],d=a||[],f="select"!==s.type,p={boxId:"".concat(n,"-").concat(o),multi:f,selectedIds:d,options:u,visible:t,hasColor:s.color,readOnly:i,focus:!0,isFromGrid:!0,isHiddenByKeyboardInput:c,inputRefProp:r.inputObserverRef,togglePanelHidden:r.togglePanelHidden,onUpdateCol:function(e){var t=r.state.colConfigs;t.options=e,r.props.table.kernel.execute("updateCol",t)},onSelectChange:function(e){f||(r.togglePanelHidden(!0),setTimeout((function(){var e;null===(e=r.inputObserverRef.current)||void 0===e||e.focus()}),0)),r.onCellValueChange(n,o,e)}};return l.a.createElement(Bg,p)})),s()(m()(r),"togglePanelHidden",(function(e){var t,n=r.state,o=n.rect,a=n.col,i=n.colType,l=n.visible,c=n.isHiddenByKeyboardInput,s=void 0!==e?e:!c;!l||r.isHiddenByFrozen(o,a,i)&&!s||(s||null===(t=r._scrollStrategy)||void 0===t||t.attach(m()(r)),r.setState({isHiddenByKeyboardInput:s},r.refresh))})),s()(m()(r),"renderMentionSelector",(function(){var e=r.state,t=e.row,n=e.col,o=e.readOnly,a=e.isHiddenByKeyboardInput,i=r.state.cellInfo||[];if(Array.isArray(i)){var c=r.props.table,s=c.kernel.options,u=s.webProxy,d=s.docId,f=s.docType,p=s.avatarOrigin,h=r.ViewHelper.getUsers()||[],m={id:"".concat(t,"-").concat(n),webProxy:u,docId:d,docType:f,defaultList:h,table:c,avatarOrigin:p,defaultValue:i||[],disableContainer:!0,focus:!0,canKeyboardInput:!0,isHiddenByKeyboardInput:a,inputRefProp:r.inputObserverRef,togglePanelHidden:r.togglePanelHidden,onChange:function(e){return r.onCellValueChange(t,n,e)}};return l.a.createElement("div",{className:"lake-table-mention"},!o&&l.a.createElement("div",{className:"lake-table-dropdown-celleditor"},l.a.createElement(Mb,m)))}})),s()(m()(r),"renderTextareaEditor",(function(){var e=r.state,t=e.visible,n=e.row,o=e.col,a=e.rect,i=e.isHiddenByKeyboardInput,c=e.colType,s=r.props.table,u=s.container.offsetHeight;if(!t)return null;var d=r.getCellFormattedValue(),f={row:n,col:o,boxId:"".concat(n,"-").concat(o),rect:a,containerH:u,value:d,isHiddenByKeyboardInput:i,colType:c,inputRefProp:r.inputObserverRef,eventManager:s.eventManager,togglePanelHidden:r.togglePanelHidden,onCellValueChange:function(e,t){var n=t.row,o=t.col,a=t.colType,i=t.rect;r.onInputChange(e,{row:n,col:o,colType:a,rect:i})}};return l.a.createElement(wy,f)})),s()(m()(r),"autoSaveWhenScroll",(function(){var e=r.state,t=e.row,n=e.col,o=e.colType,a=e.rect;if(!e.isHiddenByKeyboardInput&&Mc.includes(o)){var i=document.getElementById("lake-table-cell-editor").value;r.onInputChange(i,{row:t,col:n,colType:o,rect:a})}})),s()(m()(r),"onInputChange",(function(e,t){var n=t.row,o=t.col,a=t.colType,i=t.rect;if(a===Ac.NUMBER&&i&&e&&""===Cs(e)){var l=r.editorContainerRect;_h.show({top:i.top+l.top,left:i.left+l.left,width:i.width,height:i.height},_c("数字列只能输入数字"),{timeout:1e3})}else r.props.table.eventManager.emit("input",{target:{row:n,col:o,colType:a},value:e})})),s()(m()(r),"onCellValueChange",(function(e,t,n){r.props.table.kernel.execute("setCellValue",e,t,{value:n})})),s()(m()(r),"onFocusKeyDown",(function(e){var t,n=r.state,o=n.isHiddenByKeyboardInput,a=n.readOnly,i=n.colType;if(!a){var l,c=r.props.table,s=r.props.table.eventManager,u=eg(e,c.readOnly).eventName;if(o&&(null===(t=r.inputObserverRef.current)||void 0===t||t.focus()),o)if("enter"===u&&i!==Ac.LINK)r.togglePanelHidden(!1);else if("copy"===u)r.props.table.kernel.execute("copy",e);else if("paste"===u){var d;null===(d=r.inputObserverRef.current)||void 0===d||d.blur()}else u&&s.emit(u,e);"esc"===u&&(r.togglePanelHidden(!0),null===(l=r.inputObserverRef.current)||void 0===l||l.focus())}})),s()(m()(r),"getStyle",(function(e){var t=r.state,n=t.computedInnerBoxH,o=t.editorPositionType,a=t.isHiddenByKeyboardInput,i="top"===o?0:e.height+4,l="top"===o?"100%":"auto",c=r.editorContainerRect,s=Math.min(c.top+e.top+i,c.bottom),u={width:e.width,height:0,left:c.left+e.left,top:s,zIndex:Eg},d={width:a?0:l};return Math.floor(u.top+n)>Math.floor(document.body.clientHeight)?d.bottom=e.height+4:d.top=0,{innerStyle:d,wrapStyle:u}})),s()(m()(r),"render",(function(){var e=r.state,t=e.visible,n=e.rect,o=e.isHiddenByKeyboardInput,a=e.colType,i=e.shouldCellOverLook;if(!t||!n||!a)return r._scrollStrategy.disable(),null;var c=r.getStyle(n),s=c.wrapStyle,u=c.innerStyle,d=i&&o;o&&(u.width=0,u.height=0,u.overflow="hidden");var f=document.querySelector(".".concat(mc));return V.a.createPortal(l.a.createElement("div",{className:"lake-table-cell-preview-container",role:"cell-container",style:s,onKeyDownCapture:r.onFocusKeyDown},l.a.createElement(ky,{textVal:r.getCellFormattedValue(),enable:d,minHeight:n.height,maxHeight:Math.max(r.props.table.container.offsetHeight-n.top,0),onDoubleClick:r.onCellTextOverlookDbClick,onContextMenu:r.onCellTextOverlookContextMenu}),l.a.createElement("div",{className:"lake-table-cell-preview-inner",style:u},l.a.createElement("div",{className:"lake-table-cell-preview-inner-content"},r.getRender()))),f)})),r.state=Ey(Ey({},r.defaultState),{},{showRowEditor:!1}),r.inputObserverRef=l.a.createRef(),r._scrollStrategy=new je.CloseScrollStrategy,r}return p()(n,[{key:"defaultState",get:function(){return{readOnly:!1,visible:!1,isHiddenByKeyboardInput:!0,colType:null,cell:{row:null,col:null},rect:null,colConfigs:{},cellInfo:{},computedInnerBoxH:0,editorPositionType:"bottom",shouldCellOverLook:!1}}},{key:"ViewHelper",get:function(){return this.props.table.viewManager.getViewRenderer().viewportHelper}},{key:"$container",get:function(){return this.props.table.container}},{key:"editorContainerRect",get:function(){return this.$container.getBoundingClientRect()||{}}},{key:"containerIsVisible",get:function(){var e=this.editorContainerRect;return!!(e.width>0&&e.height>0)}},{key:"gridEvent",get:function(){return this.props.table.eventManager.canvasEvents}},{key:"componentDidMount",value:function(){var e=this.props.table,t=this.gridEvent;e.kernel.on(gc.SELECTED,this.init),e.on(qs.HIDE_ROW_EDITOR,this.handleHideRowEditor),e.on(qs.TOGGLE_CELL_PREVIEWER,this.togglePanelHidden),e.kernel.on(gc.CONTENT_CHANGED,this.onColumnChange),e.kernel.on(gc.VIEW_CHANGED,this.handleViewChange),e.on(qs.UPDATE_CELL_PREVIEWER_RECT,this.refresh),e.on(qs.SCROLL,this.refresh),e.on(qs.SHOW_MENU,this.hide),e.on(qs.SHOW_ROW_EDITOR,this.handleShowRowEditor),e.on(qs.REMOVE_SELECTIONS,this.hide),e.on(qs.TO_DO_FOCUS,this.handleFocus),e.on(qs.COL_CONFIGS,this.hide),e.on(qs.RESIZE,this.onTextOverLookResize),t.on(Gb,this.onTextOverLookResize)}},{key:"componentWillUnmount",value:function(){this.unBindEvent()}},{key:"detach",value:function(){this.autoSaveWhenScroll(),this.togglePanelHidden(!0),this.setState({shouldCellOverLook:!1})}},{key:"destroy",value:function(){var e;this.setState({visible:!1,cell:{}}),null===(e=this._scrollStrategy)||void 0===e||e.disable()}},{key:"getCellFormattedValue",value:function(){var e=this.state,t=e.colType,n=e.cellInfo;return t===Ac.LINK?null==n?void 0:n.name:t===Ac.DATE?null==n?void 0:n.text:n}}]),n}(l.a.PureComponent);function Oy(e){var t=!e.defaultValue;return l.a.createElement("div",{className:"lake-form-item-ui-container ".concat(t?"lake-form-item-ui-show-tooltip":"")},l.a.createElement(ht.a,a()({autoFocus:!0,placeholder:_c("请输入问题")},e)),t&&l.a.createElement(dt.a,{title:_c("当问题为空时，会使用列名作为问题；如未重命名列，所填写的问题会自动同步给列名。")},l.a.createElement("span",{className:"lake-form-item-input-tooltip lake-icon lake-icon-question"})))}function _y(e){var t=e.field,n=e.active,r=e.index,o=e.onChange;if(n)return l.a.createElement("div",null,l.a.createElement(Oy,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)}}),l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输")},l.a.createElement("span",null,l.a.createElement(ht.a,{disabled:!0,size:"large"}))));var a=t.validations&&t.validations[0]&&t.validations[0].required;return l.a.createElement("div",{className:"lake-form-preview"},l.a.createElement("div",{className:a?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),l.a.createElement("div",{style:{marginTop:12}},l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(ht.a,{value:"",style:{width:440},onClick:function(e){e.stopPropagation()},placeholder:_c("请输入文本"),onMouseDown:function(e){e.preventDefault()},size:"large"})))))}function Sy(e){var t=e.field,n=e.active,r=e.index,o=e.onChange;if(n)return l.a.createElement("div",null,l.a.createElement(Oy,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)}}),l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(ht.a.TextArea,{size:"large",style:{minHeight:120},disabled:!0}))));var a=t.validations&&t.validations[0]&&t.validations[0].required;return l.a.createElement("div",{className:"lake-form-preview"},l.a.createElement("div",{className:a?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),l.a.createElement("div",{style:{marginTop:12}},l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(ht.a.TextArea,{value:"",size:"large",style:{minHeight:120},onClick:function(e){e.stopPropagation(),e.preventDefault()},onMouseDown:function(e){e.preventDefault()},placeholder:_c("请输入文本")})))))}function Ry(e){var t=e.field,n=e.active,r=e.index,o=e.onChange;if(n)return l.a.createElement("div",null,l.a.createElement(Oy,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)}}),l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(ht.a,{prefix:l.a.createElement("span",{className:"lake-icon lake-icon-col-number"}),disabled:!0,size:"large",style:{width:328}}))));var a=t.validations&&t.validations[0]&&t.validations[0].required;return l.a.createElement("div",{className:"lake-form-preview"},l.a.createElement("div",{className:a?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),l.a.createElement("div",{style:{marginTop:12}},l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(ht.a,{value:"",style:{width:328},size:"large",onClick:function(e){e.stopPropagation()},onFocus:function(e){e.target.blur()},prefix:l.a.createElement("span",{className:"lake-icon lake-icon-col-number"})})))))}function jy(e){var t=e.field,n=e.active,r=e.index,o=e.onChange;if(n)return l.a.createElement("div",null,l.a.createElement(Oy,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)}}),l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(Ot.a,{style:{width:216},disabled:!0,placeholder:_c("请选择"),size:"large"}))));var a=t.validations&&t.validations[0]&&t.validations[0].required;return l.a.createElement("div",{className:"lake-form-preview"},l.a.createElement("div",{className:a?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),l.a.createElement("div",{style:{marginTop:12}},l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(Ot.a,{value:"",placeholder:_c("请选择"),dropdownClassName:"lake-form-item-dropdown",style:{width:216},size:"large",onClick:function(e){e.stopPropagation(),e.preventDefault()}})))))}function Ay(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;("number"!=typeof e||e<5)&&(e=5);for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}s()(Cy,"propTypes",{table:X.a.object}),_y.propTypes={field:X.a.object,locale:X.a.object,active:X.a.bool,index:X.a.number,onChange:X.a.func},Sy.propTypes={field:X.a.object,locale:X.a.object,active:X.a.bool,index:X.a.number,onChange:X.a.func},Ry.propTypes={field:X.a.object,locale:X.a.object,active:X.a.bool,index:X.a.number,onChange:X.a.func},jy.propTypes={field:X.a.object,locale:X.a.object,active:X.a.bool,index:X.a.number,onChange:X.a.func};var Ty=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"inputs",[]),s()(m()(r),"getOptions",(function(){var e=r.props.field,t=r.state.options;return t||(t=[{value:"",id:Ay(6)},{value:"",id:Ay(6)},{value:"",id:Ay(6)}],r.props.column&&r.props.column.color&&(t[0].color=Jh.getNextColor(""),t[1].color=Jh.getNextColor(t[0].color),t[2].color=Jh.getNextColor(t[1].color)),e&&e.options&&0!==e.options.length&&(t=e.options)),{options:t}})),s()(m()(r),"onAddItem",(function(e){var t=r.state.options,n={value:"",id:Ay(6)};if(r.props.column&&r.props.column.color){var o="";t.length>0&&(o=t[t.length-1].color),n.color=Jh.getNextColor(o)}t.push(n),r.setState({options:t.slice()},(function(){r.optionList&&r.optionList.current&&(r.optionList.current.scrollTop=1e4),e&&r.inputs.length>1&&(r.setState({focus:r.inputs.length-1}),r.inputs[r.inputs.length-1].focus()),r.onChange()}))})),s()(m()(r),"onChangeItem",(function(e,t){var n=e.target.value,o=r.state.options;o[t].value=n,r.setState({options:o})})),s()(m()(r),"onDeleteItem",(function(e,t){var n=r.state.options;n.splice(t,1),r.inputs.splice(t,1),r.setState({options:n.slice()},(function(){r.onChange()}))})),s()(m()(r),"onPressEnter",(function(e){e>=r.state.options.length-1?r.onAddItem(!0):(r.inputs[e+1].input.focus(),r.setState({focus:e+1}))})),r.state={},r}return p()(n,[{key:"componentDidMount",value:function(){this.optionList=l.a.createRef();var e=this.getOptions().options;this.setState({options:e,focus:0})}},{key:"onChange",value:function(){var e={},t=[];this.state.options.forEach((function(n){""!==n.value&&(""===n.value||e[n.value]||(t.push(Object.assign({},n)),e[n.value]=!0))})),this.props.onChange&&this.props.onChange(t)}},{key:"render",value:function(){var e=this,t=this.state.options,n=this.props.field,r=n.display;if(!t)return null;var o=null;"dropdown"!==r&&(o="select"===n.type?l.a.createElement(vt.a,{style:{marginRight:16},disabled:!0}):l.a.createElement(mt.a,{style:{marginRight:16},disabled:!0}));var a=t.map((function(t,n){return l.a.createElement("div",{className:"lake-form-item-select-option",key:t.value+n,"data-index":n,"data-color":t.color,"data-id":t.id},o,l.a.createElement(ht.a,{defaultValue:t.value,onBlur:function(t){e.onChangeItem(t,n)},onPressEnter:function(){e.onPressEnter(n)},ref:function(t){e.inputs[n]=t},placeholder:_c("请输入选项"),onMouseDown:function(e){e.target.focus()}}),l.a.createElement("span",{className:"lake-icon lake-icon-delete",onClick:function(t){e.onDeleteItem(t,n)}}))}));return l.a.createElement("div",{className:"lake-form-item-select ".concat(r),onClick:function(e){e.stopPropagation()}},"dropdown"===r?this.props.title:null,l.a.createElement("div",{className:"lake-form-item-select-option-list",ref:this.optionList},a),l.a.createElement("div",{className:"lake-form-item-select-option-add",onClick:this.onAddItem},l.a.createElement("span",{className:"lake-icon lake-icon-plus"}),_c("添加选项")))}}]),n}(l.a.Component);s()(Ty,"propTypes",{title:X.a.object,onChange:X.a.func,field:X.a.object,column:X.a.object});var Ly=Object(i.forwardRef)((function(e,t){var n=e.field,r=e.active,o=e.index,a=e.onChange,c=e.column,s=e.validate,u=Object(i.useState)(!1),d=ie()(u,2),f=d[0],p=d[1],h=!1;if(!s&&n.options&&0===n.options.length&&(h=!0),Object(i.useImperativeHandle)(t,(function(){return{hasError:h}})),r)return l.a.createElement("div",null,l.a.createElement(Oy,{defaultValue:n.title,onChange:function(e){a("title",e.target.value,!0)},onBlur:function(e){a("title",e.target.value)}}),"dropdown"===n.display?l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(Pt.a,{disabled:!0,size:"large",style:{width:328},dropdownClassName:"lake-form-item-dropdown"}))):null,l.a.createElement(Ty,{title:l.a.createElement("span",{className:"lake-form-item-option-title"},_c("选项设置")),field:n,column:c,onChange:function(e){a("options",e.concat())}}),l.a.createElement("div",{className:"lake-form-item-option-layout"},l.a.createElement("span",{style:{color:"#8c8c8c"}},_c("布局方式"),":"),l.a.createElement(Pt.a,{defaultValue:n.display||"list",bordered:!1,onChange:function(e){a("display",e)},dropdownClassName:"lake-form-item-dropdown"},l.a.createElement(Pt.a.Option,{value:"list"},_c("列表")),l.a.createElement(Pt.a.Option,{value:"dropdown"},_c("下拉")))),h?l.a.createElement("div",{className:"lake-form-item-error"},_c("请配置选项")):null);var m,v=c.options;n.options&&0!==n.options.length||(v=[{value:""}]),m="dropdown"===n.display?l.a.createElement(dt.a,{placement:"bottom",visible:f,onVisibleChange:function(e){p(e)},title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(Pt.a,{dropdownClassName:"lake-form-item-dropdown",value:null,size:"large",placeholder:_c("请选择"),className:"lake-form-preview-select",onClick:function(){p(!1)}},v.map((function(e,t){return l.a.createElement(Pt.a.Option,{value:e.value,key:t},e.value)}))))):"select"===n.type?l.a.createElement(vt.a.Group,{value:null,size:"large"},v.map((function(e,t){return l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入"),key:t},l.a.createElement(vt.a,{className:"lake-form-item-radio",value:e.value},l.a.createElement("div",{className:"lake-form-item-radio-text"},e.value)))}))):l.a.createElement(mt.a.Group,{value:null,size:"large"},v.map((function(e,t){return l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入"),key:t},l.a.createElement(mt.a,{className:"lake-form-item-radio",value:e.value},l.a.createElement("div",{className:"lake-form-item-radio-text"},e.value)))})));var g=n.validations&&n.validations[0]&&n.validations[0].required;return l.a.createElement("div",{className:"lake-form-preview"},l.a.createElement("div",{className:g?"lake-form-preview-required":""},"".concat(o+1,". ").concat(n.title)),l.a.createElement("span",{className:"lake-form-ignore-click"},m),h?l.a.createElement("div",{className:"lake-form-item-error"},"请配置选项"):null)}));function Dy(e){var t=e.field,n=e.active,r=e.index,o=e.onChange,a=e.prefix,i=e.width,c=void 0===i?440:i;if(n)return l.a.createElement("div",null,l.a.createElement(Oy,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)}}),l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(ht.a,{prefix:a,disabled:!0,size:"large",style:{width:c}}))));var s=t.validations&&t.validations[0]&&t.validations[0].required;return l.a.createElement("div",{className:"lake-form-preview"},l.a.createElement("div",{className:s?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),l.a.createElement("div",{style:{marginTop:12}},l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(ht.a,{value:"",style:{width:c},size:"large",onClick:function(e){e.stopPropagation()},onFocus:function(e){e.target.blur()},prefix:a})))))}function Py(e){return l.a.createElement(Dy,a()({},e,{width:328,prefix:l.a.createElement("span",{className:"lake-icon lake-icon-col-email"})}))}function My(e){var t=e.field,n=e.active,r=e.index,o=e.onChange,a=e.text;if(n)return l.a.createElement("div",null,l.a.createElement(Oy,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)}}),l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(ft.a,{icon:l.a.createElement(vg,null),disabled:!0,size:"large"},a))));var i=t.validations&&t.validations[0]&&t.validations[0].required;return l.a.createElement("div",{className:"lake-form-preview"},l.a.createElement("div",{className:i?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),l.a.createElement("div",{style:{marginTop:12}},l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(ft.a,{value:"",size:"large",icon:l.a.createElement(vg,null)},a)))))}function Ny(e){return l.a.createElement(My,a()({},e,{text:_c("上传文件")}))}function Iy(e){return l.a.createElement(My,a()({},e,{text:_c("上传图片")}))}function Fy(e){return l.a.createElement(Dy,a()({},e,{width:328,prefix:l.a.createElement("span",{className:"lake-icon lake-icon-col-link"})}))}function By(e){var t=e.field,n=e.active,r=e.index,o=e.onChange;if(n)return l.a.createElement("div",{className:"lake-form-mention"},l.a.createElement(Oy,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)}}),l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(Pt.a,{disable:!0,size:"large",style:{width:328},dropdownClassName:"lake-form-item-dropdown"}))));var a=t.validations&&t.validations[0]&&t.validations[0].required;return l.a.createElement("div",{className:"lake-form-preview lake-form-mention"},l.a.createElement("div",{className:a?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),l.a.createElement("div",{style:{marginTop:12}},l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(Pt.a,{size:"large",style:{width:328},dropdownClassName:"lake-form-item-dropdown"})))))}function Vy(e){return l.a.createElement(Dy,a()({},e,{width:328,prefix:l.a.createElement("span",{className:"lake-icon lake-icon-col-phone"})}))}function Hy(e){var t=e.field,n=e.active,r=e.index,o=e.onChange,a=[{value:!0,name:_c("是")},{value:!1,name:_c("否")}];if(n)return l.a.createElement("div",{className:"lake-form-checkbox"},l.a.createElement(Oy,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)}}),l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写着输入")},l.a.createElement("span",null,l.a.createElement(vt.a.Group,{onChange:o},a.map((function(e,t){return l.a.createElement(vt.a,{value:e.value,key:t},l.a.createElement("span",{className:"lake-form-designer-checkbox-value"},e.name))}))))));var i=t.validations&&t.validations[0]&&t.validations[0].required;return l.a.createElement("div",{className:"lake-form-preview lake-form-checkbox"},l.a.createElement("div",{className:i?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),l.a.createElement("div",{style:{marginTop:12}},l.a.createElement(dt.a,{placement:"bottom",title:_c("此处由填写者输入")},l.a.createElement("span",null,l.a.createElement(vt.a.Group,{onChange:o},a.map((function(e,t){return l.a.createElement(vt.a,{value:e.value,key:t},l.a.createElement("span",{className:"lake-form-designer-checkbox-value"},e.name))})))))))}Ly.propTypes={field:X.a.object,column:X.a.object,locale:X.a.object,active:X.a.bool,index:X.a.number,onChange:X.a.func,validate:X.a.object},Dy.propTypes={field:X.a.object,locale:X.a.object,active:X.a.bool,index:X.a.number,prefix:X.a.node,onChange:X.a.func},Py.propTypes={field:X.a.object,locale:X.a.object,active:X.a.bool,index:X.a.number,onChange:X.a.func},My.propTypes={field:X.a.object,locale:X.a.object,active:X.a.bool,index:X.a.number,prefix:X.a.node,onChange:X.a.func},Ny.propTypes={field:X.a.object,locale:X.a.object,active:X.a.bool,index:X.a.number,onChange:X.a.func},Iy.propTypes={field:X.a.object,locale:X.a.object,active:X.a.bool,index:X.a.number,onChange:X.a.func},Fy.propTypes={field:X.a.object,locale:X.a.object,active:X.a.bool,index:X.a.number,onChange:X.a.func},By.propTypes={field:X.a.object,locale:X.a.object,active:X.a.bool,index:X.a.number,onChange:X.a.func},Vy.propTypes={field:X.a.object,locale:X.a.object,active:X.a.bool,index:X.a.number,onChange:X.a.func},Hy.propTypes={field:X.a.object,locale:X.a.object,active:X.a.bool,index:X.a.number,onChange:X.a.func};var zy=[{type:"input",component:_y},{type:"textarea",component:Sy},{type:"number",component:Ry},{type:"select",component:Ly},{type:"multiSelect",component:Ly},{type:"date",component:jy},{type:"mention",component:By},{type:"image",component:Iy},{type:"file",component:Ny},{type:"checkbox",component:Hy},{type:"link",component:Fy},{type:"email",component:Py},{type:"phone",component:Vy}],qy={input:_c("单行文本"),textarea:_c("多行文本"),select:_c("单选"),multiSelect:_c("多选"),date:_c("日期"),number:_c("数字"),mention:_c("人员"),image:_c("图片"),file:_c("文件"),checkbox:_c("复选框"),link:_c("链接"),email:_c("邮箱"),phone:_c("手机号码")},Uy=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onMoveUp",(function(){var e=r.props.index;0!==r.props.index&&r.props.onSort(e,e-1)})),s()(m()(r),"onMoveDown",(function(){r.props.onSort(r.props.index,r.props.index+1)})),s()(m()(r),"onClone",(function(){r.props.onClone(r.props.index,r.props.field)})),s()(m()(r),"onChangeRequired",(function(e){var t=r.props.field;e.target.checked?t.validations&&t.validations.unshift({required:!0}):t.validations=t.validations.slice(1),r.setState({field:t}),r.props.onChange(r.props.index,t)})),s()(m()(r),"updateField",(function(e,t,n){var o=r.state.field;o[e]=t,"title"===e&&(n?r.setState({title:t}):(r.updateColumnNameIfEmpty(t),r.setState({title:null}))),r.setState({field:o}),r.props.onChange(r.props.index,o)})),s()(m()(r),"updateColumnName",(function(e){r.props.updateColumn(r.props.column.id,"name",e.target.value),r.setState({editing:!1,columnName:null})})),s()(m()(r),"updateColumnNameIfEmpty",(function(e){var t=_c(qy[r.props.column.type]);new RegExp("".concat(t,"(\\s\\d)*")).test(r.props.column.name)&&e&&r.props.updateColumn(r.props.column.id,"name",e)})),s()(m()(r),"onChangeType",(function(e){e!==r.props.column.type&&(r.updateField("type",e),r.props.updateColumn(r.props.column.id,"type",e,_c(qy[r.props.column.type]),_c(qy[e])))})),s()(m()(r),"onClickItem",(function(e){e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopPropagation();for(var t=e.target;t&&t.classList&&t!==document.body;){if(t.classList.contains("lake-form-item-dropdown")||t.classList.contains("lake-form-ignore-click"))return;t=t.parentNode}r.props.active||r.props.onActive(r.props.field.columnId,r.props.index)})),r.state={editing:null},r.formItemRef=l.a.createRef(),r.unActiveItemContainer=l.a.createRef(),r.wrapper=l.a.createRef(),r}return p()(n,[{key:"componentDidMount",value:function(){this.setState({field:this.props.field,editing:!1,columnName:null,title:null})}},{key:"componentWillReceiveProps",value:function(e){if(e.active!==this.props.active)if(e.active)this.setState({columnName:null,title:null});else{e.field.title||this.updateField("title",e.column.name),this.state.columnName&&this.props.updateColumn(this.props.column.id,"name",this.state.columnName),this.state.title&&(this.updateField("title",this.state.title),this.updateColumnNameIfEmpty(this.state.title));var t=document.querySelectorAll(".lake-form-item-select-option .ant-input");if(t){var n=[],r={};t.forEach((function(e){if(""!==e.value){var t=e.parentNode;r[e.value]||(n.push({value:e.value,color:t.getAttribute("data-color"),id:t.getAttribute("data-id")}),r[e.value]=!0)}})),this.updateField("options",n)}}}},{key:"renderColumnTypes",value:function(){return(0===this.props.column.index?Hc:zy.map((function(e){return e.type}))).map((function(e,t){return l.a.createElement(Pt.a.Option,{key:t,value:e},l.a.createElement("div",{className:"lake-form-field-type-item"},l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(e.toLowerCase()),style:{marginRight:8}}),_c(qy[e])))}))}},{key:"getFormItem",value:function(){var e=this.props.column.type,t=zy.find((function(t){return t.type===e}));if(!t)return null;var n={field:this.props.field,validate:this.props.validate,column:this.props.column,active:this.props.active,index:this.props.index,onChange:this.updateField,ref:this.formItemRef};return l.a.createElement(t.component,n)}},{key:"getFormItemIsError",value:function(){var e;return null===(e=this.formItemRef.current)||void 0===e?void 0:e.hasError}},{key:"scrollFormItemIntoView",value:function(){var e;null===(e=this.unActiveItemContainer.current)||void 0===e||e.scrollIntoView()}},{key:"render",value:function(){var e=this,t=this.props.field,n=this.props.column;return t?this.props.active?l.a.createElement("div",{className:"lake-form-item active",ref:this.wrapper},l.a.createElement("div",{className:"lake-form-item-inner"},l.a.createElement("div",{className:"lake-form-item-sidebar",onClick:function(e){e.stopPropagation()}},l.a.createElement(dt.a,{placement:"left",title:_c("向上移动")},l.a.createElement("span",{className:"lake-icon lake-icon-move-up",onClick:this.onMoveUp,style:{color:0===this.props.index?"#BFBFBF":"#8c8c8c"}})),l.a.createElement(dt.a,{placement:"left",title:_c("向下移动")},l.a.createElement("span",{className:"lake-icon lake-icon-move-down",onClick:this.onMoveDown,style:{color:this.props.last?"#BFBFBF":"#8c8c8c"}})),l.a.createElement(dt.a,{placement:"left",title:_c("复制表单项")},l.a.createElement("span",{className:"lake-icon lake-icon-table-copy",onClick:this.onClone})),l.a.createElement(dt.a,{placement:"left",title:_c("移除表单项")},l.a.createElement("span",{className:"lake-icon lake-icon-circle-remove",onClick:function(){e.props.onRemove(e.props.index)}}))),l.a.createElement("div",{className:"lake-form-item-container"},l.a.createElement("div",{className:"lake-form-item-column-configs"},this.state.editing?l.a.createElement(ht.a,{autoFocus:!0,defaultValue:this.props.column.name,onChange:function(t){e.setState({columnName:t.target.value})},onPressEnter:this.updateColumnName,onBlur:this.updateColumnName}):l.a.createElement("div",{className:"lake-form-item-column-name"},l.a.createElement("span",{className:"lake-form-item-column-content"},this.props.column.name),l.a.createElement(dt.a,{placement:"bottom",title:_c("点击重命名")},l.a.createElement("span",{className:"lake-form-item-column-edit",onClick:function(t){t.stopPropagation(),e.setState({editing:!0})}},l.a.createElement("span",{className:"lake-icon lake-icon-edit-new"})))),l.a.createElement("div",{className:"lake-form-item-type"},l.a.createElement(Pt.a,{defaultValue:n.type,bordered:!1,onChange:this.onChangeType,dropdownClassName:"lake-form-item-dropdown lake-form-type-select",getPopupContainer:function(e){return e.parentNode.parentNode}},this.renderColumnTypes()),l.a.createElement("div",{className:"lake-form-item-validation"},l.a.createElement(mt.a,{defaultChecked:t.validations&&t.validations[0]&&t.validations[0].required,onChange:this.onChangeRequired,style:{marginRight:8}},_c("必填"))))),l.a.createElement("div",{className:"lake-form-item-field-configs"},this.getFormItem())),this.props.validate&&""===t.title?l.a.createElement("div",{className:"lake-form-item-error"},_c("请输入问题")):null),l.a.createElement("div",{className:"lake-form-item-add"},l.a.createElement(ft.a,{onClick:function(t){e.props.onInsert(t,e.props.index)},onMouseDown:function(e){e.stopPropagation()}},l.a.createElement("span",{className:"lake-icon lake-icon-plus"}),_c("添加")))):l.a.createElement("div",{ref:this.unActiveItemContainer,className:"lake-form-item",onClick:this.onClickItem},l.a.createElement("div",{className:"lake-form-item-field-configs"},this.getFormItem()),this.props.validate&&""===t.title?l.a.createElement("div",{className:"lake-form-item-error"},_c("请输入问题")):null):null}}]),n}(l.a.Component);function Gy(e){var t=e.columns,n=e.states,r=e.formData;if(!n)return null;var o=t.map((function(o,a){var i=!!n[a];return!o.type||Gc.includes(o.type)?null:l.a.createElement("div",{className:"lake-form-col ".concat(i?"active":"deactive"),key:o.id,onClick:function(){!function(r){n[r]?e.onRemove(t[r].id):e.onInsert(r,t[r])}(a)}},l.a.createElement("div",{className:"lake-form-col-name"},l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(o.type.toLowerCase())}),o.name),i&&l.a.createElement("span",{className:"lake-form-col-state"},_c("添加")),i&&l.a.createElement("span",{className:"lake-form-col-state-remove"},_c("取消添加")),!i&&l.a.createElement("span",{className:"lake-form-col-state add"},l.a.createElement("span",null,_c("添加")),l.a.createElement(dg,{style:{marginLeft:4}})),l.a.createElement("div",{className:"lake-form-col-fields"},function(e){for(var t,n,o=0;o<r.fields.length;o++){if(r.fields[o].columnId===e.id){t=r.fields[o],n=o;break}if(r.cached){var a=r.cached[e.id];if(a){t=a;break}}}return t?l.a.createElement("span",null,null!=n?"".concat(n+1,"."):"",t.title):l.a.createElement("span",{className:"lake-form-col-untitled"},_c("未命名问题"))}(o)))}));return l.a.createElement("div",{className:"lake-form-col-container"},l.a.createElement("div",{className:"lake-form-col-intro"},_c("所有列"),l.a.createElement(dt.a,{title:_c("数据表中所有列")},l.a.createElement("span",{className:"lake-icon lake-icon-question"}))),l.a.createElement("div",{className:"lake-form-col-items"},o))}function Wy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}s()(Uy,"propTypes",{index:X.a.number,active:X.a.bool,field:X.a.object,column:X.a.object,last:X.a.bool,validate:X.a.bool,onActive:X.a.func,onSort:X.a.func,onInsert:X.a.func,onRemove:X.a.func,onClone:X.a.func,onChange:X.a.func,updateColumn:X.a.func}),Gy.propTypes={columns:X.a.array,states:X.a.array,formData:X.a.object,onInsert:X.a.func,onRemove:X.a.func},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n/* stylelint-disable */\n.lake-form-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n}\n.lake-form-configs {\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.lake-form-configs-bg {\n  width: 100%;\n  height: auto;\n  min-height: 100%;\n  padding-bottom: 180px;\n  background-image: url(https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*GuXmSLuojF4AAAAAAAAAAAAAARQnAQ);\n  background-repeat: no-repeat;\n  background-position: bottom;\n  background-size: contain;\n}\n.lake-form-configs-title {\n  min-height: 150px;\n  padding: 48px 0 10px 0;\n  width: 440px;\n  margin: auto;\n  border-bottom: 1px solid var(--yq-border-light);\n  margin-bottom: 25px;\n}\n.lake-form-configs-title .ant-input {\n  border: none;\n  background-color: transparent;\n  box-shadow: none;\n  resize: none;\n}\n.lake-form-configs-content {\n  width: 440px;\n  margin: auto;\n  min-height: 72px;\n}\n.lake-form-configs-content textarea {\n  padding-left: 0;\n}\n.lake-form-configs .lake-form-title {\n  font-size: 32px;\n  line-height: 40px;\n  font-weight: bold;\n  color: var(--yq-text-primary);\n  padding: 0;\n}\n.lake-form-configs .lake-form-desc {\n  color: var(--yq-text-body);\n  padding: 0;\n}\n.lake-form-configs-footer {\n  width: 440px;\n  margin: auto;\n  padding-top: 25px;\n  padding-bottom: 50px;\n}\n.lake-form-item {\n  width: 492px;\n  position: relative;\n  margin: auto;\n  padding: 25px;\n  cursor: pointer;\n}\n.lake-form-item .ant-select-borderless .ant-select-selector {\n  background: none;\n}\n.lake-form-item .ant-select-borderless .ant-select-selector:hover {\n  color: var(--yq-text-body);\n}\n.lake-form-item:hover,\n.lake-form-item.hover {\n  background-color: var(--yq-bg-primary-hover);\n  border-radius: 8px;\n}\n.lake-form-item.active {\n  cursor: auto;\n}\n.lake-form-item.active .lake-form-item-field-configs {\n  padding: 25px;\n}\n.lake-form-item.active:hover {\n  background-color: transparent;\n}\n.lake-form-item-sidebar {\n  position: absolute;\n  top: 25px;\n  left: -6px;\n  width: 32px;\n  text-align: center;\n  height: 136px;\n  border: 1px solid var(--yq-border-light);\n  cursor: pointer;\n  padding-top: 4px;\n  border-bottom-left-radius: 4px;\n  border-top-left-radius: 4px;\n}\n.lake-form-item-sidebar span {\n  font-size: 16px;\n  padding: 6px;\n  margin-bottom: 4px;\n  color: var(--yq-text-caption);\n}\n.lake-form-item-sidebar span:hover {\n  background-color: var(--yq-bg-tertiary);\n  border-radius: 3px;\n}\n.lake-form-item-sidebar .ant-select-borderless .ant-select-selector {\n  background: none;\n}\n.lake-form-item-container {\n  min-height: 78px;\n  width: 488px;\n  border: 1px solid var(--yq-border-light);\n  border-radius: 0 0 4px 4px;\n  background-color: var(--yq-bg-secondary);\n}\n.lake-form-item-column-configs {\n  height: 38px;\n  width: 100%;\n  padding: 0 24px;\n  border-bottom: 1px solid var(--yq-border-light);\n  display: flex;\n  justify-content: space-between;\n}\n.lake-form-item-column-configs .ant-input {\n  width: 160px;\n  height: 32px;\n  margin-top: 2px;\n}\n.lake-form-item-error {\n  color: red;\n  margin-top: 6px;\n  font-size: 14px;\n  font-weight: normal;\n}\n.lake-form-item-field-configs .lake-form-preview {\n  font-size: 16px;\n  font-weight: bold;\n  max-width: 440px;\n  white-space: normal;\n  line-break: anywhere;\n  color: var(--yq-text-primary);\n}\n.lake-form-item-field-configs .lake-form-preview-select {\n  width: 328px;\n  margin-top: 12px;\n  font-weight: normal;\n  background-color: var(--yq-bg-primary);\n}\n.lake-form-item-field-configs .lake-form-preview .ant-select-selector {\n  background: none;\n}\n.lake-form-item-field-configs .lake-form-preview-required:before {\n  display: inline-block;\n  color: var(--yq-red-5);\n  margin-right: 4px;\n  font-size: 14px;\n  line-height: 1;\n  content: '*';\n  font-weight: lighter;\n}\n.lake-form-item-field-configs .lake-form-preview .lake-form-item-radio {\n  display: flex;\n  align-items: center;\n  min-height: 40px;\n  margin: 8px 0;\n  padding: 8px 14px;\n  font-weight: normal;\n}\n.lake-form-item-field-configs .lake-form-preview .lake-form-item-radio .ant-radio,\n.lake-form-item-field-configs .lake-form-preview .lake-form-item-radio .ant-checkbox {\n  margin-top: -4px;\n}\n.lake-form-item-field-configs .lake-form-preview .lake-form-item-radio-text {\n  max-width: 388px;\n  font-size: 16px;\n  font-size: normal;\n  white-space: normal;\n  line-break: anywhere;\n}\n.lake-form-item-field-configs .lake-form-preview .ant-input:hover {\n  border-color: var(--yq-border-light);\n}\n.lake-form-item-field-configs .lake-form-preview .ant-radio-wrapper:hover .ant-radio,\n.lake-form-item-field-configs .lake-form-preview .ant-radio:hover .ant-radio-inner,\n.lake-form-item-field-configs .lake-form-preview .ant-radio-input:focus + .ant-radio-inner {\n  border-color: var(--yq-border-light);\n  box-shadow: none;\n}\n.lake-form-item-field-configs .lake-form-preview .ant-input-affix-wrapper:hover {\n  border-color: var(--yq-border-light);\n}\n.lake-form-item-field-configs .lake-form-preview .ant-select:not(.ant-select-disabled):hover .ant-select-selector {\n  border-color: var(--yq-border-light);\n  box-shadow: none;\n}\n.lake-form-item-field-configs .lake-form-preview .ant-select-focused:not(.ant-select-disabled).ant-select:not(.ant-select-customize-input) .ant-select-selector {\n  border-color: var(--yq-border-light);\n  box-shadow: none;\n}\n.lake-form-item-field-configs .lake-form-preview .ant-picker {\n  border-color: var(--yq-border-light);\n}\n.lake-form-item-field-configs .lake-form-preview .ant-picker-focused {\n  border-color: var(--yq-border-light);\n  box-shadow: none;\n}\n.lake-form-item-field-configs .lake-form-preview .lake-icon {\n  font-weight: 400;\n}\n.lake-form-item-option-title {\n  color: var(--yq-text-caption);\n  padding: 0 24px;\n}\n.lake-form-item-type {\n  display: flex;\n  align-items: center;\n}\n.lake-form-item-add {\n  text-align: center;\n  padding-top: 24px;\n}\n.lake-form-item-add .lake-icon {\n  margin-right: 8px;\n}\n.lake-form-item-option-layout {\n  height: 46px;\n  margin: 0 -25px -25px -25px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n.lake-form-item-select {\n  margin: 0 -24px;\n  border-bottom: 1px solid var(--yq-border-light);\n}\n.lake-form-item-select.dropdown {\n  background-color: var(--yq-bg-tertiary);\n  margin-top: 20px;\n  padding: 12px 0;\n}\n.lake-form-item-select.dropdown .lake-form-item-select-option-add {\n  margin: 10px 0 10px 24px;\n}\n.lake-form-item-select-option {\n  padding: 6px 0px;\n  display: flex;\n  align-items: center;\n}\n.lake-form-item-select-option .lake-icon {\n  margin-left: 12px;\n}\n.lake-form-item-select-option-list {\n  max-height: 180px;\n  padding: 0 24px;\n  overflow: auto;\n  overflow-x: hidden;\n  margin-top: 8px;\n}\n.lake-form-item-select-option-list .lake-icon {\n  cursor: pointer;\n  color: var(--yq-text-caption);\n  font-size: 16px;\n}\n.lake-form-item-select-option-list .lake-icon:hover {\n  color: var(--yq-text-primary);\n}\n.lake-form-item-select-option-add {\n  cursor: pointer;\n  line-height: 24px;\n  margin: 10px 0 10px 56px;\n  color: var(--yq-text-body);\n}\n.lake-form-item-select-option-add:hover {\n  color: var(--yq-text-primary);\n}\n.lake-form-item-select-option-add .lake-icon {\n  margin-right: 6px;\n}\n.lake-form-item-select-option-add.colored {\n  margin-left: 44px;\n}\n.lake-form-item-column-name {\n  color: var(--yq-text-body);\n  line-height: 38px;\n}\n.lake-form-item-column-name:hover {\n  color: var(--yq-text-body);\n}\n.lake-form-item-column-content {\n  max-width: 130px;\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  vertical-align: middle;\n}\n.lake-form-item-column-edit {\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  border-radius: 2px;\n  padding: 3px;\n  margin-left: 2px;\n}\n.lake-form-item-column-edit:hover {\n  background: var(--yq-bg-primary-hover);\n}\n.lake-form-item-validation {\n  display: inline-block;\n  height: 22px;\n  border-left: 1px solid var(--yq-border-light);\n  margin-left: 16px;\n  padding-left: 16px;\n}\n.lake-form-item-ui-container {\n  margin-bottom: 12px;\n  position: relative;\n}\n.lake-form-item-ui-container .ant-input {\n  width: 440px;\n  border: none;\n  box-shadow: none;\n  height: 40px;\n  font-size: 16px;\n  font-weight: bold;\n  border-radius: 4px 4px 0 0;\n  background-color: var(--yq-bg-primary-hover);\n  border-bottom: 2px solid var(--yq-blue-6);\n}\n.lake-form-item-ui-container .lake-form-item-input-tooltip {\n  position: absolute;\n  top: 12px;\n  right: 5px;\n  color: var(--yq-text-caption);\n  font-size: 16px;\n}\n.lake-form-item-ui-container .lake-form-item-input-tooltip:hover {\n  color: var(--yq-text-caption);\n}\n.lake-form-item-ui-show-tooltip .ant-input {\n  padding-right: 30px;\n}\n.lake-form-col-container {\n  width: 286px;\n  position: relative;\n  border: 1px solid var(--yq-border-light);\n  flex-shrink: 0;\n}\n.lake-form-col-container .lake-form-col-intro {\n  height: 54px;\n  line-height: 54px;\n  font-weight: bold;\n  padding-left: 24px;\n  border-bottom: 1px solid var(--yq-border-light);\n  user-select: none;\n}\n.lake-form-col-container .lake-form-col-intro .lake-icon {\n  margin-left: 8px;\n  font-size: 16px;\n  color: var(--yq-text-caption);\n  vertical-align: middle;\n  font-weight: normal;\n}\n.lake-form-col-container .lake-form-col-items {\n  position: absolute;\n  top: 54px;\n  bottom: 0;\n  overflow: auto;\n  width: 100%;\n  padding: 10px 24px 50px 24px;\n}\n.lake-form-col-container .lake-form-col {\n  height: 73px;\n  margin: 8px 0;\n  padding: 10px 16px 0;\n  background-color: var(--yq-bg-secondary);\n  border: 1px solid var(--yq-border-light);\n  border-radius: 3px;\n  cursor: pointer;\n}\n.lake-form-col-container .lake-form-col .lake-icon {\n  margin-right: 8px;\n}\n.lake-form-col-container .lake-form-col.active {\n  color: var(--yq-text-disable);\n}\n.lake-form-col-container .lake-form-col.active:hover {\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-form-col-container .lake-form-col.deactive {\n  color: var(--yq-text-body);\n  background-color: var(--yq-bg-primary);\n}\n.lake-form-col-container .lake-form-col.deactive:hover {\n  background-color: var(--yq-bg-primary);\n  box-shadow: 0px 1px 2px -2px rgba(0, 0, 0, 0.08), 0px 2px 6px 0px rgba(0, 0, 0, 0.08);\n}\n.lake-form-col-container .lake-form-col-name {\n  display: inline-block;\n  max-width: 144px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n.lake-form-col-container .lake-form-col-fields {\n  margin-top: 4px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n.lake-form-col-container .lake-form-col-untitled {\n  color: var(--yq-text-disable);\n}\n.lake-form-col-container .lake-form-col-state {\n  float: right;\n}\n.lake-form-col-container .lake-form-col-state.add {\n  visibility: hidden;\n  cursor: pointer;\n}\n.lake-form-col-container .lake-form-col-state-remove {\n  float: right;\n  display: none;\n  color: var(--yq-text-body);\n}\n.lake-form-col-container .lake-form-col:hover .lake-form-col-state {\n  display: none;\n}\n.lake-form-col-container .lake-form-col:hover .lake-form-col-state.add {\n  display: block;\n  visibility: visible;\n}\n.lake-form-col-container .lake-form-col:hover .lake-form-col-state-remove {\n  display: block;\n}\n.lake-form-type-select {\n  width: 150px !important;\n}\n.lake-form-type-select span {\n  margin-right: 8px;\n}\n.lake-form-empty-field {\n  width: 440px;\n  margin: auto;\n  margin-top: 90px;\n  text-align: center;\n}\n.lake-form-empty-field p {\n  font-size: 16px;\n  font-weight: bold;\n  color: var(--yq-text-primary);\n  margin: 30px 0 12px 0;\n}\n.lake-form-checkbox .ant-radio-wrapper {\n  width: 90px;\n}\n.lake-table-form-date .ant-picker-clear {\n  opacity: 1;\n  position: absolute;\n  right: 20px;\n}\n");var Yy=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"fields",[]),s()(m()(r),"onMouseDown",(function(e){if(r.state.editing){var t=e.target;if("INPUT"!==t.tagName){for(;t&&t.classList&&t!==document.body;){if(t.classList.contains("lake-form-item")||t.classList.contains("lake-form-item-dropdown"))return;t=t.parentNode}r.setState({editing:null})}}})),s()(m()(r),"onInputBlur",(function(e,t){var n=r.props.data;n[e]=t,r.props.onChange&&r.props.onChange({data:n,columns:r.state.columns}),r.setState({data:n,editing:null})})),s()(m()(r),"onInsert",(function(e,t){var n=r.state.data,o=r.useCache(n,t);o||(o={columnId:t.id,columnName:t.name,title:"",type:t.type,validations:[{required:!0}]},"select"!==t.type&&"multiSelect"!==t.type||(o.options=r.cloneItem(t.options))),n.fields.push(o),r.updateColumnStates(n),r.setState({editing:o.columnId}),r.props.onChange&&r.props.onChange({data:n,columns:r.state.columns})})),s()(m()(r),"onSort",(function(e,t){var n=r.state.data,o=r.state.data.fields;if(!(t>=o.length)){var a=o.splice(e,1);o.splice(t,0,a[0]),n.fields=o,r.setState({data:n,editing:o[t].columnId}),r.props.onChange&&r.props.onChange({data:n,columns:r.state.columns})}})),s()(m()(r),"onClone",(function(e,t){var n=r.state.data,o=r.state.columns,a=n.fields,i=r.columnMap;t=r.cloneItem(t);var l=r.cloneItem(o[i[t.columnId]]),c=o.map((function(e){return e.index}));l.index=Math.max.apply(Math,me()(c))+1;for(var s=1,u="副本".concat(s," ").concat(t.columnName);!r.validateColumnName(u);)s++,u="副本".concat(s," ").concat(t.columnName," ");for(t.columnName=u;void 0!==i[t.columnId];)t.columnId=Ay(32);i[t.columnId]=o.length,l.id=t.columnId,l.name=t.columnName,l.formAdded=!0,a.splice(e+1,0,t),n.fields=a,o.push(l);var d=r.state.columnStates;d.push(!0),r.setState({data:n,columnStates:d,columns:o,editing:l.id}),r.props.onInsertColumn(l,e+1),r.props.onChange&&r.props.onChange({data:n,columns:o})})),s()(m()(r),"onRemove",(function(e){var t=r.state.data,n=t.fields.splice(e,1)[0];t.cached||(t.cached={}),t.cached[n.columnId]=n,r.setState({data:t}),r.updateColumnStates(t),r.props.onChange&&r.props.onChange({data:t,columns:r.state.columns})})),s()(m()(r),"onChangeField",(function(e,t){var n=r.state,o=n.data,a=n.columns;if(o.fields[e]=r.cloneItem(t),"select"===t.type||"multiSelect"===t.type){var i=r.columnMap[t.columnId];a[i].color=a[i].color||!1,a[i].options=r.cloneItem(t.options)}r.setState({data:o,columns:a}),r.props.onChange&&r.props.onChange({data:o,columns:a})})),s()(m()(r),"updateColumn",(function(e,t,n,o,a){var i=r.state.columns,l=i[r.columnMap[e]];if("name"===t&&!r.validateColumnName(n))return!1;"type"===t&&new RegExp("".concat(o,"(\\s\\d)*")).test(l.name)&&(l.name=r.getDefaultNameByType(a)),l[t]=n,r.setState({columns:i}),r.props.onChange&&r.props.onChange({data:r.state.data,columns:i}),r.props.onChangeColumn&&r.props.onChangeColumn(l)})),s()(m()(r),"onInsertColAndField",(function(e,t){e.stopPropagation();for(var n=r.state.data,o=n.fields,a=r.state.columns,i=r.columnMap,l=a.map((function(e){return e.index})),c={type:"input",index:Math.max.apply(Math,me()(l))+1,name:r.getDefaultNameByType(_c("单行文本"))};!c.id||void 0!==i[c.id];)c.id=Ay(32);i[c.id]=a.length,c.formAdded=!0,a.push(c);var s={type:"input",columnId:c.id,columnName:c.name,title:null,validations:[{required:!0}]};o.splice(t+1,0,s),r.setState({data:n,columns:a},(function(){r.onActiveField(s.columnId,t+1)})),r.props.onInsertColumn(c,t+1),r.props.onChange&&r.props.onChange({data:n,columns:a}),r.updateColumnStates(n)})),s()(m()(r),"onRemoveByColumnId",(function(e){for(var t=r.state.data,n=0;n<t.fields.length;n++)if(t.fields[n].columnId===e){r.onRemove(n);break}r.props.onChange&&r.props.onChange({data:t,columns:r.state.columns})})),r.state={editing:null,columns:null,data:null,columnStates:[]},r}return p()(n,[{key:"componentDidMount",value:function(){var e=this;this.columnMap={},this.props.columns.forEach((function(t,n){e.columnMap[t.id]=n})),this.setState({data:this.props.data,columns:me()(this.props.columns)}),this.updateColumnStates(this.props.data),window.addEventListener("mousedown",this.onMouseDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.onMouseDown)}},{key:"updateColumnStates",value:function(e){var t=[],n=this.columnMap;e.fields.forEach((function(e){void 0!==n[e.columnId]&&(t[n[e.columnId]]=!0)})),this.setState({columnStates:t})}},{key:"useCache",value:function(e,t){if(e.cached&&e.cached[t.id]){var n=e.cached[t.id];if(delete e.cached[t.id],n.type===t.type)return n.options=Dt()(t.options),n}return!1}},{key:"validateColumnName",value:function(e){return!this.state.columns.map((function(e){return e.name})).includes(e)}},{key:"onActiveField",value:function(e,t){var n=this;this.setState({editing:e},(function(){n.fields[t]}))}},{key:"getDefaultNameByType",value:function(e){for(var t=e,n=1;!this.validateColumnName(t);)t="".concat(e," ").concat(n),n+=1;return t}},{key:"renderFormItems",value:function(){var e=this,t=this.state.data,n=t.fields.length;return t.fields.map((function(t,r){var o=t.type;return Gc.includes(o)?null:l.a.createElement(Uy,{validate:e.props.validate,field:t,column:e.state.columns[e.columnMap[t.columnId]],index:r,active:t.columnId===e.state.editing,key:t.columnId,last:r===n-1,ref:function(t){e.fields[r]=t},onActive:function(t){e.onActiveField(t,r)},onInsert:e.onInsertColAndField,onSort:e.onSort,onClone:e.onClone,onRemove:e.onRemove,onChange:e.onChangeField,updateColumn:e.updateColumn})}))}},{key:"cloneItem",value:function(e){return e?JSON.parse(JSON.stringify(e)):""}},{key:"scrollToFirstErrorItem",value:function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Wy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wy(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(this.fields);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.getFormItemIsError()){n.scrollFormItemIntoView();break}}}catch(e){t.e(e)}finally{t.f()}}},{key:"setData",value:function(e,t){var n=this.state.data;n[e]=t,this.setState({data:n}),this.props.onChange&&this.props.onChange({data:n,columns:this.state.columns})}},{key:"render",value:function(){var e,t=this,n=this.state,r=n.columns,o=n.data;if(!r)return null;if(o&&0!==o.fields.length){var a=this.renderFormItems();e=l.a.createElement("div",null,a,l.a.createElement("div",{className:"lake-form-configs-footer"},l.a.createElement(ft.a,{type:"primary",onClick:function(e){t.onInsertColAndField(e,o.fields.length-1)}},l.a.createElement("span",{className:"lake-icon lake-icon-plus",style:{marginRight:8}}),_c("添加"))))}else e=l.a.createElement("div",{className:"lake-form-empty-field"},l.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*T2g-TqR5Yw8AAAAAAAAAAAAAARQnAQ",width:"123",height:"114"}),l.a.createElement("p",null,_c("表单为空")),l.a.createElement("span",{style:{color:"#8c8c8c"}},_c("点击左侧列表添加已有列 或 点击下方按钮添加新表单项")),l.a.createElement("br",null),l.a.createElement(ft.a,{type:"primary",style:{marginTop:30},onClick:function(e){t.onInsertColAndField(e,-1)}},l.a.createElement("span",{className:"lake-icon lake-icon-plus",style:{marginRight:8}}),_c("添加")));return l.a.createElement("div",{className:"lake-form-container"},r&&l.a.createElement(Gy,{columns:r,states:this.state.columnStates,formData:this.state.data,onInsert:this.onInsert,onRemove:this.onRemoveByColumnId}),l.a.createElement("div",{className:"lake-form-configs"},l.a.createElement("div",{className:"lake-form-configs-bg"},l.a.createElement("div",{className:"lake-form-configs-title"},l.a.createElement("div",{className:"lake-form-configs-content"},l.a.createElement(ht.a.TextArea,{className:"lake-form-title",autoFocus:""===o.name,autoSize:!0,defaultValue:o.name,onBlur:function(e){t.onInputBlur("name",e.target.value)},onClick:function(e){e.stopPropagation()},placeholder:_c("请输入表单标题")}),l.a.createElement(ht.a.TextArea,{autoSize:!0,maxLength:255,defaultValue:o.desc,onBlur:function(e){t.onInputBlur("desc",e.target.value)},size:"small",style:{marginTop:24,color:"#595959"},onClick:function(e){e.stopPropagation()},placeholder:_c("请输入表单描述")}))),e)))}}]),n}(l.a.Component);s()(Yy,"propTypes",{data:X.a.object,columns:X.a.array,onChange:X.a.func,onChangeColumn:X.a.func,onInsertColumn:X.a.func,validate:X.a.bool}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: hidden;\n  background-color: var(--yq-bg-primary);\n  font-size: 14px;\n  padding-top: 56px;\n}\n.lake-table-form-header {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 56px;\n  line-height: 56px;\n  border-bottom: 1px solid var(--yq-border-light);\n  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.08);\n}\n.lake-table-form-back {\n  margin-left: 27px;\n  display: inline-block;\n  cursor: pointer;\n}\n.lake-table-form-back:hover {\n  color: var(--yq-text-caption);\n}\n.lake-table-form-back span {\n  margin-left: 5px;\n}\n.lake-table-form-title {\n  margin-left: 28px;\n  font-weight: bold;\n  color: var(--yq-text-primary);\n}\n.lake-table-form-confirm {\n  position: absolute;\n  right: 28px;\n  top: 12px;\n}\n.lake-table-form-save {\n  margin-left: 14px;\n  font-size: 12px;\n  color: var(--yq-text-caption);\n}\n");var $y=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"formDesignRef",null),s()(m()(r),"onSave",(function(){r.setState({savedAt:_e()().format("HH:mm")}),r.saveTimer&&clearTimeout(r.saveTimer),r.saveTimer=setTimeout((function(){r.setState({savedAt:null})}),2e3)})),s()(m()(r),"onCreate",(function(e){r.onShow(e),r.setState({type:"create"})})),s()(m()(r),"onEdit",(function(e){r.onShow(e),r.setState({type:"edit"})})),s()(m()(r),"onShow",(function(e){r.formModel=r.tableModel.getView(e),r.prevView=r.tableModel.getActiveView().get("id"),r.kernel.execute("activeView",r.formModel.get("id"));var t=r.formModel.getDataForSave()||{},n=r.tableModel.getTableFields()||[];r.setState({visible:!0,viewId:e,validate:r.validate(t),formConfigs:t,columns:n})})),s()(m()(r),"onHide",(function(){r.state.validate?(r.kernel.execute("activeView",r.prevView),"create"===r.state.type&&(r.table.emit(qs.OPEN_FORM_ON_CREATE),r.table.emit(qs.SHOW_TOOLBAR_MENU,{e:null,type:"form"})),r.setState({visible:!1})):r.formDesignRef.current.scrollToFirstErrorItem()})),s()(m()(r),"onChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.state.visible&&(r.validate(e.data)?(r.kernel.execute("updateForm",e.data,r.state.viewId),r.setState({validate:!0})):r.setState({validate:!1}))})),s()(m()(r),"onChangeColumn",(function(e){r.kernel.execute("updateCol",e)})),s()(m()(r),"onInsertColumn",(function(e,t){r.kernel.execute("insertCol",e,t)})),r.state={type:"create",visible:!1,validate:!1,columns:[],formConfigs:{},savedAt:null},r.formDesignRef=Object(i.createRef)(null),r.table=e.table,r.kernel=r.table.kernel,r.tableModel=r.kernel.tableModel,r.configs=null,r.formService=r.kernel.formService,r.validate=r.formService.validate,r}return p()(n,[{key:"componentDidMount",value:function(){this.kernel.on(gc.CREATE_FORM,this.onCreate),this.kernel.on(gc.EDIT_FORM,this.onEdit),this.kernel.on(gc.SAVE,this.onSave),this.kernel.on(gc.AUTO_SAVE,this.onSave)}},{key:"componentWillUnmount",value:function(){this.kernel.off(gc.CREATE_FORM,this.onCreate),this.kernel.off(gc.EDIT_FORM,this.onEdit),this.kernel.off(gc.SAVE,this.onSave),this.kernel.off(gc.AUTO_SAVE,this.onSave)}},{key:"render",value:function(){return this.state.visible?l.a.createElement("div",{className:"lake-table-form",style:{zIndex:Og}},l.a.createElement("div",{className:"lake-table-form-header"},l.a.createElement("div",{className:"lake-table-form-back",onClick:this.onHide},l.a.createElement(ug,null),l.a.createElement("span",null,"返回")),l.a.createElement("span",{className:"lake-table-form-title"},this.state.formConfigs.name||"未命名表单"),this.state.savedAt?l.a.createElement("span",{className:"lake-table-form-save"},l.a.createElement(yg,{style:{marginRight:4}}),_c("保存于")+this.state.savedAt):null,l.a.createElement(ft.a,{className:"lake-table-form-confirm",type:"primary",onClick:this.onHide},_c("完成"))),l.a.createElement(Yy,{ref:this.formDesignRef,columns:this.state.columns,data:this.state.formConfigs,lang:this.table.lang,onChange:this.onChange,onChangeColumn:this.onChangeColumn,onInsertColumn:this.onInsertColumn,validate:this.state.validate})):null}}]),n}(l.a.Component);s()($y,"propTypes",{table:X.a.object}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-editor .lake-table-scrollbar {\n  position: absolute;\n  z-index: 101;\n  user-select: none;\n}\n.lake-table-editor .lake-table-scrollbar.lake-table-scrollbar-new-x {\n  left: 40px;\n  right: 3px;\n  bottom: 0;\n  height: 15px;\n  overflow-x: scroll;\n  overflow-y: hidden;\n}\n.lake-table-editor .lake-table-scrollbar.lake-table-scrollbar-new-x::-webkit-scrollbar {\n  width: 8px;\n  height: 8px;\n}\n.lake-table-editor .lake-table-scrollbar.lake-table-scrollbar-new-x::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 6px;\n}\n.lake-table-editor .lake-table-scrollbar.lake-table-scrollbar-new-x::-webkit-scrollbar-corner {\n  background: rgba(47, 142, 244, 0.2);\n}\n.lake-table-editor .lake-table-scrollbar.lake-table-scrollbar-new-y {\n  top: 37px;\n  right: 1px;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  cursor: pointer;\n  width: 15px;\n}\n");var Ky="canvas",Xy="scrollbar",Zy=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"show",(function(){var e=r.props.table,t=e.theme,n=e.viewManager.getViewRenderer().viewportHelper;if(n.getViewData("type")!==Gs.KANBAN){var o=n.getScrollData(),a=o.scrollX,i=o.scrollY,l=o.scrollWidth,c=o.scrollHeight,s=r.container,u=s.offsetWidth,d=s.offsetHeight;l<u&&c<d?r.setState({visible:!1}):(r.setState({visible:!0}),r.setState({oWidth:u-3,sWidth:l,oHeight:d-t.colHeaderHeight-3,sHeight:c}),r.scrollType!==Xy&&(r.scrollType=Ky,r.slideY.current&&(r.slideY.current.scrollTop=i),r.slideX.current&&(r.slideX.current.scrollLeft=a)))}else r.setState({visible:!1})})),s()(m()(r),"onScrollY",(function(e){if(r.props.yScrollEnable&&r.scrollType!==Ky){var t=e.target.scrollTop;r.scrollType=Xy,r.props.table.viewManager.getViewRenderer().viewportHelper.scrollTo(void 0,t)}})),s()(m()(r),"onScrollX",(function(e){if(r.props.xScrollEnable&&r.scrollType!==Ky){var t=e.target.scrollLeft;r.scrollType=Xy,r.props.table.viewManager.getViewRenderer().viewportHelper.scrollTo(t,void 0)}})),r.state={visible:!1,oWidth:null,sWidth:null,oHeight:null,sHeight:null},r}return p()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.table;t.on("scroll",this.show),t.kernel.on(gc.VIEW_CHANGED,(function(){return setTimeout(e.show,200)})),t.kernel.on(gc.COL_CHANGED,this.show),this.slideY=l.a.createRef(),this.slideX=l.a.createRef()}},{key:"render",value:function(){var e=this;if(!this.state.visible)return null;var t=this.props,n=t.xScrollEnable,r=t.yScrollEnable,o=this.state,a=o.oWidth,i=o.sWidth,c=o.oHeight,s=o.sHeight,u=!isNaN(s)&&!isNaN(c)&&s>c,d=!isNaN(i)&&!isNaN(a)&&i>a;return l.a.createElement(l.a.Fragment,null,d&&n&&l.a.createElement("div",{className:"lake-table-scrollbar lake-table-scrollbar-new-x",ref:this.slideX,style:{width:a},onScroll:this.onScrollX,onMouseDown:function(){e.scrollType=Xy},onMouseUp:function(){e.scrollType=""}},l.a.createElement("div",{className:"lake-table-scrollbar-inner",style:{height:1,width:i}})),u&&r&&l.a.createElement("div",{className:"lake-table-scrollbar lake-table-scrollbar-new-y",ref:this.slideY,style:{height:c},onScroll:this.onScrollY,onMouseDown:function(){e.scrollType=Xy},onMouseUp:function(){e.scrollType=""}},l.a.createElement("div",{className:"lake-table-scrollbar-inner",style:{width:1,height:s}})))}},{key:"container",get:function(){return this.props.table.container}}]),n}(l.a.Component);s()(Zy,"propTypes",{table:X.a.object,yScrollEnable:X.a.bool,xScrollEnable:X.a.bool}),s()(Zy,"defaultProps",{yScrollEnable:!0,xScrollEnable:!0}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-stats {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 32px;\n  overflow: hidden;\n  background-color: var(--yq-bg-secondary);\n  border-top: 1px solid var(--yq-border-light);\n  z-index: 101;\n}\n.lake-table-stats-frozen {\n  display: inline-block;\n  height: 100%;\n  border-right: 1px solid var(--yq-border-light);\n}\n.lake-table-stats-frozen div {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n}\n.lake-table-stats-cols {\n  display: inline-block;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  overflow: hidden;\n}\n.lake-table-stats-scrollable {\n  display: flex;\n  flex-wrap: nowrap;\n}\n.lake-table-stats-item {\n  display: inline-block;\n  text-align: right;\n  padding-right: 8px;\n  line-height: 28px;\n  height: 32px;\n  font-size: 12px;\n  color: var(--yq-text-caption);\n}\n.lake-table-stats-item .lake-icon {\n  font-size: 10px;\n  margin-left: 2px;\n  transform: scale(0.8);\n}\n.lake-table-stats-item-unfilled {\n  opacity: 0;\n}\n.lake-table-stats-item:hover {\n  background-color: var(--yq-bg-primary-hover);\n  cursor: pointer;\n}\n.lake-table-stats-item:hover .lake-table-stats-item-unfilled {\n  opacity: 1;\n}\n.lake-table-stats-options {\n  position: absolute;\n  width: 180px;\n  max-height: 400px;\n  overflow: auto;\n  overflow-x: hidden;\n  background-color: var(--yq-bg-primary);\n  border-radius: 4px;\n  border: 1px solid var(--yq-border-light);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  padding: 6px 0;\n  z-index: 500;\n}\n.lake-table-stats-seperator {\n  border-top: 1px solid var(--yq-border-light);\n  margin: 8px 0;\n}\n.lake-table-stats-option {\n  text-align: left;\n  padding: 8px 12px;\n  display: flex;\n  align-items: center;\n  justify-content: start;\n  cursor: pointer;\n  width: 100%;\n  height: 34px;\n  overflow: visible;\n  color: var(--yq-text-body);\n}\n.lake-table-stats-option .lake-icon {\n  margin-right: 8px;\n}\n.lake-table-stats-option:hover {\n  background: var(--yq-bg-tertiary);\n}\n.lake-table-stats-option .lake-table-stats-empty {\n  display: block;\n  width: 16px;\n  margin-right: 8px;\n}\n.lake-table-stats-cells {\n  width: 100%;\n  padding-right: 8px;\n  font-size: 12px;\n  line-height: 32px;\n  color: var(--yq-text-caption);\n  text-align: right;\n}\n");var Qy=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"getOptionsStyle",(function(t){var n=t.getBoundingClientRect().right,r=e.props.table.container.getBoundingClientRect(),o=r?n-r.left-180:n-180;return{left:Math.max(o,5),bottom:32}})),s()(m()(e),"getOptionElByEvent",(function(e){for(var t=e.target;t!==document.body&&!t.classList.contains("lake-table-stats-item");)t=t.parentNode;return ed(t.classList.contains("lake-table-stats-item"),"no lake-table-stats-item"),t})),s()(m()(e),"showOptions",(function(t){var n=e.props,r=n.col,o=n.table,a=r.colId,i=e.getOptionElByEvent(t);o.emit(qs.STATS_OPTIONS,a,e.getOptionsStyle(i))})),e}return p()(n,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.col.size,o=n.data,a=n.offset,i=void 0===a?0:a;if(o){var c=Qe()(mh,o.type).stats;e=l.a.createElement("span",{className:"lake-table-stats-item-filled"},_c(c,o.value+""),l.a.createElement("span",{className:"lake-icon lake-icon-dropdown-arrow"}))}else e=l.a.createElement("span",{className:"lake-table-stats-item-unfilled"},mh.none.stats,l.a.createElement("span",{className:"lake-icon lake-icon-dropdown-arrow"}));return l.a.createElement("div",{className:"lake-table-stats-item",style:{width:(r||0)+i},onClick:function(e){return t.showOptions(e)}},e)}}]),n}(l.a.Component);s()(Qy,"defaultProps",{offset:0});var Jy=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"stats",[]),s()(m()(r),"refresh",(function(){r.refreshColPositions(),r.refreshData()})),s()(m()(r),"refreshColPositions",(function(){r.props.table.kernel.tableModel.getActiveView().get("type")===Gs.GRID?r.setColData():r.setState({cols:[]})})),s()(m()(r),"setColData",(function(){var e,t=r.props.table.viewManager.getViewRenderer().viewportHelper,n=t.getViewData("columns"),o=t.getViewData("frozenCol");t.refreshColSize();var a=[];void 0!==o?Object.values(t.columnSizes).forEach((function(t,r){var i=n[r],l=i.id,c=i.hidden,s=void 0!==c&&c;r<=o?e={colId:l,hidden:s,size:t.size}:s||a.push({index:r,colId:l,hidden:s,size:t.size})})):a=wc(t.columnSizes),r.setState({cols:a,frozenCol:e})})),s()(m()(r),"refreshData",(function(e){var t=r.props.table;if(t.kernel.tableModel.getActiveView().get("type")===Gs.GRID){e&&(r.stats=e);var n=t.kernel.tableModel.getActiveView().get("selections"),o=n.rowCount,a=n.colCount;(isNaN(n.row)||1===o||1===a)&&r.setState({stats:r.stats,cells:null})}else r.setState({cols:[]})})),s()(m()(r),"refreshSelectionData",(function(e){if(e){var t=e.rowCount,n=e.colCount,o=r.props.table;isNaN(e.row)||1===t&&1===n?r.setState({stats:r.stats,cells:null}):r.setState({stats:o.kernel.statsService.getStatsBySelections(e),cells:t*n})}})),s()(m()(r),"updatePositions",(function(){var e=r.props.table.kernel.tableModel.getActiveView().get("scrollX");r.setState({scroll:e})})),r.state={scroll:0,stats:[],cols:[],frozenCol:{},cells:null},r}return p()(n,[{key:"componentDidMount",value:function(){var e=this.props.table;e.kernel.on(gc.VIEW_CHANGED,this.refresh),e.kernel.on(gc.SELECTED,this.refreshSelectionData),e.kernel.on(gc.STATS_UPDATED,this.refreshData),e.kernel.on(gc.COL_CHANGED,this.refreshColPositions),e.kernel.on(gc.CHANGED,this.refresh),e.on(qs.SCROLL,this.updatePositions),e.eventManager.on("resizeEnd",this.refreshColPositions)}},{key:"componentWillUnmount",value:function(){var e=this.props.table;e.kernel.off(gc.VIEW_CHANGED,this.refresh),e.kernel.off(gc.SELECTED,this.refreshSelectionData),e.kernel.off(gc.STATS_UPDATED,this.refreshData),e.kernel.off(gc.COL_CHANGED,this.refreshColPositions),e.kernel.off(gc.CHANGED,this.refresh),e.off(qs.SCROLL,this.updatePositions),e.eventManager.off("resizeEnd",this.refreshColPositions)}},{key:"render",value:function(){var e=this.state,t=e.cols,n=e.frozenCol,r=this.props.table;if((null==t||!t.length)&&!Object.keys(n).length||r.kernel.tableModel.getActiveView().get("type")!==Gs.GRID)return null;var o=this.state.stats,a=this.props.table.viewManager.getViewRenderer().viewportHelper,i=a.getViewData("columns"),c=a.getRowHeaderWidth(),s=this.state.cells?l.a.createElement("div",{className:"lake-table-stats-cells"},_c("已选择 $1 个单元格",this.state.cells)):l.a.createElement(Qy,{table:r,data:o&&o[i[0].id],col:n,offset:c});return l.a.createElement("div",{className:"lake-table-stats"},l.a.createElement("div",{style:{position:"relative"}},t.length>0&&l.a.createElement("div",{className:"lake-table-stats-cols",style:{left:n.size+c}},l.a.createElement("div",{className:"lake-table-stats-scrollable",style:{transform:"translate(-".concat(this.state.scroll,"px, 0)")}},t.map((function(e){return l.a.createElement(Qy,{table:r,data:o&&i[e.index]&&o[i[e.index].id],key:e.offset,col:e})})))),n&&l.a.createElement("div",{className:"lake-table-stats-frozen",style:{width:n.size+c}},s)))}}]),n}(l.a.Component);nc(".lake-table-auto-height {\n  overflow-y: auto;\n  height: auto;\n}\n");var ew=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"el",void 0),s()(m()(r),"_container",void 0),s()(m()(r),"onResize",Nt()((function(){r.setHeight()}),300)),s()(m()(r),"adjustHeight",(function(){r.setHeight()})),s()(m()(r),"setHeight",(function(){var e=r.el.current,t=e.getBoundingClientRect(),n=r._container.getBoundingClientRect();if(Math.max(t.bottom,t.top+e.scrollHeight)>n.bottom){var o=n.bottom-t.top;e.style.height=o+"px"}else e.style.height="auto"})),r.el=l.a.createRef(),r._container=e.container,r}return p()(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize);var e=this.el.current,t=this.props,n=t.minHeight,r=t.maxHeight,o=t.autoAdjustHeight;r&&(e.style.maxHeight=r+"px"),n&&(e.style.minHeight=n+"px"),o&&this.adjustHeight()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){var e=this.props,t=e.componentStyle,n=e.children,r=e.className;return l.a.createElement("div",{ref:this.el,style:t,className:S()("lake-table-auto-height",r)},n)}}]),n}(l.a.Component);s()(ew,"defaultProps",{autoAdjustHeight:!0});var tw=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"show",(function(e,t){var n=r.props.table,o=n.kernel.tableModel,a=o.getActiveView(),i=o.getFieldsMap(),l=a.get("stats")[e]||"none",c=i[e],s=c.type,u=[],d=n.container.offsetHeight;r.state.visible&&e===r.state.colConfigs.id?r.hide():(Object.keys(mh).forEach((function(e){var t=Qe()(mh,e);t.types&&!t.types.includes(s)||u.push({seperator:t.seperator,type:e,text:t.option})})),t.left<0&&(t.left=0),t.top&&t.top+32*u.length>d&&(delete t.top,t.bottom=32),r.setState({visible:!0,colConfigs:c,style:t,statType:l,contents:u}),window.removeEventListener("mousedown",r.onWindowClick),setTimeout((function(){window.addEventListener("mousedown",r.onWindowClick)}),100))})),s()(m()(r),"onWindowClick",(function(e){for(var t=e.target;t&&t!==document.body&&t.classList;){if(t.classList.contains("lake-table-stats-options")||t.classList.contains("lake-table-stats-item"))return;t=t.parentNode}r.hide()})),s()(m()(r),"onClick",(function(e){e!==r.state.statType&&r.props.table.kernel.execute("setStats",r.state.colConfigs.id,e),r.hide()})),r.state={visible:!1,style:null,colConfigs:null,statType:"",contents:[]},r}return p()(n,[{key:"componentDidMount",value:function(){this.props.table.on(qs.STATS_OPTIONS,this.show)}},{key:"hide",value:function(){window.removeEventListener("mousedown",this.onWindowClick),this.state.visible&&this.setState({visible:!1})}},{key:"render",value:function(){var e=this;return this.state.visible?l.a.createElement(ew,{className:"lake-table-stats-options",componentStyle:this.state.style,maxHeight:this.props.table.container.clientHeight-40,container:this.props.table.container},this.state.contents.map((function(t,n){return t.seperator?l.a.createElement("div",{key:n,className:"lake-table-stats-seperator"}):l.a.createElement("div",{key:t.type,className:"lake-table-stats-option",onClick:function(){e.onClick(t.type)}},l.a.createElement("span",{className:t.type===e.state.statType?"lake-icon lake-icon-success":"lake-table-stats-empty"}),t.text)}))):null}}]),n}(l.a.Component);s()(tw,"propTypes",{table:X.a.object});var nw=ct.a.error,rw={group:{text:_c("本记录将被移至新的分组"),ps:_c("本记录不属于该分组，点击其他区域将移走该记录")},filter:{text:_c("本记录将被过滤"),ps:_c("本记录已被筛选过滤，点击其他区域将隐藏该记录")},sort:{text:_c("本记录将被移动到新的排序位置"),ps:_c("本记录因排序规则会移动，点击其他区域将移走该记录")}},ow=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"showError",(function(e){r.visible||e&&(r.visible=!0,nw({title:_c("操作出错了"),content:e,onOk:r.hide,onCancel:r.hide}))})),s()(m()(r),"showRequestError",(function(){Xe.a.error(_c("数据操作异常，请稍后重试"))})),s()(m()(r),"showConnectionError",(function(){r.visible=!0,r.props.table.disable()})),s()(m()(r),"hide",(function(){r.visible=!1})),s()(m()(r),"showWaiting",(function(e){Xe.a.loading(e),r.waiting=!0})),s()(m()(r),"hideWaiting",(function(){r.waiting&&Xe.a.destroy()})),s()(m()(r),"showGridColOverflow",(function(){nw({title:r.props.table.locale.tableMessages.gridColOverflowTitle,content:r.props.table.locale.tableMessages.gridColOverflowDesc})})),s()(m()(r),"showCopy",(function(e){Xe.a.success(_c("成功复制 $1 个单元格",e))})),s()(m()(r),"moveIndexColInfo",(function(){Xe.a.warning(_c("索引列不支持拖拽"))})),s()(m()(r),"showTempStateWarning",(function(e){var t=r.props.table.kernel.tableModel.getActiveView();e&&t.type===Gs.GRID?r.updateTempPosition(e):r.setState({tempState:null})})),s()(m()(r),"updateTempPosition",(function(e){if(e=e||r.state.tempState){var t=e,n=t.selections,o=t.type,a=r.viewportHelper.getFrozenRectByCell(n.activeRow,0);r.setState({tempState:{selections:n,type:o,style:{left:a.left-r.props.table.theme.rowHeaderWidth,top:a.top-28}}})}else r.setState({tempState:null})})),r.state={loading:!e.readOnly},r}return p()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.table;t.on(qs.ERROR,this.showError),t.on(qs.DATA_READY,(function(){e.setState({loading:!1})})),t.on(qs.MOVE_INDEX_COL,this.moveIndexColInfo),t.kernel.on(gc.CONNECTION_ERROR,this.showConnectionError),t.kernel.on(gc.REQEUST_ERROR,this.showRequestError),t.kernel.on("waiting",this.showWaiting),t.kernel.on("finished",this.hideWaiting),t.kernel.on("error",this.showError),t.kernel.on("copy",this.showCopy),t.kernel.on(gc.RECORD_WILL_MOVE,this.showTempStateWarning),t.on(qs.SCROLL,this.updateTempPosition),this.viewportHelper=t.viewManager.viewRenderers[0].viewportHelper,t.readOnly||this.setState({loading:!0})}},{key:"render",value:function(){if(this.state.loading)return l.a.createElement("div",{className:"lake-table-loading-mask"},l.a.createElement("div",{className:"lake-table-loading"},l.a.createElement(hg,{style:{fontSize:50,color:"#8C8C8C"}})));if(this.state.tempState){var e=rw[this.state.tempState.type];return l.a.createElement("div",{className:"lake-table-warning-container",style:this.state.tempState.style},e.text,l.a.createElement(dt.a,{placement:"top",title:e.ps},l.a.createElement(At.a,{style:{marginLeft:4}})))}return null}}]),n}(l.a.Component);s()(ow,"propTypes",{table:X.a.object,readOnly:X.a.bool,ot:X.a.bool});var aw,iw=function(e){return function(t){g()(r,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(r);function r(e,t){var o;return d()(this,r),(o=n.call(this,e,t)).state={shouldRender:!1},o}return p()(r,[{key:"componentDidMount",value:function(){var e=this;Vp((function(){Vp((function(){return e.setState({shouldRender:!0})}))}))}},{key:"render",value:function(){return this.state.shouldRender?l.a.createElement(e,this.props):null}}]),r}(l.a.Component)};function lw(e){var t=e.id,n=e.defaultValue;return l.a.createElement("div",{className:"card-file-list",key:t},n.map((function(e,t){return function(e,t){if(e){var r=je.OssUtil.resizeImage({maxWidth:120,src:e.src,data:{width:120,originWidth:e.width,originHeight:e.height}})||e.src;return l.a.createElement("div",{className:"card-file-list-image-container",key:t},l.a.createElement("img",{src:r,className:"card-file-list-image",onClick:function(e){return function(e,t){t.stopPropagation(),dp(n,e)}(t,e)},loading:"lazy"}))}}(e,t)})))}function cw(e){var t=e.id,n=e.defaultValue;return l.a.createElement("div",{className:"card-file-list",key:t},n.map((function(e,t){return function(e,t){if(e){var n=e.src,r=Dd(n),o=Ms("fileIcons.".concat(r))||Ms("fileIcons.default");return l.a.createElement(ol,{title:e.name},l.a.createElement("div",{className:"card-file-list-file-container",key:t},l.a.createElement("img",{src:o,className:"card-file-list-image",onClick:function(t){return function(e,t){t.preventDefault(),t.stopPropagation();var n=Nd(e.src,e.size);n&&(as.desktop&&window.openExternalLink?window.openExternalLink(n,!0):window.open(n,"_blank","noopener,noreferrer"))}(e,t)},loading:"lazy"})))}}(e,t)})))}function sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.card-file-list {\n  width: 100%;\n  overflow-x: auto;\n  overflow-y: hidden;\n  display: flex;\n}\n.card-file-list-image-container {\n  flex-shrink: 0;\n  height: 26px;\n  width: 32px;\n  margin-left: 5px;\n  border-radius: 3px;\n  cursor: zoom-in;\n}\n.card-file-list-image-container:first-child {\n  margin-left: 0;\n}\n.card-file-list-file-container {\n  flex-shrink: 0;\n  height: 24px;\n  width: 24px;\n  margin-left: 5px;\n  border-radius: 3px;\n  cursor: zoom-in;\n}\n.card-file-list-file-container:first-child {\n  margin-left: -2px;\n}\n.card-file-list-image {\n  height: 100%;\n  width: 100%;\n  object-fit: cover;\n}\n"),lw.propTypes={id:X.a.string,onChange:X.a.func,accept:X.a.string,defaultValue:X.a.array},cw.propTypes={id:X.a.string,defaultValue:X.a.array},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-card-container {\n  position: absolute;\n  display: inline-block;\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 4px;\n  background-color: var(--yq-bg-primary);\n  cursor: pointer;\n  overflow: hidden;\n  color: var(--yq-text-primary);\n  user-select: none;\n}\n.lake-table-card-container:hover {\n  box-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 8px 16px 4px rgba(0, 0, 0, 0.04);\n}\n.lake-table-card-container.searching {\n  border: 2px solid var(--yq-blue-6);\n}\n.lake-table-card-container.search-target {\n  background-color: rgba(17, 124, 238, 0.1);\n}\n.lake-table-card-cover {\n  width: 100%;\n  background-position: center center;\n  margin-bottom: 20px;\n}\n.lake-table-card-cover.empty {\n  background-color: var(--yq-bg-tertiary);\n  position: relative;\n}\n.lake-table-card-cover.empty img {\n  width: 44px;\n  height: 44px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  margin-left: -22px;\n  margin-top: -22px;\n}\n.lake-table-card-field {\n  color: var(--yq-text-caption);\n  font-size: 12px;\n  display: flex;\n  align-items: center;\n  margin: 0 20px;\n  margin-top: 16px;\n  margin-bottom: -6px;\n}\n.lake-table-card-field .lake-icon {\n  font-size: 14px;\n  margin-right: 4px;\n}\n.lake-table-card-column {\n  margin-top: 10px;\n  margin-bottom: 0;\n  margin-left: 20px;\n  margin-right: 20px;\n  height: 24px;\n  overflow: hidden;\n}\n.lake-table-card-column-select-tags {\n  margin-top: 14px;\n  margin-bottom: 14px;\n}\n.lake-table-card-column-textarea {\n  height: 40px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n}\n.lake-table-card-column-mention {\n  margin-top: 20px;\n  margin-bottom: 14px;\n}\n.lake-table-card-column-checkbox {\n  margin-top: 12px;\n  margin-bottom: 12px;\n}\n.lake-table-card-column-index {\n  font-size: 16px;\n  font-weight: 500;\n}\n.lake-table-card-column-index.lake-table-card-column-textarea {\n  max-height: 28px;\n  -webkit-line-clamp: 1;\n}\n.lake-table-card-column-list {\n  margin: 20px 0;\n}\n.lake-table-card-column-empty-title {\n  color: var(--yq-text-caption);\n}\n.lake-table-card-image {\n  cursor: zoom-in;\n}\n");var uw=(s()(aw={},Ac.CHECKBOX,zg),s()(aw,Ac.DATE,ab),s()(aw,Ac.CREATED_AT,ab),s()(aw,Ac.UPDATED_AT,ab),s()(aw,Ac.EMAIL,ib),s()(aw,Ac.FILE,cw),s()(aw,Ac.IMAGE,lw),s()(aw,Ac.INPUT,Tg),s()(aw,Ac.LINK,Lb),s()(aw,Ac.MENTION,Mb),s()(aw,Ac.USER_ID,Mb),s()(aw,Ac.MODIFIER_ID,Mb),s()(aw,Ac.NUMBER,Nb),s()(aw,Ac.PHONE,Ib),s()(aw,Ac.SELECT,Vg),s()(aw,Ac.MULTI_SELECT,Vg),s()(aw,Ac.TEXTAREA,Lg),aw),dw=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onViewImage",(function(e,t){e.stopPropagation(),dp(t)})),s()(m()(r),"getCoverHeight",(function(){return r.viewportHelper.cardWidth/1.6})),s()(m()(r),"showRecord",(function(){var e=r.props.row;r.table.emit(qs.SHOW_ROW_EDITOR,{row:e})})),s()(m()(r),"showContextMenu",(function(e){var t=r.props.row;e.stopPropagation(),e.preventDefault(),r.props.table.emit(qs.SHOW_MENU,{row:t,e:e.nativeEvent})})),r.state={},r.table=e.table,r.kernel=e.table.kernel,r.viewportHelper=e.viewportHelper,r.cardRef=l.a.createRef(),r}return p()(n,[{key:"renderCoverEmpty",value:function(){var e={height:this.getCoverHeight()};return l.a.createElement("div",{className:"lake-table-card-cover empty",style:e},l.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/94c60ed0-e53a-4ad1-9ffe-ec7fd1266b46.svg",draggable:"false"}))}},{key:"renderCover",value:function(e,t){var n=this,r=this.props.row,o=this.props.table.kernel.tableModel.getFieldsMap()[t.id];if(!o)return this.renderCoverEmpty();var a=this.viewportHelper.getCellValue(r,o)[0],i={height:this.viewportHelper.cardWidth/1.6};if(!a||!a.src)return this.renderCoverEmpty();var c=up(a.src,a.width,a.height,390);return i.backgroundImage="url(".concat(c,")"),i.backgroundRepeat="no-repeat",i.backgroundPosition="center center","clip"===t.display?i.backgroundSize="cover":i.backgroundSize="contain",l.a.createElement("div",{className:"lake-table-card-image",style:i,onClick:function(e){return n.onViewImage(e,a)}})}},{key:"renderColumns",value:function(){var e=this,t=this.props,n=t.row,r=t.table,o=[],a=this.viewportHelper.getViewData(),i=a.columns,c=a.cover,s=r.kernel.tableModel.getFieldsMap(),u=null;return c&&c.show&&(u=this.renderCover(n,c)),i.forEach((function(t,n){var r=s[t.id];r&&(t.hidden||o.push(e.renderColumn(r,0===n)))})),l.a.createElement(l.a.Fragment,null,u,l.a.createElement("div",{className:"lake-table-card-column-list"},o))}},{key:"renderField",value:function(e){return l.a.createElement("div",{className:"lake-table-card-field"},l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(e.type.toLowerCase())}),e.name)}},{key:"renderColumn",value:function(e,t){var n,r=this.props,o=r.showField,i=r.showEmpty,c=r.row,u="",d=this.viewportHelper.getCellValue(c,e);if(d){var f={defaultValue:d,readonly:!0,themeManager:this.table.themeManager};[Ac.MULTI_SELECT,Ac.SELECT].includes(e.type)?(f.field=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sw(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),u=e.color?"lake-table-card-column-select-tags":""):[Ac.DATE,Ac.CREATED_AT,Ac.UPDATED_AT].includes(e.type)?f.defaultValue=this.viewportHelper.getCellFormattedValue(c,e):Ac.IMAGE===e.type&&(f.size="small"),[Ac.CREATED_AT,Ac.UPDATED_AT].includes(e.type)&&(f.format="YYYY-MM-DD HH:mm:ss");var p=uw[e.type];n=l.a.createElement(p,a()({key:e.id},f))}else n=t?l.a.createElement("div",{className:"lake-table-card-column-empty-title"},_c("未命名记录")):" ";return d||i||t?l.a.createElement(l.a.Fragment,null,o&&this.renderField(e),l.a.createElement("div",{className:"lake-table-card-column lake-table-card-column-".concat(e.type," ").concat(t?"lake-table-card-column-index":""," ").concat(u)},n)):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.row,r=t.rowId,o=this.viewportHelper.isRowInSearch(n),i=this.viewportHelper.isSearchTarget(n),c=S()("lake-table-card-container",this.props.className,s()({searching:o,"search-target":i},"lake-table-card-row-".concat(n),!0)),u=Object.keys(this.props).filter((function(e){return e.startsWith("data-")})).reduce((function(t,n){return t[n]=e.props[n],t}),{});return l.a.createElement("div",a()({className:c,"data-row":n,"data-row-id":r,ref:this.cardRef,onClick:this.showRecord,onContextMenu:this.showContextMenu,style:this.props.style},u),this.renderColumns())}}]),n}(l.a.Component);s()(dw,"propTypes",{table:X.a.object,viewportHelper:X.a.object}),dw.defaultProps={showField:!1,showEmpty:!1},dw.propTypes={table:X.a.object.isRequired,viewportHelper:X.a.object.isRequired,style:X.a.object,row:X.a.number.isRequired,showField:X.a.bool,showEmpty:X.a.bool};var fw=function(e){g()(n,Ev);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r,o,a){var i;return d()(this,n),i=t.call(this,e,r,o),s()(m()(i),"viewportHelper",void 0),s()(m()(i),"createNode",(function(){i.node=document.createElement("div"),i.node.classList.add("sortable-placeholder"),i.node.style.position="absolute",i.node.style.backgroundColor="#096DD9",i.node.style.display="none",i.node.style.zIndex="999",i.node.style.borderRadius="2px",i.setWidth(i.width),i.setHeight(i.height),i.container.node.appendChild(i.node),i.show()})),s()(m()(i),"updatePosition",(function(e,t,n,r){var o,a;if(e){if(!i.controller.checkValid())return void i.hide();a=e.left-i.groupSpace/2,o=e.top}else{if(!t)return void i.hide();var l=i.controller.getNode().getElements().filter((function(e){return e.groupId===t.id})),c=l[l.length-1];c&&i.viewportHelper.isLastRowById(c.id)&&(o=c.top,a=c.left+c.width)}i.show(),i.setTop(o),i.setLeft(a)})),i.viewportHelper=a,i}return p()(n)}(),pw=p()((function e(t){var n=this;d()(this,e),s()(this,"container",void 0),s()(this,"viewportHelper",void 0),s()(this,"sortable",void 0),s()(this,"timerId",void 0),s()(this,"interval",void 0),s()(this,"triggerSize",void 0),s()(this,"updateScroll",(function(e,t){if(t){var r=t.getBoundingClientRect(),o=n.container.getBoundingClientRect(),a=n.viewportHelper.isScrollYAtTop(),i=n.viewportHelper.isScrollYAtBottom(),l=o.top+35,c=o.bottom,s={y:0},u={y:.5};r.top<l+n.triggerSize&&!a?(s.y=-1,u.y=Math.min(l+n.triggerSize-r.top,n.triggerSize)/n.triggerSize*10):r.bottom>c-n.triggerSize&&!i&&(s.y=1,u.y=Math.min(r.bottom-(c-n.triggerSize),n.triggerSize)/n.triggerSize*10),n.interval&&n.dispose();var d=u.y*s.y;if(d){var f=Date.now();n.interval=Vp((function e(){var t,r,o,a=(Date.now()-f)/2e3;a>1&&(a=1),n.viewportHelper.scrollBy(d),null===(t=n.sortable.sortController)||void 0===t||null===(r=t.placeholder)||void 0===r||r.hide(),null===(o=n.sortable.sortController)||void 0===o||o.refreshNode(),n.timerId&&clearTimeout(n.timerId),a<1&&(n.interval=Vp(e))}))}}})),s()(this,"dispose",(function(){Hp(n.interval),n.interval=null})),this.sortable=t,this.container=t.container,this.viewportHelper=t.viewportHelper,this.timerId=null,this.interval=null,this.triggerSize=1}));var hw=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r,o,a){var i,l,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return d()(this,n),l=t.call(this),s()(m()(l),"engine",void 0),s()(m()(l),"kernel",void 0),s()(m()(l),"container",void 0),s()(m()(l),"sortController",void 0),s()(m()(l),"viewportHelper",void 0),s()(m()(l),"targetNode",void 0),s()(m()(l),"isOuterScroller",void 0),s()(m()(l),"options",void 0),s()(m()(l),"sorting",!1),s()(m()(l),"reinit",(function(){l.dispose(),l.init()})),s()(m()(l),"createSort",$()((function(){l.viewportHelper.getViewData()&&l.viewportHelper.getViewData("type")===Gs.CARD&&(l.sortController&&l.sortController.dispose(),l.sortController=new _v({container:l.container,getNodes:l.getNodes,onSort:l.onSort,onSortStart:l.onSortStart,onSortMove:function(){},onSortStop:l.onSortStop,checkElement:l.checkElement,onDispose:l.onSortDispose,checkVisible:l.checkVisible,useAreaChecker:!0,createPlaceholder:l.createPlaceholder,scroller:!l.isOuterScroller&&new pw(m()(l)),isOuterScroller:l.isOuterScroller}))}),300)),s()(m()(l),"createPlaceholder",(function(e){return new fw(e,2,l.viewportHelper.cardHeight||0,l.viewportHelper)})),s()(m()(l),"checkVisible",(function(){return l.viewportHelper.getViewData("type")===Gs.CARD&&!l.kernel.readOnly})),s()(m()(l),"checkElement",(function(e,t){if(!t||!t.node)return!0;var n=t.node.getBoundingClientRect();return!(l.viewportHelper.isLastRow(e.id)&&n.left+n.width>e.rect.left+3*e.rect.width/4)})),s()(m()(l),"getNodes",(function(){var e=l.container.querySelectorAll(".lake-table-view-inner-container .lake-table-card-container"),t=l.container.getBoundingClientRect(),n=[];n.push({id:"group",type:vv,disabled:!0,rect:t});for(var r=0;r<e.length;r++){var o=e[r],a=o.getBoundingClientRect();n.push({id:o.dataset.rowId,type:mv,rect:{top:a.top,left:a.left,bottom:a.bottom,width:a.width,height:a.height},node:o,groupId:"group",sortable:l.viewportHelper.isSortable()})}return n})),s()(m()(l),"onSortStart",(function(){l.sorting=!0,l.targetNode=l.sortController.targetNode,l.targetNode&&l.targetNode.type===mv&&(l.targetNode.node.style.filter="opacity(0.4)"),l.container.style.cursor="grabbing"})),s()(m()(l),"onSortStop",(function(){l.container.style.cursor="default",l.targetNode&&(l.targetNode.node.style.filter=null)})),s()(m()(l),"onSort",(function(e,t,n,r,o,a,i){var c=n,s=null!=r?r:null;l.kernel.execute("moveRow",c,null,s,a)})),s()(m()(l),"onSortDispose",(function(){l.sorting=!1,l.container.style.cursor="default",l.targetNode&&(l.targetNode.node.style.filter=null)})),s()(m()(l),"dispose",(function(){l.sortController&&l.sortController.dispose(),Me()((i=m()(l),k()(n.prototype)),"dispose",i).call(i)})),l.engine=e,l.kernel=r,l.viewportHelper=a,l.container=o,l.options=c,l.isOuterScroller=c.isOuterScroller,l.init(),l}return p()(n,[{key:"init",value:function(){this.bindEvents(),this.createSort()}},{key:"bindEvents",value:function(){var e=this;this._register(mp(this.kernel,[gc.VIEW_CHANGED,gc.COL_CHANGED],(function(){e.createSort()}))),this._register(mp(this.engine,qs.SCROLL,(function(){var t;null===(t=e.sortController)||void 0===t||t.refreshNode()})))}}]),n}();var mw=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),(r=t.call(this,e)).state={},r.table=e.table,r.kernel=e.table.kernel,r.viewportHelper=e.viewportHelper,r}return p()(n,[{key:"componentDidMount",value:function(){var e=this;!this.kernel.readOnly&&this.props.draggable&&(this.cardSortable=new hw(this.table,this.kernel,this.table.container,this.viewportHelper,{isOuterScroller:this.props.isOuterScroller}),this._observer=new op(this.table.container),this._observer.startObserver(),this._observer.onDidChange=function(){e.cardSortable.reinit()})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.isOuterScroller!==this.props.isOuterScroller&&this.cardSortable&&(this.cardSortable.isOuterScroller=e.isOuterScroller)}},{key:"componentWillUnmount",value:function(){this.cardSortable&&(this._observer.dispose(),this.cardSortable.dispose(),this.cardSortable=null)}},{key:"render",value:function(){var e=this.viewportHelper,t=e.getViewData("rows"),n=e.getViewportData();if(!n)return null;for(var r=[],o=n.start;o<=n.end;o++)if(!t[o].hidden&&!t[o].filtered){var a=e.rowPositions[o],i=t[o].id;r.push(l.a.createElement(dw,{key:i,rowId:i,row:o,table:this.table,viewportHelper:this.viewportHelper,showField:e.getViewData("showField"),showEmpty:!0,style:{width:e.cardWidth,height:e.cardHeight,top:a.top,left:a.left}}))}return r}}]),n}(l.a.Component);function vw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}s()(mw,"propTypes",{table:X.a.object,viewportHelper:X.a.object,draggable:X.a.bool}),s()(mw,"defaultProps",{draggable:!0}),nc(".sortable-group-nodragger {\n  cursor: default;\n}\n");var gw=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"dispose",(function(){r.controller.targetNode&&(r.controller.targetNode.node.removeAttribute("data-dragging"),r.controller.targetNode.node.style.cursor=null)})),s()(m()(r),"reinit",$()((function(){r.controller&&r.container&&(r.controller.dispose(),r.initialize(),r.controller.refreshNode())}),100)),s()(m()(r),"onSortStart",(function(){r.controller.targetNode.node.setAttribute("data-dragging",!0),r.controller.targetNode.node.style.cursor="grabbing"})),s()(m()(r),"onSortStop",(function(){r.controller.targetNode.node.removeAttribute("data-dragging")})),s()(m()(r),"getNodes",(function(){var e=[];if(!r.container)return e;var t=r.container.querySelectorAll(".sortable-group"),n=r.container.querySelectorAll(".sortable-group-dragger"),o=r.container.querySelectorAll(".sortable-element"),a=me()(n).reduce((function(e,t){return e[t.dataset.sortableGroupId]={node:t,rect:r.getRect(t)},e}),{});return me()(t).forEach((function(t){var n;if(!r.controller||null===(n=r.controller.dragger)||void 0===n||!n.isDragger(t)){var o=t.dataset.sortableGroupId;e.push({id:o,type:vv,node:t,rect:r.getRect(t),sortable:"false"!==t.dataset.sortableGroupSortable,dragNode:a[o],scrollNode:t.querySelector(".sortable-group-scroller")})}})),me()(o).forEach((function(t){var n=t.dataset.sortableElementId,o=t.dataset.sortableGroupId;t.classList.contains("sortable-dragger")||e.push({id:n,type:mv,groupId:o,node:t,rect:r.getRect(t)})})),e})),s()(m()(r),"getRect",(function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e),r=parseInt(n.paddingLeft||0,10),o=parseInt(n.paddingTop||0,10);return{width:t.width-2*r,height:t.height-2*o,top:t.top+o,left:t.left+r,marginTop:parseInt(n.marginTop||0,10)+o,marginBottom:parseInt(n.marginBottom||0,10)+o}})),s()(m()(r),"refreshNodeWithDebounce",$()((function(){r.controller.sorting||r.controller&&r.controller.refreshNode()}),100)),r.isOuterScroller=e.isOuterScroller,r}return p()(n,[{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.controller)||void 0===e||e.dispose(),this.controller=null}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.isOuterScroller!==this.props.isOuterScroller&&this.controller&&(this.isOuterScroller=e.isOuterScroller)}},{key:"componentDidUpdate",value:function(){this.reinit()}},{key:"initialize",value:function(){var e=this;if(this.container=cv(Object(B.findDOMNode)(this)),this.container){this.controller=new _v({container:this.container,getNodes:this.getNodes,onSort:this.props.onSort,onSortStart:this.onSortStart,onSortMove:function(){},onSortStop:this.onSortStop,onDispose:this.dispose,disablePlaceholder:this.props.disablePlaceholder,isOuterScroller:this.isOuterScroller,checkVisible:function(e){return!e.target.closest(".sortable-group-nodragger")}});var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vw(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(this.container.querySelectorAll(".sortable-group-scroller"));try{for(n.s();!(t=n.n()).done;){var r=t.value;this.controller._register(mp(r,"scroll",(function(){e.refreshNodeWithDebounce()})))}}catch(e){n.e(e)}finally{n.f()}}}},{key:"render",value:function(){return this.refreshNodeWithDebounce(),l.a.createElement("div",null,this.props.children)}}]),n}(l.a.Component);function bw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bw(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}gw.proptTypes={pressThreshold:X.a.number};var ww=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"render",value:function(){var e=this;return l.a.Children.map(this.props.children,(function(t){return l.a.cloneElement(t,yw(yw({},t.props),{},{className:t.props.className+" sortable-element","data-sortable-element-id":e.props.id,"data-sortable-group-id":e.props.groupId}))}))}}]),n}(l.a.Component);function kw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kw(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ww.propTypes={id:X.a.oneOfType([X.a.number,X.a.string])};var Ew=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"render",value:function(){var e=this;return l.a.Children.map(this.props.children,(function(t){return l.a.cloneElement(t,xw(xw({},t.props),{},{className:t.props.className+" sortable-group","data-sortable-group-id":e.props.id,"data-sortable-group-sortable":e.props.sortable}))}))}}]),n}(l.a.Component);function Cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ow(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cw(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ew.defaultProps={sortable:!1},Ew.propTypes={id:X.a.oneOfType([X.a.number,X.a.string]),sortable:X.a.bool};var _w=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"render",value:function(){var e=this;return l.a.Children.map(this.props.children,(function(t){return l.a.cloneElement(t,Ow(Ow({},t.props),{},{className:t.props.className+" sortable-group-dragger","data-sortable-group-id":e.props.id}))}))}}]),n}(l.a.Component);function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sw(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}_w.NoDragger=function(e){var t=e.children;return t.type===l.a.Fragment&&(t=t.props.children),l.a.Children.map(t,(function(t){return l.a.cloneElement(t,Ow(Ow({},t.props),{},{className:t.props.className+" sortable-group-nodragger","data-sortable-group-id":e.id}))}))},_w.propTypes={id:X.a.oneOfType([X.a.number,X.a.string])};var jw=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"render",value:function(){var e=this;return l.a.Children.map(this.props.children,(function(t){return l.a.cloneElement(t,Rw(Rw({},t.props),{},{className:t.props.className+" sortable-group-scroller","data-sortable-group-id":e.props.id}))}))}}]),n}(l.a.Component);jw.propTypes={id:X.a.oneOfType([X.a.number,X.a.string])};var Aw,Tw=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onBodyClick",(function(e){for(var t=e.target;t!==document.body&&t;){if(t.classList.contains("input-item")||t.classList.contains("lake-table-colorpicker"))return;t=t.parentNode}r.submitOption()})),s()(m()(r),"onBodyKeydown",(function(e){27===e.keyCode&&r.props.onCancel()})),s()(m()(r),"onChangeOptionColor",(function(e){var t=r.state.option;t.color=e,r.setState({option:t}),r.inputRef.current.focus()})),s()(m()(r),"submitOption",(function(){var e=r.state.option,t=r.props.option,n=r.props.colConfigs.options.map((function(e){return e.value===t.value?null:e.value}));e.value?!e||t.value===e.value&&t.color===e.color?r.props.onChangeOption(null):n.includes(e.value)?(Xe.a.warning(_c("已存在该选项，不可重复创建！")),r.props.onChangeOption(null)):r.props.onChangeOption(e):(r.props.onChangeOption(null),Xe.a.warning(_c("选项名称不能为空")))})),s()(m()(r),"onInputChange",(function(e){var t=r.state.option;t.value=e.target.value,r.setState({option:t})})),r.state={},r.inputRef=l.a.createRef(),r.themeManager=e.themeManager,r}return p()(n,[{key:"componentDidMount",value:function(){this.setState({option:wc(this.props.option)}),document.body.addEventListener("click",this.onBodyClick),document.body.addEventListener("keydown",this.onBodyKeydown)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.onBodyClick),document.body.removeEventListener("keydown",this.onBodyKeydown)}},{key:"render",value:function(){var e=this.props,t=e.colConfigs,n=e.className,r=this.state.option;if(!r)return null;var o=null;return t.color&&(o=l.a.createElement(wt.a,{placement:"leftTop",overlayClassName:"lake-table-colorpicker",content:l.a.createElement(Dg,{engine:this.engine,colorSource:me()(Kh),activeColors:r.color,onSelect:this.onChangeOptionColor,themeManager:this.themeManager})},l.a.createElement("span",{className:"option-color",style:{background:r.color}}))),l.a.createElement("div",{className:"input-item ".concat(n||""),key:r.id,"data-draggable":"false"},o,l.a.createElement(ht.a,{ref:this.inputRef,autoFocus:!0,value:r.value,onChange:this.onInputChange,onPressEnter:this.submitOption}))}}]),n}(l.a.Component);function Lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lw(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}s()(Tw,"propTypes",{option:X.a.object,colConfigs:X.a.object,onChangeOption:X.a.func,themeManager:X.a.object}),Tw.defaultProps={onCancel:function(){},option:{}},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-kanban-container {\n  position: relative;\n  overflow-x: auto;\n  overflow-y: hidden;\n  height: 100%;\n  background: var(--yq-bg-tertiary);\n}\n.lake-table-kanban-container .lake-table-card-container {\n  position: static;\n  width: 100%;\n  padding: 1px;\n  border: 1px solid var(--yq-border-light);\n  display: block;\n  margin-bottom: 12px;\n}\n.lake-table-kanban-container .lake-table-card-container.searching {\n  border: 2px solid var(--yq-blue-6);\n  padding: 0;\n}\n.lake-table-kanban-container .input-item {\n  display: flex;\n  align-items: center;\n}\n.lake-table-kanban-container .input-item .option-color {\n  display: inline-block;\n  width: 18px;\n  height: 18px;\n  border-radius: 2px;\n  cursor: pointer;\n  margin-right: 8px;\n}\n.lake-table-kanban-container .input-item .ant-input {\n  width: 178px;\n}\n.lake-table-kanban-container .lake-table-card-column-textarea {\n  height: 24px;\n  -webkit-line-clamp: 1;\n}\n.lake-table-kanban-container .lake-table-card-column-index {\n  font-size: 14px;\n  height: auto;\n  -webkit-line-clamp: unset;\n}\n.lake-table-kanban-container .lake-table-card-column-index .lake-table-form-input-readonly,\n.lake-table-kanban-container .lake-table-card-column-index .lake-table-form-link-readonly,\n.lake-table-kanban-container .lake-table-card-column-index .lake-table-form-number-readonly,\n.lake-table-kanban-container .lake-table-card-column-index .lake-table-form-email-text {\n  word-break: break-all;\n}\n.lake-table-kanban-container .lake-table-form-select-select .lake-table-form-select-readonly {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.lake-table-kanban-container .sortable-group[data-dragging='true'] {\n  filter: opacity(0.4);\n}\n.lake-table-kanban-container .lake-table-card-column {\n  height: auto;\n  max-height: unset;\n}\n.lake-table-kanban-container::-webkit-scrollbar {\n  height: 8px;\n}\n.lake-table-kanban-container::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 10px;\n}\n.lake-table-kanban-group,\n.lake-table-kanban-add-group {\n  display: block;\n  position: absolute;\n  bottom: 10px;\n  border-radius: 4px;\n}\n.lake-table-kanban-group-header,\n.lake-table-kanban-add-group-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  user-select: none;\n}\n.lake-table-kanban-group-header .sortable-group-dragger,\n.lake-table-kanban-add-group-header .sortable-group-dragger {\n  cursor: grab;\n}\n.lake-table-kanban-group-rows,\n.lake-table-kanban-add-group-rows {\n  overflow-y: auto;\n  overflow-x: hidden;\n  height: calc(100% - 38px);\n}\n.lake-table-kanban-group-rows::-webkit-scrollbar,\n.lake-table-kanban-add-group-rows::-webkit-scrollbar {\n  width: 12px;\n}\n.lake-table-kanban-group-rows::-webkit-scrollbar-thumb,\n.lake-table-kanban-add-group-rows::-webkit-scrollbar-thumb {\n  background-color: var(--yq-bg-primary-hover);\n  background-clip: padding-box;\n  border: 3px solid rgba(0, 0, 0, 0);\n  border-radius: 6px;\n  min-height: 36px;\n  margin-left: 4px;\n}\n.lake-table-kanban-group-rows .sortable-element[data-dragging='true'],\n.lake-table-kanban-add-group-rows .sortable-element[data-dragging='true'] {\n  filter: opacity(0.4);\n}\n.lake-table-kanban-group-title,\n.lake-table-kanban-add-group-title {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--yq-text-primary);\n  overflow: hidden;\n  line-height: 32px;\n  height: 32px;\n  width: calc(100% - 54px);\n  display: flex;\n  align-items: center;\n}\n.lake-table-kanban-group-title-content,\n.lake-table-kanban-add-group-title-content {\n  float: left;\n  margin-right: 12px;\n  max-width: calc(100% - 44px);\n}\n.lake-table-kanban-group-title-content .ant-tag,\n.lake-table-kanban-add-group-title-content .ant-tag {\n  margin-top: 0;\n}\n.lake-table-kanban-group-title-content .lake-table-form-select-readonly,\n.lake-table-kanban-add-group-title-content .lake-table-form-select-readonly {\n  display: flex;\n}\n.lake-table-kanban-group-title-content .lake-table-form-select-readonly .ant-tag,\n.lake-table-kanban-add-group-title-content .lake-table-form-select-readonly .ant-tag {\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-table-kanban-group-title-content .lake-table-form-mention-readonly .lake-table-form-mention-tag-wrap,\n.lake-table-kanban-add-group-title-content .lake-table-form-mention-readonly .lake-table-form-mention-tag-wrap {\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: flex-start;\n}\n.lake-table-kanban-group-title-content .lake-table-form-mention-readonly .lake-table-form-mention-tag,\n.lake-table-kanban-add-group-title-content .lake-table-form-mention-readonly .lake-table-form-mention-tag {\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.lake-table-kanban-group-title-count,\n.lake-table-kanban-add-group-title-count {\n  color: var(--yq-text-caption);\n  font-weight: normal;\n}\n.lake-table-kanban-group-title .lake-table-form-select,\n.lake-table-kanban-add-group-title .lake-table-form-select {\n  margin-right: -5px;\n  cursor: pointer;\n}\n.lake-table-kanban-group-title-edit .lake-table-form-select-readonly .ant-tag-has-color,\n.lake-table-kanban-add-group-title-edit .lake-table-form-select-readonly .ant-tag-has-color {\n  cursor: pointer;\n}\n.lake-table-kanban-group-actions,\n.lake-table-kanban-add-group-actions {\n  display: flex;\n  align-items: center;\n}\n.lake-table-kanban-group-actions .lake-table-button,\n.lake-table-kanban-add-group-actions .lake-table-button {\n  height: 20px;\n  line-height: 20px;\n  min-width: 16px;\n  text-align: center;\n  padding: 0 1px;\n  margin: 0;\n  margin-left: 2px;\n  display: inline-block;\n  cursor: pointer;\n}\n.lake-table-kanban-group-actions .lake-table-button:hover,\n.lake-table-kanban-add-group-actions .lake-table-button:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-kanban-group-actions .lake-table-button .lake-icon,\n.lake-table-kanban-add-group-actions .lake-table-button .lake-icon {\n  font-size: 16px;\n}\n.lake-table-kanban-group-setting,\n.lake-table-kanban-add-group-setting {\n  padding-left: 4px;\n  margin-top: -15px;\n}\n.lake-table-kanban-group-setting > .ant-popover-content > .ant-popover-arrow,\n.lake-table-kanban-add-group-setting > .ant-popover-content > .ant-popover-arrow {\n  display: none;\n}\n.lake-table-kanban-group-setting .ant-menu,\n.lake-table-kanban-add-group-setting .ant-menu {\n  padding: 6px 0;\n}\n.lake-table-kanban-group-setting .ant-popover-inner,\n.lake-table-kanban-add-group-setting .ant-popover-inner {\n  overflow: hidden;\n}\n.lake-table-kanban-group-setting .ant-popover-inner-content,\n.lake-table-kanban-add-group-setting .ant-popover-inner-content {\n  padding: 0;\n  margin-top: -5px;\n}\n.lake-table-kanban-group-setting .ant-popover-content,\n.lake-table-kanban-add-group-setting .ant-popover-content {\n  min-width: 116px;\n}\n.lake-table-kanban-group-setting .ant-menu-item,\n.lake-table-kanban-add-group-setting .ant-menu-item {\n  height: 34px;\n  line-height: 34px;\n}\n.lake-table-kanban-group-setting .ant-menu-item-icon,\n.lake-table-kanban-add-group-setting .ant-menu-item-icon {\n  font-size: 16px;\n  vertical-align: -1px;\n}\n.lake-table-kanban-group[draggable='true'] .lake-table-kanban-group-header,\n.lake-table-kanban-add-group[draggable='true'] .lake-table-kanban-group-header,\n.lake-table-kanban-group[draggable='true'] .lake-table-kanban-group-title,\n.lake-table-kanban-add-group[draggable='true'] .lake-table-kanban-group-title {\n  cursor: grab;\n}\n.lake-table-kanban-group[draggable='true'] .lake-table-kanban-group-title-content,\n.lake-table-kanban-add-group[draggable='true'] .lake-table-kanban-group-title-content {\n  cursor: pointer;\n}\n.lake-table-kanban-add-group {\n  color: var(--yq-text-body);\n  font-weight: normal;\n}\n.lake-table-kanban-add-group .lake-table-button {\n  height: 24px;\n  line-height: 24px;\n  text-align: center;\n  padding: 0 2px;\n  margin: 0;\n  display: flex;\n}\n.lake-table-kanban-add-group .lake-table-button:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-kanban-add-group .lake-table-button .lake-icon {\n  font-size: 16px;\n  margin-right: 4px;\n  vertical-align: -1px;\n}\n.lake-table-kanban-empty {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n}\n.lake-table-kanban-empty-body {\n  background: url(https://gw.alipayobjects.com/zos/bmw-prod/7f8a83a3-ddb7-4397-ac98-9661128681a2.svg) no-repeat top center;\n  padding-top: 130px;\n  text-align: center;\n}\n.lake-table-kanban-empty-body h1,\n.lake-table-kanban-empty-body p {\n  font-size: 16px;\n}\n.lake-table-kanban-empty-body p {\n  margin: 5px 0 15px;\n}\n.lake-table-kanban .lake-table-form-mention {\n  width: 178px;\n}\n");var Pw=(s()(Aw={},Ac.SELECT,Vg),s()(Aw,Ac.MENTION,Mb),Aw),Mw=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"addGroupRef",l.a.createRef()),s()(m()(r),"storeSrv",void 0),s()(m()(r),"onEditGroup",(function(e){if(!r.kernel.readOnly){var t,n=r.viewportHelper.getGroupColConfig();t=n.type===Ac.SELECT?wc(n.options.find((function(t){return t.value===e.value}))):wc(e.titleValue),r.setState({editingGroupKey:e.value,option:t})}})),s()(m()(r),"onRemoveGroup",(function(e){if(!r.kernel.readOnly){var t=r.viewportHelper.getGroupColConfig();r.kernel.execute("removeGroupItem",e.value,e.rows,t),r.kernel.emit(gc.REMOVE_GROUP,e.value)}})),s()(m()(r),"onAddGroup",(function(){var e,t=r.viewportHelper.getGroupColConfig();e=t.type===Ac.SELECT?r.getNewSelectOption(t):[],r.setState({addingGroup:!0,option:e})})),s()(m()(r),"onCreateGroupCol",(function(){var e=r.tableModel.getActiveView();r.kernel.kanbanService.createDefaultGroupCol(e.get("id")),r.kernel.execute("activeView",e.get("id"))})),s()(m()(r),"onAddRecord",(function(e){var t=wc(e.titleValue),n={};n[r.viewportHelper.getGroupColConfig().id]={value:t};var o=r.kernel.execute("insertRow",0,n,e.value),a=r.viewportHelper.getViewData("rows").findIndex((function(e){return e.id===o[1]}));r.props.table.emit(qs.SHOW_ROW_EDITOR,{mode:"edit",row:a,showAddNext:!0}),setTimeout((function(){r.viewportHelper.scrollToCard(a)}),200)})),s()(m()(r),"onClickSetting",(function(e,t){switch(t.domEvent.stopPropagation(),t.key){case"edit":r.onEditGroup(e);break;case"remove":r.onRemoveGroup(e)}})),s()(m()(r),"onSort",(function(e,t,n,o,a,i,l){if(t===mv){var c=r.tableModel.getActiveView(),s=c.get("rows")[n].id,u=o?c.get("rows")[o].id:null,d=i,f=r.viewportHelper.getGroupColConfig();r.kernel.execute("moveRow",s,f.id,u,d)}else if(t===vv){var p=r.viewportHelper.getViewData("groupData"),h=p.findIndex((function(e){return e.value===a})),m=p.findIndex((function(e){return e.value===i}));l&&(m+=1);var v=r.viewportHelper.getGroupColConfig();r.kernel.execute("moveGroupItem",h,m,v)}})),s()(m()(r),"onUpdateGroup",(function(e,t){var n=r.viewportHelper.getGroupColConfig();if(e){if(n.type===Ac.MENTION){if(0===e.length)return r.onRemoveGroup(t),void r.closeGroupEditor();if(r.isDuplicateMention(e,r.state.editingGroupKey))return void r.closeGroupEditor()}r.props.table.kernel.execute("updateGroupItem",r.state.editingGroupKey,e,n),r.closeGroupEditor()}else r.closeGroupEditor()})),s()(m()(r),"closeGroupEditor",(function(){r.setState({editingGroupKey:null,addingGroup:!1,option:null})})),s()(m()(r),"addMentionGroup",(function(e){e&&0!==e.length?r.isDuplicateMention(e,null)||r.addSelectGroup(e):r.closeGroupEditor()})),s()(m()(r),"addSelectGroup",(function(e){if(r.closeGroupEditor(),e){var t=r.viewportHelper.getGroupColConfig();r.props.table.kernel.execute("addGroupItem",e,t),setTimeout((function(){var e;null===(e=r.addGroupRef.current)||void 0===e||e.scrollIntoView({block:"nearest"})}),100)}})),s()(m()(r),"getAddGroupDisable",(function(){var e;return je.ua.mobile?r.table.readOnly&&!(null!==(e=r.table.abilities)&&void 0!==e&&e.update):r.table.readOnly})),r.state={},r.table=e.table,r.kernel=e.table.kernel,r.tableModel=r.kernel.tableModel,r.kanbanService=r.table.kanbanService,r.viewportHelper=e.viewportHelper,r.sortableRef=l.a.createRef(),r.state={editingGroupKey:null,addingGroup:null,settingVisible:{}},r}return p()(n,[{key:"themeManager",get:function(){return this.props.table.themeManager}},{key:"componentDidMount",value:function(){var e=this;this._observer=new op(this.table.container),this._observer.startObserver(),this._observer.onDidChange=function(){var t,n;null===(t=e.sortableRef)||void 0===t||null===(n=t.current)||void 0===n||n.reinit()}}},{key:"componentWillUnmount",value:function(){this._observer.dispose()}},{key:"renderAddRecord",value:function(e){var t=this;return l.a.createElement(dt.a,{title:_c("添加记录"),visible:this.state.visible,placement:"card"===name?"bottomRight":"bottom",overlayClassName:"lake-table-toolbar-tooltip"},l.a.createElement("button",{className:"lake-table-button",onClick:function(){return t.onAddRecord(e)}},l.a.createElement("span",{className:"lake-icon lake-icon-table-plus"})))}},{key:"onVisibleChange",value:function(e,t){var n=this.state.settingVisible;Object.values(n).forEach((function(e){n[e]=!1})),n[t.value]=e,this.setState({settingVisible:n})}},{key:"renderGroupSetting",value:function(e){var t=this,n=[{key:"edit",name:this.viewportHelper.getGroupColConfig().type===Ac.MENTION?_c("修改分组人员"):_c("修改分组"),icon:l.a.createElement("span",{className:"lake-icon lake-icon-edit-new"})},{key:"remove",name:_c("删除分组"),icon:l.a.createElement("span",{className:"lake-icon lake-icon-table-delete"})}];return l.a.createElement(wt.a,{overlayClassName:"lake-table-kanban-group-setting",content:l.a.createElement(yt.a,{onClick:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];t.onClickSetting.apply(t,[e].concat(r)),t.onVisibleChange(!1,e)}},n.map((function(e){return l.a.createElement(yt.a.Item,{key:e.key,icon:e.icon},e.name)}))),trigger:"click",placement:"bottomRight",visible:this.state.settingVisible[e.value],onClick:function(e){return e.stopPropagation()},onVisibleChange:function(n){return t.onVisibleChange(n,e)}},l.a.createElement("button",{className:"lake-table-button"},l.a.createElement("span",{className:"lake-icon lake-icon-table-dot"})))}},{key:"isDuplicateMention",value:function(e,t){var n=this.viewportHelper.getViewData("groupValueMap"),r=e.map((function(e){return e.name})).join(",");return r===t||void 0!==n[r]&&(Xe.a.warning(_c("已存在该人员，不可重复创建！")),!0)}},{key:"renderGroupTitle",value:function(e,t){var n,r=this,o=this.viewportHelper.getGroupColConfig(),a=e.titleValue;if(this.state.editingGroupKey===e.value)n=o.type===Ac.SELECT?l.a.createElement(Tw,{option:this.state.option,colConfigs:o,onChangeOption:function(t){return r.onUpdateGroup(t,e)},onCancel:this.closeGroupEditor,themeManager:this.themeManager}):this.renderMentionEditable((function(t){return r.onUpdateGroup(t,e)}));else{var i=Pw[o.type],c=a&&l.a.createElement(i,{onClickItem:this.kernel.readOnly?null:function(){c&&r.onEditGroup(e)},defaultValue:a,readonly:!0,field:o,themeManager:this.table.themeManager,className:this.kernel.readOnly?"":"lake-table-kanban-group-title-edit"});n=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"lake-table-kanban-group-title-content",onClick:this.kernel.readOnly?null:function(){c&&r.onEditGroup(e)}},c||_c("未分组")),l.a.createElement("span",{className:"lake-table-kanban-group-title-count"},t))}return this.kernel.readOnly||this.viewportHelper.isUngrouped(e)?l.a.createElement("div",{className:"lake-table-kanban-group-title"},n):l.a.createElement(_w,{id:e.value},l.a.createElement("div",{className:"lake-table-kanban-group-title"},l.a.createElement(_w.NoDragger,{id:e.value},n)))}},{key:"renderGroups",value:function(){var e=this,t=this.viewportHelper.getViewData("groupData"),n=this.table.theme.kanbanGroup,r=n.groupTop,o=n.groupPaddingTop,a=n.groupPaddingBottom,i=n.groupPaddingLeft,c=n.groupPaddingRight,s=n.headerHeight,u=n.headerMarginBottom,d=n.groupItemWidth;return t.map((function(t){if(e.viewportHelper.isEmptyUngrouped(t))return null;var n=e.viewportHelper.getGroupPosition(t),f=0,p=t.rows.map((function(n){var r=e.viewportHelper.getRowIndexById(n);return isNaN(r)||e.viewportHelper.isFilteredRow(r)?null:(f++,l.a.createElement(ww,{key:n,id:r,groupId:t.value},l.a.createElement(dw,{key:"".concat(r,"-").concat(t.value),row:r,table:e.table,viewportHelper:e.viewportHelper,showField:e.viewportHelper.getViewData("showField")})))}));return l.a.createElement(Ew,{key:t.value,id:t.value,sortable:!e.viewportHelper.isUngrouped(t)},l.a.createElement("div",{className:"lake-table-kanban-group",style:Dw(Dw({},n),{},{top:r,width:d,paddingTop:o,paddingBottom:a,paddingLeft:i,paddingRight:c})},l.a.createElement("div",{className:"lake-table-kanban-group-header",style:{height:s,marginBottom:u}},e.renderGroupTitle(t,f),!e.kernel.readOnly&&l.a.createElement("div",{className:"lake-table-kanban-group-actions"},e.renderAddRecord(t),t.value&&e.renderGroupSetting(t))),l.a.createElement(jw,{id:t.value},l.a.createElement("div",{className:"lake-table-kanban-group-rows"},p))))}))}},{key:"renderAddGroup",value:function(){var e=this,t=this.viewportHelper.getAddGroupPostion(),n=this.table.theme.kanbanGroup,r=n.groupTop,o=n.groupPaddingTop,a=n.groupPaddingBottom,i=n.groupPaddingLeft,c=n.groupPaddingRight,s=n.headerHeight,u=n.headerMarginBottom,d=n.addGroupWidth,f=l.a.createElement("div",{className:"lake-table-kanban-group-title"},l.a.createElement("button",{className:"lake-table-button",onClick:function(){return e.onAddGroup()}},l.a.createElement("span",{className:"lake-icon lake-icon-table-plus"}),_c("新建分组")));if(this.state.addingGroup){var p=this.viewportHelper.getGroupColConfig();p.type===Ac.SELECT&&(f=l.a.createElement(Tw,{option:this.state.option,colConfigs:p,onChangeOption:this.addSelectGroup,onCancel:this.closeGroupEditor})),p.type===Ac.MENTION&&(f=this.renderMentionEditable(this.addMentionGroup))}return l.a.createElement("div",{className:"lake-table-kanban-add-group",style:Dw(Dw({},t),{},{top:r,width:d,paddingTop:o,paddingBottom:a,paddingLeft:i,paddingRight:c})},l.a.createElement("div",{className:"lake-table-kanban-group-header",ref:this.addGroupRef,style:{height:s,marginBottom:u}},f))}},{key:"renderMentionEditable",value:function(e){var t=this.props.table,n=this.props.table.kernel.options,r=n.webProxy,o=n.docId,a=n.docType;return l.a.createElement(Mb,{webProxy:r,docId:o,docType:a,defaultList:t.options&&t.options.mention||{defaultList:[]},defaultValue:this.state.option,readonly:!1,defaultOpen:!0,focus:!0,onBlur:e})}},{key:"getNewSelectOption",value:function(e){var t=e.options,n={id:fs(6)};if(e.color){var r=t.length>0?t[t.length-1].color:"";n.color=Jh.getNextColor(r)}return n.value="",n}},{key:"renderEmpty",value:function(){return l.a.createElement("div",{className:"lake-table-kanban-empty"},l.a.createElement("div",{className:"lake-table-kanban-empty-body"},l.a.createElement("h1",null,_c("看板暂无分组")),l.a.createElement("p",null,_c("可以快速新建一个单选列进行分组")),l.a.createElement(ft.a,{type:"primary",onClick:this.onCreateGroupCol,disabled:this.getAddGroupDisable()},_c("新建分组"))))}},{key:"renderContent",value:function(){var e=this.props,t=e.draggable,n=e.isOuterScroller;return t?l.a.createElement(l.a.Fragment,null,l.a.createElement(gw,{onSort:this.onSort,ref:this.sortableRef,container:this.table.container,isOuterScroller:n},this.renderGroups()),this.renderAddGroup()):l.a.createElement(l.a.Fragment,null,this.renderGroups(),this.renderAddGroup())}},{key:"render",value:function(){return this.viewportHelper.getGroupColConfig()?l.a.createElement("div",{className:"lake-table-kanban-container"},l.a.createElement("div",{style:{width:this.viewportHelper.getTotalWidth()}},this.kernel.readOnly?this.renderGroups():this.renderContent())):l.a.createElement("div",{className:"lake-table-kanban-container"},this.renderEmpty())}}]),n}(l.a.Component);s()(Mw,"propTypes",{table:X.a.object,viewportHelper:X.a.object,draggable:X.a.bool}),s()(Mw,"defaultProps",{draggable:!0});var Nw=function(){function e(t,n){var r=this;d()(this,e),s()(this,"_moving",!1),s()(this,"smooth",void 0),s()(this,"speed",void 0),s()(this,"scroller",void 0),s()(this,"framer",void 0),s()(this,"getValue",(function(e){return r.scroller.getScroll()+e*r.speed})),s()(this,"setValue",(function(e){r._moving=!0;var t=r.scroller.getScroll(),n=(e-t)/r.smooth,o=t+n;r.scroller.setScroll(o),Math.abs(n)>.5?r.framer=Vp((function(){return r.setValue(o)})):(Hp(r.framer),r._moving=!1)})),this.smooth=(null==n?void 0:n.smooth)||14,this.speed=(null==n?void 0:n.speed)||80,this.scroller=t}return p()(e,[{key:"isMoving",get:function(){return this._moving}}]),e}(),Iw=function(){function e(t){var n=this;d()(this,e),s()(this,"_moving",!1),s()(this,"scroller",void 0),s()(this,"framer",void 0),s()(this,"getValue",(function(e){return n.scroller.getScroll()+e})),s()(this,"setValue",(function(e){n._moving=!0,n.scroller.setScroll(e),n._moving=!1})),this.scroller=t}return p()(e,[{key:"isMoving",get:function(){return this._moving}}]),e}();var Fw,Bw=function(e){g()(n,rp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e,r,o){var a;return d()(this,n),a=t.call(this),s()(m()(a),"container",void 0),s()(m()(a),"el",void 0),s()(m()(a),"behavior",void 0),s()(m()(a),"behaviorType",void 0),s()(m()(a),"onScroll",(function(e){e.preventDefault();var t=a.normalize(e);if(t){var n=a.behavior.getValue(t);n=Math.max(0,Math.min(n,a.el.scrollHeight-a.el.clientHeight)),a.behavior.isMoving||a.behavior.setValue(n)}})),s()(m()(a),"normalize",(function(e){var t;return isNaN(e.wheelDelta)&&(t=e.wheelDelta?e.wheelDelta/120:-(e.detail/3||0)),isNaN(e.deltaY)?t:e.deltaY})),a.behaviorType=(null==o?void 0:o.behavior)||"auto",a.container=e,a.el=r,a.bindEvents(),a}return p()(n,[{key:"bindEvents",value:function(){this.behavior="smooth"===this.behaviorType?new Nw(this):new Iw(this),this._register(mp(this.container,"wheel",this.onScroll)),this._register(mp(this.container,"DOMMouseScroll",this.onScroll))}},{key:"setScroll",value:function(e){this.el.scrollTop=e}},{key:"getScroll",value:function(){return this.el.scrollTop}}]),n}();var Vw=(s()(Fw={},Gs.CARD,iw(mw)),s()(Fw,Gs.KANBAN,iw(Mw)),Fw),Hw=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onResize",(function(){r.resizing||(r.resizing=!0,r.setState({resizing:!0}),r.resizeTimer=setTimeout((function(){r.resizing=!1,r.resize()}),100))})),s()(m()(r),"refresh",(function(){var e=r.props.table.kernel.tableModel.getActiveView();e&&e.type===r.state.viewType?r.setState({scrollX:e.get("scrollX")||0,scrollY:e.get("scrollY")||0,visible:!0},(function(){r.wrapper.current&&(r.wrapper.current.parentNode.scrollTop=e.get("scrollY")||0)})):r.setState({visible:!1})})),s()(m()(r),"onViewChange",(function(e){r.scroller&&(r.scroller.dispose(),r.scroller=null);var t=r.props.table,n=t.kernel.tableModel.getView(e);n&&([Gs.CARD,Gs.KANBAN].includes(n.type)?r.setState({visible:!0,viewType:n.type},(function(){if(n.type===Gs.CARD&&r.props.handleScrollEvent){var e=t.viewManager.getDom();r.scroller=new Bw(t.container,e)}r.refresh()})):r.setState({visible:!1}))})),r.state={visible:!1,scrollY:0,viewType:null,resizing:!1},r.container=r.props.table.container,r}return p()(n,[{key:"componentDidMount",value:function(){var e=this.props.table;this.wrapper=l.a.createRef(),e.on(qs.SCROLL,this.refresh),e.on(qs.DRAW_DOM,this.refresh),e.on(qs.RESIZE,this.onResize),e.kernel.on(gc.VIEW_CHANGED,this.onViewChange)}},{key:"componentWillUnmount",value:function(){this.scroller&&(this.scroller.dispose(),this.scroller=null)}},{key:"resize",value:function(){this.setState({resize:!1}),this.refresh()}},{key:"draggable",get:function(){switch(this.state.viewType){case Gs.CARD:return this.props.cardDraggable;case Gs.KANBAN:return this.props.kanbanDraggable;default:return!0}}},{key:"render",value:function(){var e=this.props.table,t=this.state,n=t.visible,r=t.viewType;if(!n)return null;var o=e.viewManager.getViewRenderer().viewportHelper,a=o.getContainerSize(),i=a.width,c=a.height,s=Vw[r],u=e.kernel.readOnly;if(!o.isDataReady())return null;var d=this.container.querySelector(".lake-table-dom-renderer");return d?V.a.createPortal(l.a.createElement("div",{className:S()("lake-table-view-inner-container",{"lake-table-view-readonly":u}),style:{width:i,height:c},onContextMenu:function(e){return e.preventDefault()},ref:this.wrapper},l.a.createElement(s,{table:this.props.table,viewportHelper:o,isOuterScroller:!this.props.handleScrollEvent,draggable:this.draggable})),d):null}}]),n}(l.a.Component);s()(Hw,"propTypes",{table:X.a.object,handleScrollEvent:X.a.bool,kanbanDraggable:X.a.bool,cardDraggable:X.a.bool}),s()(Hw,"defaultProps",{handleScrollEvent:!0,kanbanDraggable:!0,cardDraggable:!0}),Hw.defaultProps={handleScrollEvent:!0},Hw.propTypes={handleScrollEvent:X.a.bool};var zw=i.createContext({injector:null});zw.displayName="TableDiContext";var qw=zw.Provider;function Uw(){var e=i.useContext(zw);if(!e.injector)throw new Error('"useInjector" is being used outside of the TableDiContext');return e.injector}zw.Consumer;var Gw=function(){function e(){d()(this,e),s()(this,"resolvedDependencies",new Map)}return p()(e,[{key:"dispose",value:function(){me()(this.resolvedDependencies.values()).forEach((function(e){e.forEach((function(e){var t;(t=e)&&"function"==typeof t.dispose&&e.dispose()}))})),this.resolvedDependencies.clear()}},{key:"has",value:function(e){return this.resolvedDependencies.has(e)}},{key:"get",value:function(e){var t=this.resolvedDependencies.get(e);if(!t)throw new Error("Cannot find resolvedDep BY "+e);return t[0]}},{key:"add",value:function(e,t){var n=this.resolvedDependencies.get(e);void 0===n&&(n=[],this.resolvedDependencies.set(e,n)),n.push(t)}}]),e}();function Ww(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yw=function(){function e(t){d()(this,e),s()(this,"resolvedDepCollection",new Gw),this.resolvedDepCollection=new Gw;var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ww(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ww(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,a=ie()(o,2),i=a[0],l=a[1];i&&this.resolvedDepCollection.add(i,l)}}catch(e){r.e(e)}finally{r.f()}}return p()(e,[{key:"dispose",value:function(){this.resolvedDepCollection.dispose()}},{key:"get",value:function(e){return this._get(e).useClassInstance}},{key:"_get",value:function(e){if(this.resolvedDepCollection.has(e))return this.resolvedDepCollection.get(e);throw new Error("Cannot find resolvedDep BY "+e)}}]),e}(),$w=new Set;function Kw(e){return $w.has(e)?console.error('tokenId "'.concat(e,'" already exists.')):$w.add(e),e}var Xw=Kw("storeService"),Zw=function(){function e(t,n){d()(this,e),s()(this,"_editor",void 0),s()(this,"_kernel",void 0),s()(this,"_tableModel",void 0),s()(this,"updated$",new my),s()(this,"editorEnv",void 0),this.attachEditor(t,n)}return p()(e,[{key:"attachEditor",value:function(e,t){var n,r=this;this._editor=e,this._kernel=e.kernel,this._tableModel=null===(n=e.kernel)||void 0===n?void 0:n.tableModel,this.editorEnv=t,this._kernel.on(gc.DATA_LOADED,(function(){return r.__updateNotify()}))}},{key:"fire",value:function(e){for(var t,n=Object.values(qs).includes(e),r=Object.values(gc).includes(e),o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];if(r)(t=this._kernel).execute.apply(t,[e].concat(a));else if(n){var l;(l=this._editor).emit.apply(l,[e].concat(a))}}},{key:"__updateNotify",value:function(){this.updated$.next()}}]),e}();function Qw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Jw=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onTableReady",(function(e){var t=r.props,n=t.onLoad,o=t.onSave,a=t.onChange,i=t.onMount,l=r.props.mention||{defaultList:[]};e.locale=r.locale,e.focus(),e.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qw(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({image:r.props.image,file:r.props.file,mention:l},e.options),e.on(qs.SAVE,(function(){o&&o()})),e.on(qs.CHANGED,(function(){a&&a()})),n&&n(e),"true"===localStorage.__table_debug&&(window.__table=e),i(e),r.setState({table:e},(function(){return r.initWorkbench()}))})),s()(m()(r),"renderWorkbenchTableCore",(function(){if(r.state.table&&r.injector){var e=r.state.table,t=r.props.editorEnv.isReadOnly,n=r.props,o=n.yScrollEnable,a=n.xScrollEnable;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Jy,{table:e}),l.a.createElement(tw,{table:e}),l.a.createElement(Zy,{table:e,xScrollEnable:a,yScrollEnable:o}),l.a.createElement(ow,{table:e,readOnly:t}),l.a.createElement(Hw,{table:e,handleScrollEvent:r.props.handleScrollEvent,kanbanDraggable:r.props.kanbanDraggable,cardDraggable:r.props.cardDraggable}))}})),s()(m()(r),"renderWorkbenchOutside",(function(){if(r.state.table&&r.injector){var e=r.state.table;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cy,{table:e}),l.a.createElement(lg,{table:e}),l.a.createElement($y,{table:e}),Ub.render(e,"edit"),Cb.render(e,"edit"))}})),r.state={editor:null},r.injector=null,r}return p()(n,[{key:"initWorkbench",value:function(){this.state.table&&(this.storeSrv=new Zw(this.state.table,this.props.editorEnv),this.injector=new Yw([[Xw,{useClassInstance:this.storeSrv}]]),this.forceUpdate())}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.ot,r=e.lang,o=e.disableHash,a=e.webProxy,i=e.webSdk,c=e.mention,s=e.docId,u=e.abilities,d=e.docType,f=e.type,p=e.maxRecordCount,h=e.renderConfig,m=e.themeManager,v=this.injector;return l.a.createElement(qw,{value:{injector:v}},l.a.createElement("div",{className:"lake-table-editor"},l.a.createElement(ig,{docId:s,docType:d,type:f,value:t,disableHash:o,readOnly:!1,ot:n,lang:r,webProxy:a,webSdk:i,mention:c,abilities:u,themeManager:m,onTableReady:this.onTableReady,maxRecordCount:p,renderConfig:h},this.renderWorkbenchTableCore()),this.renderWorkbenchOutside()))}}]),n}(l.a.Component);s()(Jw,"propTypes",{lang:X.a.string,onLoad:X.a.func,image:X.a.object,file:X.a.object,mention:X.a.object,data:X.a.object,docId:X.a.number,docType:X.a.string,type:X.a.string,webProxy:X.a.object,webSdk:X.a.object,abilities:X.a.object,ot:X.a.bool,disableHash:X.a.bool,onSave:X.a.func,onChange:X.a.func,records:X.a.array,onMount:X.a.func,maxRecordCount:X.a.number,renderConfig:X.a.object,themeManger:X.a.object,handleScrollEvent:X.a.bool,xScrollEnable:X.a.bool,yScrollEnable:X.a.bool,kanbanDraggable:X.a.bool,cardDraggable:X.a.bool,editorEnv:X.a.object}),s()(Jw,"defaultProps",{lang:"zh-cn",image:{uploadAction:"/api/upload/attach?ctoken=foo&type=image"},file:{uploadAction:"/api/upload/attach?ctoken=foo&type=attachment"}});var ek=function(e){g()(r,en);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(r);function r(){var e;d()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o)),s()(m()(e),"editor",void 0),s()(m()(e),"_$mountRoot",void 0),s()(m()(e),"_onEditorMount",(function(t){e.editor=t})),e}return p()(r,[{key:"attachEditor",value:(t=E()(O.a.mark((function e(t){var n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._$mountRoot=t,e.next=3,V.a.render(l.a.createElement(Jw,a()({},this.args,{onMount:function(e){return n._onEditorMount(e)}})),this._$mountRoot);case 3:return e.abrupt("return",this.editor);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){var e;this._$mountRoot&&V.a.unmountComponentAtNode(this._$mountRoot),null===(e=this.editor)||void 0===e||e.destroy()}}]),r}();var tk=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","addRecord"),s()(m()(e),"getTooltip",(function(){if(e.currentRecordCount>=e.maxRecordCount)return _c("已达最大记录限制")})),s()(m()(e),"_handleDisable",(function(){return e.currentRecordCount>=e.maxRecordCount})),s()(m()(e),"_onToolbarButtonClick",(function(){var t=m()(e).editor;e.editor.readOnly||t.emit(qs.SHOW_ROW_EDITOR,{mode:"create"})})),e}return p()(n,[{key:"registerToolbarItem",value:function(){return{title:_c("添加记录"),tooltip:this.getTooltip,icon:"lake-icon lake-icon-table-plus",onClick:this._onToolbarButtonClick,disable:this._handleDisable}}},{key:"kernel",get:function(){return this.editor.kernel}},{key:"maxRecordCount",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.options.maxRecordCount}},{key:"currentRecordCount",get:function(){var e,t,n;return null===(e=this.kernel)||void 0===e||null===(t=e.tableModel)||void 0===t||null===(n=t.recordsModel)||void 0===n?void 0:n.recordCount}}]),n}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-create-container {\n  padding: 24px 24px 0 24px;\n  text-align: center;\n}\n.lake-table-form-create-add-desc {\n  width: 282px;\n  padding: 0 6px;\n  margin: 20px 0;\n  color: var(--yq-text-primary);\n}\n.lake-table-form-create-add {\n  text-align: center;\n  margin: 16px 0;\n}\n");var nk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onCreate",E()(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.kernel.execute("insertForm"),r.props.onCreate();case 2:case"end":return e.stop()}}),e)})))),r.kernel=r.props.table.kernel,r}return p()(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"lake-table-form-create-container"},l.a.createElement("div",null,l.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*fH-gQbQajwgAAAAAAAAAAAAAARQnAQ",width:"142",height:"92"})),l.a.createElement("p",{className:"lake-table-form-create-add-desc"},_c("可用于问卷调查、活动组织、登记报名等信息收集与整理场景。")),l.a.createElement("div",{className:"lake-table-form-create-add"},l.a.createElement(ft.a,{type:"primary",onClick:this.onCreate},_c("生成新表单"))))}}]),n}(l.a.Component);s()(nk,"propTypes",{table:X.a.object,onCreate:X.a.func}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-share-link {\n  padding: 0 24px;\n  margin-bottom: 14px;\n}\n.lake-table-form-share-link-head {\n  font-size: 16px;\n  font-weight: 500;\n  color: var(--yq-text-primary);\n  margin-top: 10px;\n}\n.lake-table-form-share-link-view-head {\n  font-size: 16px;\n  font-weight: 500;\n  color: var(--yq-text-primary);\n  background-color: var(--yq-bg-tertiary);\n  padding: 10px 15px;\n  border-radius: 2px;\n  margin-top: 10px;\n}\n.lake-table-form-share-link-title {\n  margin-top: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: var(--yq-text-body);\n}\n.lake-table-form-share-link-content {\n  padding: 22px 0 0;\n}\n.lake-table-form-share-link-content input {\n  width: 290px;\n}\n.lake-table-form-share-link-input {\n  width: 280px;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border-right: none;\n}\n.lake-table-form-share-link-qrcode {\n  color: var(--yq-text-body);\n  margin-top: 6px;\n  padding-top: 20px;\n}\n.lake-table-form-share-link-qrcode img {\n  width: 83px;\n}\n.lake-table-form-share-link-qrcode span {\n  margin-left: 26px;\n}\n.lake-table-form-share-link-unlink {\n  color: var(--yq-text-primary);\n  display: flex;\n  align-items: center;\n}\n.lake-table-form-share-link-unlink button {\n  margin-left: 6px;\n}\n");var rk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"copyLink",(function(e){e.preventDefault(),Ht()(r.showUrl),Xe.a.success({content:_c("复制成功"),style:{zIndex:1050}})})),r.state={qrcode:null},r.showUrl="".concat(location.origin).concat(r.props.url),r}return p()(n,[{key:"componentDidMount",value:function(){var e=this;Bt.a.toDataURL(this.showUrl,{margin:0},(function(t,n){e.setState({qrcode:n})}))}},{key:"renderAction",value:function(){var e=this.props,t=e.abilities,n=e.onDisable,r=e.bordered;if(!t.update)return null;var o=null;return r&&(o={borderTop:"1px solid #E9E9E9",paddingTop:20}),l.a.createElement("div",{className:"lake-table-form-share-link-title",style:o},l.a.createElement("div",null,_c("获得链接的所有人，可填写并提交表单")),l.a.createElement("span",{className:"lake-table-form-share-link-unlink"},_c("停止收集"),l.a.createElement(It.a,{defaultChecked:!0,onChange:n})))}},{key:"render",value:function(){var e=this.props.abilities;return l.a.createElement("div",{className:"lake-table-form-share-link"},this.renderAction(),l.a.createElement("div",{className:"lake-table-form-share-link-content"},l.a.createElement(ft.a.Group,null,l.a.createElement(ht.a,{value:this.showUrl,disabled:!0,className:"lake-table-form-share-link-input"}),l.a.createElement(ft.a,{type:"primary",onClick:this.copyLink,className:"lake-table-form-share-link-btn"},_c("复制填写链接"))),l.a.createElement("div",{className:"lake-table-form-share-link-qrcode"},this.state.qrcode?l.a.createElement("img",{src:this.state.qrcode}):l.a.createElement("span",null),l.a.createElement("span",null,_c("使用钉钉扫码$1",e.update?_c("分享"):_c("打开"))))))}}]),n}(l.a.Component);rk.propTypes={url:X.a.string,bordered:X.a.bool,locale:X.a.object,onDisable:X.a.func},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-item {\n  border-radius: 4px;\n  padding: 12px 24px;\n  margin-bottom: 8px;\n  text-align: left;\n  border-bottom: 1px solid var(--yq-border-light);\n}\n.lake-table-form-item-detail {\n  display: flex;\n  align-items: center;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n}\n.lake-table-form-item-title {\n  font-weight: bold;\n  color: var(--yq-text-primary);\n  font-size: 16px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-right: 20px;\n  cursor: pointer;\n  flex-grow: 1;\n  max-width: 200px;\n}\n.lake-table-form-item-title:hover {\n  color: var(--yq-text-body);\n}\n.lake-table-form-item-op-wrap {\n  display: flex;\n  text-align: right;\n  margin-right: -6px;\n}\n.lake-table-form-item-op {\n  margin-left: 6px;\n  cursor: pointer;\n  color: var(--yq-text-primary);\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  border-radius: 4px;\n  justify-content: center;\n  margin-right: 6px;\n}\n.lake-table-form-item-op:hover {\n  color: var(--yq-text-primary);\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-form-item-op .lake-icon {\n  font-size: 16px;\n}\n");var ok=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"table",void 0),s()(m()(r),"kernel",void 0),s()(m()(r),"tableModel",void 0),s()(m()(r),"forms",void 0),s()(m()(r),"onEdit",(function(e){r.table.readOnly||(r.kernel.emit(gc.EDIT_FORM,e.get("id")),r.props.onEdit(e))})),s()(m()(r),"onClickRemove",(function(e){var t=m()(r);r.table.emit(qs.HIDE_TOOLBAR_MENU),ct.a.confirm({title:_c("确定要删除表单吗？"),okText:_c("确认"),cancelText:_c("取消"),onOk:function(){t.onRemove(e)},className:"lake-table-menu"})})),s()(m()(r),"onRemove",(function(e){var t=r.state.forms,n=e.get("id");r.kernel.execute("removeForm",n),r.setState({forms:t.filter((function(e){return e.get("viewId")!==n}))}),r.props.onRemove(e)})),r.table=e.table,r.kernel=r.table.kernel,r.tableModel=r.kernel.tableModel,r.forms=r.tableModel.getAllViewsByType(Gs.FORM),r.state={forms:r.tableModel.getAllViewsByType(Gs.FORM)},r}return p()(n,[{key:"renderItem",value:function(e){var t=this,n=this.props.table;return l.a.createElement("div",{className:"lake-table-form-item",key:e.id},l.a.createElement("div",{className:"lake-table-form-item-detail"},l.a.createElement("div",{className:"lake-table-form-item-title",onClick:function(){t.onEdit(e)}},""===e.get("name")?_c("未命名表单"):e.get("name")),n.readOnly?null:l.a.createElement("div",{className:"lake-table-form-item-op-wrap"},l.a.createElement("span",{className:"lake-table-form-item-op",onClick:function(){t.onEdit(e)}},l.a.createElement("span",{className:"lake-icon lake-icon-table-edit"})),l.a.createElement("span",{className:"lake-table-form-item-op",onClick:function(){t.onClickRemove(e)}},l.a.createElement("span",{className:"lake-icon lake-icon-table-delete"})))))}},{key:"render",value:function(){var e=this,t=this.state.forms;return l.a.createElement("div",null,t.map((function(t){return e.renderItem(t)})))}}]),n}(l.a.Component);s()(ok,"defaultProps",{onEdit:function(){},onRemove:function(){}}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-enabled-centered {\n  border-radius: 4px;\n  margin-bottom: 8px;\n  text-align: left;\n  border-bottom: 1px solid var(--yq-border-light);\n}\n.lake-table-form-enabled-centered-detail {\n  display: flex;\n  align-items: center;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n}\n.lake-table-form-enabled-centered-title {\n  font-weight: bold;\n  color: var(--yq-text-primary);\n  font-size: 16px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-right: 20px;\n  cursor: pointer;\n  flex-grow: 1;\n  max-width: 200px;\n}\n.lake-table-form-enabled-centered-title:hover {\n  color: var(--yq-text-body);\n}\n.lake-table-form-enabled-centered-op-wrap {\n  display: flex;\n  text-align: right;\n  margin-right: -6px;\n}\n.lake-table-form-enabled-centered-op {\n  margin-left: 6px;\n  cursor: pointer;\n  color: var(--yq-text-primary);\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  border-radius: 4px;\n  justify-content: center;\n  margin-right: 6px;\n}\n.lake-table-form-enabled-centered-op:hover {\n  color: var(--yq-text-primary);\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-form-enabled-centered-op .lake-icon {\n  font-size: 16px;\n}\n");var ak=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onDisable",E()(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.kernel.execute("disableForm",r.viewId);case 1:case"end":return e.stop()}}),e)})))),r.table=e.table,r.viewId=e.viewId,r.kernel=r.table.kernel,r.formModel=r.kernel.tableModel.getView(r.viewId),r}return p()(n,[{key:"componentDidMount",value:function(){this.kernel.on(gc.DISABLE_FORM,this.props.onDisable)}},{key:"componentWillUnmount",value:function(){this.kernel.off(gc.DISABLE_FORM,this.props.onDisable)}},{key:"render",value:function(){return l.a.createElement("div",{className:"lake-table-form-enabled-centered"},l.a.createElement(ok,{table:this.table,onRemove:this.props.onRemove}),l.a.createElement(rk,{url:this.formModel.get("url"),view:this.formModel,abilities:this.table.abilities,onDisable:this.onDisable}))}}]),n}(l.a.Component);s()(ak,"propTypes",{table:X.a.object,webProxy:X.a.object,onRemove:X.a.func});var ik=["src","darkSrc","width","height","theme","themeManager","style","darkAlpha","className","children"];function lk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ck=function(e){var t,n,r=e.src,o=e.darkSrc,l=e.width,c=e.height,u=e.theme,d=e.themeManager,f=e.style,p=e.darkAlpha,h=e.className,m=e.children,v=xt()(e,ik);l=l||(null==f?void 0:f.width),c=c||(null==f?void 0:f.height),d=d||(null===(t=window.appData)||void 0===t?void 0:t.themeManager);var g=i.useState(u||(null===(n=d)||void 0===n?void 0:n.current)),b=ie()(g,2),y=b[0],w=b[1],k=i.useState(y===de.Theme.dark?o:r),x=ie()(k,2),E=x[0],C=x[1];if(d&&d.onChange((function(e){w(e),C(e===de.Theme.dark?o:r)})),!E)return null;var O=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lk(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:l,height:c},f);return O.backgroundImage="url(".concat(E,")"),y===de.Theme.dark&&p&&(O.opacity=p),m?i.createElement("div",a()({className:S()("theme-image",h),style:O},v),m):(delete O.backgroundImage,i.createElement("img",a()({src:E,className:S()("theme-image",h),style:O},v)))};ck.displayName="ThemeImage",nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-disabled-centered {\n  text-align: center;\n  width: 360px;\n  margin-top: -16px;\n}\n.lake-table-form-disabled-centered img {\n  width: 159px;\n  margin-top: 14px;\n}\n.lake-table-form-disabled-title {\n  font-size: 16px;\n  color: var(--yq-text-primary);\n  margin-top: 15px;\n}\n.lake-table-form-disabled-desc {\n  color: var(--yq-text-caption);\n  margin-top: 8px;\n}\n.lake-table-form-disabled-button {\n  margin: 21px auto 10px;\n}\n");var sk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onEnable",E()(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.kernel.execute("enableForm",r.viewId);case 1:case"end":return e.stop()}}),e)})))),r.table=e.table,r.viewId=e.viewId,r.kernel=r.table.kernel,r}return p()(n,[{key:"componentDidMount",value:function(){this.kernel.on(gc.ENABLE_FORM,this.props.onEnable)}},{key:"componentWillUnmount",value:function(){this.kernel.off(gc.ENABLE_FORM,this.props.onEnable)}},{key:"render",value:function(){return l.a.createElement("div",{className:"lake-table-form-disabled-centered"},l.a.createElement(ok,{table:this.table,onRemove:this.props.onRemove}),l.a.createElement(ck,{src:"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*5bdXSJkjvI0AAAAAAAAAAAAAARQnAQ",darkSrc:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*eBesTrDkSP8AAAAAAAAAAAAAARQnAQ",themeManager:this.table.themeManager}),l.a.createElement("div",{className:"lake-table-form-disabled-title"},_c("表单收集未开启")),l.a.createElement("p",{className:"lake-table-form-disabled-desc"},_c("点击「开启收集」按钮获得表单填写链接")),l.a.createElement("div",{className:"lake-table-form-disabled-button"},l.a.createElement(ft.a,{onClick:this.onEnable,type:"primary"},_c("开启收集"))))}}]),n}(l.a.Component);s()(sk,"propTypes",{table:X.a.object,viewId:X.a.string,onEnable:X.a.func,onRemove:X.a.func}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-form-modal {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  position: fixed;\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 2px;\n  margin-top: 2px;\n  overflow: auto;\n  overflow-x: hidden;\n  top: 96px;\n  right: 80px;\n  min-width: auto;\n  padding: 16px 0 16px;\n}\n.lake-table-form-link {\n  padding-bottom: 0;\n}\n.lake-table-form-link .lake-table-form-link-input {\n  width: 322px;\n}\n.lake-table-form-container {\n  padding: 8px 24px 0 24px;\n  text-align: center;\n}\n.lake-table-form-container .lake-table-form-item {\n  background-color: var(--yq-bg-tertiary);\n  border-radius: 4px;\n  padding: 12px;\n  margin-bottom: 8px;\n  width: 446px;\n  text-align: left;\n}\n.lake-table-form-container .lake-table-form-item-detail {\n  display: flex;\n  align-items: center;\n}\n.lake-table-form-container .lake-table-form-item-notice {\n  border-top: 1px solid var(--yq-border-primary);\n  padding-top: 6px;\n  margin-top: 6px;\n  color: var(--yq-text-caption);\n}\n.lake-table-form-container .lake-table-form-item-container {\n  font-weight: bold;\n  color: var(--yq-text-primary);\n  font-size: 16px;\n  width: 272px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-right: 20px;\n  cursor: pointer;\n}\n.lake-table-form-container .lake-table-form-item-container:hover {\n  color: var(--yq-text-body);\n}\n.lake-table-form-container .lake-table-form-item-op {\n  cursor: pointer;\n}\n.lake-table-form-container .lake-table-form-item-op:hover {\n  color: var(--yq-text-primary);\n}\n.lake-table-form-container .lake-table-form-item .lake-icon {\n  font-size: 16px;\n  line-height: 22px;\n  margin-right: 6px;\n}\n.lake-table-form-container-add {\n  text-align: center;\n  margin: 16px 0;\n}\n.lake-table-form-container-add-desc {\n  width: 282px;\n  padding: 0 6px;\n  color: var(--yq-text-primary);\n}\n.lake-table-form-open-link {\n  text-align: center;\n  display: flex;\n  align-items: center;\n  padding: 20px 0;\n}\n.lake-table-form-open-link img {\n  margin: 20px 0;\n  margin-left: 42px;\n}\n.lake-table-form-link-desc {\n  text-align: left;\n  width: 200px;\n  margin-left: 36px;\n}\n.lake-table-form-link-desc p {\n  font-size: 16px;\n  font-weight: bold;\n}\n");var uk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onUpdateState",(function(){r.setState({formView:r.kernel.tableModel.getViewByType(Gs.FORM)})})),s()(m()(r),"renderComponent",(function(){var e=m()(r),t=e.editor,n=e.props.close;return r.state.formView?r.state.formView.isEnable()?l.a.createElement(ak,{table:t,viewId:r.state.formView.get("id"),onDisable:n,onRemove:n}):l.a.createElement(sk,{table:t,viewId:r.state.formView.get("id"),onEnable:r.onUpdateState,onRemove:function(){r.onUpdateState(),n()}}):l.a.createElement(nk,{table:t,onCreate:n})})),r.state={formView:r.tableModel.getViewByType(Gs.FORM)},r}return p()(n,[{key:"componentDidMount",value:function(){this.kernel.on(gc.VIEW_CHANGED,this.onUpdateState)}},{key:"componentWillUnmount",value:function(){this.kernel.off(gc.VIEW_CHANGED,this.onUpdateState)}},{key:"render",value:function(){return l.a.createElement("div",{className:"lake-table-form-modal"},this.renderComponent())}},{key:"editor",get:function(){return this.props.editor}},{key:"kernel",get:function(){return this.editor.kernel}},{key:"tableModel",get:function(){return this.kernel.tableModel}},{key:"formService",get:function(){return this.kernel.formService}}]),n}(l.a.Component);var dk=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","form"),s()(m()(e),"_onToolbarButtonClick",(function(){e.workbench.UI.showModal("form",{scope:dc.WORKBENCH})})),e}return p()(n,[{key:"init",value:function(){var e=this;this.editor.readOnly||(this.editor.on(qs.OPEN_FORM_ON_CREATE,(function(){e.workbench.UI.showModal("form",{scope:dc.WORKBENCH})})),this.registerToolbarItem=function(){return{title:_c("表单"),tooltip:_c("表单"),icon:"lake-icon lake-icon-grid-form",onClick:e._onToolbarButtonClick}})}},{key:"registerModal",value:function(){var e=this;return{name:"form",renderComponent:function(t){return l.a.createElement(uk,a()({editor:e.editor},t))}}}}]),n}();function fk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fk(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-filter-modal {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  color: var(--yq-text-primary);\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 6px;\n  overflow: auto;\n  overflow-x: hidden;\n  min-width: 280px;\n  padding: 16px 0 16px;\n}\n.lake-table-filter-modal .lake-icon-arrow-down {\n  font-size: 14px;\n}\n.lake-table-filter-modal .ant-select-selection-item {\n  display: flex;\n  align-items: center;\n}\n.lake-table-filter-modal .empty-sort-select:hover {\n  background-color: var(--yq-bg-primary-hover);\n  border-radius: 6px;\n}\n.lake-table-filter-modal .lake-icon-table-x-delete {\n  padding: 5px;\n  border-radius: 6px;\n  cursor: pointer;\n}\n.lake-table-filter-modal .lake-icon-table-x-delete:hover {\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-table-filter-notice {\n  color: var(--yq-text-caption);\n  margin: 6px 0 4px 22px;\n}\n.lake-table-filter-item {\n  display: flex;\n  flex-wrap: nowrap;\n  align-items: center;\n  width: 560px;\n  line-height: 32px;\n  padding: 8px 22px;\n}\n.lake-table-filter-item .anticon-close {\n  color: var(--yq-text-caption);\n}\n.lake-table-filter-item .anticon-close:hover {\n  color: var(--yq-text-body);\n}\n.lake-table-filter-item .lake-table-menu-item {\n  margin-right: 5px;\n  width: 70px;\n}\n.lake-table-filter-where {\n  display: inline-block;\n  text-align: right;\n  width: 70px;\n  padding-right: 4px;\n  margin-right: 5px;\n  flex-shrink: 0;\n}\n.lake-table-filter-footer {\n  border-top: 1px solid var(--yq-border-primary);\n  margin-top: 16px;\n  padding: 12px 20px 0 20px;\n  display: flex;\n  justify-content: flex-end;\n}\n.lake-table-filter-footer .ant-btn-primary {\n  margin-left: 8px;\n}\n.lake-table-filter-checkbox {\n  width: 180px;\n  text-align: center;\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 2px;\n  height: 32px;\n}\n.lake-table-add-filter {\n  margin: 10px 0 6px 22px;\n  color: var(--yq-text-primary);\n  width: 100px;\n  font-weight: bold;\n  cursor: pointer;\n  padding: 3px 5px;\n}\n.lake-table-add-filter .lake-icon {\n  margin-right: 4px;\n}\n.lake-table-add-filter:hover {\n  color: var(--yq-text-body);\n}\n.lake-table-sort-item {\n  display: flex;\n  padding: 8px 22px;\n  justify-content: space-between;\n  align-items: center;\n}\n.lake-table-sort-item .ant-checkbox-wrapper {\n  margin-left: 0;\n}\n");var hk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;d()(this,n),r=t.call(this,e),s()(m()(r),"composition",!1),s()(m()(r),"addOption",(function(){var e=r.state.filter,t=r.filterService.addOption(e);r.setState({filter:t}),r.optionChanged(t)})),s()(m()(r),"removeOption",(function(e){var t=r.state.filter,n=r.filterService.removeOption(t,e);r.setState({filter:n}),r.kernel.execute("setFilter",t)})),s()(m()(r),"updateOption",(function(e,t,n){var o=r.state.filter,a=r.filterService.updateOption(o,e,t,n);r.setState({filter:a}),r.optionChanged(a)})),s()(m()(r),"updateOperator",(function(e){var t=r.state.filter,n=r.filterService.updateOperator(t,e);r.setState({filter:n}),r.optionChanged(n)})),s()(m()(r),"optionChanged",$()((function(e){for(var t=[],n=0;n<e.options.length;n++)(xf.includes(e.options[n].func)||e.options[n].expected||!1===e.options[n].expected)&&t.push(e.options[n]);r.kernel.execute("setFilter",pk(pk({},e),{},{options:t}))}))),s()(m()(r),"renderColumnOptions",(function(e){var t=r.tableModel.getFieldsMap();return r.view.get("columns").map((function(n){var r=t[n.id];return e.includes(r.type)?l.a.createElement(Pt.a.Option,{value:r.id,key:r.id},l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(r.type.toLowerCase()),style:{marginRight:8}}),r.name):null}))}));var o=r.view.get("filter");return r.state={filter:wc(o)||{}},r}return p()(n,[{key:"getConditionsByCol",value:function(e,t,n){var r=this,o=kf[e.type];if(!o)return null;var a=wf.filter((function(e){return e.type===o}));return l.a.createElement(Pt.a,{value:t.func||a[0].func,dropdownClassName:"lake-table-menu-item",style:{marginRight:5,width:110},onChange:function(e){r.updateOption(n,"func",e)},suffixIcon:l.a.createElement("span",{className:"lake-icon lake-icon-arrow-down"})},a.map((function(e){return l.a.createElement(Pt.a.Option,{value:e.func,key:e.func},e.text)})))}},{key:"getMemberData",value:function(e){var t=this.props.editor,n=t.kernel.tableModel.getActiveView().get("rows"),r=[],o={},a=t.kernel.tableModel.recordsModel;return n.forEach((function(t){var n=a.getCellValue(t.id,e.id,e);Array.isArray(n)&&n.forEach((function(e){o[e.id]||(o[e.id]=!0,r.push(wc(e)))}))})),r}},{key:"getValueByCol",value:function(e,t,n){var r=this,o=e.type;if("date"===e.type)return null;if(xf.includes(t.func))return null;if("select"===e.type||"multiSelect"===e.type)return l.a.createElement(Pt.a,{value:"multiSelect"!==e.type||t.expected?t.expected:[],dropdownClassName:"lake-table-menu-item",onChange:function(t){if(t&&0!==t.length)if("select"!==e.type){var o=[];e.options.forEach((function(e){t.includes(e.id)&&o.push(e.id)})),r.updateOption(n,"expected",o)}else r.updateOption(n,"expected",t);else r.updateOption(n,"expected","")},mode:"multiSelect"===e.type?"multiple":null,style:{width:180}},e.options.map((function(e,t){return l.a.createElement(Pt.a.Option,{key:t,value:e.id},e.value)})));if("checkbox"===e.type)return l.a.createElement("span",{className:"lake-table-filter-checkbox"},l.a.createElement(mt.a,{defaultChecked:!0===t.expected,onChange:function(e){r.updateOption(n,"expected",e.target.checked)}}));if(Pc.includes(o)){var a=this.getMemberData(e),i={};return a.forEach((function(e){i[e.id]=e})),l.a.createElement(Pt.a,{value:t.expected||[],dropdownClassName:"lake-table-menu-item",onChange:function(e){var t=e.map((function(e){return i[e]}));t.sort((function(e,t){return e.name.localeCompare(t.name)})),r.updateOption(n,"expected",0===e.length?"":t.map((function(e){return e.id})))},mode:"multiple",style:{width:180}},a.map((function(e,t){return l.a.createElement(Pt.a.Option,{key:t,value:e.id},l.a.createElement("span",{className:"lake-table-selector-avatar"},l.a.createElement("img",{src:e.avatar_url})),e.name)})))}return l.a.createElement(ht.a,{placeholder:_c("请输入"),defaultValue:t.expected,onChange:function(e){r.composition||r.updateOption(n,"expected",e.target.value)},onCompositionStart:function(){r.composition=!0},onCompositionEnd:function(e){r.composition=!1,r.updateOption(n,"expected",e.target.value)},style:{width:180}})}},{key:"renderOption",value:function(e,t){var n=this,r=this.state.filter,o=this.filterService.getFilterColumns(),a=e.id?this.filterService.getColumnById(e.id):o[0];if(!a)return null;var i,c=this.getConditionsByCol(a,e,t),s=this.getValueByCol(a,e,t);if(0===t)i=l.a.createElement("div",{className:"lake-table-filter-where"},_c("当"));else if(1===t)i=l.a.createElement(Pt.a,{value:null==r?void 0:r.operator,dropdownClassName:"lake-table-menu-item",onChange:this.updateOperator,style:{marginRight:5},suffixIcon:l.a.createElement("span",{className:"lake-icon lake-icon-arrow-down"})},l.a.createElement(Pt.a.Option,{value:"and"},_c("并且")),l.a.createElement(Pt.a.Option,{value:"or"},_c("或者")));else{var u="and"===r.operator?_c("并且"):_c("或者");i=l.a.createElement("div",{className:"lake-table-filter-where"},u)}return l.a.createElement("div",{className:"lake-table-filter-item",key:e.id+t},l.a.createElement("span",{className:"lake-icon lake-icon-table-x-delete",onClick:function(){n.removeOption(t)}}),i,l.a.createElement(Pt.a,{value:a.id||o[0].id,dropdownClassName:"lake-table-menu-item",style:{marginRight:5,width:150},onChange:function(e){n.updateOption(t,"id",e)},suffixIcon:l.a.createElement("span",{className:"lake-icon lake-icon-arrow-down"})},this.renderColumnOptions(Ic)),c,s)}},{key:"renderAddFilter",value:function(){return l.a.createElement("div",{className:"lake-table-add-filter empty-sort-select",onClick:this.addOption},l.a.createElement("span",{className:"lake-icon lake-icon-add-filter"}),_c("添加筛选"))}},{key:"renderEmpty",value:function(){return l.a.createElement("div",{className:"lake-table-filter-modal"},l.a.createElement("div",{className:"lake-table-filter-notice"},_c("还未设置任何筛选")),this.renderAddFilter())}},{key:"render",value:function(){var e=this,t=this.state.filter;if(!t||null==t||!t.options||0===t.options.length)return this.renderEmpty();var n=t.options.map((function(t,n){return e.renderOption(t,n)}));return l.a.createElement("div",{className:"lake-table-filter-modal"},n,this.renderAddFilter())}},{key:"editor",get:function(){return this.props.editor}},{key:"kernel",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.kernel}},{key:"tableModel",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.tableModel}},{key:"view",get:function(){return this.tableModel.activeView}},{key:"filterService",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.filterService}}]),n}(l.a.Component),mk=function(e,t){for(var n=e;!n.classList.contains(t);){if(!n.parentNode)return;n=n.parentNode}return n};var vk=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","filter"),s()(m()(e),"_getTitle",(function(){var t,n=null===(t=e.editor.kernel)||void 0===t?void 0:t.tableModel.getActiveView();if(!n)return _c("筛选");var r=(n.get("filter")||{}).options;return r&&0!==r.length?_c("$1个筛选",r.length):_c("筛选")})),s()(m()(e),"_getActive",(function(){var t,n=null===(t=e.editor.kernel)||void 0===t?void 0:t.tableModel.getActiveView();if(!n)return!1;var r=(n.get("filter")||{}).options;return r&&r.length>0})),s()(m()(e),"showModal",(function(t){var n=null==t?void 0:t.target;n||(n=e.workbench.container.querySelector("#lake-table-toolbar-filter"));var r=e._calculatePosition(n);r&&e.workbench.UI.showModal("filter",{scope:dc.GLOBAL,containerStyle:{left:"".concat(r.left,"px"),top:"".concat(r.top,"px")}})})),s()(m()(e),"_calculatePosition",(function(e){var t=mk(e,"lake-workbench-toolbar-button"),n=null==t?void 0:t.getBoundingClientRect();if(n)return window.innerWidth-n.left<595?{left:window.innerWidth-580-15,top:n.bottom}:{left:n.left,top:n.bottom}})),e}return p()(n,[{key:"registerToolbarItem",value:function(){return{title:this._getTitle,tooltip:_c("筛选"),icon:"lake-icon lake-icon-grid-filter",onClick:this.showModal,active:this._getActive,id:"lake-table-toolbar-filter"}}},{key:"registerModal",value:function(){var e=this;return{name:"filter",renderComponent:function(t){return l.a.createElement(hk,a()({editor:e.editor},t))}}}}]),n}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-row-height {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 6px;\n  padding: 5px 0 5px;\n  min-width: 104px;\n}\n.lake-table-row-height .ant-menu-item {\n  padding-left: 32px;\n  position: relative;\n  height: 36px;\n  line-height: 36px;\n}\n.lake-table-row-height .ant-menu-item:hover {\n  color: var(--yq-text-primary);\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-table-row-height .ant-menu-item-selected {\n  background: none !important;\n  color: var(--yq-text-primary);\n}\n.lake-table-row-height .lake-icon {\n  font-size: 16px;\n  vertical-align: middle;\n}\n.lake-table-row-height .ant-menu-title-content {\n  vertical-align: middle;\n  margin-left: 4px;\n}\n.lake-table-row-height-checked {\n  position: absolute;\n  left: 10px;\n  color: var(--yq-text-caption);\n  margin-right: 4px;\n}\n");var gk=[{type:"low",name:_c("低"),value:36},{type:"middle",name:_c("中"),value:58},{type:"high",name:_c("高"),value:146}],bk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"state",{row:e.view.get("rowHeight")}),s()(m()(e),"_onConfirm",(function(t){var n;null===(n=e.kernel)||void 0===n||n.execute("updateRowHeight",t.key),e.props.close()})),e}return p()(n,[{key:"render",value:function(){var e=this.state.row;if(e){var t=e;return l.a.createElement("div",{className:"lake-table-row-height"},l.a.createElement(yt.a,{defaultSelectedKeys:[t.type],mode:"vertical",onClick:this._onConfirm},gk.map((function(e){return l.a.createElement(yt.a.Item,{key:e.type,icon:l.a.createElement("span",null,e.type===t.type&&l.a.createElement("span",{className:"lake-table-row-height-checked"},l.a.createElement("span",{className:"lake-icon-row-height-check lake-icon"})),l.a.createElement("span",{className:"lake-icon lake-icon-rowheight-".concat(e.type)}))},_c(e.name))}))))}}},{key:"view",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.tableModel.activeView}},{key:"kernel",get:function(){return this.props.editor.kernel}}]),n}(l.a.Component);var yk=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","rowHeight"),s()(m()(e),"_onToolbarButtonClick",(function(t){var n=e._calculateModalPosition(t.target);n&&e.workbench.UI.showModal("rowHeight",{scope:dc.GLOBAL,containerStyle:{top:"".concat(n.top,"px"),left:"".concat(n.left,"px")}})})),s()(m()(e),"_calculateModalPosition",(function(e){var t=mk(e,"lake-workbench-toolbar-button");if(t){var n=t.getBoundingClientRect();return{left:n.left,top:n.bottom}}})),s()(m()(e),"_isHide",(function(){var t,n=null===(t=e.editor.kernel)||void 0===t?void 0:t.tableModel.getActiveView();return!n||n.get("type")!==Gs.GRID})),e}return p()(n,[{key:"registerToolbarItem",value:function(){return{title:_c("行高"),tooltip:_c("行高"),icon:"lake-icon lake-icon-rowheight-low",onClick:this._onToolbarButtonClick,hide:this._isHide}}},{key:"registerModal",value:function(){var e=this;return{name:"rowHeight",renderComponent:function(t){return l.a.createElement(bk,a()({},t,{editor:e.editor}))}}}}]),n}();function wk(e){switch(e){case"select":case"multiSelect":return{asc:_c("选项顺序"),desc:_c("选项倒序")};case"number":case"phone":return{asc:_c("从小到大"),desc:_c("从大到小")};default:return{asc:_c("升序"),desc:_c("降序"),style:{padding:"0 16px"}}}}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-group-modal {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  color: var(--yq-text-primary);\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 6px;\n  overflow: auto;\n  overflow-x: hidden;\n  padding: 16px 0 16px;\n}\n.lake-table-group-modal .ant-select .ant-select-selector {\n  background: none;\n}\n.lake-table-group-modal .ant-select-single.ant-select-open .ant-select-selection-item {\n  color: var(--yq-text-primary);\n}\n.lake-table-group-modal .lake-icon-table-x-delete {\n  cursor: pointer;\n  padding: 5px;\n  border-radius: 6px;\n}\n.lake-table-group-modal .lake-icon-table-x-delete:hover {\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-table-group-modal .empty-sort-select:hover {\n  background-color: var(--yq-bg-primary-hover);\n  border-radius: 6px;\n}\n.lake-table-group-modal .ant-select-selection-item {\n  display: flex;\n  align-items: center;\n}\n.lake-table-group-modal .lake-table-empty-desc {\n  margin: 0 0 10px 24px;\n  color: var(--yq-text-disable);\n}\n.lake-table-group-modal .lake-table-sort-item {\n  display: flex;\n  padding: 8px 22px;\n  justify-content: space-between;\n  align-items: center;\n}\n.lake-table-group-modal .lake-table-sort-item .ant-checkbox-wrapper {\n  margin-left: 0;\n}\n.lake-table-group-modal .lake-icon-arrow-down {\n  font-size: 14px;\n}\n.lake-table-menu-item {\n  margin-right: 5px;\n  width: 70px;\n}\n.lake-table-menu-item .ant-select-item-option-content {\n  display: flex;\n  align-items: center;\n}\n");var kk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;d()(this,n),r=t.call(this,e),s()(m()(r),"removeOption",(function(e){var t=r.state.group;t.splice(e,1),r.setState({group:t}),r.onChange(t)})),s()(m()(r),"onChange",(function(e){r.kernel.execute("setGroup",e)})),s()(m()(r),"renderColumnOptions",(function(e){var t=r.tableModel.getFieldsMap();return r.view.get("columns").map((function(n){var r=t[n.id];return e.includes(r.type)?l.a.createElement(Pt.a.Option,{value:r.id,key:r.id},l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(r.type.toLowerCase()),style:{marginRight:8}}),r.name):null}))}));var o=r.view.get("group")||[];return r.state={group:wc(o),sortType:""},r}return p()(n,[{key:"addOption",value:function(e){var t=this.state.group;t.push({id:e,type:"asc"}),this.setState({group:t}),this.onChange(t)}},{key:"updateOption",value:function(e,t,n){var r=this.state.group;r[e][t]=n,this.setState({group:r}),this.onChange(r)}},{key:"getTextByOptionType",value:function(e){return wk(this.tableModel.getFieldsMap()[e].type)}},{key:"updateCheckboxSort",value:function(e,t,n,r){t.stopPropagation(),t.nativeEvent&&t.nativeEvent.stopPropagation(),e!==n.type&&this.updateOption(r,"type",e),this.setState({sortType:e})}},{key:"renderOption",value:function(e,t){var n=this,r=this.getTextByOptionType(e.id),o=this.tableModel.getFieldsMap();return l.a.createElement("div",{className:"lake-table-sort-item",key:t},l.a.createElement("span",{className:"lake-icon lake-icon-table-x-delete",onClick:function(){n.removeOption(t)}}),l.a.createElement(Pt.a,{defaultValue:e.id,dropdownClassName:"lake-table-menu-item",onChange:function(e){n.updateOption(t,"id",e)},style:{width:190,marginLeft:14},suffixIcon:l.a.createElement("span",{className:"lake-icon lake-icon-arrow-down"})},this.renderColumnOptions(Bc)),o[e.id].type===Ac.CHECKBOX?l.a.createElement(vt.a.Group,{value:this.state.sortType||e.type,onChange:function(e){n.updateOption(t,"type",e.target.value)}},l.a.createElement(vt.a.Button,{value:"asc"},l.a.createElement("span",{onClick:function(r){n.updateCheckboxSort("asc",r,e,t)}},l.a.createElement(mt.a,{checked:!1},l.a.createElement("span",{className:"lake-icon lake-icon-to-right"})),l.a.createElement(mt.a,{checked:!0}))),l.a.createElement(vt.a.Button,{value:"desc"},l.a.createElement("span",{onClick:function(r){n.updateCheckboxSort("desc",r,e,t)}},l.a.createElement(mt.a,{checked:!0},l.a.createElement("span",{className:"lake-icon lake-icon-to-right"})),l.a.createElement(mt.a,{checked:!1})))):l.a.createElement(vt.a.Group,{defaultValue:e.type,onChange:function(e){n.updateOption(t,"type",e.target.value)}},l.a.createElement(vt.a.Button,{value:"asc"},l.a.createElement("span",{style:r.style},r.asc)),l.a.createElement(vt.a.Button,{value:"desc"},l.a.createElement("span",{style:r.style},r.desc))))}},{key:"renderEmpty",value:function(){var e=this;return l.a.createElement("div",{style:{width:280},className:"lake-table-group-modal"},l.a.createElement("div",{className:"lake-table-empty-desc"},_c("还未设置任何分组")),l.a.createElement(Pt.a,{className:"empty-sort-select",defaultValue:_c("选择一列进行分组"),dropdownClassName:"lake-table-menu-item",onChange:function(t){e.addOption(t)},style:{marginLeft:13,fontWeight:"bold"},dropdownStyle:{width:230},bordered:!1,suffixIcon:l.a.createElement("span",{className:"lake-icon lake-icon-arrow-down"})},this.renderColumnOptions(Bc)))}},{key:"render",value:function(){var e=this,t=this.state.group;if(0===t.length)return this.renderEmpty();var n=t.map((function(t,n){return e.renderOption(t,n)}));return l.a.createElement("div",{style:{width:460},className:"lake-table-group-modal"},l.a.createElement("div",{className:"lake-table-empty-desc"},_c("分组设置")),n)}},{key:"editor",get:function(){return this.props.editor}},{key:"kernel",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.kernel}},{key:"tableModel",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.tableModel}},{key:"view",get:function(){var e;return null===(e=this.tableModel)||void 0===e?void 0:e.activeView}}]),n}(l.a.Component);var xk=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","group"),s()(m()(e),"_hide",(function(){var t,n=null===(t=e.editor.kernel)||void 0===t?void 0:t.tableModel.getActiveView();return!n||n.get("type")!==Gs.GRID})),s()(m()(e),"_getActive",(function(){var t,n=null===(t=e.editor.kernel)||void 0===t?void 0:t.tableModel.getActiveView();return!!n&&(n.get("group")||[]).length>0})),s()(m()(e),"_onToolbarButtonClick",(function(t){var n=e._calculatePosition(t.target);n&&e.workbench.UI.showModal("group",{scope:dc.GLOBAL,containerStyle:{left:"".concat(n.left,"px"),top:"".concat(n.top,"px")}})})),s()(m()(e),"_calculatePosition",(function(e){var t=mk(e,"lake-workbench-toolbar-button"),n=null==t?void 0:t.getBoundingClientRect();if(n)return window.innerWidth-n.left<475?{left:window.innerWidth-460-15,top:n.bottom}:{left:n.left,top:n.bottom}})),e}return p()(n,[{key:"registerToolbarItem",value:function(){return{title:_c("分组"),icon:"lake-icon lake-icon-group",tooltip:_c("分组"),onClick:this._onToolbarButtonClick,active:this._getActive,hide:this._hide,id:"lake-table-toolbar-group"}}},{key:"registerModal",value:function(){var e=this;return{name:"group",renderComponent:function(t){return l.a.createElement(kk,a()({editor:e.editor},t))}}}}]),n}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-sort-modal {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  color: var(--yq-text-primary);\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 6px;\n  overflow: auto;\n  overflow-x: hidden;\n  min-width: 460px;\n  padding: 16px 0 16px;\n}\n.lake-table-sort-modal .ant-select .ant-select-selector {\n  background: none;\n}\n.lake-table-sort-modal .lake-icon-table-x-delete {\n  padding: 5px;\n  border-radius: 6px;\n  cursor: pointer;\n}\n.lake-table-sort-modal .lake-icon-table-x-delete:hover {\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-table-sort-modal .ant-select-single.ant-select-open .ant-select-selection-item {\n  color: var(--yq-text-primary);\n}\n.lake-table-sort-modal .lake-icon-arrow-down {\n  font-size: 14px;\n}\n.lake-table-sort-modal .empty-sort-select:hover {\n  background-color: var(--yq-bg-primary-hover);\n  border-radius: 6px;\n}\n.lake-table-sort-modal .ant-select-selection-item {\n  display: flex;\n  align-items: center;\n}\n.lake-table-sort-item {\n  display: flex;\n  padding: 8px 22px;\n  justify-content: space-between;\n  align-items: center;\n}\n.lake-table-sort-item .ant-checkbox-wrapper {\n  margin-left: 0;\n}\n.lake-table-sort-type {\n  padding: 0 16px;\n}\n.lake-table-empty-desc {\n  margin: 0 0 10px 24px;\n  color: var(--yq-text-disable);\n}\n.lake-table-sort-menu-item {\n  width: auto !important;\n}\n.lake-table-sort-menu-item .ant-select-item {\n  height: 36px;\n  line-height: 24px;\n}\n.lake-table-sort-menu-item .ant-select-item-option-content {\n  display: flex;\n  align-items: center;\n}\n.lake-table-sort-menu-item .select-column-option-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  max-width: 200px;\n}\n.lake-table-sort-setting {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 14px;\n  padding: 0 22px 8px;\n}\n.lake-table-sort-setting-title {\n  color: var(--yq-text-caption);\n  font-size: 14px;\n  font-weight: normal;\n  margin: 0;\n}\n.lake-table-sort-setting-action {\n  color: var(--yq-text-body);\n}\n.lake-table-sort-setting-action button {\n  margin-left: 8px;\n}\n.lake-table-sort-footer {\n  text-align: right;\n  padding: 16px 22px 8px;\n}\n.lake-table-sort-footer button {\n  margin-left: 8px;\n}\n");var Ek=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;d()(this,n),r=t.call(this,e),s()(m()(r),"renderColumnOptions",(function(e){var t=r.tableModel.getFieldsMap();return r.view.get("columns").map((function(n){var r=t[n.id];return e.includes(r.type)?l.a.createElement(Pt.a.Option,{value:r.id,key:r.id},l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(r.type.toLowerCase()),style:{marginRight:8}}),l.a.createElement("div",{className:"select-column-option-name"},r.name)):null}))})),s()(m()(r),"addOption",(function(e){var t=r.state.sort,n=r.sortService.addOption(t,e);r.setState({sort:n}),r.isNeedSubmit()||r.kernel.execute("setSort",n)})),s()(m()(r),"renderEmpty",(function(){return l.a.createElement("div",{className:"lake-table-sort-modal",style:{minWidth:280}},l.a.createElement("div",{className:"lake-table-empty-desc"},_c("还未设置任何排序")),l.a.createElement(Pt.a,{className:"empty-sort-select",defaultValue:_c("选择一列进行排序"),dropdownClassName:"lake-table-sort-menu-item",onChange:function(e){r.addOption(e)},style:{marginLeft:13,fontWeight:"bold"},bordered:!1,suffixIcon:l.a.createElement("span",{className:"lake-icon lake-icon-arrow-down"})},r.renderColumnOptions(Fc)),r.renderFooter())})),s()(m()(r),"removeOption",(function(e){var t=r.state.sort,n=r.sortService.removeOption(t,e);r.setState({sort:n}),r.isNeedSubmit()||r.kernel.execute("setSort",n)})),s()(m()(r),"renderOption",(function(e,t){var n=r.tableModel.getFieldsMap()[e.id],o=wk(n.type);return l.a.createElement("div",{className:"lake-table-sort-item",key:t},l.a.createElement("span",{className:"lake-icon lake-icon-table-x-delete",onClick:function(){r.removeOption(t)}}),l.a.createElement(Pt.a,{defaultValue:e.id,dropdownClassName:"lake-table-menu-item",onChange:function(e){r.updateOption(t,"id",e)},style:{width:190},suffixIcon:l.a.createElement("span",{className:"lake-icon lake-icon-arrow-down"})},r.renderColumnOptions(Fc)),n.type===Ac.CHECKBOX?l.a.createElement(vt.a.Group,{value:r.state.sortType||e.type,onChange:function(e){r.updateOption(t,"type",e.target.value)}},l.a.createElement(vt.a.Button,{value:"asc"},l.a.createElement("span",{onClick:function(n){r.updateCheckboxSort("asc",n,e,t)}},l.a.createElement(mt.a,{checked:!1},l.a.createElement("span",{className:"lake-icon lake-icon-to-right"})),l.a.createElement(mt.a,{checked:!0}))),l.a.createElement(vt.a.Button,{value:"desc"},l.a.createElement("span",{onClick:function(n){r.updateCheckboxSort("desc",n,e,t)}},l.a.createElement(mt.a,{checked:!0},l.a.createElement("span",{className:"lake-icon lake-icon-to-right"})),l.a.createElement(mt.a,{checked:!1})))):l.a.createElement(vt.a.Group,{defaultValue:e.type,onChange:function(e){r.updateOption(t,"type",e.target.value)}},l.a.createElement(vt.a.Button,{value:"asc"},l.a.createElement("span",{style:o.style},o.asc)),l.a.createElement(vt.a.Button,{value:"desc"},l.a.createElement("span",{style:o.style},o.desc))))})),s()(m()(r),"updateAuto",(function(e){var t=r.state.sort,n=r.sortService.setAuto(t,e);r.setState({sort:n}),r.kernel.execute("setSort",n)})),s()(m()(r),"renderSetting",(function(){return l.a.createElement("div",{className:"lake-table-sort-setting"},l.a.createElement("h2",{className:"lake-table-sort-setting-title"},_c("排序设置")),l.a.createElement("div",{className:"lake-table-sort-setting-action"},l.a.createElement("span",null,_c("保持排序")),l.a.createElement(It.a,{checked:r.state.sort.auto,onChange:r.updateAuto,size:"small"})))})),s()(m()(r),"onSubmit",(function(){r.kernel.execute("setSort",r.state.sort),r.props.close()})),s()(m()(r),"renderFooter",(function(){return r.isNeedSubmit()?l.a.createElement("div",{className:"lake-table-sort-footer"},l.a.createElement(ft.a,{onClick:r.props.close},_c("取消")),l.a.createElement(ft.a,{type:"primary",onClick:r.onSubmit},_c("确定"))):null}));var o=r.view.get("sort")||{};return r.state={sortType:"",sort:wc(o)},r}return p()(n,[{key:"isNeedSubmit",value:function(){return!this.state.sort.auto}},{key:"updateOption",value:function(e,t,n){var r=this.state.sort,o=this.sortService.updateOption(r,e,t,n);this.setState({sort:o}),this.isNeedSubmit()||this.kernel.execute("setSort",o)}},{key:"updateCheckboxSort",value:function(e,t,n,r){t.stopPropagation(),t.nativeEvent&&t.nativeEvent.stopPropagation(),e!==n.type&&this.updateOption(r,"type",e),this.setState({sortType:e})}},{key:"render",value:function(){var e=this,t=this.state.sort;if(!t||!t.options||0===t.options.length)return this.renderEmpty();var n=t.options.map((function(t,n){return e.renderOption(t,n)}));return l.a.createElement("div",{className:"lake-table-sort-modal"},this.renderSetting(),n,this.renderFooter())}},{key:"editor",get:function(){return this.props.editor}},{key:"kernel",get:function(){return this.editor.kernel}},{key:"tableModel",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.tableModel}},{key:"view",get:function(){var e;return null===(e=this.tableModel)||void 0===e?void 0:e.activeView}},{key:"sortService",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.sortService}}]),n}(l.a.Component);var Ck=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","sort"),s()(m()(e),"_onToolbarButtonClick",(function(t){var n=e._calculatePosition(t.target);n&&e.workbench.UI.showModal("sort",{scope:dc.GLOBAL,containerStyle:{left:"".concat(n.left,"px"),top:"".concat(n.top,"px")}})})),s()(m()(e),"_calculatePosition",(function(e){var t=mk(e,"lake-workbench-toolbar-button"),n=null==t?void 0:t.getBoundingClientRect();if(n)return window.innerWidth-n.left<475?{left:window.innerWidth-460-15,top:n.bottom}:{left:n.left,top:n.bottom}})),s()(m()(e),"_getActive",(function(){var t,n,r=null===(t=e.editor.kernel)||void 0===t?void 0:t.tableModel.getActiveView();return!!r&&(null===(n=e.editor.kernel)||void 0===n?void 0:n.sortService.isAuto(r))})),e}return p()(n,[{key:"registerToolbarItem",value:function(){return{title:_c("排序"),icon:"lake-icon lake-icon-grid-sort",tooltip:_c("排序"),onClick:this._onToolbarButtonClick,active:this._getActive,id:"lake-table-toolbar-sort"}}},{key:"registerModal",value:function(){var e=this;return{name:"sort",renderComponent:function(t){return l.a.createElement(Ek,a()({editor:e.editor},t))}}}}]),n}(),Ok=function(){function e(){d()(this,e)}return p()(e,[{key:"component",get:function(){return this._component},set:function(e){this._component=e}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"showFn",get:function(){return this._showFn},set:function(e){this._showFn=e}},{key:"hiddenFn",get:function(){return this._hiddenFn},set:function(e){this._hiddenFn=e}},{key:"dataFn",get:function(){return this._dataFn},set:function(e){this._dataFn=e}}]),e}(),_k=new(function(){function e(){d()(this,e),s()(this,"modalInfo",new Map)}return p()(e,[{key:"showModal",value:function(e,t){var n=this;if(this.modalInfo.set(e,e),!this.MaskElement){var r=document.createElement("div");r.style=["position: fixed;","top: 0;","left: 0;","right: 0;","bottom: 0;","z-index: ".concat(xg)].join(""),r.id="lake-table-modal-mask";var o=t.maskConfig,a=(null==o?void 0:o.containerEl)||this.getContainerEl();this.ContainerEl=a,r.onmousedown=function(){var e=document.getElementById("lake-table-modal-mask");e&&n.ContainerEl.removeChild(e),n.modalInfo.forEach((function(e){Rk.hiddenModal(e)}))},setTimeout((function(){return a.appendChild(r)}),200)}}},{key:"hiddenModal",value:function(e){if(this.modalInfo.delete(e),!this.modalInfo.size&&this.MaskElement){var t=document.getElementById("lake-table-modal-mask");this.ContainerEl.removeChild(t)}}},{key:"getContainerEl",value:function(){return document.querySelector(".lake-table-container")}},{key:"ContainerEl",get:function(){return this._containerEl},set:function(e){this._containerEl=e}},{key:"MaskElement",get:function(){return document.getElementById("lake-table-modal-mask")}},{key:"hideModalEnable",value:function(e){return this.modalInfo.has(e)}}]),e}()),Sk=new(function(){function e(){d()(this,e),s()(this,"coreModal",new Map),s()(this,"modal",new Map)}return p()(e,[{key:"registerCoreComponent",value:function(e,t){var n=new Ok;n.component=t,n.name=e,this.coreModal.set(e,n)}},{key:"registerModalComponent",value:function(e,t){var n=new Ok;n.component=t,n.name=e,this.modal.set(e,n)}},{key:"getCoreComponent",value:function(e){if(e)return this.coreModal.get(e).component;var t=[];return this.coreModal.forEach((function(e){t.push(e.component)})),t}},{key:"getModalComponents",value:function(e){if(e)return this.modal.get(e).component;var t=[];return this.modal.forEach((function(e){t.push(e.component)})),t}},{key:"registerShowModalFn",value:function(e,t){var n=this.coreModal.get(e),r=this.modal.get(e);return n&&r&&ed(!1,"coreModal 和 Modal 中有名称冲突"),n?(n.showFuc=t,void this.coreModal.set(e,n)):r?(r.showFn=t,void this.modal.set(e,r)):void ed(!1,"无法找到注册方法到对应的组件")}},{key:"registerHiddenModalFn",value:function(e,t){var n=this.coreModal.get(e),r=this.modal.get(e);return n&&r&&ed(!1,"coreModal 和 Modal 中有名称冲突"),n?(n.hiddenFn=t,void this.coreModal.set(e,n)):r?(r.hiddenFn=t,void this.modal.set(e,r)):void ed(!1,"无法找到注册方法到对应的组件")}},{key:"registerDataSourceFn",value:function(e,t){var n=this.coreModal.get(e),r=this.modal.get(e);return n&&r&&ed(!1,"coreModal 和 Modal 中有名称冲突"),n?(n.dataFn=t,void this.coreModal.set(e,n)):r?(r.dataFn=t,void this.modal.set(e,r)):void ed(!1,"无法找到注册方法到对应的组件")}},{key:"hiddenModal",value:function(e){var t=this;e||_k.modalInfo.forEach((function(e){t.hide(e)})),Array.isArray(e)?e.forEach((function(e){return t.hide(e)})):this.hide(e)}},{key:"hide",value:function(e){if(_k.hideModalEnable(e)){var t=this.coreModal.get(e)||this.modal.get(e);(null==t?void 0:t.hiddenFn)&&t.hiddenFn()}}},{key:"changeData",value:function(e){var t=this.coreModal.get(e)||this.modal.get(e);t&&t.dataFn&&t.dataFn()}}]),e}()),Rk=function(){function e(){d()(this,e)}return p()(e,null,[{key:"renderCoreModals",value:function(t){var n=e.getCoreComponent();return l.a.createElement(l.a.Fragment,null,n.map((function(e,n){return l.a.createElement(e,a()({},t,{key:n}))})))}},{key:"getCoreComponent",value:function(e){return Sk.getCoreComponent(e)}},{key:"renderModals",value:function(t){var n=e.getModalComponents();return l.a.createElement(l.a.Fragment,null,n.map((function(e,n){return l.a.createElement(e,a()({},t,{key:n}))})))}},{key:"hiddenModal",value:function(e){Sk.hiddenModal(e)}},{key:"onShowModal",value:function(e,t){_k.showModal(e,t)}},{key:"onHiddenModal",value:function(e){_k.hiddenModal(e)}},{key:"hideModalEnable",value:function(e){return _k.hideModalEnable(e)}},{key:"getModalComponents",value:function(e){return Sk.getModalComponents(e)}},{key:"registerCoreComponent",value:function(e,t){Sk.registerCoreComponent(e,t)}},{key:"registerComponent",value:function(e,t){Sk.registerModalComponent(e,t)}},{key:"registerShowModalFn",value:function(e,t){Sk.registerShowModalFn(e,t)}},{key:"registerHiddenModalFn",value:function(e,t){Sk.registerHiddenModalFn(e,t)}},{key:"registerDataSourceFn",value:function(e,t){Sk.registerDataSourceFn(e,t)}},{key:"dataChange",value:function(){_k.modalInfo.forEach((function(e){return Sk.changeData(e)}))}}]),e}();function jk(e){ed(e.name,"必须要标明所属类的class Name， 否则打包压缩时会有问题");var t=e.name;return function(e,n,r){var o=r.value,a=r.configurable,i=r.enumerable;return ed(o,"函数写法必须为一般写法，不得为箭头函数, 装饰器会帮忙绑定 this"),ed("function"==typeof o,"装饰的必须为 function"),{configurable:a,enumerable:i,get:function(){var e=function(e){Rk.onHiddenModal(t),o.bind(this)(e)}.bind(this);return Rk.registerHiddenModalFn(t,e),Object.defineProperty(this,n,{configurable:!0,writable:!0,enumerable:!1,value:e}),e}}}}function Ak(e){ed(e.name,"必须要标明所属类的class Name， 否则打包压缩时会有问题");var t=e.name;return function(e,n,r){var o=r.value,a=r.configurable,i=r.enumerable;return ed(o,"函数写法必须为一般写法，不得为箭头函数, 装饰器会帮忙绑定 this"),ed("function"==typeof o,"装饰的必须为 function"),{configurable:a,enumerable:i,get:function(){var e=function(e){if(e.modalConfig){var n=e.modalConfig.closeModal;(void 0===n?[]:n).forEach((function(e){return Rk.hiddenModal(e)}))}e.maskConfig=e.maskConfig||{},!e.maskConfig.containerEl&&this.props.table&&(e.maskConfig.containerEl=this.props.table.container),Rk.onShowModal(t,e),o.bind(this)(e)}.bind(this);return Rk.registerShowModalFn(t,e),Object.defineProperty(this,n,{configurable:!0,writable:!0,enumerable:!1,value:e}),e}}}}function Tk(e,t,n){var r=n.value,o=n.configurable,a=n.enumerable;return ed(r,"函数写法必须为一般写法，不得为箭头函数, 装饰器会帮忙绑定 this"),ed("function"==typeof r,"装饰的必须为 function"),{configurable:o,enumerable:a,get:function(){var e=function(){var e=r.bind(this);e.apply(void 0,arguments),setTimeout(Rk.dataChange())}.bind(this);return Object.defineProperty(this,t,{configurable:!0,writable:!0,enumerable:!1,value:e}),e}}}function Lk(e){ed(e.name,"必须要标明所属类的class Name， 否则打包压缩时会有问题");var t=e.name;return function(e){Rk.registerComponent(t,e)}}function Dk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dk(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"addOption",(function(){var e=r.state.filter,t=r.filterService.addOption(e);r.setState({filter:t}),r.optionChanged(t)})),s()(m()(r),"removeOption",(function(e){var t=r.state.filter,n=r.filterService.removeOption(t,e);r.setState({filter:n}),r.kernel.execute("setFilter",t)})),s()(m()(r),"updateOption",(function(e,t,n){var o=r.state.filter,a=r.filterService.updateOption(o,e,t,n);r.setState({filter:a}),r.optionChanged(a)})),s()(m()(r),"updateOperator",(function(e){var t=r.state.filter,n=r.filterService.updateOperator(t,e);r.setState({filter:n}),r.optionChanged(n)})),s()(m()(r),"optionChanged",$()((function(e){for(var t=[],n=0;n<e.options.length;n++)(xf.includes(e.options[n].func)||e.options[n].expected||!1===e.options[n].expected)&&t.push(e.options[n]);r.kernel.execute("setFilter",Pk(Pk({},e),{},{options:t}))}))),r.table=e.table,r.kernel=r.table.kernel,r.tableModel=r.kernel.tableModel,r.view=r.tableModel.activeView,r.filterService=r.kernel.filterService,r.state={filter:null},r}return p()(n,[{key:"componentDidMount",value:function(){var e=this.view.get("filter");this.setState({filter:wc(e)})}},{key:"getConditionsByCol",value:function(e,t,n){var r=this,o=kf[e.type];if(!o)return null;var a=wf.filter((function(e){return e.type===o}));return l.a.createElement(Pt.a,{value:t.func||a[0].func,dropdownClassName:"lake-table-menu-item",style:{marginRight:5,width:110},onChange:function(e){r.updateOption(n,"func",e)}},a.map((function(e){return l.a.createElement(Pt.a.Option,{value:e.func,key:e.func},e.text)})))}},{key:"getMemberData",value:function(e){var t=this.props.table,n=t.kernel.tableModel.getActiveView().get("rows"),r=[],o={},a=t.kernel.tableModel.recordsModel;return n.forEach((function(t){var n=a.getCellValue(t.id,e.id,e);Array.isArray(n)&&n.forEach((function(e){o[e.id]||(o[e.id]=!0,r.push(wc(e)))}))})),r}},{key:"getValueByCol",value:function(e,t,n){var r=this,o=e.type;if("date"===e.type)return null;if(xf.includes(t.func))return null;if("select"===e.type||"multiSelect"===e.type)return l.a.createElement(Pt.a,{value:"multiSelect"!==e.type||t.expected?t.expected:[],dropdownClassName:"lake-table-menu-item",onChange:function(t){if(t&&0!==t.length)if("select"!==e.type){var o=[];e.options.forEach((function(e){t.includes(e.id)&&o.push(e.id)})),r.updateOption(n,"expected",o)}else r.updateOption(n,"expected",t);else r.updateOption(n,"expected","")},mode:"multiSelect"===e.type?"multiple":null,style:{width:180}},e.options.map((function(e,t){return l.a.createElement(Pt.a.Option,{key:t,value:e.id},e.value)})));if("checkbox"===e.type)return l.a.createElement("span",{className:"lake-table-filter-checkbox"},l.a.createElement(mt.a,{defaultChecked:!0===t.expected,onChange:function(e){r.updateOption(n,"expected",e.target.checked)}}));if(Pc.includes(o)){var a=this.getMemberData(e),i={};return a.forEach((function(e){i[e.id]=e})),l.a.createElement(Pt.a,{value:t.expected||[],dropdownClassName:"lake-table-menu-item",onChange:function(e){var t=e.map((function(e){return i[e]}));t.sort((function(e,t){return e.name.localeCompare(t.name)})),r.updateOption(n,"expected",0===e.length?"":t.map((function(e){return e.id})))},mode:"multiple",style:{width:180}},a.map((function(e,t){return l.a.createElement(Pt.a.Option,{key:t,value:e.id},l.a.createElement("span",{className:"lake-table-selector-avatar"},l.a.createElement("img",{src:e.avatar_url})),e.name)})))}return l.a.createElement(ht.a,{placeholder:_c("请输入"),defaultValue:t.expected,onChange:function(e){r.composition||r.updateOption(n,"expected",e.target.value)},onCompositionStart:function(){r.composition=!0},onCompositionEnd:function(e){r.composition=!1,r.updateOption(n,"expected",e.target.value)},style:{width:180}})}},{key:"renderOption",value:function(e,t){var n=this,r=this.state.filter,o=this.filterService.getFilterColumns(),a=e.id?this.filterService.getColumnById(e.id):o[0];if(!a)return null;var i,c=this.getConditionsByCol(a,e,t),s=this.getValueByCol(a,e,t);if(0===t)i=l.a.createElement("div",{className:"lake-table-filter-where"},_c("当"));else if(1===t)i=l.a.createElement(Pt.a,{value:r.operator,dropdownClassName:"lake-table-menu-item",onChange:this.updateOperator,style:{marginRight:5}},l.a.createElement(Pt.a.Option,{value:"and"},_c("并且")),l.a.createElement(Pt.a.Option,{value:"or"},_c("或者")));else{var u="and"===r.operator?_c("并且"):_c("或者");i=l.a.createElement("div",{className:"lake-table-filter-where"},u)}return l.a.createElement("div",{className:"lake-table-filter-item",key:e.id+t},l.a.createElement(bg,{style:{marginRight:9},onClick:function(){n.removeOption(t)}}),i,l.a.createElement(Pt.a,{value:a.id||o[0].id,dropdownClassName:"lake-table-menu-item",style:{marginRight:5,width:150},onChange:function(e){n.updateOption(t,"id",e)}},this.props.renderColumnOptions(Ic)),c,s)}},{key:"renderAddFilter",value:function(){return l.a.createElement("div",{className:"lake-table-add-filter",onClick:this.addOption},l.a.createElement(vg,{style:{marginRight:8}}),_c("添加筛选"))}},{key:"renderEmpty",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"lake-table-filter-notice"},_c("还未设置任何筛选")),this.renderAddFilter())}},{key:"render",value:function(){var e=this,t=this.state.filter;if(!t||!t.options||0===t.options.length)return this.renderEmpty();var n=t.options.map((function(t,n){return e.renderOption(t,n)}));return l.a.createElement("div",null,n,this.renderAddFilter())}}]),n}(l.a.Component);s()(Mk,"propTypes",{table:X.a.object,renderColumnOptions:X.a.func,onHide:X.a.func}),s()(Mk,"defaultProps",{onHide:function(){}});var Nk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"updateAuto",(function(e){var t=r.state.sort,n=r.sortService.setAuto(t,e);r.setState({sort:n}),r.kernel.execute("setSort",n)})),s()(m()(r),"removeOption",(function(e){var t=r.state.sort,n=r.sortService.removeOption(t,e);r.setState({sort:n}),r.isNeedSubmit()||r.kernel.execute("setSort",n)})),s()(m()(r),"onSubmit",(function(){r.kernel.execute("setSort",r.state.sort),r.props.onHide()})),r.table=e.table,r.kernel=r.table.kernel,r.tableModel=r.kernel.tableModel,r.view=r.tableModel.activeView,r.sortService=r.kernel.sortService,r.state={sort:{auto:!1}},r}return p()(n,[{key:"componentDidMount",value:function(){var e=this.view.get("sort")||{};this.setState({sort:wc(e)})}},{key:"isNeedSubmit",value:function(){return!this.state.sort.auto}},{key:"addOption",value:function(e){var t=this.state.sort,n=this.sortService.addOption(t,e);this.setState({sort:n}),this.isNeedSubmit()||this.kernel.execute("setSort",n)}},{key:"updateOption",value:function(e,t,n){var r=this.state.sort,o=this.sortService.updateOption(r,e,t,n);this.setState({sort:o}),this.isNeedSubmit()||this.kernel.execute("setSort",o)}},{key:"updateCheckboxSort",value:function(e,t,n,r){t.stopPropagation(),t.nativeEvent&&t.nativeEvent.stopPropagation(),e!==n.type&&this.updateOption(r,"type",e),this.setState({sortType:e})}},{key:"renderOption",value:function(e,t){var n=this,r=this.tableModel.getFieldsMap()[e.id],o=wk(r.type);return l.a.createElement("div",{className:"lake-table-sort-item",key:t},l.a.createElement(bg,{onClick:function(){n.removeOption(t)}}),l.a.createElement(Pt.a,{defaultValue:e.id,dropdownClassName:"lake-table-menu-item",onChange:function(e){n.updateOption(t,"id",e)},style:{width:190}},this.props.renderColumnOptions(Fc)),r.type===Ac.CHECKBOX?l.a.createElement(vt.a.Group,{value:this.state.sortType||e.type,onChange:function(e){n.updateOption(t,"type",e.target.value)}},l.a.createElement(vt.a.Button,{value:"asc"},l.a.createElement("span",{onClick:function(r){n.updateCheckboxSort("asc",r,e,t)}},l.a.createElement(mt.a,{checked:!1},l.a.createElement("span",{className:"lake-icon lake-icon-to-right"})),l.a.createElement(mt.a,{checked:!0}))),l.a.createElement(vt.a.Button,{value:"desc"},l.a.createElement("span",{onClick:function(r){n.updateCheckboxSort("desc",r,e,t)}},l.a.createElement(mt.a,{checked:!0},l.a.createElement("span",{className:"lake-icon lake-icon-to-right"})),l.a.createElement(mt.a,{checked:!1})))):l.a.createElement(vt.a.Group,{defaultValue:e.type,onChange:function(e){n.updateOption(t,"type",e.target.value)}},l.a.createElement(vt.a.Button,{value:"asc"},l.a.createElement("span",{style:o.style},o.asc)),l.a.createElement(vt.a.Button,{value:"desc"},l.a.createElement("span",{style:o.style},o.desc))))}},{key:"renderEmpty",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{className:"lake-table-empty-desc"},_c("还未设置任何排序")),l.a.createElement(Pt.a,{defaultValue:_c("选择一列进行排序"),dropdownClassName:"lake-table-menu-item",onChange:function(t){e.addOption(t)},style:{marginLeft:13,fontWeight:"bold"},dropdownStyle:{width:230},bordered:!1},this.props.renderColumnOptions(Fc)),this.renderFooter())}},{key:"renderSetting",value:function(){return l.a.createElement("div",{className:"lake-table-sort-setting"},l.a.createElement("h2",{className:"lake-table-sort-setting-title"},_c("排序设置")),l.a.createElement("div",{className:"lake-table-sort-setting-action"},l.a.createElement("span",null,_c("保持排序")),l.a.createElement(It.a,{checked:this.state.sort.auto,onChange:this.updateAuto,size:"small"})))}},{key:"renderFooter",value:function(){return this.isNeedSubmit()?l.a.createElement("div",{className:"lake-table-sort-footer"},l.a.createElement(ft.a,{onClick:this.props.onHide},_c("取消")),l.a.createElement(ft.a,{type:"primary",onClick:this.onSubmit},_c("确定"))):null}},{key:"render",value:function(){var e=this,t=this.state.sort;if(!t||!t.options||0===t.options.length)return this.renderEmpty();var n=t.options.map((function(t,n){return e.renderOption(t,n)}));return l.a.createElement("div",null,this.renderSetting(),n,this.renderFooter())}}]),n}(l.a.Component);s()(Nk,"propTypes",{table:X.a.object,renderColumnOptions:X.a.func,onHide:X.a.func}),s()(Nk,"defaultProps",{onHide:function(){}}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-editor .lake-table-menu {\n  position: absolute;\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 2px;\n  padding: 16px 0 16px;\n  margin-top: 2px;\n  z-index: 500;\n  overflow: auto;\n  overflow-x: hidden;\n}\n.lake-table-editor .lake-table-menu .lake-table-form-link {\n  padding-bottom: 0;\n}\n.lake-table-editor .lake-table-menu .lake-table-form-link .lake-table-form-link-input {\n  width: 322px;\n}\n.lake-table-editor .lake-table-menu .ant-select-selector {\n  background: none;\n}\n.lake-table-editor .lake-table-menu .ant-select-single.ant-select-open .ant-select-selection-item {\n  color: var(--yq-text-primary);\n}\n.lake-table-editor .lake-table-menu .ant-radio-button-wrapper {\n  background: var(--yq-bg-primary);\n}\n.lake-table-editor .lake-table-menu .ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled) {\n  background: var(--yq-bg-primary);\n}\n.lake-table-editor .lake-table-menu .ant-checkbox-wrapper:hover .ant-checkbox-inner,\n.lake-table-editor .lake-table-menu .ant-checkbox:hover .ant-checkbox-inner,\n.lake-table-editor .lake-table-menu .ant-checkbox-input:focus + .ant-checkbox-inner {\n  border-color: var(--yq-border-light);\n}\n.lake-table-editor .lake-table-menu .ant-radio-button-wrapper-checked .lake-icon-to-right {\n  color: var(--yq-yuque-green-5);\n}\n.lake-table-editor .lake-table-empty-desc {\n  margin: 0 0 10px 24px;\n  color: var(--yq-text-disable);\n}\n.lake-table-editor .lake-table-function-desc {\n  margin: 0 0 10px 24px;\n  color: var(--yq-text-disable);\n}\n.lake-table-editor .lake-table-filter-notice {\n  color: var(--yq-text-caption);\n  margin: 6px 0 4px 22px;\n}\n.lake-table-editor .lake-table-filter-item {\n  display: flex;\n  flex-wrap: nowrap;\n  align-items: center;\n  width: 560px;\n  line-height: 32px;\n  padding: 8px 22px;\n}\n.lake-table-editor .lake-table-filter-item .anticon-close {\n  color: var(--yq-text-caption);\n}\n.lake-table-editor .lake-table-filter-item .anticon-close:hover {\n  color: var(--yq-text-body);\n}\n.lake-table-editor .lake-table-filter-item .lake-table-menu-item {\n  margin-right: 5px;\n  width: 70px;\n}\n.lake-table-editor .lake-table-filter-where {\n  display: inline-block;\n  text-align: right;\n  width: 70px;\n  padding-right: 4px;\n  margin-right: 5px;\n  flex-shrink: 0;\n}\n.lake-table-editor .lake-table-filter-footer {\n  border-top: 1px solid var(--yq-border-light);\n  margin-top: 16px;\n  padding: 12px 20px 0 20px;\n  display: flex;\n  justify-content: flex-end;\n}\n.lake-table-editor .lake-table-filter-footer .ant-btn-primary {\n  margin-left: 8px;\n}\n.lake-table-editor .lake-table-filter-checkbox {\n  width: 180px;\n  text-align: center;\n  border: 1px solid var(--yq-border-light);\n  border-radius: 2px;\n  height: 32px;\n}\n.lake-table-editor .lake-table-add-filter {\n  margin: 10px 0 6px 22px;\n  color: var(--yq-text-primary);\n  width: 88px;\n  font-weight: bold;\n  cursor: pointer;\n}\n.lake-table-editor .lake-table-add-filter:hover {\n  color: var(--yq-text-body);\n}\n.lake-table-editor .lake-table-sort-item {\n  display: flex;\n  padding: 8px 22px;\n  justify-content: space-between;\n  align-items: center;\n}\n.lake-table-editor .lake-table-sort-item .ant-checkbox-wrapper {\n  margin-left: 0;\n}\n.lake-table-editor .lake-table-sort-type {\n  padding: 0 16px;\n}\n.lake-table-editor .lake-table-form-container {\n  padding: 8px 24px 0 24px;\n  text-align: center;\n}\n.lake-table-editor .lake-table-form-container .lake-table-form-item {\n  background-color: var(--yq-bg-tertiary);\n  border-radius: 4px;\n  padding: 12px;\n  margin-bottom: 8px;\n  width: 446px;\n  text-align: left;\n}\n.lake-table-editor .lake-table-form-container .lake-table-form-item-detail {\n  display: flex;\n  align-items: center;\n}\n.lake-table-editor .lake-table-form-container .lake-table-form-item-notice {\n  border-top: 1px solid var(--yq-border-light);\n  padding-top: 6px;\n  margin-top: 6px;\n  color: var(--yq-text-caption);\n}\n.lake-table-editor .lake-table-form-container .lake-table-form-item-container {\n  font-weight: bold;\n  color: var(--yq-text-primary);\n  font-size: 16px;\n  width: 272px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-right: 20px;\n  cursor: pointer;\n}\n.lake-table-editor .lake-table-form-container .lake-table-form-item-container:hover {\n  color: var(--yq-text-body);\n}\n.lake-table-editor .lake-table-form-container .lake-table-form-item-op {\n  cursor: pointer;\n}\n.lake-table-editor .lake-table-form-container .lake-table-form-item-op:hover {\n  color: var(--yq-text-primary);\n}\n.lake-table-editor .lake-table-form-container .lake-table-form-item .lake-icon {\n  font-size: 16px;\n  line-height: 22px;\n  margin-right: 6px;\n}\n.lake-table-editor .lake-table-form-container-add {\n  text-align: center;\n  margin: 16px 0;\n}\n.lake-table-editor .lake-table-form-container-add-desc {\n  width: 282px;\n  padding: 0 6px;\n  color: var(--yq-text-primary);\n}\n.lake-table-editor .lake-table-form-open-link {\n  text-align: center;\n  display: flex;\n  align-items: center;\n  padding: 20px 0;\n}\n.lake-table-editor .lake-table-form-open-link img {\n  margin: 20px 0;\n  margin-left: 42px;\n}\n.lake-table-editor .lake-table-form-link-desc {\n  text-align: left;\n  width: 200px;\n  margin-left: 36px;\n}\n.lake-table-editor .lake-table-form-link-desc p {\n  font-size: 16px;\n  font-weight: bold;\n}\n.lake-table-editor .lake-table-row-height {\n  margin: -12px 0 -12px;\n}\n.lake-table-editor .lake-table-row-height .ant-menu-item {\n  padding-left: 32px;\n  position: relative;\n  height: 36px;\n  line-height: 36px;\n}\n.lake-table-editor .lake-table-row-height .ant-menu-item-selected,\n.lake-table-editor .lake-table-row-height .ant-menu-item-active {\n  background-color: var(--yq-bg-primary-hover);\n  color: var(--yq-text-primary);\n}\n.lake-table-editor .lake-table-row-height .lake-icon {\n  font-size: 18px;\n  vertical-align: middle;\n}\n.lake-table-editor .lake-table-row-height .ant-menu-title-content {\n  vertical-align: middle;\n  margin-left: 4px;\n}\n.lake-table-editor .lake-table-row-height-checked {\n  position: absolute;\n  top: 1px;\n  left: 10px;\n  color: var(--yq-text-caption);\n  margin-right: 4px;\n}\n.lake-table-menu-item .ant-select-item {\n  height: 36px;\n  line-height: 24px;\n}\n.lake-table-selector-avatar {\n  display: inline-block;\n  margin: 0 8px 0 0;\n}\n.lake-table-selector-avatar img {\n  width: 24px;\n  min-width: 24px;\n  height: 24px;\n  border-radius: 12px;\n}\n.lake-table-view-manage {\n  margin: -15px 0 -15px;\n  min-width: 198px;\n}\n.lake-table-view-manage-hr {\n  height: 1px;\n  background-color: var(--yq-border-light);\n}\n.lake-table-view-manage .lake-table-view-manage-inner {\n  max-height: 300px;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.lake-table-view-manage,\n.lake-table-view-manage-submenu,\n.lake-table-menu-configs-submenu {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n}\n.lake-table-view-manage .lake-icon-table-grid-view,\n.lake-table-view-manage-submenu .lake-icon-table-grid-view,\n.lake-table-menu-configs-submenu .lake-icon-table-grid-view {\n  color: var(--yq-yuque-green-6);\n}\n.lake-table-view-manage .lake-icon-table-card-view,\n.lake-table-view-manage-submenu .lake-icon-table-card-view,\n.lake-table-menu-configs-submenu .lake-icon-table-card-view {\n  color: var(--yq-blue-5);\n}\n.lake-table-view-manage .lake-icon-table-kanban-view,\n.lake-table-view-manage-submenu .lake-icon-table-kanban-view,\n.lake-table-menu-configs-submenu .lake-icon-table-kanban-view {\n  color: var(--yq-cyan-5);\n}\n.lake-table-view-create {\n  margin-top: 4px;\n}\n.lake-table-menu-container .lake-table-view-icon {\n  font-size: 16px;\n  margin-right: 0;\n}\n.lake-table-menu-kanban-group {\n  min-width: 200px;\n  margin: -8px 0;\n}\n.lake-table-menu-kanban-group-option {\n  text-align: left;\n  padding: 8px 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n  width: 100%;\n  height: 34px;\n  overflow: visible;\n  color: var(--yq-text-body);\n}\n.lake-table-menu-kanban-group-option .lake-icon-success {\n  margin-left: 8px;\n}\n.lake-table-menu-kanban-group-option .lake-icon-col-type {\n  margin-right: 8px;\n}\n.lake-table-menu-kanban-group-option:hover {\n  background: var(--yq-bg-tertiary);\n}\n.lake-table-sort-setting {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 14px;\n  padding: 0 22px 8px;\n}\n.lake-table-sort-setting-title {\n  color: var(--yq-text-caption);\n  font-size: 14px;\n  font-weight: normal;\n  margin: 0;\n}\n.lake-table-sort-setting-action {\n  color: var(--yq-text-body);\n}\n.lake-table-sort-setting-action button {\n  margin-left: 8px;\n}\n.lake-table-sort-footer {\n  text-align: right;\n  padding: 16px 22px 8px;\n}\n.lake-table-sort-footer button {\n  margin-left: 8px;\n}\n");var Ik=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onUpdateState",(function(){r.setState({formView:r.kernel.tableModel.getViewByType(Gs.FORM)})})),r.table=e.table,r.kernel=r.table.kernel,r.formService=r.kernel.formService,r.state={formView:r.kernel.tableModel.getViewByType(Gs.FORM)},r}return p()(n,[{key:"componentDidMount",value:function(){this.kernel.on(gc.VIEW_CHANGED,this.onUpdateState)}},{key:"componentWillUnmount",value:function(){this.kernel.off(gc.VIEW_CHANGED,this.onUpdateState)}},{key:"render",value:function(){var e=this.props.table;return this.state.formView?this.state.formView.isEnable()?l.a.createElement(ak,{table:e,viewId:this.state.formView.get("id"),onDisable:this.props.onHide}):l.a.createElement(sk,{table:e,viewId:this.state.formView.get("id"),onEnable:this.onUpdateState,onRemove:this.onUpdateState}):l.a.createElement(nk,{table:e,onCreate:this.props.onHide})}}]),n}(l.a.Component);s()(Ik,"propTypes",{table:X.a.object,onHide:X.a.func});var Fk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"removeOption",(function(e){var t=r.state.group;t.splice(e,1),r.setState({group:t}),r.onChange(t)})),s()(m()(r),"onChange",(function(e){r.kernel.execute("setGroup",e)})),r.table=e.table,r.kernel=r.table.kernel,r.tableModel=r.kernel.tableModel,r.view=r.tableModel.activeView,r.state={group:[]},r}return p()(n,[{key:"componentDidMount",value:function(){var e=this.view.get("group")||[];this.setState({group:wc(e)})}},{key:"addOption",value:function(e){var t=this.state.group;t.push({id:e,type:"asc"}),this.setState({group:t}),this.onChange(t)}},{key:"updateOption",value:function(e,t,n){var r=this.state.group;r[e][t]=n,this.setState({group:r}),this.onChange(r)}},{key:"getTextByOptionType",value:function(e){return wk(this.tableModel.getFieldsMap()[e].type)}},{key:"updateCheckboxSort",value:function(e,t,n,r){t.stopPropagation(),t.nativeEvent&&t.nativeEvent.stopPropagation(),e!==n.type&&this.updateOption(r,"type",e),this.setState({sortType:e})}},{key:"renderOption",value:function(e,t){var n=this,r=this.getTextByOptionType(e.id),o=this.props.table.kernel.tableModel.getFieldsMap();return l.a.createElement("div",{className:"lake-table-sort-item",key:t},l.a.createElement(bg,{onClick:function(){n.removeOption(t)}}),l.a.createElement(Pt.a,{defaultValue:e.id,dropdownClassName:"lake-table-menu-item",onChange:function(e){n.updateOption(t,"id",e)},style:{width:190,mariginLeft:14}},this.props.renderColumnOptions(Bc)),o[e.id].type===Ac.CHECKBOX?l.a.createElement(vt.a.Group,{value:this.state.sortType||e.type,onChange:function(e){n.updateOption(t,"type",e.target.value)}},l.a.createElement(vt.a.Button,{value:"asc"},l.a.createElement("span",{onClick:function(r){n.updateCheckboxSort("asc",r,e,t)}},l.a.createElement(mt.a,{checked:!1},l.a.createElement("span",{className:"lake-icon lake-icon-to-right"})),l.a.createElement(mt.a,{checked:!0}))),l.a.createElement(vt.a.Button,{value:"desc"},l.a.createElement("span",{onClick:function(r){n.updateCheckboxSort("desc",r,e,t)}},l.a.createElement(mt.a,{checked:!0},l.a.createElement("span",{className:"lake-icon lake-icon-to-right"})),l.a.createElement(mt.a,{checked:!1})))):l.a.createElement(vt.a.Group,{defaultValue:e.type,onChange:function(e){n.updateOption(t,"type",e.target.value)}},l.a.createElement(vt.a.Button,{value:"asc"},l.a.createElement("span",{style:r.style},r.asc)),l.a.createElement(vt.a.Button,{value:"desc"},l.a.createElement("span",{style:r.style},r.desc))))}},{key:"renderEmpty",value:function(){var e=this;return l.a.createElement("div",{style:{width:360}},l.a.createElement("div",{className:"lake-table-empty-desc"},_c("还未设置任何分组")),l.a.createElement(Pt.a,{defaultValue:_c("选择一列进行分组"),dropdownClassName:"lake-table-menu-item",onChange:function(t){e.addOption(t)},style:{marginLeft:13,fontWeight:"bold"},dropdownStyle:{width:230},bordered:!1},this.props.renderColumnOptions(Bc)))}},{key:"render",value:function(){var e=this,t=this.state.group;if(0===t.length)return this.renderEmpty();var n=t.map((function(t,n){return e.renderOption(t,n)}));return l.a.createElement("div",{style:{width:460}},l.a.createElement("div",{className:"lake-table-empty-desc"},_c("分组设置")),n)}}]),n}(l.a.Component);s()(Fk,"propTypes",{table:X.a.object,renderColumnOptions:X.a.func,onHide:X.a.func}),s()(Fk,"defaultProps",{onHide:function(){}});var Bk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onConfirm",(function(e){var t=e.key;r.kernel.execute("updateRowHeight",t),r.props.onHide()})),r.table=e.table,r.kernel=r.table.kernel,r.tableModel=r.kernel.tableModel,r.view=r.tableModel.activeView,r.state={rowHeight:null},r}return p()(n,[{key:"componentDidMount",value:function(){this.setState({rowHeight:this.view.get("rowHeight")})}},{key:"render",value:function(){var e=this.state.rowHeight;return e?l.a.createElement("div",{className:"lake-table-row-height"},l.a.createElement(yt.a,{defaultSelectedKeys:[e.type],mode:"vertical",onClick:this.onConfirm},Rc.rowHeights.map((function(t){return l.a.createElement(yt.a.Item,{key:t.type,icon:l.a.createElement("span",null,t.type===e.type&&l.a.createElement("span",{className:"lake-table-row-height-checked"},l.a.createElement(sg,null)),l.a.createElement("span",{className:"lake-icon lake-icon-rowheight-".concat(t.type)}))},_c(t.name))})))):null}}]),n}(l.a.Component);s()(Bk,"propTypes",{table:X.a.object,onHide:X.a.func}),s()(Bk,"defaultProps",{onHide:function(){}}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-menu-configs {\n  color: var(--yq-text-body);\n  margin: 4px 0;\n}\n.lake-table-menu-configs .ant-menu-submenu-arrow {\n  display: none;\n}\n.lake-table-menu-configs .lake-icon-table-arrow-right {\n  position: absolute;\n  right: 20px;\n  top: 12px;\n  color: var(--yq-text-caption);\n}\n.lake-table-menu-configs .ant-menu-submenu-active,\n.lake-table-menu-configs:not(.ant-menu-inline) .ant-menu-submenu-open {\n  color: var(--yq-text-body);\n}\n.lake-table-menu-configs .ant-menu-submenu-open .ant-menu-submenu-title {\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-table-menu-configs .ant-menu-submenu {\n  color: var(--yq-text-body);\n  padding: 0;\n}\n.lake-table-menu-configs .ant-menu-submenu .ant-menu-submenu-title {\n  padding: 0 16px;\n  height: 36px;\n  line-height: 36px;\n  padding-right: 30px;\n  margin: 0;\n  display: flex;\n  align-items: center;\n}\n.lake-table-menu-configs .ant-menu-submenu .ant-menu-submenu-title:hover {\n  background-color: var(--yq-bg-tertiary);\n  color: var(--yq-text-body);\n}\n.lake-table-menu-configs .ant-menu-submenu .ant-menu-submenu-title .ant-menu-item-icon {\n  margin-right: 0;\n}\n.lake-table-menu-configs .ant-menu-item {\n  position: relative;\n  padding-left: 16px;\n  height: 36px;\n  line-height: 36px;\n  color: var(--yq-text-body);\n  flex: 1;\n  display: flex;\n  align-items: center;\n}\n.lake-table-menu-configs .ant-menu-item.ant-menu-item-selected,\n.lake-table-menu-configs .ant-menu-item.ant-menu-item-active {\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-table-menu-configs .ant-menu-item.ant-menu-item-selected:hover,\n.lake-table-menu-configs .ant-menu-item.ant-menu-item-active:hover {\n  color: var(--yq-text-body);\n}\n.lake-table-menu-configs .ant-menu-item:hover .lake-icon-table-dot {\n  display: block;\n}\n.lake-table-menu-configs .ant-menu-title-content {\n  padding-right: 15px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 15em;\n  user-select: none;\n}\n.lake-table-menu-configs .lake-icon-table-dot {\n  position: absolute;\n  top: 7px;\n  right: 5px;\n  padding: 5px;\n  border-radius: 6px;\n  display: none;\n}\n.lake-table-menu-configs .lake-icon-table-dot:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-menu-configs .lake-table-menu-configs-input {\n  width: 124px;\n  border-radius: 6px;\n}\n.lake-table-menu-configs-settings {\n  padding-left: 4px;\n  margin-top: -10px;\n}\n.lake-table-menu-configs-settings > .ant-popover-content > .ant-popover-arrow {\n  display: none;\n}\n.lake-table-menu-configs-settings .ant-popover-inner-content {\n  padding: 0;\n  margin-top: -5px;\n}\n.lake-table-menu-configs-settings .ant-menu {\n  padding: 6px 0;\n}\n.lake-table-menu-configs-submenu {\n  color: var(--yq-text-body);\n  padding: 0;\n}\n.lake-table-menu-configs-submenu .ant-menu-item {\n  position: relative;\n  padding-left: 16px;\n  height: 36px;\n  line-height: 36px;\n  color: var(--yq-text-body);\n  display: flex;\n  align-items: center;\n}\n.lake-table-menu-configs-submenu .ant-menu-item .lake-icon-success {\n  display: none;\n  position: absolute;\n  top: 12px;\n  right: 10px;\n  color: var(--yq-text-caption);\n}\n.lake-table-menu-configs-submenu .ant-menu-item.ant-menu-item-selected {\n  background-color: var(--yq-bg-primary);\n}\n.lake-table-menu-configs-submenu .ant-menu-item.ant-menu-item-selected .lake-icon-success {\n  display: block;\n}\n.lake-table-menu-configs-submenu .ant-menu {\n  width: auto;\n  min-width: 140px;\n  padding: 6px 0;\n}\n.lake-table-menu-configs-submenu .ant-menu .ant-menu-item-selected,\n.lake-table-menu-configs-submenu .ant-menu .ant-menu-item-active {\n  background-color: var(--yq-bg-tertiary);\n  color: var(--yq-text-body);\n}\n.lake-table-menu-configs-submenu .ant-menu .ant-menu-item-selected:hover,\n.lake-table-menu-configs-submenu .ant-menu .ant-menu-item-active:hover {\n  color: var(--yq-text-body);\n}\n.lake-table-menu-configs-submenu .ant-menu .ant-menu-submenu-title .ant-menu-item-icon {\n  margin-right: 0;\n}\n");var Vk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"table",void 0),s()(m()(r),"kernel",void 0),s()(m()(r),"timer",void 0),s()(m()(r),"delay",void 0),s()(m()(r),"prevent",void 0),s()(m()(r),"handleVisibleChange",(function(e,t){var n=r.state.settingVisible;Object.keys(n).forEach((function(e){n[e]=!1})),n[t.key]=e,r.setState({settingVisible:n})})),s()(m()(r),"onClick",(function(e){r.props.onDoubleClick?r.timer=setTimeout((function(){r.prevent||r.props.onClick(e)}),r.delay):r.props.onClick(e)})),s()(m()(r),"onDoubleClick",(function(e){clearTimeout(r.timer),r.prevent=!0,r.props.onDoubleClick(e),setTimeout((function(){r.prevent=!1}),r.delay)})),r.table=e.table,r.kernel=r.table.kernel,r.state={configs:e.configs,settingVisible:{},editingKey:null,guide:null},r.timer=null,r.delay=200,r.prevent=!1,r}return p()(n,[{key:"componentWillReceiveProps",value:function(e){e.editingKey!==this.state.editingKey&&this.setState({editingKey:e.editingKey,configs:e.configs}),e.configs!==this.state.configs&&this.setState({configs:e.configs})}},{key:"renderItem",value:function(e){var t=this;return l.a.createElement(yt.a.Item,{key:e.key,icon:e.icon,onDoubleClick:function(n){n.key=e.key,t.onDoubleClick(n)}},e.key===this.state.editingKey?l.a.createElement(ht.a,{className:"lake-table-menu-configs-input",defaultValue:e.title,autoFocus:!0,onKeyDown:function(n){n.stopPropagation();var r=n.keyCode;27!==r?13===r&&e.onTitleChange(n,e):t.props.onInputBlur()},onClick:function(e){return e.stopPropagation()},onBlur:function(t){return e.onTitleChange(t,e)}}):e.title,e.settings&&!this.kernel.readOnly&&l.a.createElement(wt.a,{overlayClassName:"lake-table-menu-container lake-table-menu-configs-settings",content:l.a.createElement(yt.a,{onClick:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e.onSettingClick&&e.onSettingClick.apply(e,[e].concat(r)),t.handleVisibleChange(!1,e)}},e.settings.map((function(e){return t.renderItem(e)}))),trigger:"click",placement:"rightTop",visible:this.state.settingVisible[e.key],onClick:function(e){return e.stopPropagation()},onVisibleChange:function(n){return t.handleVisibleChange(n,e)}},l.a.createElement("span",{className:"lake-icon lake-icon-table-dot"})),e.showActiveIcon&&l.a.createElement("span",{className:"lake-icon lake-icon-success"}))}},{key:"renderConfigs",value:function(){var e=this;return this.state.configs.map((function(t){if(t.children){var n=t.children;if(t.groupBy){var r=t.children.reduce((function(e,n){var r=n[t.groupBy];return e[r]||(e[r]=[]),e[r].push(n),e}),{});Object.values(r).length>1&&(n=r)}return l.a.createElement(yt.a.SubMenu,{key:t.title,icon:t.icon,title:l.a.createElement("span",null,l.a.createElement("span",null,t.title),l.a.createElement("span",{className:"lake-icon lake-icon-table-arrow-right"})),popupClassName:"lake-table-menu-container lake-table-menu-configs-submenu ".concat(t.className)},Array.isArray(n)?n.map((function(t){return e.renderItem(t)})):Object.keys(n).map((function(t){return l.a.createElement(yt.a.ItemGroup,{key:t,title:t},n[t].map((function(t){return e.renderItem(t)})))})))}return e.renderItem(t)}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.defaultSelectedKeys,r=e.menuKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement(yt.a,{className:"lake-table-menu-configs ".concat(t),mode:"vertical",defaultSelectedKeys:n,key:r,onClick:this.onClick},this.renderConfigs()))}}]),n}(l.a.Component);s()(Vk,"defaultProps",{onClick:function(){},onDoubleClick:function(){},onInputBlur:function(){}});var Hk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"getActiveView",(function(){return{id:r.tableModel.activeView.get("id"),name:r.tableModel.activeView.get("name"),type:r.tableModel.activeView.get("type")}})),s()(m()(r),"getViews",(function(){return r.tableModel.getViews().map((function(e){return{id:e.get("id"),name:e.get("name"),type:e.get("type")}}))})),s()(m()(r),"onCancelEditing",(function(){r.setState({editingKey:null})})),s()(m()(r),"onChooseView",(function(e){if(!r.state.editingKey){var t=r.state.views.find((function(t){return t.id===e.key}));t&&(r.kernel.execute("activeView",t.id),r.setState({view:t}),r.props.onHide())}})),s()(m()(r),"onCreateView",(function(e){e.key===Gs.GRID?r.kernel.execute("insertGrid"):e.key===Gs.CARD?r.kernel.execute("insertCard"):e.key===Gs.KANBAN&&r.kernel.execute("insertKanban"),r.refresh(),r.table.emit(qs.HIDE_TOOLBAR_MENU)})),s()(m()(r),"refresh",(function(){var e=r.getViews();r.setState({views:e}),r.table.emit(qs.UPDATE_TOOLBAR_MENU)})),s()(m()(r),"onHandleSetting",(function(e,t){switch(t.domEvent.stopPropagation(),t.key){case"rename":r.onRenameView(e);break;case"copy":r.kernel.execute("copyView",e.key),r.refresh();break;case"remove":ct.a.confirm({title:_c("确定要删除「$1」视图?",e.title),okText:_c("确定"),cancelText:_c("取消"),zIndex:Og,onOk:function(){r.kernel.execute("removeView",e.key),r.refresh(),r.table.emit(qs.HIDE_TOOLBAR_MENU)}})}})),s()(m()(r),"onRenameView",(function(e){r.setState({editingKey:e.key})})),s()(m()(r),"onViewNameChange",(function(e,t){e.stopPropagation(),r.kernel.execute("updateViewName",e.target.value,t.key),r.onCancelEditing(),r.refresh()})),r.table=e.table,r.kernel=r.table.kernel,r.tableModel=r.kernel.tableModel,r.state={view:r.getActiveView(),views:r.getViews(),editingKey:null},r.newViews=Us,r}return p()(n,[{key:"componentDidMount",value:function(){this.props.table.on(qs.HIDE_TOOLBAR_MENU,this.onCancelEditing)}},{key:"render",value:function(){var e=this,t=this.state,n=t.view,r=t.views;if(!n)return null;var o=r.filter((function(e){return e.type===Gs.GRID})),a=r.map((function(t){var n=[{key:"rename",title:_c("重命名视图")},{key:"copy",title:_c("复制视图")},{key:"remove",title:_c("删除视图")}];return 1===o.length&&t.type===Gs.GRID&&n.splice(2,1),{key:t.id,title:t.name,icon:l.a.createElement("span",{className:"lake-icon lake-table-view-icon lake-icon-table-".concat(t.type.toLowerCase(),"-view")}),onSettingClick:e.onHandleSetting,onTitleChange:e.onViewNameChange,settings:n}})),i=[{icon:l.a.createElement("span",{className:"lake-icon lake-icon-table-plus"}),title:l.a.createElement("span",null,_c("新建视图")),children:this.newViews.map((function(e){return{key:e.type,icon:l.a.createElement("span",{className:"lake-icon lake-table-view-icon lake-icon-table-".concat(e.type.toLowerCase(),"-view")}),title:e.title,guide:e.guide}}))}];return l.a.createElement("div",{className:"lake-table-menu-container lake-table-view-manage"},l.a.createElement(Vk,{menuKey:a.map((function(e){return e.title})).join(","),configs:a,onClick:this.onChooseView,onDoubleClick:!this.kernel.readOnly&&this.onRenameView,defaultSelectedKeys:[n.id],table:this.props.table,onInputBlur:this.onCancelEditing,editingKey:this.state.editingKey,className:"lake-table-view-manage-inner"}),!this.kernel.readOnly&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"lake-table-view-manage-hr"}),l.a.createElement(Vk,{configs:i,onClick:this.onCreateView,className:"lake-table-menu-container lake-table-view-create",table:this.props.table})))}}]),n}(l.a.Component);s()(Hk,"propTypes",{table:X.a.object,onHide:X.a.func});var zk,qk="COL_CONFIG_MENU";function Uk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uk(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-view-setting {\n  color: var(--yq-text-primary);\n  margin: -12px 0 -8px;\n  min-width: 256px;\n}\n.lake-table-view-setting-index-column {\n  margin-left: 5px;\n}\n.lake-table-view-setting-wrap {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 50px;\n  line-height: 50px;\n  padding: 0 20px;\n}\n.lake-table-view-setting .lake-table-config-container {\n  margin-right: 0;\n}\n.lake-table-view-setting-title {\n  flex-grow: 1;\n}\n.lake-table-view-setting-hr {\n  border-top: 1px solid var(--yq-border-light);\n}\n.lake-table-view-setting-fields {\n  margin-top: 8px;\n}\n.lake-table-view-setting-field-item {\n  height: 36px;\n  display: flex;\n  align-items: center;\n  padding: 0 10px;\n  cursor: pointer;\n}\n.lake-table-view-setting-field-item:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-view-setting-field-icon {\n  font-size: 16px;\n}\n.lake-table-view-setting-operation-icon {\n  width: 24px;\n  height: 24px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 6px;\n  color: var(--yq-icon-primary);\n}\n.lake-table-view-setting-operation-icon:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-view-setting-field-name {\n  flex-grow: 1;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  user-select: none;\n  line-height: 1em;\n  max-width: 142px;\n}\n.lake-table-view-setting-lock {\n  color: var(--yq-text-caption);\n}\n.lake-table-view-setting-disable .lake-table-view-setting-field-name,\n.lake-table-view-setting-disable .lake-icon {\n  color: var(--yq-text-caption);\n}\n.lake-table-view-setting .lake-icon-draggable {\n  cursor: grab;\n}\n.lake-table-view-setting .ant-select {\n  width: 170px;\n  margin-left: 5px;\n}\n.lake-table-view-setting .ant-select .ant-select-selector {\n  border-radius: 6px;\n  min-width: 120px;\n}\n.lake-table-view-setting .ant-radio-button-wrapper:first-child {\n  border-radius: 4px 0 0 4px;\n}\n.lake-table-view-setting .ant-radio-button-wrapper:last-child {\n  border-radius: 0 4px 4px 0;\n}\n");var Wk=(qt()((zk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;d()(this,n),r=t.call(this,e),s()(m()(r),"onCoverSourceChange",(function(e){e?(r.cover.show=!0,r.cover.id=e):(r.cover.show=!1,r.cover.id=null),r.kernel.execute("setCover",r.cover)})),s()(m()(r),"onCoverDisplayChange",(function(e){r.cover.display=e.target.value,r.kernel.execute("setCover",r.cover)})),s()(m()(r),"onShowFieldChange",(function(e){r.kernel.execute("setShowField",e)})),s()(m()(r),"showConfigMenu",(function(e){var t=Gk(Gk({},e),{},{type:qk,style:r.getConfigColMenuStyle(e.e),modalConfig:{closeModal:["ColConfigs","Menubar"]}});r.table.emit(qs.SHOW_MENU,t)})),s()(m()(r),"handleScroll",$()((function(){var e=["Menubar","ColConfigs"].filter((function(e){return Rk.hiddenModal(e)}));Rk.hiddenModal(e)}),100));var o=r.props,a=o.table,i=o.view;return r.table=a,r.kernel=r.table.kernel,r.tableModel=r.kernel.tableModel,r.cover=i.get("cover")||{},r}return p()(n,[{key:"columns",get:function(){var e=this.tableModel.getFieldsMap();return this.props.columns.map((function(t){return Gk(Gk({},e[t.id]),t)}))}},{key:"onFieldSort",value:function(e){var t=[this.columns[0]].concat(e);this.kernel.execute("setColumns",t),this.setState({columns:t})}},{key:"onFieldChange",value:function(e,t){var n=me()(this.columns),r=n.findIndex((function(t){return t.id===e.id}));n[r].hidden=!t,this.kernel.execute("setColumns",n)}},{key:"renderCoverSource",value:function(){var e=[{label:_c("无封面"),value:null,icon:l.a.createElement("span",{className:"lake-icon lake-icon-stop"})}].concat(me()(this.columns.filter((function(e){return e.type===Ac.IMAGE})).map((function(e){return{label:e.name,value:e.id,icon:l.a.createElement("span",{className:"lake-icon lake-icon-col-image"})}}))||[])),t=this.cover.id;return e.map((function(e){return e.value})).includes(this.cover.id)||(this.onCoverSourceChange(null),t=null),l.a.createElement("div",{className:"lake-table-view-setting-wrap lake-table-view-setting-cover-source"},l.a.createElement("span",{className:"lake-table-view-setting-title"},_c("封面来源")),l.a.createElement(Pt.a,{defaultValue:t,dropdownClassName:"lake-table-menu-container lake-table-view-setting",onChange:this.onCoverSourceChange},e.map((function(e){return l.a.createElement(Pt.a.Option,{value:e.value,key:e.value},e.icon,e.label)}))))}},{key:"renderCoverDisplay",value:function(){var e=[{label:_c("适应"),value:"fit"},{label:_c("裁剪"),value:"clip"}];return l.a.createElement("div",{className:"lake-table-view-setting-wrap lake-table-view-setting-cover-display"},l.a.createElement("span",{className:"lake-table-view-setting-title"},_c("封面效果")),l.a.createElement(vt.a.Group,{options:e,onChange:this.onCoverDisplayChange,defaultValue:this.cover.display,optionType:"button"}))}},{key:"renderShowFieldName",value:function(){return l.a.createElement("div",{className:"lake-table-view-setting-wrap lake-table-view-setting-show-name"},l.a.createElement("span",{className:"lake-table-view-setting-title"},_c("显示字段名")),l.a.createElement(It.a,{defaultChecked:this.props.view.get("showField"),onChange:this.onShowFieldChange,size:"small"}))}},{key:"getConfigColMenuStyle",value:function(e){for(var t=e.target,n=t.getBoundingClientRect().top,r=t;r!==document.body&&"CANVAS"!==r.tagName&&!r.classList.contains("lake-table-view-setting");)r=r.parentNode;return r.classList.contains("lake-table-view-setting")||assert(!1),{width:102,top:n,left:r.getBoundingClientRect().right+5}}},{key:"renderFields",value:function(){var e=this,t=Gt()(this.columns),n=t[0],r=t.slice(1);return l.a.createElement("div",{className:"lake-table-view-setting-fields",onScroll:this.handleScroll},l.a.createElement(ew,{maxHeight:400,container:this.table.container},l.a.createElement("div",{className:"lake-table-view-setting-field-item lake-table-view-setting-index-column"},l.a.createElement(dt.a,{title:_c("索引列无法被删除、移动、替换"),arrowPointAtCenter:!0},l.a.createElement("span",{className:"lake-icon lake-table-view-setting-lock lake-icon-table-lock"})),l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(n.type," lake-table-view-setting-field-icon"),style:{marginLeft:"4px"}}),l.a.createElement("span",{className:"lake-table-view-setting-field-name"},n.name),!this.props.readonly&&l.a.createElement("span",{className:"lake-icon lake-icon-table-column-config lake-table-config-container lake-table-view-setting-field-icon lake-table-view-setting-operation-icon",style:{marginLeft:"34px"},onClick:function(t){return e.showConfigMenu({e:t,operationCol:0})}})),l.a.createElement(fb,{onChange:this.onFieldSort,list:r,render:function(t){return t.map((function(t,n){n+=1;var r=t.hidden;return l.a.createElement("div",{className:"lake-table-view-setting-field-item ".concat(r?"lake-table-view-setting-disable":""),key:t.id,"data-id":t.id,draggable:!window.h5,"data-index":n},l.a.createElement("span",{className:"lake-icon lake-icon-table-drag lake-table-view-setting-operation-icon"}),l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(t.type.toLowerCase()," lake-table-view-setting-field-icon")}),l.a.createElement("span",{className:"lake-table-view-setting-field-name",draggable:"true","data-draggable":"false"},t.name),l.a.createElement("span",{className:S()("lake-icon  lake-table-view-setting-field-icon lake-table-view-setting-operation-icon",r?"lake-icon-table-column-hidden":"lake-icon-table-column-show"),onClick:function(){return e.onFieldChange(t,r)}}),!e.props.readonly&&l.a.createElement("span",{className:"lake-icon lake-icon-table-column-config lake-table-config-container lake-table-view-setting-field-icon lake-table-view-setting-operation-icon",onClick:function(t){return e.showConfigMenu({e:t,operationCol:n,modalConfig:{closeModal:["ColConfigs"]}})}}))}))}})))}},{key:"render",value:function(){var e=this.props.fields;return l.a.createElement("div",{className:"lake-table-menu-container lake-table-view-setting"},e.includes("cover")&&l.a.createElement(l.a.Fragment,null,this.renderCoverSource(),this.renderCoverDisplay(),l.a.createElement("div",{className:"lake-table-view-setting-hr"})),e.includes("showField")&&l.a.createElement(l.a.Fragment,null,this.renderShowFieldName(),l.a.createElement("div",{className:"lake-table-view-setting-hr"})),e.includes("columns")&&this.renderFields())}}]),n}(l.a.Component)).prototype,"onFieldSort",[Tk],Object.getOwnPropertyDescriptor(zk.prototype,"onFieldSort"),zk.prototype),qt()(zk.prototype,"onFieldChange",[Tk],Object.getOwnPropertyDescriptor(zk.prototype,"onFieldChange"),zk.prototype),zk);Wk.defaultProps={fields:["columns"]},Wk.propTypes={fields:X.a.array,table:X.a.object,columns:X.a.array,view:X.a.object,readonly:X.a.bool};var Yk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"render",value:function(){var e=this.props,t=e.table,n=e.view,r=e.columns,o=e.readonly;return l.a.createElement(Wk,{table:t,view:n,columns:r,fields:["cover","showField","columns"],readonly:o})}}]),n}(l.a.Component);s()(Yk,"propTypes",{table:X.a.object,view:X.a.object,columns:X.a.array,readonly:X.a.bool});var $k=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"render",value:function(){var e=this.props,t=e.table,n=e.view,r=e.columns,o=e.readonly;return l.a.createElement(Wk,{table:t,view:n,columns:r,fields:["showField","columns"],readonly:o})}}]),n}(l.a.Component);s()($k,"propTypes",{table:X.a.object,view:X.a.object,columns:X.a.array,readonly:X.a.bool});var Kk=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onChange",(function(e){var t=[{id:e.id}];r.setState({group:t}),r.kernel.execute("setGroup",t),r.props.onHide()})),r.table=e.table,r.kernel=r.table.kernel,r.tableModel=r.kernel.tableModel,r.kanbanService=r.kernel.kanbanService,r.groupService=r.kernel.groupService,r.view=r.tableModel.activeView,r.state={group:[]},r}return p()(n,[{key:"componentDidMount",value:function(){var e=this.groupService.getGroup()||[];this.setState({group:wc(e)})}},{key:"renderOption",value:function(e){var t=this;return l.a.createElement("div",{key:e.id,className:"lake-table-menu-kanban-group-option",onClick:function(){t.onChange(e)}},l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-type lake-icon-col-".concat(e.type.toLowerCase())}),e.name),l.a.createElement("span",{className:e.id===this.state.group[0].id?"lake-icon lake-icon-success":"lake-table-menu-kanban-group-empty"}))}},{key:"renderOptions",value:function(){var e=this,t=this.kanbanService.getGroupColumns();return l.a.createElement(ew,{minHeight:36,maxHeight:400,container:this.table.container},l.a.createElement("div",{className:"lake-table-menu-kanban-group-options"},t.map((function(t){return e.renderOption(t)}))))}},{key:"render",value:function(){return 0===this.state.group.length?null:l.a.createElement("div",{className:"lake-table-menu-container lake-table-menu-kanban-group"},this.renderOptions())}}]),n}(l.a.Component);s()(Kk,"propTypes",{table:X.a.object,onHide:X.a.func}),s()(Kk,"defaultProps",{onHide:function(){}});var Xk,Zk,Qk,Jk,ex,tx,nx=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"render",value:function(){var e=this.props,t=e.table,n=e.view,r=e.columns,o=e.readonly;return l.a.createElement(Wk,{table:t,view:n,columns:r,readonly:o})}}]),n}(l.a.Component);s()(nx,"propTypes",{table:X.a.object,view:X.a.object,columns:X.a.array,readonly:X.a.bool});var rx={sort:460,filter:360,form:"auto",rowHeight:104,viewManage:"auto",cardSetting:280},ox={filter:Mk,sort:Nk,form:Ik,group:Fk,rowHeight:Bk,viewManage:Hk,cardSetting:Yk,kanbanSetting:$k,gridSetting:nx,kanbanGroup:Kk};Xk=Lk({name:"Menu"}),Zk=jk({name:"Menu"}),Qk=Ak({name:"Menu"}),Jk=function(e){ed(e.name,"必须要标明所属类的class Name， 否则打包压缩时会有问题");var t=e.name;return function(e,n,r){var o=r.value,a=r.configurable,i=r.enumerable;return ed(o,"函数写法必须为一般写法，不得为箭头函数, 装饰器会帮忙绑定 this"),ed("function"==typeof o,"装饰的必须为 function"),{configurable:a,enumerable:i,get:function(){var e=function(){o.bind(this)()}.bind(this);return Rk.registerDataSourceFn(t,e),Object.defineProperty(this,n,{configurable:!0,writable:!0,enumerable:!1,value:e}),e}}}}({name:"Menu"}),Xk((tx=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"hide",(function(){clearTimeout(r.showTimer),r.state.visible&&r.setState({visible:!1,type:null})})),s()(m()(r),"show",(function(e,t){var n=r.props.table,o={zIndex:Cg,top:35,left:e.offsetLeft,minWidth:rx[t]};n.container.offsetWidth<o.left+420&&(delete o.left,o.right=10),r.getActiveView(),r.setState({style:o,type:t,visible:!0})})),s()(m()(r),"renderColumnOptions",(function(e){var t=r.props.table.kernel.tableModel.getFieldsMap();return r.state.columns.map((function(n){var r=t[n.id];return e.includes(r.type)?l.a.createElement(Pt.a.Option,{value:r.id,key:r.id},l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(r.type.toLowerCase()),style:{marginRight:8}}),r.name):null}))})),r.state={type:null,visible:!1,view:[]},r}return p()(n,[{key:"componentDidMount",value:function(){var e=this.props.table;e.on(qs.SHOW_TOOLBAR_MENU,this.delayShow),e.on(qs.HIDE_TOOLBAR_MENU,this.delayHide),e.kernel.on(gc.FILTERED,this.delayHide)}},{key:"componentWillUnmount",value:function(){var e=this.props.table;e.off(qs.SHOW_TOOLBAR_MENU,this.delayShow),e.off(qs.HIDE_TOOLBAR_MENU,this.delayHide),e.kernel.off(gc.FILTERED,this.delayHide)}},{key:"delayHide",value:function(){var e=this;this.hideTimer=setTimeout((function(){e.hide()}),60)}},{key:"delayShow",value:function(e){var t,n=this,r=e.e,o=e.type,a=e.targetClassName;if(r)for(t=r.target;!t.classList.contains(a||"lake-table-button");)t=t.parentNode;else t=document.querySelector("#toolbar-form");o!==this.state.type&&clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.showTimer=setTimeout((function(){n.show(t,o)}),100)}},{key:"getActiveView",value:function(){var e=this.props.table.kernel.tableModel.getActiveView(),t=e.get("columns");this.setState({view:e,columns:t})}},{key:"render",value:function(){var e=this.props,t=e.table,n=e.readonly,r=this.state,o=r.visible,a=r.style,i=r.type,c=r.view,s=r.columns;if(!o)return null;var u=ox[i];return u?l.a.createElement("div",{className:"lake-table-menu",style:a},l.a.createElement(u,{table:t,onHide:this.delayHide,renderColumnOptions:this.renderColumnOptions,view:c,columns:s,readonly:n})):null}}]),n}(l.a.Component),s()(tx,"propTypes",{table:X.a.object,readonly:X.a.bool}),qt()((ex=tx).prototype,"delayHide",[Zk],Object.getOwnPropertyDescriptor(ex.prototype,"delayHide"),ex.prototype),qt()(ex.prototype,"delayShow",[Qk],Object.getOwnPropertyDescriptor(ex.prototype,"delayShow"),ex.prototype),qt()(ex.prototype,"getActiveView",[Jk],Object.getOwnPropertyDescriptor(ex.prototype,"getActiveView"),ex.prototype),ex));var ax,ix,lx,cx,sx;function ux(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ux(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ux(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-editor .lake-table-menubar {\n  position: fixed;\n  color: var(--yq-text-primary);\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 4px;\n  padding: 5px 0;\n  width: 210px;\n  z-index: 500;\n}\n.lake-table-editor .lake-table-menubar-item {\n  padding: 8px 12px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n  height: 34px;\n  overflow: visible;\n}\n.lake-table-editor .lake-table-menubar-item .ant-input {\n  width: 48px;\n  margin: 0 6px;\n  text-align: center;\n}\n.lake-table-editor .lake-table-menubar-item:hover {\n  background: var(--yq-bg-tertiary);\n}\n.lake-table-editor .lake-table-menubar-item .ant-input-number {\n  border-radius: 2px;\n}\n.lake-table-editor .lake-table-menubar-item .ant-input-number-sm {\n  width: 70px;\n}\n.lake-table-editor .lake-table-menubar-item.disabled {\n  color: var(--yq-text-caption);\n  cursor: not-allowed;\n}\n.lake-table-editor .lake-table-menubar-item.disabled .lake-icon {\n  color: var(--yq-text-caption);\n}\n.lake-table-editor .lake-table-menubar-icon {\n  width: 16px;\n  font-size: 16px;\n  color: var(--yq-text-body);\n  line-height: 34px;\n  margin-right: 8px;\n}\n.lake-table-editor .lake-table-menubar-hotkey {\n  color: var(--yq-text-caption);\n  font-size: 12px;\n}\n.lake-table-editor .lake-table-menubar-content {\n  display: flex;\n  align-items: center;\n  line-height: 24px;\n}\n.lake-table-editor .lake-table-menubar .lake-icon-arrow-right {\n  color: var(--yq-text-caption);\n}\n.lake-table-editor .lake-table-menubar-submenu {\n  position: absolute;\n  background-color: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 4px;\n  padding: 6px 0;\n  min-width: 104px;\n  z-index: 500;\n}\n.lake-table-editor .lake-table-menubar-submenu .lake-table-submenu-item {\n  display: flex;\n  user-select: none;\n  white-space: nowrap;\n  align-items: center;\n  padding: 6px 12px;\n}\n.lake-table-editor .lake-table-menubar-submenu .lake-table-submenu-item:hover {\n  background: var(--yq-bg-tertiary);\n}\n.lake-table-editor .lake-table-menubar-submenu .lake-table-submenu-text {\n  display: inline-flex;\n  flex: 1;\n  margin-right: 16px;\n}\n.lake-table-editor .lake-table-menubar .split {\n  border-top: 1px solid var(--yq-border-light);\n  margin: 8px 0;\n}\n"),ax=Lk({name:"Menubar"}),ix=jk({name:"Menubar"}),lx=Ak({name:"Menubar"}),ax((sx=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onResize",(function(){r.state.visible&&r.hideMenu()})),s()(m()(r),"getMenuStyle",(function(){var e=r.state,t=e.options,n=e.menubar;if(t.style)return dx(dx({},t.style),{},{zIndex:Cg});var o=n.filter((function(e){return"seperator"===e.type})).length,a=16*o+34*(n.length-o)+12,i=t.e,l=i.clientX,c=i.clientY,s=document.body.clientWidth-200,u=document.body.clientHeight-a,d={left:Math.min(s,l+10),top:Math.max(Math.min(u,c+10),56),zIndex:Cg};return t.colConfig&&(d.top=120,d.left=Math.min(s,l+10)),a>document.body.clientHeight-56&&(d.height=document.body.clientHeight-56,d.overflow="auto",d.top=56),d})),r.state={},r.table=e.table,r}return p()(n,[{key:"componentDidMount",value:function(){var e=this.props.table;e.on(qs.SHOW_MENU,this.showMenu),e.on(qs.HIDE_MENU,this.hideMenu),e.on(qs.SCROLL,this.hideMenu),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"hideMenu",value:function(){this.state.visible&&this.setState({visible:!1})}},{key:"showMenu",value:function(e){var t=function(e,t){var n,r=e.kernel.tableModel.getActiveView();switch(t.type||r.type){case Gs.GRID:n=function(e,t,n){var r=t.selections;if(!r)return null;var o=r.row,a=r.col,i=r.rowCount,l=t&&t.target?t.target.col:a;return[{command:"colConfigs",text:_c("编辑列"),icon:"edit-new",disable:e.kernel.readOnly||["row","selection","cell"],onClick:function(){e.emit(qs.COL_CONFIGS,{col:l})}},{type:"seperator",disable:["row","selection","cell"]},{command:"copy",text:_c("复制"),hotkey:hs(["command","+","C"]),onClick:function(){e.kernel.execute("copy")}},{command:"paste",text:_c("粘贴"),hotkey:hs(["command","+","V"]),disable:e.kernel.readOnly,onClick:function(){var t=e.kernel.processService.clipboardData;t&&e.kernel.execute("paste",t)}},{type:"seperator",disable:["row","selection","cell"]},function(e,t){return!e.kernel.readOnly&&!["row","selection","cell"].includes(t.mode)&&0!==r.col&&0!==l&&{command:"insertGridColLeft",text:_c("向左插入列"),icon:"left-arrow",disable:e.kernel.readOnly||["row","selection","cell"],onClick:function(){e.emit(qs.COL_CONFIGS,{col:l,options:{create:!0}})}}},{command:"insertGridColRight",text:_c("向右插入列"),icon:"right-arrow",disable:e.kernel.readOnly||["row","selection","cell"],onClick:function(){e.emit(qs.COL_CONFIGS,{col:l+1,options:{create:!0}})}},{type:"seperator",disable:["row","selection"]},{command:"removeGridCol",text:_c("删除列"),icon:"table-delete",disable:e.kernel.readOnly||["row","selection","cell"],disabled:n.get("columns").length<=1||0===l,disabledText:n.get("columns").length<=1?_c("数据表至少需要有一列"):_c("本列是索引列，是每条记录的关键信息，用来标识每条记录，不能被删除"),onClick:function(){e.kernel.execute("removeCol",n.data.columns[l].id)}},{command:"insertGridRowUp",text:_c("向上插入行"),disable:e.kernel.readOnly||["col","selection"],icon:"up-arrow",onClick:function(){var t;e.kernel.groupService.grouping&&(t=e.kernel.groupService.getGroupValueByRow(n,o)),e.kernel.execute("insertRow",o,t)}},{command:"insertGridRowDown",text:_c("向下插入行"),disable:e.kernel.readOnly||["col","selection"],icon:"down-arrow",onClick:function(){e.kernel.groupService.grouping&&e.kernel.groupService.getGroupValueByRow(n,o),e.kernel.execute("insertRow",o+1)}},{type:"seperator",disable:["row","selection"]},{command:"expandGridRow",text:_c("展开行"),hotkey:"Space",disable:["col","selection"],icon:"table-expand",onClick:function(){e.emit(qs.SHOW_ROW_EDITOR,{row:o})}},{command:"removeGridRow",text:_c("删除行"),disable:e.kernel.readOnly||["col"],onClick:function(){for(var t=[],r=o;r<o+i;r++)t.push(n.data.rows[r].id);e.kernel.execute("removeRows",t)}},function(e,t){if(["row","selection","col"].includes(t.mode))return!1;var n=t.target;return!(!n||!n.value)&&!(!Vc.includes(n.cellType)||!n.value.src)&&{command:"downloadImage",text:_c("下载$1",Lc(n.cellType)),icon:"download",onClick:function(){window.open(n.value.src,"_blank")}}}]}(e,t,r);break;case Gs.CARD:n=function(e,t,n){var r=t.row;return[{command:"insertGridRowLeft",text:_c("向左插入记录"),icon:"left-arrow",disable:e.kernel.readOnly,onClick:function(){var t=e.kernel.execute("insertRow",r),o=n.get("rows").findIndex((function(e){return e.id===t[1]}));setTimeout((function(){e.emit(qs.SHOW_ROW_EDITOR,{row:o,mode:"edit"})}),300)}},{command:"insertGridRowRight",text:_c("向右插入记录"),icon:"right-arrow",disable:e.kernel.readOnly,onClick:function(){var t=e.kernel.execute("insertRow",r+1),o=n.get("rows").findIndex((function(e){return e.id===t[1]}));setTimeout((function(){e.emit(qs.SHOW_ROW_EDITOR,{row:o,mode:"edit"})}),300)}},{type:"seperator"},{command:"expandGridRow",hotkey:"Space",text:_c("展开记录"),disable:["col","selection"],icon:"table-expand",onClick:function(){e.emit(qs.SHOW_ROW_EDITOR,{row:r})}},{command:"removeGridRow",text:_c("删除记录"),disable:e.kernel.readOnly||["col"],onClick:function(){var t=n.get("rows");e.kernel.execute("removeRows",[t[r].id])}}]}(e,t,r);break;case Gs.KANBAN:n=function(e,t,n){var r=t.row;return[{command:"insertGridRowLeft",text:_c("向上插入记录"),icon:"top-arrow",disable:e.kernel.readOnly,onClick:function(){var t=n.data,o=t.rows,a=t.group,i=o[r].id,l=n.getGroupByRow(i),c=o.findIndex((function(e){return e.id===i})),s={};s[a[0].id]={value:wc(l.titleValue)};var u=e.kernel.execute("insertRow",c,s,l.value),d=n.get("rows").findIndex((function(e){return e.id===u[1]}));setTimeout((function(){e.viewManager.getViewRenderer().viewportHelper.scrollToCard(d),e.emit(qs.SHOW_ROW_EDITOR,{row:d,mode:"edit"})}),300)}},{command:"insertGridRowRight",text:_c("向下插入记录"),icon:"bottom-arrow",disable:e.kernel.readOnly,onClick:function(){var t=n.data,o=t.rows,a=t.group,i=o[r].id,l=n.getGroupByRow(i),c=o.findIndex((function(e){return e.id===i})),s={};s[a[0].id]={value:wc(l.titleValue)};var u=e.kernel.execute("insertRow",c+1,s,l.value),d=n.get("rows").findIndex((function(e){return e.id===u[1]}));setTimeout((function(){e.viewManager.getViewRenderer().viewportHelper.scrollToCard(d),e.emit(qs.SHOW_ROW_EDITOR,{row:d,mode:"edit"})}),300)}},{type:"seperator"},{command:"copyGridRow",text:_c("复制记录"),disable:e.kernel.readOnly,onClick:function(){var t=n.data.rows[r].id,o=n.getGroupByRow(t),a=e.kernel.execute("copyRow",r,o),i=n.get("rows").findIndex((function(e){return e.id===a[1]}));setTimeout((function(){e.viewManager.getViewRenderer().viewportHelper.scrollToCard(i)}),300)}},{command:"expandGridRow",hotkey:"Space",text:_c("展开记录"),icon:"table-expand",onClick:function(){e.emit(qs.SHOW_ROW_EDITOR,{row:r})}},{command:"removeGridRow",text:_c("删除记录"),disable:e.kernel.readOnly,onClick:function(){var t=n.get("rows");e.kernel.execute("removeRows",[t[r].id])}}]}(e,t,r);break;case qk:n=function(e,t,n){var r=t.operationCol;return[{command:"colConfigs",text:_c("编辑"),icon:"edit-new",disable:["row","selection","cell"],onClick:function(t){var n=function(t){if(t.target){var n=t.target.getBoundingClientRect(),r=n.left,o=n.top,a=e.container.getBoundingClientRect();return{left:r-a.left-10,top:o-a.top-60}}}(t.e);e.emit(qs.COL_CONFIGS,{col:r,options:{style:n}})}},{command:"removeGridCol",text:_c("删除"),icon:"table-delete",disable:["row","selection","cell"],disabled:n.get("columns").length<=1||0===r,disabledText:n.get("columns").length<=1?_c("数据表至少需要有一列"):_c("本列是索引列，是每条记录的关键信息，用来标识每条记录，不能被删除"),onClick:function(){e.kernel.execute("removeCol",n.data.columns[r].id)}}]}(e,t,r);break;default:assert(!1)}if(!n)return null;var o=[];n.forEach((function(n,r){if(("function"!=typeof n||(n=n(e,t)))&&!(Array.isArray(n.disable)&&n.disable.includes(t.mode)||!0===n.disable||(o.push(n),"seperator"!==n.type))){var a=o[o.length-2];a&&"seperator"!==a.type||o.pop()}}));var a=o[o.length-1];return a&&"seperator"===a.type&&o.pop(),o}(this.props.table,e);t&&0!==t.length&&this.setState({visible:!0,menubar:t,options:e})}},{key:"onClickMenu",value:function(e,t){if(e.onClick)return e.onClick(t),void this.hideMenu();void 0===t?this.props.table.execute(e.command):this.props.table.execute(e.command,t),this.hideMenu()}},{key:"render",value:function(){var e=this,t=this.state,n=t.menubar,r=t.visible;return t.options,r?l.a.createElement("div",{className:"lake-table-menubar",style:this.getMenuStyle(),onContextMenu:function(e){return e.preventDefault()},onMouseDown:this.onMouseDown},n.map((function(t,n){return"seperator"===t.type?l.a.createElement("div",{key:n,className:"split"}):t.disabled?l.a.createElement(dt.a,{title:t.disabledText,placement:"right",key:n},l.a.createElement("div",{key:n,className:"lake-table-menubar-item disabled",id:"menubar-".concat(t.command),onClick:function(e){e.stopPropagation()}},l.a.createElement("div",{className:"lake-table-menubar-content"},l.a.createElement("div",{className:"lake-table-menubar-icon"},t.icon&&l.a.createElement("span",{className:"lake-icon lake-icon-".concat(t.icon)})),t.text),t.hotkey?l.a.createElement("div",{className:"lake-table-menubar-hotkey"},t.hotkey):null)):l.a.createElement("div",{key:n,className:"lake-table-menubar-item",id:"menubar-".concat(t.command),onClick:function(n){e.onClickMenu(t,{e:n})}},l.a.createElement("div",{className:"lake-table-menubar-content"},l.a.createElement("div",{className:"lake-table-menubar-icon"},t.icon?l.a.createElement("span",{className:"lake-icon lake-icon-".concat(t.icon)}):null),t.text),t.hotkey?l.a.createElement("div",{className:"lake-table-menubar-hotkey"},t.hotkey):null)}))):null}}]),n}(l.a.Component),s()(sx,"propTypes",{table:X.a.object}),qt()((cx=sx).prototype,"hideMenu",[ix],Object.getOwnPropertyDescriptor(cx.prototype,"hideMenu"),cx.prototype),qt()(cx.prototype,"showMenu",[lx],Object.getOwnPropertyDescriptor(cx.prototype,"showMenu"),cx.prototype),qt()(cx.prototype,"onClickMenu",[Tk],Object.getOwnPropertyDescriptor(cx.prototype,"onClickMenu"),cx.prototype),cx));var fx,px,hx,mx,vx,gx,bx,yx,wx,kx=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"inputs",[]),s()(m()(r),"getOptions",(function(){var e=r.props,t=e.configs,n=e.defaultValue,o=r.state,a=o.options,i=o.multi,l=o.color;return a?(a.forEach((function(e){e.id||(e.ud=fs(6))})),{options:a,multi:i,color:l}):(a=[{value:n,id:fs(6)},{value:"",id:fs(6)},{value:"",id:fs(6)}],l=!!t&&!!t.color,t&&t.options&&0!==t.options.length&&(a=t.options,i=t.type===Ac.MULTI_SELECT,void 0===t.color&&(l=!!t.options[0]&&!!t.options[0].color)),a.forEach((function(e,t){l&&!e.color&&(e.color=0===t?Jh.getNextColor("",r.themeManager):Jh.getNextColor(a[t-1].color,r.themeManager))})),{options:a,multi:i,color:l})})),s()(m()(r),"onAddItem",(function(e){var t=r.state.options,n={value:"",id:fs(6)};r.state.color&&(0===t.length?n.color=Jh.getNextColor("",r.themeManager):n.color=Jh.getNextColor(t[t.length-1].color,r.themeManager)),t.push(n),r.setState({options:t.slice()},(function(){r.optionList&&r.optionList.current&&(r.optionList.current.scrollTop=1e4),e&&r.inputs.length>1&&r.inputs[r.inputs.length-1].focus(),r.onChange()}))})),s()(m()(r),"onChangeItem",(function(e,t){var n=e.target.value,o=r.state.options;o[t].value=n,r.setState({options:o},(function(){r.inputs[t].focus(),r.onChange()}))})),s()(m()(r),"onDeleteItem",(function(e,t){var n=r.state.options;n.splice(t,1),r.inputs.splice(t,1),r.setState({options:n.slice()},(function(){r.onChange()}))})),s()(m()(r),"onChangeColor",(function(e,t){var n=r.state.options;n[e].color=t,r.setState({options:n.slice()},(function(){r.onChange()}))})),s()(m()(r),"toggleColor",(function(e){var t=e.target.checked,n=r.state.options;t&&n[0]&&!n[0].color&&n.forEach((function(e,t){e.color=Jh.getByIndex(t,r.themeManager)})),r.setState({options:n,color:t},(function(){r.onChange()}))})),s()(m()(r),"beforeChange",(function(e){r.setState({options:e},(function(){r.onChange()}))})),s()(m()(r),"onPressEnter",(function(e){e>=r.state.options.length-1?r.onAddItem(!0):r.inputs[e+1].input.focus()})),r.state={},r}return p()(n,[{key:"themeManager",get:function(){return this.props.themeManager}},{key:"componentDidMount",value:function(){this.optionList=l.a.createRef();var e=this.getOptions(),t=e.options,n=e.multi,r=e.color;this.setState({options:t,multi:n,color:r},this.props.onCompleteMount)}},{key:"onChange",value:function(){var e=this,t={color:this.state.color},n=[];this.state.options.forEach((function(t){if(""!==t.value){var r={value:t.value,id:t.id};e.state.color&&(r.color=t.color),""!==t.value&&n.push(r)}})),t.options=Ye()(n,(function(e){return e.value})),this.props.multiple&&(t.multi=!!this.state.multi),this.props.onChange&&this.props.onChange(t)}},{key:"_ignoreSortableRule",value:function(e){return!(null==e||!e.tagName||"input"!==e.tagName.toLowerCase())}},{key:"render",value:function(){var e=this;return this.state.options?l.a.createElement("div",null,this.props.title,l.a.createElement("div",{className:"multi-select"},l.a.createElement(mt.a,{size:"small",checked:!!this.state.color,onChange:this.toggleColor,style:{marginLeft:12}}),_c("颜色")),l.a.createElement("div",{className:"option-list",ref:this.optionList},l.a.createElement(fb,{list:this.state.options,onChange:this.beforeChange,render:function(t){return t.map((function(t,n){var r=null;return e.state.color&&(r=l.a.createElement(wt.a,{placement:"leftTop",overlayClassName:"lake-table-colorpicker",content:l.a.createElement(Dg,{colorSource:me()(Kh),activeColors:t.color,onSelect:function(t){e.onChangeColor(n,t)},themeManager:e.themeManager})},l.a.createElement("span",{className:"option-color",style:{background:Jh.getRenderColor(t.color,e.themeManager)}}))),l.a.createElement("div",{className:"input-item",key:t.id,"data-id":t.id},l.a.createElement("span",{className:"input-item-content",draggable:"true","data-draggable":"false"},r,l.a.createElement(ht.a,{value:t.value,onChange:function(t){e.onChangeItem(t,n)},onPressEnter:function(){e.onPressEnter(n)},ref:function(t){e.inputs[n]=t},autoFocus:0===n}),l.a.createElement("span",{className:"lake-icon lake-icon-table-delete",onClick:function(t){e.onDeleteItem(t,n)}})),l.a.createElement("span",{className:"lake-icon lake-icon-draggable"}))}))},ignoreRule:this._ignoreSortableRule})),l.a.createElement("div",{className:"add-item"+(this.state.color?" colored":""),onClick:this.onAddItem},l.a.createElement("span",{className:"lake-icon lake-icon-plus"}),_c("添加一个选项"))):null}}]),n}(l.a.Component);function xx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ex(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xx(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ox(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cx(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}s()(kx,"propTypes",{title:X.a.object,multiple:X.a.boolean,onChange:X.a.func,configs:X.a.object,defaultValue:X.a.string,onCompleteMount:X.a.func,themeManager:X.a.object}),s()(kx,"defaultProps",{onCompleteMount:function(){}}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-editor .lake-table-col-configs {\n  position: absolute;\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 2px;\n  z-index: 500;\n  overflow: auto;\n  overflow-x: hidden;\n  top: 66px;\n  width: 306px;\n  color: var(--yq-text-caption);\n}\n.lake-table-editor .lake-table-col-configs p {\n  margin-bottom: 8px;\n}\n.lake-table-editor .lake-table-col-configs .lake-table-col-name {\n  margin: 0 20px;\n}\n.lake-table-editor .lake-table-col-configs .lake-table-col-name .error {\n  border-color: var(--yq-function-error);\n}\n.lake-table-editor .lake-table-col-configs .lake-table-col-error {\n  color: var(--yq-function-error);\n  margin: 4px 20px -8px;\n}\n.lake-table-editor .lake-table-col-configs-footer {\n  margin: 20px;\n  display: flex;\n  justify-content: flex-end;\n}\n.lake-table-editor .lake-table-col-options {\n  border-top: 1px solid var(--yq-border-light);\n  margin-top: 16px;\n  padding-top: 16px;\n  margin-left: 16px;\n  position: relative;\n}\n.lake-table-col-title {\n  padding: 0 20px;\n  margin-top: 16px;\n}\n.lake-table-col-types {\n  margin-top: -8px;\n  width: 100%;\n}\n.lake-table-col-types .ant-menu-submenu .ant-menu-submenu-title {\n  padding: 0 20px;\n}\n.lake-table-col-types-submenu .ant-menu .ant-menu-item {\n  position: relative;\n  padding-left: 16px;\n  height: 36px;\n  line-height: 36px;\n  color: var(--yq-text-body);\n}\n.lake-table-col-types-submenu .ant-menu .ant-menu-item .lake-icon {\n  margin-right: 12px;\n}\n.lake-table-col-types-submenu .ant-menu .lake-icon-success {\n  display: none;\n  position: absolute;\n  top: 12px;\n  right: 4px;\n  color: var(--yq-text-caption);\n}\n.lake-table-col-types-submenu .ant-menu .ant-menu-item-selected {\n  background-color: var(--yq-bg-primary);\n}\n.lake-table-col-types-submenu .ant-menu .ant-menu-item-selected .lake-icon-success {\n  display: block;\n}\n.lake-table-col-types-submenu .ant-menu .ant-menu-item-active {\n  background-color: var(--yq-bg-tertiary);\n}\n.select-input {\n  color: var(--yq-text-body);\n  width: 278px;\n  padding-bottom: 6px;\n}\n.select-input-title {\n  font-size: 14px;\n  font-weight: bold;\n  margin-top: 6px;\n  margin-left: 10px;\n}\n.select-input .multi-select {\n  position: absolute;\n  top: 16px;\n  right: 16px;\n}\n.select-input .multi-select .ant-checkbox {\n  margin-right: 8px;\n}\n.select-input .option-list {\n  max-height: 180px;\n  overflow: auto;\n  overflow-x: hidden;\n  margin: 18px -10px 0 -10px;\n}\n.select-input .option-list .sortable {\n  padding: 0 10px;\n}\n.select-input .option-list .lake-icon {\n  cursor: pointer;\n  color: var(--yq-text-caption);\n  font-size: 16px;\n}\n.select-input .option-list .lake-icon:hover {\n  color: var(--yq-text-primary);\n}\n.select-input .option-list .lake-icon-draggable:hover {\n  cursor: grab;\n}\n.select-input .input-item {\n  padding: 6px 10px;\n  display: flex;\n  align-items: center;\n}\n.select-input .input-item .option-color {\n  padding: 9px;\n  border-radius: 2px;\n  cursor: pointer;\n  margin-right: 16px;\n}\n.select-input .input-item .lake-icon {\n  margin-left: 12px;\n}\n.select-input .input-item-content {\n  display: flex;\n  align-items: center;\n}\n.select-input .add-item {\n  cursor: pointer;\n  line-height: 24px;\n  margin: 6px;\n  color: rgba(0, 0, 0, 0.45);\n}\n.select-input .add-item:hover {\n  color: var(--yq-text-primary);\n}\n.select-input .add-item .lake-icon {\n  margin-right: 6px;\n}\n.select-input .add-item.colored {\n  margin-left: 44px;\n}\n.select-input .sync-options {\n  color: var(--yq-text-caption);\n}\n.select-input .sync-options .ant-checkbox-wrapper {\n  margin-right: 8px;\n}\n.select-input .select-confirm {\n  text-align: right;\n  margin: 14px 10px 4px 10px;\n  min-width: 200px;\n}\n.select-input .select-confirm .ant-btn-danger {\n  float: left;\n}\n.select-input .select-confirm .ant-btn-primary {\n  margin-left: 8px;\n}\n"),fx=Lk({name:"ColConfigs"}),px=jk({name:"ColConfigs"}),hx=Ak({name:"ColConfigs"}),fx((vx=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"refresh",(function(){if(r.state.visible){var e=r.props.table,t=r.state,n=t.row,o=t.col,a=e.viewManager.getViewRenderer().viewportHelper.getFrozenRectByCell(n,o);a.top<e.theme.colHeaderHeight||a.left<e.theme.rowHeaderWidth?r.setState({visible:!1}):r.setState({rect:a})}})),s()(m()(r),"getStyle",(function(e,t,n){return null!=t&&t.style?t.style:null!=t&&t.target?r.getModalStyleByTarget(t.target,n.type):r.getModalStyle(e,t,n)})),s()(m()(r),"getModalStyleByTarget",(function(e,t){var n=e.getBoundingClientRect(),o=n.top,a=n.bottom,i=n.left,l=n.height,c=r.props.table.container.getBoundingClientRect().left,s=window.innerHeight-a,u={left:i-c,zIndex:Cg};return r.shouldDisplayOnTop(s,o,t)?u.top=Math.abs(Math.abs(o-r.getCompareHeight(t))-52):u.top=o+l-52,u})),s()(m()(r),"getCompareHeight",(function(e){return[Ac.SELECT,Ac.MULTI_SELECT].includes(e)?480:224})),s()(m()(r),"shouldDisplayOnTop",(function(e,t,n){var o=r.getCompareHeight(n);return e<o&&t>o||e<o&&t<o&&t-e>60})),s()(m()(r),"getModalStyle",(function(e,t,n){var o={top:74,zIndex:Cg},a=r.props.table,i=a.viewManager.getViewRenderer().viewportHelper,l=i.getScrollData().scrollX;null!=t&&t.create?o.left=i.columnSizes[e-1].offset+i.columnSizes[e-1].size+a.theme.rowHeaderWidth-(i.isFrozenCol(e-1)?0:l):(o.minWidth=n.size,o.left=i.columnSizes[e].offset+a.theme.rowHeaderWidth-(i.isFrozenCol(e)?0:l));var c=a.container.offsetWidth;return c<o.left+306&&(o.left=c-306),o})),s()(m()(r),"onColNameBlur",(function(e){r.setColName(e.target.value)})),s()(m()(r),"setColName",(function(e){if(e){if(r.props.table.kernel.tableModel.getTableFields().filter((function(t){return t.id!==r.state.colConfigs.id&&t.name===e})).length>0)return r.setState({colNameError:_c("不能与其他列重名")}),!1;r.setState({colNameError:null});var t=r.state.colConfigs;return t.name=e,r.setState({colConfigs:t}),!0}r.setState({colNameError:_c("列名不能为空")})})),s()(m()(r),"onOptionsChange",(function(e){var t=e.options,n=e.color,o=r.state.colConfigs;o.options=t,o.color=n,r.setState({colConfigs:o})})),s()(m()(r),"changeType",(function(e){var t=e.key,n=r.state.colConfigs,o=r.props.table.kernel.tableModel.getTableFields();new RegExp("".concat(r.colNames[n.type],"(\\s\\d)*")).test(n.name)&&(n.name=$f(t,o)),!Dc.includes(n.type)&&Dc.includes(t)&&(n.options&&0!==n.options.length||(n.options=r.getColumnData(n),n.color=!0)),n.type=t,[Ac.CREATED_AT,Ac.UPDATED_AT].includes(t)?n.localTimezone=!0:t===Ac.DATE&&delete n.localTimezone,r.setState({colConfigs:n},r.onChangeType)})),s()(m()(r),"onChangeType",(function(){var e=r.state,t=e.col,n=e.colConfigs,o=e.options;r._adjustComponentHeight();var a=r.getStyle(t,o,n);r.setState({style:Ex(Ex({},r.state.style),a)})})),s()(m()(r),"onConfirm",(function(){r.state.colNameError||(r.submitConfigs(),r.hide())})),s()(m()(r),"onNameKeyDown",(function(e){var t=e.ctrlKey,n=e.metaKey;13!==e.keyCode||t||n||r.setColName(e.target.value)&&r.onConfirm()})),s()(m()(r),"_adjustComponentHeight",(function(){var e;null===(e=r._autoHeightComponent.current)||void 0===e||e.adjustHeight()})),r._autoHeightComponent=l.a.createRef(),r.state={col:null,visible:!1,colNameError:null},r}return p()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.table;this.state.options,t.on(qs.COL_CONFIGS,this.show),t.on(qs.HIDE_COL_CONFIG,this.hide);var n=t.kernel.getColTypes();this.colNames={},n.forEach((function(t){e.colNames[t.type]=t.name}))}},{key:"hide",value:function(){this.state.visible&&this.setState({visible:!1})}},{key:"createNewCol",value:function(){var e,t=this.props.table.kernel.tableModel.getTableFields(),n=[],r=0;t.forEach((function(e){r=Math.max(r,e.index),n.push(e.id)}));for(var o=r+1;!e||n.includes(e);)e=fs(32);return{id:e,index:o,name:$f("input",t),type:"input"}}},{key:"show",value:function(e){var t=e.col,n=e.options,r=this.state.visible,o=this.props.table;if(o.readOnly)this.hide();else if(r&&t===this.state.col)this.setState({visible:!1,col:null});else{var a,i=o.viewManager.getViewRenderer().viewportHelper;a=null!=n&&n.colConfigs?n.colConfigs:null!=n&&n.create?this.createNewCol():wc(i.getColConfigs(t));var l=Object.assign(this.getStyle(t,n,a),{zIndex:Cg});this.setState({col:t,colConfigs:a,style:l,options:n||{},visible:!0,colNameError:null})}}},{key:"getColumnData",value:function(e){var t=this.props.table.kernel.tableModel,n=t.getActiveView().data.rows,r=[],o={},a=function(e){o[e]||(r.push({value:e,id:fs(6)}),o[e]=!0)};return n.forEach((function(n){var r=t.recordsModel.getCellFormattedValue(n.id,e.id,e);if(""!==r){if(e.type===Ac.CHECKBOX)return void("true"===r&&a(_c("已选中")));r.split(",").forEach(a)}})),r}},{key:"submitConfigs",value:function(){var e=this.state,t=e.colConfigs,n=e.col;Dc.includes(t.type)||(delete t.options,delete t.color),this.state.options.create?this.props.table.kernel.execute("insertCol",t,n):this.props.table.kernel.execute("updateCol",t)}},{key:"getColTypes",value:function(){var e=this.state.col,t=this.props.table.kernel.getColTypes();return this.props.table.viewManager.getViewRenderer().viewportHelper.isFrozenCol(e)||0===e?t.filter((function(e){return Hc.includes(e.type)})):t}},{key:"render",value:function(){var e=this,t=this.state,n=t.visible,r=t.style,o=t.colConfigs,a=t.colNameError;if(!n)return null;var i=this.getColTypes(),c=null;Dc.includes(o.type)&&(c=l.a.createElement("div",{className:"select-input lake-table-col-options"},l.a.createElement(kx,{title:l.a.createElement("span",{style:{color:"#8c8c8c"}},_c("选项设置")),onChange:this.onOptionsChange,multiple:!1,defaultValue:"",configs:o,themeManager:this.table.engine.themeManager,onCompleteMount:function(){return e._adjustComponentHeight()}})));var s=[{key:o.type,title:l.a.createElement("span",null,_c((i.find((function(e){return e.type===o.type}))||{}).name)),icon:l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(o.type.toLowerCase())}),groupBy:"subType",children:i.map((function(e){return{key:e.type,title:e.name,icon:l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(e.type.toLowerCase())}),subType:e.isAdvanced?_c("高级"):_c("基础"),showActiveIcon:!0}}))}];return l.a.createElement(ew,{ref:this._autoHeightComponent,className:"lake-table-col-configs",componentStyle:r,maxHeight:600,container:this.props.table.container},l.a.createElement("p",{className:"lake-table-col-title"},_c("数据表列名")),l.a.createElement("div",{className:"lake-table-col-name"},l.a.createElement(ht.a,{value:o.name,onChange:function(t){o.name=t.target.value,e.setState({colConfigs:o})},onKeyDown:this.onNameKeyDown,onBlur:this.onColNameBlur,autoFocus:!0,className:S()({error:a})}),a&&l.a.createElement("div",{className:"lake-table-col-error"},a)),l.a.createElement("p",{className:"lake-table-col-title"},_c("列类型"),l.a.createElement(dt.a,{title:_c("设置该列内容类型，支持单行文本、多行文本、日期、数字、单选、多选等")},l.a.createElement("span",{className:"lake-icon lake-icon-question",style:{marginLeft:4}}))),l.a.createElement(Vk,{key:o.type,menuKey:o.type,className:"lake-table-col-types",defaultSelectedKeys:[o.type],onClick:this.changeType,configs:s,table:this.props.table}),c,l.a.createElement("div",{className:"lake-table-col-configs-footer"},l.a.createElement(ft.a,{style:{marginRight:12},onClick:this.hide},_c("取消")),l.a.createElement(ft.a,{type:"primary",disabled:a,onClick:this.onConfirm},_c("确定"))))}}]),n}(l.a.Component),s()(vx,"propTypes",{table:X.a.object}),qt()((mx=vx).prototype,"hide",[px],Object.getOwnPropertyDescriptor(mx.prototype,"hide"),mx.prototype),qt()(mx.prototype,"show",[hx],Object.getOwnPropertyDescriptor(mx.prototype,"show"),mx.prototype),qt()(mx.prototype,"submitConfigs",[Tk],Object.getOwnPropertyDescriptor(mx.prototype,"submitConfigs"),mx.prototype),mx)),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-new-view-container {\n  position: absolute;\n  width: 140px;\n  height: auto;\n  padding: 8px 0;\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  background-color: var(--yq-bg-primary);\n  border-radius: 6px;\n}\n.lake-table-new-view-container .new-view-item {\n  align-items: center;\n  display: flex;\n  height: 38px;\n  width: 140px;\n  cursor: pointer;\n  padding-left: 15px;\n}\n.lake-table-new-view-container .new-view-item .grid-icon {\n  color: var(--yq-yuque-green-6);\n  font-size: 16px;\n}\n.lake-table-new-view-container .new-view-item .card-icon {\n  color: var(--yq-blue-5);\n  font-size: 16px;\n}\n.lake-table-new-view-container .new-view-item .kanban-icon {\n  color: var(--yq-cyan-5);\n  font-size: 16px;\n}\n.lake-table-new-view-container .new-view-item .title {\n  font-size: 14px;\n  line-height: 22px;\n  margin-left: 8px;\n  color: var(--yq-text-body);\n}\n.lake-table-new-view-container .new-view-item:hover {\n  background-color: var(--yq-bg-tertiary);\n}\n"),gx=Lk({name:"NewView"}),bx=Ak({name:"NewView"}),yx=jk({name:"NewView"}),gx((qt()((wx=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"state",{visible:!1}),s()(m()(e),"_views",Us),s()(m()(e),"_getTargetEl",(function(e,t){var n;if(e)for(n=e;!n.classList.contains(t||"lake-table-button");)n=n.parentNode;return n})),s()(m()(e),"_getIcon",(function(e){switch(e){case Gs.GRID:return"lake-icon lake-icon-table-grid-view grid-icon";case Gs.CARD:return"lake-icon lake-icon-table-card-view card-icon";case Gs.KANBAN:return"lake-icon lake-icon-table-kanban-view kanban-icon";default:ed(!1)}})),s()(m()(e),"_getViewConfig",(function(){return e._views.map((function(t){return{title:t.title,icon:e._getIcon(t.type),onClick:function(){return e._addView(t.type)},type:t.type}}))})),s()(m()(e),"_addView",(function(t){var n,r,o,a=e.props.table;switch(t){case Gs.GRID:null===(n=a.kernel)||void 0===n||n.execute("insertGrid");break;case Gs.CARD:null===(r=a.kernel)||void 0===r||r.execute("insertCard");break;case Gs.KANBAN:null===(o=a.kernel)||void 0===o||o.execute("insertKanban")}a.emit(qs.HIDE_TOOLBAR_MENU),e._hide()})),e}return p()(n,[{key:"componentDidMount",value:function(){var e=this.props.table;e.on(qs.SHOW_ADD_VIEW,this._show),e.on(qs.HIDE_ADD_VIEW,this._hide)}},{key:"componentWillUnmount",value:function(){var e=this.props.table;e.off(qs.SHOW_ADD_VIEW,this._show),e.off(qs.HIDE_ADD_VIEW,this._hide)}},{key:"_getModalDisplayStyle",value:function(e){var t=e.getBoundingClientRect(),n=this.props.table.container.getBoundingClientRect();return{zIndex:Cg,left:t.left-n.left,top:35}}},{key:"_show",value:function(e){var t=e.node,n=e.targetClassName,r=this._getTargetEl(t,n);this.setState({visible:!0,style:this._getModalDisplayStyle(r)})}},{key:"_hide",value:function(){this.setState({visible:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.style;return t.visible?l.a.createElement("div",{className:"lake-table-new-view-container",style:n},this._getViewConfig().map((function(t,n){var r=t.icon,o=t.title,a=t.type;return l.a.createElement("div",{key:n,className:"new-view-item",onClick:function(){return e._addView(a)}},l.a.createElement("span",{className:r}),l.a.createElement("span",{className:"title"},o))}))):null}}]),n}(l.a.Component)).prototype,"_show",[bx],Object.getOwnPropertyDescriptor(wx.prototype,"_show"),wx.prototype),qt()(wx.prototype,"_hide",[yx],Object.getOwnPropertyDescriptor(wx.prototype,"_hide"),wx.prototype),wx)),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-view-setting {\n  color: var(--yq-text-primary);\n  margin: -12px 0 -8px;\n  min-width: 256px;\n}\n.lake-table-view-setting-index-column {\n  margin-left: 5px;\n}\n.lake-table-view-setting-wrap {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 50px;\n  line-height: 50px;\n  padding: 0 20px;\n}\n.lake-table-view-setting .lake-table-config-container {\n  margin-right: 0;\n}\n.lake-table-view-setting-title {\n  flex-grow: 1;\n}\n.lake-table-view-setting-hr {\n  border-top: 1px solid var(--yq-border-light);\n}\n.lake-table-view-setting-fields {\n  margin-top: 8px;\n}\n.lake-table-view-setting-field-item {\n  height: 36px;\n  display: flex;\n  align-items: center;\n  padding: 0 10px;\n  cursor: pointer;\n}\n.lake-table-view-setting-field-item:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-view-setting-field-icon {\n  font-size: 16px;\n  margin-right: 10px;\n  color: var(--yq-icon-primary);\n}\n.lake-table-view-setting-operation-icon {\n  width: 24px;\n  height: 24px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 6px;\n  color: var(--yq-icon-primary);\n  margin-right: 6px;\n}\n.lake-table-view-setting-operation-icon.lake-icon {\n  display: flex;\n}\n.lake-table-view-setting-operation-icon:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-view-setting-field-name {\n  flex-grow: 1;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  user-select: none;\n  line-height: 1em;\n  max-width: 142px;\n}\n.lake-table-view-setting-lock {\n  color: var(--yq-text-caption);\n  margin-right: 8px;\n}\n.lake-table-view-setting-disable .lake-table-view-setting-field-name,\n.lake-table-view-setting-disable .lake-icon {\n  color: var(--yq-text-caption);\n}\n.lake-table-view-setting .lake-icon-draggable {\n  cursor: grab;\n}\n.lake-table-view-setting .column-select-option .ant-select-item-option-content {\n  display: flex;\n  align-items: center;\n}\n.lake-table-view-setting .column-select-option .ant-select-item-option-content .lake-icon {\n  margin-right: 5px;\n}\n.lake-table-view-setting .ant-select {\n  width: 170px;\n  margin-left: 5px;\n}\n.lake-table-view-setting .ant-select .ant-select-selector {\n  border-radius: 6px;\n  min-width: 120px;\n}\n.lake-table-view-setting .ant-select .ant-select-selector .ant-select-selection-item {\n  display: flex;\n  align-items: center;\n}\n.lake-table-view-setting .ant-select .ant-select-selector .ant-select-selection-item .lake-icon {\n  margin-right: 5px;\n}\n.lake-table-view-setting .ant-radio-button-wrapper:first-child {\n  border-radius: 4px 0 0 4px;\n}\n.lake-table-view-setting .ant-radio-button-wrapper:last-child {\n  border-radius: 0 4px 4px 0;\n}\n.lake-table-view-setting .lake-icon-arrow-down {\n  font-size: 14px;\n}\n");var _x=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"cover",void 0),s()(m()(r),"onFieldSort",(function(e){var t,n=[r.getRenderColumns()[0]].concat(e);null===(t=r.kernel)||void 0===t||t.execute("setColumns",n),r.forceUpdate()})),s()(m()(r),"onCoverSourceChange",(function(e){var t;e?(r.cover.show=!0,r.cover.id=e):(r.cover.show=!1,r.cover.id=null),null===(t=r.kernel)||void 0===t||t.execute("setCover",r.cover)})),s()(m()(r),"onCoverDisplayChange",(function(e){var t;r.cover.display=e.target.value,null===(t=r.kernel)||void 0===t||t.execute("setCover",r.cover)})),s()(m()(r),"onShowFieldChange",(function(e){var t;null===(t=r.kernel)||void 0===t||t.execute("setShowField",e)})),r.cover=r.view.get("cover"),r}return p()(n,[{key:"getColumns",value:function(){return this.view.get("columns")}},{key:"onFieldChange",value:function(e,t){var n,r=me()(this.getRenderColumns()),o=r.findIndex((function(t){return t.id===e.id}));r[o].hidden=!t,null===(n=this.kernel)||void 0===n||n.execute("setColumns",r),this.forceUpdate()}},{key:"renderCoverSource",value:function(){var e=[{label:_c("无封面"),value:null,icon:l.a.createElement("span",{className:"lake-icon lake-icon-stop"})}].concat(me()(this.getRenderColumns().filter((function(e){return e.type===Ac.IMAGE})).map((function(e){return{label:e.name,value:e.id,icon:l.a.createElement("span",{className:"lake-icon lake-icon-col-image"})}}))||[])),t=this.cover.id;return e.map((function(e){return e.value})).includes(this.cover.id)||(this.onCoverSourceChange(null),t=null),l.a.createElement("div",{className:"lake-table-view-setting-wrap lake-table-view-setting-cover-source"},l.a.createElement("span",{className:"lake-table-view-setting-title"},_c("封面来源")),l.a.createElement(Pt.a,{defaultValue:t,dropdownClassName:"lake-table-menu-container lake-table-view-setting",onChange:this.onCoverSourceChange,suffixIcon:l.a.createElement("span",{className:"lake-icon lake-icon-arrow-down"})},e.map((function(e){return l.a.createElement(Pt.a.Option,{value:e.value,key:e.value,className:"column-select-option"},e.icon,e.label)}))))}},{key:"renderCoverDisplay",value:function(){var e=[{label:_c("适应"),value:"fit"},{label:_c("裁剪"),value:"clip"}];return l.a.createElement("div",{className:"lake-table-view-setting-wrap lake-table-view-setting-cover-display"},l.a.createElement("span",{className:"lake-table-view-setting-title"},_c("封面效果")),l.a.createElement(vt.a.Group,{options:e,onChange:this.onCoverDisplayChange,defaultValue:this.cover.display,optionType:"button"}))}},{key:"renderShowFieldName",value:function(){return l.a.createElement("div",{className:"lake-table-view-setting-wrap lake-table-view-setting-show-name"},l.a.createElement("span",{className:"lake-table-view-setting-title"},_c("显示字段名")),l.a.createElement(It.a,{defaultChecked:this.view.get("showField"),onChange:this.onShowFieldChange,size:"small"}))}},{key:"getRenderColumns",value:function(){var e,t=null===(e=this.tableModel)||void 0===e?void 0:e.getFieldsMap();return this.getColumns().map((function(e){return Ox(Ox({},t[e.id]),e)}))}},{key:"renderFields",value:function(){var e=this,t=this.getRenderColumns(),n=Gt()(t),r=n[0],o=n.slice(1);return l.a.createElement("div",{className:"lake-table-view-setting-fields",onScroll:this.props.onScroll},l.a.createElement(ew,{maxHeight:400,container:this.props.container},l.a.createElement("div",{className:"lake-table-view-setting-field-item lake-table-view-setting-index-column"},l.a.createElement(dt.a,{title:_c("索引列无法被删除、移动、替换"),arrowPointAtCenter:!0},l.a.createElement("span",{className:"lake-icon lake-table-view-setting-lock lake-icon-table-lock"})),l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(r.type," lake-table-view-setting-field-icon"),style:{marginLeft:"4px"}}),l.a.createElement("span",{className:"lake-table-view-setting-field-name"},r.name),!this.props.readonly&&l.a.createElement("span",{className:"lake-icon lake-icon-table-column-config lake-table-config-container lake-table-view-setting-field-icon lake-table-view-setting-operation-icon",style:{marginLeft:"29px"},onClick:function(t){return e.props.openConfigMenu({e:t,operationCol:0})}})),l.a.createElement(fb,{onChange:this.onFieldSort,list:o,render:function(t){return t.map((function(t,n){n+=1;var r=t.hidden;return l.a.createElement("div",{className:"lake-table-view-setting-field-item ".concat(r?"lake-table-view-setting-disable":""),key:t.id,"data-id":t.id,draggable:!window.h5,"data-index":n},l.a.createElement("span",{className:"lake-icon lake-icon-table-drag lake-table-view-setting-operation-icon"}),l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(t.type.toLowerCase()," lake-table-view-setting-field-icon")}),l.a.createElement("span",{className:"lake-table-view-setting-field-name",draggable:"true","data-draggable":"false"},t.name),l.a.createElement("span",{className:S()("lake-icon  lake-table-view-setting-field-icon lake-table-view-setting-operation-icon",r?"lake-icon-table-column-hidden":"lake-icon-table-column-show"),onClick:function(){return e.onFieldChange(t,r)}}),!e.props.readonly&&l.a.createElement("span",{className:"lake-icon lake-icon-table-column-config lake-table-config-container lake-table-view-setting-field-icon lake-table-view-setting-operation-icon",onClick:function(t){return e.props.openConfigMenu({e:t,operationCol:n})}}))}))}})))}},{key:"render",value:function(){var e=this.props.fields;return l.a.createElement("div",{className:"lake-table-menu-container lake-table-view-setting"},(null==e?void 0:e.includes("cover"))&&l.a.createElement(l.a.Fragment,null,this.renderCoverSource(),this.renderCoverDisplay(),l.a.createElement("div",{className:"lake-table-view-setting-hr"})),(null==e?void 0:e.includes("showField"))&&l.a.createElement(l.a.Fragment,null,this.renderShowFieldName(),l.a.createElement("div",{className:"lake-table-view-setting-hr"})),(null==e?void 0:e.includes("columns"))&&this.renderFields())}},{key:"editor",get:function(){return this.props.editor}},{key:"kernel",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.kernel}},{key:"tableModel",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.tableModel}},{key:"view",get:function(){var e;return null===(e=this.tableModel)||void 0===e?void 0:e.getActiveView()}}]),n}(l.a.Component);s()(_x,"defaultProps",{fields:["columns"]}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-components-button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: none;\n  background-color: transparent;\n  cursor: pointer;\n  width: auto;\n  height: 28px;\n  border-radius: 4px;\n  line-height: 28px;\n  text-align: center;\n  padding: 0 5px;\n  margin: 0 3px;\n  color: var(--yq-text-primary);\n}\n.lake-table-components-button:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-components-normal-button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: none;\n  background-color: transparent;\n  cursor: pointer;\n  width: auto;\n  height: 28px;\n  border-radius: 4px;\n  line-height: 28px;\n  text-align: center;\n  padding: 0 5px;\n  margin: 0 3px;\n  color: var(--yq-text-primary);\n  min-width: 32px;\n}\n.lake-table-components-normal-button:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-components-normal-button .lake-table-components-button-title {\n  margin-left: 4px;\n}\n.lake-table-components-icon-button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: none;\n  background-color: transparent;\n  cursor: pointer;\n  width: auto;\n  height: 28px;\n  border-radius: 4px;\n  line-height: 28px;\n  text-align: center;\n  padding: 0 5px;\n  margin: 0 3px;\n  color: var(--yq-text-primary);\n}\n.lake-table-components-icon-button:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-components-button-active {\n  background-color: var(--yq-bg-primary-hover);\n}\n");var Sx=function(e){var t=e.id,n=e.icon,r=e.tooltip,o=e.onClick,a=e.type,i=void 0===a?"normal":a,c=e.title,s=e.iconSize,u=void 0===s?16:s,d=e.fontSize,f=void 0===d?14:d,p=e.active,h=e.className;return function(){switch(i){case"icon":return l.a.createElement(ol,{title:r},l.a.createElement("button",{id:t,className:S()("lake-table-components-button","lake-table-components-normal-button",p&&p()&&"lake-table-components-button-active",h),onClick:o},l.a.createElement("span",{className:n,style:{fontSize:u}})));case"normal":return l.a.createElement("button",{id:t,className:S()("lake-table-components-button","lake-table-components-normal-button",p&&p()&&"lake-table-components-button-active",h),onClick:o},l.a.createElement("span",{className:n,style:{fontSize:u}}),l.a.createElement("span",{className:"lake-table-components-button-title",style:{fontSize:f}},"string"==typeof c?c:c()));default:return l.a.createElement(l.a.Fragment,null)}}()};nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-grid-setting-modal {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 6px;\n  overflow: auto;\n  overflow-x: hidden;\n  padding: 16px 0;\n}\n.lake-table-grid-setting-context-menu {\n  width: 102px;\n}\n");var Rx=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"lake-table-grid-setting-modal"},l.a.createElement(_x,{editor:this.editor,readonly:this.editor.readOnly,container:this.props.container,openConfigMenu:this.props.openConfigMenu,onScroll:this.props.onScroll}))}},{key:"editor",get:function(){return this.props.editor}},{key:"kernel",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.kernel}},{key:"tableModel",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.tableModel}},{key:"view",get:function(){var e;return null===(e=this.tableModel)||void 0===e?void 0:e.getActiveView()}}]),n}(l.a.Component),jx=function(e,t,n,r){var o=e.kernel.tableModel.getActiveView();return[{command:"colConfigs",text:_c("编辑"),icon:"edit-new",disable:["row","selection","cell"],onClick:function(e){var r=e.e;n(r,t)}},{command:"removeGridCol",text:_c("删除"),icon:"table-delete",disable:["row","selection","cell"],disabled:o.get("columns").length<=1||0===t,disabledText:o.get("columns").length<=1?_c("数据表至少需要有一列"):_c("本列是索引列，是每条记录的关键信息，用来标识每条记录，不能被删除"),onClick:function(){e.kernel.execute("removeCol",o.data.columns[t].id),r()}}]};var Ax=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","gridSetting"),s()(m()(e),"_onScrollViewSettingModal",(function(){e.workbench.UI.hideModal("contextMenu")})),s()(m()(e),"_onToolbarItemClick",(function(t){var n=e._calculatePosition(t.target);n&&e.workbench.UI.showModal("gridSetting",{scope:dc.GLOBAL,containerStyle:{left:"".concat(n.left,"px"),top:"".concat(n.top,"px")}})})),s()(m()(e),"_openViewConfigMenu",(function(t){var n=t.e,r=t.operationCol,o=e._calculateViewConfigPosition(null==n?void 0:n.target);o&&(e.workbench.UI.hideModal("colConfig"),e.workbench.UI.hideModal("contextMenu"),e.workbench.UI.showModal("contextMenu",{containerStyle:{left:"".concat(o.left,"px"),top:"".concat(o.top,"px")},scope:dc.GLOBAL,modalProps:{className:"lake-table-grid-setting-context-menu",menubar:jx(e.editor,r,e._onClickColConfigs,e._onClickDeleteCol)}}))})),s()(m()(e),"_onClickDeleteCol",(function(){e.workbench.UI.updateModal()})),s()(m()(e),"_onClickColConfigs",(function(t,n){var r=e._calculateColConfigModalPosition(t.target);r&&e.workbench.UI.showModal("colConfig",{scope:dc.GLOBAL,containerStyle:{left:"".concat(r.left,"px"),top:"".concat(r.top,"px")},modalProps:{container:e.workbench.UI.containerEl.globalModalContainer,col:n,onUpdateCol:e._onUpdateCol}})})),s()(m()(e),"_onUpdateCol",(function(){e.workbench.UI.updateModal()})),s()(m()(e),"_calculateColConfigModalPosition",(function(e){var t=mk(e,"lake-table-menubar"),n=null==t?void 0:t.getBoundingClientRect();if(n)return{left:n.left,top:n.top}})),s()(m()(e),"_calculateViewConfigPosition",(function(e){var t=mk(e,"lake-table-config-container"),n=null==t?void 0:t.getBoundingClientRect();if(n)return{left:n.left+38,top:n.top}})),s()(m()(e),"_calculatePosition",(function(t){var n=mk(t,"lake-workbench-toolbar-button"),r=null==n?void 0:n.getBoundingClientRect();if(r){var o=e.editor.readOnly?256:575;return window.innerWidth-r.left<o?{left:window.innerWidth-o-15,top:r.bottom}:{left:r.left,top:r.bottom}}})),s()(m()(e),"_getHide",(function(){var t,n=null===(t=e.editor.kernel)||void 0===t?void 0:t.tableModel.getActiveView();return!!n&&n.get("type")!==Gs.GRID})),e}return p()(n,[{key:"registerToolbarItem",value:function(){return{title:_c("表格配置"),tooltip:_c("表格配置"),icon:"lake-icon lake-icon-table-setting",onClick:this._onToolbarItemClick,hide:this._getHide,id:"lake-table-toolbar-grid-setting"}}},{key:"registerModal",value:function(){var e=this;return{name:"gridSetting",renderComponent:function(t){return l.a.createElement(Rx,a()({editor:e.editor,container:e.workbench.UI.containerEl.globalModalContainer,openConfigMenu:e._openViewConfigMenu,onScroll:e._onScrollViewSettingModal},t))}}}}]),n}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-card-setting-modal {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 6px;\n  overflow: auto;\n  overflow-x: hidden;\n  padding: 16px 0;\n  width: 280px;\n}\n.lake-table-card-setting-modal .ant-select .ant-select-selector {\n  background: none;\n}\n.lake-table-card-setting-modal .ant-select-single.ant-select-open .ant-select-selection-item {\n  color: var(--yq-text-primary);\n}\n.lake-table-card-setting-context-menu {\n  width: 102px;\n}\n");var Tx=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"lake-table-card-setting-modal"},l.a.createElement(_x,{editor:this.editor,readonly:this.editor.readOnly,container:this.props.container,fields:["cover","showField","columns"],openConfigMenu:this.props.openConfigMenu,onScroll:this.props.onScroll}))}},{key:"editor",get:function(){return this.props.editor}},{key:"kernel",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.kernel}},{key:"tableModel",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.tableModel}},{key:"view",get:function(){var e;return null===(e=this.tableModel)||void 0===e?void 0:e.getActiveView()}}]),n}(l.a.Component),Lx=function(e,t,n,r){var o=e.kernel.tableModel.getActiveView();return[{command:"colConfigs",text:_c("编辑"),icon:"edit-new",disable:["row","selection","cell"],onClick:function(e){var r=e.e;n(r,t)}},{command:"removeGridCol",text:_c("删除"),icon:"table-delete",disable:["row","selection","cell"],disabled:o.get("columns").length<=1||0===t,disabledText:o.get("columns").length<=1?_c("数据表至少需要有一列"):_c("本列是索引列，是每条记录的关键信息，用来标识每条记录，不能被删除"),onClick:function(){e.kernel.execute("removeCol",o.data.columns[t].id),r()}}]};var Dx=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","cardSetting"),s()(m()(e),"_onScrollViewSettingModal",(function(){e.workbench.UI.hideModal("contextMenu")})),s()(m()(e),"_onToolbarItemClick",(function(t){var n=e._calculatePosition(t.target);n&&e.workbench.UI.showModal("cardSetting",{scope:dc.GLOBAL,containerStyle:{left:"".concat(n.left,"px"),top:"".concat(n.top,"px")}})})),s()(m()(e),"_calculatePosition",(function(t){var n=mk(t,"lake-workbench-toolbar-button"),r=null==n?void 0:n.getBoundingClientRect();if(r){var o=e.editor.readOnly?256:575;return window.innerWidth-r.left<o?{left:window.innerWidth-o-15,top:r.bottom}:{left:r.left,top:r.bottom}}})),s()(m()(e),"_openViewConfigMenu",(function(t){var n=t.e,r=t.operationCol,o=e._calculateViewConfigPosition(null==n?void 0:n.target);o&&(e.workbench.UI.hideModal("colConfig"),e.workbench.UI.hideModal("contextMenu"),e.workbench.UI.showModal("contextMenu",{scope:dc.GLOBAL,containerStyle:{left:"".concat(o.left,"px"),top:"".concat(o.top,"px")},modalProps:{className:"lake-table-kanban-setting-context-menu",menubar:Lx(e.editor,r,e._onClickColConfigs,e._onClickDeleteCol)}}))})),s()(m()(e),"_onClickDeleteCol",(function(){e.workbench.UI.updateModal()})),s()(m()(e),"_onClickColConfigs",(function(t,n){var r=e._calculateColConfigModalPosition(t.target);r&&e.workbench.UI.showModal("colConfig",{scope:dc.GLOBAL,containerStyle:{left:"".concat(r.left,"px"),top:"".concat(r.top,"px")},modalProps:{container:e.workbench.UI.containerEl.globalModalContainer,col:n,onUpdateCol:e._onUpdateCol}})})),s()(m()(e),"_calculateViewConfigPosition",(function(e){var t=mk(e,"lake-table-config-container"),n=null==t?void 0:t.getBoundingClientRect();if(n)return{left:n.left+38,top:n.top}})),s()(m()(e),"_calculateColConfigModalPosition",(function(e){var t=mk(e,"lake-table-menubar"),n=null==t?void 0:t.getBoundingClientRect();if(n)return{left:n.left,top:n.top}})),s()(m()(e),"_onUpdateCol",(function(){e.workbench.UI.updateModal()})),s()(m()(e),"_getHide",(function(){var t,n=null===(t=e.editor.kernel)||void 0===t?void 0:t.tableModel.getActiveView();return!!n&&n.get("type")!==Gs.CARD})),e}return p()(n,[{key:"registerToolbarItem",value:function(){return{title:_c("画册配置"),tooltip:_c("画册配置"),icon:"lake-icon lake-icon-table-setting",id:"lake-table-toolbar-card-setting",hide:this._getHide,onClick:this._onToolbarItemClick}}},{key:"registerModal",value:function(){var e=this;return{name:"cardSetting",renderComponent:function(t){return l.a.createElement(Tx,a()({editor:e.editor,container:e.workbench.UI.containerEl.globalModalContainer,openConfigMenu:e._openViewConfigMenu,onScroll:e._onScrollViewSettingModal},t))}}}}]),n}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-kanban-setting-modal {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 6px;\n  overflow: auto;\n  overflow-x: hidden;\n  padding: 16px 0;\n}\n.lake-table-kanban-setting-context-menu {\n  width: 102px;\n}\n");var Px=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"lake-table-kanban-setting-modal"},l.a.createElement(_x,{editor:this.editor,readonly:this.editor.readOnly,container:this.props.container,fields:["showField","columns"],openConfigMenu:this.props.openConfigMenu,onScroll:this.props.onScroll}))}},{key:"editor",get:function(){return this.props.editor}},{key:"kernel",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.kernel}},{key:"tableModel",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.tableModel}},{key:"view",get:function(){var e;return null===(e=this.tableModel)||void 0===e?void 0:e.getActiveView()}}]),n}(l.a.Component),Mx=function(e,t,n,r){var o=e.kernel.tableModel.getActiveView();return[{command:"colConfigs",text:_c("编辑"),icon:"edit-new",disable:["row","selection","cell"],onClick:function(e){var r=e.e;n(r,t)}},{command:"removeGridCol",text:_c("删除"),icon:"table-delete",disable:["row","selection","cell"],disabled:o.get("columns").length<=1||0===t,disabledText:o.get("columns").length<=1?_c("数据表至少需要有一列"):_c("本列是索引列，是每条记录的关键信息，用来标识每条记录，不能被删除"),onClick:function(){e.kernel.execute("removeCol",o.data.columns[t].id),r()}}]};var Nx=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","kanbanSetting"),s()(m()(e),"_onScrollViewSettingModal",(function(){e.workbench.UI.hideModal("contextMenu")})),s()(m()(e),"_onToolbarItemClick",(function(t){var n=e._calculatePosition(t.target);n&&e.workbench.UI.showModal("kanbanSetting",{scope:dc.GLOBAL,containerStyle:{left:"".concat(n.left,"px"),top:"".concat(n.top,"px")}})})),s()(m()(e),"_calculatePosition",(function(t){var n=mk(t,"lake-workbench-toolbar-button"),r=null==n?void 0:n.getBoundingClientRect();if(r){var o=e.editor.readOnly?256:575;return window.innerWidth-r.left<o?{left:window.innerWidth-o-15,top:r.bottom}:{left:r.left,top:r.bottom}}})),s()(m()(e),"_openViewConfigMenu",(function(t){var n=t.e,r=t.operationCol,o=e._calculateViewConfigPosition(null==n?void 0:n.target);o&&(e.workbench.UI.hideModal("colConfig"),e.workbench.UI.hideModal("contextMenu"),e.workbench.UI.showModal("contextMenu",{scope:dc.GLOBAL,containerStyle:{left:"".concat(o.left,"px"),top:"".concat(o.top,"px")},modalProps:{className:"lake-table-kanban-setting-context-menu",menubar:Mx(e.editor,r,e._onClickColConfigs,e._onClickDeleteCol)}}))})),s()(m()(e),"_onClickDeleteCol",(function(){e.workbench.UI.updateModal()})),s()(m()(e),"_onClickColConfigs",(function(t,n){var r=e._calculateColConfigModalPosition(t.target);r&&e.workbench.UI.showModal("colConfig",{scope:dc.GLOBAL,containerStyle:{left:"".concat(r.left,"px"),top:"".concat(r.top,"px")},modalProps:{container:e.workbench.UI.containerEl.globalModalContainer,col:n,onUpdateCol:e._onUpdateCol}})})),s()(m()(e),"_onUpdateCol",(function(){e.workbench.UI.updateModal()})),s()(m()(e),"_calculateViewConfigPosition",(function(e){var t=mk(e,"lake-table-config-container"),n=null==t?void 0:t.getBoundingClientRect();if(n)return{left:n.left+38,top:n.top}})),s()(m()(e),"_calculateColConfigModalPosition",(function(e){var t=mk(e,"lake-table-menubar"),n=null==t?void 0:t.getBoundingClientRect();if(n)return{left:n.left,top:n.top}})),s()(m()(e),"_getHide",(function(){var t,n=null===(t=e.editor.kernel)||void 0===t?void 0:t.tableModel.getActiveView();return!!n&&n.get("type")!==Gs.KANBAN})),e}return p()(n,[{key:"registerToolbarItem",value:function(){return{title:_c("看板配置"),tooltip:_c("看板配置"),icon:"lake-icon lake-icon-table-setting",onClick:this._onToolbarItemClick,hide:this._getHide}}},{key:"registerModal",value:function(){var e=this;return{name:"kanbanSetting",renderComponent:function(t){return l.a.createElement(Px,a()({editor:e.editor,container:e.workbench.UI.containerEl.globalModalContainer,openConfigMenu:e._openViewConfigMenu,onScroll:e._onScrollViewSettingModal},t))}}}}]),n}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.view-manage-signal-toolbar-item {\n  display: flex;\n  align-items: center;\n  margin-left: 8px;\n}\n.view-manage-signal-toolbar-item .view-manage {\n  display: flex;\n  align-items: center;\n  border-radius: 4px;\n  vertical-align: top;\n  height: 28px;\n  padding-left: 8px;\n  cursor: pointer;\n  color: var(--yq-text-primary);\n}\n.view-manage-signal-toolbar-item .view-manage .icon {\n  font-size: 16px;\n}\n.view-manage-signal-toolbar-item .view-manage .title {\n  line-height: 28px;\n  margin-left: 4px;\n  font-size: 14px;\n  max-width: 170px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.view-manage-signal-toolbar-item .view-manage .input-name {\n  max-width: 170px;\n  min-width: 36px;\n  line-height: 28px;\n  height: 28px;\n  font-size: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-left: 4px;\n}\n.view-manage-signal-toolbar-item .view-manage .input-name-disable {\n  pointer-events: none;\n}\n.view-manage-signal-toolbar-item .view-manage-normal:hover {\n  border-radius: 6px;\n  background-color: var(--yq-bg-primary-hover);\n}\n.view-manage-signal-toolbar-item .button-style {\n  margin-right: 6px;\n  padding-left: 4px;\n}\n.view-manage-signal-toolbar-item .button-style .lake-icon-table-plus {\n  margin-right: 2px;\n}\n.view-manage-signal-toolbar-item .button-style .lake-table-components-button-title {\n  margin-left: 2px;\n}\n.view-manage-multiple-toolbar-item .view-manage-button {\n  display: flex;\n  align-items: center;\n}\n.view-manage-multiple-toolbar-item .view-manage-button .lake-table-view-manage-button-title {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 15em;\n}\n.view-manage-multiple-toolbar-item .view-manage-button .lake-icon {\n  color: var(--yq-text-disable);\n}\n.lake-icon-table-grid-view {\n  color: var(--yq-yuque-green-6);\n}\n.lake-icon-table-kanban-view {\n  color: var(--yq-cyan-5);\n}\n.lake-icon-table-card-view {\n  color: var(--yq-blue-5);\n}\n.lake-icon-table-arrow-down {\n  color: var(--yq-text-caption);\n  margin-left: 4px;\n  margin-top: 1px;\n  font-size: 16px;\n}\n");var Ix=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"inputRef",l.a.createRef()),s()(m()(e),"state",{icon:"",title:"",onChangeName:!1,isSignalView:!0,viewType:"grid",inputLength:0}),s()(m()(e),"_toChangeViewName",(function(){e.props.readonly||e.setState({onChangeName:!0})})),s()(m()(e),"_getDefaultName",(function(){switch(e.state.viewType){case"grid":return _c("表格视图");case"card":default:return _c("画册视图");case"kanban":return _c("看板视图")}})),s()(m()(e),"_submitName",(function(t){var n,r=(null===(n=t.target)||void 0===n?void 0:n.value)||e._getDefaultName();e.props.changeName(r),e.setState({onChangeName:!1},(function(){var t;return null===(t=e.inputRef.current)||void 0===t?void 0:t.blur()}))})),s()(m()(e),"onInput",(function(t){var n=t.target.value;e.setState({inputLength:Bx.getInputComponentLength(n),title:n})})),s()(m()(e),"_renderSignalView",(function(){var t=e.props,n=t.addView,r=t.readonly,o=e.state,a=o.title,i=o.icon,c=o.onChangeName,s=o.inputLength;return l.a.createElement("div",{className:"view-manage-signal-toolbar-item"},l.a.createElement("div",{onClick:e._toChangeViewName,id:"lake-table-toolbar-view-manage",className:S()("view-manage",!c&&"view-manage-normal")},l.a.createElement("span",{className:S()(i,"icon")}),l.a.createElement(Bl,{ref:e.inputRef,onClick:function(){var t;null===(t=e.inputRef.current)||void 0===t||t.focus()},onMouseDown:function(e){e.stopPropagation()},value:a,style:{width:s},onChange:e.onInput,onBlur:e._submitName,onPressEnter:e._submitName,bordered:!1,className:S()("input-name",r&&"input-name-disable"),placeholder:_c("视图名称")})),!r&&l.a.createElement(Sx,{id:"lake-table-toolbar-add-view",onClick:n,title:_c("新建视图"),icon:"lake-icon lake-icon-table-plus",className:"button-style"}))})),s()(m()(e),"_getMultipleTitle",(function(){var t=e.state.title;return l.a.createElement("div",{className:"view-manage-button"},l.a.createElement("div",{className:"lake-table-view-manage-button-title"},t),l.a.createElement("span",{className:"lake-icon lake-icon-table-arrow-down"}))})),s()(m()(e),"_renderMultipleView",(function(){var t=e.state.icon,n=e.props.onManageView;return l.a.createElement(Sx,{id:"lake-table-toolbar-view-manage",onClick:n,title:e._getMultipleTitle,icon:t,className:"view-manage-multiple-toolbar-item"})})),e}return p()(n,[{key:"componentDidMount",value:function(){var e=this.props.onMount;e&&e(this)}},{key:"componentWillUnmount",value:function(){var e=this.props.onUnmount;e&&e(this)}},{key:"render",value:function(){return this.state.isSignalView?this._renderSignalView():this._renderMultipleView()}}]),n}(l.a.Component);nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-view-manage {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  min-width: 198px;\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  background: var(--yq-bg-primary);\n  border-radius: 2px;\n  margin-top: 2px;\n  overflow: auto;\n  overflow-x: hidden;\n}\n.lake-table-view-manage-hr {\n  height: 1px;\n  background-color: var(--yq-border-primary);\n}\n.lake-table-view-manage .lake-table-view-manage-inner {\n  max-height: 300px;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.lake-table-view-manage .lake-icon-table-grid-view {\n  color: var(--yq-yuque-green-6);\n}\n.lake-table-view-manage .lake-icon-table-card-view {\n  color: var(--yq-blue-5);\n}\n.lake-table-view-manage .lake-icon-table-kanban-view {\n  color: var(--yq-cyan-5);\n}\n");var Fx=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"_newViews",Us),s()(m()(r),"_getActiveView",(function(){return{id:r.tableModel.activeView.get("id"),name:r.tableModel.activeView.get("name"),type:r.tableModel.activeView.get("type")}})),s()(m()(r),"_getViews",(function(){return r.tableModel.getViews().map((function(e){return{id:e.get("id"),name:e.get("name"),type:e.get("type")}}))})),s()(m()(r),"_onCancelEditing",(function(){r.setState({editingKey:null})})),s()(m()(r),"_onChooseView",(function(e){if(!r.state.editingKey){var t=r.state.views.find((function(t){return t.id===e.key}));t&&(r.kernel.execute("activeView",t.id),r.setState({view:t}),r.props.close())}})),s()(m()(r),"_onCreateView",(function(e){e.key===Gs.GRID?r.kernel.execute("insertGrid"):e.key===Gs.CARD?r.kernel.execute("insertCard"):e.key===Gs.KANBAN&&r.kernel.execute("insertKanban"),r._refresh(),r.editor.emit(qs.HIDE_TOOLBAR_MENU)})),s()(m()(r),"_onRenameView",(function(e){r.setState({editingKey:e.key})})),s()(m()(r),"_onHandleSetting",(function(e,t){switch(t.domEvent.stopPropagation(),t.key){case"rename":r._onRenameView(e);break;case"copy":r.kernel.execute("copyView",e.key),r._refresh();break;case"remove":r.kernel.execute("removeView",e.key),r._refresh(),r.editor.emit(qs.HIDE_TOOLBAR_MENU)}})),s()(m()(r),"_onViewNameChange",(function(e,t){e.stopPropagation(),r.kernel.execute("updateViewName",e.target.value,t.key),r._onCancelEditing(),r._refresh()})),s()(m()(r),"_refresh",(function(){var e=r._getViews();r.setState({views:e}),r.props.editor.emit(qs.UPDATE_TOOLBAR_MENU)})),r.state={view:r._getActiveView(),views:r._getViews(),editingKey:null},r}return p()(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.view,r=t.views;if(!n)return null;var o=r.map((function(t){var n=[{key:"rename",title:_c("重命名视图")},{key:"copy",title:_c("复制视图")},{key:"remove",title:_c("删除视图")}];return{key:t.id,title:t.name,icon:l.a.createElement("span",{className:"lake-icon lake-table-view-icon lake-icon-table-".concat(t.type.toLowerCase(),"-view")}),onSettingClick:e._onHandleSetting,onTitleChange:e._onViewNameChange,settings:n}})),a=[{icon:l.a.createElement("span",{className:"lake-icon lake-icon-table-plus"}),title:l.a.createElement("span",null,_c("新建视图")),children:this._newViews.map((function(e){return{key:e.type,icon:l.a.createElement("span",{className:"lake-icon lake-table-view-icon lake-icon-table-".concat(e.type.toLowerCase(),"-view")}),title:e.title}}))}];return l.a.createElement("div",{className:"lake-table-menu-container lake-table-view-manage"},l.a.createElement(Vk,{menuKey:o.map((function(e){return e.title})).join(","),configs:o,onClick:this._onChooseView,onDoubleClick:function(){return!e.kernel.readOnly&&e._onRenameView},defaultSelectedKeys:[n.id],table:this.editor,onInputBlur:this._onCancelEditing,editingKey:this.state.editingKey,className:"lake-table-view-manage-inner"}),!this.kernel.readOnly&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"lake-table-view-manage-hr"}),l.a.createElement(Vk,{configs:a,onClick:this._onCreateView,className:"lake-table-menu-container lake-table-view-create",table:this.editor})))}},{key:"editor",get:function(){return this.props.editor}},{key:"kernel",get:function(){var e;return null===(e=this.props.editor)||void 0===e?void 0:e.kernel}},{key:"tableModel",get:function(){return this.kernel.tableModel}}]),n}(l.a.Component);var Bx=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","viewManage"),s()(m()(e),"renderToolbarItem",(function(){return l.a.createElement(Ix,{onManageView:e._onManageView,onMount:e._onToolbarItemMount,onUnmount:e._onToolbarItemUnmount,addView:e._addView,changeName:e._changeViewName,readonly:e._readonly()})})),s()(m()(e),"_readonly",(function(){return e.editor.readOnly})),s()(m()(e),"_onManageView",(function(t){var r=n._calculatePosition(t.target);r&&e.workbench.UI.showModal("viewManage",{scope:dc.GLOBAL,containerStyle:{left:"".concat(r.left,"px"),top:"".concat(r.bottom,"px")}})})),s()(m()(e),"_changeViewName",(function(t){var n,r=e.view;if(!r)return null;null===(n=e.editor.kernel)||void 0===n||n.execute("updateViewName",t,r.get("id"))})),s()(m()(e),"_getViewData",(function(t){var r,o,a=null===(r=e.editor.kernel)||void 0===r?void 0:r.tableModel.getActiveView(),i=1===(null===(o=e.editor.kernel)||void 0===o?void 0:o.tableModel.getViews().length);if(a){var l=a.get("type"),c="lake-icon lake-icon-table-".concat(l.toLowerCase(),"-view"),s=_c("GRID"===l?"表格视图":"画册视图"),u=a.get("name")||s;t.setState({isSignalView:i,icon:c,title:u,inputLength:n.getInputComponentLength(u)})}})),s()(m()(e),"_onToolbarItemMount",(function(t){var n,r,o,a,i;null===(n=e.editor.kernel)||void 0===n||n.on(gc.INIT_DATA,(function(){return e._getViewData(t)})),null===(r=e.editor.kernel)||void 0===r||r.on(gc.ENABLE_FORM,(function(){return e._getViewData(t)})),null===(o=e.editor.kernel)||void 0===o||o.on(gc.DISABLE_FORM,(function(){return e._getViewData(t)})),null===(a=e.editor.kernel)||void 0===a||a.on(gc.VIEW_CHANGED,(function(){return e._getViewData(t)})),null===(i=e.editor.kernel)||void 0===i||i.on(gc.VIEW_NAME_CHANGED,(function(){return e._getViewData(t)})),e.editor.on(qs.UPDATE_TOOLBAR_MENU,(function(){return e._getViewData(t)}))})),s()(m()(e),"_onToolbarItemUnmount",(function(t){var n,r,o,a,i;null===(n=e.editor.kernel)||void 0===n||n.off(gc.INIT_DATA,(function(){return e._getViewData(t)})),null===(r=e.editor.kernel)||void 0===r||r.off(gc.ENABLE_FORM,(function(){return e._getViewData(t)})),null===(o=e.editor.kernel)||void 0===o||o.off(gc.DISABLE_FORM,(function(){return e._getViewData(t)})),null===(a=e.editor.kernel)||void 0===a||a.off(gc.VIEW_CHANGED,(function(){return e._getViewData(t)})),null===(i=e.editor.kernel)||void 0===i||i.off(gc.VIEW_NAME_CHANGED,(function(){return e._getViewData(t)})),e.editor.off(qs.UPDATE_TOOLBAR_MENU,(function(){return e._getViewData(t)}))})),s()(m()(e),"_addView",(function(t){var r=n._calculateNewViewModalPosition(t.target);r&&e.workbench.UI.showModal("newView",{scope:dc.GLOBAL,containerStyle:{left:"".concat(r.left,"px"),top:"".concat(null==r?void 0:r.bottom,"px")}})})),e}return p()(n,[{key:"init",value:function(){var e,t=this;null===(e=this.kernel)||void 0===e||e.on(gc.VIEW_CHANGED,(function(){t.workbench.UI.hideModal(t.name)})),this.editor.on(qs.HIDE_TOOLBAR_MENU,(function(){t.workbench.UI.hideModal(t.name)}))}},{key:"registerToolbarItem",value:function(){return{name:this.name,renderToolbarItem:this.renderToolbarItem}}},{key:"registerModal",value:function(){var e=this;return{name:"viewManage",renderComponent:function(t){return l.a.createElement(Fx,a()({},t,{editor:e.editor}))}}}},{key:"view",get:function(){var e;return null===(e=this.editor.kernel)||void 0===e?void 0:e.tableModel.getActiveView()}},{key:"kernel",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.kernel}}],[{key:"_calculatePosition",value:function(e){if(e){var t=mk(e,"lake-table-components-normal-button");if(t){var n=t.getBoundingClientRect();return{left:n.left,bottom:n.bottom}}}}},{key:"_calculateNewViewModalPosition",value:function(e){if(e){var t=mk(e,"lake-table-components-normal-button");if(t){var n=t.getBoundingClientRect();return{left:n.left,bottom:n.bottom}}}}}]),n}();s()(Bx,"getInputComponentLength",(function(e){for(var t=0,n=0;n<e.length;n++)t+=e.charCodeAt(n)>255?14:7;return t+16})),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.toolbar-search-input-item {\n  width: 190px;\n  display: flex;\n  align-items: center;\n  height: 28px;\n  padding: 0 5px;\n  margin: 0 3px;\n  color: var(--yq-text-primary);\n  text-align: center;\n  border-radius: 4px;\n}\n.toolbar-search-input-item input::placeholder {\n  color: var(--yq-text-disable);\n  font-size: 14px;\n}\n.toolbar-search-input-item .toolbar-search-input-item-icon {\n  font-size: 16px;\n}\n.toolbar-search-input-item .toolbar-search-input-item-clear {\n  font-size: 16px;\n  cursor: pointer;\n  color: var(--yq-text-caption);\n}\n.toolbar-search-input-item .toolbar-search-input-item-clear:hover {\n  color: #333333;\n}\n.toolbar-search-input-item .toolbar-search-input-item-content {\n  max-width: 130px;\n}\n.toolbar-search-input-button {\n  min-width: 26px;\n}\n");var Vx=Object(i.forwardRef)((function(e,t){var n=e.model,r=void 0===n?"modal":n,o=e.onClickButton,a=e.buttonType,c=void 0===a?"normal":a,s=e.onSearch,u=e.onClearSearch,d=Object(i.useState)(!1),f=ie()(d,2),p=f[0],h=f[1],m=Object(i.useState)(!1),v=ie()(m,2),g=v[0],b=v[1];Object(i.useImperativeHandle)(t,(function(){return{setSearchStatus:function(){h(!0)}}}));var y=$()((function(e){var t,n;s&&s(null===(t=e.target)||void 0===t?void 0:t.value),b(Boolean(null===(n=e.target)||void 0===n?void 0:n.value))}),300),w=function(){u&&u(),h(!1),b(!1)};return l.a.createElement(l.a.Fragment,null,p?l.a.createElement("div",{className:"toolbar-search-input-item"},l.a.createElement("span",{className:"lake-icon lake-icon-search-len toolbar-search-input-item-icon"}),l.a.createElement(Bl,{onBlur:w,onChange:function(e){e.persist(),y(e)},className:"toolbar-search-input-item-content",bordered:!1,placeholder:_c("请输入关键词..."),autoFocus:!0}),g&&l.a.createElement("span",{onClick:w,className:"lake-icon lake-icon-table-delete-file toolbar-search-input-item-clear"})):l.a.createElement(Sx,{className:"toolbar-search-input-button",onClick:function(e){"input"===r&&h(!0),o&&o(e)},title:_c("查找"),tooltip:_c("查找"),icon:"lake-icon lake-icon-search-len",type:c}))}));nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-search {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  position: fixed;\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 4px;\n  padding: 0 10px 16px;\n  right: 10px;\n  top: 96px;\n  width: 350px;\n  z-index: 500;\n  cursor: grab;\n}\n.lake-table-search .lake-icon-close {\n  position: absolute;\n  right: 4px;\n  top: 7px;\n  cursor: pointer;\n  padding: 8px;\n  z-index: 1;\n}\n.lake-table-search .ant-tabs-tab {\n  margin-right: 12px;\n  padding: 12px 16px;\n}\n.lake-table-search .ant-tabs-content h5 {\n  color: var(--yq-text-body);\n}\n.lake-table-search .ant-tabs-content h5:not(:first-of-type) {\n  margin-top: 10px;\n}\n.lake-table-search .search-input {\n  position: relative;\n}\n.lake-table-search .search-input .search-result {\n  position: absolute;\n  top: 7px;\n  right: 10px;\n  font-size: 12px;\n  color: var(--yq-text-caption);\n}\n.lake-table-search .search-foot {\n  margin-top: 12px;\n  text-align: right;\n}\n.lake-table-search .search-foot .ant-btn {\n  margin-left: 8px;\n}\n.lake-table-search .search-foot .replace-all {\n  float: left;\n  margin-left: 0;\n}\n.lake-table-search.grid .ant-tabs-ink-bar {\n  background: none;\n}\n");var Hx=Zt.a.TabPane,zx=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"composition",void 0),s()(m()(e),"searchInputRef",l.a.createRef()),s()(m()(e),"searchBoxRef",l.a.createRef()),s()(m()(e),"state",{q:"",count:0,current:0,currentMode:""}),s()(m()(e),"_refreshData",(function(t){e.setState({count:t?t.count:0,current:t?t.current:0})})),s()(m()(e),"_onCloseSearch",(function(){var t,n=e.props,r=n.editor,o=n.close;null===(t=r.kernel)||void 0===t||t.execute("clearSearch"),e.setState({q:""}),o()})),s()(m()(e),"_onChangeQuery",(function(t){var n;if(!e.composition&&t.target){var r=e.props.editor,o=t.target,a=o.value;e.setState({q:a,current:0},(function(){o.focus()}));var i=null===(n=r.kernel)||void 0===n?void 0:n.execute("search",a);i&&e._selectCell(i[i.length-1])}})),s()(m()(e),"_selectCell",(function(t){t&&t.cell&&e.viewport.selectById&&e.viewport.selectById(t.cell.row,t.cell.col.id)})),s()(m()(e),"_onSearchNext",(function(){var t,n,r=null===(t=e.props.editor.kernel)||void 0===t?void 0:t.execute("searchNext");null===(n=e.searchInputRef.current)||void 0===n||n.focus(),r&&e._selectCell(r[r.length-1])})),s()(m()(e),"_changeMode",(function(t){e.setState({currentMode:t})})),s()(m()(e),"_onSearchPrev",(function(){var t,n=null===(t=e.props.editor.kernel)||void 0===t?void 0:t.execute("searchPrev");n&&e._selectCell(n[n.length-1])})),s()(m()(e),"_onCompositionStart",(function(){e.composition=!0})),s()(m()(e),"_onCompositionEnd",(function(t){e.composition=!1,e._onChangeQuery(t)})),s()(m()(e),"_onKeyDown",(function(t){27===t.keyCode&&e._onCloseSearch()})),e}return p()(n,[{key:"componentDidMount",value:function(){this.props.editor.on(qs.SEARCHED,this._refreshData)}},{key:"componentWillUnmount",value:function(){this._onCloseSearch()}},{key:"render",value:function(){var e=this.state,t=e.q,n=e.count,r=e.current;return l.a.createElement("div",{className:"lake-table-search grid",ref:this.searchBoxRef},l.a.createElement("span",{className:"lake-icon lake-icon-close",onClick:this._onCloseSearch}),l.a.createElement(Zt.a,{defaultActiveKey:"search",onChange:this._changeMode,animated:!1},l.a.createElement(Hx,{tab:_c("查找"),key:"search"},l.a.createElement("div",{className:"search-input"},l.a.createElement(ht.a,{className:"lake-table-search-input",ref:this.searchInputRef,defaultValue:t,onChange:this._onChangeQuery,onCompositionStart:this._onCompositionStart,onCompositionEnd:this._onCompositionEnd,autoFocus:!0,onPressEnter:this._onSearchNext,onKeyDown:this._onKeyDown}),t&&l.a.createElement("span",{className:"search-result"},Math.min(r+1,n)," / ",n)),l.a.createElement("div",{className:"search-foot"},l.a.createElement(ft.a,{size:"small",onClick:this._onSearchPrev},_c("上一个")),l.a.createElement(ft.a,{size:"small",onClick:this._onSearchNext},_c("下一个"))))))}},{key:"viewport",get:function(){var e;return null===(e=this.props.editor.viewManager)||void 0===e?void 0:e.getViewRenderer().viewportHelper}}]),n}(l.a.Component);var qx=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","search"),s()(m()(e),"options",void 0),s()(m()(e),"componentRef",l.a.createRef()),s()(m()(e),"_showSearch",(function(){var t,n;"input"===(null===(t=e.options)||void 0===t?void 0:t.model)?null===(n=e.componentRef.current)||void 0===n||n.setSearchStatus():e._showModal()})),s()(m()(e),"_showModal",(function(){e.workbench.UI.hasModal("search")||e.workbench.UI.showModal("search",{scope:dc.WORKBENCH,showMask:!1})})),s()(m()(e),"_renderToolbarItem",(function(t,n){return e.options=n,"input"===(null==n?void 0:n.model)?l.a.createElement(Vx,a()({ref:e.componentRef},e._getInputSearchConfig(),n)):l.a.createElement(Vx,a()({ref:e.componentRef},e._getModalSearchConfig(),n))})),s()(m()(e),"_getInputSearchConfig",(function(){return{onSearch:e._search,onClearSearch:e._clearSearch}})),s()(m()(e),"_getModalSearchConfig",(function(){return{onClickButton:function(t){return e._showSearchModalByToolbarItem(t)}}})),s()(m()(e),"_showSearchModalByToolbarItem",(function(t){e._showModal()})),s()(m()(e),"_search",(function(t){var n;null===(n=e.editor.kernel)||void 0===n||n.execute("search",t)})),s()(m()(e),"_clearSearch",(function(){var t;null===(t=e.editor.kernel)||void 0===t||t.execute("clearSearch")})),e}return p()(n,[{key:"init",value:function(){this.editor.on(qs.SEARCH,this._showSearch)}},{key:"registerModal",value:function(){var e=this;return{name:"search",renderComponent:function(t){return l.a.createElement(zx,a()({editor:e.editor},t))}}}},{key:"registerToolbarItem",value:function(){return{name:this.name,renderToolbarItem:this._renderToolbarItem}}}]),n}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-menu-kanban-group-modal {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 2px;\n  overflow: auto;\n  overflow-x: hidden;\n  padding: 8px 0 8px;\n}\n.lake-table-menu-kanban-group {\n  min-width: 200px;\n  margin: 0;\n}\n.lake-table-menu-kanban-group-option {\n  text-align: left;\n  padding: 8px 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n  width: 100%;\n  height: 34px;\n  overflow: visible;\n  color: var(--yq-text-body);\n}\n.lake-table-menu-kanban-group-option .lake-icon-success {\n  margin-left: 8px;\n}\n.lake-table-menu-kanban-group-option .lake-icon-col-type {\n  margin-right: 8px;\n}\n.lake-table-menu-kanban-group-option:hover {\n  background: var(--yq-bg-tertiary);\n}\n.lake-table-menu-container .lake-table-view-icon {\n  font-size: 16px;\n  margin-right: 0;\n}\n");var Ux=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;d()(this,n),r=t.call(this,e),s()(m()(r),"onChange",(function(e){var t=[{id:e.id}];r.setState({group:t}),r.kernel.execute("setGroup",t),r.props.close()}));var o=r.groupService.getGroup()||[];return r.state={group:wc(o)},r}return p()(n,[{key:"renderOption",value:function(e){var t=this;return l.a.createElement("div",{key:e.id,className:"lake-table-menu-kanban-group-option",onClick:function(){t.onChange(e)}},l.a.createElement("span",null,l.a.createElement("span",{className:"lake-icon lake-icon-col-type lake-icon-col-".concat(e.type.toLowerCase())}),e.name),l.a.createElement("span",{className:e.id===this.state.group[0].id?"lake-icon lake-icon-success":"lake-table-menu-kanban-group-empty"}))}},{key:"renderOptions",value:function(){var e=this,t=this.kanbanService.getGroupColumns();return l.a.createElement(ew,{minHeight:36,maxHeight:400,container:this.props.container},l.a.createElement("div",{className:"lake-table-menu-kanban-group-options"},t.map((function(t){return e.renderOption(t)}))))}},{key:"render",value:function(){return 0===this.state.group.length?null:l.a.createElement("div",{className:"lake-table-menu-container lake-table-menu-kanban-group lake-table-menu-kanban-group-modal"},this.renderOptions())}},{key:"editor",get:function(){return this.props.editor}},{key:"kernel",get:function(){return this.editor.kernel}},{key:"tableModel",get:function(){return this.kernel.tableModel}},{key:"kanbanService",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.kanbanService}},{key:"groupService",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.groupService}},{key:"view",get:function(){var e;return null===(e=this.tableModel)||void 0===e?void 0:e.activeView}}]),n}(l.a.Component);var Gx=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","kanbanGroup"),s()(m()(e),"_onClickToolbarItem",(function(t){var n=e._calculatePosition(t.target);n&&e.workbench.UI.showModal("kanbanGroup",{scope:dc.GLOBAL,containerStyle:{left:"".concat(n.left,"px"),top:"".concat(n.top,"px")}})})),s()(m()(e),"_calculatePosition",(function(e){var t=mk(e,"lake-workbench-toolbar-button"),n=null==t?void 0:t.getBoundingClientRect();if(n)return{left:n.left,top:n.bottom}})),s()(m()(e),"_renderToolbarItemTitle",(function(){var t,n,r,o,a=null===(t=e.editor.kernel)||void 0===t?void 0:t.tableModel.activeView;if(!a)return l.a.createElement(l.a.Fragment,null);if(a.type!==Gs.KANBAN)return l.a.createElement(l.a.Fragment,null);var i=null===(n=e.editor.kernel)||void 0===n?void 0:n.groupService.getGroup();if(!i||0===i.length)return l.a.createElement(l.a.Fragment,null);var c=null===(r=e.editor.kernel)||void 0===r?void 0:r.tableModel.getFieldsMap();if(!c)return l.a.createElement(l.a.Fragment,null);var s=c[i[0].id];return l.a.createElement("div",{key:s.id},_c("按"),l.a.createElement("span",{className:"lake-table-toolbar-kanban-name"},l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(null===(o=s.type)||void 0===o?void 0:o.toLowerCase()),style:{fontSize:14,marginLeft:4,marginRight:4}}),s.name),_c("分组"))})),s()(m()(e),"_hideToolbarItem",(function(){var t,n,r=null===(t=e.editor.kernel)||void 0===t?void 0:t.tableModel.getActiveView();if(!r)return!0;if(r.get("type")!==Gs.KANBAN)return!0;var o=null===(n=e.editor.kernel)||void 0===n?void 0:n.groupService.getGroup();return!o||0===o.length})),e}return p()(n,[{key:"registerToolbarItem",value:function(){return{name:this.name,hide:this._hideToolbarItem,onClick:this._onClickToolbarItem,title:this._renderToolbarItemTitle}}},{key:"registerModal",value:function(){var e=this;return{name:this.name,renderComponent:function(t){return l.a.createElement(Ux,a()({editor:e.editor,container:e.workbench.UI.containerEl.globalModalContainer},t))}}}}]),n}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-new-view-container {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border-radius: 8px;\n  width: 140px;\n  height: auto;\n  padding: 8px 0;\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  background-color: var(--yq-bg-primary);\n  border-radius: 6px;\n  border: 1px solid var(--yq-border-primary);\n  color: var(--yq-text-primary);\n}\n.lake-table-new-view-container .new-view-item {\n  align-items: center;\n  display: flex;\n  height: 38px;\n  width: 140px;\n  cursor: pointer;\n  padding-left: 15px;\n}\n.lake-table-new-view-container .new-view-item .grid-icon {\n  color: var(--yq-yuque-green-6);\n  font-size: 16px;\n}\n.lake-table-new-view-container .new-view-item .card-icon {\n  color: var(--yq-blue-5);\n  font-size: 16px;\n}\n.lake-table-new-view-container .new-view-item .kanban-icon {\n  color: var(--yq-cyan-5);\n  font-size: 16px;\n}\n.lake-table-new-view-container .new-view-item .title {\n  font-size: 14px;\n  line-height: 22px;\n  margin-left: 8px;\n  color: var(--yq-text-body);\n}\n.lake-table-new-view-container .new-view-item:hover {\n  background-color: var(--yq-bg-tertiary);\n}\n");var Wx=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"_views",Us),s()(m()(e),"_getIcon",(function(e){switch(e){case Gs.GRID:return"lake-icon lake-icon-table-grid-view grid-icon";case Gs.CARD:return"lake-icon lake-icon-table-card-view card-icon";case Gs.KANBAN:return"lake-icon lake-icon-table-kanban-view kanban-icon";default:ed(!1)}})),s()(m()(e),"_getViewConfig",(function(){return e._views.map((function(t){return{title:t.title,icon:e._getIcon(t.type),onClick:function(){return e._addView(t.type)},type:t.type}}))})),s()(m()(e),"_addView",(function(t){var n,r,o,a=e.props.editor;switch(t){case Gs.GRID:null===(n=a.kernel)||void 0===n||n.execute("insertGrid");break;case Gs.CARD:null===(r=a.kernel)||void 0===r||r.execute("insertCard");break;case Gs.KANBAN:null===(o=a.kernel)||void 0===o||o.execute("insertKanban")}a.emit(qs.HIDE_TOOLBAR_MENU),e.props.close()})),e}return p()(n,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"lake-table-new-view-container"},this._getViewConfig().map((function(t,n){var r=t.icon,o=t.title,a=t.type;return l.a.createElement("div",{key:n,className:"new-view-item",onClick:function(){return e._addView(a)}},l.a.createElement("span",{className:r}),l.a.createElement("span",{className:"title"},o))})))}}]),n}(l.a.Component);var Yx=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","newView"),e}return p()(n,[{key:"registerModal",value:function(){var e=this;return{name:this.name,renderComponent:function(t){return l.a.createElement(Wx,a()({editor:e.editor},t))}}}}]),n}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-menubar {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  color: var(--yq-text-primary);\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 4px;\n  padding: 5px 0;\n}\n.lake-table-menubar-item {\n  padding: 8px 12px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n  height: 34px;\n  overflow: visible;\n}\n.lake-table-menubar-item .ant-input {\n  width: 48px;\n  margin: 0 6px;\n  text-align: center;\n}\n.lake-table-menubar-item:hover {\n  background: var(--yq-bg-primary-hover);\n}\n.lake-table-menubar-item .ant-input-number {\n  border-radius: 2px;\n}\n.lake-table-menubar-item .ant-input-number-sm {\n  width: 70px;\n}\n.lake-table-menubar-item.disabled {\n  color: var(--yq-text-disable);\n  cursor: not-allowed;\n}\n.lake-table-menubar-item.disabled .lake-icon {\n  color: var(--yq-text-disable);\n}\n.lake-table-menubar-icon {\n  width: 16px;\n  font-size: 16px;\n  color: var(--yq-text-body);\n  line-height: 34px;\n  margin-right: 8px;\n}\n.lake-table-menubar-hotkey {\n  color: var(--yq-text-caption);\n  font-size: 12px;\n}\n.lake-table-menubar-content {\n  display: flex;\n  align-items: center;\n  line-height: 24px;\n}\n.lake-table-menubar .lake-icon-arrow-right {\n  color: var(--yq-text-caption);\n}\n.lake-table-menubar-submenu {\n  position: absolute;\n  background-color: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 4px;\n  padding: 6px 0;\n  min-width: 104px;\n  z-index: 500;\n}\n.lake-table-menubar-submenu .lake-table-submenu-item {\n  display: flex;\n  user-select: none;\n  white-space: nowrap;\n  align-items: center;\n  padding: 6px 12px;\n}\n.lake-table-menubar-submenu .lake-table-submenu-item:hover {\n  background: var(--yq-bg-tertiary);\n}\n.lake-table-menubar-submenu .lake-table-submenu-text {\n  display: inline-flex;\n  flex: 1;\n  margin-right: 16px;\n}\n.lake-table-menubar .split {\n  border-top: 1px solid var(--yq-border-light);\n  margin: 8px 0;\n}\n.lake-table-context-menu {\n  width: 210px;\n}\n");var $x=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){return d()(this,n),t.apply(this,arguments)}return p()(n,[{key:"onClickMenu",value:function(e,t){if(e.onClick)return e.onClick(t),void this.props.close();var n,r;void 0===t?null===(n=this.editor)||void 0===n||n.execute(e.command):null===(r=this.editor)||void 0===r||r.execute(e.command,t),this.props.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.menubar,r=t.className;if(n&&0!==n.length)return l.a.createElement("div",{className:S()("lake-table-menubar",r),onContextMenu:function(e){e.preventDefault()}},n.map((function(t,n){return"seperator"===t.type?l.a.createElement("div",{key:n,className:"split"}):t.disabled?l.a.createElement(dt.a,{title:t.disabledText,placement:"right",key:n},l.a.createElement("div",{key:n,className:"lake-table-menubar-item disabled",id:"menubar-".concat(t.command),onClick:function(e){e.stopPropagation()}},l.a.createElement("div",{className:"lake-table-menubar-content"},l.a.createElement("div",{className:"lake-table-menubar-icon"},t.icon&&l.a.createElement("span",{className:"lake-icon lake-icon-".concat(t.icon)})),t.text),t.hotkey?l.a.createElement("div",{className:"lake-table-menubar-hotkey"},t.hotkey):null)):l.a.createElement("div",{key:n,className:"lake-table-menubar-item",id:"menubar-".concat(t.command),onClick:function(n){e.onClickMenu(t,{e:n})}},l.a.createElement("div",{className:"lake-table-menubar-content"},l.a.createElement("div",{className:"lake-table-menubar-icon"},t.icon?l.a.createElement("span",{className:"lake-icon lake-icon-".concat(t.icon)}):null),t.text),t.hotkey?l.a.createElement("div",{className:"lake-table-menubar-hotkey"},t.hotkey):null)})))}},{key:"editor",get:function(){return this.props.editor}}]),n}(l.a.Component),Kx=function(e,t,n){var r,o=e.kernel.tableModel.getActiveView();switch(n.type||o.type){case Gs.GRID:r=function(e,t,n,r){var o=n.selections;if(!o)return null;var a=o.row,i=o.col,l=o.rowCount,c=n&&n.target?n.target.col:i;return[{command:"colConfigs",text:_c("编辑列"),icon:"edit-new",disable:e.kernel.readOnly||["row","selection","cell"],onClick:function(){e.emit(qs.COL_CONFIGS,{col:c})}},{type:"seperator",disable:["row","selection","cell"]},function(e,t){return!e.kernel.readOnly&&!["row","selection","cell"].includes(t.mode)&&0!==o.col&&0!==c&&{command:"insertGridColLeft",text:_c("向左插入列"),icon:"left-arrow",disable:e.kernel.readOnly||["row","selection","cell"],onClick:function(){e.emit(qs.COL_CONFIGS,{col:c,options:{create:!0}})}}},{command:"insertGridColRight",text:_c("向右插入列"),icon:"right-arrow",disable:e.kernel.readOnly||["row","selection","cell"],onClick:function(){e.emit(qs.COL_CONFIGS,{col:c+1,options:{create:!0}})}},{type:"seperator"},function(e,t){var n;if(["row","selection","cell"].includes(t.mode))return!1;var o=t.target,a=e.kernel.tableModel.getTableFields().find((function(e){return e.id===t.target.id})),i=r.get("group"),l=!1,c=_c("按本列分组",a.name);return i&&(null===(n=i[0])||void 0===n?void 0:n.id)===o.id&&(c=_c("取消分组"),l=!0),{command:"group",text:c,icon:"group",onClick:function(){var t=[{id:o.id,type:"asc"}];l&&(t=[]),e.kernel.execute("setGroup",t)}}},function(e,n){if(["row","selection","cell"].includes(n.mode))return!1;var o=e.kernel.tableModel.getTableFields().find((function(e){return e.id===n.target.id})),a=_c("按本列筛选",o.name),i=Object.assign({operator:"and",options:[]},r.get("filter")||{}),l=!1,c=i.options.findIndex((function(e){return e.id===n.target.id}));return c>-1&&(a=_c("取消筛选"),l=!0),{command:"filter",text:a,icon:"grid-filter",onClick:function(){if(l)return delete i.options[c],void e.kernel.execute("setFilter",i);var r=wf.filter((function(e){return e.type===kf[o.type]}));i.options.push({id:n.target.id,func:r[0].func,expected:null}),e.kernel.execute("setFilter",i),t.plugins.get("filter").showModal()}}},{command:"sortAsc",text:_c("升序"),disable:["row","selection","cell"],onClick:function(){e.kernel.execute("setSort",{auto:!1,options:[{id:n.target.id,type:"asc"}]})}},{command:"sortDesc",text:_c("降序"),disable:["row","selection","cell"],onClick:function(){e.kernel.execute("setSort",{auto:!1,options:[{id:n.target.id,type:"desc"}]})}},{type:"seperator"},{command:"copy",text:_c("复制"),hotkey:hs(["command","+","C"]),disable:["col"],onClick:function(){e.kernel.execute("copy")}},{command:"paste",text:_c("粘贴"),hotkey:hs(["command","+","V"]),disable:e.kernel.readOnly||["col"],onClick:function(){var t=e.kernel.processService.clipboardData;t&&e.kernel.execute("paste",t)}},{type:"seperator"},{command:"removeGridCol",text:_c("删除列"),icon:"table-delete",disable:e.kernel.readOnly||["row","selection","cell"],disabled:r.get("columns").length<=1||0===c,disabledText:r.get("columns").length<=1?_c("数据表至少需要有一列"):_c("本列是索引列，是每条记录的关键信息，用来标识每条记录，不能被删除"),onClick:function(){e.kernel.execute("removeCol",r.data.columns[c].id)}},{command:"insertGridRowUp",text:_c("向上插入行"),hotkey:hs(["command","+","Shift","+","Enter"]),disable:e.kernel.readOnly||["col","selection"],icon:"up-arrow",onClick:function(){var t;e.kernel.groupService.grouping&&(t=e.kernel.groupService.getGroupValueByRow(r,a)),e.kernel.execute("insertRow",a,t)}},{command:"insertGridRowDown",text:_c("向下插入行"),hotkey:hs(["Shift","+","Enter"]),disable:e.kernel.readOnly||["col","selection"],icon:"down-arrow",onClick:function(){e.kernel.execute("insertRow",a+1)}},{type:"seperator"},{command:"expandGridRow",text:_c("展开行"),hotkey:"Space",disable:["col","selection"],icon:"table-expand",onClick:function(){e.emit(qs.SHOW_ROW_EDITOR,{row:a})}},{command:"removeGridRow",text:_c("删除行"),disable:e.kernel.readOnly||["col"],onClick:function(){for(var t=[],n=a;n<a+l;n++)t.push(r.data.rows[n].id);e.kernel.execute("removeRows",t)}},function(e,t){if(["row","selection","col"].includes(t.mode))return!1;var n=t.target;return!(!n||!n.value)&&!(!Vc.includes(n.cellType)||!n.value.src)&&{command:"downloadImage",text:_c("下载$1",Lc(n.cellType)),icon:"download",onClick:function(){window.open(n.value.src,"_blank")}}}]}(e,t,n,o);break;case Gs.CARD:r=function(e,t,n){var r=t.row;return[{command:"insertGridRowLeft",text:_c("向左插入记录"),icon:"left-arrow",disable:e.kernel.readOnly,onClick:function(){var t=e.kernel.execute("insertRow",r),o=n.get("rows").findIndex((function(e){return e.id===t[1]}));setTimeout((function(){e.emit(qs.SHOW_ROW_EDITOR,{row:o,mode:"edit"})}),300)}},{command:"insertGridRowRight",text:_c("向右插入记录"),icon:"right-arrow",disable:e.kernel.readOnly,onClick:function(){var t=e.kernel.execute("insertRow",r+1),o=n.get("rows").findIndex((function(e){return e.id===t[1]}));setTimeout((function(){e.emit(qs.SHOW_ROW_EDITOR,{row:o,mode:"edit"})}),300)}},{type:"seperator"},{command:"expandGridRow",hotkey:"Space",text:_c("展开记录"),disable:["col","selection"],icon:"table-expand",onClick:function(){e.emit(qs.SHOW_ROW_EDITOR,{row:r})}},{command:"removeGridRow",text:_c("删除记录"),disable:e.kernel.readOnly||["col"],onClick:function(){var t=n.get("rows");e.kernel.execute("removeRows",[t[r].id])}}]}(e,n,o);break;case Gs.KANBAN:r=function(e,t,n){var r=t.row;return[{command:"insertGridRowLeft",text:_c("向上插入记录"),icon:"top-arrow",disable:e.kernel.readOnly,onClick:function(){var t=n.data,o=t.rows,a=t.group,i=o[r].id,l=n.getGroupByRow(i),c=o.findIndex((function(e){return e.id===i})),s={};s[a[0].id]={value:wc(l.titleValue)};var u=e.kernel.execute("insertRow",c,s,l.value),d=n.get("rows").findIndex((function(e){return e.id===u[1]}));setTimeout((function(){e.viewManager.getViewRenderer().viewportHelper.scrollToCard(d),e.emit(qs.SHOW_ROW_EDITOR,{row:d,mode:"edit"})}),300)}},{command:"insertGridRowRight",text:_c("向下插入记录"),icon:"bottom-arrow",disable:e.kernel.readOnly,onClick:function(){var t=n.data,o=t.rows,a=t.group,i=o[r].id,l=n.getGroupByRow(i),c=o.findIndex((function(e){return e.id===i})),s={};s[a[0].id]={value:wc(l.titleValue)};var u=e.kernel.execute("insertRow",c+1,s,l.value),d=n.get("rows").findIndex((function(e){return e.id===u[1]}));setTimeout((function(){e.viewManager.getViewRenderer().viewportHelper.scrollToCard(d),e.emit(qs.SHOW_ROW_EDITOR,{row:d,mode:"edit"})}),300)}},{type:"seperator"},{command:"copyGridRow",text:_c("复制记录"),disable:e.kernel.readOnly,onClick:function(){var t=n.data.rows[r].id,o=n.getGroupByRow(t),a=e.kernel.execute("copyRow",r,o),i=n.get("rows").findIndex((function(e){return e.id===a[1]}));setTimeout((function(){e.viewManager.getViewRenderer().viewportHelper.scrollToCard(i)}),300)}},{command:"expandGridRow",hotkey:"Space",text:_c("展开记录"),icon:"table-expand",onClick:function(){e.emit(qs.SHOW_ROW_EDITOR,{row:r})}},{command:"removeGridRow",text:_c("删除记录"),disable:e.kernel.readOnly,onClick:function(){var t=n.get("rows");e.kernel.execute("removeRows",[t[r].id])}}]}(e,n,o);break;default:r=null}if(!r)return null;var a=[];r.forEach((function(t){if(("function"!=typeof t||(t=t(e,n)))&&!(Array.isArray(t.disable)&&t.disable.includes(n.mode)||!0===t.disable||(a.push(t),"seperator"!==t.type))){var r=a[a.length-2];r&&"seperator"!==r.type||a.pop()}}));var i=a[a.length-1];return i&&"seperator"===i.type&&a.pop(),a};var Xx=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","contextMenu"),s()(m()(e),"init",(function(){e.editor.on(qs.SHOW_MENU,e.showContextMenu),e.editor.on(qs.HIDE_MENU,e.hideContextMenu),e.editor.on(qs.SCROLL,e.hideContextMenu),window.addEventListener("resize",e.hideContextMenu)})),s()(m()(e),"hideContextMenu",(function(){e.workbench.UI.hideModal(e.name)})),s()(m()(e),"showContextMenu",$()((function(t){var n=Kx(e.editor,e.workbench,t);if(n&&0!==n.length){var r=e.getContextMenuPosition(t,n);e.workbench.UI.showModal(e.name,{containerStyle:{left:"".concat(r.left,"px"),top:"".concat(r.top,"px")},modalProps:{menubar:n,className:"lake-table-context-menu"}})}}),80)),s()(m()(e),"getContextMenuPosition",(function(t,n){var r,o=null===(r=e.editorContainer)||void 0===r?void 0:r.getBoundingClientRect();if(o){var a=n.filter((function(e){return"seperator"===e.type})).length,i=16*a+34*(n.length-a)+12,l=t.e,c=l.clientX,s=l.clientY,u=e.editorContainer.clientWidth+o.left-200,d=window.innerHeight-i-10,f={left:Math.min(u,c+10),top:Math.max(Math.min(d,s+10),56)};return t.colConfig&&(f.top=o.top+e.editor.theme.colHeaderHeight,f.left=Math.min(u,c+10)),i>document.body.clientHeight-56&&(f.height=document.body.clientHeight-56,f.overflow="auto",f.top=56),f}})),e}return p()(n,[{key:"destroy",value:function(){window.removeEventListener("resize",this.hideContextMenu)}},{key:"registerModal",value:function(){var e=this;return{name:"contextMenu",renderComponent:function(t){return l.a.createElement($x,a()({editor:e.editor},t))}}}},{key:"editorContainer",get:function(){return this.workbench.UI.containerEl.editorContainer}}]),n}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.col-config-select-options .select-options-add-item {\n  padding: 4px 8px;\n  color: var(--yq-text-primary);\n  border-radius: 6px;\n  margin-left: 34px;\n  cursor: pointer;\n  width: 120px;\n  font-size: 14px;\n}\n.col-config-select-options .select-options-add-item:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.col-config-select-options .select-options-add-item .lake-icon-plus {\n  margin-right: 5px;\n}\n");var Zx=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"inputs",[]),s()(m()(r),"getOptions",(function(){var e=r.props,t=e.configs,n=e.defaultValue,o=r.state,a=o.options,i=o.multi,l=o.color;return a?(a.forEach((function(e){e.id||(e.ud=fs(6))})),{options:a,multi:i,color:l}):(a=[{value:n,id:fs(6)},{value:"",id:fs(6)},{value:"",id:fs(6)}],l=!!t&&!!t.color,t&&t.options&&0!==t.options.length&&(a=t.options,i=t.type===Ac.MULTI_SELECT,void 0===t.color&&(l=!!t.options[0]&&!!t.options[0].color)),a.forEach((function(e,t){l&&!e.color&&(e.color=0===t?Jh.getNextColor("",r.themeManager):Jh.getNextColor(a[t-1].color,r.themeManager))})),{options:a,multi:i,color:l})})),s()(m()(r),"onAddItem",(function(e){var t=r.state.options,n={value:"",id:fs(6)},o=0===t.length?"":t[t.length-1].color;n.color=Jh.getNextColor(o,r.themeManager),t.push(n),r.setState({options:t.slice()},(function(){r.optionList&&r.optionList.current&&(r.optionList.current.scrollTop=1e4),e&&r.inputs.length>1&&r.inputs[r.inputs.length-1].focus(),r.onChange()}))})),s()(m()(r),"onChangeItem",(function(e,t){var n=e.target.value.trim(),o=r.state.options;o[t].value=n,r.setState({options:o},(function(){r.inputs[t].focus(),r.onChange()}))})),s()(m()(r),"onDeleteItem",(function(e,t){var n=r.state.options;n.splice(t,1),r.inputs.splice(t,1),r.setState({options:n.slice()},(function(){r.onChange()}))})),s()(m()(r),"onChangeColor",(function(e,t){var n=r.state.options;n[e].color=t,r.setState({options:n.slice()},(function(){r.onChange()}))})),s()(m()(r),"toggleColor",(function(e){var t=e.target.checked,n=r.state.options;t&&n[0]&&!n[0].color&&n.forEach((function(e,t){e.color=Jh.getByIndex(t,r.themeManager)})),r.setState({options:n,color:t},(function(){r.onChange()}))})),s()(m()(r),"beforeChange",(function(e){r.setState({options:e},(function(){r.onChange()}))})),s()(m()(r),"onPressEnter",(function(e){e>=r.state.options.length-1?r.onAddItem(!0):r.inputs[e+1].input.focus()})),r.state={},r}return p()(n,[{key:"themeManager",get:function(){return this.props.themeManager}},{key:"componentDidMount",value:function(){this.optionList=l.a.createRef();var e=this.getOptions(),t=e.options,n=e.multi,r=e.color;this.setState({options:t,multi:n,color:r},this.props.onCompleteMount)}},{key:"onChange",value:function(){var e=this,t={color:this.state.color},n=[];this.state.options.forEach((function(t){if(""!==t.value){var r={value:t.value,id:t.id};e.state.color&&(r.color=t.color),""!==t.value&&n.push(r)}})),t.options=Ye()(n,(function(e){return e.value})),this.props.multiple&&(t.multi=!!this.state.multi),this.props.onChange&&this.props.onChange(t)}},{key:"_ignoreSortableRule",value:function(e){return!(null==e||!e.tagName||"input"!==e.tagName.toLowerCase())}},{key:"render",value:function(){var e=this;return this.state.options?l.a.createElement("div",{className:"col-config-select-options"},this.props.title,l.a.createElement("div",{className:"multi-select"},l.a.createElement(mt.a,{size:"small",checked:!!this.state.color,onChange:this.toggleColor,style:{marginLeft:12}}),_c("颜色")),l.a.createElement("div",{className:"option-list",ref:this.optionList},l.a.createElement(fb,{list:this.state.options,onChange:this.beforeChange,render:function(t){return t.map((function(t,n){var r=null;return e.state.color&&(r=l.a.createElement(wt.a,{placement:"leftTop",overlayClassName:"lake-table-colorpicker",content:l.a.createElement(Dg,{colorSource:me()(Kh),activeColors:t.color,onSelect:function(t){e.onChangeColor(n,t)},themeManager:e.themeManager})},l.a.createElement("span",{className:"option-color",style:{background:Jh.getRenderColor(t.color,e.themeManager)}}))),l.a.createElement("div",{className:"input-item",key:t.id,"data-id":t.id},l.a.createElement("span",{className:"input-item-content",draggable:"true","data-draggable":"false"},r,l.a.createElement(ht.a,{value:t.value,onChange:function(t){e.onChangeItem(t,n)},onPressEnter:function(){e.onPressEnter(n)},ref:function(t){e.inputs[n]=t},autoFocus:0===n}),l.a.createElement("span",{className:"lake-icon lake-icon-table-delete",onClick:function(t){e.onDeleteItem(t,n)}})),l.a.createElement("span",{className:"lake-icon lake-icon-draggable"}))}))},ignoreRule:this._ignoreSortableRule})),l.a.createElement("div",{className:"select-options-add-item"+(this.state.color?" colored":""),onClick:this.onAddItem},l.a.createElement("span",{className:"lake-icon lake-icon-plus"}),_c("添加一个选项"))):null}}]),n}(l.a.Component);s()(Zx,"propTypes",{title:X.a.object,multiple:X.a.boolean,onChange:X.a.func,configs:X.a.object,defaultValue:X.a.string,onCompleteMount:X.a.func,themeManager:X.a.object}),s()(Zx,"defaultProps",{onCompleteMount:function(){}}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-col-configs {\n  background-color: var(--yq-popover-bg);\n  box-shadow: 0 8px 16px 4px hsla(0, 0%, 0%, 0.04);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 8px;\n  background: var(--yq-bg-primary);\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n  border-radius: 2px;\n  z-index: 500;\n  overflow: auto;\n  overflow-x: hidden;\n  top: 66px;\n  width: 306px;\n  color: var(--yq-text-caption);\n}\n.lake-table-col-configs p {\n  margin-bottom: 8px;\n}\n.lake-table-col-configs .lake-table-col-name {\n  margin: 0 20px;\n}\n.lake-table-col-configs .lake-table-col-name .error {\n  border-color: var(--yq-function-error);\n}\n.lake-table-col-configs .lake-table-col-error {\n  color: var(--yq-function-error);\n  margin: 4px 20px -8px;\n}\n.lake-table-col-configs-footer {\n  margin: 20px;\n  display: flex;\n  justify-content: flex-end;\n}\n.lake-table-col-options {\n  border-top: 1px solid var(--yq-border-light);\n  margin-top: 16px;\n  padding-top: 16px;\n  margin-left: 16px;\n  position: relative;\n}\n.lake-table-col-title {\n  padding: 0 20px;\n  margin-top: 16px;\n}\n.lake-table-col-types {\n  margin-top: -8px;\n  width: 100%;\n}\n.lake-table-col-types .ant-menu-submenu .ant-menu-submenu-title {\n  padding: 0 20px;\n}\n.lake-table-col-types-submenu .ant-menu .ant-menu-item {\n  position: relative;\n  padding-left: 16px;\n  height: 36px;\n  line-height: 36px;\n  color: var(--yq-text-body);\n}\n.lake-table-col-types-submenu .ant-menu .ant-menu-item .lake-icon {\n  margin-right: 12px;\n}\n.lake-table-col-types-submenu .ant-menu .lake-icon-success {\n  display: none;\n  position: absolute;\n  top: 12px;\n  right: 4px;\n  color: var(--yq-text-caption);\n}\n.lake-table-col-types-submenu .ant-menu .ant-menu-item-selected {\n  background-color: var(--yq-bg-primary);\n}\n.lake-table-col-types-submenu .ant-menu .ant-menu-item-selected .lake-icon-success {\n  display: block;\n}\n.lake-table-col-types-submenu .ant-menu .ant-menu-item-active {\n  background-color: var(--yq-bg-tertiary);\n}\n.select-input {\n  color: var(--yq-text-body);\n  width: 278px;\n  padding-bottom: 6px;\n}\n.select-input-title {\n  font-size: 14px;\n  font-weight: bold;\n  margin-top: 6px;\n  margin-left: 10px;\n}\n.select-input .multi-select {\n  position: absolute;\n  top: 16px;\n  right: 16px;\n}\n.select-input .multi-select .ant-checkbox {\n  margin-right: 8px;\n}\n.select-input .option-list {\n  max-height: 180px;\n  overflow: auto;\n  overflow-x: hidden;\n  margin: 18px -10px 0 -10px;\n}\n.select-input .option-list .sortable {\n  padding: 0 10px;\n}\n.select-input .option-list .lake-icon {\n  cursor: pointer;\n  color: var(--yq-text-caption);\n  font-size: 16px;\n}\n.select-input .option-list .lake-icon:hover {\n  color: var(--yq-text-primary);\n}\n.select-input .option-list .lake-icon-draggable:hover {\n  cursor: grab;\n}\n.select-input .input-item {\n  padding: 6px 10px;\n  display: flex;\n  align-items: center;\n}\n.select-input .input-item .option-color {\n  padding: 9px;\n  border-radius: 2px;\n  cursor: pointer;\n  margin-right: 16px;\n}\n.select-input .input-item .lake-icon {\n  margin-left: 12px;\n}\n.select-input .input-item-content {\n  display: flex;\n  align-items: center;\n}\n.select-input .add-item {\n  cursor: pointer;\n  line-height: 24px;\n  margin: 6px;\n  color: rgba(0, 0, 0, 0.45);\n}\n.select-input .add-item:hover {\n  color: var(--yq-text-primary);\n}\n.select-input .add-item .lake-icon {\n  margin-right: 6px;\n}\n.select-input .add-item.colored {\n  margin-left: 44px;\n}\n.select-input .sync-options {\n  color: var(--yq-text-caption);\n}\n.select-input .sync-options .ant-checkbox-wrapper {\n  margin-right: 8px;\n}\n.select-input .select-confirm {\n  text-align: right;\n  margin: 14px 10px 4px 10px;\n  min-width: 200px;\n}\n.select-input .select-confirm .ant-btn-danger {\n  float: left;\n}\n.select-input .select-confirm .ant-btn-primary {\n  margin-left: 8px;\n}\n");var Qx=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r,o;d()(this,n),o=t.call(this,e),s()(m()(o),"colNames",{}),s()(m()(o),"_autoHeightComponent",l.a.createRef()),s()(m()(o),"defaultConfigs",void 0),s()(m()(o),"autoClose",(function(){return!o.state.colNameError&&(o.state.options.create&&o.defaultConfigs.type===o.state.colConfigs.type&&o.defaultConfigs.name===o.state.colConfigs.name||o.onConfirm(),!0)})),s()(m()(o),"_handleEsc",(function(e){27===e.keyCode&&(o.props.close(),e.preventDefault(),e.stopPropagation())})),s()(m()(o),"onColNameBlur",(function(e){o.setColName(e.target.value)})),s()(m()(o),"setColName",(function(e){var t;if(e){var n=null===(t=o.tableModel)||void 0===t?void 0:t.getTableFields();if(n){if(n.filter((function(t){return t.id!==o.state.colConfigs.id&&t.name===e})).length>0)return o.setState({colNameError:_c("不能与其他列重名")}),!1;o.setState({colNameError:null});var r=o.state.colConfigs;return r.name=e,o.setState({colConfigs:r}),!0}}else o.setState({colNameError:_c("列名不能为空")})})),s()(m()(o),"onOptionsChange",(function(e){var t=e.options,n=e.color,r=o.state.colConfigs;r.options=t,r.color=n,o.setState({colConfigs:r})})),s()(m()(o),"changeType",(function(e){var t,n=e.key,r=o.state.colConfigs,a=null===(t=o.tableModel)||void 0===t?void 0:t.getTableFields();a&&(new RegExp("".concat(o.colNames[r.type],"(\\s\\d)*")).test(r.name)&&(r.name=$f(n,a)),!Dc.includes(r.type)&&Dc.includes(n)&&(r.options&&0!==r.options.length||(r.options=o.getColumnData(r),r.color=!0)),r.type=n,[Ac.CREATED_AT,Ac.UPDATED_AT].includes(n)?r.localTimezone=!0:n===Ac.DATE&&delete r.localTimezone,o.setState({colConfigs:r},o.onChangeType))})),s()(m()(o),"onChangeType",(function(){o._adjustComponentHeight()})),s()(m()(o),"onConfirm",(function(){var e=o.state.colNameError,t=o.props,n=t.onUpdateCol,r=t.close;e||(o.submitConfigs(),n&&n(),r&&r())})),s()(m()(o),"_adjustComponentHeight",(function(){var e;null===(e=o._autoHeightComponent.current)||void 0===e||e.adjustHeight()})),s()(m()(o),"onNameKeyDown",(function(e){var t=e.ctrlKey,n=e.metaKey;13!==e.keyCode||t||n||o.setColName(e.target.value)&&o.onConfirm()})),null===(r=o.colTypes)||void 0===r||r.forEach((function(e){o.colNames[e.type]=e.name}));var a=e.col,i=e.options;return o.defaultConfigs=o.getInitColConfigs(a,i),o.state={col:a,options:i||{},colConfigs:wc(o.defaultConfigs),colNameError:null},o}return p()(n,[{key:"componentDidMount",value:function(){window.addEventListener("keyup",this._handleEsc)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this._handleEsc)}},{key:"getInitColConfigs",value:function(e,t){return null!=t&&t.colConfigs?t.colConfigs:null!=t&&t.create?this.createNewCol():wc(this.viewportHelper.getColConfigs(e))}},{key:"createNewCol",value:function(){var e,t,n=null===(e=this.tableModel)||void 0===e?void 0:e.getTableFields();if(n){var r=[],o=0;n.forEach((function(e){o=Math.max(o,e.index),r.push(null==e?void 0:e.id)}));for(var a=o+1;!t||r.includes(t);)t=fs(32);return{id:t,index:a,name:$f("input",n),type:"input"}}}},{key:"getColumnData",value:function(e){var t,n=this,r=(null===(t=this.tableModel)||void 0===t?void 0:t.getActiveView().data).rows,o=[],a={},i=function(e){a[e]||(o.push({value:e,id:fs(6)}),a[e]=!0)};return r.forEach((function(t){var r,o=null===(r=n.tableModel)||void 0===r?void 0:r.recordsModel.getCellFormattedValue(t.id,e.id,e);if(""!==o){if(e.type===Ac.CHECKBOX)return void("true"===o&&i(_c("已选中")));o.split(",").forEach(i)}})),o}},{key:"submitConfigs",value:function(){var e,t,n,r=this.state,o=r.colConfigs,a=r.col;Dc.includes(o.type)||(delete o.options,delete o.color),null!==(e=this.props.options)&&void 0!==e&&e.create?null===(t=this.kernel)||void 0===t||t.execute("insertCol",o,a):null===(n=this.kernel)||void 0===n||n.execute("updateCol",o)}},{key:"getColTypes",value:function(){var e=this.state.col,t=this.colTypes;if(t)return this.viewportHelper.isFrozenCol(e)||0===e?t.filter((function(e){return Hc.includes(e.type)})):t}},{key:"render",value:function(){var e=this,t=this.state,n=t.colConfigs,r=t.colNameError,o=this.getColTypes();if(o){var a;Dc.includes(n.type)&&(a=l.a.createElement("div",{className:"select-input lake-table-col-options"},l.a.createElement(Zx,{title:l.a.createElement("span",{style:{color:"#8c8c8c"}},_c("选项设置")),onChange:this.onOptionsChange,multiple:!1,defaultValue:"",themeManager:this.editor.themeManager,configs:n,onCompleteMount:function(){return e._adjustComponentHeight()}})));var i=[{key:n.type,title:l.a.createElement("span",null,_c((o.find((function(e){return e.type===n.type}))||{}).name)),icon:l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(n.type.toLowerCase())}),groupBy:"subType",children:o.map((function(e){return{key:e.type,title:e.name,icon:l.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(e.type.toLowerCase())}),subType:e.isAdvanced?_c("高级"):_c("基础"),showActiveIcon:!0}}))}];return l.a.createElement(ew,{ref:this._autoHeightComponent,className:"lake-table-col-configs",maxHeight:600,container:document.body},l.a.createElement("p",{className:"lake-table-col-title"},_c("数据表列名")),l.a.createElement("div",{className:"lake-table-col-name"},l.a.createElement(ht.a,{value:n.name,onChange:function(t){n.name=t.target.value.trim(),e.setState({colConfigs:n})},onKeyDown:this.onNameKeyDown,onBlur:this.onColNameBlur,autoFocus:!0,className:S()({error:r})}),r&&l.a.createElement("div",{className:"lake-table-col-error"},r)),l.a.createElement("p",{className:"lake-table-col-title"},_c("列类型"),l.a.createElement(dt.a,{title:_c("设置该列内容类型，支持单行文本、多行文本、日期、数字、单选、多选等")},l.a.createElement("span",{className:"lake-icon lake-icon-question",style:{marginLeft:4}}))),l.a.createElement(Vk,{key:n.type,menuKey:n.type,className:"lake-table-col-types",defaultSelectedKeys:[n.type],onClick:this.changeType,configs:i,table:this.editor}),a,l.a.createElement("div",{className:"lake-table-col-configs-footer"},l.a.createElement(ft.a,{style:{marginRight:12},onClick:this.props.close},_c("取消")),l.a.createElement(ft.a,{type:"primary",disabled:r,onClick:this.onConfirm},_c("确定"))))}}},{key:"editor",get:function(){return this.props.editor}},{key:"kernel",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.kernel}},{key:"colTypes",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.getColTypes()}},{key:"tableModel",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.tableModel}},{key:"viewportHelper",get:function(){var e;return null===(e=this.editor.viewManager)||void 0===e?void 0:e.getViewRenderer().viewportHelper}}]),n}(l.a.Component);function Jx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jx(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tE=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","colConfig"),s()(m()(e),"showColConfigs",(function(t){var n=t.col,r=t.options;null!=r&&r.containerStyle?e.workbench.UI.showModal(e.name,{containerStyle:{left:"".concat(r.containerStyle.left,"px"),top:"".concat(r.containerStyle.top,"px")},modalProps:{col:n,container:document.body,options:eE({},r)}}):r&&!r.create||e.onClickTableCore(n,r)})),s()(m()(e),"onClickTableCore",(function(t,n){var r=e.getTableCoreColConfigModalPosition(t,null==n?void 0:n.create);e.workbench.UI.showModal(e.name,{containerStyle:{left:"".concat(r.left,"px"),top:"".concat(r.top,"px")},modalProps:{col:t,container:document.body,options:eE({},n)}})})),s()(m()(e),"getTableCoreColConfigModalPosition",(function(t,n){if(e.editorContainer){var r=e.editorContainer.getBoundingClientRect().top,o=e.workbench.container.getBoundingClientRect(),a=o.right,i=o.left,l=e.viewportHelper.getScrollData().scrollX,c={top:r+e.editor.theme.colHeaderHeight-1};if(n)c.left=i+e.viewportHelper.columnSizes[t-1].offset+e.viewportHelper.columnSizes[t-1].size+e.editor.theme.rowHeaderWidth-l;else{var s=e.viewportHelper.getColConfigs(t);c.minWidth=s.size,c.left=i+e.viewportHelper.columnSizes[t].offset+e.editor.theme.rowHeaderWidth-(e.viewportHelper.isFrozenCol(t)?0:l)}return e.workbench.container.offsetWidth+i<c.left+306&&(c.left=a-306-2),c}})),e}return p()(n,[{key:"init",value:function(){this.editor.on(qs.COL_CONFIGS,this.showColConfigs)}},{key:"registerModal",value:function(){var e=this;return{name:"colConfig",renderComponent:function(t){return l.a.createElement(Qx,a()({editor:e.editor},t))}}}},{key:"viewportHelper",get:function(){var e;return null===(e=this.editor.viewManager)||void 0===e?void 0:e.getViewRenderer().viewportHelper}},{key:"editorContainer",get:function(){return this.workbench.UI.containerEl.editorContainer}}]),n}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-date-input {\n  margin-left: 1px;\n}\n.lake-table-date-input .ant-picker {\n  border: none;\n}\n.lake-table-date-input .ant-picker .ant-picker-clear {\n  opacity: 1;\n  position: absolute;\n  right: 20px;\n}\n.lake-table-date-input .ant-picker-input > input {\n  color: var(--yq-text-primary);\n  font-family: 'Helvetica Neue', 'Chinese Quote', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', Helvetica, Arial, sans-serif;\n}\n.lake-table-date-input .ant-picker-focused {\n  box-shadow: none;\n}\n");var nE="zhCN"===Cc._lang?rb:Xg,rE=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"activeDate",(function(e){(!e||e.button<2)&&r.setState({pointerEvents:null})})),s()(m()(r),"onChange",(function(e,t){var n=function(e){return e?{seconds:_e.a.utc(e).diff(_e.a.utc("1899-12-30"),"seconds"),text:e,time:_e()(e).format("YYYY-MM-DDTHH:mm:ssZ")}:""}(t);r.props.onChange(n,r.props.target),r.setState({open:!1})})),s()(m()(r),"onOpen",(function(e){e.button<2&&r.setState({open:!0})})),r.state={pointerEvents:"none",open:e.focus},r}return p()(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.activeDate()}),100)}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.bbox,o=t.focus;if(!r)return null;var a=n?_e.a.utc("1899-12-30").add(n.seconds,"seconds"):null;return l.a.createElement("div",{className:"lake-table-date-input",onMouseUp:this.activeDate},l.a.createElement(Ct.a,{locale:nE},l.a.createElement(Ot.a,{style:{width:r.width,height:r.height,pointerEvents:this.state.pointerEvents},dropdownClassName:"lake-table-input",getPopupContainer:function(){return e.props.modalContainer||document.body},allowClear:!0,autoFocus:o,open:this.state.open,defaultValue:a,onBlur:this.props.onBlur,onMouseUp:this.onOpen,onChange:this.onChange,placeholder:"YYYYMMDD",format:id})))}}]),n}(l.a.Component);s()(rE,"propTypes",{target:X.a.object,table:X.a.object,focus:X.a.bool,onChange:X.a.func,onBlur:X.a.func,value:X.a.oneOfType([X.a.string,X.a.object]),bbox:X.a.object,modalContainer:X.a.element}),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-cell-editor {\n  box-sizing: border-box;\n  background-color: var(--yq-bg-primary);\n  z-index: 400;\n}\n.lake-table-cell-editor .lake-table-link-editor,\n.lake-table-cell-editor .lake-table-form-mention-selector-nocontainer {\n  box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.13), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 12px 24px 16px rgba(0, 0, 0, 0.04);\n}\n.lake-table-cell-editor .lake-table-cell-editor-inner {\n  position: absolute;\n  left: 0;\n}\n");var oE=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"getRenderContent",(function(){var t=e.props,n=t.colType,r=t.componentProps;return n===Ac.DATE?l.a.createElement(rE,r):n===Ac.LINK?l.a.createElement(Tb,r):void 0})),s()(m()(e),"onKeyDown",(function(t){"Escape"===t.key&&e.props.componentProps.onBlur()})),e}return p()(n,[{key:"render",value:function(){var e=this.props,t=e.onContextMenu,n=e.colType,r=e.componentProps,o=e.editorContainer,a=r.bbox,i={};if([Ac.LINK].includes(n)){var c=o.offsetHeight;a.top+177>c?i.bottom=4:i.top=a.height+4}return l.a.createElement("div",{className:"lake-table-cell-editor lake-table-input",onContextMenu:t,onKeyDown:this.onKeyDown},l.a.createElement("div",{className:"lake-table-cell-editor-inner",style:i},this.getRenderContent()))}}]),n}(l.a.Component);function aE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aE(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lE,cE=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","cellEditor"),s()(m()(e),"_scrollStrategy",null),s()(m()(e),"_initHideEvent",(function(){var t,n,r,o;null===(t=e.gridEvent)||void 0===t||t.on("resizing",e._hideCellEditor),null===(n=e.gridEvent)||void 0===n||n.on("resizeEnd",e._hideCellEditor),e.editor.on(qs.HIDE_CELL_EDITOR,e._hideCellEditor),e.editor.on(qs.BACKSPACE,e._hideCellEditor),e.editor.on(qs.SCROLL,e._hideCellEditor),null===(r=e.kernel)||void 0===r||r.on(gc.SELECTED,e._onModalBlur),null===(o=e.kernel)||void 0===o||o.on(gc.VIEW_CHANGED,e._handleViewChange)})),s()(m()(e),"_handleViewChange",(function(){var t,n=null===(t=e.kernel)||void 0===t?void 0:t.tableModel.getActiveView();n&&n.type===Gs.GRID||e._hideCellEditor()})),s()(m()(e),"_hideCellEditor",(function(){var t;e.workbench.UI.hideModal(e.name),null===(t=e._scrollStrategy)||void 0===t||t.disable()})),s()(m()(e),"_showCellEditor",(function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.workbench.UI.hideModal(e.name),null===(n=e._scrollStrategy)||void 0===n||n.attach(m()(e));var o=t.col,a=t.row,i=e.viewport.getColConfigs(o),l=e.viewport.getCellValue(a,i),c=i.type,s=e._calculateBbox(a,o,c),u=e._calculateModalPosition(s);u&&e.workbench.UI.showModal(e.name,{containerStyle:{left:"".concat(u.left,"px"),top:"".concat(u.top,"px")},modalProps:{colType:c,onContextMenu:e._showContextMenu,editorContainer:e.editorContainer,componentProps:{value:l,bbox:s,target:t,table:e.editor,onBlur:e._onModalBlur,onChange:e._onModalChange,modalContainer:e.globalModalContainer,focus:"focus"in r&&r.focus}},scope:dc.GLOBAL,showMask:!1})})),s()(m()(e),"_onModalBlur",(function(t){t&&0===t.rowCount||e.workbench.UI.hideModal(e.name)})),s()(m()(e),"_onModalChange",(function(t,n){var r,o=n.row,a=n.col;null===(r=e.kernel)||void 0===r||r.execute("setCellValue",o,a,{value:t,cache:(null==t?void 0:t.status)&&["error","progress"].includes(null==t?void 0:t.status)}),e.workbench.UI.hideModal(e.name)})),s()(m()(e),"_calculateModalPosition",(function(t){if(e.editorPosition)return{left:t.left+e.editorPosition.left,top:t.top+e.editorPosition.top}})),s()(m()(e),"_showContextMenu",(function(e){e.preventDefault()})),s()(m()(e),"_calculateBbox",(function(t,n,r){var o=iE({},e.viewport.getFrozenRectByCell(t,n));return o.width--,o.height--,r===Ac.DATE&&(o.top=o.top+3,o.height=zs.rowHeight-3,o.width=o.width-3),o})),e}return p()(n,[{key:"init",value:function(){this.editor.on(qs.SHOW_CELL_EDITOR,this._showCellEditor),this.editor.on(qs.SHOW_ROW_EDITOR,this._hideCellEditor),this._initHideEvent(),this._scrollStrategy=new je.CloseScrollStrategy}},{key:"detach",value:function(){this._hideCellEditor()}},{key:"registerModal",value:function(){return{name:this.name,renderComponent:function(e){return l.a.createElement(oE,e)}}}},{key:"gridEvent",get:function(){var e;return null===(e=this.editor.eventManager)||void 0===e?void 0:e.canvasEvents}},{key:"viewport",get:function(){var e;return null===(e=this.editor.viewManager)||void 0===e?void 0:e.getViewRenderer().viewportHelper}},{key:"kernel",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.kernel}},{key:"editorContainer",get:function(){return this.workbench.UI.containerEl.editorContainer}},{key:"editorPosition",get:function(){var e;return null===(e=this.editorContainer)||void 0===e?void 0:e.getBoundingClientRect()}},{key:"globalModalContainer",get:function(){return this.workbench.UI.containerEl.globalModalContainer}}]),n}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-net-status-view {\n  display: flex;\n  align-items: center;\n  height: 20px;\n  line-height: 20px;\n  font-size: 12px;\n  color: var(--yq-text-disable);\n}\n.lake-table-net-status-view .anticon-close-circle {\n  margin-right: 5px;\n  color: var(--yq-function-error);\n}\n"),function(e){e.ONLINE="online",e.OFFLINE="offline"}(lE||(lE={}));var sE=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"state",{netStatus:lE.ONLINE}),s()(m()(e),"setOnline",(function(){e.setState({netStatus:lE.ONLINE}),e.props.onChange(lE.ONLINE)})),s()(m()(e),"setOffline",(function(){e.setState({netStatus:lE.OFFLINE}),e.props.onChange(lE.OFFLINE)})),e}return p()(n,[{key:"componentDidMount",value:function(){window.addEventListener("offline",this.setOffline),window.addEventListener("online",this.setOnline)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("offline",this.setOffline),window.removeEventListener("online",this.setOnline)}},{key:"render",value:function(){return this.state.netStatus===lE.OFFLINE?l.a.createElement("div",{className:"lake-table-net-status-view"},l.a.createElement(mg,null),l.a.createElement("span",{className:""},this.props.offlineText)):null}}]),n}(l.a.Component);s()(sE,"defaultProps",{onChange:function(){}});var uE=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","netStatus"),s()(m()(e),"renderToolbarItem",(function(){var t;return(null===(t=e.editor.abilities)||void 0===t?void 0:t.update)?l.a.createElement(sE,{offlineText:_c("断网状态下不支持编辑"),onChange:e.onNetStatusChange}):l.a.createElement(l.a.Fragment,null)})),s()(m()(e),"onNetStatusChange",(function(t){t===lE.OFFLINE?e.editor.disable():t===lE.ONLINE&&e.editor.enable()})),e}return p()(n,[{key:"registerToolbarItem",value:function(){return{name:this.name,renderToolbarItem:this.renderToolbarItem}}}]),n}(),dE=function(){function e(){d()(this,e)}return p()(e,null,[{key:"loadPlugin",value:function(e){e.mountPlugin([tk,dk,vk,yk,xk,Ck,Ax,Nx,Dx,Bx,qx,Gx,Yx,Xx,tE,cE])}}]),e}();function fE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}nc("*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n.formGuideActive .larkui-feature-guide-lite-tip {\n  z-index: 500;\n}\n.lake-table-toolbar-tooltip.ant-tooltip {\n  white-space: nowrap;\n}\n.lake-table-editor,\n.lake-h5-table-editor {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.lake-table-editor .ant-btn:not(.ant-btn-primary),\n.lake-h5-table-editor .ant-btn:not(.ant-btn-primary) {\n  background-color: var(--yq-bg-primary);\n  background-image: none;\n}\n.lake-h5-table-editor .lake-table-container {\n  top: 3.571rem;\n  bottom: 80px;\n  height: calc(100% - 80px);\n}\n.lake-table-container {\n  overscroll-behavior-x: none;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  background-color: var(--yq-bg-secondary);\n  width: 100%;\n  height: 100%;\n}\n.lake-table-container.shrink {\n  right: 320px;\n}\n.lake-table-container.lake-cursor-not-allowed {\n  cursor: not-allowed;\n}\n.lake-table-container.dragging {\n  cursor: grabbing;\n}\n.lake-table-container.selecting {\n  cursor: normal;\n}\n.lake-table-container.col_resize {\n  cursor: col-resize;\n}\n.lake-table-container.col_split {\n  cursor: col-resize;\n}\n.lake-table-container.row_resize {\n  cursor: row-resize;\n}\n.lake-table-container.row_split {\n  cursor: row-resize;\n}\n.lake-table-container.pointer {\n  cursor: pointer;\n}\n.lake-table-container.autofill {\n  cursor: crosshair;\n}\n.lake-table-container.grab {\n  cursor: grab;\n}\n.lake-table-container.grabbing {\n  cursor: grabbing;\n}\n.lake-table-container.filterIcon {\n  cursor: pointer;\n}\n.lake-table-container.zoomIn {\n  cursor: zoom-in;\n}\n.lake-table-container canvas {\n  position: absolute;\n}\n.lake-table-container .lake-table-warning-container {\n  position: absolute;\n  height: 28px;\n  width: auto;\n  display: inline-block;\n  background-color: var(--yq-yellow-6);\n  color: var(--yq-white);\n  border-radius: 4px 4px 0 0;\n  line-height: 28px;\n  padding: 0 10px;\n}\nhtml[data-kumuhana=\"pouli\"] .lake-table-container {\n  background-color: var(--yq-bg-primary);\n}\n.lake-table-preEditor {\n  position: absolute;\n  display: inline-block;\n  left: -9999px;\n  top: 0;\n  opacity: 0;\n  box-sizing: border-box;\n  padding: 5px 6px;\n  word-break: break-word;\n}\n.lake-table-loading-mask {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  background-color: var(--yq-bg-tertiary);\n  z-index: 500;\n}\n.lake-table-loading-mask .lake-table-loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 50px;\n  height: 50px;\n  margin: auto;\n}\n.lake-table-dom-renderer {\n  position: relative;\n  overflow: auto;\n}\n.lake-table-dom-renderer .lake-table-view-inner-container {\n  min-width: 100%;\n  min-height: 100%;\n}\n.lake-table-canvas-renderer {\n  width: 100%;\n  height: 100%;\n}\n.lake-table-lakecanvas-renderer {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.lake-table-button {\n  height: 32px;\n  width: auto;\n  min-width: 32px;\n  text-align: center;\n  padding: 0 8px;\n  margin: 0 3px;\n  background-color: transparent;\n  border: 1px solid transparent;\n  border-radius: 3px 3px;\n  font-size: 14px;\n  cursor: pointer;\n  color: var(--yq-text-primary);\n  outline: none;\n  line-height: 32px;\n  display: inline-flex;\n  align-items: center;\n}\n.lake-table-button:hover {\n  border: 1px solid transparent;\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-table-button:active,\n.lake-table-button-active,\n.lake-table-button-active:hover {\n  background-color: var(--yq-bg-primary-hover);\n  border: 1px solid transparent;\n}\n.lake-table-button-disabled,\n.lake-table-button-disabled:hover {\n  background-color: transparent;\n  border: 1px solid transparent;\n  box-shadow: none;\n  color: var(--yq-text-primary);\n  opacity: 0.25;\n  cursor: not-allowed;\n}\n.lake-table-button-inner-text {\n  font-size: 12px;\n  margin-left: 0;\n  vertical-align: top;\n}\n.lake-table-button .lake-icon {\n  font-size: 18px;\n}\n.lake-table-button-desc {\n  margin-left: 4px;\n}\n.lake-table-button-group {\n  position: relative;\n  display: inline-block;\n  width: auto;\n}\n[accessbilityid='main-readOnly-button'] .lake-table-button-inner-text {\n  background: var(--yq-theme);\n  color: var(--yq-text-primary);\n  padding: 3px 9px;\n  border-radius: 2px;\n}\n.lake-max-editor .lake-table-toolbar-content {\n  margin: 0 auto;\n}\n.lake-table-toolbar {\n  position: relative;\n  width: 100%;\n  height: 40px;\n  padding: 0;\n  line-height: 1.5;\n  background: var(--yq-bg-secondary);\n  border: solid var(--yq-border-primary);\n  border-width: 1px 0;\n  transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n  z-index: 400;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.lake-table-toolbar-content {\n  position: relative;\n  background: transparent;\n  display: none;\n  text-align: left;\n  width: 100%;\n  white-space: nowrap;\n  overflow-x: auto;\n  overflow-y: hidden;\n}\n.lake-table-toolbar-content-active {\n  display: block;\n}\n.lake-table-toolbar-area {\n  padding: 5px 8px;\n  height: 40px;\n  width: auto;\n  display: inline-block;\n  border-left: 1px solid var(--yq-border-primary);\n  vertical-align: top;\n}\n.lake-table-toolbar-area.right {\n  float: right;\n  border-left: none;\n}\n.lake-table-toolbar-area-hide {\n  display: none;\n}\n.lake-table-toolbar-area:first-child {\n  border-left: none;\n}\n.lake-table-toolbar-area .lake-table-button-desc {\n  font-size: 14px;\n  margin-left: 4px;\n  max-width: 170px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-table-toolbar-area .lake-table-button-desc .ant-input {\n  border-radius: 6px;\n  height: 28px;\n  line-height: 28px;\n}\n.lake-table-toolbar-area .lake-table-button {\n  border-radius: 6px;\n  height: 28px;\n  line-height: 28px;\n  vertical-align: top;\n}\n.lake-table-toolbar-area .lake-table-button-viewtitle:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar .lake-icon {\n  font-size: 16px;\n  vertical-align: -1px;\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar .lake-icon-table-grid-view {\n  color: var(--yq-yuque-green-6);\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar .lake-icon-table-card-view {\n  color: var(--yq-blue-5);\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar .lake-icon-table-kanban-view {\n  color: var(--yq-cyan-5);\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar .lake-icon-dropdown-arrow {\n  font-size: 14px;\n  color: var(--yq-text-caption);\n  margin-left: 8px;\n  margin-top: 2px;\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar .lake-icon-dropdown-arrow::before {\n  content: '\\e6c4';\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar-list {\n  flex: 1;\n  display: flex;\n  align-items: center;\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar-list .lake-table-button-desc {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 15em;\n}\n.lake-table-toolbar-active {\n  background-color: var(--yq-bg-tertiary);\n  border-bottom: 1px solid var(--yq-border-primary);\n  box-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 8px 16px 4px rgba(0, 0, 0, 0.04);\n}\n.lake-table-toolbar-split {\n  width: 0;\n  border-right: 1px solid var(--yq-border-primary);\n  margin: 0 6px 0 6px;\n}\n.lake-table-toolbar .lake-table-button-inner-text {\n  font-size: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-table-toolbar-kanben-name {\n  margin: 0 5px;\n  font-weight: 500;\n}\n.lake-table-toolbar-kanben-name .lake-icon {\n  font-size: 14px;\n}\n@media screen and (max-width: 575px) {\n  .lake-table-toolbar-area.right {\n    display: none;\n  }\n}\n.lake-icon.lake-icon-col-input,\n.lake-icon.lake-icon-col-textarea,\n.lake-icon.lake-icon-col-number,\n.lake-icon.lake-icon-col-select,\n.lake-icon.lake-icon-col-multiselect,\n.lake-icon.lake-icon-col-date,\n.lake-icon.lake-icon-col-createdat,\n.lake-icon.lake-icon-col-updatedat,\n.lake-icon.lake-icon-col-modifierid,\n.lake-icon.lake-icon-col-userid,\n.lake-icon.lake-icon-col-checkbox,\n.lake-icon.lake-icon-col-image,\n.lake-icon.lake-icon-col-mention,\n.lake-icon.lake-icon-col-file,\n.lake-icon.lake-icon-col-link,\n.lake-icon.lake-icon-col-email,\n.lake-icon.lake-icon-col-phone {\n  font-size: 16px;\n}\n/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.workbench-container {\n  width: 100%;\n  height: 100%;\n}\n");var pE=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"containerRef",l.a.createRef()),s()(m()(e),"workbench",void 0),e}return p()(n,[{key:"componentDidMount",value:function(){if(this.containerRef.current){var e=new Jt(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fE(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({containerEl:this.containerRef.current,editor:{adapter:ek,args:this.props}},yc));dE.loadPlugin(e),e.renderPage(),this.workbench=e}}},{key:"componentWillUnmount",value:function(){this.workbench.destroy(),V.a.unmountComponentAtNode(this.workbench.container),this.workbench.container.remove()}},{key:"render",value:function(){return l.a.createElement("div",{ref:this.containerRef,className:"lake-workbench-container"})}}]),n}(l.a.Component);var hE=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"onTableReady",(function(e){var t=r.props,n=t.onLoad,o=t.onMount;e.locale=r.locale,e.focus(),n&&n(e),"true"===localStorage.__table_debug&&(window.__table=e),o(e),r.setState({table:e},(function(){return r.initWorkbench()}))})),s()(m()(r),"renderWorkbenchTableCore",(function(){if(r.state.table&&r.injector){var e=r.state.table,t=r.props.editorEnv.isReadOnly,n=r.props,o=n.yScrollEnable,a=n.xScrollEnable;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Jy,{table:e}),l.a.createElement(tw,{table:e}),l.a.createElement(Zy,{table:e,xScrollEnable:a,yScrollEnable:o}),l.a.createElement(ow,{table:e,readOnly:t}),l.a.createElement(Hw,{table:e,handleScrollEvent:r.props.handleScrollEvent,kanbanDraggable:r.props.kanbanDraggable,cardDraggable:r.props.cardDraggable}))}})),s()(m()(r),"renderWorkbenchOutside",(function(){if(r.state.table&&r.injector){var e=r.state.table;return l.a.createElement(l.a.Fragment,null,l.a.createElement(lg,{table:e}),l.a.createElement(Cy,{table:e}),Ub.render(e,"edit"))}})),r.state={table:null},r.injector=null,r}return p()(n,[{key:"initWorkbench",value:function(){this.state.table&&(this.storeSrv=new Zw(this.state.table,this.props.editorEnv),this.injector=new Yw([[Xw,{useClassInstance:this.storeSrv}]]),this.forceUpdate())}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.disableHash,r=e.downloadFileHandler,o=e.docId,a=e.webProxy,i=e.webSdk,c=e.mention,s=e.abilities,u=e.docType,d=e.versionMode,f=e.renderConfig,p=e.themeManager,h=this.injector;return l.a.createElement(qw,{value:{injector:h}},l.a.createElement("div",{className:"lake-table-editor"},l.a.createElement(ig,{docId:o,docType:u,abilities:s,webProxy:a,webSdk:i,mention:c,themeManager:p,versionMode:d,value:t,disableHash:n,readOnly:!0,downloadFileHandler:r,onTableReady:this.onTableReady,renderConfig:f},this.renderWorkbenchTableCore()),this.renderWorkbenchOutside()))}}]),n}(l.a.Component);s()(hE,"propTypes",{lang:X.a.string,toolbar:X.a.oneOfType([X.a.array,X.a.object]),data:X.a.object,versionMode:X.a.bool,docId:X.a.number,docType:X.a.string,webProxy:X.a.object,webSdk:X.a.object,abilities:X.a.object,disableHash:X.a.bool,onLoad:X.a.func,onMount:X.a.func,themeManger:X.a.object,downloadFileHandler:X.a.func,renderConfig:X.a.object,handleScrollEvent:X.a.bool,xScrollEnable:X.a.bool,yScrollEnable:X.a.bool,kanbanDraggable:X.a.bool,cardDraggable:X.a.bool,editorEnv:X.a.object}),s()(hE,"defaultProps",{lang:"zh-cn"});var mE=function(e){g()(r,en);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(r);function r(){var e;d()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o)),s()(m()(e),"editor",void 0),s()(m()(e),"_$mountRoot",void 0),s()(m()(e),"_onEditorMount",(function(t){e.editor=t})),e}return p()(r,[{key:"attachEditor",value:(t=E()(O.a.mark((function e(t){var n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._$mountRoot=t,e.next=3,V.a.render(l.a.createElement(hE,a()({},this.args,{onMount:function(e){return n._onEditorMount(e)}})),this._$mountRoot);case 3:return e.abrupt("return",this.editor);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){this._$mountRoot&&V.a.unmountComponentAtNode(this._$mountRoot),this.editor.destroy()}}]),r}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-workbench-toolbar-container {\n  border: solid var(--yq-sheetborder);\n  position: relative;\n  border-width: 1px 0;\n  z-index: 400;\n  height: 42px;\n  width: 100%;\n}\n.lake-workbench-toolbar-container .lake-workbench-toolbar {\n  overflow-x: auto;\n}\n.lake-workbench-toolbar-container .lake-workbench-toolbar > * {\n  flex-shrink: 0;\n}\n.lake-workbench-editor-container {\n  height: calc(100% - 41px);\n  width: 100%;\n  margin-top: -2px;\n}\n.lake-workbench-modal-container {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n}\n.lake-workbench-global-modal-container {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n}\n");var vE=function(e){g()(r,nn);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(r);function r(){var e;d()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o)),s()(m()(e),"toolbarContainer",l.a.createRef()),s()(m()(e),"editorContainer",l.a.createRef()),s()(m()(e),"modalContainer",l.a.createRef()),e}return p()(r,[{key:"initContainers",value:(t=E()(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.render(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{ref:this.toolbarContainer,className:"lake-workbench-toolbar-container"}),l.a.createElement("div",{ref:this.editorContainer,className:"lake-workbench-editor-container"}),l.a.createElement("div",{ref:this.modalContainer,className:"lake-workbench-modal-container"})),this.workbench.container);case 2:return(t=document.querySelector(".".concat(mc)))||((n=document.createElement("div")).classList.add(mc),document.body.appendChild(n),t=n),e.abrupt("return",{editorContainer:this.editorContainer.current,toolbarContainer:this.toolbarContainer.current,modalContainer:this.modalContainer.current,globalModalContainer:t});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.workbench.container&&V.a.unmountComponentAtNode(this.workbench.container)}}]),r}();nc(".lake-table-workbench-toolbar .toolbar-items .lake-workbench-toolbar-button {\n  padding: 0 8px;\n}\n.lake-table-workbench-toolbar .toolbar-items .lake-workbench-toolbar-button:hover {\n  cursor: pointer;\n}\n");var gE={items:{leftAlignItems:[{name:"viewManage"},{name:"netStatus"},"|",{name:"kanbanGroup",showTooltip:!1},{name:"gridSetting",showTooltip:!1},{name:"kanbanSetting",showTooltip:!1},{name:"cardSetting",showTooltip:!1},{name:"filter",showTooltip:!1},{name:"group",showTooltip:!1},{name:"sort",showTooltip:!1},{name:"rowHeight",showTooltip:!1},{name:"search"}],rightAlignItems:[{name:"form",showTooltip:!1}]},className:"lake-table-workbench-toolbar",onMount:function(e,t){var n,r,o,a,i,l,c=$()((function(){return e.forceUpdate()}),120);null===(n=t.kernel)||void 0===n||n.on(gc.INIT_DATA,(function(){return c()})),null===(r=t.kernel)||void 0===r||r.on(gc.ENABLE_FORM,(function(){return c()})),null===(o=t.kernel)||void 0===o||o.on(gc.DISABLE_FORM,(function(){return c()})),null===(a=t.kernel)||void 0===a||a.on(gc.VIEW_CHANGED,(function(){return c()})),null===(i=t.kernel)||void 0===i||i.on(gc.VIEW_NAME_CHANGED,(function(){return c()})),null===(l=t.kernel)||void 0===l||l.on(gc.COL_CHANGED,(function(){return c()}))},onUnmount:function(e,t){var n,r,o,a,i,l,c=$()((function(){return e.forceUpdate()}),120);null===(n=t.kernel)||void 0===n||n.off(gc.INIT_DATA,(function(){return c()})),null===(r=t.kernel)||void 0===r||r.off(gc.ENABLE_FORM,(function(){return c()})),null===(o=t.kernel)||void 0===o||o.off(gc.DISABLE_FORM,(function(){return c()})),null===(a=t.kernel)||void 0===a||a.off(gc.VIEW_CHANGED,(function(){return c()})),null===(i=t.kernel)||void 0===i||i.off(gc.VIEW_NAME_CHANGED,(function(){return c()})),null===(l=t.kernel)||void 0===l||l.off(gc.COL_CHANGED,(function(){return c()}))}};nc(".lake-workbench-modal-option {\n  z-index: 1001;\n  position: absolute;\n}\n.lake-workbench-modal-mask-option {\n  z-index: 1000;\n}\n.lake-workbench-global-modal-option {\n  z-index: 1001;\n  position: absolute;\n}\n.lake-workbench-global-modal-mask-option {\n  z-index: 1000;\n}\n");var bE={template:{adapter:vE},componentOptions:{toolbar:gE,modal:{modalClassName:"lake-workbench-modal-option",modalMaskClassName:"lake-workbench-modal-mask-option",globalModalClassName:"lake-workbench-global-modal-option",globalMaskClassName:"lake-workbench-global-modal-mask-option"}}},yE=function(){function e(){d()(this,e)}return p()(e,null,[{key:"loadPlugin",value:function(e){e.mountPlugin([dk,vk,yk,xk,Ck,Ax,Nx,Dx,Bx,qx,Gx,Xx])}}]),e}();function wE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}nc("*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n.formGuideActive .larkui-feature-guide-lite-tip {\n  z-index: 500;\n}\n.lake-table-toolbar-tooltip.ant-tooltip {\n  white-space: nowrap;\n}\n.lake-table-editor,\n.lake-h5-table-editor {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.lake-table-editor .ant-btn:not(.ant-btn-primary),\n.lake-h5-table-editor .ant-btn:not(.ant-btn-primary) {\n  background-color: var(--yq-bg-primary);\n  background-image: none;\n}\n.lake-h5-table-editor .lake-table-container {\n  top: 3.571rem;\n  bottom: 80px;\n  height: calc(100% - 80px);\n}\n.lake-table-container {\n  overscroll-behavior-x: none;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  background-color: var(--yq-bg-secondary);\n  width: 100%;\n  height: 100%;\n}\n.lake-table-container.shrink {\n  right: 320px;\n}\n.lake-table-container.lake-cursor-not-allowed {\n  cursor: not-allowed;\n}\n.lake-table-container.dragging {\n  cursor: grabbing;\n}\n.lake-table-container.selecting {\n  cursor: normal;\n}\n.lake-table-container.col_resize {\n  cursor: col-resize;\n}\n.lake-table-container.col_split {\n  cursor: col-resize;\n}\n.lake-table-container.row_resize {\n  cursor: row-resize;\n}\n.lake-table-container.row_split {\n  cursor: row-resize;\n}\n.lake-table-container.pointer {\n  cursor: pointer;\n}\n.lake-table-container.autofill {\n  cursor: crosshair;\n}\n.lake-table-container.grab {\n  cursor: grab;\n}\n.lake-table-container.grabbing {\n  cursor: grabbing;\n}\n.lake-table-container.filterIcon {\n  cursor: pointer;\n}\n.lake-table-container.zoomIn {\n  cursor: zoom-in;\n}\n.lake-table-container canvas {\n  position: absolute;\n}\n.lake-table-container .lake-table-warning-container {\n  position: absolute;\n  height: 28px;\n  width: auto;\n  display: inline-block;\n  background-color: var(--yq-yellow-6);\n  color: var(--yq-white);\n  border-radius: 4px 4px 0 0;\n  line-height: 28px;\n  padding: 0 10px;\n}\nhtml[data-kumuhana=\"pouli\"] .lake-table-container {\n  background-color: var(--yq-bg-primary);\n}\n.lake-table-preEditor {\n  position: absolute;\n  display: inline-block;\n  left: -9999px;\n  top: 0;\n  opacity: 0;\n  box-sizing: border-box;\n  padding: 5px 6px;\n  word-break: break-word;\n}\n.lake-table-loading-mask {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  background-color: var(--yq-bg-tertiary);\n  z-index: 500;\n}\n.lake-table-loading-mask .lake-table-loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 50px;\n  height: 50px;\n  margin: auto;\n}\n.lake-table-dom-renderer {\n  position: relative;\n  overflow: auto;\n}\n.lake-table-dom-renderer .lake-table-view-inner-container {\n  min-width: 100%;\n  min-height: 100%;\n}\n.lake-table-canvas-renderer {\n  width: 100%;\n  height: 100%;\n}\n.lake-table-lakecanvas-renderer {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.lake-table-button {\n  height: 32px;\n  width: auto;\n  min-width: 32px;\n  text-align: center;\n  padding: 0 8px;\n  margin: 0 3px;\n  background-color: transparent;\n  border: 1px solid transparent;\n  border-radius: 3px 3px;\n  font-size: 14px;\n  cursor: pointer;\n  color: var(--yq-text-primary);\n  outline: none;\n  line-height: 32px;\n  display: inline-flex;\n  align-items: center;\n}\n.lake-table-button:hover {\n  border: 1px solid transparent;\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-table-button:active,\n.lake-table-button-active,\n.lake-table-button-active:hover {\n  background-color: var(--yq-bg-primary-hover);\n  border: 1px solid transparent;\n}\n.lake-table-button-disabled,\n.lake-table-button-disabled:hover {\n  background-color: transparent;\n  border: 1px solid transparent;\n  box-shadow: none;\n  color: var(--yq-text-primary);\n  opacity: 0.25;\n  cursor: not-allowed;\n}\n.lake-table-button-inner-text {\n  font-size: 12px;\n  margin-left: 0;\n  vertical-align: top;\n}\n.lake-table-button .lake-icon {\n  font-size: 18px;\n}\n.lake-table-button-desc {\n  margin-left: 4px;\n}\n.lake-table-button-group {\n  position: relative;\n  display: inline-block;\n  width: auto;\n}\n[accessbilityid='main-readOnly-button'] .lake-table-button-inner-text {\n  background: var(--yq-theme);\n  color: var(--yq-text-primary);\n  padding: 3px 9px;\n  border-radius: 2px;\n}\n.lake-max-editor .lake-table-toolbar-content {\n  margin: 0 auto;\n}\n.lake-table-toolbar {\n  position: relative;\n  width: 100%;\n  height: 40px;\n  padding: 0;\n  line-height: 1.5;\n  background: var(--yq-bg-secondary);\n  border: solid var(--yq-border-primary);\n  border-width: 1px 0;\n  transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n  z-index: 400;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.lake-table-toolbar-content {\n  position: relative;\n  background: transparent;\n  display: none;\n  text-align: left;\n  width: 100%;\n  white-space: nowrap;\n  overflow-x: auto;\n  overflow-y: hidden;\n}\n.lake-table-toolbar-content-active {\n  display: block;\n}\n.lake-table-toolbar-area {\n  padding: 5px 8px;\n  height: 40px;\n  width: auto;\n  display: inline-block;\n  border-left: 1px solid var(--yq-border-primary);\n  vertical-align: top;\n}\n.lake-table-toolbar-area.right {\n  float: right;\n  border-left: none;\n}\n.lake-table-toolbar-area-hide {\n  display: none;\n}\n.lake-table-toolbar-area:first-child {\n  border-left: none;\n}\n.lake-table-toolbar-area .lake-table-button-desc {\n  font-size: 14px;\n  margin-left: 4px;\n  max-width: 170px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-table-toolbar-area .lake-table-button-desc .ant-input {\n  border-radius: 6px;\n  height: 28px;\n  line-height: 28px;\n}\n.lake-table-toolbar-area .lake-table-button {\n  border-radius: 6px;\n  height: 28px;\n  line-height: 28px;\n  vertical-align: top;\n}\n.lake-table-toolbar-area .lake-table-button-viewtitle:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar .lake-icon {\n  font-size: 16px;\n  vertical-align: -1px;\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar .lake-icon-table-grid-view {\n  color: var(--yq-yuque-green-6);\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar .lake-icon-table-card-view {\n  color: var(--yq-blue-5);\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar .lake-icon-table-kanban-view {\n  color: var(--yq-cyan-5);\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar .lake-icon-dropdown-arrow {\n  font-size: 14px;\n  color: var(--yq-text-caption);\n  margin-left: 8px;\n  margin-top: 2px;\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar .lake-icon-dropdown-arrow::before {\n  content: '\\e6c4';\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar-list {\n  flex: 1;\n  display: flex;\n  align-items: center;\n}\n.lake-table-toolbar-area .lake-table-view-manage-toolbar-list .lake-table-button-desc {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 15em;\n}\n.lake-table-toolbar-active {\n  background-color: var(--yq-bg-tertiary);\n  border-bottom: 1px solid var(--yq-border-primary);\n  box-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 8px 16px 4px rgba(0, 0, 0, 0.04);\n}\n.lake-table-toolbar-split {\n  width: 0;\n  border-right: 1px solid var(--yq-border-primary);\n  margin: 0 6px 0 6px;\n}\n.lake-table-toolbar .lake-table-button-inner-text {\n  font-size: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-table-toolbar-kanben-name {\n  margin: 0 5px;\n  font-weight: 500;\n}\n.lake-table-toolbar-kanben-name .lake-icon {\n  font-size: 14px;\n}\n@media screen and (max-width: 575px) {\n  .lake-table-toolbar-area.right {\n    display: none;\n  }\n}\n.lake-icon.lake-icon-col-input,\n.lake-icon.lake-icon-col-textarea,\n.lake-icon.lake-icon-col-number,\n.lake-icon.lake-icon-col-select,\n.lake-icon.lake-icon-col-multiselect,\n.lake-icon.lake-icon-col-date,\n.lake-icon.lake-icon-col-createdat,\n.lake-icon.lake-icon-col-updatedat,\n.lake-icon.lake-icon-col-modifierid,\n.lake-icon.lake-icon-col-userid,\n.lake-icon.lake-icon-col-checkbox,\n.lake-icon.lake-icon-col-image,\n.lake-icon.lake-icon-col-mention,\n.lake-icon.lake-icon-col-file,\n.lake-icon.lake-icon-col-link,\n.lake-icon.lake-icon-col-email,\n.lake-icon.lake-icon-col-phone {\n  font-size: 16px;\n}\n/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-workbench-container {\n  width: 100%;\n  height: 100%;\n}\n");var kE=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"containerRef",l.a.createRef()),s()(m()(e),"workbench",void 0),e}return p()(n,[{key:"componentDidMount",value:function(){if(this.containerRef.current){var e=new Jt(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wE(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({containerEl:this.containerRef.current,editor:{adapter:mE,args:this.props}},bE));yE.loadPlugin(e),e.renderPage(),this.workbench=e}}},{key:"componentWillUnmount",value:function(){this.workbench.destroy(),V.a.unmountComponentAtNode(this.workbench.container),this.workbench.container.remove()}},{key:"render",value:function(){return l.a.createElement("div",{ref:this.containerRef,className:"lake-workbench-container"})}}]),n}(l.a.Component);function xE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return EE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?EE(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function EE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var CE,OE=function(e){var t=e.components;return l.a.createElement(l.a.Fragment,null,t.map((function(e){return null==e?void 0:e()})))},_E=Kw("renderService"),SE=function(){function e(t){d()(this,e),s()(this,"_renderBus",void 0),this._renderBus=new Map;var n,r=xE(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,a=ie()(o,2),i=a[0],l=a[1];i&&this._renderBus.set(i,l)}}catch(e){r.e(e)}finally{r.f()}}return p()(e,[{key:"tapComponent",value:function(e,t){this._renderBus.set(e,t)}},{key:"render",value:function(){var e,t=[],n=xE(this._renderBus);try{for(n.s();!(e=n.n()).done;){var r=ie()(e.value,2)[1].useRender;of(r)&&t.push(r)}}catch(e){n.e(e)}finally{n.f()}return l.a.createElement(OE,{components:t})}}]),e}();function RE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RE(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function AE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return TE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?TE(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function TE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var LE="viewManage",DE="gridSetting",PE="filter",ME="group",NE="sort",IE="search",FE="addRecord",BE="kanbanGroup",VE="kanbanSetting",HE="cardSetting",zE=(s()(CE={},LE,{type:LE,name:"视图管理",icon:"plus",position:"left"}),s()(CE,FE,{type:FE,name:"添加记录",icon:"plus",position:"right"}),s()(CE,HE,{type:HE,name:"画册配置",icon:"setting",position:"right"}),s()(CE,PE,{type:PE,name:"筛选",icon:"filter",position:"right"}),s()(CE,DE,{type:DE,name:"表格配置",icon:"setting",position:"right"}),s()(CE,ME,{type:ME,name:"分组",icon:"group",position:"right"}),s()(CE,BE,{type:BE,name:"看板分组",icon:"group",position:"right"}),s()(CE,VE,{type:VE,name:"看板配置",icon:"setting",position:"right"}),s()(CE,NE,{type:NE,name:"排序",icon:"sort",position:"right"}),s()(CE,IE,{type:IE,name:"查找",icon:"search",position:"right"}),CE);function qE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-icon-success {\n  color: var(--yq-function-success);\n}\n");var UE={input:"".concat("lake-icon","-col-input"),textarea:"".concat("lake-icon","-col-textarea"),number:"".concat("lake-icon","-col-number"),select:"".concat("lake-icon","-col-select"),multiSelect:"".concat("lake-icon","-col-multiselect"),date:"".concat("lake-icon","-col-date"),createdAt:"".concat("lake-icon","-col-createdat"),updatedAt:"".concat("lake-icon","-col-updatedat"),modifierId:"".concat("lake-icon","-col-modifierid"),userId:"".concat("lake-icon","-col-userid"),checkbox:"".concat("lake-icon","-col-checkbox"),image:"".concat("lake-icon","-col-image"),mention:"".concat("lake-icon","-col-mention"),file:"".concat("lake-icon","-col-file"),link:"".concat("lake-icon","-col-link"),email:"".concat("lake-icon","-col-email"),phone:"".concat("lake-icon","-col-phone"),lock:"".concat("lake-icon","-table-lock"),drag:"".concat("lake-icon","-table-drag"),grid:"".concat("lake-icon","-table-grid-view"),card:"".concat("lake-icon","-table-card-view"),kanban:"".concat("lake-icon","-table-kanban-view"),setting:"".concat("lake-icon","-table-setting"),filter:"".concat("lake-icon","-grid-filter"),group:"".concat("lake-icon","-group"),sort:"".concat("lake-icon","-grid-sort"),search:"".concat("lake-icon","-search-len"),arrowDown:"".concat("lake-icon","-dropdown-arrow"),arrowRight:"".concat("lake-icon","-table-arrow-right"),arrowRightMini:"".concat("lake-icon","-arrow-right"),arrowDownMini:"".concat("lake-icon","-arrow-down-mini"),arrowDownView:"".concat("lake-icon","-table-arrow-down-view"),plus:"".concat("lake-icon","-table-plus"),close:"".concat("lake-icon","-table-close"),dot:"".concat("lake-icon","-table-dot"),stop:"".concat("lake-icon","-stop"),success:"".concat("lake-icon","-success"),delete:"".concat("lake-icon","-table-new-delete")},GE=function(e){var t=e.type,n=e.className,r=e.size,o=e.onClick,a=e.style,i=UE[t],c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qE(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a&&a);return r&&(c.fontSize=r),i?l.a.createElement("span",{className:S()("lake-icon",i,n),style:c,onClick:function(){null==o||o()}}):null};nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-toolbar-item.toolbar-active {\n  background-color: var(--yq-bg-primary-hover);\n}\n");var WE=function(){},YE=function(e){var t=e.icon,n=e.name,r=void 0===n?"":n,o=e.onCommand,a=void 0===o?WE:o,i=e.type;return l.a.createElement("div",{className:S()("lake-table-toolbar-item",e.isActive&&"toolbar-active"),onClick:function(){return a(i)}},l.a.createElement(GE,{type:t}),l.a.createElement("span",{className:"lake-table-toolbar-item-name"},r))},$E=Kw("viewManageService"),KE=function(){function e(t){var n=this;d()(this,e),this.storeSrv=t,s()(this,"activeView",void 0),s()(this,"views",void 0),s()(this,"updated$",new my),s()(this,"curViewType",new gy(null)),s()(this,"_getActiveView",(function(){var e={id:n.storeSrv._tableModel.activeView.get("id"),name:n.storeSrv._tableModel.activeView.get("name"),type:n.storeSrv._tableModel.activeView.get("type")};n.activeView=e,n.curViewType.next(e.type),n._updateNotify()})),s()(this,"_getViews",(function(){var e=n.storeSrv._tableModel.getViews().map((function(e){return{id:e.get("id"),name:e.get("name"),type:e.get("type")}}));n.views=e,n._updateNotify()})),this.storeSrv=t,this.storeSrv.updated$.subscribe((function(){n._init()})),this.storeSrv._kernel.on(gc.VIEW_CHANGED,(function(){n._init()}))}return p()(e,[{key:"_init",value:function(){this._getActiveView(),this._getViews()}},{key:"add",value:function(e){e===Gs.GRID?this.storeSrv.fire(gc.INSERT_GRID):e===Gs.CARD?this.storeSrv.fire(gc.INSERT_CARD):e===Gs.KANBAN&&this.storeSrv.fire(gc.INSERT_KANBAN)}},{key:"toggle",value:function(e){var t=this.views.find((function(t){return t.id===e}));t&&this.storeSrv.fire(gc.ACTIVE_VIEW,t.id)}},{key:"del",value:function(e){this.storeSrv.fire(gc.REMOVE_VIEW,e)}},{key:"rename",value:function(e,t){this.storeSrv.fire(gc.UPDATE_VIEW_NAME,e,t)}},{key:"copy",value:function(e){this.storeSrv.fire(gc.COPY_VIEW,e)}},{key:"_updateNotify",value:function(){this.updated$.next()}}]),e}();function XE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-dialog-mask {\n  background: rgba(0, 0, 0, 0.45);\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  -webkit-tap-highlight-color: transparent;\n}\n.lake-dialog-mask.mask-fade-in {\n  animation: mask-show-enter 0.4s ease-in;\n}\n.lake-dialog-mask.mask-fade-out {\n  display: none;\n}\n@keyframes mask-show-enter {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n");var ZE=function(e){if(!e.hasMask)return null;var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XE(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({zIndex:e.zIndex},e.style&&e.style);return l.a.createElement("div",{className:S()("lake-dialog-mask",e.visible?"mask-fade-in":"mask-fade-out",e.className),onClick:function(t){var n;e.maskClick&&(null===(n=e.maskClick)||void 0===n||n.call(e)),t.preventDefault()},style:t})};function QE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}ZE.defaultProps={hasMask:!0},nc(".lake-table-text {\n  display: inline-block;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  width: 100%;\n}\n");var JE=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QE(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({maxWidth:e.maxWidth},e.style&&e.style);return l.a.createElement("span",{style:t,className:S()("lake-table-text",e.className)},e.children)};function eC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-empty-no-data {\n  text-align: center;\n  width: 16.571rem;\n  padding-top: 2.679rem;\n  margin: 0 auto;\n}\n.lake-empty-no-data .intrinsic-aspect-ratio-container {\n  padding: calc(1 / 2 * 100%) 0 0;\n  position: relative;\n}\n.lake-empty-no-data .intrinsic-aspect-ratio-container .lake-empty-no-data-inner {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: url('https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*SXqWSrOdiToAAAAAAAAAAAAAARQnAQ') no-repeat center;\n  background-size: 100%;\n}\n.lake-empty-no-data .lake-empty-no-data-desc {\n  margin-top: 0;\n  margin-bottom: 0;\n  padding: 2.857rem 0;\n  font-size: 1.143rem;\n  color: var(--yq-text-caption);\n}\n");var tC=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.style&&e.style);return l.a.createElement("div",{className:S()("lake-empty-no-data",e.className),style:t},l.a.createElement("div",{className:"intrinsic-aspect-ratio-container"},l.a.createElement("div",{className:"lake-empty-no-data-inner"})),e.desc&&l.a.createElement("p",{className:"lake-empty-no-data-desc"},e.desc),e.children&&e.children)};function nC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nC(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nc(".lake-table-select-tag {\n  width: auto;\n  padding: 0.143rem 0.571rem;\n  border-radius: 0.429rem;\n}\n");var oC=function(e){var t=e.option,n=e.style,r=e.className,o=t.color?{background:Jh.getRenderColor(t.color)||"none",color:Jh.getRenderTextColor(t.color)||"#595959"}:{},a=rC(rC({},n&&n),o);return l.a.createElement(JE,{className:S()("lake-table-select-tag",r),style:a},t.value)};function aC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}nc(".lake-table-mention-tag {\n  display: flex;\n  align-items: center;\n}\n.lake-table-mention-tag .lake-table-mention-tag-avatar {\n  width: 1.607rem;\n  height: 1.607rem;\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n.lake-table-mention-tag .lake-table-mention-tag-name {\n  height: 1.786rem;\n  line-height: 1.786rem;\n  padding-left: 0.536rem;\n}\n");var iC,lC=function(e){var t=e.mention,n=e.style,r=e.className,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aC(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n&&n);return l.a.createElement("div",{className:S()("lake-table-mention-tag",r),style:o},l.a.createElement("img",{className:"lake-table-mention-tag-avatar",src:t.avatar_url,alt:"avatar"}),l.a.createElement(JE,{className:"lake-table-mention-tag-name"},t.name))},cC=function(){},sC=(s()(iC={},LE,(function(e){var t=e.type,n=e.onCommand,r=void 0===n?cC:n,o=Uw().get($E);yy(o.updated$.asObservable());var a=o.activeView;return l.a.createElement("div",{className:"lake-table-toolbar-item toolbar-item-view-manage",onClick:function(){return r(t)}},l.a.createElement(GE,{type:a.type.toLowerCase()}),l.a.createElement(JE,{className:"lake-table-toolbar-item-name"},a.name),l.a.createElement(GE,{type:"arrowDownView"}))})),s()(iC,DE,YE),s()(iC,PE,YE),s()(iC,ME,YE),s()(iC,NE,YE),s()(iC,IE,YE),s()(iC,VE,YE),s()(iC,HE,YE),iC),uC=Kw("toolbarService"),dC=p()((function e(){var t=this;d()(this,e),s()(this,"_hookButtons",new Map),s()(this,"Button",(function(e){var n=t._hookButtons.get(e.type);return n?l.a.createElement(n,e):null})),Object.keys(sC).forEach((function(e){t._hookButtons.set(e,sC[e])}))})),fC=Kw("zIndexService"),pC=function(){function e(){d()(this,e),s()(this,"zIndex",void 0),this.zIndex={editor:0,mask:1004,modal:1005,modalToolbar:1006,rowEditor:1007,modalConfirm:1007}}return p()(e,[{key:"maxZIndexInEditor",get:function(){var e=Object.values(this.zIndex);return Math.max.apply(Math,e)}}]),e}();function hC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hC(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vC=function(){var e=Uw(),t=e.get(wC),n=e.get(fC),r=by(t.state.visibleList),o=t.dialogQueue;return!o||o.length<1?null:V.a.createPortal(l.a.createElement("div",{className:"lake-table-dialog-wrapper",style:{zIndex:n.zIndex.mask}},o.map((function(e){var o=e.name,i=e.Comp,c=e.props,s=!(null==r||!r.includes(o)),u=mC(mC({},c),{},{zIndex:n.zIndex.mask,visible:s,onDialogClose:function(e){!function(e,n){var r;n.onDialogClose?null===(r=n.onDialogClose)||void 0===r||r.call(n):e?t.close(e):t.closeAll()}(e,c)}});return l.a.createElement(i,a()({key:o},u))}))),document.body)};function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gC(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yC=new Set,wC=Kw("dialogService"),kC=function(){function e(t,n){var r=this;d()(this,e),this.renderService=t,this.storeService=n,s()(this,"dialogQueue",void 0),s()(this,"state",{visibleList:new gy([])}),s()(this,"close",(function(e){r._removeVisible(e)})),s()(this,"closeAll",(function(){r._removeVisible()})),this.renderService=t,this.renderService.tapComponent(wC,{useRender:vC}),this.storeService._editor.on(qs.SHOW_ROW_EDITOR,(function(){return r.closeAll()}))}return p()(e,[{key:"open",value:function(e,t){this.dialogQueue||(this.dialogQueue=[]);var n=e.displayName;if(n){var r=t||{};if(yC.has(n)){var o=-1,a=this.dialogQueue.map((function(e,t){return e.name===n?(o=t,bC(bC({},e),{},{props:r})):e})),i=a.splice(o,1);return this.dialogQueue=a.concat(i),void this._addVisible(n)}yC.add(n),this.dialogQueue.push({name:n,Comp:e,props:r}),this._addVisible(n)}else ed(!1,"The Compo: ".concat(e.name," needs a static diaplayName in dialogSrv"))}},{key:"_getVisible",value:function(){return this.state.visibleList.value}},{key:"_addVisible",value:function(e){var t=this._getVisible(),n=me()(new Set(t.concat(e)));this.state.visibleList.next(n)}},{key:"_removeVisible",value:function(e){var t,n=this._getVisible();if(e){if(!yC.has(e))return void ed(!1,"The Compo: ".concat(e," is not registered. It has no diaplayName maybe"));t=n.filter((function(t){return t!==e}))}else t=[];this.state.visibleList.next(t)}}]),e}();function xC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xC(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var CC=Kw("colService"),OC={name:_c("无封面"),id:null},_C={display:"clip",id:null,show:!1,name:_c("无封面")},SC=[{label:_c("适应"),value:"fit"},{label:_c("裁剪"),value:"clip"}],RC=[{label:_c("并且"),value:"and"},{label:_c("或者"),value:"or"}],jC=function(){function e(t){var n=this;d()(this,e),this.storeSrv=t,s()(this,"columns",void 0),s()(this,"colsCover",void 0),s()(this,"cover",void 0),s()(this,"showFieldName",void 0),s()(this,"groupedColInKanban",void 0),s()(this,"groupColsInKanban",void 0),s()(this,"groupColsInGrid",void 0),s()(this,"groupedColInGrid",void 0),s()(this,"hasGrouped",new gy(!1)),s()(this,"sortCols",void 0),s()(this,"sortedCol",void 0),s()(this,"hasSorted",new gy(!1)),s()(this,"filteredCol",void 0),s()(this,"filterCols",void 0),s()(this,"hasFiltered",new gy(!1)),s()(this,"updated$",new my),s()(this,"_getCols",(function(e){var t=n.storeSrv._tableModel.activeView.get("columns"),r=n.storeSrv._tableModel.getFieldsMap(),o=null==t?void 0:t.map((function(e){return EC(EC({},r[e.id]),e)}));n.columns=o,n._computedColsData(),!e&&n._updateNotify()})),s()(this,"_getCover",(function(e){var t=n.storeSrv._tableModel.activeView.get("cover")||_C;if(!t.id||n.colsCover.map((function(e){return e.id})).includes(t.id)){var r=n.colsCover.filter((function(e){return e.id===t.id}))[0].name||_C.name;n.cover=EC(EC({},t),{},{name:r}),!e&&n._updateNotify()}else n.changeCoverSource(null)})),s()(this,"_getFieldNameShow",(function(e){n.showFieldName=!!n.storeSrv._tableModel.activeView.get("showField"),!e&&n._updateNotify()})),s()(this,"_getGroupedColInKanban",(function(e){var t,r=n.storeSrv._tableModel.activeView;if(n.groupedColInKanban=null,!r||r.type!==Gs.KANBAN)return null;var o=null===(t=n.storeSrv._kernel)||void 0===t?void 0:t.groupService.getGroup();if(!o||0===o.length)return null;var a=n.storeSrv._tableModel.getFieldsMap();if(!a)return null;var i=a[o[0].id];n.groupedColInKanban=i||null,!e&&n._updateNotify()})),s()(this,"_getGroupColsInKanban",(function(e){var t=n.storeSrv._kernel.kanbanService.getGroupColumns();n.groupColsInKanban=t,!e&&n._updateNotify()})),s()(this,"_getGroupedColInGrid",(function(e){var t=n.storeSrv._tableModel.activeView;if(n.groupedColInGrid=null,t&&t.type===Gs.GRID){var r=t.get("group")||[];n.groupedColInGrid=(null==r?void 0:r[0])||null;var o=!!n.groupedColInGrid;n.hasGrouped.next(o),!e&&n._updateNotify()}else n.hasGrouped.next(!1)})),s()(this,"_getGroupColsInGrid",(function(){n.groupColsInGrid=n.columns.filter((function(e){return Bc.includes(e.type)}))})),s()(this,"_getSortCols",(function(){n.sortCols=n.columns.filter((function(e){return Fc.includes(e.type)}))})),s()(this,"_getSortedCol",(function(e){var t,r,o=n.storeSrv._tableModel.activeView;if(n.sortedCol=null,!o)return n.hasSorted.next(!1),null;n.sortedCol=o.get("sort")||null;var a=(null===(t=n.sortedCol)||void 0===t?void 0:t.auto)&&(null===(r=n.sortedCol)||void 0===r?void 0:r.options.length)>0;n.hasSorted.next(a),!e&&n._updateNotify()})),s()(this,"_getFilteredCol",(function(e){var t,r,o=n.storeSrv._tableModel.activeView;if(n.filteredCol=null,!o)return n.hasFiltered.next(!1),null;n.filteredCol=o.get("filter")||null;var a=(null===(t=n.filteredCol)||void 0===t?void 0:t.options)&&(null===(r=n.filteredCol)||void 0===r?void 0:r.options.length)>0;n.hasFiltered.next(a),!e&&n._updateNotify()})),s()(this,"updateFilterOperator",(function(e,t){var r=n.storeSrv._kernel.filterService.updateOperator(e,t);return n.changeFilterOption(r),r})),this.storeSrv=t,this.storeSrv.updated$.subscribe((function(){n._init()})),this.storeSrv._kernel.on(gc.VIEW_CHANGED,(function(){n._init()}))}return p()(e,[{key:"_getFilterCols",value:function(){this.filterCols=this.columns.filter((function(e){return Ic.includes(e.type)}))}},{key:"_updateNotify",value:function(){this.updated$.next()}},{key:"_init",value:function(){this._getCols(!0),this._getCover(!0),this._getFieldNameShow(!0),this._getGroupedColInKanban(!0),this._getGroupColsInKanban(!0),this._getGroupedColInGrid(!0),this._getGroupColsInGrid(),this._getSortedCol(!0),this._getSortCols(),this._getFilteredCol(!0),this._getFilterCols(),this._updateNotify()}},{key:"_computedColsData",value:function(){this.colsCover=this.columns.filter((function(e){return e.type===Ac.IMAGE})).map((function(e){return{name:e.name,id:e.id}})),this.colsCover.unshift(OC)}},{key:"toggleFieldHidden",value:function(e,t){var n=this.columns.findIndex((function(t){return t.id===e})),r=[];this.columns.forEach((function(e,o){o===n?r.push(EC(EC({},e),{},{hidden:t})):r.push(e)})),this.storeSrv.fire(gc.SET_COLS,r),this._getCols()}},{key:"changeCoverSource",value:function(e){var t=EC(EC({},this.cover),{},{show:!!e,id:e||null});this.storeSrv.fire(gc.SET_COVER,t),this._getCover()}},{key:"changeCoverDisplay",value:function(e){var t=EC(EC({},this.cover),{},{display:e});this.storeSrv.fire(gc.SET_COVER,t),this._getCover()}},{key:"changeFieldNameShow",value:function(e){this.storeSrv.fire(gc.SET_SHOW_FIELD,e),this._getFieldNameShow()}},{key:"changeKanbanGroupByCol",value:function(e){var t=[{id:e}];this.storeSrv.fire(gc.SET_GROUP,t),this._getGroupedColInKanban(!0),this._getGroupColsInKanban()}},{key:"addGridGroupByCol",value:function(e){var t;e||(e=null===(t=this.groupColsInGrid)||void 0===t?void 0:t[0].id);var n={id:e,type:"asc"};this.storeSrv.fire(gc.SET_GROUP,[n]),this._getGroupedColInGrid()}},{key:"updateGridGroupByCol",value:function(e,t){var n=EC(EC({},this.groupedColInGrid),{},s()({},e,t));this.storeSrv.fire(gc.SET_GROUP,[n]),this._getGroupedColInGrid()}},{key:"delGridGroupByCol",value:function(){this.storeSrv.fire(gc.SET_GROUP,[]),this._getGroupedColInGrid()}},{key:"addSortByCol",value:function(e){var t;e||(e=null===(t=this.sortCols)||void 0===t?void 0:t[0].id);var n=this.getNewSort(this.sortedCol||{},e);this.submitSortCol(n)}},{key:"getNewSort",value:function(e,t){return this.storeSrv._kernel.sortService.addOption(e||{},t)}},{key:"submitSortCol",value:function(e){this.storeSrv._kernel.execute(gc.SET_SORT,e),this._getSortedCol()}},{key:"updateSortByCol",value:function(e,t){var n;n="auto"===e?this.storeSrv._kernel.sortService.setAuto(this.sortedCol,!!t):"del"===e?this.storeSrv._kernel.sortService.removeOption(this.sortedCol,0):this.storeSrv._kernel.sortService.updateOption(this.sortedCol,0,e,t),this.storeSrv.fire(gc.SET_SORT,n)}},{key:"getColById",value:function(e){return this.columns.filter((function(t){return t.id===e}))[0]||{}}},{key:"getMemberDataByCol",value:function(e){var t=this.storeSrv._tableModel.activeView.get("rows")||[],n=[],r={},o=this.storeSrv._tableModel.recordsModel;return t.forEach((function(t){var a=o.getCellValue(t.id,e.id,e);Array.isArray(a)&&a.forEach((function(e){r[e.id]||(r[e.id]=!0,n.push(wc(e)))}))})),n}},{key:"addFilter",value:function(e){var t=this.storeSrv._kernel.filterService.addOption(e);return this.changeFilterOption(t),t}},{key:"updateFilterOption",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",r=arguments.length>3?arguments[3]:void 0,o=this.storeSrv._kernel.filterService.updateOption(e,t,n,r);return this.changeFilterOption(o),o}},{key:"removeFilterOption",value:function(e,t){var n=this.storeSrv._kernel.filterService.removeOption(e,t);return this.changeFilterOption(n),n}},{key:"changeFilterOption",value:function(e){for(var t=[],n=0;n<e.options.length;n++)(xf.includes(e.options[n].func)||e.options[n].expected||!1===e.options[n].expected)&&t.push(e.options[n]);var r=EC(EC({},e),{},{options:t});this.storeSrv.fire(gc.SET_FILTER,r),this._getFilteredCol()}},{key:"getSortTextByColId",value:function(e){var t=wk(this.getColById(e).type);return[{value:"asc",label:t.asc},{value:"desc",label:t.desc}]}}]),e}();s()(jC,"defaultCoverDisplayOptions",SC),s()(jC,"defaultFilterWhereOptions",RC);var AC=Kw("searchService"),TC=function(){function e(t){var n=this;d()(this,e),this.storeService=t,s()(this,"state",{visible:new gy(!1)}),this.storeService=t,this.storeService._editor.on(qs.SHOW_ROW_EDITOR,(function(){return n.hide()}))}return p()(e,[{key:"show",value:function(){this.state.visible.next(!0)}},{key:"hide",value:function(){this.state.visible.next(!1)}},{key:"search",value:function(e){this.storeService.fire(gc.SEARCH,e)}}]),e}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\ndiv.lake-h5editor-table-view-manage-new {\n  padding-bottom: 1.143rem;\n}\ndiv.lake-h5editor-table-view-manage-new .view-manage-new-title {\n  text-align: center;\n}\ndiv.lake-h5editor-table-view-manage-new ul,\ndiv.lake-h5editor-table-view-manage-new li {\n  list-style: none;\n  margin-bottom: 0;\n  padding-inline-start: 0;\n}\ndiv.lake-h5editor-table-view-manage-new .view-manage-new-list .view-manage-new-list-item {\n  padding: 1rem 1.143rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\ndiv.lake-h5editor-table-view-manage-new .view-manage-new-list .view-manage-new-list-item .lake-icon {\n  font-size: 2.571rem;\n}\ndiv.lake-h5editor-table-view-manage-new .view-manage-new-list .view-manage-new-list-item .view-manage-new-list-item-left {\n  display: flex;\n  align-items: center;\n}\ndiv.lake-h5editor-table-view-manage-new .view-manage-new-list .view-manage-new-list-item .view-manage-new-icon {\n  display: inline-block;\n  width: 4rem;\n  height: 4rem;\n}\ndiv.lake-h5editor-table-view-manage-new .view-manage-new-list .view-manage-new-list-item .view-manage-new-icon.grid {\n  background-image: url('https://gw.alipayobjects.com/zos/bmw-prod/92d5ad49-bb49-48f9-b1ca-1fcbf0d26f77.svg');\n  background-size: 100%;\n}\ndiv.lake-h5editor-table-view-manage-new .view-manage-new-list .view-manage-new-list-item .view-manage-new-icon.card {\n  background-image: url('https://gw.alipayobjects.com/zos/bmw-prod/fae1b58a-77c2-4fe2-8b84-d7ac57715fdc.svg');\n  background-size: 100%;\n}\ndiv.lake-h5editor-table-view-manage-new .view-manage-new-list .view-manage-new-list-item .view-manage-new-icon.kanban {\n  background-image: url('https://gw.alipayobjects.com/zos/bmw-prod/21d91d38-c0a4-4899-90ef-173c64b3497b.svg');\n  background-size: 100%;\n}\ndiv.lake-h5editor-table-view-manage-new .view-manage-new-list .view-manage-new-list-item .view-manage-new-content {\n  display: inline-block;\n  margin-left: 0.857rem;\n}\ndiv.lake-h5editor-table-view-manage-new .view-manage-new-list .view-manage-new-list-item .view-manage-new-content p.view-manage-new-content-title {\n  font-size: 1.143rem;\n  line-height: 1.714rem;\n  margin-bottom: 0;\n}\ndiv.lake-h5editor-table-view-manage-new .view-manage-new-list .view-manage-new-list-item .view-manage-new-content p.view-manage-new-content-desc {\n  font-size: 1rem;\n  margin-bottom: 0;\n  color: var(--yq-text-caption);\n}\ndiv.lake-h5editor-table-view-manage-new .view-manage-new-list .view-manage-new-list-item:hover {\n  background: var(--yq-bg-tertiary);\n  border-radius: 0.571rem;\n}\n");var LC=function(e){var t=Uw(),n=t.get($E),r=t.get(wC),o=Object(i.useState)(""),a=ie()(o,2),c=a[0],s=a[1];Object(i.useEffect)((function(){s("")}),[e.visible]);var u=function(e){s(e),n.add(e),r.close()};return l.a.createElement(HC,{zIndex:e.zIndex,className:"lake-h5editor-table-view-manage-new",title:_c("新建视图"),onDialogClose:e.onDialogClose,visible:e.visible},l.a.createElement("ul",{className:"view-manage-new-list"},Us.map((function(e){return l.a.createElement("li",{className:"view-manage-new-list-item",key:e.type,onClick:function(){return u(e.type)}},l.a.createElement("div",{className:"view-manage-new-list-item-left"},l.a.createElement("div",{className:"view-manage-new-icon ".concat(e.type.toLocaleLowerCase())}),l.a.createElement("div",{className:"view-manage-new-content"},l.a.createElement("p",{className:"view-manage-new-content-title"},_c("".concat(e.title))),l.a.createElement("p",{className:"view-manage-new-content-desc"},e.desc))),l.a.createElement(_t.h,{className:"view-manage-radio",value:e.type,checked:c===e.type,onChange:function(t){return t&&u(e.type)}}))}))))};LC.displayName="H5NewViewAdapter",nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-h5editor-table-view-manage {\n  padding-bottom: 1.143rem;\n}\n.lake-h5editor-table-view-manage .view-manage-list {\n  padding-left: 0;\n}\n.lake-h5editor-table-view-manage .view-manage-list .view-manage-list-item {\n  position: relative;\n  height: 4rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  overflow: hidden;\n}\n.lake-h5editor-table-view-manage .view-manage-list .view-manage-list-item:hover {\n  background: var(--yq-bg-tertiary);\n}\n.lake-h5editor-table-view-manage .view-manage-list .view-manage-list-item:last-child {\n  box-shadow: none;\n}\n.lake-h5editor-table-view-manage .view-manage-list .view-manage-list-item::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: 1px;\n  width: 100%;\n  transform: scaleY(0.5);\n  transform-origin: 0 0;\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-h5editor-table-view-manage .view-manage-list .view-manage-list-item .view-manage-list-item-left {\n  display: flex;\n  align-items: center;\n  max-width: calc(100% - 1.607rem);\n}\n.lake-h5editor-table-view-manage .view-manage-list .view-manage-list-item .view-manage-list-item-left .view-manage-name {\n  font-size: 1.143rem;\n  line-height: 1.143rem;\n  margin-left: 0.571rem;\n}\n.lake-h5editor-table-view-manage .view-manage-list .view-manage-list-item .lake-table-view-icon {\n  font-size: 1.429rem;\n}\n.lake-h5editor-table-view-manage .view-manage-footer {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 1.143rem 0;\n}\n.lake-h5editor-table-view-manage .view-manage-footer .view-manage-new-btn {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 23.929rem;\n  height: 3.143rem;\n  font-size: 1.143rem;\n  background: var(--yq-bg-primary);\n  border: none;\n}\n.lake-h5editor-table-view-manage .view-manage-footer .view-manage-new-btn::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 200%;\n  height: 200%;\n  transform: scale(0.5);\n  transform-origin: 0 0;\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 0.571rem;\n}\n.lake-h5editor-table-view-manage .view-manage-footer .view-manage-new-btn:hover {\n  background: var(--yq-bg-primary-hover);\n  border-radius: 0.571rem;\n}\n.lake-h5editor-table-view-manage .view-manage-footer .view-manage-new-btn .lake-icon-table-plus {\n  font-size: 1.429rem;\n}\n");var DC=function(e){var t=Uw(),n=t.get($E),r=t.get(Xw),o=t.get(wC);yy(n.updated$.asObservable());var a=n.views,i=n.activeView,c=function(){o.close(),o.open(LC)};return l.a.createElement(HC,{maxHeight:65,zIndex:e.zIndex,className:"lake-h5editor-table-view-manage",title:_c("切换视图"),onDialogClose:e.onDialogClose,visible:e.visible,footer:function(){return r.editorEnv.isToolbarEditable?l.a.createElement("div",{className:"view-manage-footer"},l.a.createElement("button",{className:"view-manage-new-btn",onClick:c},l.a.createElement(GE,{type:"plus",size:"1.429rem"}),_c("新建视图"))):null}},l.a.createElement("ul",{className:"view-manage-list"},a.map((function(e){var t=e.id===i.id;return l.a.createElement("li",{className:"view-manage-list-item",key:e.id,onClick:function(){return function(e){n.toggle(e.id),o.close()}(e)}},l.a.createElement("div",{className:"view-manage-list-item-left"},l.a.createElement(GE,{type:e.type.toLocaleLowerCase(),size:"1.429rem"}),l.a.createElement(JE,{className:"view-manage-name"},null==e?void 0:e.name)),t&&l.a.createElement(GE,{type:"success",size:"1.429rem"}))}))))};DC.displayName="H5ViewManageAdapter";var PC=function(e){var t=e.defaultValue,n=e.onChange;return l.a.createElement("div",{className:"lake-table-h5editor-view-setting-show-name list-item"},l.a.createElement("span",{className:"lake-table-view-setting-title"},_c("显示字段名")),l.a.createElement(rO,{checked:t,onChange:n}))},MC=function(){var e=Uw().get(CC),t=e.columns;return yy(e.updated$.asObservable()),l.a.createElement("div",{className:"lake-table-h5editor-view-setting-fields"},t.map((function(t){var n=0===t.index;return l.a.createElement("div",{className:"lake-table-field-item list-item",key:t.id},l.a.createElement("div",{className:"lake-table-field-item-left"},l.a.createElement(GE,{type:t.type,className:"field-item-icon-col"}),l.a.createElement(JE,{className:"lake-table-field-item-name",maxWidth:"16.071rem"},t.name)),!n&&l.a.createElement(rO,{className:"lake-table-field-switch",checked:!t.hidden,onChange:function(n){e.toggleFieldHidden(t.id,!n)}}))})))};nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-table-h5editor-grid-setting,\n.lake-table-h5editor-card-setting,\n.lake-table-h5editor-kanban-setting {\n  overflow-y: scroll;\n  padding-bottom: 1.143rem;\n}\n.lake-table-h5editor-grid-setting .adm-switch,\n.lake-table-h5editor-card-setting .adm-switch,\n.lake-table-h5editor-kanban-setting .adm-switch {\n  --width: 2.857rem;\n  --height: 1.571rem;\n}\n.lake-table-h5editor-grid-setting .lake-table-h5editor-hr,\n.lake-table-h5editor-card-setting .lake-table-h5editor-hr,\n.lake-table-h5editor-kanban-setting .lake-table-h5editor-hr {\n  position: relative;\n  border: 0;\n  height: 1.143rem;\n  margin: 0;\n}\n.lake-table-h5editor-grid-setting .lake-table-h5editor-hr::after,\n.lake-table-h5editor-card-setting .lake-table-h5editor-hr::after,\n.lake-table-h5editor-kanban-setting .lake-table-h5editor-hr::after {\n  content: '';\n  position: absolute;\n  bottom: 50%;\n  left: 0;\n  height: 1px;\n  width: 100%;\n  transform: scaleY(0.5) translateY(-50%);\n  transform-origin: 0 0;\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-table-h5editor-grid-setting .list-item,\n.lake-table-h5editor-card-setting .list-item,\n.lake-table-h5editor-kanban-setting .list-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 3.429rem;\n  line-height: 3.429rem;\n}\n.lake-table-h5editor-grid-setting .list-item .lake-table-view-setting-title,\n.lake-table-h5editor-card-setting .list-item .lake-table-view-setting-title,\n.lake-table-h5editor-kanban-setting .list-item .lake-table-view-setting-title {\n  font-size: 1.143rem;\n}\n.lake-table-h5editor-grid-setting .list-item .lake-table-view-setting-desc,\n.lake-table-h5editor-card-setting .list-item .lake-table-view-setting-desc,\n.lake-table-h5editor-kanban-setting .list-item .lake-table-view-setting-desc {\n  font-size: 1.143rem;\n  color: var(--yq-text-caption);\n}\n.lake-table-h5editor-grid-setting .list-item:hover,\n.lake-table-h5editor-card-setting .list-item:hover,\n.lake-table-h5editor-kanban-setting .list-item:hover {\n  background: var(--yq-bg-primary-hover);\n}\n.lake-table-h5editor-grid-setting .list-item.lake-table-h5editor-view-setting-cover-source,\n.lake-table-h5editor-card-setting .list-item.lake-table-h5editor-view-setting-cover-source,\n.lake-table-h5editor-kanban-setting .list-item.lake-table-h5editor-view-setting-cover-source {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-table-h5editor-grid-setting .list-item.lake-table-h5editor-view-setting-cover-source .lake-table-view-setting-title,\n.lake-table-h5editor-card-setting .list-item.lake-table-h5editor-view-setting-cover-source .lake-table-view-setting-title,\n.lake-table-h5editor-kanban-setting .list-item.lake-table-h5editor-view-setting-cover-source .lake-table-view-setting-title {\n  width: 4.571rem;\n  white-space: nowrap;\n}\n.lake-table-h5editor-grid-setting .list-item.lake-table-h5editor-view-setting-cover-source .lake-table-view-setting-desc.group-by,\n.lake-table-h5editor-card-setting .list-item.lake-table-h5editor-view-setting-cover-source .lake-table-view-setting-desc.group-by,\n.lake-table-h5editor-kanban-setting .list-item.lake-table-h5editor-view-setting-cover-source .lake-table-view-setting-desc.group-by {\n  display: flex;\n  align-items: center;\n  margin-left: 0.571rem;\n  width: calc(100% - 5.089rem);\n}\n.lake-table-h5editor-grid-setting .list-item.lake-table-h5editor-view-setting-cover-source .lake-table-view-setting-desc.group-by .lake-table-text,\n.lake-table-h5editor-card-setting .list-item.lake-table-h5editor-view-setting-cover-source .lake-table-view-setting-desc.group-by .lake-table-text,\n.lake-table-h5editor-kanban-setting .list-item.lake-table-h5editor-view-setting-cover-source .lake-table-view-setting-desc.group-by .lake-table-text {\n  text-align: right;\n  margin-right: 0.286rem;\n}\n.lake-table-h5editor-grid-setting .lake-table-h5editor-view-setting-show-name:hover,\n.lake-table-h5editor-card-setting .lake-table-h5editor-view-setting-show-name:hover,\n.lake-table-h5editor-kanban-setting .lake-table-h5editor-view-setting-show-name:hover {\n  background: var(--yq-bg-primary);\n}\n.lake-table-h5editor-card-setting .view-setting-cover-display-radio {\n  width: 10.429rem;\n  height: 2.571rem;\n}\n.lake-table-h5editor-view-setting-fields .lake-table-field-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 3.429rem;\n  line-height: 3.429rem;\n}\n.lake-table-h5editor-view-setting-fields .lake-table-field-item:hover {\n  background: var(--yq-bg-primary);\n}\n.lake-table-h5editor-view-setting-fields .lake-table-field-item .lake-table-field-item-left {\n  display: flex;\n  align-items: center;\n}\n.lake-table-h5editor-view-setting-fields .lake-table-field-item .lake-table-field-item-left .field-item-icon-col {\n  font-size: 1.429rem;\n  margin-right: 1.429rem;\n}\n.lake-table-h5editor-view-setting-fields .lake-table-field-item .lake-table-field-item-left .lake-table-field-item-name {\n  font-size: 1rem;\n}\n.lake-table-h5editor-view-setting-fields .lake-table-field-item .lake-table-field-switch {\n  width: 2.857rem;\n  height: 1.571rem;\n}\n");var NC=function(e){return l.a.createElement(HC,{zIndex:e.zIndex,className:"lake-table-h5editor-grid-setting",title:_c("表格配置"),onDialogClose:e.onDialogClose,visible:e.visible,maxHeight:45},l.a.createElement(MC,null))};NC.displayName="H5GridSettingAdapter";var IC=function(e){var t=Uw(),n=t.get(wC),r=t.get(CC),o=jC.defaultCoverDisplayOptions,a=r.cover,i=r.showFieldName,c=r.colsCover;return yy(r.updated$.asObservable()),l.a.createElement(HC,{zIndex:e.zIndex,className:"lake-table-h5editor-card-setting",title:_c("画册配置"),onDialogClose:e.onDialogClose,visible:e.visible,maxHeight:65},l.a.createElement("div",{className:"lake-table-h5editor-view-setting-cover-source list-item",onClick:function(){n.open(eO,{renderIconType:function(e){return null===e.id?"stop":"image"},isMulti:!1,list:c,activeIds:[a.id],onChange:function(e){r.changeCoverSource(e),n.close(eO.displayName)},onDialogClose:function(){n.close(eO.displayName)}})}},l.a.createElement("span",{className:"lake-table-view-setting-title"},_c("封面来源")),l.a.createElement("div",{className:"lake-table-view-setting-desc group-by"},l.a.createElement(JE,null,a.name),l.a.createElement(GE,{type:"arrowRight"}))),l.a.createElement("div",{className:"lake-table-h5editor-view-setting-cover-display list-item"},l.a.createElement("span",{className:"lake-table-view-setting-title"},_c("封面效果")),l.a.createElement(nO,{className:"view-setting-cover-display-radio",options:o,onChange:function(e){var t=e.value;r.changeCoverDisplay(t)},defaultValue:a.display})),l.a.createElement(PC,{defaultValue:i,onChange:function(e){return r.changeFieldNameShow(e)}}),l.a.createElement("hr",{className:"lake-table-h5editor-hr"}),l.a.createElement(MC,null))};IC.displayName="H5CardSettingAdapter";var FC=function(e){var t=Uw(),n=t.get(wC),r=t.get(CC),o=r.showFieldName,a=r.groupedColInKanban,i=r.groupColsInKanban;return yy(r.updated$.asObservable()),l.a.createElement(HC,{zIndex:e.zIndex,className:"lake-table-h5editor-kanban-setting",title:_c("看板配置"),onDialogClose:e.onDialogClose,visible:e.visible,maxHeight:65},l.a.createElement("div",{className:"lake-table-h5editor-view-setting-cover-source list-item",onClick:function(){null!=a&&a.name&&n.open(eO,{isMulti:!1,canChoseCancel:!1,list:i,activeIds:[null==a?void 0:a.id],onChange:function(e){e&&(r.changeKanbanGroupByCol(e),n.close(eO.displayName))},onDialogClose:function(){n.close(eO.displayName)}})}},l.a.createElement("span",{className:"lake-table-view-setting-title"},_c("分组依据")),l.a.createElement("div",{className:"lake-table-view-setting-desc group-by"},l.a.createElement(JE,{className:"group-by"},(null==a?void 0:a.name)||_c("暂无")),l.a.createElement(GE,{type:"arrowRight"}))),l.a.createElement(PC,{defaultValue:o,onChange:function(e){return r.changeFieldNameShow(e)}}),l.a.createElement("hr",{className:"lake-table-h5editor-hr"}),l.a.createElement(MC,null))};function BC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}FC.displayName="H5KanbanSettingAdapter",nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-ui-popup {\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n  background: var(--yq-bg-secondary);\n  pointer-events: none;\n  font-size: 1.143rem;\n}\n.lake-ui-popup :not(input) {\n  user-select: none;\n}\n@media screen and (orientation: landscape) {\n  .lake-ui-popup {\n    max-height: 90vh !important;\n  }\n}\n.lake-ui-popup.lake-ui-popup-center {\n  top: 50%;\n  left: 50%;\n  transform: translate3d(-50%, -50%, 0);\n}\n.lake-ui-popup.lake-ui-popup-bottom {\n  left: 0;\n  bottom: 0;\n  width: 100%;\n}\n.lake-ui-popup.lake-ui-popup-bottom.lake-ui-popup-round {\n  border-radius: 0.714rem 0.714rem 0 0;\n}\n.lake-ui-popup.lake-ui-popup-bottom-enter {\n  transform: translate3d(0, 0%, 0);\n  animation: popup-bottom-show-enter 0.25s cubic-bezier(0.73, -0.08, 0.58, 1);\n}\n.lake-ui-popup.lake-ui-popup-bottom-leave {\n  transform: translate3d(0, 100%, 0);\n  animation: popup-bottom-show-leave 0.25s ease-out;\n}\n.lake-ui-popup .lake-ui-popup-header {\n  position: relative;\n  height: 3.714rem;\n  line-height: 3.714rem;\n}\n.lake-ui-popup .lake-ui-popup-header .lake-ui-popup-header-title {\n  text-align: center;\n  margin-bottom: 0;\n  font-size: 1.143rem;\n  position: relative;\n}\n.lake-ui-popup .lake-ui-popup-header .lake-ui-popup-header-title::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: 1px;\n  width: 100%;\n  transform: scaleY(0.5);\n  transform-origin: 0 0;\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-ui-popup .lake-ui-popup-header .popup-close-icon {\n  position: absolute;\n  right: 1.143rem;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 1.429rem;\n  color: var(--yq-icon-secondary);\n}\n.lake-ui-popup .lake-ui-popup-content {\n  padding: 0.714rem 1.286rem;\n  pointer-events: auto;\n  position: relative;\n  flex: 1;\n  overflow-y: scroll;\n  overflow-x: hidden;\n}\n.lake-ui-popup .lake-ui-popup-footer {\n  pointer-events: auto;\n}\n@keyframes popup-bottom-show-enter {\n  0% {\n    transform: translate3d(0, 100%, 0);\n  }\n  100% {\n    transform: translate3d(0, 0%, 0);\n  }\n}\n@keyframes popup-bottom-show-leave {\n  0% {\n    transform: translate3d(0, 0%, 0);\n  }\n  100% {\n    transform: translate3d(0, 100%, 0);\n  }\n}\n");var VC=function(e){return e.showCloseIcon||e.title?l.a.createElement("div",{className:"lake-ui-popup-header"},e.title&&l.a.createElement("h1",{className:"lake-ui-popup-header-title"},e.title),e.showCloseIcon&&l.a.createElement(GE,{className:"popup-close-icon",type:"close",onClick:e.onClose})):null},HC=function(e){var t=e.title,n=e.showCloseIcon,r=e.hasMask,o=e.zIndex,a=e.position,i=e.round,c=e.onDialogClose,u=e.style,d=e.maxHeight,f=e.children,p=e.visible,h=e.footer,m=e.className,v=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BC(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({zIndex:o,maxHeight:d+"vh"},u&&u);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ZE,{zIndex:o,maskClick:function(){null==c||c()},hasMask:!!r,visible:p}),l.a.createElement("div",{className:S()("lake-ui-popup",i&&"lake-ui-popup-round","lake-ui-popup-".concat(a),"lake-ui-popup-".concat(a,p?"-enter":"-leave"),m),style:v},l.a.createElement(VC,{title:t,onClose:function(){null==c||c()},showCloseIcon:!!n}),l.a.createElement("div",{className:S()("lake-ui-popup-content")},f),function(){if(h)return l.a.createElement("div",{className:"lake-ui-popup-footer"},null==h?void 0:h())}()))};HC.defaultProps={hasMask:!0,position:"bottom",round:!0,showCloseIcon:!0,maxHeight:90,zIndex:1004},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-h5-editor-table-filter-condition .lake-h5-table-list .lake-h5-table-list-item,\n.lake-h5-editor-table-filter-val-mention .lake-h5-table-list .lake-h5-table-list-item,\n.lake-h5-editor-table-filter-val-sel .lake-h5-table-list .lake-h5-table-list-item {\n  position: relative;\n  display: flex;\n  align-items: center;\n  list-style: none;\n  border-bottom: 1px solid var(--yq-border-light);\n  padding: 1.143rem 0;\n}\n.lake-h5-editor-table-filter-condition .lake-h5-table-list .lake-h5-table-list-item:last-child,\n.lake-h5-editor-table-filter-val-mention .lake-h5-table-list .lake-h5-table-list-item:last-child,\n.lake-h5-editor-table-filter-val-sel .lake-h5-table-list .lake-h5-table-list-item:last-child {\n  border-bottom: none;\n}\n.lake-h5-editor-table-filter-condition .lake-h5-table-list .lake-h5-table-list-item .lake-icon,\n.lake-h5-editor-table-filter-val-mention .lake-h5-table-list .lake-h5-table-list-item .lake-icon,\n.lake-h5-editor-table-filter-val-sel .lake-h5-table-list .lake-h5-table-list-item .lake-icon {\n  font-size: 1.429rem;\n}\n.lake-h5-editor-table-filter-condition .lake-h5-table-list .lake-h5-table-list-item .lake-h5-table-list-item-desc,\n.lake-h5-editor-table-filter-val-mention .lake-h5-table-list .lake-h5-table-list-item .lake-h5-table-list-item-desc,\n.lake-h5-editor-table-filter-val-sel .lake-h5-table-list .lake-h5-table-list-item .lake-h5-table-list-item-desc {\n  font-size: 1.143rem;\n  margin: 0 0.571rem;\n}\n.lake-h5-editor-table-filter-condition .lake-h5-table-list .lake-h5-table-list-item .lake-h5-table-list-item-checked,\n.lake-h5-editor-table-filter-val-mention .lake-h5-table-list .lake-h5-table-list-item .lake-h5-table-list-item-checked,\n.lake-h5-editor-table-filter-val-sel .lake-h5-table-list .lake-h5-table-list-item .lake-h5-table-list-item-checked {\n  position: absolute;\n  right: 0;\n  top: 50%;\n  transform: translateY(-50%);\n}\n");var zC=function(e){var t=e.list,n=e.activeItem,r=e.zIndex,o=e.onDialogClose,a=e.visible,c=e.onChange,s=Object(i.useState)(n.func),u=ie()(s,2),d=u[0],f=u[1];return Object(i.useEffect)((function(){f(n.func)}),[n.func]),l.a.createElement(HC,{zIndex:r,className:"lake-h5-editor-table-filter-condition",title:_c("请选择"),onDialogClose:o,visible:a,maxHeight:50},l.a.createElement("div",{className:"lake-h5-table-list"},!!t.length&&t.map((function(e){var t=d===e.func;return l.a.createElement("li",{key:e.func,className:"lake-h5-table-list-item",onClick:function(){return function(e){f(e.func),c(e),o()}(e)}},l.a.createElement(JE,{className:"lake-h5-table-list-item-desc"},e.text),t&&l.a.createElement(GE,{type:"success",className:"lake-h5-table-list-item-checked"}))}))))};zC.displayName="H5FilterCondition";var qC=function(e){var t=e.isMulti,n=e.list,r=e.activeIds,o=e.zIndex,a=e.onDialogClose,c=e.visible,s=e.onChange,u=Object(i.useState)(r),d=ie()(u,2),f=d[0],p=d[1];return Object(i.useEffect)((function(){p(r)}),[r]),l.a.createElement(HC,{zIndex:o,className:"lake-h5-editor-table-filter-val-sel",title:_c("请选择"),onDialogClose:a,visible:c,maxHeight:50},l.a.createElement("div",{className:"lake-h5-table-list"},!n.length&&l.a.createElement(tC,{desc:_c("暂无选项")}),!!n.length&&n.map((function(e){var n=f.includes(e.id);return l.a.createElement("li",{className:"lake-h5-table-list-item",onClick:function(){return function(e){var n,r=e.id;n=f.includes(r)?f.filter((function(e){return e!==r})):t?[].concat(me()(f),[r]):[r],p(n),s(n)}(e)},key:e.id},l.a.createElement(oC,{option:e}),n&&l.a.createElement(GE,{type:"success",className:"lake-h5-table-list-item-checked"}))}))))};qC.displayName="H5FilterSelectVal";var UC=function(e){var t=e.list,n=e.activeIds,r=e.zIndex,o=e.onDialogClose,a=e.visible,c=e.onChange,s=Object(i.useState)(n),u=ie()(s,2),d=u[0],f=u[1];return Object(i.useEffect)((function(){f(n)}),[n]),l.a.createElement(HC,{zIndex:r,className:"lake-h5-editor-table-filter-val-mention",title:_c("请选择"),onDialogClose:o,visible:a,maxHeight:80},l.a.createElement("div",{className:"lake-h5-table-list"},!t.length&&l.a.createElement(tC,{desc:_c("暂无人员")}),!!t.length&&t.map((function(e){var t=d.includes(e.id);return l.a.createElement("li",{className:"lake-h5-table-list-item",onClick:function(){return function(e){var t,n=e.id;t=d.includes(n)?d.filter((function(e){return e!==n})):[].concat(me()(d),[n]),f(t),c(t)}(e)},key:e.id},l.a.createElement(lC,{mention:e}),t&&l.a.createElement(GE,{type:"success",className:"lake-h5-table-list-item-checked"}))}))))};function GC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}UC.displayName="H5FilterMentionVal",nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-h5-table-confirm {\n  position: fixed;\n  left: 0;\n  bottom: 2.429rem;\n  width: 100%;\n  max-height: 90vh;\n  z-index: 1004;\n  padding: 0 0.571rem;\n  font-size: 1.143rem;\n}\n.lake-h5-table-confirm .lake-h5-table-confirm-content {\n  background-color: var(--yq-bg-primary);\n  border-radius: 0.857rem;\n  text-align: center;\n  padding: 0 1.429rem;\n}\n.lake-h5-table-confirm .lake-h5-table-confirm-content .lake-h5-table-confirm-option {\n  padding: 1.286rem 0;\n  border-bottom: 1px solid var(--yq-border-light);\n  margin-bottom: 0;\n}\n.lake-h5-table-confirm .lake-h5-table-confirm-content .lake-h5-table-confirm-option:last-child {\n  border-bottom: none;\n}\n.lake-h5-table-confirm .lake-h5-table-confirm-footer {\n  text-align: center;\n  padding: 1.286rem 0;\n  margin-top: 0.857rem;\n  border-radius: 0.857rem;\n  background-color: var(--yq-bg-primary);\n}\n.lake-h5-table-confirm.lake-ui-confirm-bottom-enter {\n  transform: translate3d(0, 0%, 0);\n  animation: confirm-bottom-show-enter 0.2s cubic-bezier(0.73, -0.08, 0.58, 1);\n}\n.lake-h5-table-confirm.lake-ui-confirm-bottom-leave {\n  bottom: 0;\n  transform: translate3d(0, 100%, 0);\n  animation: confirm-bottom-show-leave 0.2s ease-out;\n}\n@keyframes confirm-bottom-show-enter {\n  0% {\n    transform: translate3d(0, 100%, 0);\n  }\n  100% {\n    transform: translate3d(0, 0%, 0);\n  }\n}\n@keyframes confirm-bottom-show-leave {\n  0% {\n    transform: translate3d(0, 0%, 0);\n  }\n  100% {\n    transform: translate3d(0, 100%, 0);\n  }\n}\n");var WC=function(e){var t=e.options,n=e.zIndex,r=e.onDialogClose,o=e.style,a=e.className,i=e.visible,c=e.hasMask,u=e.onCancel,d=e.onChange,f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GC(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({zIndex:n,maxHeight:"90vh"},o&&o);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ZE,{zIndex:n,maskClick:function(){null==r||r()},hasMask:!!c,visible:i}),l.a.createElement("div",{className:S()("lake-h5-table-confirm",i?"lake-ui-confirm-bottom-enter":"lake-ui-confirm-bottom-leave",a),style:f},l.a.createElement("div",{className:"lake-h5-table-confirm-content"},t.map((function(e){return l.a.createElement("p",{className:"lake-h5-table-confirm-option",onClick:function(){return d(e)},key:e.value},e.label)}))),l.a.createElement("div",{className:"lake-h5-table-confirm-footer",onClick:u},_c("取消"))))};WC.defaultProps={hasMask:!0},WC.displayName="H5Confirm",nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-h5editor-table-filter .lake-ui-popup-content {\n  padding: 0 1.143rem;\n  padding-top: 0.786rem;\n  padding-bottom: 1.339rem;\n}\n.lake-h5editor-table-filter .add-filter-data-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  margin-bottom: 3.571rem;\n  height: 3.143rem;\n  font-size: 1.143rem;\n}\n.lake-h5editor-table-filter .lake-h5editor-table-filter-item {\n  margin-bottom: 3.143rem;\n}\n.lake-h5editor-table-filter .lake-h5editor-table-filter-item .lake-h5-table-filter-where {\n  font-size: 1.143rem;\n  margin-bottom: 0.857rem;\n  margin-left: 0.857rem;\n  width: 5.714rem;\n}\n.lake-h5editor-table-filter .lake-h5editor-table-filter-item .lake-h5-table-filter-where.option {\n  margin-left: 0;\n}\n.lake-h5editor-table-filter .lake-h5editor-table-filter-item .filter-item-content {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.lake-h5editor-table-filter .lake-h5editor-table-filter-item .filter-item-content .filter-item-content-inner {\n  width: calc(100% - 2.571rem);\n}\n.lake-h5editor-table-filter .lake-h5editor-table-filter-item .filter-item-content .filter-item-content-inner .filter-item-content-inner-condition {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-h5editor-table-filter .lake-h5editor-table-filter-item .filter-item-content .filter-item-content-inner .lake-h5-table-filter-col-val-wrapper {\n  margin-top: 0.857rem;\n}\n.lake-h5editor-table-filter .lake-h5editor-table-filter-item .filter-item-content .filter-item-content-inner .lake-h5-table-filter-col-val-wrapper .lake-h5-table-filter-val-input {\n  height: 3.143rem;\n  background-color: var(--yq-bg-primary);\n  border: 1px solid var(--yq-border-primary);\n  padding-left: 1.143rem;\n  border-radius: 0.571rem;\n}\n.lake-h5editor-table-filter .lake-h5editor-table-filter-item .filter-item-content .filter-item-content-inner .lake-h5-table-filter-col-val-wrapper .lake-h5-table-filter-val-input input {\n  font-size: 1.143rem;\n}\n.lake-h5editor-table-filter .lake-h5editor-table-filter-item .filter-item-content .filter-item-content-inner .lake-h5-table-filter-col-val-wrapper .lake-h5-condition-val-list-sel {\n  width: 100%;\n}\n.lake-h5editor-table-filter .lake-h5editor-table-filter-item .filter-item-content .filter-item-content-inner .lake-h5-table-filter-col-val-wrapper .lake-h5-condition-val-list-sel .lake-h5-condition-placeholder {\n  color: var(--yq-text-disable);\n}\n.lake-h5editor-table-filter .lake-h5editor-table-filter-item .filter-item-content .filter-item-content-inner .lake-h5-table-filter-col-val-wrapper .lake-h5-condition-val-list-sel .lake-h5-condition-val-list-item {\n  font-size: 1.143rem;\n  margin-right: 0.286rem;\n  margin-bottom: 0.286rem;\n}\n.lake-h5editor-table-filter .lake-h5editor-table-filter-item .filter-item-content .filter-item-content-inner .lake-h5-table-filter-col-val-wrapper .lake-h5-condition-val-list-member .lake-h5-condition-val-list-member-item {\n  margin-right: 0.429rem;\n  margin-top: 0.429rem;\n}\n.lake-h5editor-table-filter .lake-h5editor-table-filter-item .filter-item-content .filter-close {\n  font-size: 1.429rem;\n}\n");var YC=jC.defaultFilterWhereOptions,$C=function(e){var t=Uw(),n=t.get(CC),r=t.get(wC),o=n.filteredCol,a=n.filterCols,c=Object(i.useState)(o),s=ie()(c,2),u=s[0],d=s[1];yy(n.updated$.asObservable());var f=!u||!u.options||0===u.options.length;Object(i.useEffect)((function(){e.visible&&d(o)}),[e.visible]);var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",r=arguments.length>2?arguments[2]:void 0,o=n.updateFilterOption(u,e,t,r);d(o)},h=function(){r.open(WC,{options:YC,onCancel:function(){r.close(WC.displayName)},onChange:function(e){var t,o;t=e.value,o=n.updateFilterOperator(u,t),d(o),r.close(WC.displayName)},onDialogClose:function(){r.close(WC.displayName)}})};return l.a.createElement(HC,{zIndex:e.zIndex,className:"lake-h5editor-table-filter",title:_c("筛选"),onDialogClose:e.onDialogClose,visible:e.visible,style:{height:f?"auto":"80vh"}},f?l.a.createElement(tC,{desc:_c("你还未进行任何筛选"),className:"no-data"}):l.a.createElement(l.a.Fragment,null,u.options.map((function(e,t){var o,i=e.id,c=n.getColById(i)||a[0],s=kf[c.type],f=wf.filter((function(e){return e.type===s})),m=f.filter((function(t){return t.func===e.func}))[0]||f[0],v=0===t?_c("当"):null===(o=YC.filter((function(e){return e.value===(null==u?void 0:u.operator)}))[0])||void 0===o?void 0:o.label;return c?l.a.createElement("div",{className:"lake-h5editor-table-filter-item",key:t},0===t?l.a.createElement("div",{className:"lake-h5-table-filter-where"},_c("当")):l.a.createElement(JC,{className:"lake-h5-table-filter-where option",text:v,onClick:h,border:!1}),l.a.createElement("div",{className:"filter-item-content"},l.a.createElement("div",{className:"filter-item-content-inner"},l.a.createElement("div",{className:"filter-item-content-inner-condition"},l.a.createElement(JC,{prefixIcon:c.type,style:{width:"60%"},className:"lake-h5-table-filter-col",text:c.name,onClick:function(){return function(e,t){r.open(eO,{list:a,activeIds:[t.id],onChange:function(t){p(e,"id",t),r.close(eO.displayName)},onDialogClose:function(){r.close(eO.displayName)}})}(t,c)}}),s&&l.a.createElement(JC,{style:{width:"35%"},className:"lake-h5-table-filter-condition",text:m.text,onClick:function(){return function(e,t,n){r.open(zC,{list:t,activeItem:n,onChange:function(t){p(e,"func",t.func)},onDialogClose:function(){r.close(zC.displayName)}})}(t,f,m)}})),l.a.createElement("div",{className:"lake-h5-table-filter-col-val-wrapper"},function(e,t,o){var a=e.type;if("date"===e.type)return null;if(xf.includes(t.func))return null;if(e.type===Ac.SELECT||e.type===Ac.MULTI_SELECT){var i=[];t.expected&&(i=Array.isArray(t.expected)?t.expected:[t.expected]);var c=e.options,s=c.filter((function(e){return i.includes(e.id)}));return l.a.createElement(JC,{autoWrap:!0,className:"lake-h5-condition-val-list-sel",onClick:function(){return function(e,t,n,o){r.open(qC,{isMulti:e.type===Ac.MULTI_SELECT,list:n,activeIds:o,onChange:function(n){return n&&0!==n.length?e.type===Ac.SELECT?(p(t,"expected",n[0]),void r.close(qC.displayName)):void p(t,"expected",n):(p(t,"expected",""),void r.close(qC.displayName))},onDialogClose:function(){r.close(qC.displayName)}})}(e,o,c,i)}},!s.length&&l.a.createElement("span",{className:"lake-h5-condition-placeholder"},_c("请选择")),!!s.length&&s.map((function(e){return l.a.createElement(oC,{key:e.id,className:"lake-h5-condition-val-list-item",option:e})})))}if(e.type===Ac.CHECKBOX)return l.a.createElement("span",{className:"lake-h5-table-filter-checkbox lake-h5-table-filter-col-val"},l.a.createElement(oO,{defaultChecked:!0===t.expected,onChange:function(e){p(o,"expected",e)}}));if(Pc.includes(a)){var u=n.getMemberDataByCol(e),d=t.expected||[],f={};u.forEach((function(e){f[e.id]=e}));var h=u.filter((function(e){return d.includes(e.id)}));return l.a.createElement(JC,{autoWrap:!0,className:"lake-h5-condition-val-list-member",onClick:function(){!function(e,t,n,o){r.open(UC,{list:t,activeIds:n,onChange:function(t){var n=t.map((function(e){return o[e]}));n.sort((function(e,t){return e.name.localeCompare(t.name)})),p(e,"expected",0===t.length?"":n.map((function(e){return e.id})))},onDialogClose:function(){r.close(UC.displayName)}})}(o,u,d,f)}},h.map((function(e){return l.a.createElement(lC,{className:"lake-h5-condition-val-list-member-item",key:e.id,mention:e})})))}return l.a.createElement(_t.e,{className:"lake-h5-table-filter-val-input",placeholder:_c("请输入筛选条件"),defaultValue:t.expected||"",onChange:function(e){p(o,"expected",e)},style:{width:"100%"}})}(c,e,t))),l.a.createElement(GE,{type:"delete",className:"filter-close",onClick:function(){!function(e){var t=n.removeFilterOption(u,e);d(t)}(t)}}))):null}))),l.a.createElement(_t.a,{onClick:function(){return e=n.addFilter(u),void d(e);var e},color:f?"primary":"default",className:"add-filter-data-btn"},!f&&l.a.createElement(GE,{type:"plus"}),l.a.createElement("span",{className:"add-filter-data-btn-desc"},_c("添加筛选条件"))))};$C.displayName="H5FilterAdapter",nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-h5-editor-table-group {\n  padding-bottom: 3.482rem;\n}\n.lake-h5-editor-table-group .no-data-btn,\n.lake-h5-editor-table-group .del-btn {\n  font-size: 1.143rem;\n  height: 3.143rem;\n  width: 100%;\n  border-radius: 0.571rem;\n}\n.lake-h5-editor-table-group .lake-h5-editor-table-group-tip {\n  font-size: 1.143rem;\n  color: var(--yq-text-caption);\n}\n.lake-h5-editor-table-group .lake-h5-table-filter-col {\n  margin: 0.857rem 0;\n}\n.lake-h5-editor-table-group .table-group-display-radio {\n  width: 100%;\n  height: 3.143rem;\n  font-size: 1.143rem;\n  margin-bottom: 1.714rem;\n}\n.lake-h5-editor-table-group .del-btn {\n  margin-top: 1.714rem;\n  border: none;\n}\n.lake-h5-editor-table-group .del-btn .del-icon {\n  margin-right: 0.571rem;\n}\n");var KC=function(e){var t=Uw(),n=t.get(CC),r=t.get(wC),o=n.groupColsInGrid,a=n.groupedColInGrid;yy(n.updated$.asObservable());var i=function(e){a&&(e.type&&n.updateGridGroupByCol("type",e.type),e.colId&&n.updateGridGroupByCol("id",e.colId))};return l.a.createElement(HC,{zIndex:e.zIndex,className:"lake-h5-editor-table-group",title:_c("分组"),onDialogClose:e.onDialogClose,visible:e.visible,maxHeight:80},function(){var e;if(!a)return l.a.createElement(l.a.Fragment,null,l.a.createElement(tC,{desc:_c("你还未进行任何分组"),className:"no-data"}),l.a.createElement(_t.a,{onClick:function(){n.addGridGroupByCol(undefined)},color:"success",className:"no-data-btn"},_c("添加分组条件")));var t=null===(e=o.filter((function(e){return e.id===a.id}))[0])||void 0===e?void 0:e.name,c=n.getSortTextByColId(a.id);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"lake-h5-editor-table-group-tip"},_c("按以下选项进行分组")),l.a.createElement(JC,{className:"lake-h5-table-filter-col",text:t,onClick:function(){return e=a.id,void r.open(eO,{list:o,activeIds:[e],onChange:function(e){i({colId:e}),r.close(eO.displayName)},onDialogClose:function(){r.close(eO.displayName)}});var e}}),l.a.createElement(nO,{className:"table-group-display-radio",options:c,onChange:function(e){return i({type:e.value})},defaultValue:a.type}),l.a.createElement(_t.a,{onClick:function(){n.delGridGroupByCol()},className:"del-btn"},l.a.createElement(GE,{type:"delete",className:"del-icon"}),_c("删除该条件")))}())};function XC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XC(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}KC.displayName="H5GroupAdapter",nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-h5-editor-table-sort {\n  padding-bottom: 3.482rem;\n}\n.lake-h5-editor-table-sort .lake-ui-popup-content {\n  padding-top: 1.286rem;\n}\n.lake-h5-editor-table-sort .no-data-btn,\n.lake-h5-editor-table-sort .del-btn {\n  font-size: 1.143rem;\n  height: 3.143rem;\n  width: 100%;\n  border-radius: 0.571rem;\n}\n.lake-h5-editor-table-sort .lake-h5-editor-table-sort-tip {\n  font-size: 1.143rem;\n  color: var(--yq-text-caption);\n}\n.lake-h5-editor-table-sort .lake-h5-table-filter-col {\n  margin: 0.857rem 0;\n}\n.lake-h5-editor-table-sort .table-sort-display-radio {\n  width: 100%;\n  height: 3.143rem;\n  font-size: 1.143rem;\n  margin-bottom: 1.714rem;\n}\n.lake-h5-editor-table-sort .lake-table-h5editor-sort-auto {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.lake-h5-editor-table-sort .del-btn {\n  margin-top: 1.714rem;\n  border: none;\n}\n.lake-h5-editor-table-sort .del-btn .del-icon {\n  margin-right: 0.571rem;\n}\n.lake-h5-editor-table-sort .sort-confirm {\n  padding: 0.714rem 0;\n  width: 100%;\n  margin-top: 2.071rem;\n  font-size: 1.143rem;\n  border-radius: 0.571rem;\n  transition: height 0.2s ease-in;\n}\n");var QC=function(e){var t=Uw(),n=t.get(CC),r=n.sortedCol,o=n.sortCols,a=t.get(wC);yy(n.updated$.asObservable());var c=!r||!r.options||!r.options[0],s=Object(i.useState)(!c),u=ie()(s,2),d=u[0],f=u[1],p=Object(i.useState)(r),h=ie()(p,2),m=h[0],v=h[1];Object(i.useEffect)((function(){f(!c),v(r)}),[e.visible,r]);var g=function(e){if(m){if(void 0!==e.del)return n.updateSortByCol("del",e.del),void f(!1);var t=ZC(ZC({},m),e);(e.id||e.type)&&(t={auto:m.auto,options:[ZC(ZC({},m.options[0]),e)]}),v(t),(m.auto||void 0!==e.auto)&&n.submitSortCol(t)}};return l.a.createElement(HC,{zIndex:e.zIndex,className:"lake-h5-editor-table-sort",title:_c("排序"),onDialogClose:e.onDialogClose,visible:e.visible},function(){if(!d)return l.a.createElement(l.a.Fragment,null,l.a.createElement(tC,{desc:_c("你还未进行任何排序"),className:"no-data"}),l.a.createElement(_t.a,{onClick:function(){return function(){f(!0);var e=o[0].id,t=n.getNewSort({},e);v(t)}()},color:"success",className:"no-data-btn"},l.a.createElement(GE,{type:"plus"}),_c("添加排序条件")));var e=m.options[0].id,t=o.filter((function(t){return t.id===e}))[0]||{},r=n.getSortTextByColId(e),i=Boolean(m.auto);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"lake-h5-editor-table-sort-tip"},_c("按以下选项进行排序")),l.a.createElement(JC,{prefixIcon:t.type,className:"lake-h5-table-filter-col",text:t.name,onClick:function(){return t=e,void a.open(eO,{list:o,activeIds:[t],onChange:function(e){g({id:e}),a.close(eO.displayName)},onDialogClose:function(){a.close(eO.displayName)}});var t}}),l.a.createElement(nO,{className:"table-sort-display-radio",options:r,onChange:function(e){return g({type:e.value})},defaultValue:m.options[0].type}),l.a.createElement("div",{className:"lake-table-h5editor-sort-auto list-item"},l.a.createElement("span",{className:"lake-table-view-setting-title"},_c("保持排序")),l.a.createElement(rO,{className:"lake-table-h5editor-sort-checkbox",checked:i,onChange:function(e){return g({auto:e})}})),l.a.createElement(_t.a,{onClick:function(){m&&(n.submitSortCol(m),a.closeAll())},color:"success",className:"sort-confirm",style:{opacity:i?0:1}},_c("确定")),l.a.createElement(_t.a,{onClick:function(){c?a.closeAll():g({del:!0})},className:"del-btn"},l.a.createElement(GE,{type:"delete",className:"del-icon"}),_c("删除该条件")))}())};QC.displayName="H5SortAdapter",nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-h5-select-bar {\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  height: 3.143rem;\n  padding: 0.786rem 0.857rem;\n  background: var(--yq-bg-primary);\n  border-radius: 0.571rem;\n  padding-right: 2.143rem;\n  overflow: hidden;\n}\n.lake-h5-select-bar.lake-h5-select-bar-has-border {\n  border: 1px solid var(--yq-border-primary);\n}\n.lake-h5-select-bar.lake-h5-select-bar-auto-wrap {\n  height: auto;\n  min-height: 3.143rem;\n  flex-flow: wrap;\n}\n.lake-h5-select-bar:hover {\n  background-color: var(--yq-bg-primary-hover);\n}\n.lake-h5-select-bar .lake-icon {\n  font-size: 1.429rem;\n}\n.lake-h5-select-bar .prefix-icon {\n  margin-right: 0.571rem;\n}\n.lake-h5-select-bar-text {\n  font-size: 1.143rem;\n}\n.lake-h5-select-bar .arrow-down {\n  position: absolute;\n  right: 0.857rem;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 1.429rem;\n  color: var(--yq-text-caption);\n  margin-left: 0.071rem;\n}\n");var JC=function(e){var t=e.text,n=void 0===t?"":t,r=e.prefixIcon,o=void 0===r?"":r,a=e.className,i=e.style,c=void 0===i?{}:i,s=e.border,u=e.children,d=e.autoWrap;return l.a.createElement("div",{className:S()("lake-h5-select-bar",s&&"lake-h5-select-bar-has-border",d&&"lake-h5-select-bar-auto-wrap",a),onClick:e.onClick,style:c},o&&l.a.createElement(GE,{type:o,className:"prefix-icon"}),u||l.a.createElement(JE,{className:"lake-h5-select-bar-text"},n),l.a.createElement(GE,{type:"arrowDownMini",className:"arrow-down"}))};JC.defaultProps={border:!0,autoWrap:!1},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-h5-editor-table-popup-col {\n  min-height: 20.714rem;\n}\n.lake-h5-editor-table-popup-col .lake-h5-table-list li.lake-h5-table-list-item {\n  position: relative;\n  display: flex;\n  align-items: center;\n  list-style: none;\n  border-bottom: 1px solid var(--yq-border-light);\n  padding: 1.143rem 0;\n}\n.lake-h5-editor-table-popup-col .lake-h5-table-list li.lake-h5-table-list-item:last-child {\n  border-bottom: none;\n}\n.lake-h5-editor-table-popup-col .lake-h5-table-list li.lake-h5-table-list-item .lake-icon {\n  font-size: 1.429rem;\n}\n.lake-h5-editor-table-popup-col .lake-h5-table-list li.lake-h5-table-list-item .lake-h5-table-list-item-desc {\n  font-size: 1.143rem;\n  margin-left: 0.571rem;\n  margin-right: 1.875rem;\n}\n.lake-h5-editor-table-popup-col .lake-h5-table-list li.lake-h5-table-list-item .lake-h5-table-list-item-checked {\n  position: absolute;\n  right: 0;\n  top: 50%;\n  transform: translateY(-50%);\n}\n");var eO=function(e){var t=e.isMulti,n=e.list,r=e.activeIds,o=e.zIndex,a=e.onDialogClose,c=e.visible,s=e.onChange,u=e.className,d=e.canChoseCancel,f=void 0===d||d,p=e.renderIconType,h=Object(i.useState)(r),m=ie()(h,2),v=m[0],g=m[1];return Object(i.useEffect)((function(){g(r)}),[r]),l.a.createElement(HC,{zIndex:o,className:S()("lake-h5-editor-table-popup-col",u),title:_c("请选择"),onDialogClose:a,visible:c,maxHeight:50},l.a.createElement("div",{className:"lake-h5-table-list"},!!n.length&&n.map((function(e){var n=v.includes(e.id);return l.a.createElement("li",{className:"lake-h5-table-list-item",onClick:function(){return function(e){var n,r=e.id;n=v.includes(r)?f?v.filter((function(e){return e!==r})):v:t?[].concat(me()(v),[r]):[r],g(n),s(t?n:n[0])}(e)},key:e.id},l.a.createElement(GE,{type:(null==p?void 0:p(e))||e.type}),l.a.createElement(JE,{className:"lake-h5-table-list-item-desc"},e.name),n&&l.a.createElement(GE,{type:"success",className:"lake-h5-table-list-item-checked"}))}))))};function tO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}eO.displayName="H5PopUpCol",eO.defaultProps={isMulti:!1},nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-h5-switch-group {\n  background: var(--yq-bg-tertiary);\n  height: 100%;\n  padding: 0.143rem;\n  border-radius: 0.571rem;\n  display: flex;\n  align-items: center;\n}\n.lake-h5-switch-group .lake-h5-switch-group-item {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 50%;\n  height: 100%;\n  line-height: 100%;\n  vertical-align: bottom;\n  border-radius: 0.429rem;\n  color: var(--yq-text-body);\n}\n.lake-h5-switch-group .lake-h5-switch-group-item.active {\n  background: var(--yq-bg-primary-hover);\n  color: var(--yq-text-primary);\n  box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.08), 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 8px 1px rgba(0, 0, 0, 0.02);\n}\n");var nO=function(e){var t=e.options,n=e.className,r=e.style,o=e.onChange,a=e.defaultValue,c=Object(i.useState)(a),u=ie()(c,2),d=u[0],f=u[1],p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tO(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r&&r);return Array.isArray(t)&&2===t.length||console.error("options length is valid!"),l.a.createElement("div",{style:p,className:S()("lake-h5-switch-group",n)},t.map((function(e){return l.a.createElement("div",{key:e.value,className:S()("lake-h5-switch-group-item",d===e.value&&"active"),onClick:function(){return f((t=e).value),void o(t);var t}},l.a.createElement("span",{className:"lake-h5-switch-group-item-desc"},e.label))})))};nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-h5-switch {\n  --checked-color: var(--yq-yuque-green-6);\n}\n");var rO=function(e){return l.a.createElement(_t.i,a()({},e,{className:S()("lake-h5-switch",e.className)}))};nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-h5-checkbox {\n  --adm-color-primary: var(--yq-yuque-green-6);\n}\n");var oO=function(e){return l.a.createElement(_t.b,a()({},e,{className:S()("lake-h5-checkbox",e.className)}))};nc(".lake-h5-table-toolbar {\n  box-sizing: border-box;\n  padding: 1.143rem;\n  height: 3.571rem;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n}\n.lake-h5-table-toolbar .lake-table-toolbar-inner {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.lake-h5-table-toolbar .lake-table-toolbar-inner-l {\n  max-width: 10.714rem;\n}\n.lake-h5-table-toolbar .lake-table-toolbar-inner-r {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-h5-table-toolbar .lake-table-toolbar-item {\n  display: flex;\n  align-items: center;\n  margin-right: 0.607rem;\n  border-radius: 0.286rem;\n  padding: 0.268rem 0.321rem;\n}\n.lake-h5-table-toolbar .lake-table-toolbar-item:last-child {\n  margin-right: 0;\n}\n.lake-h5-table-toolbar .lake-table-toolbar-item .lake-table-toolbar-item-name {\n  display: none;\n}\n.lake-h5-table-toolbar .lake-table-toolbar-item.toolbar-item-view-manage {\n  display: flex;\n  align-items: center;\n  margin-right: 0;\n}\n.lake-h5-table-toolbar .lake-table-toolbar-item.toolbar-item-view-manage .lake-table-toolbar-item-name {\n  display: inline-block;\n  margin-left: 0.286rem;\n  font-size: 1.143rem;\n  line-height: 1.429rem;\n}\n.lake-h5-table-toolbar .lake-table-toolbar-item.toolbar-item-view-manage .lake-icon-dropdown-arrow {\n  margin-left: 0;\n}\n.lake-h5-table-toolbar .lake-table-toolbar-item .lake-icon {\n  font-size: 1.143rem;\n}\n");var aO=function(){var e,t,n,r,o,c=Uw(),u=c.get(uC),d=c.get(AC),f=c.get(wC),p=by(c.get($E).curViewType),h=function(e){var t=[];return"GRID"===e?t=[LE,DE,PE,ME,NE,IE]:"KANBAN"===e?t=[LE,VE,PE,NE,IE]:"CARD"===e&&(t=[LE,HE,PE,NE,IE]),function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign(zE,n),o=[],a=AE(t);try{for(a.s();!(e=a.n()).done;){var i=e.value,l=r[i];o.push(jE(jE({},l),{},{type:i}))}}catch(e){a.e(e)}finally{a.f()}return o}(t)}(p),m=Object(i.useMemo)((function(){return h.filter((function(e){return"left"===e.position}))}),[p]),v=Object(i.useMemo)((function(){return h.filter((function(e){return"right"===e.position}))}),[p]),g=function(e){var t,n=(s()(t={},LE,DC),s()(t,DE,NC),s()(t,HE,IC),s()(t,VE,FC),s()(t,ME,KC),s()(t,PE,$C),s()(t,NE,QC),t);e===IE?d.show():n[e]&&f.open(n[e])},b=u.Button,y=(n=by((t=Uw().get(CC)).hasFiltered),r=by(t.hasGrouped),o=by(t.hasSorted),s()(e={},PE,n),s()(e,ME,r),s()(e,NE,o),e),w=function(e){return e.map((function(e){return l.a.createElement(b,a()({},e,{onCommand:g,key:e.type,isActive:!(null==y||!y[e.type])}))}))};return l.a.createElement("div",{className:"lake-h5-table-toolbar"},l.a.createElement("div",{className:"lake-table-toolbar-inner"},l.a.createElement("div",{className:"lake-table-toolbar-inner-l"},w(m)),l.a.createElement("div",{className:"lake-table-toolbar-inner-r"},w(v))))};function iO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iO(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-h5editor-table-search-bar {\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  height: 3.571rem;\n  padding: 0.5rem 1.143rem;\n  background: var(--yq-bg-primary);\n}\n.lake-h5editor-table-search-bar .lake-h5editor-table-search-cancel {\n  display: inline-block;\n  font-size: 1rem;\n  white-space: nowrap;\n  margin-left: 1.143rem;\n  color: var(--yq-text-primary);\n}\n.lake-h5editor-table-search-bar .lake-h5editor-table-search-icon {\n  position: absolute;\n  left: 1.714rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: var(--yq-text-caption);\n}\n.lake-h5editor-table-search-bar .lake-h5editor-table-search {\n  background-color: var(--yq-bg-tertiary);\n  border-radius: 0.429rem;\n  padding: 0 0.571rem;\n  height: 2.571rem;\n}\n.lake-h5editor-table-search-bar .lake-h5editor-table-search input {\n  line-height: 2.571rem;\n  height: 2.571rem;\n  padding-left: 2.143rem;\n}\n");var cO=function(e){var t=e.visible,n=e.onCancel,r=e.onClear,o=e.onSearch,a=e.className,c=e.style,s=Object(i.useRef)(null),u=lO(lO({},c&&c),!t&&{display:"none"});return Object(i.useEffect)((function(){var e;t&&(null===(e=s.current)||void 0===e||e.focus())}),[t]),l.a.createElement("div",{className:S()("lake-h5editor-table-search-bar",a),style:u},l.a.createElement(GE,{type:"search",size:"1.429rem",className:"lake-h5editor-table-search-icon"}),l.a.createElement(_t.e,{className:"lake-h5editor-table-search",ref:s,placeholder:_c("请输入关键词搜索"),clearable:!0,onClear:r,onChange:o,style:{"--font-size":"1.143rem","--color":"#262626","--placeholder-color":"#BEC0BF"}}),l.a.createElement("span",{className:"lake-h5editor-table-search-cancel",onClick:function(){var e;null===(e=s.current)||void 0===e||e.clear(),n()}},_c("取消")))},sO=function(){var e=Uw(),t=e.get(AC),n=e.get(fC),r=by(t.state.visible),o={zIndex:n.zIndex.modalToolbar,position:"absolute",top:0,left:0};return l.a.createElement(cO,{style:o,visible:r,onCancel:function(){t.search(""),t.hide()},onClear:function(){t.search("")},onSearch:function(e){return t.search(e)}})};function uO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var dO=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"storeSrv",void 0),s()(m()(r),"renderSrv",void 0),s()(m()(r),"toolbarSrv",void 0),s()(m()(r),"dialogSrv",void 0),s()(m()(r),"viewManageSrv",void 0),s()(m()(r),"zIndexSrv",void 0),s()(m()(r),"colSrv",void 0),s()(m()(r),"searchSrv",void 0),s()(m()(r),"injector",void 0),s()(m()(r),"onTableReady",(function(e){e.locale=r.locale;var t=r.props.onLoad;if(!r.props.editorEnv.isReadOnly){var n=r.props,o=n.onSave,a=n.onChange,i=r.props.mention||{defaultList:[]};e.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uO(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({image:r.props.image,file:r.props.file,mention:i},e.options),e.on(qs.SAVE,(function(){o&&o()})),e.on(qs.CHANGED,(function(){a&&a()}))}t&&t(e),"true"===localStorage.__table_debug&&(window.__table=e),r.setState({table:e},(function(){return r.initWorkbench()}))})),s()(m()(r),"renderWorkbenchTableCore",(function(){if(r.state.table&&r.injector){var e=r.state.table;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Hw,{table:e}))}})),s()(m()(r),"renderWorkbenchOutside",(function(){if(r.state.table&&r.injector){var e=r.state.table;return l.a.createElement(l.a.Fragment,null,Ub.render(e,"read"))}})),r.state={table:null},r.injector=null,r}return p()(n,[{key:"componentDidMount",value:function(){Cc.setLanguage(this.props.lang)}},{key:"initWorkbench",value:function(){this.state.table&&(this.storeSrv=new Zw(this.state.table,this.props.editorEnv),this.renderSrv=new SE([[uC,{useRender:aO}],[AC,{useRender:sO}]]),this.dialogSrv=new kC(this.renderSrv,this.storeSrv),this.viewManageSrv=new KE(this.storeSrv),this.searchSrv=new TC(this.storeSrv),this.toolbarSrv=new dC,this.colSrv=new jC(this.storeSrv),this.zIndexSrv=new pC,this.storeSrv.attachEditor(this.state.table,this.props.editorEnv),this.injector=new Yw([[Xw,{useClassInstance:this.storeSrv}],[_E,{useClassInstance:this.renderSrv}],[wC,{useClassInstance:this.dialogSrv}],[uC,{useClassInstance:this.toolbarSrv}],[$E,{useClassInstance:this.viewManageSrv}],[fC,{useClassInstance:this.zIndexSrv}],[CC,{useClassInstance:this.colSrv}],[AC,{useClassInstance:this.searchSrv}]]),this.forceUpdate())}},{key:"render",value:function(){var e,t=this.props,n=t.data,r=t.disableHash,o=t.downloadFileHandler,a=t.docId,i=t.webProxy,c=t.webSdk,s=t.mention,u=t.abilities,d=t.docType,f=t.type,p=t.ot,h=t.lang,m=t.editorEnv,v=t.themeManager,g=m.platform,b=m.isReadOnly,y=this.injector;return l.a.createElement(qw,{value:{injector:y}},l.a.createElement("div",{className:"lake-h5-table-editor"},l.a.createElement("div",{id:"workbench-container",className:"workbench-container",style:{position:"relative"}},null===(e=this.renderSrv)||void 0===e?void 0:e.render()),l.a.createElement(ig,{docId:a,docType:d,type:f,value:n,disableHash:r,readOnly:b,platform:g,ot:p,lang:h,webProxy:i,webSdk:c,mention:s,abilities:u,themeManager:v,downloadFileHandler:o,onTableReady:this.onTableReady,renderConfig:{searchFilter:!0,grid:{freezeColIdx:-1,groupStats:!1}}},this.renderWorkbenchTableCore()),this.renderWorkbenchOutside()))}}]),n}(l.a.Component);function fO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fO(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hO=function(e){var t;Object(i.useEffect)((function(){function e(){if(n.isH5){var e=document.documentElement;180===window.orientation||0===window.orientation?e.style.fontSize="".concat(14/375*100,"vw"):e.style.fontSize="".concat(14,"px")}}return e(),window.addEventListener("orientationchange",e),function(){window.removeEventListener("orientationchange",e)}}),[]);var n={isH5:os,isPc:!os},r=pO(pO({},e.editorEnv),{},{platform:n,isToolbarEditable:!e.editorEnv.isReadOnly}),o=r.isReadOnly;if(Fs(e.themeManager||(null===(t=window.appData)||void 0===t?void 0:t.themeManager)),n.isPc)return o?l.a.createElement(kE,a()({},e,{editorEnv:r})):l.a.createElement(pE,a()({},e,{editorEnv:r}));if(n.isH5){var c=pO(pO({},r),{},{isReadOnly:!0,isToolbarEditable:!o&&!!e.abilities.update});return l.a.createElement(dO,a()({},e,{editorEnv:c}))}return null};hO.defaultProps={lang:"zh-cn",image:{uploadAction:"/api/upload/attach?ctoken=foo&type=image"},file:{uploadAction:"/api/upload/attach?ctoken=foo&type=attachment"},abilities:{read:!0,create:!1,update:!1}};var mO=function(e){return l.a.createElement(hO,a()({editorEnv:{isReadOnly:!1}},e))},vO=function(e){return l.a.createElement(hO,a()({editorEnv:{isReadOnly:!0}},e))},gO=function(e){var t=e.height-48-16-16,n=Math.max(Math.round(t/32),3);return l.a.createElement(Qt.a,{active:!0,paragraph:{rows:n}})},bO={leftAlignItems:[{name:"viewManage"},{name:"netStatus"},"|",{name:"kanbanGroup",showTooltip:!1},{name:"gridSetting",showTooltip:!1},{name:"kanbanSetting",showTooltip:!1},{name:"cardSetting",showTooltip:!1},{name:"filter",showTooltip:!1},{name:"group",showTooltip:!1},{name:"sort",showTooltip:!1},{name:"rowHeight",showTooltip:!1},{name:"search"},"|",{name:"addRecord",showTooltip:!1}]},yO={leftAlignItems:[{name:"viewManage"},{name:"netStatus"},"|",{name:"kanbanGroup",showTooltip:!1},{name:"gridSetting",showTooltip:!1},{name:"kanbanSetting",showTooltip:!1},{name:"cardSetting",showTooltip:!1},{name:"filter",showTooltip:!1},{name:"group",showTooltip:!1},{name:"sort",showTooltip:!1},{name:"rowHeight",showTooltip:!1},{name:"search"}]};var wO,kO,xO=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","autoHeight"),s()(m()(e),"_calculateEditorHeight",$()((function(){if(e.viewportHelper)switch(e.activeViewType){case Is.CARD:return void e.updateEditorHeight(e.viewportHelper.totalHeight);case Is.GRID:return void e.updateEditorHeight(e._getGridHeight());case Is.KANBAN:return void e.updateEditorHeight(e._getKanbanHeight());default:return}}),50)),s()(m()(e),"_getKanbanHeight",(function(){var t,n=e.editor.theme.kanbanGroup,r=n.groupTop,o=n.groupPaddingTop,a=n.groupPaddingBottom,i=n.headerHeight,l=n.headerMarginBottom,c=null===(t=Array.from(e.kanbanRowsContainers))||void 0===t?void 0:t.map((function(e){return e.offsetHeight}));return c&&c.length?Math.max.apply(Math,me()(c))+r+o+a+i+l:300})),s()(m()(e),"_getGridHeight",(function(){var t=e.editor.theme,n=t.statsBarHeight;return t.colHeaderHeight+e.viewportHelper.totalHeight+n})),s()(m()(e),"updateEditorHeight",(function(t){e.editor.emit("updateTableHeightEvent",t),e.workbench.UI.containers.editorContainer.style.height!==LO&&(e.workbench.UI.containers.editorContainer.style.height="".concat(t,"px"))})),e}return p()(n,[{key:"init",value:function(){this._onEditorInit(),this._onContentChange(),this._onViewChange(),this._onViewResize()}},{key:"_onViewResize",value:function(){this.editor.on(qs.RESIZE,this._calculateEditorHeight)}},{key:"_onViewChange",value:function(){var e;null===(e=this.kernel)||void 0===e||e.on(gc.VIEW_CHANGED,this._calculateEditorHeight)}},{key:"_onEditorInit",value:function(){this.editor.on(qs.DATA_READY,this._calculateEditorHeight),this.editor.on("initDataTableHeightEvent",this._calculateEditorHeight),this.editor.on("update_height",this._calculateEditorHeight)}},{key:"_onContentChange",value:function(){var e,t,n,r,o,a,i=this;null===(e=this.kernel)||void 0===e||e.on(gc.GROUP_STATE_CHANGED,this._calculateEditorHeight),null===(t=this.kernel)||void 0===t||t.on(gc.CONTENT_CHANGED,this._calculateEditorHeight),null===(n=this.kernel)||void 0===n||n.on(gc.CONTENT_CHANGED_ASYNC,this._calculateEditorHeight),null===(r=this.kernel)||void 0===r||r.on(gc.FILTERED,this._calculateEditorHeight),null===(o=this.kernel)||void 0===o||o.on(gc.FILTER_CHANGED,this._calculateEditorHeight),null===(a=this.kernel)||void 0===a||a.on(gc.RECORD_WILL_MOVE,(function(e){e||i._calculateEditorHeight()}))}},{key:"kernel",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.kernel}},{key:"activeView",get:function(){var e,t;return null===(e=this.kernel)||void 0===e||null===(t=e.tableModel)||void 0===t?void 0:t.getActiveView()}},{key:"activeViewType",get:function(){var e;return null===(e=this.activeView)||void 0===e?void 0:e.get("type")}},{key:"isFilter",get:function(){var e;return null===(e=this.activeView)||void 0===e?void 0:e.get("filterConfigs")}},{key:"rows",get:function(){var e;return null===(e=this.activeView)||void 0===e?void 0:e.get("rows")}},{key:"rowCount",get:function(){var e;return null===(e=this.activeView)||void 0===e?void 0:e.get("rowCount")}},{key:"rowHeight",get:function(){var e;return null===(e=this.activeView)||void 0===e?void 0:e.get("rowHeight").value}},{key:"domRenderer",get:function(){return this.editor.viewManager.domRenderer}},{key:"groupData",get:function(){return this.activeView.get("groupData")}},{key:"groupStates",get:function(){return this.activeView.get("groupStates")}},{key:"viewportHelper",get:function(){var e,t;return null===(e=this.editor.viewManager)||void 0===e||null===(t=e.getViewRenderer())||void 0===t?void 0:t.viewportHelper}},{key:"kanbanRowsContainers",get:function(){return this.workbench.UI.containers.editorContainer.querySelectorAll(".lake-table-kanban-group-rows")}}]),n}();!function(e){e.NORMAL="normal",e.CONTAIN="contain"}(wO||(wO={})),function(e){e[e.FULLSCREEN=0]="FULLSCREEN",e[e.NORMAL=1]="NORMAL"}(kO||(kO={}));var EO=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","fullWidth"),s()(m()(e),"getMaxWidth",void 0),s()(m()(e),"cardWidthMode",void 0),s()(m()(e),"cardMode",kO.NORMAL),s()(m()(e),"_leaveFullScreen",(function(){e.cardMode=kO.NORMAL})),s()(m()(e),"_fullScreenWidth",(function(){e.cardMode=kO.FULLSCREEN,setTimeout((function(){e.workbench.container.style.width="100%"}),50)})),s()(m()(e),"_initCardWidth",(function(t){var n=t.initWidth,r=t.getMaxWidth;e.getMaxWidth=r;var o=Math.min(e.getMaxWidth(),n);e.workbench.container.style.width="".concat(o,"px"),e.cardWidthMode=o>750?"contain":"normal"})),s()(m()(e),"_handleUpdateWidth",$()((function(){if(je.ua.mobile)e._updateCardWidth(e.getMaxWidth());else if(e.cardMode===kO.NORMAL&&e.view&&e.viewportHelper){var t=e.view.get("type");Is.KANBAN===t&&e._handleKanbanWidth(),Is.GRID===t&&e._handleGridWidth(),Is.CARD===t&&e._handleCardWidth()}}),50)),s()(m()(e),"_handleCardWidth",(function(){var t=e.getMaxWidth();"normal"!==e.cardWidthMode?"contain"!==e.cardWidthMode?e.workbench.UI.updateToolbar():e._updateCardWidth(t):e._updateCardWidth(Math.min(750,t))})),s()(m()(e),"_handleKanbanWidth",(function(){var t=e.kernel.groupService.getGroup(),n=e.getMaxWidth();if(t&&0!==t.length){var r=e.editor.theme.kanbanGroup,o=r.groupItemWidth,a=r.groupPaddingLeft,i=r.addGroupWidth,l=r.groupPaddingRight,c=e.viewportHelper.getViewData("groupData"),s=((null==c?void 0:c.filter((function(t){return!e.viewportHelper.isEmptyUngrouped(t)})).length)||0)*(o+a)+i+a+l,u=Math.max(s,750);e._updateCardWidth(n<750?n:Math.min(u,n))}else e._updateCardWidth(Math.min(750,n))})),s()(m()(e),"_handleGridWidth",(function(){var t=e.viewportHelper.getScrollData().scrollWidth+20,n=Math.max(t,750),r=e.getMaxWidth();e._updateCardWidth(r<750?r:Math.min(n,r))})),s()(m()(e),"_updateCardWidth",(function(t){e.workbench.container.style.width="".concat(t,"px"),e.editor.emit("save_card_width",t)})),s()(m()(e),"_changeWidthMode",(function(){"normal"===e.cardWidthMode?(e._updateCardWidth(e.getMaxWidth()),e.cardWidthMode="contain"):(e._updateCardWidth(750),e.cardWidthMode="normal"),e.workbench.UI.updateToolbar()})),s()(m()(e),"_getIcon",(function(){return"contain"===e.cardWidthMode?"lake-icon lake-icon-width-mode-unfold":"lake-icon lake-icon-width-mode-fold"})),s()(m()(e),"_getHide",(function(){var t,n=null===(t=e.editor.kernel)||void 0===t?void 0:t.tableModel.getActiveView();return!!n&&n.get("type")!==Is.CARD})),s()(m()(e),"_getTooltip",(function(){return"contain"===e.cardWidthMode?_c("标宽"):_c("全宽")})),e}return p()(n,[{key:"init",value:function(){var e,t;this.editor.on(DO,this._fullScreenWidth),this.editor.on(PO,this._leaveFullScreen),this.editor.on("init_card_width",this._initCardWidth),this.editor.on("update_card_width",this._handleUpdateWidth),null===(e=this.kernel)||void 0===e||e.on(gc.VIEW_CHANGED,this._handleUpdateWidth),null===(t=this.kernel)||void 0===t||t.on(gc.CONTENT_CHANGED,this._handleUpdateWidth),this.editor.emit("full_width_plugin_init")}},{key:"registerToolbarItem",value:function(){return{name:this.name,icon:this._getIcon,tooltip:this._getTooltip,onClick:this._changeWidthMode,hide:this._getHide}}},{key:"kernel",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.kernel}},{key:"viewportHelper",get:function(){var e,t;return null===(e=this.editor.viewManager)||void 0===e||null===(t=e.getViewRenderer())||void 0===t?void 0:t.viewportHelper}},{key:"view",get:function(){var e;return null===(e=this.kernel)||void 0===e?void 0:e.tableModel.getActiveView()}},{key:"columns",get:function(){return this.view.get("columns")}}]),n}(),CO=function(){function e(){d()(this,e)}return p()(e,null,[{key:"loaderPlugin",value:function(e){e.mountPlugin([tk,vk,xk,Ck,Ax,Nx,Dx,Bx,qx,Gx,NO,EO,xO,IO,uE])}}]),e}();var OO=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),(r=t.call(this,e)).engine=null,r.canvasContainer=l.a.createRef(),r.state={top:60},r}return p()(n,[{key:"getData",value:function(e){if(!e){var t=wc(kc);t.id=fs(32);var n=wc(jc);return n.id=fs(32),t.defaultView=n.id,t.columns.forEach((function(e){e.id=fs(32),[Ac.SELECT,Ac.MULTI_SELECT].includes(e.type)&&e.options.forEach((function(e){e.id=fs(6)}))})),n.tableId=t.id,t.views={},t.views[n.id]=n,t.isBlank=!0,{format:"laketable",type:"Table",version:"1.3",larkJson:!0,sheet:[t]}}return e}},{key:"componentDidMount",value:function(){var e=this.getData(this.props.value),t=new ag(this.canvasContainer.current,{data:e,lang:this.props.lang,readOnly:this.props.readOnly,ot:this.props.ot,locale:this.locale,docId:this.props.docId,versionMode:this.props.versionMode,docType:this.props.docType,type:this.props.type,abilities:this.props.abilities||{},webProxy:this.props.webProxy,webSdk:this.props.webSdk,mention:this.props.mention,disableHash:this.props.disableHash,renderConfig:this.props.renderConfig,downloadFileHandler:this.props.downloadFileHandler,theme:this.props.theme,maxRecordCount:this.props.maxRecordCount,focusCellContainer:this.props.focusCellContainer&&this.props.focusCellContainer.current,eventManager:this.props.eventManager,handleScrollEvent:this.props.handleScrollEvent,avatarOrigin:this.props.avatarOrigin,themeManager:this.props.themeManager});this.props.onTableReady(t),this.setState({table:t}),Cc.setLanguage(this.props.lang)}},{key:"componentWillUnmount",value:function(){this.state.table&&this.state.table.destroy()}},{key:"render",value:function(){var e=this.state.table,t=this.props,n=t.yScrollEnable,r=t.xScrollEnable;return l.a.createElement("div",{ref:this.canvasContainer,className:"lake-table-container"},e&&Rk.renderCoreModals({table:e,readonly:this.props.readOnly}),e&&l.a.createElement(Jy,{table:e}),e&&l.a.createElement(tw,{table:e}),e&&l.a.createElement(Zy,{table:e,xScrollEnable:r,yScrollEnable:n}),e&&l.a.createElement(ow,{table:e,readOnly:this.props.readOnly}),e&&l.a.createElement(Hw,{table:e,handleScrollEvent:this.props.handleScrollEvent,kanbanDraggable:this.props.kanbanDraggable,cardDraggable:this.props.cardDraggable}))}}]),n}(l.a.Component);s()(OO,"propTypes",{onTableReady:X.a.func,lang:X.a.string,value:X.a.object,readOnly:X.a.bool,ot:X.a.bool,disableHash:X.a.bool,docId:X.a.number,docType:X.a.string,type:X.a.string,webProxy:X.a.object,webSdk:X.a.object,mention:X.a.object,versionMode:X.a.bool,abilities:X.a.object,downloadFileHandler:X.a.func,formulaContainer:X.a.oneOfType([X.a.object,X.a.element]),focusCellContainer:X.a.oneOfType([X.a.object,X.a.element]),handleScrollEvent:X.a.bool,theme:X.a.object,maxRecordCount:X.a.number,eventManager:X.a.object,xScrollEnable:X.a.bool,yScrollEnable:X.a.bool,kanbanDraggable:X.a.bool,cardDraggable:X.a.bool,renderConfig:X.a.object,avatarOrigin:X.a.string,themeManager:X.a.object}),s()(OO,"defaultProps",{lang:"zh-cn",onTableReady:function(){},avatarOrigin:""}),OO.defaultProps={handleScrollEvent:!0,renderConfig:{searchFilter:!1,grid:{freezeColIdx:0,groupStats:!0}}};var _O=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"containerRef",l.a.createRef()),s()(m()(r),"_onTableReady",(function(e){var t=r.props,n=t.onMount,o=t.onLoad;e.on(DO,(function(){r.setState({handleScrollEvent:!0})})),e.on(PO,(function(){r.setState({handleScrollEvent:!1})})),e.on("focus_by_selection",(function(){setTimeout((function(){var t;null===(t=r.containerRef.current)||void 0===t||t.focus({preventScroll:!0}),e.emit(qs.TO_DO_FOCUS)}))})),e.setValue(r.props.data),n(e),o&&o(e),r.setState({table:e},(function(){e.emit(qs.DATA_READY),setTimeout((function(){return e.emit(qs.CANVAS_RESIZE)}),200)}))})),r.state={table:null,handleScrollEvent:!1},r}return p()(n,[{key:"render",value:function(){var e=this.state.table;return l.a.createElement("div",{className:"lake-table-editor",ref:this.containerRef,tabIndex:-1},l.a.createElement(OO,a()({},this.props,{onTableReady:this._onTableReady,handleScrollEvent:this.state.handleScrollEvent,yScrollEnable:!1,eventManager:{canvasEvents:{preventScroll:!1,scrollOnAddRow:!1}},readOnly:!0})),e&&l.a.createElement(Cy,{table:e}),e&&l.a.createElement(lg,{table:e}),e&&Ub.render(e,"read",this.props.rowEditorContainer))}}]),n}(l.a.Component);s()(_O,"defaultProps",{lang:"zh-cn"});var SO=function(e){g()(r,en);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(r);function r(){var e;d()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o)),s()(m()(e),"editor",null),s()(m()(e),"_$mountRoot",null),s()(m()(e),"_onEditorMount",(function(t){e.editor=t})),e}return p()(r,[{key:"attachEditor",value:(t=E()(O.a.mark((function e(t){var n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._$mountRoot=t,e.next=3,V.a.render(l.a.createElement(_O,a()({},this.args,{onMount:function(e){return n._onEditorMount(e)}})),this._$mountRoot);case 3:return e.abrupt("return",this.editor);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){var e;this._$mountRoot&&V.a.unmountComponentAtNode(this._$mountRoot),null===(e=this.editor)||void 0===e||e.destroy()}}]),r}();nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-card-table-toolbar {\n  background: var(--yq-bg-primary);\n  padding: 0 0 3px;\n  align-items: end;\n}\n.lake-card-table-toolbar .toolbar-items .view-manage-signal-toolbar-item {\n  margin-left: 0;\n}\n.lake-card-table-toolbar .toolbar-items .view-manage-signal-toolbar-item .lake-table-components-button {\n  visibility: hidden;\n}\n.lake-card-table-toolbar .toolbar-items .view-manage-multiple-toolbar-item {\n  margin: 0;\n}\n.lake-card-table-toolbar .toolbar-items .lake-workbench-toolbar-button:hover {\n  cursor: pointer;\n}\n.lake-card-table-toolbar .toolbar-items .lake-workbench-toolbar-divider {\n  height: 22px;\n  background-color: var(--yq-bg-primary-hover-light);\n}\n.lake-card-table-toolbar .toolbar-items:last-child {\n  visibility: hidden;\n}\n"),nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-card-table-toolbar-focus {\n  background: var(--yq-bg-primary);\n  padding: 0 0 3px;\n  align-items: end;\n  overflow-x: auto;\n  overflow-y: hidden;\n}\n.lake-card-table-toolbar-focus .toolbar-items {\n  flex-shrink: 0;\n}\n.lake-card-table-toolbar-focus .toolbar-items .view-manage-signal-toolbar-item {\n  margin-left: 0;\n}\n.lake-card-table-toolbar-focus .toolbar-items .view-manage-signal-toolbar-item .lake-table-components-button {\n  color: var(--yq-text-caption);\n}\n.lake-card-table-toolbar-focus .toolbar-items .view-manage-multiple-toolbar-item {\n  margin: 0;\n}\n.lake-card-table-toolbar-focus .toolbar-items .lake-workbench-toolbar-button:hover {\n  cursor: pointer;\n}\n.lake-card-table-toolbar-focus .toolbar-items .lake-workbench-toolbar-divider {\n  height: 22px;\n  background-color: var(--yq-bg-primary-hover-light);\n}\n");var RO={items:{leftAlignItems:[{name:"viewManage"},{name:"netStatus"}],rightAlignItems:[{name:"kanbanGroup"},{name:"gridSetting",showTitle:!1},{name:"kanbanSetting",showTitle:!1},{name:"cardSetting",showTitle:!1},{name:"filter",showTitle:!1},{name:"group",showTitle:!1},{name:"sort",showTitle:!1},{name:"fullWidth",showTitle:!1},{name:"fullScreen",showTitle:!1},{name:"search",options:{model:"input",buttonType:"icon"}}]},className:"lake-card-table-toolbar",onMount:function(e,t){var n,r,o,a,i,l=$()((function(){return e.forceUpdate()}),120);null===(n=t.kernel)||void 0===n||n.on(gc.INIT_DATA,(function(){return l()})),null===(r=t.kernel)||void 0===r||r.on(gc.ENABLE_FORM,(function(){return l()})),null===(o=t.kernel)||void 0===o||o.on(gc.DISABLE_FORM,(function(){return l()})),null===(a=t.kernel)||void 0===a||a.on(gc.VIEW_CHANGED,(function(){return l()})),null===(i=t.kernel)||void 0===i||i.on(gc.VIEW_NAME_CHANGED,(function(){return l()}))},onUnmount:function(e,t){var n,r,o,a,i,l=$()((function(){return e.forceUpdate()}),120);null===(n=t.kernel)||void 0===n||n.off(gc.INIT_DATA,(function(){return l()})),null===(r=t.kernel)||void 0===r||r.off(gc.ENABLE_FORM,(function(){return l()})),null===(o=t.kernel)||void 0===o||o.off(gc.DISABLE_FORM,(function(){return l()})),null===(a=t.kernel)||void 0===a||a.off(gc.VIEW_CHANGED,(function(){return l()})),null===(i=t.kernel)||void 0===i||i.off(gc.VIEW_NAME_CHANGED,(function(){return l()}))}};function jO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jO(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nc(".lake-card-table-toolbar-full-screen {\n  align-items: center;\n  padding: 0 0 0 8px;\n}\n.lake-card-table-toolbar-full-screen .toolbar-items > * {\n  margin: 0 3px;\n}\n");var TO,LO="calc(100% - 42px)",DO="into_full_screen",PO="leave_full_screen";!function(e){e[e.FULL_SCREEN=0]="FULL_SCREEN",e[e.NORMAL=1]="NORMAL"}(TO||(TO={}));var MO,NO=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","fullScreen"),s()(m()(e),"status",void 0),s()(m()(e),"handleViewChangeOnScreen",(function(){e.status===TO.FULL_SCREEN&&setTimeout((function(){e.activeViewType===Is.KANBAN&&e.updateKanbanHeightOnFullScreen()}),200)})),s()(m()(e),"onFullScreen",(function(){e.status=TO.FULL_SCREEN,e.workbench.UI.updateToolbar({items:e.maximizeToolbarConfig,className:"".concat("lake-card-table-toolbar-focus"," lake-card-table-toolbar-full-screen")}),e.workbench.UI.containers.editorContainer.style.height=LO,e.activeViewType===Is.KANBAN&&e.updateKanbanHeightOnFullScreen()})),s()(m()(e),"leaveFullScreen",(function(t){e.status=TO.NORMAL,e.workbench.UI.hideModal("search"),e.editor.emit("initDataTableHeightEvent"),e.workbench.UI.containers.editorContainer.style.height="".concat(t.height,"px"),e.workbench.UI.updateToolbar(AO({},e.toolbarConfig)),e.activeViewType===Is.KANBAN&&e.updateKanbanHeightOnLeaveFullScreen(),setTimeout((function(){return e.editor.emit("update_height")}))})),s()(m()(e),"updateKanbanHeightOnFullScreen",(function(){e.kanbanRowsContainers.forEach((function(e){e.style.height="calc(100% - 38px)"}))})),s()(m()(e),"updateKanbanHeightOnLeaveFullScreen",(function(){e.kanbanRowsContainers.forEach((function(e){e.style.height="auto"}))})),e}return p()(n,[{key:"init",value:function(){var e;this.editor.on("on_full_screen",this.onFullScreen),this.editor.on(PO,this.leaveFullScreen),null===(e=this.kernel)||void 0===e||e.on(gc.VIEW_CHANGED,this.handleViewChangeOnScreen)}},{key:"registerToolbarItem",value:function(){var e=this;return{name:this.name,icon:"lake-icon lake-icon-card-toolbar-full-screen",tooltip:_c("全屏"),onClick:function(){e.editor.emit(DO)}}}},{key:"kanbanRowsContainers",get:function(){return Array.from(this.workbench.UI.containers.editorContainer.querySelectorAll(".lake-table-kanban-group-rows"))}},{key:"toolbarConfig",get:function(){return this.editor.readOnly?RO:zO}},{key:"maximizeToolbarConfig",get:function(){return this.editor.readOnly?yO:bO}},{key:"kernel",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.kernel}},{key:"activeView",get:function(){var e,t;return null===(e=this.kernel)||void 0===e||null===(t=e.tableModel)||void 0===t?void 0:t.getActiveView()}},{key:"activeViewType",get:function(){var e;return null===(e=this.activeView)||void 0===e?void 0:e.get("type")}}]),n}();!function(e){e[e.BLUR=0]="BLUR",e[e.FOCUS=1]="FOCUS"}(MO||(MO={}));var IO=function(e){g()(n,an);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(){var e;d()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(m()(e),"name","toolbarAdapter"),s()(m()(e),"status",MO.BLUR),s()(m()(e),"fullscreenStatus",void 0),s()(m()(e),"onCardDataUpdate",(function(){setTimeout((function(){return e.editor.emit("focus_by_selection")}))})),s()(m()(e),"onFullScreen",(function(){e.fullscreenStatus=TO.FULL_SCREEN})),s()(m()(e),"onLeaveFullScreen",(function(){e.fullscreenStatus=TO.NORMAL,e.onDataTableFocus()})),s()(m()(e),"onInit",(function(){e.workbench.container.addEventListener("click",e.onDataTableClick)})),s()(m()(e),"onDataTableClick",(function(){e.status!==MO.FOCUS&&e.onDataTableFocus()})),s()(m()(e),"onDataTableLeave",(function(){document.body.style.cursor="auto",e.status!==MO.FOCUS&&e.workbench.UI.updateToolbar({className:"lake-card-table-toolbar"})})),s()(m()(e),"onDataTableBlur",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.isMountGlobalModal()&&!t||(e.status=MO.BLUR,e.workbench.UI.updateToolbar({className:"lake-card-table-toolbar"}),e.editor.blur())})),s()(m()(e),"isMountGlobalModal",(function(){var t=e.workbench.UI.containers.globalModalContainer;return null==t?void 0:t.childElementCount})),s()(m()(e),"onDataTableHover",(function(){e.fullscreenStatus!==TO.FULL_SCREEN&&e.workbench.UI.updateToolbar({className:"lake-card-table-toolbar-focus"})})),s()(m()(e),"onDataTableFocus",(function(){setTimeout((function(){e.editor.emit("focus_by_selection")})),e.fullscreenStatus!==TO.FULL_SCREEN&&(e.status=MO.FOCUS,e.workbench.UI.updateToolbar({className:"lake-card-table-toolbar-focus"}),e.editor.focus())})),e}return p()(n,[{key:"init",value:function(){this.onInit(),this.editor.on("data_table_card_hover",this.onDataTableHover),this.editor.on("data_table_card_focus",this.onDataTableFocus),this.editor.on("data_table_card_blur",this.onDataTableBlur),this.editor.on("data_table_card_leave",this.onDataTableLeave),this.editor.on("data_table_card_data_update",this.onCardDataUpdate),this.editor.on("on_full_screen",this.onFullScreen),this.editor.on(PO,this.onLeaveFullScreen)}},{key:"kernel",get:function(){return this.editor.kernel}}]),n}(),FO=function(){function e(){d()(this,e)}return p()(e,null,[{key:"loaderPlugin",value:function(e){e.mountPlugin([tk,vk,xk,Ck,Ax,Nx,Dx,Bx,qx,Gx,Yx,Xx,tE,cE,NO,EO,xO,IO,uE])}}]),e}();function BO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var VO=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(n);function n(e){var r;return d()(this,n),r=t.call(this,e),s()(m()(r),"containerRef",l.a.createRef()),s()(m()(r),"_onTableReady",(function(e){var t=r.props,n=t.onSave,o=t.onChange,a=t.image,i=t.file,l=t.mention,c=t.onMount,u=t.onLoad;e.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BO(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({image:a,file:i,mention:l},e.options),e.on(qs.SAVE,(function(){n&&n()})),e.on(qs.CHANGED,(function(){o&&o()})),e.on(DO,(function(){r.setState({handleScrollEvent:!0})})),e.on(PO,(function(){r.setState({handleScrollEvent:!1})})),e.on("focus_by_selection",(function(){setTimeout((function(){var t;null===(t=r.containerRef.current)||void 0===t||t.focus({preventScroll:!0}),e.emit(qs.TO_DO_FOCUS)}),100)})),e.setValue(r.props.data),c(e),u&&u(e),r.setState({table:e},(function(){e.enable(),setTimeout((function(){return e.emit(qs.CANVAS_RESIZE)}),200)}))})),r.state={table:null,handleScrollEvent:!1},r}return p()(n,[{key:"render",value:function(){var e=this.state.table,t=this.props,n=t.rowEditorContainer,r=t.fileManageContainer;return l.a.createElement("div",{className:"lake-table-editor",ref:this.containerRef,tabIndex:-1},l.a.createElement(OO,a()({},this.props,{onTableReady:this._onTableReady,handleScrollEvent:this.state.handleScrollEvent,yScrollEnable:!1,eventManager:{canvasEvents:{preventScroll:!1,scrollOnAddRow:!1}}})),e&&l.a.createElement(Cy,{table:e}),e&&l.a.createElement(lg,{table:e}),e&&Ub.render(e,"edit",n),e&&Cb.render(e,"edit",r))}}]),n}(l.a.Component);s()(VO,"defaultProps",{image:{uploadAction:"/api/upload/attach?ctoken=foo&type=image"},file:{uploadAction:"/api/upload/attach?ctoken=foo&type=attachment"},avatarOrigin:""});var HO=function(e){g()(r,en);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(r);function r(){var e;d()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o)),s()(m()(e),"editor",null),s()(m()(e),"_$mountRoot",null),s()(m()(e),"_onEditorMount",(function(t){e.editor=t})),e}return p()(r,[{key:"attachEditor",value:(t=E()(O.a.mark((function e(t){var n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._$mountRoot=t,e.next=3,V.a.render(l.a.createElement(VO,a()({},this.args,{onMount:function(e){return n._onEditorMount(e)}})),this._$mountRoot);case 3:return e.abrupt("return",this.editor);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){var e;this._$mountRoot&&V.a.unmountComponentAtNode(this._$mountRoot),null===(e=this.editor)||void 0===e||e.destroy()}}]),r}(),zO={items:{leftAlignItems:[{name:"viewManage"},{name:"netStatus"}],rightAlignItems:[{name:"kanbanGroup"},{name:"gridSetting",showTitle:!1},{name:"kanbanSetting",showTitle:!1},{name:"cardSetting",showTitle:!1},{name:"filter",showTitle:!1},{name:"group",showTitle:!1},{name:"sort",showTitle:!1},{name:"fullWidth",showTitle:!1},{name:"fullScreen",showTitle:!1},{name:"search",options:{model:"input",buttonType:"icon"}},"|",{name:"addRecord"}]},className:"lake-card-table-toolbar",onMount:function(e,t){var n,r,o,a,i,l=$()((function(){return e.forceUpdate()}),120);null===(n=t.kernel)||void 0===n||n.on(gc.INIT_DATA,(function(){return l()})),null===(r=t.kernel)||void 0===r||r.on(gc.ENABLE_FORM,(function(){return l()})),null===(o=t.kernel)||void 0===o||o.on(gc.DISABLE_FORM,(function(){return l()})),null===(a=t.kernel)||void 0===a||a.on(gc.VIEW_CHANGED,(function(){return l()})),null===(i=t.kernel)||void 0===i||i.on(gc.VIEW_NAME_CHANGED,(function(){return l()}))},onUnmount:function(e,t){var n,r,o,a,i,l=$()((function(){return e.forceUpdate()}),120);null===(n=t.kernel)||void 0===n||n.off(gc.INIT_DATA,(function(){return l()})),null===(r=t.kernel)||void 0===r||r.off(gc.ENABLE_FORM,(function(){return l()})),null===(o=t.kernel)||void 0===o||o.off(gc.DISABLE_FORM,(function(){return l()})),null===(a=t.kernel)||void 0===a||a.off(gc.VIEW_CHANGED,(function(){return l()})),null===(i=t.kernel)||void 0===i||i.off(gc.VIEW_NAME_CHANGED,(function(){return l()}))}};function qO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qO(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.lake-workbench-card-toolbar-container {\n  border: solid var(--yq-sheetborder);\n  position: relative;\n  border-width: 1px 0;\n  border-top: none;\n  z-index: 400;\n  height: 42px;\n  width: 100%;\n}\n.lake-workbench-card-editor-container {\n  width: 100%;\n  margin-top: -1px;\n}\n.lake-workbench-modal-container {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n}\n.lake-workbench-global-modal-container {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n}\n.lake-workbench-global-modal-option {\n  position: fixed;\n}\n");var GO=function(e){g()(r,nn);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(r);function r(){var e;d()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o)),s()(m()(e),"toolbarContainer",l.a.createRef()),s()(m()(e),"editorContainer",l.a.createRef()),s()(m()(e),"modalContainer",l.a.createRef()),e}return p()(r,[{key:"initContainers",value:(t=E()(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.render(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{ref:this.toolbarContainer,className:"lake-workbench-card-toolbar-container"}),l.a.createElement("div",{ref:this.editorContainer,style:UO({},null===(t=this.args)||void 0===t||null===(n=t.editorContainer)||void 0===n?void 0:n.style),className:"lake-workbench-card-editor-container"}),l.a.createElement("div",{ref:this.modalContainer,className:"lake-workbench-modal-container"})),this.mountRoot);case 2:return(r=document.querySelector(".lake-workbench-global-modal-container"))||((r=document.createElement("div")).classList.add("lake-workbench-global-modal-container"),this.container.appendChild(r)),e.abrupt("return",{globalModalContainer:r,editorContainer:this.editorContainer.current,toolbarContainer:this.toolbarContainer.current,modalContainer:this.modalContainer.current});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.mountRoot&&V.a.unmountComponentAtNode(this.mountRoot)}},{key:"container",get:function(){return this.args.globalModalContainer.container}},{key:"mountRoot",get:function(){return this.workbench.container}}]),r}(),WO={leftAlignItems:[{name:"viewManage"}]},YO={modalClassName:"lake-workbench-modal-option",modalMaskClassName:"lake-workbench-modal-mask-option",globalModalClassName:"lake-workbench-global-modal-option",globalMaskClassName:"lake-workbench-global-modal-mask-option"};function $O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$O(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nc("/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.data-table-card {\n  width: 100%;\n  height: 100%;\n  caret-color: var(--yq-yuque-grey-9);\n}\n.data-table-card:hover .lake-workbench-card-toolbar-container .lake-workbench-toolbar .toolbar-items {\n  display: flex;\n}\n.data-table-card .lake-table-container,\n.data-table-card .lake-table-dom-renderer,\n.data-table-card .lake-table-kanban-container,\n.data-table-card .lake-table-kanban-group,\n.data-table-card .lake-table-kanban-add-group {\n  background-color: var(--yq-white);\n}\n.data-table-card .lake-table-stats {\n  background-color: var(--yq-white);\n  border-top: none;\n  height: 31px;\n}\n.data-table-card .lake-table-scrollbar-new-x {\n  height: 10px !important;\n  left: 0 !important;\n}\n.data-table-card .lake-table-scrollbar-new-x::-webkit-scrollbar {\n  height: 6px !important;\n}\n.data-table-card .lake-table-scrollbar-new-x::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.15) !important;\n  border-radius: 3px !important;\n}\n.data-table-card .lake-table-kanban-container::-webkit-scrollbar {\n  height: 6px;\n}\n.data-table-card .lake-table-kanban-container::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.15);\n}\n.data-table-card .lake-table-stats-frozen {\n  border-right: none;\n}\n.data-table-card .lake-table-kanban-group-rows {\n  height: auto;\n}\nhtml[data-kumuhana='pouli'] .data-table-card .lake-table-stats,\nhtml[data-kumuhana='pouli'] .data-table-card .lake-table-container,\nhtml[data-kumuhana='pouli'] .data-table-card .lake-table-dom-renderer,\nhtml[data-kumuhana='pouli'] .data-table-card .lake-table-kanban-container,\nhtml[data-kumuhana='pouli'] .data-table-card .lake-table-kanban-group,\nhtml[data-kumuhana='pouli'] .data-table-card .lake-table-kanban-add-group {\n  background-color: var(--yq-bg-primary);\n}\n");var XO=function(e){g()(r,e);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(r);function r(){var e;d()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o)),s()(m()(e),"containerRef",l.a.createRef()),s()(m()(e),"_workbench",void 0),s()(m()(e),"renderReader",function(){var t=E()(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Jt({containerEl:e.containerRef.current,editor:{adapter:SO,args:n},template:{adapter:GO,args:n.template},componentOptions:{modal:YO,toolbar:KO(KO({},RO),{},{items:je.ua.mobile?WO:RO.items})}}),CO.loaderPlugin(r),t.next=4,r.renderPage();case 4:e._workbench=r;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),s()(m()(e),"renderEditor",function(){var t=E()(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Jt({containerEl:e.containerRef.current,editor:{adapter:HO,args:n},template:{adapter:GO,args:n.template},componentOptions:{modal:YO,toolbar:KO(KO({},zO),{},{items:je.ua.mobile?WO:zO.items})}}),FO.loaderPlugin(r),t.next=4,r.renderPage();case 4:e._workbench=r;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}return p()(r,[{key:"componentDidMount",value:(t=E()(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.containerRef.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.props.getTableInitProps();case 4:t=e.sent,je.ua.mobile?this.renderReader(t):this.renderEditor(t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){var e;null===(e=this.workbench)||void 0===e||e.destroy()}},{key:"render",value:function(){var e=this.props.height;return l.a.createElement("div",{ref:this.containerRef,className:"data-table-card"},l.a.createElement(gO,{height:e}))}},{key:"workbench",get:function(){return this._workbench}}]),r}(l.a.Component);function ZO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZO(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var JO=function(e){g()(r,e);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var o=k()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}(r);function r(){var e;d()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o)),s()(m()(e),"containerRef",l.a.createRef()),s()(m()(e),"_workbench",void 0),s()(m()(e),"renderReader",function(){var t=E()(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Jt({containerEl:e.containerRef.current,editor:{adapter:SO,args:n},template:{adapter:GO,args:n.template},componentOptions:{modal:YO,toolbar:QO(QO({},RO),{},{items:je.ua.mobile?WO:RO.items})}}),CO.loaderPlugin(r),t.next=4,r.renderPage();case 4:e._workbench=r;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),s()(m()(e),"renderEditor",function(){var t=E()(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Jt({containerEl:e.containerRef.current,editor:{adapter:HO,args:n},template:{adapter:GO,args:n.template},componentOptions:{modal:YO,toolbar:QO(QO({},zO),{},{items:je.ua.mobile?WO:zO.items})}}),FO.loaderPlugin(r),t.next=4,r.renderPage();case 4:e._workbench=r;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}return p()(r,[{key:"componentDidMount",value:(t=E()(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.containerRef.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.props.getTableInitProps();case 4:(t=e.sent).editable&&!je.ua.mobile?this.renderEditor(t):this.renderReader(t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){var e;null===(e=this.workbench)||void 0===e||e.destroy()}},{key:"render",value:function(){var e=this.props.height;return l.a.createElement("div",{ref:this.containerRef,className:"data-table-card"},l.a.createElement(gO,{height:e}))}},{key:"workbench",get:function(){return this._workbench}}]),r}(l.a.Component),e_={};e_.Editor=mO,e_.Reader=vO;var t_=tp}.call(this,n(135),n(242))},2994:function(e,t,n){var r=n(403),o=n(791),a=n(792),i=n(290),l=n(237),c=n(404),s=Math.min;e.exports=function(e,t,n){for(var u=n?a:o,d=e[0].length,f=e.length,p=f,h=Array(f),m=1/0,v=[];p--;){var g=e[p];p&&t&&(g=i(g,l(t))),m=s(g.length,m),h[p]=!n&&(t||d>=120&&g.length>=120)?new r(p&&g):void 0}g=e[0];var b=-1,y=h[0];e:for(;++b<d&&v.length<m;){var w=g[b],k=t?t(w):w;if(w=n||0!==w?w:0,!(y?c(y,k):u(v,k,n))){for(p=f;--p;){var x=h[p];if(!(x?c(x,k):u(e[p],k,n)))continue e}y&&y.push(k),v.push(w)}}return v}},2995:function(e,t,n){var r=n(1078);e.exports=function(e){return r(e)?e:[]}},3005:function(e,t,n){"use strict";n.d(t,"a",(function(){return ge})),n.d(t,"b",(function(){return T}));var r=n(68),o=n.n(r),a=n(3009),i=n.n(a),l=n(599),c=n.n(l),s=n(450),u=n.n(s),d=n(924),f=n.n(d),p=n(26),h=n.n(p),m=n(2208),v=n.n(m),g=n(24),b=n.n(g),y=n(2257),w=n.n(y);function k(e,t){return function(e){for(var t,n=e.rows,r=n.length,o=[],a=[],i=0,l=0,c=0,s=0;s<r;s++){for(var u=n[s].cells,d=0,f=0;f<u.length;f++){var p=u[f],h=p.rowSpan,m=p.colSpan;i+=h*m,d+=m,h>1&&(l+=(h-1)*m)}a[s]=d,0===s&&(t=d),c=Math.max(d,c)}if(v()(i/t)&&t===c){var g=0;if(a.forEach((function(e){g+=c-e})),g!==l){var b=l-g;if(b&&v()(b/c)){for(var y=[],w=0;w<r;w++){for(var k=n[w].cells;o[w+y.length]===c;)y.push(w+y.length);for(var x=w+y.length,E=0;E<k.length;E++){var C=k[E],O=C.rowSpan,_=C.colSpan;if(O>1)for(var S=1;S<O;S++)o[x+S]=(o[x+S]||0)+_}}y.forEach((function(t){e.insertRow(t)}))}}}}(e),function(e){var t=e.rows[0];0===t.cells.length&&t.remove(),e.rows.length>1&&1===t.cells.length&&""===t.cells[0].innerText.trim()&&0===t.cells[0].getElementsByTagName("img").length&&1===t.cells[0].colSpan&&1===t.cells[0].rowSpan&&t.remove()}(e),function(e){Array.from(e.rows).forEach((function(e){var t=e.getAttribute("style"),n=t&&t.match(/mso-xlrowspan:(\d+)/),r=e.getAttribute("height");if(n&&r){var o=parseInt(n[1]);r=parseInt(r)/o||24,e.setAttribute("height",r),e.style.height=r+"px"}if(Array.from(e.cells).forEach((function(t){var n=t.getAttribute("style");if(t.setAttribute("height",r),t.style.height=r+"px",t.colSpan>1&&n&&-1!==n.indexOf("mso-ignore:colspan")){var o=t.colSpan;t.setAttribute("colSpan",1);for(var a=1;a<o;a++){var i=t.cloneNode();e.insertBefore(i,t.nextSibling)}}})),n){var a=parseInt(n[1]);if(a<1e6)for(var i=1;i<a;i++){var l=e.cloneNode();e.parentNode.insertBefore(l,e)}}}))}(e),function(e,t){for(var n=[],r=e.rows,o=r.length,a=100,i=0;i<o;i++){var l=r[i].cells,c=l.length;n[i]=n[i]||[];for(var s=c>16300,u=0;u<c;u++){var d=l[u];if(s&&u>a&&""===d.innerHTML&&x(d))break;a=Math.max(a,u);for(var f=d.rowSpan,p=void 0===f?1:f,m=d.colSpan,v=void 0===m?1:m,g=p>1||v>1,b=u;n[i][b];)b++;if(n[i][b]={rowSpan:p,colSpan:v,isMulti:g,element:d},g)for(var y=p;y>0;){for(var w=v;w>0;){if(1!==w||1!==y){var k=i+y-1,E=b+w-1;n[k]=n[k]||[],n[k][E]={isEmpty:!0,parent:{row:i,col:b}}}w--}y--}}}var C=n.map((function(e){return e.length})),O=Math.max.apply(Math,h()(C));return n.forEach((function(e,n){if(e.length<O)for(var r=O-e.length;r--;)0!==n||t?e.push({rowSpan:1,colSpan:1,isShadow:!0,element:null}):e.unshift({rowSpan:1,colSpan:1,isShadow:!0,element:null});for(var o=0;o<O;o++)e[o]||(e[o]={rowSpan:1,colSpan:1,isShadow:!0,element:null})})),{rows:n.length,cols:O,table:n}}(e,t)}function x(e){for(var t=10;t>0&&e;){if(e.tagName&&"td"===e.tagName.toLowerCase()){if(""!==e.innerHTML)return!1;t-=1}e=e.nextSibling}return!0}function E(e,t,n){var r=e.match(/<col[^>]*>/g),o=0;if(r){var a=r[r.length-1].match(/<col[^>]*span=(\d+)[^>]*>/);a&&(o=parseInt(a[1],10))}if(o>n){var i=e.split("</tr>");e=(i=i.map((function(e){var t=e.match(/(\s*<td[^>]*>\s*<\/td>)(\s*)$/);if(t){var n=t[1].repeat(o-30);e.endsWith(n+t[2])&&(e=e.substr(0,e.length-n.length-t[2].length))}return e}))).join("</tr>")}var l=e.match(/\s*<tr[^>]*>\s*(<td[^>]*>\s*<\/td>\s*)+<\/tr>/g);if(l&&l.length>t){var c=e.match(/<td[^>]*>[^<]*[^\s<]+[^<]*<\/td>/g);if(!c)return"<table><tr><td></td></tr></table>";var s=c[c.length-1],u=e.lastIndexOf(s),d=e.slice(0,u+s.length);e=e.slice(u+s.length);var p={};l.forEach((function(e){p[e]=p[e]||{content:e,count:0},p[e].count+=1}));for(var h=Object.values(p),m=(h=f()(h,"count")).length-1;h[m];){var v=h[m];if(v.count>t){var g=v.content.replace(/([*.?+$^[\](){}|/\\])/g,(function(e){return"\\".concat(e)}));e=e.replace(new RegExp(g,"g"),"")}m--}e=d+e}return e}var C=/^\s*\(?¥\s*\(?[\d,.]+\)?$/,O=/^#+$/,_=/^\d\.\d+[Ee]\+\d+$/,S=String.fromCharCode(165),R=String.fromCharCode(36),j=String.fromCharCode(8364),A=String.fromCharCode(163);function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;e=L(e=E(e,200,200));var a=(new DOMParser).parseFromString(e,"text/html"),l=a.body,s=ne(a.all,(function(e){return"STYLE"===e.tagName}));if(!l)return null;for(var u,d=l.firstChild,f=[],p=[],h={},m={},v=[],g={},b=!1;d;)if(I(d)){var y=K(d,f.length,s,o);y.mergeCells&&(p=p.concat(y.mergeCells)),y.startCell&&(u=y.startCell),y.selectOptions&&Object.assign(g,y.selectOptions),Object.assign(m,y.rows),y.columns&&Object.assign(h,y.columns),f=f.concat(y.table),y.cellsNeedFix&&(v=v.concat(y.cellsNeedFix)),d=$(d),b=!1}else if(q(d))H(d)&&(d.innerHTML=""),F(d)&&(d.innerHTML=d.innerHTML.replace(/\n/g,"<br/>")),d=d.firstChild||$(d),b=!1;else if(V(d)){var w=d.innerText.trim(),k=d.getAttribute("href");M(f,f.length,w,k),b=!1,d=$(d)}else if(B(d)){var x=d.getAttribute("src");N(f,f.length,x,o),b=!1,d=$(d)}else if(G(d))d=d.firstChild||$(d);else if(W(d))b=!1,d=$(d);else if(Y(d)){var C=d.data;if(""!==C.trim()||!q(d.parentNode)){var O=b?f.length-1:f.length;P(f,O,C),b=!0}d=$(d)}else d=$(d);var _=D(f);p=c()(p,(function(e){return"".concat(e.row,":").concat(e.col)}));var S=i()(f.map((function(e){return e.length})))||20,R={name:n||"Sheet".concat(t+1),rowCount:r?Math.max(f.length,r.rowCount):f.length,colCount:r?Math.max(S,r.colCount):S,data:_,mergeCells:p,rows:m,columns:h,filter:{},index:t,defaults:{}};return u&&(R.startCell=u),Object.keys(g).length>0&&(R.selectOptions=g),v.length>0&&(R.cellsNeedFix=v),R}function L(e){return e.replace(/\\0022/g,"")}function D(e){var t={};return e.forEach((function(e,n){e.forEach((function(e,r){e&&0!==Object.keys(e).length&&(t[n]=t[n]||{},0!==Object.keys(e).length&&(t[n][r]=e))}))})),t}function P(e,t,n){e[t]=e[t]||[],e[t][0]?e[t][0].value+=""+n:e[t][0]={value:n}}function M(e,t,n,r){e[t]=e[t]||[],e[t][0]=e[t][0]||{},e[t][0].value={class:"link",text:n,url:r}}function N(e,t,n,r){n=function(e){return e.replace(/\?x-oss-process=image\/resize.+/,"")}(n),e[t]=e[t]||[],e[t][0]=e[t][0]||{},e[t][0].value=r?{class:"image",name:"",src:n}:{class:"image",name:"",status:"needUpload",originSrc:n}}function I(e){return"TABLE"===e.tagName}function F(e){return"PRE"===e.tagName}function B(e){return"IMG"===e.tagName}function V(e){return"A"===e.tagName}function H(e){var t=e.getAttribute("style");return t&&t.startsWith("mso-element")}var z=["BODY","ARTICLE","ASIDE","ADDRESS","DD","DL","FIELDSET","FIGCAPTION","FIGURE","FOOTER","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","P","DIV","PRE","BLOCKQUOTE","UL","OL","LI","TABLE","THEAD","TBODY","TFOOT","SECTION"];function q(e){return 1===e.nodeType&&z.includes(e.tagName)}var U=["B","I","ABBR","CITE","CODE","DFN","DEL","EM","KBD","STRONG","SAMP","A","BDO","Q","SPAN","SUB","SUP","BUTTON","LABEL"];function G(e){return 1===e.nodeType&&U.includes(e.tagName)}function W(e){return"BR"===e.tagName}function Y(e){return 3===e.nodeType}function $(e){if(e.nextSibling)return e.nextSibling;for(var t=e.parentNode;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}return null}function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=e.cloneNode(!0);document.body.appendChild(a);var i=k(a,r),l={};n&&n.forEach((function(e){document.body.appendChild(e),Object.assign(l,ee(e.innerHTML))}));var c={table:[]},s=a.querySelectorAll("col");if(s.length>0){var u={},d=0;s.forEach((function(e){for(var t=parseInt(e.getAttribute("width")),n=e.span,r=0;r<n&&d<i.cols;)u[d]=0!==t?{size:t}:{size:0,hidden:!0,oldSize:120},d+=1,r+=1})),c.columns=u}var f=Array.from(a.rows);c.rows={},f.forEach((function(e,n){if(0===e.offsetHeight&&n!==f.length-1)c.rows[n+t]={size:0,hidden:!0,oldSize:24};else{var r=Math.max(e.offsetHeight,24)||24,o={size:r};24!==r&&(o.customSize=r),c.rows[n+t]=o}}));var p=a.getAttribute("data-startCell");if(p){var h=p.split(":");c.startCell={row:parseInt(h[0])||0,col:parseInt(h[1])||0}}var m=a.getAttribute("data-selectOptions");if(m)try{c.selectOptions=JSON.parse(decodeURIComponent(m))}catch(e){console.log(e)}return i.table.forEach((function(e,n){c.table[n]=[],e.forEach((function(e,a){if(e.element){var i=Z(e.element,r),s=J(e.element),u=X(e.element),d={name:"auto"},f=!1;if(l){var p=e.element.classList&&e.element.classList[0];l[p]&&("object"===o()(l[p])?Object.assign(d,l[p]):d.name=l[p],["currency","number","percentage"].includes(d.name)&&(d.decimal=2),c.table[n][a]=c.table[n][a]||{},c.table[n][a].type=d,["text","auto"].includes(d.name)||(f=!0))}s&&(c.table[n][a]=c.table[n][a]||{},c.table[n][a].style=s),u&&(c.table[n][a]=c.table[n][a]||{},c.table[n][a].note=u),void 0!==i&&""!==i?(c.table[n][a]=c.table[n][a]||{},c.table[n][a].type=d,c.table[n][a].value=i,"string"==typeof i&&((O.test(i)||_.test(i))&&(f=!0),C.test(i)&&"auto"===d.name&&(f=!0,c.table[n][a].type.name="currency",c.table[n][a].type.symbol=S,c.table[n][a].type.decimal=2))):""===i&&c.columns&&c.columns[a]&&c.columns[a].size<=15&&c.columns[a].size>=0&&(f=!0),f&&r&&(c.cellsNeedFix=c.cellsNeedFix||[],c.cellsNeedFix.push({row:n+t,col:a})),e.isMulti&&(c.mergeCells=c.mergeCells||[],c.mergeCells.push({row:n+t,col:a,rowCount:e.rowSpan,colCount:e.colSpan}),s&&(c.table[n+e.rowSpan-1]=c.table[n+e.rowSpan-1]||[],c.table[n+e.rowSpan-1][a+e.colSpan-1]=c.table[n+e.rowSpan-1][a+e.colSpan-1]||{},c.table[n+e.rowSpan-1][a+e.colSpan-1].style=s))}}))})),a.remove(),n&&n.forEach((function(e){e.remove()})),c}function X(e){var t=e.getAttribute("data-note");if(t)try{var n=JSON.parse(decodeURIComponent(t));if(n.text)return n}catch(e){console.log(e)}}function Z(e,t){var n=e.getAttribute("data-value");if(n)try{var r=JSON.parse(decodeURIComponent(n));if(function(e){return!!e.class&&("link"===e.class?e.text&&e.url:"file"===e.class||"image"===e.class?e.name&&e.src:"checkbox"===e.class?void 0!==e.value:"select"===e.class?e.value&&(e.options||e.optionId):"mention"===e.class?e.value&&e.value[0].id&&e.value[0].login:"formula"===e.class&&void 0!==e.formula)}(r))return r}catch(e){console.log(e)}for(var o=e.querySelectorAll("img"),a=o.length,i=0;i<a;i++){var l=o[i].getAttribute("src");if(l)return t?{class:"image",src:l,name:"image"}:{class:"image",status:"needUpload",originSrc:l,name:"image"}}e.innerHTML=e.innerHTML.replace(/<!--\[if[\s\S]+<!--\[endif\]-->/g,"").replace(/<rt[^>]*>[^<]*<\/rt>/g,"").replace(/\n/g,"").replace(/<br>\s*/g,"\n");var c,s=e.innerHTML.replace(/<[^>]+>/g,"").trim();s="string"!=typeof(c=s)?c:c.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&nbsp;/g," ");var u=e.querySelector("a");return u&&u.getAttribute("href")?{class:"link",text:s.replace(/\n/g,""),url:u.getAttribute("href")}:(s.endsWith(" %")&&(s=s.replace(/ %$/,"%")),s)}var Q={"-webkit-left":"left","-webkit-right":"right","-webkit-center":"center",left:"left",right:"right",center:"center","-webkit-baseline-middle":"middle",top:"top",bottom:"bottom",middle:"middle"};function J(e){try{var t=window.getComputedStyle(e),n={};1===e.childNodes.length&&"S"===e.childNodes[0].tagName&&(n.strikeThrough=!0);var r=function(e){var t;-1!==e.indexOf("pt")&&(t=parseInt(e,10));var n=12;if(-1!==e.indexOf("em")?n=parseFloat(e,14):-1!==e.indexOf("px")&&(n=parseFloat(e,10)),t=t||Math.round(n/1.3333333),te[t])return t;var r=Object.keys(te).map((function(e){return parseInt(e,10)}));r.sort();for(var o=0;r[o];){if(r[o]>t)return r[o];o++}return r[o-1]}(t.fontSize);return-1!==t.textDecoration.indexOf("underline")&&(n.underline=!0),-1!==t.textDecoration.indexOf("line-through")&&(n.strikeThrough=!0),(r>12||e.style.fontSize&&e.style.fontSize.indexOf("px")>0)&&(n.fontSize=r),["rgba(0, 0, 0)","rgb(0, 0, 0)","rgba(0, 0, 0, 0.65)","rgb(88, 90, 90)"].includes(t.color)||(n.color=t.color),"italic"===t.fontStyle&&(n.fontStyle=t.fontStyle),"normal"===t.whiteSpace&&e.classList.length>0&&(n.overflow="wrap"),["400",400,"normal"].includes(t.fontWeight)||(n.fontWeight=t.fontWeight),"middle"!==t.verticalAlign&&(n.vAlign=Q[t.verticalAlign]||"middle"),"start"!==t.textAlign&&"left"!==t.textAlign&&(n.hAlign=Q[t.textAlign]||"left"),"rgba(0, 0, 0, 0)"!==t.backgroundColor&&"rgb(255, 255, 255)"!==t.backgroundColor&&(n.backColor=t.backgroundColor),"0px"!==t.borderLeftWidth&&"rgb(204, 204, 204)"!==t.borderLeftColor&&(n.border=n.border||{},n.border.left={color:t.borderLeftColor,lineStyle:"dashed"===t.borderLeftStyle?"dash":"normal"}),"0px"!==t.borderRightWidth&&"rgb(204, 204, 204)"!==t.borderRightColor&&(n.border=n.border||{},n.border.right={color:t.borderRightColor,lineStyle:"dashed"===t.borderRightStyle?"dash":"normal"}),"0px"!==t.borderTopWidth&&"rgb(204, 204, 204)"!==t.borderTopColor&&(n.border=n.border||{},n.border.top={color:t.borderTopColor,lineStyle:"dashed"===t.borderTopStyle?"dash":"normal"}),"0px"!==t.borderBottomWidth&&"rgb(204, 204, 204)"!==t.borderBottomColor&&(n.border=n.border||{},n.border.bottom={color:t.borderBottomColor,lineStyle:"dashed"===t.borderBottomStyle?"dash":"normal"}),0===Object.keys(n).length?null:n}catch(e){return null}}function ee(e){var t=/([^{}]+){([^{}]+)}/,n=e.match(/[^{}]+{([^{}]+)}/g),r={};return n&&n.forEach((function(e){var n=e.match(t);if(n){var o=n[1].trim(),a=n[2];if(o.startsWith(".")){var i=a.match(/mso-number-format:(.+);(\n|$)/);i&&(r[o.substr(1)]=function(e){return-1!==(e=e.replace(/\/|"|\\/g,"")).indexOf("Date")?"date":-1!==e.indexOf("Time")?"time":e.endsWith("%")?"percentage":-1!==e.indexOf(A)?{name:"currency",symbol:A}:-1!==e.indexOf(j)?{name:"currency",symbol:j}:-1!==e.indexOf(S)?{name:"currency",symbol:S}:e.match(/^@$/)?"text":-1!==e.indexOf("General")||-1!==e.indexOf("Standard")||-1!==e.indexOf("Fixed")?"auto":e.match(/(年|月|日|时|分|秒|dd|y|m|h|s|md|dm)/)?e.match(/(时|分|秒|s|h)/)?"datetime":e.match(/[^d]ddd[^d]/)?{name:"datetime",formatter:"dddd"}:"date":-1!==e.indexOf(R)?{name:"currency",symbol:R}:"number"}(i[1]))}}})),0===Object.keys(r).length?null:r}var te={9:12,10:13,11:14,12:16,14:19,16:22,18:24,22:29,24:32,30:40,36:48};function ne(e,t){for(var n=e.length,r=[],o=0;o<n;o++)t(e[o])&&r.push(e[o]);return r}function re(e,t){if(t.workbook&&t.worksheets){for(var n=function(e){if(!e)return null;var t=ve(e).getElementsByTagName("c");if(0!==t.length){for(var n=[],r=0;r<t.length;r++)n.push({cell:t[r].getAttribute("r"),sheetIndex:t[r].getAttribute("i")||1});return 0===n.length?null:w()(n,"sheetIndex")}}(t.calcChain),r=ve(t.workbook).getElementsByTagName("sheet"),a={},i={},l={},c=1,s=0;s<r.length;s++){var u=parseInt(r[s].getAttribute("r:id").replace("rId","")),d=r[s].getAttribute("sheetId"),f=r[s].getAttribute("state");a[d]=u,"hidden"!==f&&(i[c]=u,l[d]=c,c+=1)}if(e.calcChain=[],n)for(var p in n){var h=a[p],m="sheet".concat(h);if(t.worksheets[m])for(var v=ve(t.worksheets[m]).getElementsByTagName("f"),g={},b=0;b<v.length;b++){var y=v[b],k=y.parentNode.getAttribute("r"),x=y.innerHTML.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&nbsp;/g," "),E=y.getAttribute("t"),C=y.getAttribute("ref"),O=y.getAttribute("si");"shared"===E&&(C?g[O]={baseCell:k,formula:x}:x=me(g[O],k));var _=k.match(/\d+/),S=k.match(/[A-Z]+/);_&&(_=parseInt(_[0])-1),S&&(S=fe(S[0]));var R=l[p]-1;if(e.sheet[R])if(e.sheet[R].data[_]=e.sheet[R].data[_]||{},e.sheet[R].data[_][S]=e.sheet[R].data[_][S]||{},"string"==typeof x&&0===x.toLowerCase().indexOf("hyperlink(")){var j=x.substring(10,x.length-1).split(","),A=oe(j[0]),T=j.length>1?oe(j[1]):A;console.log(A,T),e.sheet[R].data[_][S].value={class:"link",url:A,text:T}}else e.sheet[R].data[_][S].value={class:"formula",formula:x,value:e.sheet[R].data[_][S].value||""},e.calcChain.push({row:_,col:S,sheet:R})}}e.sheet.forEach((function(e,n){if(e.cellsNeedFix){var r=i[n+1],a="sheet".concat(r),l=ve(t.worksheets[a]);e.cellsNeedFix.forEach((function(t){var n=t.row,r=t.col,a=he({row:{index:n},col:{index:r}}),i=l.querySelector("c[r=".concat(a,"]"));if(i){var c="s"===i.getAttribute("t"),s=i.querySelector("v");if(s&&s.innerHTML&&!c){var u=e.data[n]&&e.data[n][r]&&e.data[n][r].value,d=e.data[n]&&e.data[n][r]&&e.data[n][r].type,f=s.innerHTML;if(d&&!isNaN(1*f)){var p=1*f,h=p>=367?343:p<61?86400:0;"date"===d.name||"datetime"===d.name||"time"===d.name?f=86400*f+h:["percentage","number","currency"].includes(d.name)&&(f*=1)}u&&"formula"===u.class?u.value=f:"object"!==o()(u)&&(e.data[n]=e.data[n]||{},e.data[n][r]=e.data[n][r]||{},e.data[n][r].value=f)}}})),delete e.cellsNeedFix}}))}}function oe(e){return e.trim().replace(/'/g,"").replace(/"/g,"")}var ae="ABCDEFGHIJKLMNOPQRSTUVWXYZ",ie=ae.length,le=[{type:"whitespace",reg:/^(?:\s+)/},{type:"string",reg:/^(?:"(\\["]|[^"])*")/},{type:"string",reg:/^(?:'(\\[']|[^'])*')/},{type:"function",reg:/^(?:[A-Za-z]{1,}[A-Za-z_0-9\.]+(?=[(]))/},{type:"error",reg:/^(?:#[A-Z0-9\/]+(!|\?)?)/},{type:"sheetCell",reg:/^(?:'{1}[^']+'{1}!{1}\${0,1}[A-Za-z]+\${0,1}[0-9]+)/},{type:"sheetCell",reg:/^(?:[\u4e00-\u9fa5A-Za-z0-9]+!{1}\${0,1}[A-Za-z]+\${0,1}[0-9]+)/},{type:"absoluteCell",reg:/^(?:\$[A-Za-z]+\$[0-9]+)/},{type:"absoluteColCell",reg:/^(?:\$[A-Za-z]+[0-9]+)/},{type:"absoluteRowCell",reg:/^(?:[A-Za-z]+\$[0-9]+)/},{type:"relativeCell",reg:/^(?:[A-Za-z]+[0-9]+)/},{type:"colRange",reg:/^(?:[A-Za-z]+:[A-Za-z]+)/},{type:"colRange",reg:/^(?:'{1}[\u4e00-\u9fa5A-Za-z0-9]+'{1}!{1}[A-Za-z]+:[A-Za-z]+)/},{type:"colRange",reg:/^(?:[\u4e00-\u9fa5A-Za-z0-9]+!{1}[A-Za-z]+:[A-Za-z]+)/},{type:"rowRange",reg:/^(?:[0-9]+:[0-9]+)/},{type:"rowRange",reg:/^(?:'{1}[\u4e00-\u9fa5A-Za-z0-9]+'{1}!{1}[0-9]+:[0-9]+)/},{type:"rowRange",reg:/^(?:[\u4e00-\u9fa5A-Za-z0-9]+!{1}[0-9]+:[0-9]+)/},{type:"mixRange",reg:/^(?:[0-9]+:[0-9]+)/},{type:"function",reg:/^(?:[A-Za-z\.0-9]+(?=[(]))/},{type:"variable",reg:/^(?:[A-Za-z]{1,}[A-Za-z_0-9]+)/},{type:"number",reg:/^(?:[0-9]+)/},{type:"array",reg:/^(?:\[(.*)?\])/},{type:"&",reg:/^(?:&)/},{type:"whitespace",reg:/^(?: )/},{type:"decimal",reg:/^(?:[.])/},{type:":",reg:/^(?::)/},{type:";",reg:/^(?:;)/},{type:",",reg:/^(?:,)/},{type:"*",reg:/^(?:\*)/},{type:"/",reg:/^(?:\/)/},{type:"-",reg:/^(?:-)/},{type:"+",reg:/^(?:\+)/},{type:"^",reg:"/^(?:^)/,"},{type:"(",reg:/^(?:\()/},{type:")",reg:/^(?:\))/},{type:">",reg:/^(?:>)/},{type:"<",reg:/^(?:<)/},{type:"NOT",reg:/^(?:NOT\b)/},{type:'"',reg:/^(?:")/},{type:"'",reg:/^(?:')/},{type:"!",reg:/^(?:!)/},{type:"=",reg:/^(?:=)/},{type:"%",reg:/^(?:%)/},{type:"#",reg:/^(?:[#])/},{type:"EOF",reg:/^(?:$)/}],ce=/^([\u4e00-\u9fa5A-Za-z0-9]+!{1})/,se=/^'{1}(.+'{1}!{1})/,ue=/^([$])?([A-Za-z]+)([$])?([0-9]+)$/;function de(e){var t=parseInt(e,10);return isNaN(t)?-1:Math.max(t-1,-1)}function fe(e){var t=0;if("string"==typeof e)for(var n=0,r=e.length-1;n<e.length;n+=1,r-=1)t+=Math.pow(ie,r)*(ae.indexOf(e[n])+1);return t-1}function pe(e){var t=function(e){var t=null,n=e,r=e.match(ce);return r?(n=e.substring(r[0].length),t=r[0].slice(0,-1)):(r=e.match(se))&&(n=e.substring(r[0].length),t=r[0].slice(1,-2)),{sheet:t,label:n.toUpperCase()}}(e),n=t.label.match(ue),r=b()(n,5),o=r[1],a=r[2],i=r[3],l=r[4];return{row:{index:de(l),label:l,absolute:"$"===i},col:{index:fe(a),label:a,absolute:"$"===o},sheet:t.sheet}}function he(e){var t=(e.row.absolute?"$":"")+(e.row.index+1);return function(e,t){return t?/^[A-Za-z0-9]+$/.test(t)&&!t.match(/^[A-Za-z]{1,3}[0-9]+/)?"".concat(t,"!").concat(e):"'".concat(t,"'!").concat(e):e}((e.col.absolute?"$":"")+function e(t){var n=ae.substr(t%26,1),r=Math.floor(t/26);return r>0?"".concat(e(r-1)).concat(n):n}(e.col.index)+t,e.sheet)}function me(e,t){var n=e.baseCell,r=e.formula,o=pe(n),a=pe(t);return function(e,t,n,r){var o=function(e,t){var n=[];e=(e+"").replace(/\s/g,"");for(var r=function(){var t=void 0,r=void 0,o=void 0;le.forEach((function(n){(o=e.match(n.reg))&&(!t||o[0].length>t[0].length)&&(t=o,r=n.type)})),t?(n.push({text:t[0],type:r}),e=e.slice(t[0].length)):(n.push({text:e[0],type:"other"}),e=e.slice(1)),t=null};e.length>0;)r();for(var o=n.length,a=0;a<o-2;a++)n[a].type.indexOf("Cell")>0&&":"===n[a+1].type&&n[a+2].type.indexOf("Cell")<0&&(n[a+1].type="colon");return n}(e),a="";return o.forEach((function(e){if(e.type.indexOf("Cell")>0){var r=pe(e.text);r.row.index+=r.row.absolute?0:t,r.col.index+=r.col.absolute?0:n,a+=he(r)}else a+=e.text})),a}(r,a.row.index-o.row.index,a.col.index-o.col.index)}function ve(e){return(new DOMParser).parseFromString(e,"text/xml")}function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&(e=[e]);var n={format:"lakesheet",type:"Sheet",version:"1.0",larkJson:!0,sheet:[]},r=t.names,o=void 0===r?[]:r,a=t.deflate,i=void 0!==a&&a,l=t.worksheetsDeflate,c=void 0!==l&&l,s=t.xml;if(e.forEach((function(e,t){i&&(e=u.a.inflate(e,{to:"string"}));var r=T(e,t,o[t],{rowCount:50,colCount:20},!0);r.selectOptions&&(n.selectOptions=n.selectOptions||{},Object.assign(n.selectOptions,r.selectOptions),delete r.selectOptions),n.sheet.push(r)})),s){if(c&&s.worksheets){var d={};for(var f in s.worksheets){var p=s.worksheets[f];d[f]=u.a.inflate(p,{to:"string"})}s.worksheets=d}re(n,s)}return n.sheet=u.a.deflate(JSON.stringify(n.sheet),{to:"string"}),n}},3009:function(e,t,n){var r=n(2978),o=n(3010),a=n(240);e.exports=function(e){return e&&e.length?r(e,a,o):void 0}},3010:function(e,t){e.exports=function(e,t){return e>t}},3016:function(e,t,n){"use strict";function r(e){return e*e*e}function o(e){return--e*e*e+1}function a(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a}))},3017:function(e,t,n){t.Connection=n(3018),t.Doc=n(2962),t.Error=n(2917),t.Query=n(2963),t.types=n(2918),t.logger=n(2916)},3018:function(e,t,n){(function(t){var r=n(2962),o=n(2963),a=n(3020),i=n(3022),l=n(2839),c=n(2917),s=n(2918),u=n(2840),d=n(2916),f=c.CODES;function p(e){return 0===e.readyState||1===e.readyState?"connecting":"disconnected"}function h(e){l.EventEmitter.call(this),this.collections={},this.nextQueryId=1,this.nextSnapshotRequestId=1,this.queries={},this._snapshotRequests={},this.seq=1,this.id=null,this.agent=null,this.debug=!1,this.state=p(e),this.bindToSocket(e)}function m(e,t){var n=new Error(e.message);return n.code=e.code,t&&(n.data=t),n}function v(e){return e.hasPending()}function g(e){return e.hasWritePending()}e.exports=h,l.mixin(h),h.prototype.bindToSocket=function(e){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=e;var n=p(e);this._setState(n),this.canSend=!1;var r=this;e.onmessage=function(e){try{var n="string"==typeof e.data?JSON.parse(e.data):e.data}catch(t){return void d.warn("Failed to parse message",e)}r.debug&&d.info("RECV",JSON.stringify(n));var o={data:n};if(r.emit("receive",o),o.data)try{r.handleMessage(o.data)}catch(e){t.nextTick((function(){r.emit("error",e)}))}},1===e.readyState&&r._initializeHandshake(),e.onopen=function(){r._setState("connecting"),r._initializeHandshake()},e.onerror=function(e){r.emit("connection error",e)},e.onclose=function(e){"closed"===e||"Closed"===e?r._setState("closed",e):"stopped"===e||"Stopped by server"===e?r._setState("stopped",e):r._setState("disconnected",e)}},h.prototype.handleMessage=function(e){var t=null;switch(e.error&&(t=m(e.error,e),delete e.error),e.a){case"init":return this._handleLegacyInit(e);case"hs":return this._handleHandshake(t,e);case"qf":return void((n=this.queries[e.id])&&n._handleFetch(t,e.data,e.extra));case"qs":return void((n=this.queries[e.id])&&n._handleSubscribe(t,e.data,e.extra));case"qu":return;case"q":var n;if(!(n=this.queries[e.id]))return;return t?n._handleError(t):(e.diff&&n._handleDiff(e.diff),void(e.hasOwnProperty("extra")&&n._handleExtra(e.extra)));case"bf":return this._handleBulkMessage(t,e,"_handleFetch");case"bs":return this._handleBulkMessage(t,e,"_handleSubscribe");case"bu":return this._handleBulkMessage(t,e,"_handleUnsubscribe");case"nf":case"nt":return this._handleSnapshotFetch(t,e);case"f":return void((r=this.getExisting(e.c,e.d))&&r._handleFetch(t,e.data));case"s":return void((r=this.getExisting(e.c,e.d))&&r._handleSubscribe(t,e.data));case"u":return void((r=this.getExisting(e.c,e.d))&&r._handleUnsubscribe(t));case"op":var r;return void((r=this.getExisting(e.c,e.d))&&r._handleOp(t,e));default:d.warn("Ignoring unrecognized message",e)}},h.prototype._handleBulkMessage=function(e,t,n){if(t.data)for(var r in t.data){var o=t.data[r];(i=this.getExisting(t.c,r))&&(e?i[n](e):o.error?i[n](m(o.error)):i[n](null,o))}else if(Array.isArray(t.b))for(var a=0;a<t.b.length;a++){r=t.b[a];(i=this.getExisting(t.c,r))&&i[n](e)}else if(t.b)for(var r in t.b){var i;(i=this.getExisting(t.c,r))&&i[n](e)}else d.error("Invalid bulk message",t)},h.prototype._reset=function(){this.agent=null},h.prototype._setState=function(e,t){if(this.state!==e){if("connecting"===e&&"disconnected"!==this.state&&"stopped"!==this.state&&"closed"!==this.state||"connected"===e&&"connecting"!==this.state){var n=new c(f.ERR_CONNECTION_STATE_TRANSITION_INVALID,"Cannot transition directly from "+this.state+" to "+e);return this.emit("error",n)}for(var r in this.state=e,this.canSend="connected"===e,"disconnected"!==e&&"stopped"!==e&&"closed"!==e||this._reset(),this.startBulk(),this.queries){this.queries[r]._onConnectionStateChanged()}for(var o in this.collections){var a=this.collections[o];for(var r in a)a[r]._onConnectionStateChanged()}for(var r in this._snapshotRequests){this._snapshotRequests[r]._onConnectionStateChanged()}this.endBulk(),this.emit(e,t),this.emit("state",e,t)}},h.prototype.startBulk=function(){this.bulk||(this.bulk={})},h.prototype.endBulk=function(){if(this.bulk)for(var e in this.bulk){var t=this.bulk[e];this._sendBulk("f",e,t.f),this._sendBulk("s",e,t.s),this._sendBulk("u",e,t.u)}this.bulk=null},h.prototype._sendBulk=function(e,t,n){if(n){var r,o=[],a={},i=0;for(var l in n){var c=n[l];null==c?o.push(l):(a[l]=c,r=l,i++)}if(1===o.length){l=o[0];this.send({a:e,c:t,d:l})}else o.length&&this.send({a:"b"+e,c:t,b:o});if(1===i){var s=a[r];this.send({a:e,c:t,d:r,v:s})}else i&&this.send({a:"b"+e,c:t,b:a})}},h.prototype._sendAction=function(e,t,n){if(this._addDoc(t),this.bulk){var r=this.bulk[t.collection]||(this.bulk[t.collection]={}),o=r[e]||(r[e]={}),a=o.hasOwnProperty(t.id);return o[t.id]=n,a}var i={a:e,c:t.collection,d:t.id,v:n};this.send(i)},h.prototype.sendFetch=function(e){return this._sendAction("f",e,e.version)},h.prototype.sendSubscribe=function(e){return this._sendAction("s",e,e.version)},h.prototype.sendUnsubscribe=function(e){return this._sendAction("u",e)},h.prototype.sendOp=function(e,t){this._addDoc(e);var n={a:"op",c:e.collection,d:e.id,v:e.version,src:t.src,seq:t.seq};t.op&&(n.op=t.op),t.create&&(n.create=t.create),t.del&&(n.del=t.del),this.send(n)},h.prototype.send=function(e){this.debug&&d.info("SEND",JSON.stringify(e)),this.emit("send",e),this.socket.send(JSON.stringify(e))},h.prototype.close=function(){this.socket.close()},h.prototype.getExisting=function(e,t){if(this.collections[e])return this.collections[e][t]},h.prototype.get=function(e,t){var n=this.collections[e]||(this.collections[e]={}),o=n[t];return o||(o=n[t]=new r(this,e,t),this.emit("doc",o)),o},h.prototype._destroyDoc=function(e){var t=this.collections[e.collection];t&&(delete t[e.id],u.hasKeys(t)||delete this.collections[e.collection])},h.prototype._addDoc=function(e){var t=this.collections[e.collection];t||(t=this.collections[e.collection]={}),t[e.id]!==e&&(t[e.id]=e)},h.prototype._createQuery=function(e,t,n,r,a){var i=this.nextQueryId++,l=new o(e,this,i,t,n,r,a);return this.queries[i]=l,l.send(),l},h.prototype._destroyQuery=function(e){delete this.queries[e.id]},h.prototype.createFetchQuery=function(e,t,n,r){return this._createQuery("qf",e,t,n,r)},h.prototype.createSubscribeQuery=function(e,t,n,r){return this._createQuery("qs",e,t,n,r)},h.prototype.hasPending=function(){return!!(this._firstDoc(v)||this._firstQuery(v)||this._firstSnapshotRequest())},h.prototype.hasWritePending=function(){return!!this._firstDoc(g)},h.prototype.whenNothingPending=function(e){var n=this._firstDoc(v);if(n)n.once("nothing pending",this._nothingPendingRetry(e));else{var r=this._firstQuery(v);if(r)r.once("ready",this._nothingPendingRetry(e));else{var o=this._firstSnapshotRequest();o?o.once("ready",this._nothingPendingRetry(e)):t.nextTick(e)}}},h.prototype._nothingPendingRetry=function(e){var n=this;return function(){t.nextTick((function(){n.whenNothingPending(e)}))}},h.prototype._firstDoc=function(e){for(var t in this.collections){var n=this.collections[t];for(var r in n){var o=n[r];if(e(o))return o}}},h.prototype._firstQuery=function(e){for(var t in this.queries){var n=this.queries[t];if(e(n))return n}},h.prototype._firstSnapshotRequest=function(){for(var e in this._snapshotRequests)return this._snapshotRequests[e]},h.prototype.fetchSnapshot=function(e,t,n,r){"function"==typeof n&&(r=n,n=null);var o=this.nextSnapshotRequestId++,i=new a(this,o,e,t,n,r);this._snapshotRequests[i.requestId]=i,i.send()},h.prototype.fetchSnapshotByTimestamp=function(e,t,n,r){"function"==typeof n&&(r=n,n=null);var o=this.nextSnapshotRequestId++,a=new i(this,o,e,t,n,r);this._snapshotRequests[a.requestId]=a,a.send()},h.prototype._handleSnapshotFetch=function(e,t){var n=this._snapshotRequests[t.id];n&&(delete this._snapshotRequests[t.id],n._handleResponse(e,t))},h.prototype._handleLegacyInit=function(e){e.protocolMinor||this._initialize(e)},h.prototype._initializeHandshake=function(){this.send({a:"hs",id:this.id})},h.prototype._handleHandshake=function(e,t){if(e)return this.emit("error",e);this._initialize(t)},h.prototype._initialize=function(e){return 1!==e.protocol?this.emit("error",new c(f.ERR_PROTOCOL_VERSION_NOT_SUPPORTED,"Unsupported protocol version: "+e.protocol)):s.map[e.type]!==s.defaultType?this.emit("error",new c(f.ERR_DEFAULT_TYPE_MISMATCH,e.type+" does not match the server default type")):"string"!=typeof e.id?this.emit("error",new c(f.ERR_CLIENT_ID_BADLY_FORMED,"Client id must be a string")):(this.id=e.id,void this._setState("connected"))}}).call(this,n(242))},3019:function(e,t){var n=["info","warn","error"];function r(){var e={};n.forEach((function(t){e[t]=console[t].bind(console)})),this.setMethods(e)}e.exports=r,r.prototype.setMethods=function(e){e=e||{};var t=this;n.forEach((function(n){"function"==typeof e[n]&&(t[n]=e[n])}))}},302:function(e,t,n){"use strict";n(1080);var r=n(322);n(1098);t.a=r.a},3020:function(e,t,n){var r=n(2964),o=n(2840);function a(e,t,n,a,i,l){if(r.call(this,e,t,n,a,l),!o.isValidVersion(i))throw new Error("Snapshot version must be a positive integer or null");this.version=i}e.exports=a,a.prototype=Object.create(r.prototype),a.prototype._message=function(){return{a:"nf",id:this.requestId,c:this.collection,d:this.id,v:this.version}}},3021:function(e,t){e.exports=function(e,t,n,r,o){this.id=e,this.v=t,this.type=n,this.data=r,this.m=o}},3022:function(e,t,n){var r=n(2964),o=n(2840);function a(e,t,n,a,i,l){if(r.call(this,e,t,n,a,l),!o.isValidTimestamp(i))throw new Error("Snapshot timestamp must be a positive integer or null");this.timestamp=i}e.exports=a,a.prototype=Object.create(r.prototype),a.prototype._message=function(){return{a:"nt",id:this.requestId,c:this.collection,d:this.id,ts:this.timestamp}}},3028:function(e,t,n){"use strict";n(63);var r=n(23),o=n(106),a=n.n(o),i=n(2980),l=n(1702),c=n(2976),s=n(297),u=n(2766),d=n(369),f=n(33),p=n(2770),h=n(241),m=n(289),v=n.n(m),g=n(2977),b=n(125),y=n(2930),w={adaptDocPreviewImageToFormData:function(e){for(var t=new FormData,n=e.replace(/^data:image\/\w+;base64,/,""),r=window.atob(n),o=new Uint8Array(r.length),a=0;a<r.length;a++)o[a]=r.charCodeAt(a);var i=new Blob([o],{type:"image/png"});return t.append("file",i,"image.png"),t}};Object.assign(w,y.a);var k=w;function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function E(){E=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new S(o||[]);return r(i,"_invoke",{value:k(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function p(){}function h(){}var m={};c(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(R([])));g&&g!==t&&n.call(g,a)&&(m=g);var b=h.prototype=f.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==x(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=C(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return p.prototype=h,r(b,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,l,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function C(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===x(a)?a:String(a)),r)}var o,a}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var T=a()("editor:doc.biz"),L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(l,e);var t,n,r,o,a,i=R(l);function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return O(this,l),(t=i.call(this,e,n)).dispatch=r,t.storage=b.a,t}return t=l,n=[{key:"doSaveOutdatedDocVersion",value:(o=E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.docVersions.create(t);case 2:case"end":return e.stop()}}),e)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function i(e){C(a,n,r,i,l,"next",e)}function l(e){C(a,n,r,i,l,"throw",e)}i(void 0)}))},function(e){return a.apply(this,arguments)})}],r=[{key:"uploadCover",value:function(e){var t=e.image,n=e.doc_id,r=window.navigator.userAgent,o=v.a.detect(r);if(o.msie||o.msedge)return Promise.resolve(null);var a="/api/upload/attach?attachment_type=Doc&attachment_id=".concat(n,"type=image"),i=k.adaptDocPreviewImageToFormData(t);return new Promise((function(e,t){Object(h.ajax)({url:a,data:i,dataType:"json",success:function(t){T("upload cover success",t.data),e(t.data.url)},error:function(){T("upload cover error"),t(new Error("DocEditorBiz.uploadCover failed."))},method:"POST",processData:!1})}))}}],n&&_(t.prototype,n),r&&_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(g.a),D=L;function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=window.appData.callbackURL;if(n){if("SAME"===n)return;e=n}e&&(t.beforeRedirect&&t.beforeRedirect(),window.location.href=e)}var M=n(2837),N=n(3017),I=n.n(N),F=n(34),B=n.n(F),V=n(182),H=n(2914),z=n(75),q=n.n(z),U=n(357),G=n.n(U);function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==W(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===W(a)?a:String(a)),r)}var o,a}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var o=Z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return X(this,n)}}function X(e,t){if(t&&("object"===W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(a,e);var t,n,r,o=K(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=o.call(this)).doc=e,n.clientId=t?t.clientId:G()(),t&&t instanceof a&&(n.parent=t),n.subCollabDoc={},n._init(),n}return t=a,(n=[{key:"data",get:function(){return this.collabId?this.doc.data[this.collabId]:this.doc.data}},{key:"commands",get:function(){var e,t;return this.collabId?null===(t=this.doc.data[this.collabId])||void 0===t?void 0:t.commands:null===(e=this.doc.data)||void 0===e?void 0:e.commands}},{key:"setClientId",value:function(e){this.clientId=e}},{key:"_init",value:function(){var e=this;this.doc.on("op",(function(t,n){if(e.clientId!==n&&0!==(t=e._pickOps(t)).length){var r=t.filter((function(e){return"commands"===e.p[0]&&e.li})),o=t.filter((function(e){return"commands"!==e.p[0]}));r.length>0&&e.emit("command",r.map((function(e){return e.li}))),o.length>0&&e.emit("op",o)}}))}},{key:"_setCollabId",value:function(e){this.parent&&(this.collabId=e)}},{key:"createSub",value:function(e){if(this.parent)throw new Error("只支持1级子协同");if(void 0===e)throw new Error("需要传递 collabId");this.subCollabDoc[e]&&this._collabIdExistError();var t=new a(this.doc,this);return t._setCollabId(e),this.subCollabDoc[e]=t,t}},{key:"submitOp",value:function(e){this.parent&&(e=this._transformToParentOp(e)),this.doc.submitOp(e,{source:this.clientId})}},{key:"submitCommand",value:function(e){this.data&&this.data.commands||this.submitOp([{p:["commands"],oi:[]}]);var t=this.data.commands.length;this.submitOp([{p:["commands",t],li:e}])}},{key:"create",value:function(e){if(this.parent)return this._requireCollabId(),void this.doc.submitOp([{p:[this.collabId],oi:e}],{source:this.clientId});this.doc.create(e,"json0",{source:this.clientId})}},{key:"_pickOps",value:function(e){var t=this;return this.collabId?e.filter((function(e){return e.p[0]===t.collabId})).map((function(e){var t=q()(e);return t.p=t.p.slice(1),t})):e.filter((function(e){return!t.subCollabDoc[e.p[0]]})).map((function(e){return q()(e)}))}},{key:"_transformToParentOp",value:function(e){var t=this;return this._requireCollabId(),e.forEach((function(e){e.p=[t.collabId].concat(e.p)})),e}},{key:"_requireCollabId",value:function(){if(!this.collabId)throw new Error("缺少 collabId")}},{key:"_collabIdExistError",value:function(){throw new Error("collabId 已存在")}}])&&Y(t.prototype,n),r&&Y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(B.a);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ce(r.key),r)}}function ne(e,t){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ne(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ie(e);if(t){var o=ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oe(this,n)}}function oe(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ae(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function le(e,t,n){return(t=ce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e){var t=function(e,t){if("object"!==J(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===J(t)?t:String(t)}var se=a()("editor:doc:collabManager"),ue=["#597EF7","#73D13D","#FF4D4F","#9254DE","#36CFC9","#FFA940","#F759AB","#40A9FF"],de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(a,e);var t,n,r,o=re(a);function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),le(ae(r=o.call(this)),"onMessage",(function(e){var t=JSON.parse(e.data);if(t.action&&se("message, action: ",t.action,t.data),"members"===t.action)return r.engine.setCollabMembers(t.data),r.addMembers(t.data),void r.reportCollabUserCount(t.data.length);if("join"===t.action)return r.engine.addCollabMember(t.data),void r.addMembers([t.data]);if("leave"===t.action)return r.engine.removeCollabMember(t.data),void r.removeMember(t.data);("ready"===t.action&&(r.engine.setCurrentMember(t.data),r.currentMember=t.data,r.loadCollabDoc()),"broadcast"===t.action)&&(t.data.body.user.uuid!==r.currentMember.uuid&&r.emit(p.i.message,t.data))})),r.doc=e,r.dispatch=t,r.ctx=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n),r.initialContent=n.initialContent,r.socket=null,r.engine=n.engine,r.userClients=[],r.currentMember=null,r}return t=a,(n=[{key:"reset",value:function(){this.userClients=[],this.currentMember=null,this.disconnect()}},{key:"resetDoc",value:function(e){this.doc=e,e.collab&&(this.ctx.collab=e.collab)}},{key:"connect",value:function(){var e=this;this.reset();var t=this.ctx.collab,n="".concat(t.host,"/?id=").concat(t.id,"&token=").concat(t.token);se("connect",n);var r=new H.a(n);r.on("ready",(function(t){t&&(e.socket=t,t.addEventListener("message",e.onMessage),e.connectTime=+new Date)})),r.on("close",(function(t){se("collab server connection close",{event:t});var n=!!e.socket;e.disconnect(),!n||e.justConnect()?e.emit(p.i.error,{code:p.d.CONNECT_COLLAB_SERVER_FAILED}):e.emit(p.i.error,{code:p.d.DISCONNECTED})})),r.on("error",(function(e){throw se("collab server connection close",{event:e}),e})),r.on("congestion",(function(){e.transmitNetStatus(p.g.congestion)})),r.on("congestionEnd",(function(){e.transmitNetStatus(p.g.online)})),this.connection=r}},{key:"justConnect",value:function(){return this.connectTime&&+new Date-this.connectTime<2e4}},{key:"reportCollabUserCount",value:function(e){var t=this.doc.format;V.a.logCollabUserCount(t,e)}},{key:"loadCollabDoc",value:function(){var e=this,t=this.ctx.collab;se("start load collab doc",t.id);var n=new I.a.Connection(this.socket);n.on("receive",(function(e){se("receive",e.data)}));var r=n.get("lake",t.id);r.subscribe((function(t){if(t)se("collab doc subscribe error",t);else try{se("ot doc loaded",r),e.initOt(r),e.emit(p.i.collabUsersChange,e.normalizeMembers())}catch(t){e.emit(p.i.error,{code:p.d.COLLAB_DATA_INIT_ERROR,message:t.message})}})),r.on("create",(function(){se("collab doc create",r)})),r.on("load",(function(){})),r.on("op",(function(e,t){})),r.on("del",(function(e,t){se("collab doc deleted",e,t)})),r.on("error",(function(e){se("collab doc error",{error:e,origin_code:e.code})}))}},{key:"initOt",value:function(e){se("init ot"),this.engine.initCollabDoc(new Q(e)),this.connection.startHeartBeat(),this.emit("ready")}},{key:"disconnect",value:function(){try{this.socket&&(this.socket.removeEventListener("message",this.onMessage),this.socket=null),this.connection&&(this.connection.disconnect(),this.connection=null)}catch(e){}}},{key:"isAlive",value:function(){return!!this.connection}},{key:"isOnlyOneCollabSession",value:function(){return 1===this.userClients.length}},{key:"needRedirectToLock",value:function(){return!this.socket||!(!this.connection||"congestion"!==this.connection.netStatus||!this.isOnlyOneCollabSession())}},{key:"onDocDeleted",value:function(){se("doc deleted"),this.connection&&this.connection.broadcast(p.f.DOC_DELETED,{user:this.currentMember})}},{key:"onDocPublished",value:function(){se("doc deleted"),this.connection&&this.connection.broadcast(p.f.DOC_PUBLISHED,{user:this.currentMember})}},{key:"addMembers",value:function(e){this.userClients=this.userClients.concat(e),this.emit(p.i.collabUsersChange,this.normalizeMembers())}},{key:"removeMember",value:function(e){this.userClients=this.userClients.filter((function(t){return t.uuid!==e.uuid})),this.emit(p.i.collabUsersChange,this.normalizeMembers())}},{key:"setMemberColor",value:function(e){var t=((e.iid||1)-1)%ue.length;e.color=ue[t]}},{key:"normalizeMembers",value:function(){for(var e=[],t={},n=this.userClients.length;n>0;n--){var r=this.userClients[n-1];r.color||(r.color=this.setMemberColor(r)),t[r.login]||(t[r.login]=r,r.login!==this.ctx.me.login&&e.push(r))}return e}},{key:"transmitNetStatus",value:function(e){this.emit(p.i.netStatusChange,e)}}])&&te(t.prototype,n),r&&te(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(B.a),fe=de;function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(){ve=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new O(o||[]);return r(i,"_invoke",{value:k(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function p(){}function h(){}var m={};c(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(_([])));g&&g!==t&&n.call(g,a)&&(m=g);var b=h.prototype=f.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==pe(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,r(b,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,l,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=_,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function we(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ye(a,r,o,i,l,"next",e)}function l(e){ye(a,r,o,i,l,"throw",e)}i(void 0)}))}}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Re(r.key),r)}}function xe(e,t){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xe(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_e(e);if(t){var o=_e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ce(this,n)}}function Ce(e,t){if(t&&("object"===pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Oe(e)}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_e(e)}function Se(e,t,n){return(t=Re(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e){var t=function(e,t){if("object"!==pe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pe(t)?t:String(t)}var je=a()("editor:doc:wf"),Ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(y,e);var t,n,o,a,i,h,m,v,g,b=Ee(y);function y(e){var t,n=e.group,o=e.book,a=e.doc,i=e.docDomain,u=e.dispatch,d=e.params,h=e.mode,m=e.onPublishSuccessRedirect,v=void 0===m?function(e){return setTimeout((function(){return P(e)}),1e3)}:m,g=(e.disableAutoSave,e.me),w=void 0===g?window.appData.me:g;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),Se(Oe(t=b.call(this,{doc:a,mode:h})),"doBindEvents",(function(){t.pageStatus.on(c.a.CLOSE,t.onPageLeave.bind(Oe(t))),t.pageStatus.on(c.a.INACTIVE,t.onPageInactive.bind(Oe(t))),t.pageStatus.on(c.a.ACTIVE,t.onPageActive.bind(Oe(t))),t.pageStatus.on(c.a.ONLINE,t.onPageOnline.bind(Oe(t))),t.pageStatus.on(c.a.OFFLINE,t.onPageOffline.bind(Oe(t))),t.pageStatus.registerCloseChecker(t.closeAble.bind(Oe(t))),t.pageStatus.on(c.a.INACTIVE,(function(){t.performance.pause()})),t.pageStatus.on(c.a.ACTIVE,(function(){t.performance.resume()})),t.pageStatus.on(c.a.CLOSE,(function(){t.performance.reportSmooth(),t.userAction.report()}))})),Se(Oe(t),"_fetchMentionDocsHandler",(function(e,n){return e.map((function(e){return e.group=n?t.group.name:e.group_name,e.book=n?t.book.name:e.belong,e}))})),Se(Oe(t),"getDefaultSuggestions",we(ve().mark((function e(){var n;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([null!==(n=t.book.abilities)&&void 0!==n&&n.read?f.a.books.docs({id:t.book.id,order_by:"published_at"}):[],f.a.users.listDocContextUsers({id:t.doc.id})]).then((function(e){var n=ge(e,2),r=n[0],o=n[1];return{docs:t._fetchMentionDocsHandler(r,!0),users:o}})));case 1:case"end":return e.stop()}}),e)})))),Se(Oe(t),"onMentionSearch",function(){var e=we(ve().mark((function e(n,r){var o,a;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",t.getDefaultSuggestions());case 2:return o=function(){var e=we(ve().mark((function e(){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=6;break}return e.next=3,f.a.books.docs({id:t.book.id,order_by:"published_at"}).then((function(e){return t._fetchMentionDocsHandler(e,!0)}));case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,f.a.editor.search({q:n,type:"content",related:!0,range:"title"}).then((function(e){return t._fetchMentionDocsHandler(e||[])}));case 8:e.t0=e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=we(ve().mark((function e(){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.users.complete({q:n,target_type:t.docDomain,target_id:t.doc.id}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",Promise.all([o(),a()]).then((function(e){return{docs:e[0],users:e[1]}})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Se(Oe(t),"doSaveDoc",function(){var e=we(ve().mark((function e(n){var r,o,a,i,c,u,d,f,h,m,v,g,b,y,w;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oe(t),o=r.doc,a=o.id,i=o.format,c={fullHTML:t.openEditorConfig.fullHTML},"Table"===o.type&&n===p.h.USER_PUBLISH&&(c.fullBody=!0),u=t.engine.getEditorContent(c),d=u.content,f=u.html,h=u.premium,m=u.premiumHtml,je("doSaveDoc",t.currentMode),v={premium_body_asl:h,premium_body_html:m,save_type:n===p.h.AUTO?"auto":"user",edit_type:"collab"===t.currentMode?l.EDIT_TYPE.LAKE_COLLAB:l.EDIT_TYPE.LAKE},t.autoPublish&&(v.target_uuid=new URLSearchParams(window.location.search).get("toc_node_uuid")),g={id:a,format:l.FORMAT_REPAIR_MAP[i]||i,body_asl:d,body:f,body_html:f,draft_version:o.draft_version,sync_dynamic_data:!1},"Show"===o.type&&(g.cover=(null==n||null===(b=n.shows)||void 0===b||null===(y=b[0])||void 0===y?void 0:y.thumb)||null),g.draft_version||(g._without_draft_version=1),je("doc save lake doc: ",g),e.next=15,t.modelProxy.updateContent(t.docDomain===s.DOCLET?g:me(me({},g),v),{ignoreGlobalMessage:!0});case 15:return w=e.sent,e.abrupt("return",w);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Se(Oe(t),"doPublishDoc",function(){var e=we(ve().mark((function e(n){var r,o,a,i;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.autoPublish){e.next=2;break}return e.abrupt("return");case 2:return n=n||{notify:!1},r={id:t.doc.id,force:!1,notify:!0===n.notify,cover:null,ignoreGlobalMessage:!0},window.h5&&(r.insertToCatalog=!0),(o=t.engine.getPremium())&&(r.premium=o),e.next=9,t.getDocCover();case 9:return(a=e.sent)&&(r.cover=a),i=t.docDomain===s.DOCLET?{id:t.doc.id}:r,e.next=14,t.modelProxy.publish(i,{ignoreGlobalMessage:!0});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Se(Oe(t),"getOpenEditorConfig",(function(){return t.openEditorConfig})),Se(Oe(t),"useTemplate",(function(e){var n,o=e.title,a=e.content;t.engine.setContent(a),t.transmitDocStatus(p.a.changed);var i=(null==o||null===(n=o.trim)||void 0===n?void 0:n.call(o))||t.doc.title;t.isDefaultTitle(i)||f.a.docs.updateMeta({id:t.doc.id,title:i}).then((function(){t.dispatch({type:"doc/update",payload:{title:i}})})).catch((function(e){r.a.warn("save title failed")})),t.doc.title=i})),t.group=n,t.book=o,t.params=d||{},t.dispatch=u,t.me=w,t.docDomain=i||s.DOC,t.modelProxy=i===s.DOCLET?f.a.doclets:f.a.docs,t.onPublishSuccessRedirect=v,t.openEditorConfig=new M.a,t.pageStatus=new c.b,t}return t=y,n=[{key:"autoPublish",get:function(){return this.book&&this.book.enable_auto_publish&&this.docDomain!==s.DOCLET}},{key:"onStarted",value:function(){this.startAutoSave(),this.performance.startHeartbeat()}},{key:"onSaveSuccess",value:function(){if(this.startAutoSave(),this.autoPublish)try{this.saveEditorMeta({isDraft:!1})}catch(e){je("saveEditorMeta error",e)}this.performance.reportSmooth()}},{key:"startAutoSave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;if(this.disableAutoSave)return!1;this.autoSaveTimer&&clearTimeout(this.autoSaveTimer),this.autoSaveTimer=setTimeout((function(){e._inStopWatch("autosaveConflict")?e.startAutoSave(10):(e.save(p.h.AUTO),e.startAutoSave())}),1e3*t)}},{key:"onLockError",value:function(e){return e.code===p.d.LOCKED_BY_COLLAB&&this.defaultMode===p.b.COLLAB&&this.collabConnected&&(e.code=p.d.LOCKED_BY_COLLAB_DISCONNECT),!1}},{key:"createEditorBiz",value:function(e){return new D(e,{docDomain:this.docDomain},this.dispatch)}},{key:"onDocUpdated",value:function(e){var t={};!e.contributors||this.doc.contributors&&this.doc.contributors.length===e.contributors.length||(t.contributors=e.contributors),t.content_updated_at=e.content_updated_at,this.dispatch({type:"doc/update",payload:me({},t)}),this.collab=e.collab}},{key:"needCache",value:function(){return!(this.openEditorConfig.isServify&&!this.openEditorConfig.saveToServer)}},{key:"needLoad",value:function(){return!(this.openEditorConfig.isServify&&!this.openEditorConfig.saveToServer)}},{key:"doLoadDoc",value:(g=we(ve().mark((function e(){var t,n,r,o,a;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.doc,o=this.docDomain===s.DOCLET?{id:r.id,category:s.CATEGORY.BOOK_INDEX_PAGE,target_type:"Book",target_id:r.target_id}:{id:r.slug,book_id:r.book_id,mode:"edit",merge_dynamic_data:!1},Object(d.a)("start-loadDoc"),e.next=5,this.modelProxy.findOne(o,{ignoreGlobalMessage:!0});case 5:return a=e.sent,Object(d.a)("finish-loadDoc"),Object(d.a)("doc-size",(null==a||null===(t=a.body_draft_asl)||void 0===t?void 0:t.length)||(null==a||null===(n=a.body_draft)||void 0===n?void 0:n.length)||0),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"onDocRendered",value:function(){Object(d.a)("finish-doc-render")}},{key:"doCreateCollabManager",value:function(){return new fe(this.doc,this.dispatch,{book:this.book,group:this.group,engine:this.engine,me:this.me,collab:this.collab,initialContent:this.initialDocument.value})}},{key:"getDocCover",value:(v=we(ve().mark((function e(){var t;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.engine.getThumbnail();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0="";case 5:if(!(t=e.t0).startsWith("https:")){e.next=8;break}return e.abrupt("return",t);case 8:if(!t){e.next=18;break}return e.prev=9,e.next=12,D.uploadCover({image:t,doc_id:this.doc.id});case 12:return e.abrupt("return",e.sent);case 15:e.prev=15,e.t1=e.catch(9),je("upload cover error",e.t1);case 18:case"end":return e.stop()}}),e,this,[[9,15]])}))),function(){return v.apply(this,arguments)})},{key:"isActive",value:function(){return this.pageStatus.isActive}},{key:"onPublishSuccess",value:(m=we(ve().mark((function e(){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.docDomain===s.DOCLET){e.next=9;break}return e.prev=1,e.next=4,this.saveEditorMeta({isDraft:!1});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),je("saveEditorMeta error",e.t0);case 9:this.currentMode===p.b.LOCK&&this.exit({unlock:!0}),this.currentMode===p.b.COLLAB&&this.collabManager.onDocPublished(),u.a.saveEditPosition(this.doc.id,this.doc.format),this.performance.reportSmooth(),this.userAction.report(),this.onPublishSuccessRedirect(this.buildRedirectToUrlForPublish());case 15:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return m.apply(this,arguments)})},{key:"doLock",value:(h=we(ve().mark((function e(t){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelProxy.lock(t,{ignoreGlobalMessage:!0}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"doUnlock",value:(i=we(ve().mark((function e(t){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelProxy.unlock(t,{ignoreGlobalMessage:!0}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"buildRedirectToUrlForPublish",value:function(){var e=this.book,t=this.doc,n=this.params,r=this.docDomain;return"lakesheet"===t.format&&r===s.DOC?"/".concat(e.namespace,"/").concat(t.slug).concat(window.location.hash):r===s.DOCLET?t.category===s.CATEGORY.TEMPLATE?window.location.href.replace(/\/[^\/]+?$/,""):"/".concat(window.appData.group.login,"/").concat(window.appData.book.slug):n.group&&n.book?"/".concat(n.group,"/").concat(n.book,"/").concat(t.slug):"/go/doc/".concat(t.id)}},{key:"doSaveEditorMeta",value:(a=we(ve().mark((function e(t){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.docDomain!==s.DOCLET){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f.a.docs.updateEditorMeta(t);case 4:this.dispatch({type:"doc/updateEditorMetas",payload:t});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"isDefaultTitle",value:function(e){return D.isDefaultTitle(e)}},{key:"onDocDeleted",value:function(){var e=this.group,t=this.book;this.currentMode===p.b.COLLAB&&this.collabManager.onDocDeleted(),setTimeout((function(){P("/".concat(e.login,"/").concat(t.slug))}),300)}}],n&&ke(t.prototype,n),o&&ke(t,o),Object.defineProperty(t,"prototype",{writable:!1}),y}(i.a);Ae.WORKFLOW_EVENT=p.i,Ae.DOC_STATUS=p.a,Ae.SAVE_TYPE=p.h,Ae.EDIT_MODE=p.b,Ae.EDIT_SCENE=p.c;t.a=Ae},3030:function(e,t,n){"use strict";n(63);var r=n(23),o=(n(2285),n(2286)),a=(n(62),n(21)),i=n(0),l=n.n(i),c=n(2),s=n.n(c),u=n(2661),d=n(757),f=n(25),p=n(9),h=n.n(p),m=n(2746),v="StatusView-module_wrap_8c-mq",g="StatusView-module_tip_DFrDV",b="StatusView-module_error_cvob-",y="StatusView-module_title_8Zp5n",w="StatusView-module_content_80A7-",k="StatusView-module_action_FlBG8",x="StatusView-module_mask_CFGUv";function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t,n,i,c=e.book,s=e.doc,p=e.error,E=e.docStatus,O=e.onReload,_=e.wfMessage,S=e.onClear,R=l.a.createElement(a.a,{type:"primary",onClick:O,"data-testid":"reload"},__("重新加载")),j=l.a.createElement(a.a,{type:"primary",onClick:function(){window.location.reload()},"data-testid":"refresh"},__("重新加载")),A=l.a.createElement(a.a,{type:"primary",onClick:S,"data-testid":"clearError"},__("知道了")),T=function(e,t){o.a.destroy(),o.a.open({message:l.a.createElement("div",{"data-testid":e},t)})},L=l.a.createElement("div",{className:b,"data-testid":"network-error-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("文档加载失败")),l.a.createElement("p",{className:w},__("网络异常，请检查网络连接是否正常")),l.a.createElement("p",{className:k},R)),D=l.a.createElement("div",{className:b,"data-testid":"locked-by-self-collab-error-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("你正在其它窗口编辑该文档")),l.a.createElement("p",{className:w},__("请重新加载最新的编辑内容")),l.a.createElement("p",{className:k},j)),P=l.a.createElement("div",{className:b,"data-testid":"locked-by-desktop-error-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("你正在使用语雀桌面端编辑此文档")),l.a.createElement("p",{className:w},__("语雀当前不支持使用桌面端和浏览器同时编辑")),l.a.createElement("p",{className:k},l.a.createElement(a.a,{href:c?"/".concat(c.namespace,"/").concat(s.slug):"/dashboard"},__("退出编辑")))),M=l.a.createElement("div",{className:b,"data-testid":"locked-by-versionConflict-error-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("文档内容有更新")),l.a.createElement("p",{className:w},__("请基于最新内容重新编辑")),l.a.createElement("p",{className:k},R)),N=function(e){var t=e.type;T(t,__("正在保存，请稍候"))};if(_&&!_.readed){switch(_.type){case m.MESSAGE.DOC_PUBLISHED:n=(t=_).body,i=t.type,T(i,__("{user} 刚刚 {action} 了文档",{user:n.user.name,action:s.published_at?__("更新"):__("发布")}));break;case m.MESSAGE.DOC_CACHE_SAVED:!function(e){var t=e.type;T(t,__("已为你加载最新编辑版本，本地离线缓存已保存到历史版本"))}(_);break;case m.MESSAGE.SAVING:N(_);break;case m.MESSAGE.SAVE_FAILED:!function(e){T(e.type,l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,__("网络异常，保存失败")),l.a.createElement("p",null,__("编辑内容暂存至本地缓存中，将在网络恢复后与云端同步"))))}(_);break;case m.MESSAGE.DISCONNECT:!function(e){T(e.type,__("网络连接异常，编辑内容已保存至离线缓存"))}(_);break;case m.MESSAGE.UNREADY:!function(e){T(e.type,__("文档准备中，请稍候"))}(_);break;case m.MESSAGE.EDIT_DISABLE:!function(e){T(e.type,__("正在连接服务，已保存至离线缓存，请稍后重试"))}(_);break;case m.MESSAGE.CACHE_FAILED:!function(e){T(e.type,__("本地缓存失败，避免丢失内容，请手动保存"))}(_);break;case m.MESSAGE.RENDER_BIG_DOCUMENT:!function(e){T(e.type,__("文档较大，正在努力渲染，请稍等一下"))}();break;case m.MESSAGE.BUZY:_.data.docStatus===m.DOC_STATUS.saving?N(_):_.data.docStatus===m.DOC_STATUS.publishing&&function(e){var t=e.type;T(t,__("正在发布，请稍候"))}(_);break;case m.MESSAGE.CLEAR:o.a.destroy()}_.readed=!0}E===m.DOC_STATUS.loading?(r.a.destroy(),r.a.loading(l.a.createElement("span",{"data-testid":"loading"},__("正在加载")),0)):E===m.DOC_STATUS.published?(r.a.destroy(),r.a.success(l.a.createElement("span",{"data-testid":"loading"},__("内容发布成功")),3)):E===m.DOC_STATUS.loaded&&r.a.destroy();var I,F,B,V=!1,H="";if(p&&!p.readed)switch(p.code){case m.ERROR_CODE.INIT_FAILED:H="network"===p.type?L:l.a.createElement("div",{className:b,"data-testid":"load-doc-fail-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("文档加载失败")),404===p.status?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:w,"data-testid":"doc-not-found"},__("文档已被删除或无访问权限")),l.a.createElement("p",{className:k},l.a.createElement(a.a,{href:c?"/".concat(c.namespace,"/").concat(s.slug):"/dashboard"},__("退出编辑")))):l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:w,"data-testid":"doc-load-error"},__("你可以尝试重新加载，或者退出编辑")),l.a.createElement("p",{className:k},l.a.createElement(a.a,{href:c?"/".concat(c.namespace,"/").concat(s.slug):"/dashboard"},__("退出编辑")),404!==p.status&&R))),V=!0;break;case m.ERROR_CODE.SAVE_FAILED:B=p.message,H=l.a.createElement("div",{className:b,"data-testid":"save-failed-error-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("文档保存失败")),l.a.createElement("p",{className:w},B),l.a.createElement("p",{className:w},__("本次编辑的内容已经保存至离线缓存")),l.a.createElement("p",{className:k},A)),V=!0;break;case m.ERROR_CODE.PUBLISH_FAILED:H=function(e){return l.a.createElement("div",{className:b,"data-testid":"publish-failed-error-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("文档发布失败")),l.a.createElement("p",{className:w},e),l.a.createElement("p",{className:w},__("本次编辑的内容已经保存至离线缓存")),l.a.createElement("p",{className:k},A))}(p.message),V=!0;break;case m.ERROR_CODE.LOCKED_BY_COLLAB:F=p.lock.collab_members,H=l.a.createElement("div",{className:b,"data-testid":"locked-by-collab-error-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("{user} 正在与其他人编辑该文档",{user:F[0].name})),l.a.createElement("p",{className:w},__("当前网络无法进入协同编辑，请检查网络后刷新重试"))),V=!0;break;case m.ERROR_CODE.LOCKED_BY_COLLAB_DISCONNECT:H=function(e){return l.a.createElement("div",{className:b,"data-testid":"locked-by-collab-disconnect-error-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("{user} 正在与其他人编辑该文档",{user:e[0].name})),l.a.createElement("p",{className:w},__("当前网络已断开实时同步，请检查网络后刷新页面，重新加入协同")))}(p.lock.collab_members),V=!0;break;case m.ERROR_CODE.LOCKED_BY_SELF_COLLAB:H=D,V=!0;break;case m.ERROR_CODE.LOCKED_BY_OTHER:I=p.lock.locker,H=l.a.createElement("div",{className:b,"data-testid":"locked-by-other-error-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("{user} 正在编辑该文档",{user:I.name})),l.a.createElement("p",{className:w},__("请等待对方完成编辑后，再进行编辑")),l.a.createElement("p",{className:k},l.a.createElement(a.a,{href:c?"/".concat(c.namespace,"/").concat(s.slug):"/dashboard"},__("退出编辑")))),V=!0;break;case m.ERROR_CODE.LOCKED_BY_DESKTOP:H=P,V=!0;break;case m.ERROR_CODE.LOCKED_BY_VERSIONCONFLICT:H=M,V=!0;break;case m.ERROR_CODE.LOCK_FAILED:H=function(e){return l.a.createElement("div",{className:b,"data-testid":"lock-failed-error-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("无法获得单人编辑权限")),l.a.createElement("p",{className:w},e),l.a.createElement("p",{className:w},__("为避免编辑出错，请检查后重试")),l.a.createElement("p",{className:k},R))}(p.message),V=!0;break;case m.ERROR_CODE.DOC_DELETED:H=function(e){return l.a.createElement("div",{className:b,"data-testid":"doc-deleted-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("当前文档已被 {user} 删除",{user:e.body.user.name})),l.a.createElement("p",{className:w},__("你可以通过知识库的 回收站 找到此篇文档")),l.a.createElement("p",{className:k},A))}(p.data),V=!0;break;case m.ERROR_CODE.DOC_NOT_EXIST:H=l.a.createElement("div",{className:b,"data-testid":"publish-failed-error-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("文档保存失败")),l.a.createElement("p",{className:w},__("文档不存在或者已经被删除")),l.a.createElement("p",{className:k},A)),V=!0;break;case m.ERROR_CODE.DOC_SAVE_CONFLICT:H=l.a.createElement("div",{className:b,"data-testid":"publish-failed-error-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("文档保存冲突")),l.a.createElement("p",{className:w},__("文档已被修改，此次保存将保存到历史版本，请重新加载并基于最新文档进行编辑")),l.a.createElement("p",{className:k},R)),V=!0;break;case m.ERROR_CODE.CACHE_FAILED:H=l.a.createElement("div",{className:b,"data-testid":"cache-failed-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("自动保存提醒")),l.a.createElement("p",{className:w},__("本地自动缓存失败，请记得及时手动保存")," ",f.ua.macos?"Cmd + S":"Ctrl + S"),l.a.createElement("p",{className:k},A)),V=!0;break;case m.ERROR_CODE.CONTENT_UNREADY:H=l.a.createElement("div",{className:b,"data-testid":"content-unready"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("保存提醒")),l.a.createElement("p",{className:w},__("检测有尚未上传完成的文件，请检查确认后再关闭页面！")),l.a.createElement("p",{className:k},A)),V=!0;break;case m.ERROR_CODE.DATA_ERROR:H=l.a.createElement("div",{className:b,"data-testid":"data-error-view"},l.a.createElement("p",{className:y},l.a.createElement(u.a,null)," ",__("数据异常")),l.a.createElement("p",{className:w},__("检测到异常数据，请将本次修改部分备份后，刷新页面重新编辑")),l.a.createElement("p",{className:k},A)),V=!0;break;case m.ERROR_CODE.COLLAB_DATA_INIT_ERROR:H=l.a.createElement("div",{className:b,"data-testid":"collab-data-init-error-view"},l.a.createElement("p",{className:y},l.a.createElement(u.a,null)," ",__("协同数据初始化异常")),l.a.createElement("p",{className:w},__("协同数据存在异常，请刷新页面重新编辑")),l.a.createElement("p",{className:k},A)),V=!0;break;case m.ERROR_CODE.RENDER_FAILED:H=l.a.createElement("div",{className:b,"data-testid":"render-failed-view"},l.a.createElement("p",{className:y},l.a.createElement(d.a,null)," ",__("渲染失败")),l.a.createElement("p",{className:w},__("数据存在异常，可刷新重试，或反馈区留言"))),V=!0;break;case m.ERROR_CODE.COMMAND_ERROR:r.a.destroy(),r.a.error(l.a.createElement("span",{"data-testid":p.code},__("出现异常错误，可刷新重试"))),p.readed=!0}return H?l.a.createElement("div",{"data-testid":"mask",className:h()(v,C({},x,V))},l.a.createElement("div",{className:g},H)):null}O.propTypes={netStatus:s.a.string,docStatus:s.a.string,collabUsers:s.a.array,book:s.a.object,doc:s.a.object.isRequired,error:s.a.object,wfMessage:s.a.object,onReload:s.a.func,onClear:s.a.func};t.a=O},3044:function(e,t,n){var r=n(290),o=n(2994),a=n(445),i=n(2995),l=a((function(e){var t=r(e,i);return t.length&&t[0]===e[0]?o(t):[]}));e.exports=l},3046:function(e,t,n){"use strict";n(2670);var r=n(2290);n(2655);t.a=r.a},3060:function(e,t,n){var r,o;r=function(){var e,t,n,r,o,a="2.0.6",i={},l={},c={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},s={currentLocale:c.currentLocale,zeroFormat:c.zeroFormat,nullFormat:c.nullFormat,defaultFormat:c.defaultFormat,scalePercentBy100:c.scalePercentBy100};function u(e,t){this._input=e,this._value=t}return(e=function(n){var r,o,a,l;if(e.isNumeral(n))r=n.value();else if(0===n||void 0===n)r=0;else if(null===n||t.isNaN(n))r=null;else if("string"==typeof n)if(s.zeroFormat&&n===s.zeroFormat)r=0;else if(s.nullFormat&&n===s.nullFormat||!n.replace(/[^0-9]+/g,"").length)r=null;else{for(o in i)if((l="function"==typeof i[o].regexps.unformat?i[o].regexps.unformat():i[o].regexps.unformat)&&n.match(l)){a=i[o].unformat;break}r=(a=a||e._.stringToNumber)(n)}else r=Number(n)||null;return new u(n,r)}).version=a,e.isNumeral=function(e){return e instanceof u},e._=t={numberToFormat:function(t,n,r){var o,a,i,c,s,u,d,f=l[e.options.currentLocale],p=!1,h=!1,m=0,v="",g=1e12,b=1e9,y=1e6,w=1e3,k="",x=!1;if(t=t||0,a=Math.abs(t),e._.includes(n,"(")?(p=!0,n=n.replace(/[\(|\)]/g,"")):(e._.includes(n,"+")||e._.includes(n,"-"))&&(s=e._.includes(n,"+")?n.indexOf("+"):t<0?n.indexOf("-"):-1,n=n.replace(/[\+|\-]/g,"")),e._.includes(n,"a")&&(o=!!(o=n.match(/a(k|m|b|t)?/))&&o[1],e._.includes(n," a")&&(v=" "),n=n.replace(new RegExp(v+"a[kmbt]?"),""),a>=g&&!o||"t"===o?(v+=f.abbreviations.trillion,t/=g):a<g&&a>=b&&!o||"b"===o?(v+=f.abbreviations.billion,t/=b):a<b&&a>=y&&!o||"m"===o?(v+=f.abbreviations.million,t/=y):(a<y&&a>=w&&!o||"k"===o)&&(v+=f.abbreviations.thousand,t/=w)),e._.includes(n,"[.]")&&(h=!0,n=n.replace("[.]",".")),i=t.toString().split(".")[0],c=n.split(".")[1],u=n.indexOf(","),m=(n.split(".")[0].split(",")[0].match(/0/g)||[]).length,c?(e._.includes(c,"[")?(c=(c=c.replace("]","")).split("["),k=e._.toFixed(t,c[0].length+c[1].length,r,c[1].length)):k=e._.toFixed(t,c.length,r),i=k.split(".")[0],k=e._.includes(k,".")?f.delimiters.decimal+k.split(".")[1]:"",h&&0===Number(k.slice(1))&&(k="")):i=e._.toFixed(t,0,r),v&&!o&&Number(i)>=1e3&&v!==f.abbreviations.trillion)switch(i=String(Number(i)/1e3),v){case f.abbreviations.thousand:v=f.abbreviations.million;break;case f.abbreviations.million:v=f.abbreviations.billion;break;case f.abbreviations.billion:v=f.abbreviations.trillion}if(e._.includes(i,"-")&&(i=i.slice(1),x=!0),i.length<m)for(var E=m-i.length;E>0;E--)i="0"+i;return u>-1&&(i=i.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f.delimiters.thousands)),0===n.indexOf(".")&&(i=""),d=i+k+(v||""),p?d=(p&&x?"(":"")+d+(p&&x?")":""):s>=0?d=0===s?(x?"-":"+")+d:d+(x?"-":"+"):x&&(d="-"+d),d},stringToNumber:function(e){var t,n,r,o=l[s.currentLocale],a=e,i={thousand:3,million:6,billion:9,trillion:12};if(s.zeroFormat&&e===s.zeroFormat)n=0;else if(s.nullFormat&&e===s.nullFormat||!e.replace(/[^0-9]+/g,"").length)n=null;else{for(t in n=1,"."!==o.delimiters.decimal&&(e=e.replace(/\./g,"").replace(o.delimiters.decimal,".")),i)if(r=new RegExp("[^a-zA-Z]"+o.abbreviations[t]+"(?:\\)|(\\"+o.currency.symbol+")?(?:\\))?)?$"),a.match(r)){n*=Math.pow(10,i[t]);break}n*=(e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1,e=e.replace(/[^0-9\.]+/g,""),n*=Number(e)}return n},isNaN:function(e){return"number"==typeof e&&isNaN(e)},includes:function(e,t){return-1!==e.indexOf(t)},insert:function(e,t,n){return e.slice(0,n)+t+e.slice(n)},reduce:function(e,t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var n,r=Object(e),o=r.length>>>0,a=0;if(3===arguments.length)n=arguments[2];else{for(;a<o&&!(a in r);)a++;if(a>=o)throw new TypeError("Reduce of empty array with no initial value");n=r[a++]}for(;a<o;a++)a in r&&(n=t(n,r[a],a,r));return n},multiplier:function(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)},correctionFactor:function(){return Array.prototype.slice.call(arguments).reduce((function(e,n){var r=t.multiplier(n);return e>r?e:r}),1)},toFixed:function(e,t,n,r){var o,a,i,l,c=e.toString().split("."),s=t-(r||0);return o=2===c.length?Math.min(Math.max(c[1].length,s),t):s,i=Math.pow(10,o),l=(n(e+"e+"+o)/i).toFixed(o),r>t-o&&(a=new RegExp("\\.?0{1,"+(r-(t-o))+"}$"),l=l.replace(a,"")),l}},e.options=s,e.formats=i,e.locales=l,e.locale=function(e){return e&&(s.currentLocale=e.toLowerCase()),s.currentLocale},e.localeData=function(e){if(!e)return l[s.currentLocale];if(e=e.toLowerCase(),!l[e])throw new Error("Unknown locale : "+e);return l[e]},e.reset=function(){for(var e in c)s[e]=c[e]},e.zeroFormat=function(e){s.zeroFormat="string"==typeof e?e:null},e.nullFormat=function(e){s.nullFormat="string"==typeof e?e:null},e.defaultFormat=function(e){s.defaultFormat="string"==typeof e?e:"0.0"},e.register=function(e,t,n){if(t=t.toLowerCase(),this[e+"s"][t])throw new TypeError(t+" "+e+" already registered.");return this[e+"s"][t]=n,n},e.validate=function(t,n){var r,o,a,i,l,c,s,u;if("string"!=typeof t&&(t+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",t)),(t=t.trim()).match(/^\d+$/))return!0;if(""===t)return!1;try{s=e.localeData(n)}catch(t){s=e.localeData(e.locale())}return a=s.currency.symbol,l=s.abbreviations,r=s.delimiters.decimal,o="."===s.delimiters.thousands?"\\.":s.delimiters.thousands,!(null!==(u=t.match(/^[^\d]+/))&&(t=t.substr(1),u[0]!==a)||null!==(u=t.match(/[^\d]+$/))&&(t=t.slice(0,-1),u[0]!==l.thousand&&u[0]!==l.million&&u[0]!==l.billion&&u[0]!==l.trillion)||(c=new RegExp(o+"{2}"),t.match(/[^\d.,]/g)||(i=t.split(r)).length>2||(i.length<2?!i[0].match(/^\d+.*\d$/)||i[0].match(c):1===i[0].length?!i[0].match(/^\d+$/)||i[0].match(c)||!i[1].match(/^\d+$/):!i[0].match(/^\d+.*\d$/)||i[0].match(c)||!i[1].match(/^\d+$/))))},e.fn=u.prototype={clone:function(){return e(this)},format:function(t,n){var r,o,a,l=this._value,c=t||s.defaultFormat;if(n=n||Math.round,0===l&&null!==s.zeroFormat)o=s.zeroFormat;else if(null===l&&null!==s.nullFormat)o=s.nullFormat;else{for(r in i)if(c.match(i[r].regexps.format)){a=i[r].format;break}o=(a=a||e._.numberToFormat)(l,c,n)}return o},value:function(){return this._value},input:function(){return this._input},set:function(e){return this._value=Number(e),this},add:function(e){var n=t.correctionFactor.call(null,this._value,e);function r(e,t,r,o){return e+Math.round(n*t)}return this._value=t.reduce([this._value,e],r,0)/n,this},subtract:function(e){var n=t.correctionFactor.call(null,this._value,e);function r(e,t,r,o){return e-Math.round(n*t)}return this._value=t.reduce([e],r,Math.round(this._value*n))/n,this},multiply:function(e){function n(e,n,r,o){var a=t.correctionFactor(e,n);return Math.round(e*a)*Math.round(n*a)/Math.round(a*a)}return this._value=t.reduce([this._value,e],n,1),this},divide:function(e){function n(e,n,r,o){var a=t.correctionFactor(e,n);return Math.round(e*a)/Math.round(n*a)}return this._value=t.reduce([this._value,e],n),this},difference:function(t){return Math.abs(e(this._value).subtract(t).value())}},e.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),e.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(t,n,r){var o,a=e._.includes(n," BPS")?" ":"";return t*=1e4,n=n.replace(/\s?BPS/,""),o=e._.numberToFormat(t,n,r),e._.includes(o,")")?((o=o.split("")).splice(-1,0,a+"BPS"),o=o.join("")):o=o+a+"BPS",o},unformat:function(t){return+(1e-4*e._.stringToNumber(t)).toFixed(15)}}),r={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},o="("+(o=(n={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}).suffixes.concat(r.suffixes.filter((function(e){return n.suffixes.indexOf(e)<0}))).join("|")).replace("B","B(?!PS)")+")",e.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(o)},format:function(t,o,a){var i,l,c,s=e._.includes(o,"ib")?r:n,u=e._.includes(o," b")||e._.includes(o," ib")?" ":"";for(o=o.replace(/\s?i?b/,""),i=0;i<=s.suffixes.length;i++)if(l=Math.pow(s.base,i),c=Math.pow(s.base,i+1),null===t||0===t||t>=l&&t<c){u+=s.suffixes[i],l>0&&(t/=l);break}return e._.numberToFormat(t,o,a)+u},unformat:function(t){var o,a,i=e._.stringToNumber(t);if(i){for(o=n.suffixes.length-1;o>=0;o--){if(e._.includes(t,n.suffixes[o])){a=Math.pow(n.base,o);break}if(e._.includes(t,r.suffixes[o])){a=Math.pow(r.base,o);break}}i*=a||1}return i}}),e.register("format","currency",{regexps:{format:/(\$)/},format:function(t,n,r){var o,a,i=e.locales[e.options.currentLocale],l={before:n.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:n.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(n=n.replace(/\s?\$\s?/,""),o=e._.numberToFormat(t,n,r),t>=0?(l.before=l.before.replace(/[\-\(]/,""),l.after=l.after.replace(/[\-\)]/,"")):t<0&&!e._.includes(l.before,"-")&&!e._.includes(l.before,"(")&&(l.before="-"+l.before),a=0;a<l.before.length;a++)switch(l.before[a]){case"$":o=e._.insert(o,i.currency.symbol,a);break;case" ":o=e._.insert(o," ",a+i.currency.symbol.length-1)}for(a=l.after.length-1;a>=0;a--)switch(l.after[a]){case"$":o=a===l.after.length-1?o+i.currency.symbol:e._.insert(o,i.currency.symbol,-(l.after.length-(1+a)));break;case" ":o=a===l.after.length-1?o+" ":e._.insert(o," ",-(l.after.length-(1+a)+i.currency.symbol.length-1))}return o}}),e.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(t,n,r){var o=("number"!=typeof t||e._.isNaN(t)?"0e+0":t.toExponential()).split("e");return n=n.replace(/e[\+|\-]{1}0/,""),e._.numberToFormat(Number(o[0]),n,r)+"e"+o[1]},unformat:function(t){var n=e._.includes(t,"e+")?t.split("e+"):t.split("e-"),r=Number(n[0]),o=Number(n[1]);function a(t,n,r,o){var a=e._.correctionFactor(t,n);return t*a*(n*a)/(a*a)}return o=e._.includes(t,"e-")?o*=-1:o,e._.reduce([r,Math.pow(10,o)],a,1)}}),e.register("format","ordinal",{regexps:{format:/(o)/},format:function(t,n,r){var o=e.locales[e.options.currentLocale],a=e._.includes(n," o")?" ":"";return n=n.replace(/\s?o/,""),a+=o.ordinal(t),e._.numberToFormat(t,n,r)+a}}),e.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(t,n,r){var o,a=e._.includes(n," %")?" ":"";return e.options.scalePercentBy100&&(t*=100),n=n.replace(/\s?\%/,""),o=e._.numberToFormat(t,n,r),e._.includes(o,")")?((o=o.split("")).splice(-1,0,a+"%"),o=o.join("")):o=o+a+"%",o},unformat:function(t){var n=e._.stringToNumber(t);return e.options.scalePercentBy100?.01*n:n}}),e.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(e,t,n){var r=Math.floor(e/60/60),o=Math.floor((e-60*r*60)/60),a=Math.round(e-60*r*60-60*o);return r+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)},unformat:function(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*Number(t[0])*60,n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&&(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)}}),e},void 0===(o="function"==typeof r?r.call(t,n,t,e):r)||(e.exports=o)},3062:function(e,t,n){"use strict";n(2248);var r=n(1261);n(2658);t.a=r.a},310:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return o})),n.d(t,"__assign",(function(){return a})),n.d(t,"__rest",(function(){return i})),n.d(t,"__decorate",(function(){return l})),n.d(t,"__param",(function(){return c})),n.d(t,"__esDecorate",(function(){return s})),n.d(t,"__runInitializers",(function(){return u})),n.d(t,"__propKey",(function(){return d})),n.d(t,"__setFunctionName",(function(){return f})),n.d(t,"__metadata",(function(){return p})),n.d(t,"__awaiter",(function(){return h})),n.d(t,"__generator",(function(){return m})),n.d(t,"__createBinding",(function(){return v})),n.d(t,"__exportStar",(function(){return g})),n.d(t,"__values",(function(){return b})),n.d(t,"__read",(function(){return y})),n.d(t,"__spread",(function(){return w})),n.d(t,"__spreadArrays",(function(){return k})),n.d(t,"__spreadArray",(function(){return x})),n.d(t,"__await",(function(){return E})),n.d(t,"__asyncGenerator",(function(){return C})),n.d(t,"__asyncDelegator",(function(){return O})),n.d(t,"__asyncValues",(function(){return _})),n.d(t,"__makeTemplateObject",(function(){return S})),n.d(t,"__importStar",(function(){return j})),n.d(t,"__importDefault",(function(){return A})),n.d(t,"__classPrivateFieldGet",(function(){return T})),n.d(t,"__classPrivateFieldSet",(function(){return L})),n.d(t,"__classPrivateFieldIn",(function(){return D}));var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function l(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function c(e,t){return function(n,r){t(n,r,e)}}function s(e,t,n,r,o,a){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var l,c=r.kind,s="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),f=!1,p=n.length-1;p>=0;p--){var h={};for(var m in r)h[m]="access"===m?{}:r[m];for(var m in r.access)h.access[m]=r.access[m];h.addInitializer=function(e){if(f)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(e||null))};var v=(0,n[p])("accessor"===c?{get:d.get,set:d.set}:d[s],h);if("accessor"===c){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(l=i(v.get))&&(d.get=l),(l=i(v.set))&&(d.set=l),(l=i(v.init))&&o.push(l)}else(l=i(v))&&("field"===c?o.push(l):d[s]=l)}u&&Object.defineProperty(u,r.name,d),f=!0}function u(e,t,n){for(var r=arguments.length>2,o=0;o<t.length;o++)n=r?t[o].call(e,n):t[o].call(e);return r?n:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function f(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function p(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function l(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}function m(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}var v=Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function g(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||v(t,e,n)}function b(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function k(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,o++)r[o]=a[i];return r}function x(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function E(e){return this instanceof E?(this.v=e,this):new E(e)}function C(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),a=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||l(e,t)}))})}function l(e,t){try{(n=o[e](t)).value instanceof E?Promise.resolve(n.value.v).then(c,s):u(a[0][2],n)}catch(e){u(a[0][3],e)}var n}function c(e){l("next",e)}function s(e){l("throw",e)}function u(e,t){e(t),a.shift(),a.length&&l(a[0][0],a[0][1])}}function O(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:E(e[r](t)),done:!1}:o?o(t):t}:o}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=b(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var R=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function j(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&v(t,e,n);return R(t,e),t}function A(e){return e&&e.__esModule?e:{default:e}}function T(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function L(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}function D(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}},3104:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a={canvasToThumbnail:function(e){if(!e)return null;var t=document.createElement("canvas");t.style="width:200px;height:150px",t.width=400,t.height=300;var n=e.width,r=e.height;n/r>t.width/t.height?n=t.width/t.height*r:r=t.height/t.width*n,t.getContext("2d").drawImage(e,0,0,n,r,0,0,400,300);try{return t.toDataURL("image/png")}catch(e){return null}},isYuqueDoc:function(e){if(!e)return!1;var t={};try{t=new URL(e)}catch(e){return!1}var n=window.location.origin,o=t,a=o.pathname,i=o.origin;if(!n.includes("yuque.")||n!==i)return!1;var l=r(a.split("/"),4),c=l[1],s=l[2],u=l[3];return!!(c&&s&&u)}};t.a=a},3115:function(e,t,n){var r=n(393),o=n(445),a=n(366),i=n(1078),l=o((function(e){return a(r(e,1,i,!0))}));e.exports=l},3140:function(e,t,n){var r;!function(o){"use strict";var a,i=1e6,l=1e6,c="[big.js] ",s=c+"Invalid ",u=s+"decimal places",d=s+"rounding mode",f=c+"Division by zero",p={},h=void 0,m=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function v(e,t,n,r){var o=e.c;if(n===h&&(n=e.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(d);if(t<1)r=3===n&&(r||!!o[0])||0===t&&(1===n&&o[0]>=5||2===n&&(o[0]>5||5===o[0]&&(r||o[1]!==h))),o.length=1,r?(e.e=e.e-t+1,o[0]=1):o[0]=e.e=0;else if(t<o.length){if(r=1===n&&o[t]>=5||2===n&&(o[t]>5||5===o[t]&&(r||o[t+1]!==h||1&o[t-1]))||3===n&&(r||!!o[0]),o.length=t,r)for(;++o[--t]>9;)if(o[t]=0,0===t){++e.e,o.unshift(1);break}for(t=o.length;!o[--t];)o.pop()}return e}function g(e,t,n){var r=e.e,o=e.c.join(""),a=o.length;if(t)o=o.charAt(0)+(a>1?"."+o.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)o="0"+o;o="0."+o}else if(r>0)if(++r>a)for(r-=a;r--;)o+="0";else r<a&&(o=o.slice(0,r)+"."+o.slice(r));else a>1&&(o=o.charAt(0)+"."+o.slice(1));return e.s<0&&n?"-"+o:o}p.abs=function(){var e=new this.constructor(this);return e.s=1,e},p.cmp=function(e){var t,n=this,r=n.c,o=(e=new n.constructor(e)).c,a=n.s,i=e.s,l=n.e,c=e.e;if(!r[0]||!o[0])return r[0]?a:o[0]?-i:0;if(a!=i)return a;if(t=a<0,l!=c)return l>c^t?1:-1;for(i=(l=r.length)<(c=o.length)?l:c,a=-1;++a<i;)if(r[a]!=o[a])return r[a]>o[a]^t?1:-1;return l==c?0:l>c^t?1:-1},p.div=function(e){var t=this,n=t.constructor,r=t.c,o=(e=new n(e)).c,a=t.s==e.s?1:-1,l=n.DP;if(l!==~~l||l<0||l>i)throw Error(u);if(!o[0])throw Error(f);if(!r[0])return e.s=a,e.c=[e.e=0],e;var c,s,d,p,m,g=o.slice(),b=c=o.length,y=r.length,w=r.slice(0,c),k=w.length,x=e,E=x.c=[],C=0,O=l+(x.e=t.e-e.e)+1;for(x.s=a,a=O<0?0:O,g.unshift(0);k++<c;)w.push(0);do{for(d=0;d<10;d++){if(c!=(k=w.length))p=c>k?1:-1;else for(m=-1,p=0;++m<c;)if(o[m]!=w[m]){p=o[m]>w[m]?1:-1;break}if(!(p<0))break;for(s=k==c?o:g;k;){if(w[--k]<s[k]){for(m=k;m&&!w[--m];)w[m]=9;--w[m],w[k]+=10}w[k]-=s[k]}for(;!w[0];)w.shift()}E[C++]=p?d:++d,w[0]&&p?w[k]=r[b]||0:w=[r[b]]}while((b++<y||w[0]!==h)&&a--);return E[0]||1==C||(E.shift(),x.e--,O--),C>O&&v(x,O,n.RM,w[0]!==h),x},p.eq=function(e){return 0===this.cmp(e)},p.gt=function(e){return this.cmp(e)>0},p.gte=function(e){return this.cmp(e)>-1},p.lt=function(e){return this.cmp(e)<0},p.lte=function(e){return this.cmp(e)<1},p.minus=p.sub=function(e){var t,n,r,o,a=this,i=a.constructor,l=a.s,c=(e=new i(e)).s;if(l!=c)return e.s=-c,a.plus(e);var s=a.c.slice(),u=a.e,d=e.c,f=e.e;if(!s[0]||!d[0])return d[0]?e.s=-c:s[0]?e=new i(a):e.s=1,e;if(l=u-f){for((o=l<0)?(l=-l,r=s):(f=u,r=d),r.reverse(),c=l;c--;)r.push(0);r.reverse()}else for(n=((o=s.length<d.length)?s:d).length,l=c=0;c<n;c++)if(s[c]!=d[c]){o=s[c]<d[c];break}if(o&&(r=s,s=d,d=r,e.s=-e.s),(c=(n=d.length)-(t=s.length))>0)for(;c--;)s[t++]=0;for(c=t;n>l;){if(s[--n]<d[n]){for(t=n;t&&!s[--t];)s[t]=9;--s[t],s[n]+=10}s[n]-=d[n]}for(;0===s[--c];)s.pop();for(;0===s[0];)s.shift(),--f;return s[0]||(e.s=1,s=[f=0]),e.c=s,e.e=f,e},p.mod=function(e){var t,n=this,r=n.constructor,o=n.s,a=(e=new r(e)).s;if(!e.c[0])throw Error(f);return n.s=e.s=1,t=1==e.cmp(n),n.s=o,e.s=a,t?new r(n):(o=r.DP,a=r.RM,r.DP=r.RM=0,n=n.div(e),r.DP=o,r.RM=a,this.minus(n.times(e)))},p.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},p.plus=p.add=function(e){var t,n,r,o=this,a=o.constructor;if(e=new a(e),o.s!=e.s)return e.s=-e.s,o.minus(e);var i=o.e,l=o.c,c=e.e,s=e.c;if(!l[0]||!s[0])return s[0]||(l[0]?e=new a(o):e.s=o.s),e;if(l=l.slice(),t=i-c){for(t>0?(c=i,r=s):(t=-t,r=l),r.reverse();t--;)r.push(0);r.reverse()}for(l.length-s.length<0&&(r=s,s=l,l=r),t=s.length,n=0;t;l[t]%=10)n=(l[--t]=l[t]+s[t]+n)/10|0;for(n&&(l.unshift(n),++c),t=l.length;0===l[--t];)l.pop();return e.c=l,e.e=c,e},p.pow=function(e){var t=this,n=new t.constructor("1"),r=n,o=e<0;if(e!==~~e||e<-1e6||e>l)throw Error(s+"exponent");for(o&&(e=-e);1&e&&(r=r.times(t)),e>>=1;)t=t.times(t);return o?n.div(r):r},p.prec=function(e,t){if(e!==~~e||e<1||e>i)throw Error(s+"precision");return v(new this.constructor(this),e,t)},p.round=function(e,t){if(e===h)e=0;else if(e!==~~e||e<-i||e>i)throw Error(u);return v(new this.constructor(this),e+this.e+1,t)},p.sqrt=function(){var e,t,n,r=this,o=r.constructor,a=r.s,i=r.e,l=new o("0.5");if(!r.c[0])return new o(r);if(a<0)throw Error(c+"No square root");0===(a=Math.sqrt(r+""))||a===1/0?((t=r.c.join("")).length+i&1||(t+="0"),i=((i+1)/2|0)-(i<0||1&i),e=new o(((a=Math.sqrt(t))==1/0?"5e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+i)):e=new o(a+""),i=e.e+(o.DP+=4);do{n=e,e=l.times(n.plus(r.div(n)))}while(n.c.slice(0,i).join("")!==e.c.slice(0,i).join(""));return v(e,(o.DP-=4)+e.e+1,o.RM)},p.times=p.mul=function(e){var t,n=this,r=n.constructor,o=n.c,a=(e=new r(e)).c,i=o.length,l=a.length,c=n.e,s=e.e;if(e.s=n.s==e.s?1:-1,!o[0]||!a[0])return e.c=[e.e=0],e;for(e.e=c+s,i<l&&(t=o,o=a,a=t,s=i,i=l,l=s),t=new Array(s=i+l);s--;)t[s]=0;for(c=l;c--;){for(l=0,s=i+c;s>c;)l=t[s]+a[c]*o[s-c-1]+l,t[s--]=l%10,l=l/10|0;t[s]=l}for(l?++e.e:t.shift(),c=t.length;!t[--c];)t.pop();return e.c=t,e},p.toExponential=function(e,t){var n=this,r=n.c[0];if(e!==h){if(e!==~~e||e<0||e>i)throw Error(u);for(n=v(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return g(n,!0,!!r)},p.toFixed=function(e,t){var n=this,r=n.c[0];if(e!==h){if(e!==~~e||e<0||e>i)throw Error(u);for(e=e+(n=v(new n.constructor(n),e+n.e+1,t)).e+1;n.c.length<e;)n.c.push(0)}return g(n,!1,!!r)},p.toJSON=p.toString=function(){var e=this,t=e.constructor;return g(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},p.toNumber=function(){var e=Number(g(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(c+"Imprecise conversion");return e},p.toPrecision=function(e,t){var n=this,r=n.constructor,o=n.c[0];if(e!==h){if(e!==~~e||e<1||e>i)throw Error(s+"precision");for(n=v(new r(n),e,t);n.c.length<e;)n.c.push(0)}return g(n,e<=n.e||n.e<=r.NE||n.e>=r.PE,!!o)},p.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(c+"valueOf disallowed");return g(e,e.e<=t.NE||e.e>=t.PE,!0)},a=function e(){function t(n){var r=this;if(!(r instanceof t))return n===h?e():new t(n);if(n instanceof t)r.s=n.s,r.e=n.e,r.c=n.c.slice();else{if("string"!=typeof n){if(!0===t.strict&&"bigint"!=typeof n)throw TypeError(s+"value");n=0===n&&1/n<0?"-0":String(n)}!function(e,t){var n,r,o;if(!m.test(t))throw Error(s+"number");e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".",""));(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length);for(o=t.length,r=0;r<o&&"0"==t.charAt(r);)++r;if(r==o)e.c=[e.e=0];else{for(;o>0&&"0"==t.charAt(--o););for(e.e=n-r-1,e.c=[],n=0;r<=o;)e.c[n++]=+t.charAt(r++)}}(r,n)}r.constructor=t}return t.prototype=p,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=false,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}(),a.default=a.Big=a,void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},3141:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));const r="3.7.4",o=r,a="function"==typeof atob,i="function"==typeof btoa,l="function"==typeof Buffer,c="function"==typeof TextDecoder?new TextDecoder:void 0,s="function"==typeof TextEncoder?new TextEncoder:void 0,u=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),d=(e=>{let t={};return e.forEach(((e,n)=>t[e]=n)),t})(u),f=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,p=String.fromCharCode.bind(String),h="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),m=e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_")),v=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),g=e=>{let t,n,r,o,a="";const i=e.length%3;for(let i=0;i<e.length;){if((n=e.charCodeAt(i++))>255||(r=e.charCodeAt(i++))>255||(o=e.charCodeAt(i++))>255)throw new TypeError("invalid character found");t=n<<16|r<<8|o,a+=u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}return i?a.slice(0,i-3)+"===".substring(i):a},b=i?e=>btoa(e):l?e=>Buffer.from(e,"binary").toString("base64"):g,y=l?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let n=0,r=e.length;n<r;n+=4096)t.push(p.apply(null,e.subarray(n,n+4096)));return b(t.join(""))},w=(e,t=!1)=>t?m(y(e)):y(e),k=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?p(192|t>>>6)+p(128|63&t):p(224|t>>>12&15)+p(128|t>>>6&63)+p(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return p(240|t>>>18&7)+p(128|t>>>12&63)+p(128|t>>>6&63)+p(128|63&t)},x=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,E=e=>e.replace(x,k),C=l?e=>Buffer.from(e,"utf8").toString("base64"):s?e=>y(s.encode(e)):e=>b(E(e)),O=(e,t=!1)=>t?m(C(e)):C(e),_=e=>O(e,!0),S=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,R=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return p(55296+(t>>>10))+p(56320+(1023&t));case 3:return p((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return p((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},j=e=>e.replace(S,R),A=e=>{if(e=e.replace(/\s+/g,""),!f.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,n,r,o="";for(let a=0;a<e.length;)t=d[e.charAt(a++)]<<18|d[e.charAt(a++)]<<12|(n=d[e.charAt(a++)])<<6|(r=d[e.charAt(a++)]),o+=64===n?p(t>>16&255):64===r?p(t>>16&255,t>>8&255):p(t>>16&255,t>>8&255,255&t);return o},T=a?e=>atob(v(e)):l?e=>Buffer.from(e,"base64").toString("binary"):A,L=l?e=>h(Buffer.from(e,"base64")):e=>h(T(e),(e=>e.charCodeAt(0))),D=e=>L(M(e)),P=l?e=>Buffer.from(e,"base64").toString("utf8"):c?e=>c.decode(L(e)):e=>j(T(e)),M=e=>v(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),N=e=>P(M(e)),I=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),F=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,I(t));e("fromBase64",(function(){return N(this)})),e("toBase64",(function(e){return O(this,e)})),e("toBase64URI",(function(){return O(this,!0)})),e("toBase64URL",(function(){return O(this,!0)})),e("toUint8Array",(function(){return D(this)}))},B=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,I(t));e("toBase64",(function(e){return w(this,e)})),e("toBase64URI",(function(){return w(this,!0)})),e("toBase64URL",(function(){return w(this,!0)}))},V={version:r,VERSION:o,atob:T,atobPolyfill:A,btoa:b,btoaPolyfill:g,fromBase64:N,toBase64:O,encode:O,encodeURI:_,encodeURL:_,utob:E,btou:j,decode:N,isValid:e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:w,toUint8Array:D,extendString:F,extendUint8Array:B,extendBuiltins:()=>{F(),B()}}},3142:function(e,t,n){"use strict";n(2251);var r=n(850),o=n(0),a=n.n(o),i=n(2),l=n.n(i),c=n(9),s=n.n(c),u=n(69),d=n.n(u);n(2668);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var p=["className"],h=["className"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var w=a.a.forwardRef((function(e,t){var n=e.className,o=y(e,p),i=s()("larkui-form",n);return a.a.createElement(r.a,b({className:i,ref:t},o))}));w.propTypes=v(v({},r.a.CardProps),{},{className:l.a.string}),d()(w,r.a),w.Item=a.a.forwardRef((function(e,t){var n=e.className,o=y(e,h),i=s()("larkui-form-item",n);return a.a.createElement(r.a.Item,b({className:i,ref:t},o,{colon:!1}))})),t.a=w},3143:function(e,t,n){"use strict";n(2268);var r=n(1273);n(2667);t.a=r.a},3144:function(e,t,n){"use strict";n(1389);var r=n(624);n(2669);t.a=r.a},3160:function(e,t,n){"use strict";n(63);var r=n(23),o=n(0),a=n.n(o),i=n(2),l=n.n(i),c=n(106),s=n.n(c),u=n(730),d=n(93),f={errorInfo:"DocErrorView-module_errorInfo_qvozc",msgClose:"DocErrorView-module_msgClose_gXos2"},p=new s.a("doc:error");function h(e){var t=e.error,n=e.asideWidth,i=t.docTitle,l=t.readStatus;return p("doc load error",t),Object(o.useEffect)((function(){var e,t=l===d.READ_STATUS.init?__("作者还未发布，页面无法访问"):__("页面无法访问，页面链接已失效或被删除");r.a.destroy();var n=a.a.createElement("span",{className:f.msg,"data-testid":"test-max-file-size"},a.a.createElement("span",null,t),a.a.createElement("span",{className:f.msgClose,onClick:function(){return e&&e()}},a.a.createElement(u.a,null)));return e=r.a.warning(n,0),function(){return r.a.destroy()}}),[]),i?a.a.createElement("div",{className:f.docErrorView,style:{height:"640px",willChange:"padding-left",transition:"padding-left 200ms cubic-bezier(0.1, 0, 0, 1) 0s",paddingLeft:n}},a.a.createElement("div",{className:f.errorInfo},a.a.createElement("h1",null,i))):a.a.createElement("div",{style:{height:"640px"},"data-testid":"empty-view"})}h.propTypes={error:l.a.object.isRequired,asideWidth:l.a.number};t.a=h},3186:function(e,t,n){"use strict";n.r(t);var r,o,a=n(0),i=n.n(a),l=n(2),c=n.n(l),s=n(616),u=n(2975),d=n(125),f="index-module_qrCodeWrapper_zR07d",p="index-module_qrCode_vSDhD",h="index-module_qrCodeDesc_5xemJ",m="index-module_qrCodeClose_hIUwV",v="index-module_contentWrapper_QuO9a";function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E="yuque/appQrCodeDismiss",C=window.appData.isYuque,O=function e(t){var n=k(Object(a.useState)(!!t.visible),2),r=n[0],o=n[1],l=C?"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*GHNCQrr6kXkAAAAAAAAAAAAAARQnAQ":"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*4QJ4RJzP1koAAAAAAAAAAAAAARQnAQ",c=function(e){o(e),e||d.a.set(E,!0)};return Object(a.useEffect)((function(){o(t.visible)}),[t.visible]),Object(a.useEffect)((function(){d.a.get(E)||o(!0)}),[]),t.showCornerBubble?i.a.createElement("div",{className:v},i.a.createElement(u.a,{iconName:e.icon,style:y({bottom:"32px"},t.bubbleStyle),onClick:function(){c(!r)}}),r&&i.a.createElement("div",{className:f},i.a.createElement("div",{className:p},i.a.createElement("img",{src:l}),i.a.createElement("p",{className:h},__("下载手机客户端"))),i.a.createElement("a",{className:m,onClick:function(){c(!1)}},i.a.createElement(s.a,null)))):null};O.icon="app-bubble",O.defaultProps={showCornerBubble:null===(r=window.appData)||void 0===r||null===(o=r.settings)||void 0===o?void 0:o.enable_mobile_app_qrcode,bubbleStyle:{}},O.propTypes={showCornerBubble:c.a.bool,bubbleStyle:c.a.object};t.default=O},32:function(e,t,n){"use strict";n.r(t),n.d(t,"AudioErrorView",(function(){return Pn})),n.d(t,"AudioPlayer",(function(){return Mn})),n.d(t,"BlockScrollStrategy",(function(){return Ja})),n.d(t,"CloseScrollStrategy",(function(){return Qa})),n.d(t,"ColorPicker",(function(){return dt})),n.d(t,"ColorPickerV2",(function(){return Bt})),n.d(t,"CropBox",(function(){return kr})),n.d(t,"DeviceUtil",(function(){return $o})),n.d(t,"DocOutlineHelper",(function(){return Ar})),n.d(t,"FileSizeChecker",(function(){return po})),n.d(t,"FormDesigner",(function(){return gn})),n.d(t,"ImageBrowser",(function(){return ze})),n.d(t,"LocalStorageUtil",(function(){return ca})),n.d(t,"LocaleUtil",(function(){return Oo})),n.d(t,"MessageManager",(function(){return Eo})),n.d(t,"MultiPartUploadUtil",(function(){return la})),n.d(t,"MultipleColorPickerV2",(function(){return Vt})),n.d(t,"OssUtil",(function(){return Jo})),n.d(t,"PALETTE_CLASSIC",(function(){return et})),n.d(t,"PALETTE_CLASSIC_WITH_CLEAR",(function(){return tt})),n.d(t,"TinyCanvas",(function(){return No})),n.d(t,"Uploader",(function(){return To})),n.d(t,"VideoPlayer",(function(){return vr})),n.d(t,"ajax",(function(){return fo})),n.d(t,"app",(function(){return Wo})),n.d(t,"clearCodeblockTheme",(function(){return xa})),n.d(t,"fileMd5",(function(){return ua})),n.d(t,"getDocMeta",(function(){return ya})),n.d(t,"getImageBrowser",(function(){return ti})),n.d(t,"isHotkey",(function(){return ei})),n.d(t,"loadJS",(function(){return ta})),n.d(t,"loadModule",(function(){return na})),n.d(t,"ua",(function(){return Go}));var r=n(25);n.d(t,"EXTS",(function(){return r.EXTS})),n.d(t,"FileUtils",(function(){return r.FileUtils})),n.d(t,"HotKeyUtils",(function(){return r.HotKeyUtils}));var o=n(1),a=n.n(o),i=n(5),l=n.n(i),c=n(6),s=n.n(c),u=n(7),d=n.n(u),f=n(8),p=n.n(f),h=n(3),m=n.n(h),v=n(0),g=n.n(v),b=n(36),y=n.n(b),w=n(283),k=n.n(w),x=n(284),E=n.n(x),C=n(68),O=n.n(C),_=(n(841),n(58)),S=n(2),R=n.n(S),j=n(34),A=n.n(j),T=n(4),L=n.n(T),D=n(9),P=n.n(D),M=n(132),N=n.n(M),I=n(129),F=n.n(I),B=n(274),V=n(120),H=n.n(V),z=n(392),q=n(391),U=n(390),G=(n(842),n(100)),W=n(24),Y=n.n(W),$=n(232),K=(n(1097),n(282)),X=n(1085),Z=n(26),Q=n.n(Z),J=(n(844),n(291)),ee=(n(843),n(79)),te=n(75),ne=n.n(te),re=(n(1098),n(302)),oe=(n(1196),n(188)),ae=n(48),ie=n.n(ae),le=(n(1197),n(626)),ce=(n(1099),n(165)),se=n(313),ue=n(97),de=n.n(ue),fe=(n(1195),n(597)),pe=n(223),he=n.n(pe),me=n(178),ve=n.n(me),ge=(n(840),n(123)),be=n(28),ye=n.n(be),we=n(17),ke=n.n(we),xe=n(54),Ee=n.n(xe),Ce=function(){function e(t){l()(this,e),this.object=t,this.listeners={}}return s()(e,[{key:"on",value:function(e,t,n){this.listeners[e]&&!n||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){var n=this.listeners[e];if(n)for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}}},{key:"trigger",value:function(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=this.listeners[t];if(n){for(var r,o=0;o<n.length&&!1!==(r=n[o].apply(this.object,e));o++);return r}}}]),e}(),Oe=r.ua.dingtalk;function _e(e){var t=function(e){var t=parseInt(e,10).toString(16).toUpperCase();return t.length>1?t:"0"+t};return e.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/gi,(function(e,n,r,o){return"#"+t(n)+t(r)+t(o)}))}function Se(e){return e.split("-").map((function(e,t){return t>0?e.charAt(0).toUpperCase()+e.substr(1):e})).join("")}function Re(e,t){return e.nodeType===Node.ELEMENT_NODE&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector).call(e,t)}function je(e){return e?e.ownerDocument||e.document||e:document}function Ae(e){if(!e)return window;var t=je(e);return t.parentWindow||t.defaultView||window}function Te(e,t){if(t=t||document,!e)return[];if("string"==typeof e){var n=e.length;if("@"===e.charAt(0)&&(e=e.substr(1)),e.length!==n||/<.+>/.test(e)){var r,o=0===e.indexOf("<tr"),a=0===e.indexOf("<td");return e=e.trim(),o&&(e="<table><tbody>".concat(e,"</tbody></table>")),a&&(e="<table><tbody><tr>".concat(e,"</tr></tbody></table>")),Oe?(r=document.createElement("div")).innerHTML=e:r=(new DOMParser).parseFromString(e,"text/html").body,o?r.querySelector("tbody").childNodes:a?r.querySelector("tr").childNodes:r.childNodes}return t.querySelectorAll(e)}if(e.constructor===NodeList)return e;if(void 0!==e.length&&e.each){var i=[];return e.each((function(e){i.push(e)})),i}if(Array.isArray(e))return e;if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(var l=[],c=e.firstChild;c;)l.push(c),c=c.nextSibling;return l}return[e]}var Le=function(){function e(t,n){l()(this,e),t.nodeType&&(t=[t]),this.events=[];for(var r=0;r<t.length;r++)this[r]=t[r],this.events[r]=new Ce;this.length=t.length,this.length>0&&(this.doc=je(n),this.root=n,this.name=this[0].nodeName?this[0].nodeName.toLowerCase():"",this.type=this.length>0?this[0].nodeType:null,this.win=Ae(this[0]))}return s()(e,[{key:"attr",value:function(e,t){var n=this;return void 0===e?function(e){for(var t,n={},r=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g;t=r.exec(e);){var o=(t[1]||t[2]||t[4]||t[6]).toLowerCase(),a=(t[2]?t[3]:t[4]?t[5]:t[7])||"";n[o]=a}return n}(this.clone(!1)[0].outerHTML):"object"===O()(e)?(Object.keys(e).forEach((function(t){var r=e[t];n.attr(t,r)})),this):void 0===t?this.length>0&&this.isElement()?this[0].getAttribute(e):"":(this.each((function(n){n.setAttribute(e,t)})),this)}},{key:"css",value:function(e,t){var n=this;return void 0===e?function(e){e=e.replace(/&quot;/g,'"');for(var t,n={},r=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g;t=r.exec(e);){var o=t[1].toLowerCase().trim(),a=_e(t[2]).trim();n[o]=a}return n}(this.attr("style")||""):"object"===O()(e)?(Object.keys(e).forEach((function(t){var r=e[t];n.css(t,r)})),this):void 0===t?0===this.length||this.isText()?"":this[0].style[Se(e)]||function(e,t){var n=Ae(e),r=Se(t);return n.getComputedStyle(e,null)[r]}(this[0],e)||"":(this.each((function(n){n.style[Se(e)]=t})),this)}},{key:"children",value:function(t){if(0===this.length)return new e([]);var n=this[0].childNodes;if(t){for(var r=[],o=0;o<n.length;o++){var a=n[o];Re(a,t)&&r.push(a)}return new e(r)}return new e(n)}},{key:"remove",value:function(){var e=this;return this.each((function(t,n){t.parentNode&&(t.parentNode.removeChild(t),delete e[n])})),this.length=0,this}},{key:"each",value:function(e){for(var t=0;t<this.length&&!1!==e(this[t],t);t++);return this}},{key:"isElement",value:function(){return this.type===Node.ELEMENT_NODE}},{key:"isText",value:function(){return this.type===Node.TEXT_NODE}},{key:"addClass",value:function(e){return this.each((function(t){t.classList.add(e)})),this}},{key:"removeClass",value:function(e){return this.each((function(t){t.classList.remove(e)})),this}},{key:"hasClass",value:function(e){return!(!this[0]||!this[0].classList)&&this[0].classList.contains(e)}},{key:"append",value:function(e){var t=this;return this.each((function(n){for(var r=Te(e,t.root),o=0;o<r.length;o++){var a=r[o];"string"==typeof e?n.appendChild(a.cloneNode(!0)):n.appendChild(a)}})),this}},{key:"text",value:function(){return this.length>0?this[0].textContent:""}},{key:"html",value:function(e){return void 0===e?this.length>0?this[0].innerHTML:"":(this.each((function(t){t.innerHTML=e})),this)}},{key:"find",value:function(t){var n=[];return this[0]&&this.isElement()&&(n=this[0].querySelectorAll(t)),new e(n)}},{key:"on",value:function(e,t){var n=this;return this.each((function(r,o){r.addEventListener(e,t,!1),n.events[o].on(e,t)})),this}},{key:"off",value:function(e,t){var n=this;return this.each((function(r,o){r.removeEventListener(e,t,!1),n.events[o].off(e,t)})),this}}]),e}();function De(e,t){var n=Te(e,t);return new Le(n,t)}function Pe(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}Pe(".pswp .lake-pswp-tool-bar {\n  position: absolute;\n  top: initial;\n  margin: 0 auto;\n  bottom: 20px;\n  vertical-align: middle;\n  height: 54px;\n  width: 100%;\n  text-align: center;\n}\n.pswp .lake-pswp-tool-bar .separation {\n  width: 1px;\n  margin: 0 10px;\n  display: inline-block;\n  height: 20px;\n  border: 0.5px solid #383838;\n}\n.pswp .lake-pswp-tool-bar .btn {\n  color: #d9d9d9;\n  display: inline-block;\n  width: 32px;\n  height: 32px;\n  padding: 6px;\n  margin: 0 6px;\n  border: 1px solid #333;\n  border-radius: 2px;\n}\n.pswp .lake-pswp-tool-bar .btn :hover {\n  border-color: #383838;\n}\n.pswp .lake-pswp-tool-bar .btn::before {\n  width: 20px;\n  height: 20px;\n  margin: 0 auto;\n  content: ' ';\n  display: inline-block;\n  background-repeat: no-repeat;\n  opacity: 0.65;\n  background-position: -1px -1px;\n}\n.pswp .lake-pswp-tool-bar .lake-pswp-arrow-left {\n  padding: 8px;\n}\n.pswp .lake-pswp-tool-bar .lake-pswp-arrow-right {\n  padding: 8px;\n}\n.pswp .lake-pswp-tool-bar .lake-pswp-arrow-left::before {\n  width: 16px;\n  height: 16px;\n  background-size: 16px 16px;\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/868128b1-343a-498a-af4b-3ee15e45b8fa.svg);\n}\n.pswp .lake-pswp-tool-bar .lake-pswp-arrow-right::before {\n  width: 16px;\n  height: 16px;\n  background-size: 16px 16px;\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/c70626c5-a54f-4454-bdd2-548844dc10ad.svg);\n}\n.pswp .lake-pswp-tool-bar .lake-pswp-zoom-in::before {\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/af868882-dabf-484b-86c2-36113fc0e5c7.svg);\n}\n.pswp .lake-pswp-tool-bar .lake-pswp-zoom-out::before {\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/2a305383-b79e-4658-9cdc-04dd70df90b6.svg);\n}\n.pswp .lake-pswp-tool-bar .lake-pswp-origin-size::before {\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/88ab9578-ee9d-419a-a89e-b054142cefe7.svg);\n}\n.pswp .lake-pswp-tool-bar .lake-pswp-best-size::before {\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/06ae7769-7179-4b66-9fd3-ec7ecffbbc02.svg);\n}\n.pswp .lake-pswp-tool-bar .lake-pswp-download::before {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/74584ffe-9b2e-487c-b62f-1a78b420a2ca.svg);\n}\n.pswp .lake-pswp-tool-bar .lake-pswp-remove::before {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/e5f7b8b4-f25b-4383-afb1-d33a200fba4a.svg);\n}\n.pswp .lake-pswp-tool-bar .btn:not(.disable):hover {\n  cursor: pointer;\n}\n.pswp .lake-pswp-tool-bar .btn:not(.disable):hover::before {\n  opacity: 1;\n}\n.pswp .lake-pswp-tool-bar .btn.disable {\n  background: none;\n}\n.pswp .lake-pswp-tool-bar .btn.activated {\n  background: #454545;\n}\n.pswp .lake-pswp-tool-bar .btn.activated::before {\n  opacity: 1;\n}\n.pswp .lake-pswp-tool-bar .btn.disable::before {\n  opacity: 0.25;\n}\n.pswp .lake-pswp-tool-bar .disable:hover {\n  cursor: not-allowed;\n}\n.pswp .lake-pswp-tool-bar .pswp-toolbar-content {\n  display: inline-block;\n  width: auto;\n  background: #252525;\n  border-radius: 4px;\n  padding: 12px;\n}\n.pswp .lake-pswp-tool-bar .pswp-toolbar-content .lake-pswp-counter {\n  user-select: none;\n  display: inline-block;\n  font-size: 16px;\n  vertical-align: top;\n  line-height: 34px;\n  color: #dedede;\n  margin: 0 2px;\n}\n.pswp.lake-pswp-mobile .lake-pswp-tool-bar {\n  display: none;\n}\n");var Me,Ne={"zh-cn":{next:"下一张",prev:"上一张",zoomIn:"放大",zoomOut:"缩小",originSize:"实际尺寸",bestSize:"适应屏幕",download:"下载图片",remove:"删除图片"},en:{next:"Next",prev:"Previous",zoomIn:"Zoom In",zoomOut:"Zoom Out",originSize:"Origin Size",bestSize:"Best Size",download:"Download",remove:"Remove"}}[(Me=window.appData)&&"zh-cn"===Me.locale?"zh-cn":"en"],Ie=function(e){d()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;return l()(this,n),(e=t.call(this)).state={prevStatus:"default",nextStatus:"default",zoomInStatus:"default",zoomOutStatus:"default",originSizeStatus:"default",bestSizeStatus:"default"},e}return s()(n,[{key:"afterZoom",value:function(){var e,t=this.props.imageBrowser,n=t.getCurrentZoomLevel(),r=t.getInitialZoomLevel();n===r&&(e="activated"),1===r&&(e="disable"),this.setState({zoomOutStatus:.05===n?"disable":"default",zoomInStatus:5===n?"disable":"default",originSizeStatus:1===n?"activated":"default",bestSizeStatus:e})}},{key:"afterChange",value:function(){var e=this.props.imageBrowser.getCount();this.setState({nextStatus:1===e?"disable":"default",prevStatus:1===e?"disable":"default"})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.imageBrowser;t.on("afterzoom",(function(){e.afterZoom()})),t.on("afterchange",(function(){e.afterChange()})),t.on("resize",(function(){setTimeout((function(){e.afterChange(),e.afterZoom()}),333)})),this.setState({tooltipContainer:this.tooltipContainer})}},{key:"renderBtn",value:function(e,t,n,r){var o=this.state.tooltipContainer;return o?g.a.createElement(_.a,{title:t,getPopupContainer:function(){return o},mouseEnterDelay:1},g.a.createElement("span",{className:"lake-pswp-".concat(e," btn ").concat(n),onClick:r})):""}},{key:"render",value:function(){var e=this,t=this.props,n=t.imageBrowser,r=t.shouldShowNavigation,o=t.shouldShowDownload,a=t.shouldShowRemove,i=this.state,l=i.prevStatus,c=i.nextStatus,s=i.zoomInStatus,u=i.zoomOutStatus,d=i.originSizeStatus,f=i.bestSizeStatus;return g.a.createElement("div",{className:"lake-pswp-tool-bar"},g.a.createElement("div",{ref:function(t){e.tooltipContainer=t}}),g.a.createElement("div",{className:"pswp-toolbar-content"},r&&g.a.createElement(g.a.Fragment,null,this.renderBtn("arrow-left",Ne.prev,l,(function(){"disable"!==l&&n.prev()})),g.a.createElement("span",{className:"lake-pswp-counter"}),this.renderBtn("arrow-right",Ne.next,c,(function(){"disable"!==c&&n.next()})),g.a.createElement("span",{className:"separation"})),this.renderBtn("zoom-out",Ne.zoomOut,u,(function(){"disable"!==u&&n.zoomOut()})),this.renderBtn("zoom-in",Ne.zoomIn,s,(function(){"disable"!==s&&n.zoomIn()})),this.renderBtn("origin-size",Ne.originSize,d,(function(){"disable"!==d&&n.zoomToOriginSize()})),this.renderBtn("best-size",Ne.bestSize,f,(function(){"disable"!==f&&n.zoomToBestSize()})),o&&this.renderBtn("download",Ne.download,null,(function(){n.download()})),a&&this.renderBtn("remove",Ne.remove,null,(function(){n.remove()}))))}}]),n}(g.a.Component);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ve(e){return["http:","https:","data:","blob:","/"].some((function(t){return e.startsWith(t)}))?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):""}a()(Ie,"propTypes",{imageBrowser:R.a.object,shouldShowNavigation:R.a.bool,shouldShowDownload:R.a.bool,shouldShowRemove:R.a.bool}),Pe('/*! PhotoSwipe main CSS by Dmitry Semenov | photoswipe.com | MIT license */\n/*\n\tStyles for basic PhotoSwipe functionality (sliding area, open/close transitions)\n*/\n/* pswp = photoswipe */\n.pswp {\n  display: none;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  overflow: hidden;\n  -ms-touch-action: none;\n  touch-action: none;\n  z-index: 1500;\n  -webkit-text-size-adjust: 100%;\n  /* create separate layer, to avoid paint on window.onscroll in webkit/blink */\n  -webkit-backface-visibility: hidden;\n  outline: none;\n}\n.pswp * {\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.pswp img {\n  max-width: none;\n}\n/* style is added when JS option showHideOpacity is set to true */\n.pswp--animate_opacity {\n  /* 0.001, because opacity:0 doesn\'t trigger Paint action, which causes lag at start of transition */\n  opacity: 0.001;\n  will-change: opacity;\n  /* for open/close transition */\n  -webkit-transition: opacity 333ms cubic-bezier(0.4, 0, 0.22, 1);\n  transition: opacity 333ms cubic-bezier(0.4, 0, 0.22, 1);\n}\n.pswp--open {\n  display: block;\n}\n.pswp--zoom-allowed .pswp__img {\n  /* autoprefixer: off */\n  cursor: -webkit-zoom-in;\n  cursor: -moz-zoom-in;\n  cursor: zoom-in;\n}\n.pswp--zoomed-in .pswp__img {\n  /* autoprefixer: off */\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n.pswp--dragging .pswp__img {\n  /* autoprefixer: off */\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n/*\n\tBackground is added as a separate element.\n\tAs animating opacity is much faster than animating rgba() background-color.\n*/\n.pswp__bg {\n  cursor: -webkit-zoom-out;\n  cursor: -moz-zoom-out;\n  cursor: zoom-out;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: #000000;\n  opacity: 0;\n  -webkit-transform: translateZ(0);\n  transform: translateZ(0);\n  -webkit-backface-visibility: hidden;\n  will-change: opacity;\n}\n.pswp__scroll-wrap {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n.pswp__container,\n.pswp__zoom-wrap {\n  -ms-touch-action: none;\n  touch-action: none;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n/* Prevent selection and tap highlights */\n.pswp__container,\n.pswp__img {\n  cursor: -webkit-zoom-out;\n  cursor: -moz-zoom-out;\n  cursor: zoom-out;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n.pswp__zoom-wrap {\n  position: absolute;\n  width: 100%;\n  -webkit-transform-origin: left top;\n  -ms-transform-origin: left top;\n  transform-origin: left top;\n  /* for open/close transition */\n  -webkit-transition: -webkit-transform 333ms cubic-bezier(0.4, 0, 0.22, 1);\n  transition: transform 333ms cubic-bezier(0.4, 0, 0.22, 1);\n}\n.pswp__bg {\n  will-change: opacity;\n  /* for open/close transition */\n  -webkit-transition: opacity 333ms cubic-bezier(0.4, 0, 0.22, 1);\n  transition: opacity 333ms cubic-bezier(0.4, 0, 0.22, 1);\n}\n.pswp--animated-in .pswp__bg,\n.pswp--animated-in .pswp__zoom-wrap {\n  -webkit-transition: none;\n  transition: none;\n}\n.pswp__container,\n.pswp__zoom-wrap {\n  -webkit-backface-visibility: hidden;\n}\n.pswp__item {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  overflow: hidden;\n}\n.pswp__img {\n  position: absolute;\n  width: auto;\n  height: auto;\n  top: 0;\n  left: 0;\n}\n/*\n\tstretched thumbnail or div placeholder element (see below)\n\tstyle is added to avoid flickering in webkit/blink when layers overlap\n*/\n.pswp__img--placeholder {\n  -webkit-backface-visibility: hidden;\n}\n/*\n\tdiv element that matches size of large image\n\tlarge image loads on top of it\n*/\n.pswp__img--placeholder--blank {\n  background: #222;\n}\n.pswp--ie .pswp__img {\n  width: 100% !important;\n  height: auto !important;\n  left: 0;\n  top: 0;\n}\n/*\n\tError message appears when image is not loaded\n\t(JS option errorMsg controls markup)\n*/\n.pswp__error-msg {\n  position: absolute;\n  left: 0;\n  top: 50%;\n  width: 100%;\n  text-align: center;\n  font-size: 14px;\n  line-height: 16px;\n  margin-top: -8px;\n  color: var(--yq-text-disable);\n}\n.pswp__error-msg a {\n  color: var(--yq-text-disable);\n  text-decoration: underline;\n}\n/*! PhotoSwipe Default UI CSS by Dmitry Semenov | photoswipe.com | MIT license */\n/*\n\n\tContents:\n\n\t1. Buttons\n\t2. Share modal and links\n\t3. Index indicator ("1 of X" counter)\n\t4. Caption\n\t5. Loading indicator\n\t6. Additional styles (root element, top bar, idle state, hidden state, etc.)\n\n*/\n/*\n\n\t1. Buttons\n\n */\n/* <button> css reset */\n.pswp__button {\n  width: 44px;\n  height: 44px;\n  position: relative;\n  background: none;\n  cursor: pointer;\n  overflow: visible;\n  -webkit-appearance: none;\n  display: block;\n  border: 0;\n  padding: 0;\n  margin: 0;\n  float: right;\n  opacity: 0.75;\n  -webkit-transition: opacity 0.2s;\n  transition: opacity 0.2s;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\n.pswp__button:focus,\n.pswp__button:hover {\n  opacity: 1;\n}\n.pswp__button::-moz-focus-inner {\n  padding: 0;\n  border: 0;\n}\n/* pswp__ui--over-close class it added when mouse is over element that should close gallery */\n.pswp__ui--over-close .pswp__button--close {\n  opacity: 1;\n}\n/* no arrows on touch screens */\n.pswp--touch .pswp__button--arrow--left,\n.pswp--touch .pswp__button--arrow--right {\n  visibility: hidden;\n}\n/*\n\tArrow buttons hit area\n\t(icon is added to :before pseudo-element)\n*/\n.pswp__button--arrow--left,\n.pswp__button--arrow--right {\n  background: none;\n  top: 50%;\n  margin-top: -50px;\n  width: 70px;\n  height: 100px;\n  position: absolute;\n}\n.pswp__button--arrow--left {\n  left: 0;\n}\n.pswp__button--arrow--right {\n  right: 0;\n}\n.pswp__button--arrow--left:before,\n.pswp__button--arrow--right:before {\n  content: \'\';\n  top: 35px;\n  background-color: rgba(0, 0, 0, 0.3);\n  height: 30px;\n  width: 32px;\n  position: absolute;\n}\n.pswp__button--arrow--left:before {\n  left: 6px;\n  background-position: -138px -44px;\n}\n.pswp__button--arrow--right:before {\n  right: 6px;\n  background-position: -94px -44px;\n}\n/*\n\n\t2. Share modal/popup and links\n\n */\n.pswp__share-modal {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.pswp__share-modal {\n  display: block;\n  background: rgba(0, 0, 0, 0.5);\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  padding: 10px;\n  position: absolute;\n  z-index: 1600;\n  opacity: 0;\n  -webkit-transition: opacity 0.25s ease-out;\n  transition: opacity 0.25s ease-out;\n  -webkit-backface-visibility: hidden;\n  will-change: opacity;\n}\n.pswp__share-modal--hidden {\n  display: none;\n}\n.pswp__share-tooltip {\n  z-index: 1620;\n  position: absolute;\n  background: var(--yq-bg-primary);\n  top: 56px;\n  border-radius: 2px;\n  display: block;\n  width: auto;\n  right: 44px;\n  -webkit-box-shadow: 0 2px 5px rgba(0, 0, 0, 0.25);\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.25);\n  -webkit-transform: translateY(6px);\n  -ms-transform: translateY(6px);\n  transform: translateY(6px);\n  -webkit-transition: -webkit-transform 0.25s;\n  transition: transform 0.25s;\n  -webkit-backface-visibility: hidden;\n  will-change: transform;\n}\n.pswp__share-tooltip a {\n  display: block;\n  padding: 8px 12px;\n  color: #000;\n  text-decoration: none;\n  font-size: 14px;\n  line-height: 18px;\n}\n.pswp__share-tooltip a:hover {\n  text-decoration: none;\n  color: #000;\n}\n.pswp__share-tooltip a:first-child {\n  /* round corners on the first/last list item */\n  border-radius: 2px 2px 0 0;\n}\n.pswp__share-tooltip a:last-child {\n  border-radius: 0 0 2px 2px;\n}\n.pswp__share-modal--fade-in {\n  opacity: 1;\n}\n.pswp__share-modal--fade-in .pswp__share-tooltip {\n  -webkit-transform: translateY(0);\n  -ms-transform: translateY(0);\n  transform: translateY(0);\n}\n/* increase size of share links on touch devices */\n.pswp--touch .pswp__share-tooltip a {\n  padding: 16px 12px;\n}\na.pswp__share--facebook:before {\n  content: \'\';\n  display: block;\n  width: 0;\n  height: 0;\n  position: absolute;\n  top: -12px;\n  right: 15px;\n  border: 6px solid transparent;\n  border-bottom-color: #FFF;\n  -webkit-pointer-events: none;\n  -moz-pointer-events: none;\n  pointer-events: none;\n}\na.pswp__share--facebook:hover {\n  background: #3E5C9A;\n  color: #FFF;\n}\na.pswp__share--facebook:hover:before {\n  border-bottom-color: #3E5C9A;\n}\na.pswp__share--twitter:hover {\n  background: #55ACEE;\n  color: #FFF;\n}\na.pswp__share--pinterest:hover {\n  background: #CCC;\n  color: #CE272D;\n}\na.pswp__share--download:hover {\n  background: #DDD;\n}\n/*\n\n\t4. Caption\n\n */\n.pswp__caption {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  min-height: 80px;\n}\n.pswp__caption small {\n  font-size: 11px;\n  color: var(--yq-text-disable);\n}\n.pswp__caption__center {\n  text-align: left;\n  max-width: 420px;\n  margin: 0 auto;\n  font-size: 13px;\n  padding: 10px;\n  line-height: 20px;\n  color: var(--yq-text-disable);\n}\n.pswp__caption--empty {\n  display: none;\n}\n/* Fake caption element, used to calculate height of next/prev image */\n.pswp__caption--fake {\n  visibility: hidden;\n}\n/*\n\n\t5. Loading indicator (preloader)\n\n\tYou can play with it here - http://codepen.io/dimsemenov/pen/yyBWoR\n\n */\n.pswp__preloader {\n  width: 44px;\n  height: 44px;\n  position: absolute;\n  top: 0;\n  left: 50%;\n  margin-left: -22px;\n  opacity: 0;\n  -webkit-transition: opacity 0.25s ease-out;\n  transition: opacity 0.25s ease-out;\n  will-change: opacity;\n  direction: ltr;\n}\n.pswp__preloader__icn {\n  width: 20px;\n  height: 20px;\n  margin: 12px;\n}\n.pswp__preloader--active {\n  opacity: 1;\n}\n.pswp--css_animation .pswp__preloader--active {\n  opacity: 1;\n}\n.pswp--css_animation .pswp__preloader--active .pswp__preloader__icn {\n  -webkit-animation: clockwise 500ms linear infinite;\n  animation: clockwise 500ms linear infinite;\n}\n.pswp--css_animation .pswp__preloader--active .pswp__preloader__donut {\n  -webkit-animation: donut-rotate 1000ms cubic-bezier(0.4, 0, 0.22, 1) infinite;\n  animation: donut-rotate 1000ms cubic-bezier(0.4, 0, 0.22, 1) infinite;\n}\n.pswp--css_animation .pswp__preloader__icn {\n  background: none;\n  opacity: 0.75;\n  width: 14px;\n  height: 14px;\n  position: absolute;\n  left: 15px;\n  top: 15px;\n  margin: 0;\n}\n.pswp--css_animation .pswp__preloader__cut {\n  /*\n\t\t\tThe idea of animating inner circle is based on Polymer ("material") loading indicator\n\t\t\t by Keanu Lee https://blog.keanulee.com/2014/10/20/the-tale-of-three-spinners.html\n\t\t*/\n  position: relative;\n  width: 7px;\n  height: 14px;\n  overflow: hidden;\n}\n.pswp--css_animation .pswp__preloader__donut {\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  width: 14px;\n  height: 14px;\n  border: 2px solid #FFF;\n  border-radius: 50%;\n  border-left-color: transparent;\n  border-bottom-color: transparent;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: none;\n  margin: 0;\n}\n@media screen and (max-width: 1024px) {\n  .pswp__preloader {\n    position: relative;\n    left: auto;\n    top: auto;\n    margin: 0;\n    float: right;\n  }\n}\n@-webkit-keyframes clockwise {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@keyframes clockwise {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes donut-rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(-140deg);\n    transform: rotate(-140deg);\n  }\n  100% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n}\n@keyframes donut-rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(-140deg);\n    transform: rotate(-140deg);\n  }\n  100% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n}\n/*\n\n\t6. Additional styles\n\n */\n/* root element of UI */\n.pswp__ui {\n  -webkit-font-smoothing: auto;\n  visibility: visible;\n  opacity: 1;\n  z-index: 1550;\n}\n/* top black bar with buttons and "1 of X" indicator */\n.pswp__top-bar {\n  position: absolute;\n  left: 0;\n  top: 0;\n  height: 44px;\n  width: 100%;\n}\n.pswp__caption,\n.pswp__top-bar,\n.pswp--has_mouse .pswp__button--arrow--left,\n.pswp--has_mouse .pswp__button--arrow--right {\n  -webkit-backface-visibility: hidden;\n  will-change: opacity;\n  -webkit-transition: opacity 333ms cubic-bezier(0.4, 0, 0.22, 1);\n  transition: opacity 333ms cubic-bezier(0.4, 0, 0.22, 1);\n}\n/* pswp--has_mouse class is added only when two subsequent mousemove events occur */\n.pswp--has_mouse .pswp__button--arrow--left,\n.pswp--has_mouse .pswp__button--arrow--right {\n  visibility: visible;\n}\n.pswp__caption {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n/* pswp__ui--fit class is added when main image "fits" between top bar and bottom bar (caption) */\n.pswp__ui--fit .pswp__top-bar,\n.pswp__ui--fit .pswp__caption {\n  background-color: rgba(0, 0, 0, 0.3);\n}\n/* pswp__ui--idle class is added when mouse isn\'t moving for several seconds (JS option timeToIdle) */\n.pswp__ui--idle .pswp__top-bar {\n  opacity: 0;\n}\n.pswp__ui--idle .pswp__button--arrow--left,\n.pswp__ui--idle .pswp__button--arrow--right {\n  opacity: 0;\n}\n/*\n\tpswp__ui--hidden class is added when controls are hidden\n\te.g. when user taps to toggle visibility of controls\n*/\n.pswp__ui--hidden .pswp__top-bar,\n.pswp__ui--hidden .pswp__caption,\n.pswp__ui--hidden .pswp__button--arrow--left,\n.pswp__ui--hidden .pswp__button--arrow--right {\n  /* Force paint & create composition layer for controls. */\n  opacity: 0.001;\n}\n/* pswp__ui--one-slide class is added when there is just one item in gallery */\n.pswp__ui--one-slide .pswp__button--arrow--left,\n.pswp__ui--one-slide .pswp__button--arrow--right,\n.pswp__element--disabled {\n  display: none !important;\n}\n.pswp--minimal--dark .pswp__top-bar {\n  background: none;\n}\n@keyframes fadeOut {\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n  }\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n.pswp-fade-out {\n  opacity: 0;\n  animation: fadeOut 0.333s;\n}\n.pswp-fade-in {\n  opacity: 1;\n  animation: fadeIn 0.333s;\n}\n.pswp .lake-pswp-button-close {\n  margin: 32px;\n  margin-right: 0px;\n  width: 48px;\n  height: 48px;\n  background: url(https://gw.alipayobjects.com/zos/bmw-prod/d7047f56-ecda-4e71-bb2f-d067c9270dfd.svg);\n}\n.pswp .lake-pswp-button-close:hover {\n  background: url(https://gw.alipayobjects.com/zos/bmw-prod/a698ecc2-7679-4c44-bd73-0a1c811d4fe8.svg);\n}\n.pswp.pswp.lake-pswp-pc .pswp__scroll-wrap {\n  width: calc(100% - 64px);\n  margin-left: 32px;\n  overflow: visible;\n}\n.pswp.pswp.lake-pswp-pc .pswp__item {\n  overflow: visible;\n}\n.pswp.lake-pswp-mobile .lake-pswp-button-close {\n  display: none;\n}\n');var He=r.HotKeyUtils.isHotkey,ze=function(e){d()(n,A.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l()(this,n),e=t.call(this);var a=o.pswpOptions||{};return e.options=Be(Be(Be({shouldToggleOnHover:!1,shouldShowNavigation:!0,shouldShowDownload:!1,shouldShowRemove:!1,closable:!0,container:De(document.body)},window.__imageBrowser_options||{}),o),{},{pswpOptions:Be({shareEl:!1,fullscreenEl:!1,zoomEl:!1,history:!1,dragging:r.ua.mobile,closeOnScroll:!1,preloaderEl:!1,captionEl:!1,counterEl:!1,clickToCloseNonZoomable:!0,bgOpacity:.8,showAnimationDuration:0,hideAnimationDuration:0,closeOnVerticalDrag:r.ua.mobile,tapToClose:!0,barsSize:{top:44,bottom:80}},a)}),e.options.closable||(e.options.pswpOptions.escKey=!1,e.options.pswpOptions.closeElClasses=[]),e.images=[],e.pswpDestroy=!0,e.timeouts={},e._initRoot(),e}return s()(n,[{key:"_initRoot",value:function(){var e=this,t=this.options.closable?'<button type="button" class="pswp__button lake-pswp-button-close" title="Close (Esc)"></button>':"",n=De('\n    <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n        <div class="pswp__bg"></div>\n        <div class="pswp__scroll-wrap">\n            <div class="pswp__container">\n                <div class="pswp__item"></div>\n                <div class="pswp__item"></div>\n                <div class="pswp__item"></div>\n            </div>\n            <div class="pswp__ui pswp__ui--hidden">\n                '.concat(t,'\n                <div class="lake-pswp-custom-top-bar"></div>\n            </div>\n        </div>\n    </div>\n    ')),o=n.find(".lake-pswp-custom-top-bar"),a=n.find(".lake-pswp-button-close");this.root=n,this.toolbarContainer=o,this.closeBtnContainer=a,r.ua.mobile?n.addClass("lake-pswp-mobile"):n.addClass("lake-pswp-pc"),this.options.container?De(this.options.container).append(n):De(document.body).append(n),y.a.render(g.a.createElement(Ie,{imageBrowser:this,shouldShowNavigation:this.options.shouldShowNavigation,shouldShowDownload:this.options.shouldShowDownload,shouldShowRemove:this.options.shouldShowRemove}),o[0],(function(){r.ua.mobile||(e.bindKeyboardEvnet(),e.bindClickEvent(),e.options.shouldToggleOnHover&&e.hoverControllerFadeInAndOut(o))}))}},{key:"hoverControllerFadeInAndOut",value:function(){var e=this,t=this.toolbarContainer,n=this.closeBtnContainer;t.on("mouseenter",(function(){e.removeFadeOut(t,"toolbarFadeInAndOut"),e.removeFadeOut(n,"closeFadeInAndOut")})),t.on("mouseleave",(function(){e.fadeOut(t,"toolbarFadeInAndOut"),e.fadeOut(n,"closeFadeInAndOut")})),n.on("mouseenter",(function(){e.removeFadeOut(t,"toolbarFadeInAndOut"),e.removeFadeOut(n,"closeFadeInAndOut")})),n.on("mouseleave",(function(){e.fadeOut(t,"toolbarFadeInAndOut"),e.fadeOut(n,"closeFadeInAndOut")}))}},{key:"removeFadeOut",value:function(e,t){var n=this.timeouts;n[t]&&clearTimeout(n[t]),e.removeClass("pswp-fade-out")}},{key:"fadeOut",value:function(e,t){var n=this.timeouts;n[t]&&clearTimeout(n[t]),n[t]=setTimeout((function(){e.addClass("pswp-fade-out")}),3e3)}},{key:"bindClickEvent",value:function(){var e=this,t=this.root,n=this.closeBtnContainer;t.on("click",(function(t){var n=t.target;(n=De(n)).hasClass("pswp__img")&&setTimeout((function(){e.currentZoom=null,e.afterZoom()}),366),(n.hasClass("pswp__bg")||n.hasClass("lake-pswp-tool-bar"))&&e.close()})),n.on("click",(function(){e.close()}))}},{key:"prev",value:function(){this.pswp.prev()}},{key:"next",value:function(){this.pswp.next()}},{key:"renderCounter",value:function(){var e=this.toolbarContainer,t=this.pswp;e.find(".lake-pswp-counter").html("".concat(t.getCurrentIndex()+1," / ").concat(t.items.length))}},{key:"getCurrentZoomLevel",value:function(){return this.currentZoom&&Number(this.currentZoom.toFixed(2))||this.pswp&&Number(this.pswp.getZoomLevel().toFixed(2))}},{key:"zoomTo",value:function(e){var t=this.pswp;t.zoomTo(e,{x:t.viewportSize.x/2,y:t.viewportSize.y/2},100),this.currentZoom=e,this.afterZoom()}},{key:"zoomIn",value:function(){var e=this.getCurrentZoomLevel(),t=1.2*e;5!==e&&(t>5&&(t=5),this.zoomTo(t))}},{key:"zoomOut",value:function(){var e=this.getCurrentZoomLevel();if(.05!==e){var t=e/1.2;t<.05&&(t=.05),this.zoomTo(t)}}},{key:"bindKeyboardEvnet",value:function(){var e=this;this.root.on("keydown",(function(t){(t.metaKey||t.ctrlKey)&&187===t.keyCode&&(t.preventDefault(),e.zoomIn()),He("mod+-",t)&&(t.preventDefault(),e.zoomOut())}))}},{key:"zoomToOriginSize",value:function(){this.zoomTo(1)}},{key:"zoomToBestSize",value:function(){var e=this.getInitialZoomLevel();this.zoomTo(e)}},{key:"getInitialZoomLevel",value:function(){return Number(this.pswp.currItem.initialZoomLevel.toFixed(2))}},{key:"afterZoom",value:function(){this.emit("afterzoom")}},{key:"getCount",value:function(){return this.pswp.items.length}},{key:"afterChange",value:function(){var e=this;if(!r.ua.mobile){var t=this.getInitialZoomLevel();this.renderCounter(),this.currentZoom=t,setTimeout((function(){e.afterZoom()}),100),this.emit("afterchange"),this.currentZoom=this.getInitialZoomLevel()}this.setWhiteBackground()}},{key:"bindPswpEvent",value:function(){var e=this,t=this.pswp;t.listen("afterChange",(function(){e.afterChange()})),t.listen("destroy",(function(){e.pswpDestroy=!0})),t.listen("resize",(function(){e.emit("resize")})),t.listen("imageLoadComplete",(function(){e.setWhiteBackground()}))}},{key:"setWhiteBackground",value:function(){var e=this.root,t=0===this.options.pswpOptions.bgOpacity?"0 2px 14px rgba(0, 0, 0, 0.25)":"0 0 10px rgba(0, 0, 0, 0.5)";e.find(".pswp__img").each((function(e){e.complete?(e.style.background="white",e.style["box-shadow"]=t):e.onload=function(){e.style.background="white",e.style["box-shadow"]=t}}))}},{key:"open",value:function(e,t){var o=this;if(!0===this.pswpDestroy){e.forEach((function(e){return e.src=Ve(e.src),e.msrc=Ve(e.msrc),e}));var a=this.root,i=this.options.pswpOptions,l=a[0],c=new k.a(l,E.a,e.map((function(e){return Be({},e)})),Be({index:t},i)),s=c.lazyLoadItem;c.lazyLoadItem=function(t){if(!e[(e.length+t)%e.length].layoutSelf)return s.call(c,t)},c.listen("gettingData",(function(t,r){isNaN(r.w)||isNaN(r.h)?(r.w=0,r.h=0,n.loadImageSize(r,c,o)):e[t].layoutSelf&&n.loadImageSize(r,c,o,e[t].layoutSelf)})),c.items=e.map((function(e){return e.src=Ve(e.src),e.msrc=Ve(e.msrc),e})),c.init(),this.pswp=c,this.pswpDestroy=!1,this.options.shouldToggleOnHover&&(r.ua.mobile||(this.toolbarContainer.removeClass("pswp-fade-out"),this.fadeOut(this.toolbarContainer,"toolbarFadeInAndOut"),this.closeBtnContainer.removeClass("pswp-fade-out"),this.fadeOut(this.closeBtnContainer,"closeFadeInAndOut")),a.removeClass("pswp-fade-in"),a.addClass("pswp-fade-in")),this.afterChange(),this.bindPswpEvent()}}},{key:"download",value:function(){window.open(this.pswp.currItem.src,"_blank")}},{key:"remove",value:function(){this.emit("remove"),this.destroy()}},{key:"close",value:function(){this.options.closable&&this.pswp&&this.pswp.close()}},{key:"destroy",value:function(){this.root&&(this.close(),this.root.remove(),this.options=null)}}],[{key:"loadImageSize",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t.cleanSlide(e),e.loading=!0,r)e.img=r(),e.img.className="pswp__img",setTimeout((function(){var t;e.loading=!1,e.loaded=!0,null===(t=e.loadComplete)||void 0===t||t.call(e,e)}));else{var o=document.createElement("img");o.className="pswp__img",e.img=o;var a=function(){if(n.pswpDestroy)return o=null,void(e.img=null);0!==e.w&&0!==e.h||(e.w=o.width,e.h=o.height),e.needUpdate=!0,t.updateSize(),e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,o.onload=o.onerror=null,o=null};o.onload=a,o.onerror=function(){e.loadError=!0,a()},o.src=e.src}}}]),n}();var qe=function(e){d()(n,v.PureComponent||v.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),a()(L()(e),"handleChange",H()((function(t){var n=e.props,r=n.hsl;(0,n.onChange)(z.calculateChange(t,r,e.container),t)}),50)),a()(L()(e),"handleMouseDown",(function(t){e.handleChange(t),window.addEventListener("mousemove",e.handleChange),window.addEventListener("mouseup",e.handleMouseUp)})),a()(L()(e),"handleMouseUp",(function(t){e.handleChange(t),e.unbindEventListeners()})),e}return s()(n,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners(),this.handleChange.cancel()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,o=t.black,a=t.pointer,i=t.circle,l=F()({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl(".concat(this.props.hsl.h,",100%, 50%)"),borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:"".concat(-100*this.props.hsv.v+100,"%"),left:"".concat(100*this.props.hsv.s,"%"),cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:o,pointer:a,circle:i}},{custom:!!this.props.style});return g.a.createElement("div",{style:l.color,ref:function(t){e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},g.a.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),g.a.createElement("div",{style:l.white,className:"saturation-white"},g.a.createElement("div",{style:l.black,className:"saturation-black"}),g.a.createElement("div",{style:l.pointer},this.props.pointer?g.a.createElement(this.props.pointer,this.props):g.a.createElement("div",{style:l.circle}))))}}]),n}();qe.defaultProps={onChange:function(){}};var Ue=function(e){d()(n,v.PureComponent||v.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),a()(L()(e),"handleChange",(function(t){var n=q.calculateChange(t,e.props.direction,e.props.hsl,e.container);n&&"function"==typeof e.props.onChange&&e.props.onChange(n,t)})),a()(L()(e),"handleMouseDown",(function(t){e.handleChange(t),window.addEventListener("mousemove",e.handleChange),window.addEventListener("mouseup",e.handleMouseUp)})),a()(L()(e),"handleMouseUp",(function(t){e.handleChange(t),e.unbindEventListeners()})),e}return s()(n,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=F()({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 3px",position:"relative",height:"100%",borderRadius:"2px"},pointer:{position:"absolute",left:"".concat(Math.min(this.props.hsl.h/3.6,97.25),"%")},slider:{width:"8px",borderRadius:"50%",border:"2px solid #fff",height:"8px",boxShadow:"0 0 1px 1px rgba(0, 0, 0, .3)",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:"".concat(-100*this.props.hsl.h/360+100,"%")}}},{vertical:"vertical"===n});return g.a.createElement("div",{style:r.hue},g.a.createElement("div",{className:"hue-".concat(n),style:r.container,ref:function(t){e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},g.a.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),g.a.createElement("div",{style:r.pointer},this.props.pointer?g.a.createElement(this.props.pointer,this.props):g.a.createElement("div",{style:r.slider}))))}}]),n}();var Ge=function(e){d()(n,v.PureComponent||v.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),a()(L()(e),"handleChange",(function(t){var n=U.calculateChange(t,e.props.hsl,e.props.direction,e.props.a,e.container);n&&"function"==typeof e.props.onChange&&e.props.onChange(n,t)})),a()(L()(e),"handleMouseDown",(function(t){e.handleChange(t),window.addEventListener("mousemove",e.handleChange),window.addEventListener("mouseup",e.handleMouseUp)})),a()(L()(e),"handleMouseUp",(function(t){e.handleChange(t),e.unbindEventListeners()})),a()(L()(e),"unbindEventListeners",(function(){window.removeEventListener("mousemove",e.handleChange),window.removeEventListener("mouseup",e.handleMouseUp)})),e}return s()(n,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=F()({default:{alpha:{absolute:"0px 0px 0px 0px"},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba(".concat(t.r,",").concat(t.g,",").concat(t.b,", 0) 0%,\n           rgba(").concat(t.r,",").concat(t.g,",").concat(t.b,", 1) 100%)"),boxShadow:this.props.shadow,borderRadius:"2px"},container:{position:"relative",height:"100%",margin:"0 3px",borderRadius:"2px"},pointer:{position:"absolute",left:"".concat(100*t.a,"%")},slider:{width:"8px",borderRadius:"50%",border:"2px solid #fff",height:"8px",boxShadow:"0 0 1px 1px rgba(0, 0, 0, .3)",transform:"translateX(-4px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba(".concat(t.r,",").concat(t.g,",").concat(t.b,", 0) 0%, rgba(").concat(t.r,",").concat(t.g,",").concat(t.b,", 1) 100%)")},pointer:{left:0,top:"".concat(100*t.a,"%")}}},{vertical:"vertical"===this.props.direction});return g.a.createElement("div",{style:n.alpha},g.a.createElement("div",{style:n.checkboard},g.a.createElement(B.Checkboard,{renderers:this.props.renderers,borderRadius:"2px"})),g.a.createElement("div",{style:n.gradient}),g.a.createElement("div",{style:n.container,ref:function(t){e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},g.a.createElement("div",{className:"alpha-container",style:n.pointer},this.props.pointer?g.a.createElement(this.props.pointer,this.props):g.a.createElement("div",{style:n.slider}))))}}]),n}();var We=function(e){d()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),a()(L()(r),"onComplete",(function(){r.state.inputValue&&(r.setState({value:r.state.inputValue,inputValue:null}),r.props.onChange(a()({},r.props.label.toLowerCase(),r.state.inputValue)))})),r.state={value:String(e.value).toUpperCase(),inputValue:String(e.value).toUpperCase()},r}return s()(n,[{key:"componentWillReceiveProps",value:function(e){e.value!==this.state.value&&this.setState({value:e.value,inputValue:null})}},{key:"render",value:function(){var e=this;return g.a.createElement("div",{style:{width:this.props.width}},g.a.createElement(G.a,{size:"small",value:null===this.state.inputValue?this.state.value:this.state.inputValue,onChange:function(t){e.setState({inputValue:t.target.value})},onBlur:this.onComplete,onPressEnter:this.onComplete,style:{fontSize:12,textAlign:"center",padding:"2px"},"data-testid":"field-input-".concat(this.props.label.toLowerCase())}),g.a.createElement("div",{className:"lake-input-label"},this.props.label))}}]),n}(g.a.Component);We.propTypes={value:R.a.oneOfType([R.a.string,R.a.number]),width:R.a.number,label:R.a.string,percentage:R.a.bool,onChange:R.a.func};var Ye=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,o=e.hex,a=e.disableAlpha,i=F()({default:{fields:{display:"flex",justifyContent:"space-between",marginTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"100%",padding:"2px 10% 2px",border:"1px solid rgba(0, 0, 0, .09)",borderRadius:"2px",fontSize:"12px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),l=function(e,o){e.hex?N()(e.hex).isValid()&&t({hex:e.hex,source:"hex"},o):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},o):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:r.h,s:r.s,l:r.l,a:e.a,source:"rgb"},o))};return g.a.createElement("div",{style:i.fields,className:"flexbox-fix lake-color-fields"},g.a.createElement(We,{width:80,label:"HEX",value:o.toUpperCase(),onChange:l}),g.a.createElement(We,{width:30,label:"R",value:n.r,onChange:l}),g.a.createElement(We,{width:30,label:"G",value:n.g,onChange:l}),g.a.createElement(We,{width:30,label:"B",value:n.b,onChange:l}),g.a.createElement(We,{width:30,label:"A",percentage:!0,value:Math.round(100*n.a),onChange:l}))};Ye.propTypes={disableAlpha:R.a.bool,width:R.a.oneOfType([R.a.string,R.a.number]),rgb:R.a.object,hsv:R.a.object,hsl:R.a.object,hex:R.a.string,onChange:R.a.func,renderers:R.a.object};var $e=function(e){var t=e.width,n=e.rgb,r=e.hsv,o=e.hsl,a=e.hex,i=e.onChange,l=e.disableAlpha,c=e.renderers,s=F()({default:{picker:{width:t,padding:0,background:"#fff"},Saturation:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)",circle:{width:"10px",height:"10px",border:"1px solid #fff"}},controls:{display:"flex"},sliders:{flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",background:"rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(n.a,")")},Hue:{container:{radius:"2px",hadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},slider:{width:"8px",height:"8px",background:"transparent",border:"1px solid #fff"}},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}}},{disableAlpha:l});return g.a.createElement("div",{className:"lake-custom-picker"},g.a.createElement("div",{className:"lake-satuation-container"},g.a.createElement(qe,{style:s.Saturation,hsl:o,hsv:r,onChange:i})),g.a.createElement("div",{style:s.controls,className:"flexbox-fix"},g.a.createElement("div",{style:s.sliders},g.a.createElement("div",{className:"lake-hue-container"},g.a.createElement(Ue,{style:s.Hue,hsl:o,onChange:i})),g.a.createElement("div",{className:"lake-hue-container"},g.a.createElement(Ge,{style:s.Alpha,rgb:n,hsl:o,renderers:c,onChange:i}))),g.a.createElement("div",{className:"lake-check-board-container"},g.a.createElement(B.Checkboard,null),g.a.createElement("div",{style:s.activeColor}))),g.a.createElement(Ye,{rgb:n,hsl:o,hex:a,onChange:i,disableAlpha:l}))};$e.propTypes={disableAlpha:R.a.bool,width:R.a.oneOfType([R.a.string,R.a.number]),rgb:R.a.object,hsv:R.a.object,hsl:R.a.object,hex:R.a.string,onChange:R.a.func,renderers:R.a.object},$e.defaultProps={disableAlpha:!1,width:216};var Ke=Object(B.ColorWrap)($e);var Xe=function(e){d()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;l()(this,n),r=t.call(this,e),a()(L()(r),"onChange",(function(e,t){r.setState({color:e.rgb,hex:e.hex}),(!t||"mousemove"!==t.type&&"mousedown"!==t.type)&&r.props.onSelect("rgba(".concat(e.rgb.r,",").concat(e.rgb.g,",").concat(e.rgb.b,",").concat(e.rgb.a,")"))}));var o=e.color,i=null;if(0!==e.color.indexOf("#")){i={};var c=["r","g","b","a"];e.color.replace(/[0-9]+(\.[0-9]+)*/g,(function(e){i[c.shift()]=parseFloat(e)})),o=null}return r.state={color:i,hex:o},r}return s()(n,[{key:"render",value:function(){return y.a.createPortal(g.a.createElement("div",{className:"yuquesdk"},g.a.createElement("div",{style:this.props.position,className:"lake-rgbpicker-container","data-lake-editor-ui":"colorpicker","data-lake_prevent_click_unselect":"true"},g.a.createElement(Ke,{color:this.state.color||this.state.hex,onChange:this.onChange,disableAlpha:!1}))),this.props.container)}}]),n}(g.a.Component);a()(Xe,"propTypes",{container:R.a.object,color:R.a.string,position:R.a.object,onSelect:R.a.func});var Ze={colors:[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#F5222D","#FA541C","#FA8C16","#FADB14","#52C41A","#13C2C2","#1890FF","#2F54EB","#722ED1","#EB2F96"],["#FFE8E6","#FFECE0","#FFEFD1","#FCFCCA","#E4F7D2","#D3F5F0","#D4EEFC","#DEE8FC","#EFE1FA","#FAE1EB"],["#FFA39E","#FFBB96","#FFD591","#FFFB8F","#B7EB8F","#87E8DE","#91D5FF","#ADC6FF","#D3ADF7","#FFADD2"],["#FF4D4F","#FF7A45","#FFA940","#FFEC3D","#73D13D","#36CFC9","#40A9FF","#597EF7","#9254DE","#F759AB"],["#CF1322","#D4380D","#D46B08","#D4B106","#389E0D","#08979C","#096DD9","#1D39C4","#531DAB","#C41D7F"],["#820014","#871400","#873800","#614700","#135200","#00474F","#003A8C","#061178","#22075E","#780650"]]};Ze._map=function(){for(var e={},t=Ze.colors,n=0,r=t.length;n<r;n++)for(var o=0,a=t[n].length;o<a;o++)e[t[n][o]]={y:n,x:o};return e}(),Ze.getStroke=function(e){var t=Ze._map[e];return t&&(2===t.y||3===t.y&&t.x>2&&t.x<5)?this.colors[4][t.x]:e},Ze.getColors=function(){return this.colors};var Qe={"zh-cn":{"#000000":"黑色","#262626":"深灰 3","#595959":"深灰 2","#8C8C8C":"深灰 1","#BFBFBF":"灰色","#D9D9D9":"浅灰 4","#E9E9E9":"浅灰 3","#F5F5F5":"浅灰 2","#FAFAFA":"浅灰 1","#FFFFFF":"白色","#F5222D":"红色","#FA541C":"朱红","#FA8C16":"橙色","#FADB14":"黄色","#52C41A":"绿色","#13C2C2":"青色","#1890FF":"浅蓝","#2F54EB":"蓝色","#722ED1":"紫色","#EB2F96":"玫红","#FFE8E6":"红色 1","#FFECE0":"朱红 1","#FFEFD1":"橙色 1","#FCFCCA":"黄色 1","#E4F7D2":"绿色 1","#D3F5F0":"青色 1","#D4EEFC":"浅蓝 1","#DEE8FC":"蓝色 1","#EFE1FA":"紫色 1","#FAE1EB":"玫红 1","#FFA39E":"红色 2","#FFBB96":"朱红 2","#FFD591":"橙色 2","#FFFB8F":"黄色 2","#B7EB8F":"绿色 2","#87E8DE":"青色 2","#91D5FF":"浅蓝 2","#ADC6FF":"蓝色 2","#D3ADF7":"紫色 2","#FFADD2":"玫红 2","#FF4D4F":"红色 3","#FF7A45":"朱红 3","#FFA940":"橙色 3","#FFEC3D":"黄色 3","#73D13D":"绿色 3","#36CFC9":"青色 3","#40A9FF":"浅蓝 3","#597EF7":"蓝色 3","#9254DE":"紫色 3","#F759AB":"玫红 3","#CF1322":"红色 4","#D4380D":"朱红 4","#D46B08":"橙色 4","#D4B106":"黄色 4","#389E0D":"绿色 4","#08979C":"青色 4","#096DD9":"浅蓝 4","#1D39C4":"蓝色 4","#531DAB":"紫色 4","#C41D7F":"玫红 4","#820014":"红色 5","#871400":"朱红 5","#873800":"橙色 5","#614700":"黄色 5","#135200":"绿色 5","#00474F":"青色 5","#003A8C":"浅蓝 5","#061178":"蓝色 5","#22075E":"紫色 5","#780650":"玫红 5","#585A5A":"深灰 2","#8A8F8D":"深灰 1","#D8DAD9":"灰色","#E7E9E8":"浅灰 4","#EFF0F0":"浅灰 3","#F4F5F5":"浅灰 2","#DF2A3F":"红色","#ED740C":"橘橙","#ECAA04":"金盏黄","#FBDE28":"柠檬黄","#74B602":"绿色","#1DC0C9":"青色","#117CEE":"浅蓝","#2F4BDA":"蓝色","#601BDE":"紫色","#D22D8D":"玫红","#FBE4E7":"红色 1","#FDE6D3":"橘橙 1","#F9EFCD":"金盏黄 1","#FBF5CB":"柠檬黄 1","#E8F7CF":"绿色 1","#CEF5F7":"青色 1","#D9EAFC":"浅蓝 1","#D9DFFC":"蓝色 1","#E6DCF9":"紫色 1","#FBDFEF":"玫红 1","#F1A2AB":"红色 2","#F8B881":"橘橙 2","#F5D480":"金盏黄 2","#FCE75A":"柠檬黄 2","#C1E77E":"绿色 2","#81DFE4":"青色 2","#81BBF8":"浅蓝 2","#96A7FD":"蓝色 2","#BA9BF2":"紫色 2","#F297CC":"玫红 2","#E4495B":"红色 3","#F38F39":"橘橙 3","#F3BB2F":"金盏黄 3","#EDCE02":"柠檬黄 3","#8CCF17":"绿色 3","#01B2BC":"青色 3","#2F8EF4":"浅蓝 3","#4861E0":"蓝色 3","#7E45E8":"紫色 3","#E746A4":"玫红 3","#AD1A2B":"红色 4","#C75C00":"橘橙 4","#C99103":"金盏黄 4","#A58F04":"柠檬黄 4","#5C8D07":"绿色 4","#07787E":"青色 4","#0C68CA":"浅蓝 4","#213BC0":"蓝色 4","#4C16B1":"紫色 4","#AE146E":"玫红 4","#70000D":"红色 5","#663000":"橘橙 5","#664900":"金盏黄 5","#665800":"柠檬黄 5","#2A4200":"绿色 5","#004347":"青色 5","#00346B":"浅蓝 5","#101E60":"蓝色 5","#270070":"紫色 5","#5C0036":"玫红 5"},en:{"#000000":"Black","#262626":"Dark Gray 3","#595959":"Dark Gray 2","#8C8C8C":"Dark Gray 1","#BFBFBF":"Gray","#D9D9D9":"Light Gray 4","#E9E9E9":"Light Gray 3","#F5F5F5":"Light Gray 2","#FAFAFA":"Light Gray 1","#FFFFFF":"White","#F5222D":"Red","#FA541C":"Chinese Red","#FA8C16":"Orange","#FADB14":"Yellow","#52C41A":"Green","#13C2C2":"Cyan","#1890FF":"Light Blue","#2F54EB":"Blue","#722ED1":"Purple","#EB2F96":"Magenta","#FFE8E6":"Red 1","#FFECE0":"Chinese Red 1","#FFEFD1":"Orange 1","#FCFCCA":"Yellow 1","#E4F7D2":"Green 1","#D3F5F0":"Cyan 1","#D4EEFC":"Light Blue 1","#DEE8FC":"Blue 1","#EFE1FA":"Purple 1","#FAE1EB":"Magenta 1","#FFA39E":"Red 2","#FFBB96":"Chinese Red 2","#FFD591":"Orange 2","#FFFB8F":"Yellow 2","#B7EB8F":"Green 2","#87E8DE":"Cyan 2","#91D5FF":"Light Blue 2","#ADC6FF":"Blue 2","#D3ADF7":"Purple 2","#FFADD2":"Magenta 2","#FF4D4F":"Red 3","#FF7A45":"Chinese Red 3","#FFA940":"Orange 3","#FFEC3D":"Yellow 3","#73D13D":"Green 3","#36CFC9":"Cyan 3","#40A9FF":"Light Blue 3","#597EF7":"Blue 3","#9254DE":"Purple 3","#F759AB":"Magenta 3","#CF1322":"Red 4","#D4380D":"Chinese Red 4","#D46B08":"Orange 4","#D4B106":"Yellow 4","#389E0D":"Green 4","#08979C":"Cyan 4","#096DD9":"Light Blue 4","#1D39C4":"Blue 4","#531DAB":"Purple 4","#C41D7F":"Magenta 4","#820014":"Red 5","#871400":"Chinese Red 5","#873800":"Orange 5","#614700":"Yellow 5","#135200":"Green 5","#00474F":"Cyan 5","#003A8C":"Light Blue 5","#061178":"Blue 5","#22075E":"Purple 5","#780650":"Magenta 5","#585A5A":"Dark Gray 2","#8A8F8D":"Dark Gray 1","#D8DAD9":"Gray","#E7E9E8":"Light Gray 4","#EFF0F0":"Light Gray 3","#F4F5F5":"Light Gray 2","#DF2A3F":"Red","#ED740C":"Orange","#ECAA04":"Yellow","#FBDE28":"Bright Yellow","#74B602":"Green","#1DC0C9":"Cyan","#117CEE":"Light Blue","#2F4BDA":"Blue","#601BDE":"Purple","#D22D8D":"Magenta","#FBE4E7":"Red 1","#FDE6D3":"Orange 1","#F9EFCD":"Yellow 1","#FBF5CB":"Bright Yellow 1","#E8F7CF":"Green 1","#CEF5F7":"Cyan 1","#D9EAFC":"Light Blue 1","#D9DFFC":"Blue 1","#E6DCF9":"Purple 1","#FBDFEF":"Magenta 1","#F1A2AB":"Red 2","#F8B881":"Orange 2","#F5D480":"Yellow 2","#FCE75A":"Bright Yellow 2","#C1E77E":"Green 2","#81DFE4":"Cyan 2","#81BBF8":"Light Blue 2","#96A7FD":"Blue 2","#BA9BF2":"Purple 2","#F297CC":"Magenta 2","#E4495B":"Red 3","#F38F39":"Orange 3","#F3BB2F":"Yellow 3","#EDCE02":"Bright Yellow 3","#8CCF17":"Green 3","#01B2BC":"Cyan 3","#2F8EF4":"Light Blue 3","#4861E0":"Blue 3","#7E45E8":"Purple 3","#E746A4":"Magenta 3","#AD1A2B":"Red 4","#C75C00":"Orange 4","#C99103":"Yellow 4","#A58F04":"Bright Yellow 4","#5C8D07":"Green 4","#07787E":"Cyan 4","#0C68CA":"Light Blue 4","#213BC0":"Blue 4","#4C16B1":"Purple 4","#AE146E":"Magenta 4","#70000D":"Red 5","#663000":"Orange 5","#664900":"Yellow 5","#665800":"Bright Yellow 5","#2A4200":"Green 5","#004347":"Cyan 5","#00346B":"Light Blue 5","#101E60":"Blue 5","#270070":"Purple 5","#5C0036":"Magenta 5"}};Pe(".lake-colorboard-default {\n  display: flex;\n  align-items: center;\n  padding: 4px 8px;\n  margin: 4px 0 8px;\n  border-radius: 2px;\n  cursor: pointer;\n}\n.lake-colorboard-default:hover {\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-colorboard-group {\n  display: flex;\n  padding: 0 8px;\n  width: 100%;\n  height: auto;\n  position: relative;\n}\n.lake-colorboard-group:first-child {\n  margin-bottom: 10px;\n}\n.lake-colorboard-group:nth-child(2) {\n  margin-bottom: 6px;\n}\n.lake-colorboard-group:last-child {\n  margin-bottom: 0;\n}\n.lake-colorboard-group-item {\n  width: 24px;\n  height: 24px;\n  padding: 2px 2px;\n  display: inline-block;\n  border-radius: 3px 3px;\n  border: 1px solid transparent;\n  flex: 0 0 auto;\n  cursor: pointer;\n}\n.lake-colorboard-group-item > span {\n  position: relative;\n  width: 18px;\n  height: 18px;\n  display: block;\n  border-radius: 2px 2px;\n  border: 1px solid transparent;\n}\n.lake-colorboard-group-item > span svg {\n  position: absolute;\n  top: -1px;\n  left: 1px;\n  width: 12px;\n  height: 12px;\n}\n.lake-colorboard-group-item-border > span {\n  border: 1px solid var(--yq-border-light);\n}\n.lake-colorboard-group-item-special {\n  position: relative;\n}\n.lake-colorboard-group-item-special::after {\n  content: \"\";\n  display: block;\n  position: absolute;\n  top: 10px;\n  left: 0;\n  width: 22px;\n  height: 0;\n  border-bottom: 2px solid #ff5151;\n  transform: rotate(-45deg);\n}\n.lake-colorboard-group-item:hover {\n  border: 1px solid #d9d9d9;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.12);\n}\n.lake-colorboard .lake-color-history {\n  padding: 6px 12px;\n  margin-top: 8px;\n  text-align: left;\n}\n.lake-colorboard .lake-none-custom-color {\n  line-height: 20px;\n  color: var(--yq-text-disable);\n  padding: 2px 12px;\n  text-align: left;\n}\n.lake-colorboard .lake-more-color {\n  margin-top: 10px;\n  border-top: 1px solid var(--yq-border-primary);\n}\n.lake-colorboard .lake-more-color-container {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  padding: 12px 8px;\n  border-radius: 2px;\n}\n.lake-colorboard .lake-more-color-container:hover {\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-colorboard .lake-more-color-preview {\n  display: inline-block;\n  width: 17px;\n  height: 17px;\n  margin-right: 8px;\n  border-radius: 50%;\n  background-position: center;\n  background-image: url('https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*G6CzS7jByMIAAAAAAAAAAABkARQnAQ');\n}\n.lake-colorboard .lake-more-color .lake-icon-arrow-right {\n  position: absolute;\n  right: 12px;\n  line-height: 18px;\n}\n.lake-rgbpicker-container {\n  position: absolute;\n  width: 240px;\n  height: 244px;\n  padding: 12px;\n  border-radius: 4px;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);\n  border: 1px solid var(--yq-border-light);\n  background-color: var(--yq-bg-primary);\n  z-index: 1032;\n}\n.lake-rgbpicker-container .lake-input-label {\n  text-align: center;\n  font-size: 12px;\n  color: var(--yq-text-caption);\n}\n.lake-custom-picker {\n  width: 100%;\n  padding: 0;\n}\n.lake-satuation-container {\n  position: relative;\n  height: 130px;\n  overflow: hidden;\n  margin-bottom: 12px;\n}\n.lake-hue-container {\n  position: relative;\n  width: 182px;\n  height: 8px;\n  margin-bottom: 6px;\n}\n.lake-check-board-container {\n  width: 22px;\n  height: 22px;\n  border-radius: 50%;\n  position: relative;\n  overflow: hidden;\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.35), inset 0 0 4px rgba(0, 0, 0, 0.35);\n}\n");var Je=[["@white",["@white","@yuque-grey-1","@yuque-grey-2","@yuque-grey-3","@yuque-grey-4"]],["@orange-1",["@orange-1","@orange-3","@orange-5","@orange-6","@orange-7","@orange-9"]],["@yellow-1",["@yellow-1","@yellow-3","@yellow-5","@yellow-6","@yellow-7","@yellow-9"]],["@sea-blue-1",["@sea-blue-1","@sea-blue-3","@sea-blue-5","@sea-blue-6","@sea-blue-7","@sea-blue-9"]],["@magenta-1",["@magenta-1","@magenta-3","@magenta-5","@magenta-6","@magenta-7","@magenta-9"]],["@cyan-1",["@cyan-1","@cyan-4","@cyan-5","@cyan-6","@cyan-8","@cyan-9"]],["@yuque-grey-9",["@yuque-grey-5","@yuque-grey-6","@yuque-grey-7","@yuque-grey-8","@yuque-grey-9","@black"]],["@red-6",["@red-1","@red-3","@red-5","@red-6","@red-7","@red-9"]],["@bright-yellow-5",["@bright-yellow-1","@bright-yellow-4","@bright-yellow-5","@bright-yellow-6","@bright-yellow-8","@bright-yellow-9"]],["@blue-6",["@blue-1","@blue-3","@blue-5","@blue-6","@blue-7","@blue-9"]],["@purple-6",["@purple-1","@purple-3","@purple-5","@purple-6","@purple-7","@purple-9"]],["@pea-green-6",["@pea-green-1","@pea-green-3","@pea-green-5","@pea-green-6","@pea-green-7","@pea-green-9"]]],et={light:nt($.themeToken),dark:nt($.themeDarkToken)},tt={light:rt($.themeToken),dark:rt($.themeDarkToken)};function nt(e){return Je.map((function(t){var n=Y()(t,2),r=n[0],o=n[1];return{standard:e[r],gradient:o.map((function(t){return e[t]}))}}))}function rt(e){var t=nt(e);return t[0]="transparent",t}var ot=[["@black","@yuque-grey-9","@yuque-grey-8","@yuque-grey-7","@yuque-grey-5","@yuque-grey-4","@yuque-grey-3","@yuque-grey-2","@yuque-grey-1","@white"],["@red-6","@orange-6","@yellow-6","@bright-yellow-5","@pea-green-6","@cyan-5","@blue-6","@sea-blue-6","@purple-6","@magenta-6"],["@red-1","@orange-1","@yellow-1","@bright-yellow-1","@pea-green-1","@cyan-1","@blue-1","@sea-blue-1","@purple-1","@magenta-1"],["@red-3","@orange-3","@yellow-3","@bright-yellow-4","@pea-green-3","@cyan-3","@blue-3","@sea-blue-3","@purple-3","@magenta-3"],["@red-5","@orange-5","@yellow-5","@bright-yellow-6","@pea-green-5","@cyan-6","@blue-5","@sea-blue-5","@purple-5","@magenta-5"],["@red-7","@orange-7","@yellow-7","@bright-yellow-8","@pea-green-7","@cyan-8","@blue-7","@sea-blue-7","@purple-7","@magenta-7"],["@red-9","@orange-9","@yellow-9","@bright-yellow-9","@pea-green-9","@cyan-9","@blue-9","@sea-blue-9","@purple-9","@magenta-9"]],at={light:it($.themeToken),dark:it($.themeDarkToken)};function it(e){return ot.map((function(t){return t.map((function(t){return e[t]}))}))}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}var ct={"zh-cn":{nonFillColor:"无填充色",defaultColor:"默认",moreColor:"更多颜色",usedColors:"最近使用自定义颜色",noColors:"暂无"},en:{nonFillColor:"No fill color",defaultColor:"Default",moreColor:"More colors",usedColors:"Recently used custom colors",noColors:"No colors"}},st=function(e){d()(n,e);var t=lt(n);function n(){var e;l()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),a()(L()(e),"toState",(function(e,t){var n=e.hex?N()(e.hex):N()(e),r=n.toHsl(),o=n.toHsv(),a=n.toRgb(),i=n.toHex();return 0===r.s&&(r.h=t||0,o.h=t||0),{hsl:r,hex:"transparent"===e?"transparent":"#".concat(i),rgb:a,hsv:o,oldHue:e.h||t||r.h,source:e.source}})),a()(L()(e),"getContrastingColor",(function(e){return"transparent"===e.hex?"rgba(0,0,0,0.4)":(299*e.rgb.r+587*e.rgb.g+114*e.rgb.b)/1e3>=210?"#8C8C8C":"#FFFFFF"})),a()(L()(e),"onSelect",(function(t,n){n.preventDefault(),n.stopPropagation(),e.props.onSelect&&e.props.onSelect(t)})),e}return s()(n,[{key:"render",value:function(){var e,t=this.props,n=t.color,r=t.activeColors,o=t.theme,a=this.toState(n||"#FFFFFF");e="dark"===o?["#000000","#141414","transparent"].indexOf(n)>=0:["#ffffff","#fafafa","transparent"].indexOf(a.hex)>=0;var i=r.indexOf(n)>=0,l="transparent"===n,c={check:{fill:this.getContrastingColor(a),display:i?"block":"none"}};return g.a.createElement("span",{className:P()("lake-colorboard-group-item",{"lake-colorboard-group-item-border":e,"lake-colorboard-group-item-active":i,"lake-colorboard-group-item-special":l}),title:Qe[this.props.lang||"zh-cn"][n],onClick:this.onSelect.bind(this,n)},g.a.createElement("span",{style:{backgroundColor:"".concat(n)}},g.a.createElement("svg",{style:c.check,viewBox:"0 0 18 18"},g.a.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))}}]),n}(g.a.Component);a()(st,"propTypes",{color:R.a.string,activeColors:R.a.array,lang:R.a.string,defaultColor:R.a.string,theme:R.a.oneOf(["light","dark"]),onSelect:R.a.func});var ut=function(e){d()(n,e);var t=lt(n);function n(){return l()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=void 0===t?[]:t,r=e.activeColors,o=e.defaultColor,a=e.onSelect,i=e.lang,l=e.theme;return g.a.createElement("span",{className:"lake-colorboard-group"},n.map((function(e){return g.a.createElement(st,{color:e,key:e,lang:i,activeColors:r,defaultColor:o,theme:l,onSelect:a})})))}}]),n}(g.a.Component);a()(ut,"propTypes",{activeColors:R.a.array,defaultColor:R.a.string,lang:R.a.string,data:R.a.array,theme:R.a.oneOf(["light","dark"]),onSelect:R.a.func});var dt=function(e){d()(n,e);var t=lt(n);function n(e){var r;return l()(this,n),r=t.call(this,e),a()(L()(r),"toggleRgbaPicker",(function(e){e.stopPropagation();for(var t=e.target;t&&!t.classList.contains("lake-more-color");)t=t.parentNode;if(t){var n=!r.state.showPicker,o=null;if(n){var a=t.getBoundingClientRect();o={top:a.top-(r.props.container?249:192)+window.pageYOffset};var i=a.left+a.width+4;i+240>document.body.clientWidth?o.right=document.body.clientWidth-a.left+4+window.pageXOffset:o.left=i-window.pageXOffset}r.setState({showPicker:n,position:o})}})),a()(L()(r),"onSelect",(function(e){r.customColor=null,r.props.onSelect(e,!1)})),a()(L()(r),"onCustomSelect",(function(e){r.customColor=e,r.props.onSelect(e,!0)})),r.state={showPicker:!1,position:null},r}return s()(n,[{key:"componentWillReceiveProps",value:function(e){e.show||(this.setState({showPicker:!1}),this.customColor&&(this.props.onSaveColor&&this.props.onSaveColor(this.customColor),delete this.customColor))}},{key:"render",value:function(){var e=this,t=this.props,n=t.activeColors,r=t.defaultColor,o=t.show,a=t.customColors,i=t.CustomPalette,l=t.theme,c=void 0===l?"light":l,s=i?i.getColors():at[c]||Ze.getColors(),u=this.state.showPicker,d=ct[this.props.lang||"zh-cn"];return g.a.createElement("div",{className:"lake-colorboard","data-lake-editor-ui":"colorpicker","data-lake_prevent_click_unselect":"true",onMouseDown:function(e){"INPUT"!==e.target.tagName&&e.preventDefault()}},r&&g.a.createElement("div",{className:"lake-colorboard-default",onClick:function(){return e.onSelect(r)}},g.a.createElement(st,{onSelect:this.onSelect,color:r,defaultColor:"#FFFFFF",theme:c,activeColors:[]}),g.a.createElement("span",{style:{marginLeft:8,lineHeight:2}},"transparent"===r?d.nonFillColor:d.defaultColor)),s.map((function(t,r){return g.a.createElement(ut,{data:t,key:r,lang:e.props.lang,activeColors:n,theme:c,onSelect:e.onSelect})})),g.a.createElement("div",{className:"lake-color-history"},d.usedColors),a&&a.length>0?g.a.createElement(ut,{data:a.concat().reverse(),key:"customColors",activeColors:n,theme:c,onSelect:this.onSelect}):g.a.createElement("div",{className:"lake-none-custom-color"},d.noColors),g.a.createElement("div",{className:"lake-more-color"},g.a.createElement("div",{className:"lake-more-color-container",onClick:this.toggleRgbaPicker},g.a.createElement("div",{className:"lake-more-color-preview"}),g.a.createElement("span",null,d.moreColor),g.a.createElement("span",{className:"lake-icon lake-icon-arrow-right"}))),o&&u&&g.a.createElement(Xe,{color:this.props.activeColors[0],position:this.state.position,onSelect:this.onCustomSelect,container:this.props.container||document.body}))}}]),n}(g.a.Component);function ft(e){if(!e||"transparent"===e)return e;if(e.startsWith("#"))return e.toLowerCase();var t=N()(e);return 1===t.getAlpha()?t.toHexString():t.toRgbString()}a()(dt,"propTypes",{theme:R.a.oneOf(["light","dark"]).isRequired,activeColors:R.a.array,customColors:R.a.array,defaultColor:R.a.string,show:R.a.bool,lang:R.a.string,onSelect:R.a.func,onSaveColor:R.a.func,container:R.a.object,CustomPalette:R.a.object}),dt.Palette=Ze;var pt=function(){function e(t){l()(this,e),a()(this,"_color",null),a()(this,"_owner",null),this._color=ft(t)||null}return s()(e,[{key:"color",get:function(){return this._color}},{key:"owner",get:function(){return this._owner}},{key:"matchOwner",value:function(e){return!this._owner||this._owner===e}},{key:"setOwner",value:function(e){this._owner=e}},{key:"setState",value:function(e,t){this._owner=e,this._color=ft(t)}}]),e}();function ht(e){if("transparent"===e)return"dark";var t=N()(e).toRgb();return(299*t.r+587*t.g+114*t.b)/1e3>=210?"dark":"light"}Pe('.ne-ui-color-picker-v2-label,\n.ne-ui-color-picker-v2-swatch-title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  line-height: 22px;\n  color: var(--yq-text-primary);\n  margin-bottom: 10px;\n}\n.ne-ui-color-picker-v2-switch-tabs {\n  overflow: visible;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav {\n  margin-bottom: 12px;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav::before {\n  display: none;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-ink-bar {\n  display: none;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-nav-list {\n  padding: 4px;\n  border-radius: 8px;\n  background: var(--yq-yuque-grey-3);\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab {\n  padding: 0;\n  margin: 0;\n  min-width: 60px;\n  height: 24px;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: normal;\n  opacity: 0.6;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab.ant-tabs-tab-active {\n  opacity: 1;\n  font-weight: normal;\n  background: var(--yq-white);\n  border-radius: 6px;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab-btn {\n  line-height: 0;\n}\n.ne-ui-color-picker-v2-check-icon {\n  display: block;\n  width: 16px;\n  height: 16px;\n}\n.ne-ui-color-picker-v2-check-icon[data-mode="dark"] {\n  color: #8A8F8D;\n}\n.ne-ui-color-picker-v2-check-icon[data-mode="light"] {\n  color: #FFFFFF;\n}\n');var mt=function(e){d()(n,v.PureComponent);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return g.a.createElement("span",{className:P()("ne-ui-color-picker-v2-check-icon",this.props.className),"data-mode":this.props.mode},g.a.createElement("svg",{viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:"larkui-icon"},g.a.createElement("g",{id:"Check-1.line/1.操作类/对号",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("g",{id:"Check-编组-4"},g.a.createElement("path",{d:"M210.827453,55.4279258 C214.732696,51.5226829 221.064346,51.5226829 224.969589,55.4279258 C228.803827,59.2621643 228.873541,65.4353789 225.178729,69.354671 L224.969589,69.5700615 L100.969589,193.570061 C97.1353504,197.4043 90.9621359,197.474013 87.0428437,193.779202 L86.8274533,193.570061 L31.1191443,137.861752 C27.2139014,133.95651 27.2139014,127.62486 31.1191443,123.719617 C34.9533828,119.885378 41.1265973,119.815665 45.0458895,123.510477 L45.2612799,123.719617 L93.898,172.356 L210.827453,55.4279258 Z",id:"Check-路径-3",fill:"currentColor",fillRule:"nonzero"}),g.a.createElement("rect",{id:"Check-矩形",x:"0",y:"0",width:"256",height:"256"})))))}}]),n}();Pe(".ne-ui-color-picker-v2-label,\n.ne-ui-color-picker-v2-swatch-title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  line-height: 22px;\n  color: var(--yq-text-primary);\n  margin-bottom: 10px;\n}\n.ne-ui-color-picker-v2-switch-tabs {\n  overflow: visible;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav {\n  margin-bottom: 12px;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav::before {\n  display: none;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-ink-bar {\n  display: none;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-nav-list {\n  padding: 4px;\n  border-radius: 8px;\n  background: var(--yq-yuque-grey-3);\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab {\n  padding: 0;\n  margin: 0;\n  min-width: 60px;\n  height: 24px;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: normal;\n  opacity: 0.6;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab.ant-tabs-tab-active {\n  opacity: 1;\n  font-weight: normal;\n  background: var(--yq-white);\n  border-radius: 6px;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab-btn {\n  line-height: 0;\n}\n.ne-ui-color-picker-v2-color,\n.ne-ui-color-picker-v2-clear {\n  width: 22px;\n  height: 22px;\n  color: var(--yq-yuque-grey-4);\n  cursor: pointer;\n}\n.ne-ui-color-picker-v2-color {\n  border-radius: 50%;\n  box-shadow: inset 0 0 1px 0 rgba(0, 0, 0, 0.3);\n  position: relative;\n}\n.ne-ui-color-picker-v2-color-active::after,\n.ne-ui-color-picker-v2-color:hover::after {\n  content: ' ';\n  width: 26px;\n  height: 26px;\n  position: absolute;\n  top: -2px;\n  left: -2px;\n  border: 1px solid #BEC0BF;\n  border-radius: 50%;\n}\n.ne-ui-color-picker-v2-color-checked {\n  width: 16px;\n  height: 16px;\n  margin: 3px;\n}\n");var vt=function(e){d()(n,v.PureComponent);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.color,r=t.active,o=t.selected;if("transparent"===n)return this.renderClearButton();var a="";return o?a="ne-ui-color-picker-v2-color-selected":r&&(a="ne-ui-color-picker-v2-color-active"),g.a.createElement("div",{onClick:function(){var t,r;null===(t=(r=e.props).onSelect)||void 0===t||t.call(r,ft(n))},className:P()("ne-ui-color-picker-v2-color",a),style:{background:n}},o?g.a.createElement(mt,{className:"ne-ui-color-picker-v2-color-checked",mode:ht(n)}):null)}},{key:"renderClearButton",value:function(){var e=this;return g.a.createElement("div",{onClick:function(){var t,n;null===(t=(n=e.props).onSelect)||void 0===t||t.call(n,"transparent")},className:"ne-ui-color-picker-v2-clear"},g.a.createElement("svg",{width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},g.a.createElement("title",null,"画板"),g.a.createElement("g",{id:"画板",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("path",{d:"M11,0 C17.0751322,0 22,4.92486775 22,11 C22,17.0751322 17.0751322,22 11,22 C4.92486775,22 0,17.0751322 0,11 C0,4.92486775 4.92486775,0 11,0 Z M18.3946074,4.26790206 L4.35813667,18.4758142 C6.12432994,20.0461195 8.45076961,21 11,21 C16.5228475,21 21,16.5228475 21,11 C21,8.4071184 20.0131727,6.04472267 18.3946074,4.26790206 Z M11,1 C5.4771525,1 1,5.4771525 1,11 C1,13.6137372 2.00276603,15.9932658 3.64457137,17.7748591 L17.6861018,3.56375204 C15.9146055,1.96991792 13.570571,1 11,1 Z",id:"形状",fill:"currentColor",fillRule:"nonzero"}))))}}]),n}();Pe(".ne-ui-color-picker-v2-label,\n.ne-ui-color-picker-v2-swatch-title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  line-height: 22px;\n  color: var(--yq-text-primary);\n  margin-bottom: 10px;\n}\n.ne-ui-color-picker-v2-switch-tabs {\n  overflow: visible;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav {\n  margin-bottom: 12px;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav::before {\n  display: none;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-ink-bar {\n  display: none;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-nav-list {\n  padding: 4px;\n  border-radius: 8px;\n  background: var(--yq-yuque-grey-3);\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab {\n  padding: 0;\n  margin: 0;\n  min-width: 60px;\n  height: 24px;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: normal;\n  opacity: 0.6;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab.ant-tabs-tab-active {\n  opacity: 1;\n  font-weight: normal;\n  background: var(--yq-white);\n  border-radius: 6px;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab-btn {\n  line-height: 0;\n}\n.ne-ui-color-picker-v2-content-panel-row {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  margin-bottom: 10px;\n}\n.ne-ui-color-picker-v2-content-panel-row:last-child {\n  margin-bottom: 0;\n}\n.ne-ui-color-picker-v2-content-panel-row > div {\n  margin-right: 10px;\n}\n.ne-ui-color-picker-v2-content-panel-row > div:last-child {\n  margin-right: 0;\n}\n");var gt=function(e){d()(n,v.PureComponent);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this,t=this.toGroup().map((function(t,n){return e.renderRow(t,n)}));return g.a.createElement("div",{className:P()("ne-ui-color-picker-v2-content-panel",this.props.className)},t)}},{key:"toGroup",value:function(){for(var e=this.props,t=e.items,n=e.columnCount,r=void 0===n?6:n,o=t.length,a=[],i=0;i<o;)a.push(t.slice(i,i+r)),i+=r;return a}},{key:"renderRow",value:function(e,t){return g.a.createElement("div",{key:t,className:"ne-ui-color-picker-v2-content-panel-row"},e)}}]),n}(),bt={zhCN:{gradientLabel:"色彩梯度",customLabel:"自定义颜色"},enUS:{gradientLabel:"Color gradient",customLabel:"Custom color"}};function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Pe(".ne-ui-color-picker-v2-label,\n.ne-ui-color-picker-v2-swatch-title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  line-height: 22px;\n  color: var(--yq-text-primary);\n  margin-bottom: 10px;\n}\n.ne-ui-color-picker-v2-switch-tabs {\n  overflow: visible;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav {\n  margin-bottom: 12px;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav::before {\n  display: none;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-ink-bar {\n  display: none;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-nav-list {\n  padding: 4px;\n  border-radius: 8px;\n  background: var(--yq-yuque-grey-3);\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab {\n  padding: 0;\n  margin: 0;\n  min-width: 60px;\n  height: 24px;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: normal;\n  opacity: 0.6;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab.ant-tabs-tab-active {\n  opacity: 1;\n  font-weight: normal;\n  background: var(--yq-white);\n  border-radius: 6px;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab-btn {\n  line-height: 0;\n}\n.ne-ui-color-picker-v2-gradient {\n  margin-top: 20px;\n}\n.ne-ui-color-picker-v2-switch-swatch .ant-tabs-tab {\n  width: 87px;\n}\n.ne-ui-color-picker-v2-swatch {\n  margin-top: 14px;\n}\n.ne-ui-color-picker-v2-swatch:first-child {\n  margin-top: 0;\n}\n");var kt={standard:"#262626",gradient:["#D8DAD9","#BEC0BF","#8A8F8D","#585A5A","#262626","#000000"]},xt=function(e){d()(n,v.PureComponent);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),a()(L()(e),"format",Object(X.a)((function(e){return Et(e)}))),e}return s()(n,[{key:"render",value:function(){var e,t=this.format(this.props.swatches);return e=t.length>1?this.renderTabsLayout(t):this.renderNormalLayout(t),g.a.createElement("div",{className:P()("ne-ui-color-picker-v2-preset",this.props.className)},e)}},{key:"renderNormalLayout",value:function(e){var t=this;return e.map((function(e,n){return t.renderSwatch(e,n,e.title).node}))}},{key:"renderTabsLayout",value:function(e){var t,n=this,r=e.map((function(r,o){var a=r.title||"swatch-"+o,i=n.renderSwatch(e[o],o),l=i.node,c=i.isActive,s=a+o;return!t&&c&&(t=s),g.a.createElement(K.a.TabPane,{tab:a,key:s},l)}));return g.a.createElement(K.a,{className:"ne-ui-color-picker-v2-switch-tabs ne-ui-color-picker-v2-switch-swatch",defaultActiveKey:t},r)}},{key:"renderSwatch",value:function(e,t,n){var r=this.renderStandardColors(e.palettes,t),o=r.activeIndex,a=r.nodes;return{node:g.a.createElement("div",{className:"ne-ui-color-picker-v2-swatch",key:t},n?g.a.createElement("div",{className:"ne-ui-color-picker-v2-swatch-title"},n):null,g.a.createElement("div",{className:"ne-ui-color-picker-v2-standard"},g.a.createElement(gt,{items:a,columnCount:this.props.columnCount})),this.renderGradientColors(e.palettes[o],t)),isActive:-1!==o}}},{key:"renderStandardColors",value:function(e,t){var n=this,r=this.props.shareState,o=r.matchOwner("preset"),a=r.color,i=-1;return{nodes:e.map((function(e,l){var c,s=!!(o&&a&&(e.standard===a||null!==(c=e.gradient)&&void 0!==c&&c.includes(a))),u=!!e.gradient;return s&&(i=l,r.setOwner("preset")),g.a.createElement(vt,{key:"".concat(e.standard,"-").concat(t,"-").concat(l),color:e.standard,active:s,selected:s&&!u,onSelect:function(e){var r,o;null===(r=(o=n.props).onSelect)||void 0===r||r.call(o,"preset",e,{type:"preset",index:t})}})})),activeIndex:i}}},{key:"renderGradientColors",value:function(e,t){var n,r,o=this;null!==(n=e)&&void 0!==n&&n.gradient||(e=kt);var a=this.props,i=a.shareState,l=a.columnCount,c=i.color,s=i.matchOwner("preset"),u=null===(r=e.gradient)||void 0===r?void 0:r.map((function(e,n){var r=!(!s||!c||c!==e);return r&&i.setOwner("preset"),g.a.createElement(vt,{key:"".concat(e,"-").concat(t,"-").concat(n),color:e,active:!1,selected:r,onSelect:function(e){var n,r;null===(n=(r=o.props).onSelect)||void 0===n||n.call(r,"preset",e,{type:"preset",index:t})}})}));return g.a.createElement("div",{className:"ne-ui-color-picker-v2-gradient"},g.a.createElement("div",{className:"ne-ui-color-picker-v2-label"},bt[this.props.lang].gradientLabel),g.a.createElement(gt,{items:u,columnCount:l}))}}]),n}();function Et(e){return(Array.isArray(e)?e:[e]).map((function(e){return wt(wt({},e),{},{palettes:(t=e.palettes,t.map((function(e){var t;return"string"==typeof e?{standard:e}:{standard:ft(e.standard),gradient:null===(t=e.gradient)||void 0===t?void 0:t.map((function(e){return ft(e)}))}})))});var t}))}function Ct(e){var t="color-picker-v2-"+e;try{var n=localStorage.getItem(t);return n?JSON.parse(n).filter(Boolean):[]}catch(e){console.warn("failed to load user color"),console.error(e)}return[]}function Ot(e,t){if(e){var n="color-picker-v2-"+t;try{var r=Ct(t),o=r.indexOf(e);if(0===o)return;-1!==o&&r.splice(o,1),r.unshift(e),r.length=11,localStorage.setItem(n,JSON.stringify(r))}catch(e){console.warn("failed to save user color"),console.error(e)}}}Pe('.ne-ui-color-picker-v2-label,\n.ne-ui-color-picker-v2-swatch-title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  line-height: 22px;\n  color: var(--yq-text-primary);\n  margin-bottom: 10px;\n}\n.ne-ui-color-picker-v2-switch-tabs {\n  overflow: visible;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav {\n  margin-bottom: 12px;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav::before {\n  display: none;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-ink-bar {\n  display: none;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-nav-list {\n  padding: 4px;\n  border-radius: 8px;\n  background: var(--yq-yuque-grey-3);\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab {\n  padding: 0;\n  margin: 0;\n  min-width: 60px;\n  height: 24px;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: normal;\n  opacity: 0.6;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab.ant-tabs-tab-active {\n  opacity: 1;\n  font-weight: normal;\n  background: var(--yq-white);\n  border-radius: 6px;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab-btn {\n  line-height: 0;\n}\n.ne-ui-color-picker-v2-palette-row {\n  display: flex;\n  flex-direction: row;\n}\n.ne-ui-color-picker-v2-palette-row:first-child .ne-ui-color-picker-v2-palette-item:first-child {\n  border-top-left-radius: 6px;\n}\n.ne-ui-color-picker-v2-palette-row:first-child .ne-ui-color-picker-v2-palette-item:last-child {\n  border-top-right-radius: 6px;\n}\n.ne-ui-color-picker-v2-palette-row:last-child .ne-ui-color-picker-v2-palette-item:first-child {\n  border-bottom-left-radius: 6px;\n}\n.ne-ui-color-picker-v2-palette-row:last-child .ne-ui-color-picker-v2-palette-item:last-child {\n  border-bottom-right-radius: 6px;\n}\n.ne-ui-color-picker-v2-palette-item {\n  width: 23px;\n  height: 23px;\n  border: 1px solid transparent;\n}\n.ne-ui-color-picker-v2-palette-item-checked {\n  margin-top: 2.5px;\n  margin-left: 2.5px;\n}\n.ne-ui-color-picker-v2-palette-item[data-contrasiting="dark"]:hover {\n  border: 1px solid #8A8F8D;\n}\n.ne-ui-color-picker-v2-palette-item[data-contrasiting="light"]:hover {\n  border: 1px solid #FFFFFF;\n}\n');var _t=function(e){d()(n,v.PureComponent);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return g.a.createElement("div",{className:"ne-ui-color-picker-v2-palette"},this.renderColors())}},{key:"renderColors",value:function(){var e=this,t=this.props,n=t.shareState,r=t.theme,o=ft(n.color),a=n.matchOwner("palette");return at[r].map((function(t,n){var r=t.map((function(t){var r=ht(t=ft(t));return g.a.createElement("div",{key:"".concat(t,"-").concat(n),className:"ne-ui-color-picker-v2-palette-item","data-contrasiting":r,style:{background:t},onClick:function(){var n,r;null===(n=(r=e.props).onSelect)||void 0===n||n.call(r,"palette",t)}},a&&o===t?g.a.createElement(mt,{className:"ne-ui-color-picker-v2-palette-item-checked",mode:r}):null)}));return g.a.createElement("div",{key:n,className:"ne-ui-color-picker-v2-palette-row"},r)}))}}]),n}();var St=function(e){d()(n,v.PureComponent||v.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),a()(L()(e),"handleChange",H()((function(t){var n=e.props,r=n.hsl;(0,n.onChange)(z.calculateChange(t,r,e.container),t)}),50)),a()(L()(e),"handleMouseDown",(function(t){e.handleChange(t),window.addEventListener("mousemove",e.handleChange),window.addEventListener("mouseup",e.handleMouseUp)})),a()(L()(e),"handleMouseUp",(function(t){e.handleChange(t),e.unbindEventListeners()})),e}return s()(n,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners(),this.handleChange.cancel()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,o=t.black,a=t.pointer,i=t.circle,l=F()({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl(".concat(this.props.hsl.h,",100%, 50%)"),borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:"".concat(-100*this.props.hsv.v+100,"%"),left:"".concat(100*this.props.hsv.s,"%"),cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:o,pointer:a,circle:i}},{custom:!!this.props.style});return g.a.createElement("div",{style:l.color,ref:function(t){e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},g.a.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),g.a.createElement("div",{style:l.white,className:"saturation-white"},g.a.createElement("div",{style:l.black,className:"saturation-black"}),g.a.createElement("div",{style:l.pointer},this.props.pointer?g.a.createElement(this.props.pointer,this.props):g.a.createElement("div",{style:l.circle}))))}}]),n}();St.defaultProps={onChange:function(){}};var Rt=function(e){d()(n,v.PureComponent);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),a()(L()(e),"handleChange",(function(t){var n=q.calculateChange(t,e.props.direction,e.props.hsl,e.container);n&&"function"==typeof e.props.onChange&&e.props.onChange(n,t)})),a()(L()(e),"handleMouseDown",(function(t){e.handleChange(t),window.addEventListener("mousemove",e.handleChange),window.addEventListener("mouseup",e.handleMouseUp)})),a()(L()(e),"handleMouseUp",(function(t){e.handleChange(t),e.unbindEventListeners()})),e}return s()(n,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=F()({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 3px",position:"relative",height:"100%",borderRadius:"2px"},pointer:{position:"absolute",left:"".concat(Math.min(this.props.hsl.h/3.6,97.25),"%")},slider:{width:"8px",borderRadius:"50%",border:"2px solid #fff",height:"8px",boxShadow:"0 0 1px 1px rgba(0, 0, 0, .3)",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:"".concat(-100*this.props.hsl.h/360+100,"%")}}},{vertical:"vertical"===n});return g.a.createElement("div",{style:r.hue},g.a.createElement("div",{className:"hue-".concat(n),style:r.container,ref:function(t){e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},g.a.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),g.a.createElement("div",{style:r.pointer},this.props.pointer?g.a.createElement(this.props.pointer,this.props):g.a.createElement("div",{style:r.slider}))))}}]),n}();var jt=function(e){d()(n,v.PureComponent||v.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),a()(L()(e),"handleChange",(function(t){var n=U.calculateChange(t,e.props.hsl,e.props.direction,e.props.a,e.container);n&&"function"==typeof e.props.onChange&&e.props.onChange(n,t)})),a()(L()(e),"handleMouseDown",(function(t){e.handleChange(t),window.addEventListener("mousemove",e.handleChange),window.addEventListener("mouseup",e.handleMouseUp)})),a()(L()(e),"handleMouseUp",(function(t){e.handleChange(t),e.unbindEventListeners()})),a()(L()(e),"unbindEventListeners",(function(){window.removeEventListener("mousemove",e.handleChange),window.removeEventListener("mouseup",e.handleMouseUp)})),e}return s()(n,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=F()({default:{alpha:{absolute:"0px 0px 0px 0px"},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba(".concat(t.r,",").concat(t.g,",").concat(t.b,", 0) 0%,\n           rgba(").concat(t.r,",").concat(t.g,",").concat(t.b,", 1) 100%)"),boxShadow:this.props.shadow,borderRadius:"2px"},container:{position:"relative",height:"100%",margin:"0 3px",borderRadius:"2px"},pointer:{position:"absolute",left:"".concat(100*t.a,"%")},slider:{width:"8px",borderRadius:"50%",border:"2px solid #fff",height:"8px",boxShadow:"0 0 1px 1px rgba(0, 0, 0, .3)",transform:"translateX(-4px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba(".concat(t.r,",").concat(t.g,",").concat(t.b,", 0) 0%, rgba(").concat(t.r,",").concat(t.g,",").concat(t.b,", 1) 100%)")},pointer:{left:0,top:"".concat(100*t.a,"%")}}},{vertical:"vertical"===this.props.direction});return g.a.createElement("div",{style:n.alpha},g.a.createElement("div",{style:n.checkboard},g.a.createElement(B.Checkboard,{renderers:this.props.renderers,borderRadius:"2px"})),g.a.createElement("div",{style:n.gradient}),g.a.createElement("div",{style:n.container,ref:function(t){e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},g.a.createElement("div",{className:"alpha-container",style:n.pointer},this.props.pointer?g.a.createElement(this.props.pointer,this.props):g.a.createElement("div",{style:n.slider}))))}}]),n}();var At=function(e){d()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),a()(L()(r),"onComplete",(function(){r.state.inputValue&&(r.setState({value:r.state.inputValue,inputValue:null}),r.props.onChange(a()({},r.props.label.toLowerCase(),r.state.inputValue)))})),r.state={value:String(e.value).toUpperCase(),inputValue:String(e.value).toUpperCase()},r}return s()(n,[{key:"componentWillReceiveProps",value:function(e){e.value!==this.state.value&&this.setState({value:e.value,inputValue:null})}},{key:"render",value:function(){var e=this;return g.a.createElement("div",{style:{width:this.props.width}},g.a.createElement(G.a,{size:"small",value:null===this.state.inputValue?this.state.value:this.state.inputValue,onChange:function(t){e.setState({inputValue:t.target.value})},onBlur:this.onComplete,onPressEnter:this.onComplete,style:{fontSize:12,textAlign:"center",padding:"2px"},"data-testid":"field-input-".concat(this.props.label.toLowerCase())}),g.a.createElement("div",{className:"lake-input-label"},this.props.label))}}]),n}(g.a.Component);At.propTypes={value:R.a.oneOfType([R.a.string,R.a.number]),width:R.a.number,label:R.a.string,percentage:R.a.bool,onChange:R.a.func};var Tt=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,o=e.hex,a=e.disableAlpha,i=F()({default:{fields:{display:"flex",justifyContent:"space-between"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"100%",padding:"2px 10% 2px",border:"1px solid rgba(0, 0, 0, .09)",borderRadius:"2px",fontSize:"12px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),l=function(e,o){e.hex?N()(e.hex).isValid()&&t({hex:e.hex,source:"hex"},o):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},o):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:r.h,s:r.s,l:r.l,a:e.a,source:"rgb"},o))};return g.a.createElement("div",{style:i.fields,className:"ne-ui-color-picker-v2-rgba-color-rields"},g.a.createElement(At,{width:80,label:"HEX",value:o.toUpperCase(),onChange:l}),g.a.createElement(At,{width:30,label:"R",value:n.r,onChange:l}),g.a.createElement(At,{width:30,label:"G",value:n.g,onChange:l}),g.a.createElement(At,{width:30,label:"B",value:n.b,onChange:l}),g.a.createElement(At,{width:30,label:"A",percentage:!0,value:Math.round(100*n.a),onChange:l}))};Tt.propTypes={disableAlpha:R.a.bool,width:R.a.oneOfType([R.a.string,R.a.number]),rgb:R.a.object,hsv:R.a.object,hsl:R.a.object,hex:R.a.string,onChange:R.a.func,renderers:R.a.object};var Lt=function(e){var t=e.width,n=e.rgb,r=e.hsv,o=e.hsl,a=e.hex,i=e.onChange,l=e.disableAlpha,c=e.renderers,s=F()({default:{picker:{width:t,padding:0,background:"#fff"},Saturation:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)",circle:{width:"10px",height:"10px",border:"1px solid #fff"}},controls:{display:"flex"},sliders:{flex:"1",display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-evenly"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",background:"rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(n.a,")")},Hue:{container:{radius:"2px",hadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},slider:{width:"8px",height:"8px",background:"transparent",border:"1px solid #fff"}},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}}},{disableAlpha:l});return g.a.createElement("div",{className:"ne-ui-color-picker-v2-rgba"},g.a.createElement("div",{className:"ne-ui-color-picker-v2-rgba-saturation"},g.a.createElement(St,{style:s.Saturation,hsl:o,hsv:r,onChange:i})),g.a.createElement("div",{style:s.controls,className:"ne-ui-color-picker-v2-rgba-sliders"},g.a.createElement("div",{style:s.sliders},g.a.createElement("div",{className:"ne-ui-color-picker-v2-rgba-hue-container"},g.a.createElement(Rt,{style:s.Hue,hsl:o,onChange:i})),g.a.createElement("div",{className:"ne-ui-color-picker-v2-rgba-hue-container"},g.a.createElement(jt,{style:s.Alpha,rgb:n,hsl:o,renderers:c,onChange:i}))),g.a.createElement("div",{className:"ne-ui-color-picker-v2-rgba-board-container"},g.a.createElement(B.Checkboard,null),g.a.createElement("div",{style:s.activeColor}))),g.a.createElement(Tt,{rgb:n,hsl:o,hex:a,onChange:i,disableAlpha:l}))};Lt.propTypes={disableAlpha:R.a.bool,width:R.a.oneOfType([R.a.string,R.a.number]),rgb:R.a.object,hsv:R.a.object,hsl:R.a.object,hex:R.a.string,onChange:R.a.func,renderers:R.a.object},Lt.defaultProps={disableAlpha:!1,width:216};var Dt=Object(B.ColorWrap)(Lt);Pe(".ne-ui-color-picker-v2-rgba-saturation {\n  position: relative;\n  width: 230px;\n  height: 79px;\n  overflow: hidden;\n}\n.ne-ui-color-picker-v2-rgba-sliders {\n  height: 32px;\n  align-items: center;\n}\n.ne-ui-color-picker-v2-rgba-hue-container {\n  position: relative;\n  height: 8px;\n}\n.ne-ui-color-picker-v2-rgba-board-container {\n  width: 22px;\n  height: 22px;\n  border-radius: 50%;\n  box-shadow: inset 0 0 0 1px #000000, inset 0 0 4px #000000;\n  position: relative;\n  overflow: hidden;\n  margin-left: 12px;\n}\n.ne-ui-color-picker-v2-rgba-color-rields {\n  height: 50px;\n  text-align: center;\n  font-size: 12px;\n  justify-content: space-between;\n}\n.ne-ui-color-picker-v2-rgba-color-rields .lake-input-label {\n  margin-top: 4px;\n}\n");var Pt=function(e){d()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;l()(this,n),r=t.call(this,e),a()(L()(r),"onChange",(function(e,t){var n,o;r.setState({color:e.rgb,hex:e.hex}),(!t||"mousemove"!==t.type&&"mousedown"!==t.type)&&(null===(n=(o=r.props).onSelect)||void 0===n||n.call(o,"rgba(".concat(e.rgb.r,",").concat(e.rgb.g,",").concat(e.rgb.b,",").concat(e.rgb.a,")")))}));var o=e.color,i=null;if(0!==e.color.indexOf("#")){i={};var c=["r","g","b","a"];e.color.replace(/[0-9]+(\.[0-9]+)*/g,(function(e){i[c.shift()]=parseFloat(e)})),o=null}return r.state={color:i,hex:o},r}return s()(n,[{key:"render",value:function(){return g.a.createElement(Dt,{color:this.state.color||this.state.hex,onChange:this.onChange,disableAlpha:!1})}}]),n}(g.a.Component);function Mt(){return g.a.createElement("svg",{width:"20px",height:"19px",viewBox:"0 0 20 19",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},g.a.createElement("title",null,"编组"),g.a.createElement("defs",null,g.a.createElement("rect",{id:"path-1",x:"0",y:"0",width:"14",height:"14",rx:"2.33333333"}),g.a.createElement("rect",{id:"path-3",x:"0",y:"0",width:"14",height:"14",rx:"2.33333333"})),g.a.createElement("g",{id:"fd",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("g",{id:"色板+取色器",transform:"translate(-765.000000, -358.000000)"},g.a.createElement("g",{id:"编组-5",transform:"translate(566.000000, 340.000000)"},g.a.createElement("g",{id:"编组-27",transform:"translate(163.000000, 0.000000)"},g.a.createElement("g",{id:"编组-14",transform:"translate(12.000000, 12.000000)"},g.a.createElement("g",{id:"编组",transform:"translate(25.000000, 7.000000)"},g.a.createElement("g",{id:"编组-26",transform:"translate(5.000000, 4.000000)"},g.a.createElement("mask",{id:"mask-2",fill:"white"},g.a.createElement("use",{xlinkHref:"#path-1"})),g.a.createElement("use",{id:"蒙版",fill:"#D8D8D8",xlinkHref:"#path-1"}),g.a.createElement("g",{mask:"url(#mask-2)",id:"矩形"},g.a.createElement("rect",{fill:"#FEC7C4",x:"0",y:"0",width:"7",height:"7"}),g.a.createElement("rect",{fill:"#A4A7AA",x:"7",y:"0",width:"7",height:"7"}),g.a.createElement("rect",{fill:"#262626",x:"0",y:"7",width:"7",height:"7"}),g.a.createElement("rect",{fill:"#7F7F7F",x:"7",y:"7",width:"7",height:"7"}))),g.a.createElement("g",{id:"编组-26"},g.a.createElement("mask",{id:"mask-4",fill:"white"},g.a.createElement("use",{xlinkHref:"#path-3"})),g.a.createElement("use",{id:"蒙版",stroke:"#FFFFFF",strokeWidth:"1.50980392",fill:"#D8D8D8",xlinkHref:"#path-3"}),g.a.createElement("g",{mask:"url(#mask-4)",id:"矩形"},g.a.createElement("rect",{fill:"#F5222D",x:"0",y:"0",width:"7",height:"7"}),g.a.createElement("rect",{fill:"#FA8C16",x:"7",y:"0",width:"7",height:"7"}),g.a.createElement("rect",{fill:"#1890FF",x:"0",y:"7",width:"7",height:"7"}),g.a.createElement("rect",{fill:"#52C41A",x:"7",y:"7",width:"7",height:"7"}))))))))))}function Nt(){return g.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},g.a.createElement("title",null,"矩形"),g.a.createElement("defs",null,g.a.createElement("pattern",{id:"pattern-1",width:"100%",height:"100%",patternUnits:"objectBoundingBox"},g.a.createElement("use",{xlinkHref:"#image-2"})),g.a.createElement("image",{id:"image-2",width:"18",height:"18",xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEqADAAQAAAABAAAAEgAAAACaqbJVAAAC2UlEQVQ4EU2Uu27UQBSGf4+99nqv2c2FSNCAKHgCSkTP+/AQvAk1HQ3iERAFNFSACIEQkt313TN8xxuUWPpzZsdzvjk3J3q6fRDyIE3RzEtz7AJ7gFY3Wt9Z2/6CM7qOFDZoJxQpKSM2eRyKWY+wGbZFHTIfjBI0vLPfleRL3hV7SCgAAROXDI9jbQ4GqlHHOmDtkgRihsbIIgjbOzJQEUXqo6BgNDwcNsV5ghrU77eVYq0EYYssJUvNZFADuWKpJi3VJbV6DtpjUZlTdQOKWVskE6j+r5O/xBm7BwHmYBIXK4U2l08LXY036iwknhTHJUurk4HnrMNFJP8L/QbyF5ilRzSh5ky8Wyskjdyokq9nKvNr/cg2A2wGrCQKi25OcbtvRPMdXQCy9AxC4a0GSbw9Uogpa9zKk17YFeqBfV2ccU2th7yy9nefYvXInwOy2li76UhoAXHZABLFVuTpEB5Ag0HTx/o5P9fb0496+T5W/SYlLboB4L8zXVLA1dqeJNtjkoceOORjeKhP5Zpc8eZERx+eaff6lXz/Do8/eBCiDRSFixwUmw2rY7w5wpldnKMuGwCuXCq5PtXh2T29+HyJw/PhfPBfFPoL8mScVTGsDdamrbdiA+qAtGMgU7lyIavb6irXk/NSxzs7uObWRwBZhil/roDYQA2V5ndroPUtpJrJxmG5c7p/1ehk1ypvvaqR07g5xHkn5hfLxWEMvGBtsNpAK0ATuXofzbLyQxTrstO87jViSlu+nXFkkSyhNDcwm64RQJt5QK48IKWJ4noyOK4ALKs9xKKJaUtvH6HG1HRGX4ggdHuYNSjaAxNXzTVqMk2bXouqB+Y1QxMgWRfkAHnLx762iHTChLUNj7+FKVaS1ilO/eA8bQAAzLseiNfIGwgX4wwfCrUhshDRLaK6hTHZdvMAAGbAHIBFklKbGJDNqo2ZJz3nGaAoYy9jj6iC/W/gDO//AfZelP8xwUnAAAAAAElFTkSuQmCC"})),g.a.createElement("g",{id:"fd",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("g",{id:"色板+取色器",transform:"translate(-1132.000000, -359.000000)",fill:"url(#pattern-1)"},g.a.createElement("g",{id:"编组-27",transform:"translate(1030.000000, 340.000000)"},g.a.createElement("g",{id:"编组-14",transform:"translate(13.000000, 12.000000)"},g.a.createElement("rect",{id:"矩形",x:"89",y:"7",width:"18",height:"18",rx:"4"}))))))}a()(Pt,"propTypes",{container:R.a.object,color:R.a.string,position:R.a.object,onSelect:R.a.func}),Pe(".ne-ui-color-picker-v2-label,\n.ne-ui-color-picker-v2-swatch-title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  line-height: 22px;\n  color: var(--yq-text-primary);\n  margin-bottom: 10px;\n}\n.ne-ui-color-picker-v2-switch-tabs {\n  overflow: visible;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav {\n  margin-bottom: 12px;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav::before {\n  display: none;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-ink-bar {\n  display: none;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-nav-list {\n  padding: 4px;\n  border-radius: 8px;\n  background: var(--yq-yuque-grey-3);\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab {\n  padding: 0;\n  margin: 0;\n  min-width: 60px;\n  height: 24px;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: normal;\n  opacity: 0.6;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab.ant-tabs-tab-active {\n  opacity: 1;\n  font-weight: normal;\n  background: var(--yq-white);\n  border-radius: 6px;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab-btn {\n  line-height: 0;\n}\n.ne-ui-color-picker-v2-more {\n  width: 22px;\n  height: 22px;\n  color: var(--yq-black);\n  cursor: pointer;\n}\n.ne-ui-color-picker-v2-more-overlay .ant-popover-inner-content {\n  padding: 12px;\n}\n");var It=function(e){d()(n,v.PureComponent);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this;return g.a.createElement(J.a,{placement:"bottomLeft",trigger:"click",content:this.renderMoreContent(),overlayClassName:P()("ne-ui-color-picker-v2-more-overlay",this.props.overlayClassName),getPopupContainer:function(t){var n,r;return(null===(n=(r=e.props).getPopupContainer)||void 0===n?void 0:n.call(r,t))||e.props.container||document.body},onVisibleChange:function(t){var n,r;t||null===(n=(r=e.props).onClose)||void 0===n||n.call(r)}},g.a.createElement("div",{className:"ne-ui-color-picker-v2-more"},this.renderMoreIcon()))}},{key:"renderMoreContent",value:function(){var e=this;return g.a.createElement(K.a,{className:"ne-ui-color-picker-v2-switch-tabs"},g.a.createElement(K.a.TabPane,{tab:g.a.createElement(Mt,null),key:"palette"},g.a.createElement(_t,{forceRefreshCount:this.props.forceRefreshCount,onSelect:this.props.onSelect,shareState:this.props.shareState,theme:this.props.theme})),g.a.createElement(K.a.TabPane,{tab:g.a.createElement(Nt,null),key:"rgba"},g.a.createElement(Pt,{forceRefreshCount:this.props.forceRefreshCount,color:this.props.shareState.color,onSelect:function(t){var n,r;null===(n=(r=e.props).onSelect)||void 0===n||n.call(r,"rgba",ft(t))}})))}},{key:"renderMoreIcon",value:function(){return g.a.createElement("svg",{width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},g.a.createElement("title",null,"编组 3"),g.a.createElement("defs",null,g.a.createElement("pattern",{id:"pattern-1",width:"100%",height:"100%",patternUnits:"objectBoundingBox"},g.a.createElement("use",{xlinkHref:"#image-2"})),g.a.createElement("image",{id:"image-2",width:"22",height:"22",xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFqADAAQAAAABAAAAFgAAAAAcITNaAAAD1UlEQVQ4EV2US5IcNRRFn5Tf+tNtYxwBEwgGrIAh4bn3wyLYCWNmTAiW4GAAE0ZAYBoauz9VlZWZkjhXmdVtnNGvpcqUjq7ue5L78v6T1CYzxYJYEitFNNvQbmi3tFu17/TP39Z8cweztHeWDsRRYVaenD08nl5BlAyueT/QjrSRlj/T0IJOSVvR1oQb+NYBU8xQ9Uv6eRJj80TBS97VtA3tyORAn+bx+wzVmAk2qZRS/bYzmB0+wLNqvlW8E3gQnDiDs1p9I1zHbgR7zwrjfTnE0oIfTXCFHg9IAIFl1Ug/0ebdsEJDKCfZ13vUnmP22E7M993GUnmyQ3204JIl0SF4Wvm8JHpCdgis7SvJ6Z64A3o7xzl52DCDtxmcxtp64COLBCbqkWpBNFZgJU5Kl/yIb73FN0BpM3zPQgxUWM/c4gi4GCb4sLBYH+ymvbNRknmU+R1d+ayFVH7p2ln8m/gH6FtgskI2YIG8S1RK6Y8fsMcReA+8N191Fk9rOy5u7c/mTmxTrR5RKfUbkjX+jto/iGvAskNQEibPBFVSyuIA2AVLnih4g/qIHWl/sAD8t+1rRp3sUz5dSvnPhQUiXgGWvyqvWWX2S54F6lhgUgb8HJEKgMAisijWn9tfmyv7/vlP9vWPhZ2+q7GBNOowSN0MSkzPZaWWKP3hgo6j+FlZNZWYFAtzilCb7xdW3D2zp6++sv2331gMPzDzX2ayBRU7xjsPSSXD9HOgGHD0E4iaNmBubDLQH3dW3j63J68/spe/vAHwIs9P8VdL4RpfKAVOQ1IZ5GpH/rzI5DFAFyqAQIcW6Mo81VLcP7WLm4V9cXW0D/cotEsUfcYCdNOKfzdAVdA5c/zGm8g4gqrY5S3/D9qtTTvZ7b19fNPbs/1giyFaV3lr+yfA9ubkGsfFpZbFDvQFp97mspjAKPUodcPS/GlSu+tiVnl5HG1zClZxagbOeuukdAegn+GqbnabdCapJidbeqqi2wJsiAUWLK04LTPoAuCum6BSW5D2oEvEEGBrAChM4wRXwt15AZ2SSnfFOvsqcNU3tuqDbbsAPNqaWAJtuDs94Kj967ZwbD8t6ave4iNct7kWSCVXL6dMNlRDASRk2KoHyAKLMQCNVnHTK9lR3Hyw8RbleduofoRrgNR7FLP9mkt3ASADgWsB/ZbSGm8LwDo/KvOIHT5SwA77UsM7VCedEsbwPWkQ8LIB2gKRj62CfgswQ+kraRNY59NxWgFn1TodSpiu/En1u/DyAZqBE7SmX4fJghK1ui6lQ2ICO62CEqWQJdyMDnC+yLkKZuX/AbGnTbHOz/X+AAAAAElFTkSuQmCC"})),g.a.createElement("g",{id:"fd",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("g",{id:"色板+取色器",transform:"translate(-734.000000, -262.000000)"},g.a.createElement("g",{id:"编组-3",transform:"translate(734.000000, 262.000000)"},g.a.createElement("g",{id:"编组-4",fill:"url(#pattern-1)"},g.a.createElement("path",{d:"M11,0 C17.0751322,0 22,4.92486775 22,11 C22,17.0751322 17.0751322,22 11,22 C4.92486775,22 0,17.0751322 0,11 C0,4.92486775 4.92486775,0 11,0 Z M11,3 C6.581722,3 3,6.581722 3,11 C3,15.418278 6.581722,19 11,19 C15.418278,19 19,15.418278 19,11 C19,6.581722 15.418278,3 11,3 Z",id:"形状结合"})),g.a.createElement("g",{id:"1.line/2.功能类/更多-无框",transform:"translate(5.000000, 5.000000)",fill:"currentColor",fillRule:"nonzero"},g.a.createElement("g",{id:"more",transform:"translate(0.000000, 0.000000)"},g.a.createElement("rect",{id:"矩形",opacity:"0",x:"0",y:"0",width:"12",height:"12"}),g.a.createElement("path",{d:"M10.641,6 C10.641,5.48223305 10.221267,5.0625 9.7035,5.0625 C9.18573305,5.0625 8.766,5.48223305 8.766,6 C8.766,6.51776695 9.18573305,6.9375 9.7035,6.9375 C10.221267,6.9375 10.641,6.51776695 10.641,6 Z M6.9375,6 C6.9375,5.48223305 6.51776695,5.0625 6,5.0625 C5.48223305,5.0625 5.0625,5.48223305 5.0625,6 C5.0625,6.51776695 5.48223305,6.9375 6,6.9375 C6.51776695,6.9375 6.9375,6.51776695 6.9375,6 Z M3.23475,6 C3.23475,5.48223305 2.81501695,5.0625 2.29725,5.0625 C1.77948305,5.0625 1.35975,5.48223305 1.35975,6 C1.35975,6.51776695 1.77948305,6.9375 2.29725,6.9375 C2.81501695,6.9375 3.23475,6.51776695 3.23475,6 Z",id:"形状"})))))))}}]),n}();Pe(".ne-ui-color-picker-v2-label,\n.ne-ui-color-picker-v2-swatch-title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  line-height: 22px;\n  color: var(--yq-text-primary);\n  margin-bottom: 10px;\n}\n.ne-ui-color-picker-v2-switch-tabs {\n  overflow: visible;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav {\n  margin-bottom: 12px;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav::before {\n  display: none;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-ink-bar {\n  display: none;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-nav-list {\n  padding: 4px;\n  border-radius: 8px;\n  background: var(--yq-yuque-grey-3);\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab {\n  padding: 0;\n  margin: 0;\n  min-width: 60px;\n  height: 24px;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: normal;\n  opacity: 0.6;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab.ant-tabs-tab-active {\n  opacity: 1;\n  font-weight: normal;\n  background: var(--yq-white);\n  border-radius: 6px;\n}\n.ne-ui-color-picker-v2-switch-tabs .ant-tabs-nav .ant-tabs-tab-btn {\n  line-height: 0;\n}\n.ne-ui-color-picker-v2-custom-content {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n}\n");var Ft=function(e){d()(n,v.PureComponent);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),a()(L()(e),"lastColor",null),a()(L()(e),"onCloseHandler",(function(){var t,n,r=e.lastColor;r&&(e.lastColor=null,Ot(r,e.props.namespace||"global"),null===(t=(n=e.props).onSelect)||void 0===t||t.call(n,"custom",r,{type:"custom"}))})),a()(L()(e),"onMoreColorSelectHandler",(function(t,n){var r,o;e.lastColor=n,null===(r=(o=e.props).onSelect)||void 0===r||r.call(o,t,n,{type:"custom"})})),e}return s()(n,[{key:"render",value:function(){return g.a.createElement("div",{className:P()("ne-ui-color-picker-v2-custom",this.props.className)},g.a.createElement("div",{className:"ne-ui-color-picker-v2-label"},bt[this.props.lang].customLabel),g.a.createElement(gt,{columnCount:this.props.columnCount,items:[g.a.createElement(It,{key:"more",overlayClassName:this.props.overlayClassName,forceRefreshCount:this.props.forceRefreshCount,onSelect:this.onMoreColorSelectHandler,onClose:this.onCloseHandler,shareState:this.props.shareState,theme:this.props.theme})].concat(Q()(this.renderColors()))}))}},{key:"renderColors",value:function(){var e=this,t=this.props.shareState,n=t.color,r=t.matchOwner("custom");return Ct(this.props.namespace||"global").slice(0,11).map((function(o){var a=r&&ft(n)===ft(o);return a&&t.setOwner("custom"),g.a.createElement(vt,{key:o,color:o,active:!1,selected:a,onSelect:function(t){var n,r;null===(n=(r=e.props).onSelect)||void 0===n||n.call(r,"custom",t,{type:"custom"})}})}))}}]),n}();Pe(".ne-ui-color-picker-v2 {\n  padding: 16px;\n  width: fit-content;\n}\n.ne-ui-color-picker-v2-box {\n  margin-top: 20px;\n}\n.ne-ui-color-picker-v2-box:first-child {\n  margin-top: 0;\n}\n");var Bt=function(e){d()(n,v.PureComponent);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),a()(L()(r),"_internalState",void 0),a()(L()(r),"state",{forceRefreshCount:1}),a()(L()(r),"onColorSelect",(function(e,t,n){var o,a,i,l;r._internalState.setState(e,t),r.setState({forceRefreshCount:r.state.forceRefreshCount+1}),"transparent"===t||t===r.props.defaultColor?null===(o=(a=r.props).onClear)||void 0===o||o.call(a):null===(i=(l=r.props).onSelect)||void 0===i||i.call(l,t,n)})),r._internalState=new pt(e.currentColor),r}return s()(n,[{key:"render",value:function(){var e=P()(this.props.className,"ne-ui-color-picker-v2"),t=this.props,r=t.customDisabled,o=t.columnCount,a=this.props.lang||n.defaultProps.lang;return g.a.createElement("div",{className:e},g.a.createElement(xt,{lang:a,swatches:this.props.swatches,forceRefreshCount:this.state.forceRefreshCount,onSelect:this.onColorSelect,shareState:this._internalState,columnCount:o,className:"ne-ui-color-picker-v2-box"}),r?null:g.a.createElement(Ft,{lang:a,columnCount:o,forceRefreshCount:this.state.forceRefreshCount,className:"ne-ui-color-picker-v2-box",shareState:this._internalState,onSelect:this.onColorSelect,theme:this.props.theme,overlayClassName:this.props.overlayClassName}))}}]),n}();a()(Bt,"defaultProps",{lang:"zhCN",theme:"light"}),Pe(".ne-ui-multiple-color-picker-v2 {\n  padding: 16px;\n  width: fit-content;\n}\n.ne-ui-multiple-color-picker-v2-pane {\n  margin-top: 20px;\n}\n.ne-ui-multiple-color-picker-v2-pane:first-child {\n  margin-top: 0;\n}\n.ne-ui-multiple-color-picker-v2-pane-title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  line-height: 22px;\n  color: var(--yq-text-primary);\n  margin-bottom: 10px;\n}\n");var Vt=function(e){d()(n,v.PureComponent);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),a()(L()(e),"onColorSelect",(function(t,n){var r,o,a,i,l=(e.props.defaultColors||[])[t];"transparent"===n||l&&n===ft(l)?null===(r=(o=e.props).onClear)||void 0===r||r.call(o,t):null===(a=(i=e.props).onSelect)||void 0===a||a.call(i,n,t)})),e}return s()(n,[{key:"render",value:function(){var e=P()(this.props.className,"ne-ui-multiple-color-picker-v2");return g.a.createElement("div",{className:e},this.renderSwatch())}},{key:"renderSwatch",value:function(){var e=this,t=this.props,n=t.swatches,r=t.columnCount;return n.map((function(t,n){var o,a=null===(o=e.props.currentColors)||void 0===o?void 0:o[n],i=t.palettes.map((function(t,r){var o=t===a;return g.a.createElement(vt,{key:"".concat(t,"-").concat(r),color:t,active:!1,selected:o,onSelect:function(t){e.onColorSelect(n,t)}})}));return g.a.createElement("div",{className:"ne-ui-multiple-color-picker-v2-pane",key:n},t.title?g.a.createElement("div",{className:"ne-ui-multiple-color-picker-v2-pane-title"},t.title):null,g.a.createElement(gt,{items:i,columnCount:r}))}))}}]),n}();function Ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;("number"!=typeof e||e<5)&&(e=5);for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function zt(e){var t=e.locale,n=!e.defaultValue;return g.a.createElement("div",{className:"lake-form-item-ui-container ".concat(n?"lake-form-item-ui-show-tooltip":"")},g.a.createElement(G.a,ie()({autoFocus:!0,placeholder:t.placehoders.question},e)),n&&g.a.createElement(_.a,{title:t.tooltip},g.a.createElement("span",{className:"lake-form-item-input-tooltip lake-icon lake-icon-question"})))}function qt(e){var t=e.field,n=e.active,r=e.index,o=e.onChange,a=e.locale;if(n)return g.a.createElement("div",null,g.a.createElement(zt,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)},locale:a}),g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(G.a,{disabled:!0,size:"large"}))));var i=t.validations&&t.validations[0]&&t.validations[0].required;return g.a.createElement("div",{className:"lake-form-preview"},g.a.createElement("div",{className:i?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),g.a.createElement("div",{style:{marginTop:12}},g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(G.a,{value:"",style:{width:440},onClick:function(e){e.stopPropagation()},placeholder:a.placehoders.input,onMouseDown:function(e){e.preventDefault()},size:"large"})))))}function Ut(e){var t=e.field,n=e.active,r=e.index,o=e.onChange,a=e.locale;if(n)return g.a.createElement("div",null,g.a.createElement(zt,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)},locale:a}),g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(G.a.TextArea,{size:"large",style:{minHeight:120},disabled:!0}))));var i=t.validations&&t.validations[0]&&t.validations[0].required;return g.a.createElement("div",{className:"lake-form-preview"},g.a.createElement("div",{className:i?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),g.a.createElement("div",{style:{marginTop:12}},g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(G.a.TextArea,{value:"",size:"large",style:{minHeight:120},onClick:function(e){e.stopPropagation(),e.preventDefault()},onMouseDown:function(e){e.preventDefault()},placeholder:a.placehoders.input})))))}function Gt(e){var t=e.field,n=e.active,r=e.index,o=e.onChange,a=e.locale;if(n)return g.a.createElement("div",null,g.a.createElement(zt,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)},locale:a}),g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(G.a,{prefix:g.a.createElement("span",{className:"lake-icon lake-icon-col-number"}),disabled:!0,size:"large",style:{width:328}}))));var i=t.validations&&t.validations[0]&&t.validations[0].required;return g.a.createElement("div",{className:"lake-form-preview"},g.a.createElement("div",{className:i?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),g.a.createElement("div",{style:{marginTop:12}},g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(G.a,{value:"",style:{width:328},size:"large",onClick:function(e){e.stopPropagation()},onFocus:function(e){e.target.blur()},prefix:g.a.createElement("span",{className:"lake-icon lake-icon-col-number"})})))))}function Wt(e){var t=e.field,n=e.active,r=e.index,o=e.onChange,a=e.locale;if(n)return g.a.createElement("div",null,g.a.createElement(zt,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)},locale:a}),g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(le.a,{style:{width:216},disabled:!0,placeholder:a.placehoders.date,size:"large"}))));var i=t.validations&&t.validations[0]&&t.validations[0].required;return g.a.createElement("div",{className:"lake-form-preview"},g.a.createElement("div",{className:i?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),g.a.createElement("div",{style:{marginTop:12}},g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(le.a,{value:"",placeholder:a.placehoders.date,dropdownClassName:"lake-form-item-dropdown",style:{width:216},size:"large",onClick:function(e){e.stopPropagation(),e.preventDefault()}})))))}a()(Vt,"defaultProps",{lang:"zhCN"}),qt.propTypes={field:R.a.object,locale:R.a.object,active:R.a.bool,index:R.a.number,onChange:R.a.func},Ut.propTypes={field:R.a.object,locale:R.a.object,active:R.a.bool,index:R.a.number,onChange:R.a.func},Gt.propTypes={field:R.a.object,locale:R.a.object,active:R.a.bool,index:R.a.number,onChange:R.a.func},Wt.propTypes={field:R.a.object,locale:R.a.object,active:R.a.bool,index:R.a.number,onChange:R.a.func};var Yt=["#E4F7D2","#F7E9BC","#C4E4F5","#E8E8E8","#FBD3D0","#E8D5CB","#C0EBE5","#DBCEF5","#E5EDCA","#C2CDF0"],$t=["#E48484","#DFB85D","#B1C774","#77C386","#6EC4C4","#69B1E4","#6F81DB","#A287E1","#75636A","#849CAA"],Kt=function(e){d()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),a()(L()(r),"inputs",[]),a()(L()(r),"getOptions",(function(){var e=r.props.field,t=r.state.options;return t||(t=[{value:"",id:Ht(6)},{value:"",id:Ht(6)},{value:"",id:Ht(6)}],r.props.column&&r.props.column.color&&(t[0].color=Yt[0],t[1].color=Yt[1],t[2].color=Yt[2]),e&&e.options&&0!==e.options.length&&(t=e.options)),{options:t}})),a()(L()(r),"onAddItem",(function(e){var t=r.state.options,n={value:"",id:Ht(6)};if(r.props.column&&r.props.column.color){var o="";t.length>0&&(o=t[t.length-1].color),n.color=r.getOptionColor(o)}t.push(n),r.setState({options:t.slice()},(function(){r.optionList&&r.optionList.current&&(r.optionList.current.scrollTop=1e4),e&&r.inputs.length>1&&(r.setState({focus:r.inputs.length-1}),r.inputs[r.inputs.length-1].focus()),r.onChange()}))})),a()(L()(r),"onChangeItem",(function(e,t){var n=e.target.value,o=r.state.options;o[t].value=n,r.setState({options:o})})),a()(L()(r),"onDeleteItem",(function(e,t){var n=r.state.options;n.splice(t,1),r.inputs.splice(t,1),r.setState({options:n.slice()},(function(){r.onChange()}))})),a()(L()(r),"onPressEnter",(function(e){e>=r.state.options.length-1?r.onAddItem(!0):(r.inputs[e+1].input.focus(),r.setState({focus:e+1}))})),r.state={},r}return s()(n,[{key:"componentDidMount",value:function(){this.optionList=g.a.createRef();var e=this.getOptions().options;this.setState({options:e,focus:0})}},{key:"getOptionColor",value:function(e){var t=Yt.indexOf(e);return t>=0?Yt[(t+1)%Yt.length]:(t=$t.indexOf(e))>=0?$t[(t+1)%$t.length]:Yt[0]}},{key:"onChange",value:function(){var e={},t=[];this.state.options.forEach((function(n){""!==n.value&&(""===n.value||e[n.value]||(t.push(Object.assign({},n)),e[n.value]=!0))})),this.props.onChange&&this.props.onChange(t)}},{key:"render",value:function(){var e=this,t=this.state.options,n=this.props.field,r=n.display;if(!t)return null;var o=null;"dropdown"!==r&&(o="select"===n.type?g.a.createElement(ce.a,{style:{marginRight:16},disabled:!0}):g.a.createElement(re.a,{style:{marginRight:16},disabled:!0}));var a=t.map((function(t,n){return g.a.createElement("div",{className:"lake-form-item-select-option",key:t.value+n,"data-index":n,"data-color":t.color,"data-id":t.id},o,g.a.createElement(G.a,{defaultValue:t.value,onBlur:function(t){e.onChangeItem(t,n)},onPressEnter:function(){e.onPressEnter(n)},ref:function(t){e.inputs[n]=t},placeholder:e.props.locale.inputOption,onMouseDown:function(e){e.target.focus()}}),g.a.createElement("span",{className:"lake-icon lake-icon-delete",onClick:function(t){e.onDeleteItem(t,n)}}))}));return g.a.createElement("div",{className:"lake-form-item-select ".concat(r),onClick:function(e){e.stopPropagation()}},"dropdown"===r?this.props.title:null,g.a.createElement("div",{className:"lake-form-item-select-option-list",ref:this.optionList},a),g.a.createElement("div",{className:"lake-form-item-select-option-add",onClick:this.onAddItem},g.a.createElement("span",{className:"lake-icon lake-icon-plus"}),this.props.locale.addOption))}}]),n}(g.a.Component);function Xt(e){var t=e.field,n=e.active,r=e.index,o=e.onChange,a=e.locale,i=e.column,l=e.validate,c=Object(v.useState)(!1),s=Y()(c,2),u=s[0],d=s[1],f=!1;if(!l&&t.options&&0===t.options.length&&(f=!0),n)return g.a.createElement("div",null,g.a.createElement(zt,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)},locale:a}),"dropdown"===t.display?g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(oe.a,{disabled:!0,size:"large",style:{width:328},dropdownClassName:"lake-form-item-dropdown"}))):null,g.a.createElement(Kt,{title:g.a.createElement("span",{className:"lake-form-item-option-title"},a.optionSetting),locale:a,field:t,column:i,onChange:function(e){o("options",e.concat())}}),g.a.createElement("div",{className:"lake-form-item-option-layout"},g.a.createElement("span",{style:{color:"#8c8c8c"}},a.layout,":"),g.a.createElement(oe.a,{defaultValue:t.display||"list",bordered:!1,onChange:function(e){o("display",e)},dropdownClassName:"lake-form-item-dropdown"},g.a.createElement(oe.a.Option,{value:"list"},a.list),g.a.createElement(oe.a.Option,{value:"dropdown"},a.dropdown))),f?g.a.createElement("div",{className:"lake-form-item-error"},"请配置选项"):null);var p,h=i.options;t.options&&0!==t.options.length||(h=[{value:""}]),p="dropdown"===t.display?g.a.createElement(_.a,{placement:"bottom",visible:u,onVisibleChange:function(e){d(e)},title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(oe.a,{dropdownClassName:"lake-form-item-dropdown",value:null,size:"large",placeholder:a.chooseOption,className:"lake-form-preview-select",onClick:function(){d(!1)}},h.map((function(e,t){return g.a.createElement(oe.a.Option,{value:e.value,key:t},e.value)}))))):"select"===t.type?g.a.createElement(ce.a.Group,{value:null,size:"large"},h.map((function(e,t){return g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning,key:t},g.a.createElement(ce.a,{className:"lake-form-item-radio",value:e.value},g.a.createElement("div",{className:"lake-form-item-radio-text"},e.value)))}))):g.a.createElement(re.a.Group,{value:null,size:"large"},h.map((function(e,t){return g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning,key:t},g.a.createElement(re.a,{className:"lake-form-item-radio",value:e.value},g.a.createElement("div",{className:"lake-form-item-radio-text"},e.value)))})));var m=t.validations&&t.validations[0]&&t.validations[0].required;return g.a.createElement("div",{className:"lake-form-preview"},g.a.createElement("div",{className:m?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),g.a.createElement("span",{className:"lake-form-ignore-click"},p),f?g.a.createElement("div",{className:"lake-form-item-error"},"请配置选项"):null)}function Zt(e){var t=e.field,n=e.active,r=e.index,o=e.onChange,a=e.locale,i=e.prefix,l=e.width,c=void 0===l?440:l;if(n)return g.a.createElement("div",null,g.a.createElement(zt,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)},locale:a}),g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(G.a,{prefix:i,disabled:!0,size:"large",style:{width:c}}))));var s=t.validations&&t.validations[0]&&t.validations[0].required;return g.a.createElement("div",{className:"lake-form-preview"},g.a.createElement("div",{className:s?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),g.a.createElement("div",{style:{marginTop:12}},g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(G.a,{value:"",style:{width:c},size:"large",onClick:function(e){e.stopPropagation()},onFocus:function(e){e.target.blur()},prefix:i})))))}function Qt(e){return g.a.createElement(Zt,ie()({},e,{width:328,prefix:g.a.createElement("span",{className:"lake-icon lake-icon-col-email"})}))}a()(Kt,"propTypes",{title:R.a.object,onChange:R.a.func,field:R.a.object,column:R.a.object,locale:R.a.object}),Xt.propTypes={field:R.a.object,column:R.a.object,locale:R.a.object,active:R.a.bool,index:R.a.number,onChange:R.a.func},Zt.propTypes={field:R.a.object,locale:R.a.object,active:R.a.bool,index:R.a.number,prefix:R.a.node,onChange:R.a.func},Qt.propTypes={field:R.a.object,locale:R.a.object,active:R.a.bool,index:R.a.number,onChange:R.a.func};var Jt=function(e){return v.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-arrow-right",e.className].filter(Boolean).join(" ")}),v.createElement("path",{d:"M101.005 198.563c-3.834-3.834-3.904-10.008-.21-13.927l.21-.215 48.99-48.99c3.834-3.834 3.904-10.008.21-13.927l-.21-.215-48.99-48.99c-3.905-3.905-3.905-10.237 0-14.142 3.834-3.834 10.008-3.904 13.927-.21l.215.21 48.99 48.99c11.599 11.598 11.715 30.331.348 42.072l-.348.354-48.99 48.99c-3.905 3.905-10.237 3.905-14.142 0Z",fill:"currentColor",fillRule:"nonzero"}))},en=function(e){return v.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-add",e.className].filter(Boolean).join(" ")}),v.createElement("path",{d:"M128 28c5.523 0 10 4.477 10 10v80h80c5.523 0 10 4.477 10 10s-4.477 10-10 10h-80v80c0 5.523-4.477 10-10 10s-10-4.477-10-10v-80H38c-5.523 0-10-4.477-10-10s4.477-10 10-10h80V38c0-5.523 4.477-10 10-10Z",fill:"currentColor",fillRule:"evenodd"}))};function tn(e){var t=e.field,n=e.active,r=e.index,o=e.onChange,a=e.locale,i=e.text;if(n)return g.a.createElement("div",null,g.a.createElement(zt,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)},locale:a}),g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(ee.a,{icon:g.a.createElement(en,null),disabled:!0,size:"large"},i))));var l=t.validations&&t.validations[0]&&t.validations[0].required;return g.a.createElement("div",{className:"lake-form-preview"},g.a.createElement("div",{className:l?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),g.a.createElement("div",{style:{marginTop:12}},g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(ee.a,{value:"",size:"large",icon:g.a.createElement(en,null)},i)))))}function nn(e){return g.a.createElement(tn,ie()({},e,{text:e.locale.uploadFile}))}function rn(e){return g.a.createElement(tn,ie()({},e,{text:e.locale.uploadImage}))}function on(e){return g.a.createElement(Zt,ie()({},e,{width:328,prefix:g.a.createElement("span",{className:"lake-icon lake-icon-col-link"})}))}function an(e){var t=e.field,n=e.active,r=e.index,o=e.onChange,a=e.locale;if(n)return g.a.createElement("div",{className:"lake-form-mention"},g.a.createElement(zt,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)},locale:a}),g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(oe.a,{disable:!0,size:"large",style:{width:328},dropdownClassName:"lake-form-item-dropdown"}))));var i=t.validations&&t.validations[0]&&t.validations[0].required;return g.a.createElement("div",{className:"lake-form-preview lake-form-mention"},g.a.createElement("div",{className:i?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),g.a.createElement("div",{style:{marginTop:12}},g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(oe.a,{size:"large",style:{width:328},dropdownClassName:"lake-form-item-dropdown"})))))}function ln(e){return g.a.createElement(Zt,ie()({},e,{width:328,prefix:g.a.createElement("span",{className:"lake-icon lake-icon-col-phone"})}))}function cn(e){var t=e.field,n=e.active,r=e.index,o=e.onChange,a=e.locale,i=[{value:!0,name:a.yes},{value:!1,name:a.no}];if(n)return g.a.createElement("div",{className:"lake-form-checkbox"},g.a.createElement(zt,{defaultValue:t.title,onChange:function(e){o("title",e.target.value,!0)},onBlur:function(e){o("title",e.target.value)},locale:a}),g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(ce.a.Group,{onChange:o},i.map((function(e,t){return g.a.createElement(ce.a,{value:e.value,key:t},g.a.createElement("span",{className:"lake-form-designer-checkbox-value"},e.name))}))))));var l=t.validations&&t.validations[0]&&t.validations[0].required;return g.a.createElement("div",{className:"lake-form-preview lake-form-checkbox"},g.a.createElement("div",{className:l?"lake-form-preview-required":""},"".concat(r+1,". ").concat(t.title)),g.a.createElement("div",{style:{marginTop:12}},g.a.createElement(_.a,{placement:"bottom",title:a.disableWarning},g.a.createElement("span",null,g.a.createElement(ce.a.Group,{onChange:o},i.map((function(e,t){return g.a.createElement(ce.a,{value:e.value,key:t},g.a.createElement("span",{className:"lake-form-designer-checkbox-value"},e.name))})))))))}tn.propTypes={field:R.a.object,locale:R.a.object,active:R.a.bool,index:R.a.number,prefix:R.a.node,onChange:R.a.func},nn.propTypes={field:R.a.object,locale:R.a.object,active:R.a.bool,index:R.a.number,onChange:R.a.func},rn.propTypes={field:R.a.object,locale:R.a.object,active:R.a.bool,index:R.a.number,onChange:R.a.func},on.propTypes={field:R.a.object,locale:R.a.object,active:R.a.bool,index:R.a.number,onChange:R.a.func},an.propTypes={field:R.a.object,locale:R.a.object,active:R.a.bool,index:R.a.number,onChange:R.a.func},ln.propTypes={field:R.a.object,locale:R.a.object,active:R.a.bool,index:R.a.number,onChange:R.a.func},cn.propTypes={field:R.a.object,locale:R.a.object,active:R.a.bool,index:R.a.number,onChange:R.a.func};var sn=[{type:"input",component:qt},{type:"textarea",component:Ut},{type:"number",component:Gt},{type:"select",component:Xt},{type:"multiSelect",component:Xt},{type:"date",component:Wt},{type:"mention",component:an},{type:"image",component:rn},{type:"file",component:nn},{type:"checkbox",component:cn},{type:"link",component:on},{type:"email",component:Qt},{type:"phone",component:ln}],un=sn.filter((function(e){return["input","textarea","number","phone","date","link","email"].includes(e.type)})),dn={input:"单行文本",textarea:"多行文本",select:"单选",multiSelect:"多选",date:"日期",number:"数字",mention:"人员",image:"图片",file:"文件",checkbox:"复选框",link:"链接",email:"邮箱",phone:"手机号码",required:"必填",add:"添加",optionSetting:"选项设置",addOption:"添加选项",layout:"布局方式",list:"列表",dropdown:"下拉",placehoders:{input:"请输入文本",date:"请选择",question:"请输入问题"},moveUp:"向上移动",moveDown:"向下移动",clone:"复制表单项",remove:"移除表单项",disableWarning:"此处由填写者输入",clickToRename:"点击重命名",emptyTitleError:"请输入问题",inputOption:"请输入选项",chooseOption:"请选择",tooltip:"当问题为空时，会使用列名作为问题；如未重命名列，所填写的问题会自动同步给列名。",yes:"是",no:"否",uploadFile:"上传文件",uploadImage:"上传图片"},fn={input:"Single line text",textarea:"Long text",select:"Single select",multiSelect:"Multiple select",date:"Date",number:"Number",mention:"Mention",image:"Image",file:"File",checkbox:"Checkbox",link:"Link",email:"Email",phone:"Phone",required:"Required",add:"Add",optionSetting:"Option settings",addOption:"Add an option",layout:"Layout",list:"List",dropdown:"Dropdown",placehoders:{input:"Input some texts",date:"Choose a date",question:"Input question text"},moveUp:"Move up",moveDown:"Move down",clone:"Clone this item",remove:"Remove this item",disabledWarning:"This field is for form user",clickToRename:"Click to rename field",emptyTitleError:"Enter a question",inputOption:"Enter an option",chooseOption:"Click to choose",tooltip:"When the question is empty, the column name will be used as the question; if the column is not renamed, the filled question will be automatically synchronized to the column name.",yes:"Yes",no:"No",uploadFile:"Upload file",uploadImage:"Upload image"},pn=function(e){d()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),a()(L()(r),"onMoveUp",(function(){var e=r.props.index;0!==r.props.index&&r.props.onSort(e,e-1)})),a()(L()(r),"onMoveDown",(function(){r.props.onSort(r.props.index,r.props.index+1)})),a()(L()(r),"onClone",(function(){r.props.onClone(r.props.index,r.props.field)})),a()(L()(r),"onChangeRequired",(function(e){var t=r.props.field;e.target.checked?t.validations&&t.validations.unshift({required:!0}):t.validations=t.validations.slice(1),r.setState({field:t}),r.props.onChange(r.props.index,t)})),a()(L()(r),"updateField",(function(e,t,n){var o=r.state.field;o[e]=t,"title"===e&&(n?r.setState({title:t}):(r.updateColumnNameIfEmpty(t),r.setState({title:null}))),r.setState({field:o}),r.props.onChange(r.props.index,o)})),a()(L()(r),"updateColumnName",(function(e){r.props.updateColumn(r.props.column.id,"name",e.target.value),r.setState({editing:!1,columnName:null})})),a()(L()(r),"updateColumnNameIfEmpty",(function(e){var t=("en"===r.props.lang?fn:dn)[r.props.column.type];new RegExp("".concat(t,"(\\s\\d)*")).test(r.props.column.name)&&e&&r.props.updateColumn(r.props.column.id,"name",e)})),a()(L()(r),"onChangeType",(function(e){if(e!==r.props.column.type){r.updateField("type",e);var t="en"===r.props.lang?fn:dn;r.props.updateColumn(r.props.column.id,"type",e,t[r.props.column.type],t[e])}})),a()(L()(r),"onClickItem",(function(e){e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopPropagation();for(var t=e.target;t&&t.classList&&t!==document.body;){if(t.classList.contains("lake-form-item-dropdown")||t.classList.contains("lake-form-ignore-click"))return;t=t.parentNode}r.props.active||r.props.onActive(r.props.field.columnId,r.props.index)})),r.state={editing:null},r.wrapper=g.a.createRef(),r}return s()(n,[{key:"componentDidMount",value:function(){this.setState({field:this.props.field,editing:!1,columnName:null,title:null})}},{key:"componentWillReceiveProps",value:function(e){if(e.active!==this.props.active)if(e.active)this.setState({columnName:null,title:null});else{e.field.title||this.updateField("title",e.column.name),this.state.columnName&&this.props.updateColumn(this.props.column.id,"name",this.state.columnName),this.state.title&&(this.updateField("title",this.state.title),this.updateColumnNameIfEmpty(this.state.title));var t=document.querySelectorAll(".lake-form-item-select-option .ant-input");if(t){var n=[],r={};t.forEach((function(e){if(""!==e.value){var t=e.parentNode;r[e.value]||(n.push({value:e.value,color:t.getAttribute("data-color"),id:t.getAttribute("data-id")}),r[e.value]=!0)}})),this.updateField("options",n)}}}},{key:"renderColumnTypes",value:function(){var e=this.props.column,t="en"===this.props.lang?fn:dn;return(0===e.index?un:sn).map((function(e,n){return g.a.createElement(oe.a.Option,{key:n,value:e.type},g.a.createElement("div",{className:"lake-form-field-type-item"},g.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(e.type.toLowerCase()),style:{marginRight:8}}),t[e.type]))}))}},{key:"getFormItem",value:function(){var e=this.props.column.type,t="en"===this.props.lang?fn:dn,n=sn.find((function(t){return t.type===e}));if(!n)return null;var r={field:this.props.field,validate:this.props.validate,column:this.props.column,active:this.props.active,index:this.props.index,locale:t,onChange:this.updateField};return g.a.createElement(n.component,r)}},{key:"render",value:function(){var e=this,t=this.props.field,n=this.props.column,r="en"===this.props.lang?fn:dn;return t?this.props.active?g.a.createElement("div",{className:"lake-form-item active",ref:this.wrapper},g.a.createElement("div",{className:"lake-form-item-inner"},g.a.createElement("div",{className:"lake-form-item-sidebar",onClick:function(e){e.stopPropagation()}},g.a.createElement(_.a,{placement:"left",title:r.moveUp},g.a.createElement("span",{className:"lake-icon lake-icon-move-up",onClick:this.onMoveUp,style:{color:0===this.props.index?"#BFBFBF":"#8c8c8c"}})),g.a.createElement(_.a,{placement:"left",title:r.moveDown},g.a.createElement("span",{className:"lake-icon lake-icon-move-down",onClick:this.onMoveDown,style:{color:this.props.last?"#BFBFBF":"#8c8c8c"}})),g.a.createElement(_.a,{placement:"left",title:r.clone},g.a.createElement("span",{className:"lake-icon lake-icon-table-copy",onClick:this.onClone})),g.a.createElement(_.a,{placement:"left",title:r.remove},g.a.createElement("span",{className:"lake-icon lake-icon-circle-remove",onClick:function(){e.props.onRemove(e.props.index)}}))),g.a.createElement("div",{className:"lake-form-item-container"},g.a.createElement("div",{className:"lake-form-item-column-configs"},this.state.editing?g.a.createElement(G.a,{autoFocus:!0,defaultValue:this.props.column.name,onChange:function(t){e.setState({columnName:t.target.value})},onPressEnter:this.updateColumnName,onBlur:this.updateColumnName}):g.a.createElement("div",{className:"lake-form-item-column-name"},g.a.createElement("span",{className:"lake-form-item-column-content"},this.props.column.name),g.a.createElement(_.a,{placement:"bottom",title:r.clickToRename},g.a.createElement("span",{className:"lake-form-item-column-edit",onClick:function(t){t.stopPropagation(),e.setState({editing:!0})}},g.a.createElement("span",{className:"lake-icon lake-icon-edit-new"})))),g.a.createElement("div",{className:"lake-form-item-type"},g.a.createElement(oe.a,{defaultValue:n.type,bordered:!1,onChange:this.onChangeType,dropdownClassName:"lake-form-item-dropdown lake-form-type-select",getPopupContainer:function(e){return e.parentNode.parentNode}},this.renderColumnTypes()),g.a.createElement("div",{className:"lake-form-item-validation"},g.a.createElement(re.a,{defaultChecked:t.validations&&t.validations[0]&&t.validations[0].required,onChange:this.onChangeRequired,style:{marginRight:8}},r.required)))),g.a.createElement("div",{className:"lake-form-item-field-configs"},this.getFormItem())),this.props.validate&&""===t.title?g.a.createElement("div",{className:"lake-form-item-error"},r.emptyTitleError):null),g.a.createElement("div",{className:"lake-form-item-add"},g.a.createElement(ee.a,{onClick:function(t){e.props.onInsert(t,e.props.index)},onMouseDown:function(e){e.stopPropagation()}},g.a.createElement("span",{className:"lake-icon lake-icon-plus"}),r.add))):g.a.createElement("div",{className:"lake-form-item ".concat(this.props.active?"active":""),onClick:this.onClickItem},g.a.createElement("div",{className:"lake-form-item-field-configs"},this.getFormItem()),this.props.validate&&""===t.title?g.a.createElement("div",{className:"lake-form-item-error"},r.emptyTitleError):null):null}}]),n}(g.a.Component);a()(pn,"propTypes",{index:R.a.number,active:R.a.bool,field:R.a.object,column:R.a.object,last:R.a.bool,lang:R.a.string,validate:R.a.bool,onActive:R.a.func,onSort:R.a.func,onInsert:R.a.func,onRemove:R.a.func,onClone:R.a.func,onChange:R.a.func,updateColumn:R.a.func});var hn={added:"已添加",add:"添加",allCols:"所有列",remove:"取消添加",allColDesc:"数据表中所有的列",untitled:"未命名问题"},mn={added:"Added",add:"Add",allCols:"All the columns",remove:"Remove",allColDesc:"All the columns in table",untitled:"Untitled question"};function vn(e){var t=e.columns,n=e.states,r=e.formData,o=hn;if("en"===e.lang&&(o=mn),!n)return null;var a=t.map((function(a,i){var l=!!n[i];return"createdAt"!==a.type&&a.type?g.a.createElement("div",{className:"lake-form-col ".concat(l?"active":"deactive"),key:a.id,onClick:function(){!function(r){n[r]?e.onRemove(t[r].id):e.onInsert(r,t[r])}(i)}},g.a.createElement("div",{className:"lake-form-col-name"},g.a.createElement("span",{className:"lake-icon lake-icon-col-".concat(a.type.toLowerCase())}),a.name),l&&g.a.createElement("span",{className:"lake-form-col-state"},o.added),l&&g.a.createElement("span",{className:"lake-form-col-state-remove"},o.remove),!l&&g.a.createElement("span",{className:"lake-form-col-state add"},g.a.createElement("span",null,o.add),g.a.createElement(Jt,{style:{marginLeft:4}})),g.a.createElement("div",{className:"lake-form-col-fields"},function(e){for(var t,n,a=0;a<r.fields.length;a++){if(r.fields[a].columnId===e.id){t=r.fields[a],n=a;break}if(r.cached){var i=r.cached[e.id];if(i){t=i;break}}}return t?g.a.createElement("span",null,null!=n?"".concat(n+1,"."):"",t.title):g.a.createElement("span",{className:"lake-form-col-untitled"},o.untitled)}(a))):null}));return g.a.createElement("div",{className:"lake-form-col-container"},g.a.createElement("div",{className:"lake-form-col-intro"},o.allCols,g.a.createElement(_.a,{title:o.allColDesc},g.a.createElement("span",{className:"lake-icon lake-icon-question"}))),g.a.createElement("div",{className:"lake-form-col-items"},a))}vn.propTypes={columns:R.a.array,states:R.a.array,formData:R.a.object,lang:R.a.string,onInsert:R.a.func,onRemove:R.a.func},Pe('.lake-form-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n}\n.lake-form-configs {\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.lake-form-configs-bg {\n  width: 100%;\n  height: auto;\n  min-height: 100%;\n  padding-bottom: 180px;\n  background-image: url(https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*GuXmSLuojF4AAAAAAAAAAAAAARQnAQ);\n  background-repeat: no-repeat;\n  background-position: bottom;\n  background-size: contain;\n}\n.lake-form-configs-title {\n  min-height: 150px;\n  padding: 48px 0 10px 0;\n  width: 440px;\n  margin: auto;\n  border-bottom: 1px solid var(--yq-border-primary);\n  margin-bottom: 25px;\n}\n.lake-form-configs-title .ant-input {\n  border: none;\n  background-color: transparent;\n  box-shadow: none;\n  resize: none;\n}\n.lake-form-configs-content {\n  width: 440px;\n  margin: auto;\n  min-height: 72px;\n}\n.lake-form-configs-content textarea {\n  padding-left: 0;\n}\n.lake-form-configs .lake-form-title {\n  font-size: 32px;\n  line-height: 40px;\n  font-weight: bold;\n  color: var(--yq-text-primary);\n  padding: 0;\n}\n.lake-form-configs .lake-form-desc {\n  color: var(--yq-text-body);\n  padding: 0;\n}\n.lake-form-configs-footer {\n  width: 440px;\n  margin: auto;\n  padding-top: 25px;\n  padding-bottom: 50px;\n}\n.lake-form-item {\n  width: 492px;\n  position: relative;\n  margin: auto;\n  padding: 25px;\n  cursor: pointer;\n}\n.lake-form-item .ant-select-borderless .ant-select-selector {\n  background: none;\n}\n.lake-form-item .ant-select-borderless .ant-select-selector:hover {\n  color: var(--yq-text-body);\n}\n.lake-form-item:hover,\n.lake-form-item.hover {\n  background-color: var(--yq-bg-primary-hover);\n  border-radius: 8px;\n}\n.lake-form-item.active {\n  cursor: auto;\n}\n.lake-form-item.active .lake-form-item-field-configs {\n  padding: 25px;\n}\n.lake-form-item.active:hover {\n  background-color: transparent;\n}\n.lake-form-item-sidebar {\n  position: absolute;\n  top: 25px;\n  left: -6px;\n  width: 32px;\n  text-align: center;\n  height: 136px;\n  border: 1px solid var(--yq-border-primary);\n  cursor: pointer;\n  padding-top: 4px;\n  border-bottom-left-radius: 4px;\n  border-top-left-radius: 4px;\n}\n.lake-form-item-sidebar span {\n  font-size: 16px;\n  padding: 6px;\n  margin-bottom: 4px;\n  color: var(--yq-text-caption);\n}\n.lake-form-item-sidebar span:hover {\n  background-color: var(--yq-bg-tertiary);\n  border-radius: 3px;\n}\n.lake-form-item-sidebar .ant-select-borderless .ant-select-selector {\n  background: none;\n}\n.lake-form-item-container {\n  min-height: 78px;\n  width: 488px;\n  border: 1px solid #D9D9D9;\n  border-radius: 0 0 4px 4px;\n  background-color: var(--yq-bg-secondary);\n}\n.lake-form-item-column-configs {\n  height: 38px;\n  width: 100%;\n  padding: 0 24px;\n  border-bottom: 1px solid var(--yq-border-primary);\n  display: flex;\n  justify-content: space-between;\n}\n.lake-form-item-column-configs .ant-input {\n  width: 160px;\n  height: 32px;\n  margin-top: 2px;\n}\n.lake-form-item-error {\n  color: red;\n  margin-top: 6px;\n  font-size: 14px;\n  font-weight: normal;\n}\n.lake-form-item-field-configs .lake-form-preview {\n  font-size: 16px;\n  font-weight: bold;\n  max-width: 440px;\n  white-space: normal;\n  line-break: anywhere;\n  color: var(--yq-text-primary);\n}\n.lake-form-item-field-configs .lake-form-preview-select {\n  width: 328px;\n  margin-top: 12px;\n  font-weight: normal;\n  background-color: var(--yq-bg-primary);\n}\n.lake-form-item-field-configs .lake-form-preview .ant-select-selector {\n  background: none;\n}\n.lake-form-item-field-configs .lake-form-preview-required:before {\n  display: inline-block;\n  color: #ff4d4f;\n  margin-right: 4px;\n  font-size: 14px;\n  line-height: 1;\n  content: "*";\n  font-weight: lighter;\n}\n.lake-form-item-field-configs .lake-form-preview .lake-form-item-radio {\n  display: flex;\n  align-items: center;\n  min-height: 40px;\n  margin: 8px 0;\n  padding: 8px 14px;\n  font-weight: normal;\n}\n.lake-form-item-field-configs .lake-form-preview .lake-form-item-radio .ant-radio,\n.lake-form-item-field-configs .lake-form-preview .lake-form-item-radio .ant-checkbox {\n  margin-top: -4px;\n}\n.lake-form-item-field-configs .lake-form-preview .lake-form-item-radio-text {\n  max-width: 388px;\n  font-size: 16px;\n  font-size: normal;\n  white-space: normal;\n  line-break: anywhere;\n}\n.lake-form-item-field-configs .lake-form-preview .ant-input:hover {\n  border-color: #d9d9d9;\n}\n.lake-form-item-field-configs .lake-form-preview .ant-radio-wrapper:hover .ant-radio,\n.lake-form-item-field-configs .lake-form-preview .ant-radio:hover .ant-radio-inner,\n.lake-form-item-field-configs .lake-form-preview .ant-radio-input:focus + .ant-radio-inner {\n  border-color: #d9d9d9;\n  box-shadow: none;\n}\n.lake-form-item-field-configs .lake-form-preview .ant-input-affix-wrapper:hover {\n  border-color: #d9d9d9;\n}\n.lake-form-item-field-configs .lake-form-preview .ant-select:not(.ant-select-disabled):hover .ant-select-selector {\n  border-color: #d9d9d9;\n  box-shadow: none;\n}\n.lake-form-item-field-configs .lake-form-preview .ant-select-focused:not(.ant-select-disabled).ant-select:not(.ant-select-customize-input) .ant-select-selector {\n  border-color: #d9d9d9;\n  box-shadow: none;\n}\n.lake-form-item-field-configs .lake-form-preview .ant-picker {\n  border-color: #d9d9d9;\n}\n.lake-form-item-field-configs .lake-form-preview .ant-picker-focused {\n  border-color: #d9d9d9;\n  box-shadow: none;\n}\n.lake-form-item-field-configs .lake-form-preview .lake-icon {\n  font-weight: 400;\n}\n.lake-form-item-option-title {\n  color: var(--yq-text-caption);\n  padding: 0 24px;\n}\n.lake-form-item-type {\n  display: flex;\n  align-items: center;\n}\n.lake-form-item-add {\n  text-align: center;\n  padding-top: 24px;\n}\n.lake-form-item-add .lake-icon {\n  margin-right: 8px;\n}\n.lake-form-item-option-layout {\n  height: 46px;\n  margin: 0 -25px -25px -25px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n.lake-form-item-select {\n  margin: 0 -24px;\n  border-bottom: 1px solid var(--yq-border-primary);\n}\n.lake-form-item-select.dropdown {\n  background-color: var(--yq-bg-tertiary);\n  margin-top: 20px;\n  padding: 12px 0;\n}\n.lake-form-item-select.dropdown .lake-form-item-select-option-add {\n  margin: 10px 0 10px 24px;\n}\n.lake-form-item-select-option {\n  padding: 6px 0px;\n  display: flex;\n  align-items: center;\n}\n.lake-form-item-select-option .lake-icon {\n  margin-left: 12px;\n}\n.lake-form-item-select-option-list {\n  max-height: 180px;\n  padding: 0 24px;\n  overflow: auto;\n  overflow-x: hidden;\n  margin-top: 8px;\n}\n.lake-form-item-select-option-list .lake-icon {\n  cursor: pointer;\n  color: var(--yq-text-caption);\n  font-size: 16px;\n}\n.lake-form-item-select-option-list .lake-icon:hover {\n  color: var(--yq-text-primary);\n}\n.lake-form-item-select-option-add {\n  cursor: pointer;\n  line-height: 24px;\n  margin: 10px 0 10px 56px;\n  color: var(--yq-text-body);\n}\n.lake-form-item-select-option-add:hover {\n  color: var(--yq-text-primary);\n}\n.lake-form-item-select-option-add .lake-icon {\n  margin-right: 6px;\n}\n.lake-form-item-select-option-add.colored {\n  margin-left: 44px;\n}\n.lake-form-item-column-name {\n  color: var(--yq-text-body);\n  line-height: 38px;\n}\n.lake-form-item-column-name:hover {\n  color: var(--yq-text-body);\n}\n.lake-form-item-column-content {\n  max-width: 130px;\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  vertical-align: middle;\n}\n.lake-form-item-column-edit {\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  border-radius: 2px;\n  padding: 3px;\n  margin-left: 2px;\n}\n.lake-form-item-column-edit:hover {\n  background: #dedede;\n}\n.lake-form-item-validation {\n  display: inline-block;\n  height: 22px;\n  border-left: 1px solid var(--yq-border-primary);\n  margin-left: 16px;\n  padding-left: 16px;\n}\n.lake-form-item-ui-container {\n  margin-bottom: 12px;\n  position: relative;\n}\n.lake-form-item-ui-container .ant-input {\n  width: 440px;\n  border: none;\n  box-shadow: none;\n  height: 40px;\n  font-size: 16px;\n  font-weight: bold;\n  border-radius: 4px 4px 0 0;\n  background-color: var(--yq-bg-primary-hover);\n  border-bottom: 2px solid #096DD9;\n}\n.lake-form-item-ui-container .lake-form-item-input-tooltip {\n  position: absolute;\n  top: 12px;\n  right: 5px;\n  color: var(--yq-text-caption);\n  font-size: 16px;\n}\n.lake-form-item-ui-container .lake-form-item-input-tooltip:hover {\n  color: var(--yq-text-caption);\n}\n.lake-form-item-ui-show-tooltip .ant-input {\n  padding-right: 30px;\n}\n.lake-form-col-container {\n  width: 286px;\n  position: relative;\n  border: 1px solid var(--yq-border-primary);\n  flex-shrink: 0;\n}\n.lake-form-col-container .lake-form-col-intro {\n  height: 54px;\n  line-height: 54px;\n  font-weight: bold;\n  padding-left: 24px;\n  border-bottom: 1px solid var(--yq-border-primary);\n  user-select: none;\n}\n.lake-form-col-container .lake-form-col-intro .lake-icon {\n  margin-left: 8px;\n  font-size: 16px;\n  color: var(--yq-text-caption);\n  vertical-align: middle;\n  font-weight: normal;\n}\n.lake-form-col-container .lake-form-col-items {\n  position: absolute;\n  top: 54px;\n  bottom: 0;\n  overflow: auto;\n  width: 100%;\n  padding: 10px 24px 50px 24px;\n}\n.lake-form-col-container .lake-form-col {\n  height: 73px;\n  margin: 8px 0;\n  padding: 10px 16px 0;\n  background-color: var(--yq-bg-secondary);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 3px;\n  cursor: pointer;\n}\n.lake-form-col-container .lake-form-col .lake-icon {\n  margin-right: 8px;\n}\n.lake-form-col-container .lake-form-col.active {\n  color: var(--yq-text-disable);\n}\n.lake-form-col-container .lake-form-col.active:hover {\n  background-color: var(--yq-bg-tertiary);\n}\n.lake-form-col-container .lake-form-col.deactive {\n  color: var(--yq-text-body);\n  background-color: var(--yq-bg-primary);\n}\n.lake-form-col-container .lake-form-col.deactive:hover {\n  background-color: var(--yq-bg-primary);\n  box-shadow: 0px 1px 2px -2px rgba(0, 0, 0, 0.08), 0px 2px 6px 0px rgba(0, 0, 0, 0.08);\n}\n.lake-form-col-container .lake-form-col-name {\n  display: inline-block;\n  max-width: 144px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n.lake-form-col-container .lake-form-col-fields {\n  margin-top: 4px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n.lake-form-col-container .lake-form-col-untitled {\n  color: var(--yq-text-disable);\n}\n.lake-form-col-container .lake-form-col-state {\n  float: right;\n}\n.lake-form-col-container .lake-form-col-state.add {\n  visibility: hidden;\n  cursor: pointer;\n}\n.lake-form-col-container .lake-form-col-state-remove {\n  float: right;\n  display: none;\n  color: var(--yq-text-body);\n}\n.lake-form-col-container .lake-form-col:hover .lake-form-col-state {\n  display: none;\n}\n.lake-form-col-container .lake-form-col:hover .lake-form-col-state.add {\n  display: block;\n  visibility: visible;\n}\n.lake-form-col-container .lake-form-col:hover .lake-form-col-state-remove {\n  display: block;\n}\n.lake-form-type-select {\n  width: 150px !important;\n}\n.lake-form-type-select span {\n  margin-right: 8px;\n}\n.lake-form-empty-field {\n  width: 440px;\n  margin: auto;\n  margin-top: 90px;\n  text-align: center;\n}\n.lake-form-empty-field p {\n  font-size: 16px;\n  font-weight: bold;\n  color: var(--yq-text-primary);\n  margin: 30px 0 12px 0;\n}\n.lake-form-checkbox .ant-radio-wrapper {\n  width: 90px;\n}\n');var gn=function(e){d()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),a()(L()(r),"fields",[]),a()(L()(r),"onMouseDown",(function(e){if(r.state.editing){var t=e.target;if("INPUT"!==t.tagName){for(;t&&t.classList&&t!==document.body;){if(t.classList.contains("lake-form-item")||t.classList.contains("lake-form-item-dropdown"))return;t=t.parentNode}r.setState({editing:null})}}})),a()(L()(r),"onInputBlur",(function(e,t){var n=r.props.data;n[e]=t,r.props.onChange&&r.props.onChange({data:n,columns:r.state.columns}),r.setState({data:n,editing:null})})),a()(L()(r),"onInsert",(function(e,t){var n=r.state.data,o=r.useCache(n,t);o||(o={columnId:t.id,columnName:t.name,title:"",type:t.type,validations:[{required:!0}]},"select"!==t.type&&"multiSelect"!==t.type||(o.options=r.cloneItem(t.options))),n.fields.push(o),r.updateColumnStates(n),r.setState({editing:o.columnId}),r.props.onChange&&r.props.onChange({data:n,columns:r.state.columns})})),a()(L()(r),"onSort",(function(e,t){var n=r.state.data,o=r.state.data.fields;if(!(t>=o.length)){var a=o.splice(e,1);o.splice(t,0,a[0]),n.fields=o,r.setState({data:n,editing:o[t].columnId}),r.props.onChange&&r.props.onChange({data:n,columns:r.state.columns})}})),a()(L()(r),"onClone",(function(e,t){var n=r.state.data,o=r.state.columns,a=n.fields,i=r.columnMap;t=r.cloneItem(t);var l=r.cloneItem(o[i[t.columnId]]),c=o.map((function(e){return e.index}));l.index=Math.max.apply(Math,Q()(c))+1;for(var s=1,u="副本".concat(s," ").concat(t.columnName);!r.validateColumnName(u);)s++,u="副本".concat(s," ").concat(t.columnName," ");for(t.columnName=u;void 0!==i[t.columnId];)t.columnId=Ht(32);i[t.columnId]=o.length,l.id=t.columnId,l.name=t.columnName,l.formAdded=!0,a.splice(e+1,0,t),n.fields=a,o.push(l);var d=r.state.columnStates;d.push(!0),r.setState({data:n,columnStates:d,columns:o,editing:l.id}),r.props.onChange&&r.props.onChange({data:n,columns:o})})),a()(L()(r),"onRemove",(function(e){var t=r.state.data,n=t.fields.splice(e,1)[0];t.cached||(t.cached={}),t.cached[n.columnId]=n,r.setState({data:t}),r.updateColumnStates(t),r.props.onChange&&r.props.onChange({data:t,columns:r.state.columns})})),a()(L()(r),"onChangeField",(function(e,t){var n=r.state,o=n.data,a=n.columns;if(o.fields[e]=r.cloneItem(t),"select"===t.type||"multiSelect"===t.type){var i=r.columnMap[t.columnId];a[i].color=a[i].color||!1,a[i].options=r.cloneItem(t.options)}r.setState({data:o,columns:a}),r.props.onChange&&r.props.onChange({data:o,columns:a})})),a()(L()(r),"updateColumn",(function(e,t,n,o,a){var i=r.state.columns,l=i[r.columnMap[e]];if("name"===t&&!r.validateColumnName(n))return!1;"type"===t&&new RegExp("".concat(o,"(\\s\\d)*")).test(l.name)&&(l.name=r.getDefaultNameByType(a)),l[t]=n,r.setState({columns:i}),r.props.onChange&&r.props.onChange({data:r.state.data,columns:i})})),a()(L()(r),"onInsertColAndField",(function(e,t){e.stopPropagation();for(var n=r.state.data,o=n.fields,a=r.state.columns,i=r.columnMap,l=a.map((function(e){return e.index})),c={type:"input",index:Math.max.apply(Math,Q()(l))+1,name:r.getDefaultNameByType("en"===r.props.lang?"input":"单行文本")};!c.id||void 0!==i[c.id];)c.id=Ht(32);i[c.id]=a.length,c.formAdded=!0,a.push(c);var s={type:"input",columnId:c.id,columnName:c.name,title:null,validations:[{required:!0}]};o.splice(t+1,0,s),r.setState({data:n,columns:a},(function(){r.onActiveField(s.columnId,t+1)})),r.props.onChange&&r.props.onChange({data:n,columns:a}),r.updateColumnStates(n)})),a()(L()(r),"onRemoveByColumnId",(function(e){for(var t=r.state.data,n=0;n<t.fields.length;n++)if(t.fields[n].columnId===e){r.onRemove(n);break}r.props.onChange&&r.props.onChange({data:t,columns:r.state.columns})})),r.state={editing:null,columns:null,data:null,columnStates:[]},r}return s()(n,[{key:"componentDidMount",value:function(){var e=this;this.columnMap={},this.props.columns.forEach((function(t,n){e.columnMap[t.id]=n})),this.setState({data:this.props.data,columns:this.props.columns}),this.updateColumnStates(this.props.data),window.addEventListener("mousedown",this.onMouseDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.onMouseDown)}},{key:"updateColumnStates",value:function(e){var t=[],n=this.columnMap;e.fields.forEach((function(e){void 0!==n[e.columnId]&&(t[n[e.columnId]]=!0)})),this.setState({columnStates:t})}},{key:"useCache",value:function(e,t){if(e.cached&&e.cached[t.id]){var n=e.cached[t.id];if(delete e.cached[t.id],n.type===t.type)return n.options=ne()(t.options),n}return!1}},{key:"validateColumnName",value:function(e){return!this.state.columns.map((function(e){return e.name})).includes(e)}},{key:"onActiveField",value:function(e,t){var n=this;this.setState({editing:e},(function(){n.fields[t]}))}},{key:"getDefaultNameByType",value:function(e){for(var t=e,n=1;!this.validateColumnName(t);)t="".concat(e," ").concat(n),n+=1;return t}},{key:"renderFormItems",value:function(){var e=this,t=this.state.data,n=t.fields.length;return t.fields.map((function(t,r){return g.a.createElement(pn,{validate:e.props.validate,field:t,column:e.state.columns[e.columnMap[t.columnId]],index:r,active:t.columnId===e.state.editing,key:t.columnId,lang:e.props.lang,last:r===n-1,ref:function(t){e.fields[r]=t},onActive:function(t){e.onActiveField(t,r)},onInsert:e.onInsertColAndField,onSort:e.onSort,onClone:e.onClone,onRemove:e.onRemove,onChange:e.onChangeField,updateColumn:e.updateColumn})}))}},{key:"cloneItem",value:function(e){return e?JSON.parse(JSON.stringify(e)):""}},{key:"setData",value:function(e,t){var n=this.state.data;n[e]=t,this.setState({data:n}),this.props.onChange&&this.props.onChange({data:n,columns:this.state.columns})}},{key:"render",value:function(){var e,t=this,n=this.state,r=n.columns,o=n.data;if(!r)return null;if(o&&0!==o.fields.length){var a=this.renderFormItems();e=g.a.createElement("div",null,a,g.a.createElement("div",{className:"lake-form-configs-footer"},g.a.createElement(ee.a,{type:"primary",onClick:function(e){t.onInsertColAndField(e,o.fields.length-1)}},g.a.createElement("span",{className:"lake-icon lake-icon-plus",style:{marginRight:8}}),"en"===this.props.lang?"Add":"添加")))}else{var i="en"===this.props.lang?{emptyForm:"This form is empty",add:"Click a field or the button above to add an item"}:{emptyForm:"表单为空",add:"点击左侧列表添加已有列 或 点击下方按钮添加新表单项"};e=g.a.createElement("div",{className:"lake-form-empty-field"},g.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*T2g-TqR5Yw8AAAAAAAAAAAAAARQnAQ",width:"123",height:"114"}),g.a.createElement("p",null,i.emptyForm),g.a.createElement("span",{style:{color:"#8c8c8c"}},i.add),g.a.createElement("br",null),g.a.createElement(ee.a,{type:"primary",style:{marginTop:30},onClick:function(e){t.onInsertColAndField(e,-1)}},g.a.createElement("span",{className:"lake-icon lake-icon-plus",style:{marginRight:8}}),"en"===this.props.lang?"Add":"添加"))}return g.a.createElement("div",{className:"lake-form-container"},r&&g.a.createElement(vn,{columns:r,states:this.state.columnStates,formData:this.state.data,lang:this.props.lang,onInsert:this.onInsert,onRemove:this.onRemoveByColumnId}),g.a.createElement("div",{className:"lake-form-configs"},g.a.createElement("div",{className:"lake-form-configs-bg"},g.a.createElement("div",{className:"lake-form-configs-title"},g.a.createElement("div",{className:"lake-form-configs-content"},g.a.createElement(G.a.TextArea,{className:"lake-form-title",autoFocus:""===o.name,autoSize:!0,defaultValue:o.name,onBlur:function(e){t.onInputBlur("name",e.target.value)},onClick:function(e){e.stopPropagation()},placeholder:"请输入表单标题"}),g.a.createElement(G.a.TextArea,{autoSize:!0,defaultValue:o.desc,onBlur:function(e){t.onInputBlur("desc",e.target.value)},size:"small",style:{marginTop:24,color:"#595959"},onClick:function(e){e.stopPropagation()},placeholder:"请输入表单描述"}))),e)))}}]),n}(g.a.Component);function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a()(gn,"propTypes",{data:R.a.object,columns:R.a.array,lang:R.a.string,onChange:R.a.func,validate:R.a.bool});var wn=function(e){d()(n,A.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return l()(this,n),r=t.call(this),a()(L()(r),"_audio",null),a()(L()(r),"_canPlay",!1),a()(L()(r),"_ready",!1),a()(L()(r),"playbackRate",1),Promise.resolve().then((function(){r._audio=new Audio(e),r._audio.autoplay=!1,r._audio.loop=!1,r._audio.preload=!1;var t=r._audio;t.addEventListener("canplay",(function(){r._audio&&(r._canPlay=!0,r.emit("canplay"))}),!1),t.addEventListener("suspend",(function(){r._audio&&100===r._getBufferedPercentage(t.buffered)&&r.emit("loaded")})),t.addEventListener("progress",(function(){r._audio&&r.emit("progress",{percentage:r._getBufferedPercentage(t.buffered)})})),t.addEventListener("loadedmetadata",(function(){r._audio&&(r._ready=!0,r._duration=t.duration,r.emit("loadedmetadata",{duration:r._duration}))}),!1),t.addEventListener("timeupdate",(function(){r._audio&&(isNaN(t.currentTime)||t.playbackRate===r.playbackRate||(t.playbackRate=r.playbackRate),r.emit("timeupdate",r._calcTime(t.currentTime)))}),!1),t.addEventListener("playing",(function(){r._audio&&(r._audio.currentTime>=r._duration?r.emit("pause"):r.emit("playing"))}),!1),t.addEventListener("pause",(function(){r._audio&&r.emit("pause")}),!1),t.addEventListener("ended",(function(){r._audio&&(r.emit("pause"),r.emit("ended"))}),!1),t.addEventListener("seeking",(function(){r._audio&&r.emit("seeking",yn(yn({},r._calcTime(t.currentTime)),{},{playStatus:""}))}),!1),t.addEventListener("seeked",(function(){r._audio&&r.emit("seeked",r._calcTime(t.currentTime))}),!1),t.addEventListener("error",(function(){r._audio&&r.emit("error")})),null==o||o(t)})),r}return s()(n,[{key:"destroy",value:function(){this._audio&&(this._audio.pause(),this._audio=null)}},{key:"canPlay",value:function(){return this._canPlay}},{key:"isReady",value:function(){return this._ready}},{key:"duration",value:function(){return this._duration}},{key:"seekTo",value:function(e){this._audio&&(this._audio.currentTime=e)}},{key:"seekToEnd",value:function(){this._audio&&(this._audio.currentTime=this._audio.duration)}},{key:"play",value:function(){this._audio&&this._audio.play().catch((function(e){console.warn(e)}))}},{key:"pause",value:function(){this._audio&&this._audio.pause()}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e}},{key:"_getBufferedPercentage",value:function(e){if(e.length<1)return 0;var t=e.end(e.length-1),n=this._duration;return t&&n?t>=n?100:Math.floor(t/n*100):0}},{key:"_calcTime",value:function(e){var t=this._duration;return t?(e=Math.min(e,t),{currentTime:Math.round(e),percentage:e===t?100:Math.round(e/t*1e4)/100}):{currentTime:0,percentage:0}}}]),n}(),kn=function(){function e(t,n){var r=this;l()(this,e),a()(this,"_autoBuffer",!0),a()(this,"_autoPlay",!1),a()(this,"_dragging",!1),a()(this,"_audioController",null),a()(this,"_containerNode",null),a()(this,"_controls",{}),a()(this,"container",null),a()(this,"progressBar",null),a()(this,"pastBard",null),a()(this,"shine",null),this._containerNode=t,this._audioController=new wn(n,(function(e){t.appendChild(e)})),this._audioController.on("progress",(function(e){var t=e.percentage;r._updateBufferedPercentage(t)})),this._audioController.on("timeupdate",(function(e){var t=e.percentage;r._updatePastPercentage(t)})),this._audioController.on("seeking",(function(e){var t=e.percentage;r._updatePastPercentage(t)})),this._audioController.on("seeked",(function(e){var t=e.percentage;r._updatePastPercentage(t),100!==t&&r._audioController.play()})),this._audioController.on("loaded",(function(){r._updateBufferedPercentage(100)})),this._init()}return s()(e,[{key:"canPlay",value:function(){return this._audioController.canPlay()}},{key:"play",value:function(){this._audioController.play()}},{key:"pause",value:function(){this._audioController.pause()}},{key:"setPlaybackRate",value:function(e){this._audioController.setPlaybackRate(e)}},{key:"seekToPercentage",value:function(e){if(this._audioController.isReady()){var t=this._audioController.duration(),n=e/100*t;n>=t||t-n<1?this._audioController.seekToEnd():this._audioController.seekTo(n)}}},{key:"on",value:function(){var e;return(e=this._audioController).on.apply(e,arguments)}},{key:"off",value:function(){var e;return(e=this._audioController).off.apply(e,arguments)}},{key:"destroy",value:function(){this._unbindEvent(),this._audioController.destroy()}},{key:"_init",value:function(){this._initProgressBar(),this._bindEvent()}},{key:"_bindEvent",value:function(){var e=this,t=this._containerNode.ownerDocument,n=!1,o=r.ua.mobile,a=o?"touchstart":"mousedown",i=o?"touchmove":"mousemove",l=o?"touchend":"mouseup";this.container.addEventListener(a,(function(e){e.stopPropagation(),n=!0})),this.container.addEventListener(l,(function(t){n&&(t.stopPropagation(),e._seekByUI(xn(t)))})),this.shine.addEventListener(a,(function(r){r.stopPropagation();var o=e._containerNode.getBoundingClientRect(),a=o.left,c=o.width;e._dragging=!0,n=!1,e._controls.progress.classList.add("dragging");var s=function(t){var n=xn(t)-a;n<0?n=0:n>c&&(n=c),e._controls.past.style.width=n+"px"};t.addEventListener(i,s),t.addEventListener(l,(function n(r){e._dragging=!1,e._controls.progress.classList.remove("dragging"),t.removeEventListener(i,s),t.removeEventListener(l,n),e._seekByUI(xn(r))}))}))}},{key:"_seekByUI",value:function(e){var t=this._containerNode.getBoundingClientRect(),n=t.left,r=t.width,o=e-n;o<=0?this.seekToPercentage(0):o>=r?this.seekToPercentage(100):this.seekToPercentage(Math.round(o/r*1e4)/100)}},{key:"_unbindEvent",value:function(){}},{key:"_initProgressBar",value:function(){this._containerNode.innerHTML='\n    <div class="ne-card-player-progress">\n      <div class="past"><div class="shine"></div></div>\n      <div class="buffered"></div>\n    </div>',this._controls.progress=this._containerNode.firstElementChild,this._controls.past=this._containerNode.querySelector(".past"),this._controls.buffered=this._containerNode.querySelector(".buffered"),this._controls.shine=this._containerNode.querySelector(".shine"),this.container=this._containerNode,this.progressBar=this._controls.progress,this.pastBar=this._controls.past,this.shine=this._controls.shine}},{key:"_updatePastPercentage",value:function(e){this._dragging||(this._controls.past.style.width=e+"%")}},{key:"_updateBufferedPercentage",value:function(e){this._controls.buffered.style.width=e+"%"}}]),e}();function xn(e){return e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].clientX:e.clientX||0}var En,Cn,On={"倍速":"rates","转码中":"transcoding","上传中":"uploading"},_n=null===(En=window)||void 0===En||null===(Cn=En.appData)||void 0===Cn?void 0:Cn.locale;function Sn(e){return _n&&_n.startsWith("en")?On[e]:e}function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}Pe('@keyframes neCardAudioLoading {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n.ne-card-audio-icon-loading {\n  display: inline-block;\n  margin-right: 10px;\n  width: 16px;\n  height: 16px;\n  background: url("https://gw.alipayobjects.com/zos/bmw-prod/0c4efcda-e4e5-4ed7-a83f-3618868d5f65.svg") no-repeat center center;\n  animation: neCardAudioLoading 1000ms linear infinite;\n}\nne-card[data-card-name="audio"] {\n  /* stylelint-disable-line */\n}\nne-card[data-card-name="audio"] .ne-card-container {\n  width: 100%;\n}\n.ne-card-player {\n  width: 100%;\n  height: 100%;\n  padding: 20px 28px;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  user-select: none;\n  cursor: default;\n}\n.ne-card-player .play-btn {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  border: 1px solid var(--yq-border-primary);\n  background-color: var(--yq-bg-secondary);\n  color: var(--yq-text-body);\n  outline: none;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n@media (hover: hover) {\n  .ne-card-player .play-btn:hover {\n    background-color: #e8e8e8;\n  }\n}\n@media (hover: none) {\n  .ne-card-player .play-btn:active {\n    background-color: #e8e8e8;\n  }\n}\n.ne-card-player .play-area {\n  flex: 1;\n  margin-left: 20px;\n  overflow: hidden;\n}\n.ne-card-player .audio-info {\n  display: flex;\n  font-size: 14px;\n  color: var(--yq-text-primary);\n  line-height: 20px;\n}\n.ne-card-player .audio-info .audio-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.ne-card-player .audio-info .audio-size {\n  min-width: 70px;\n  text-align: right;\n  color: var(--yq-text-caption);\n}\n.ne-card-player .audio-ctrl {\n  display: flex;\n  height: 28px;\n  line-height: 28px;\n  font-size: 12px;\n}\n.ne-card-player .audio-ctrl .audio-current,\n.ne-card-player .audio-ctrl .audio-duration {\n  color: var(--yq-text-caption);\n  width: 60px;\n}\n.ne-card-player .audio-ctrl .audio-duration {\n  text-align: right;\n}\n.ne-card-player .audio-ctrl .audio-rates {\n  width: 40px;\n  text-align: center;\n  position: relative;\n  margin-left: 12px;\n  cursor: pointer;\n  padding: 0 4px;\n  border-radius: 2px;\n}\n.ne-card-player .audio-ctrl .audio-rates:hover {\n  background-color: #e8e8e8;\n}\n.ne-card-player .audio-error {\n  height: 28px;\n  line-height: 28px;\n  color: #c61a1a;\n}\n.ne-card-player .audio-query {\n  height: 28px;\n  line-height: 28px;\n  color: var(--yq-text-caption);\n}\n.ne-card-player .audio-query svg {\n  margin-right: 10px;\n}\n.ne-card-player .audio-progress-bar {\n  flex: 1;\n  display: flex;\n  margin: 0 7px;\n  align-items: center;\n  cursor: pointer;\n}\n.ne-card-player .audio-progress-bar:hover .past .shine {\n  background-color: #8c8c8c;\n}\n.ne-card-player .ne-card-player-progress {\n  width: 100%;\n  height: 3px;\n  background-color: #e8e8e8;\n  position: relative;\n}\n.ne-card-player .ne-card-player-progress::before,\n.ne-card-player .ne-card-player-progress::after {\n  content: \' \';\n  position: absolute;\n  width: 7px;\n  height: 3px;\n  top: 0;\n}\n.ne-card-player .ne-card-player-progress::before {\n  left: -7px;\n  background-color: #595959;\n}\n.ne-card-player .ne-card-player-progress::after {\n  right: -7px;\n  background-color: #e8e8e8;\n}\n.ne-card-player .ne-card-player-progress.dragging .past .shine {\n  background-color: #8c8c8c;\n}\n.ne-card-player .ne-card-player-progress .past {\n  width: 0;\n  height: 100%;\n  background-color: #595959;\n  position: absolute;\n  top: 0;\n  z-index: 2;\n}\n.ne-card-player .ne-card-player-progress .past .shine {\n  width: 15px;\n  height: 15px;\n  background-color: #595959;\n  border-radius: 100%;\n  position: absolute;\n  top: -6px;\n  right: -7px;\n}\n.ne-card-player .ne-card-player-progress .buffered {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  width: 0;\n  transform: translateX(7px);\n  height: 100%;\n  background-color: #b7b7b7;\n}\n@media only screen and (max-width: 667px) {\n  .ne-card-player {\n    padding: 16px 20px;\n  }\n  .ne-card-player .play-area {\n    margin-left: 16px;\n  }\n}\n.ne-card-player-audio-rate-select {\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n}\n.ne-card-player-audio-rate-select .audio-rate {\n  text-align: left;\n  padding: 8px 0;\n  cursor: pointer;\n}\n.ne-card-player-audio-rate-select .audio-rate.audio-rate-selected {\n  color: #58aeff;\n}\n.ant-popover.ne-card-player-popover .ant-popover-content {\n  min-width: 48px;\n}\n.ant-popover.ne-card-player-popover .ant-popover-arrow {\n  display: none;\n}\n');var jn=[2,1.5,1.25,1,.75,.5],An=function(e){d()(n,v.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;l()(this,n),r=t.call(this,e),a()(L()(r),"player",null),a()(L()(r),"playerRootNodeRef",null),a()(L()(r),"state",{ver:0,canPlay:!1,uiStatus:"pause",currentTime:0,duration:-1,playbackRate:1}),a()(L()(r),"_onMainButtonClick",(function(e){if(e.stopPropagation(),!r.state.hasError&&r.player){var t=r.state.uiStatus;"pause"===t?(r.player.canPlay()||r.setState({uiStatus:"buffer"}),r.player.play()):"play"===t?r.player.pause():"buffer"===t&&(r.setState({uiStatus:"pause"}),r.player.pause())}})),a()(L()(r),"onRateChange",(function(e){r.player.setPlaybackRate(e),r.setState({playbackRate:e})})),r.playerRootNodeRef=g.a.createRef();var o=r.setState;return r.setState=function(e){o.call(L()(r),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ver:r.state.ver+1},e))},r}return s()(n,[{key:"componentDidMount",value:function(){var e=this;this.props.url&&(this.player=new kn(this.playerRootNodeRef.current,this.props.url),this.player.on("canplay",(function(){"buffer"===e.state.uiStatus&&e.player.play()})),this.player.on("playing",(function(){e.setState({uiStatus:"play"})}),!1),this.player.on("pause",(function(){e.setState({uiStatus:"pause"})}),!1),this.player.on("loadedmetadata",(function(t){var n=t.duration;e.setState({duration:Math.round(n)})})),this.player.on("seeking",(function(t){var n=t.currentTime;e.setState({currentTime:n})})),this.player.on("seeked",(function(t){var n=t.currentTime;e.setState({currentTime:n})})),this.player.on("timeupdate",(function(t){var n=t.currentTime;e.setState({currentTime:n})})),this.player.on("rateChange",(function(t){var n=t.playbackRate;e.setState({playbackRate:n})})),this.player.on("error",(function(){e.setState({hasError:!0})})))}},{key:"componentWillUnmount",value:function(){this.player&&this.player.destroy()}},{key:"shouldComponentUpdate",value:function(e,t){return t.ver!==this.state.ver}},{key:"render",value:function(){return g.a.createElement("div",{className:"ne-card-player"},g.a.createElement("div",{className:"play-btn",onClick:this._onMainButtonClick},this.renderButton()),g.a.createElement("div",{className:"play-area"},g.a.createElement("div",{className:"audio-info"},this.renderAudioName()),this.renderPlayerControl()))}},{key:"renderButton",value:function(){var e=this.state.uiStatus;return"pause"===e?g.a.createElement("svg",{viewBox:"0 0 1024 1024","data-icon":"play",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},g.a.createElement("path",{d:"M810.752 442.432l-485.504-370.56C267.648 27.904 184.576 68.992 184.576 141.504v740.992c0 72.512 83.072 113.6 140.672 69.632l485.504-370.56a87.552 87.552 0 0 0 0-139.136z"})):"buffer"===e?g.a.createElement("span",{className:"ne-card-audio-icon-loading"}):g.a.createElement("svg",{viewBox:"0 0 1024 1024","data-icon":"pause",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},g.a.createElement("path",{d:"M191.3856 128.2048H382.464v768.4608H191.3856V128.1536z m384.512 0h192.8704v768.4608h-192.8704V128.1536z"}))}},{key:"renderPlayerControl",value:function(){var e=this;if(!this.props.url)return g.a.createElement("div",{className:"audio-query"},g.a.createElement("span",{className:"ne-card-audio-icon-loading"}),this.props.message.query);if(this.state.hasError)return g.a.createElement("div",{className:"audio-error"},this.props.message.cantPlay);var t=this.state.playbackRate,n=t&&1==="".concat(t).length?"".concat(t,".0"):t,r=1===t?Sn("倍速"):"".concat(n,"X"),o=g.a.createElement("div",{className:"ne-card-player-audio-rate-select"},jn.map((function(n){var r=n;return n&&1==="".concat(n).length&&(r="".concat(n,".0")),g.a.createElement("span",{key:n,className:["audio-rate",n===t?"audio-rate-selected":""].join(" "),onClick:function(){return e.onRateChange(n)}},r,"X")})));return g.a.createElement("div",{className:"audio-ctrl"},g.a.createElement("div",{className:"audio-current"},this._toTime(this.state.currentTime)),g.a.createElement("div",{ref:this.playerRootNodeRef,className:"audio-progress-bar"}),g.a.createElement("div",{className:"audio-duration"},this._toTime(this.state.duration)),g.a.createElement("div",{className:"audio-rates"},g.a.createElement(se.a,{placement:"top",content:o,overlayClassName:"ne-card-player-popover"},g.a.createElement("span",{className:"audio-current-rate"},r))))}},{key:"renderAudioName",value:function(){var e=this.props,t=e.name,n=e.size;return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"audio-name"},t),g.a.createElement("div",{className:"audio-size"},n?r.FileUtils.getFileSize(n):""))}},{key:"_toTime",value:function(e){if(e<0)return"--:--";if(0===e)return"00:00";var t=Math.floor(e/60),n=e%60;return t<10&&(t="0"+t),n<10&&(n="0"+n),"".concat(t,":").concat(n)}}]),n}();a()(An,"propTypes",{name:R.a.string.isRequired,message:R.a.object.isRequired,size:R.a.number,url:R.a.string}),Pe('@keyframes neCardAudioLoading {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n.ne-card-audio-icon-loading {\n  display: inline-block;\n  margin-right: 10px;\n  width: 16px;\n  height: 16px;\n  background: url("https://gw.alipayobjects.com/zos/bmw-prod/0c4efcda-e4e5-4ed7-a83f-3618868d5f65.svg") no-repeat center center;\n  animation: neCardAudioLoading 1000ms linear infinite;\n}\nne-card[data-card-name="audio"] {\n  /* stylelint-disable-line */\n}\nne-card[data-card-name="audio"] .ne-card-container {\n  width: 100%;\n}\n.ne-card-audio-loading {\n  width: 100%;\n  height: 100%;\n  padding: 20px 28px;\n  background-color: var(--yq-bg-tertiary);\n  border: 1px solid #d8d8d8;\n  border-radius: 4px;\n  display: flex;\n  user-select: none;\n  cursor: default;\n}\n.ne-card-audio-loading .audio-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  color: var(--yq-text-body);\n  font-size: 28px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.ne-card-audio-loading .audio-info-box {\n  margin-left: 20px;\n  flex: 1;\n  overflow: hidden;\n}\n.ne-card-audio-loading .audio-info {\n  display: flex;\n  font-size: 14px;\n  color: var(--yq-text-primary);\n  line-height: 20px;\n}\n.ne-card-audio-loading .audio-info .audio-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.ne-card-audio-loading .audio-info .audio-size {\n  min-width: 70px;\n  text-align: right;\n  color: var(--yq-text-caption);\n}\n.ne-card-audio-loading .audio-status {\n  display: flex;\n  height: 28px;\n  line-height: 28px;\n  color: var(--yq-text-caption);\n}\n');var Tn=function(e){d()(n,v.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return g.a.createElement("div",{className:"ne-card-audio-loading","data-type":this.props.status},g.a.createElement("div",{className:"audio-icon"},g.a.createElement("svg",{viewBox:"0 0 1024 1024","data-icon":"play",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},g.a.createElement("path",{d:"M363.995429 433.664v376.32a150.016 150.016 0 1 1-79.981715-132.681143v-276.626286-200.667428c0-19.456 13.970286-36.096 33.170286-39.424l547.986286-95.012572a40.009143 40.009143 0 0 1 46.811428 39.424v608.987429a150.016 150.016 0 1 1-79.981714-132.681143V352.512L363.995429 433.664z m0-81.188571L832 271.323429V152.539429L363.995429 233.654857v118.820572zM214.016 880.018286a69.997714 69.997714 0 1 0 0-140.032 69.997714 69.997714 0 0 0 0 139.995428z m547.986286-96a69.997714 69.997714 0 1 0 0-140.032 69.997714 69.997714 0 0 0 0 139.995428z"}))),g.a.createElement("div",{className:"audio-info-box"},g.a.createElement("div",{className:"audio-info"},this.renderAudioName()),g.a.createElement("div",{className:"audio-status"},this.renderStatus())))}},{key:"renderAudioName",value:function(){var e=this.props,t=e.name,n=e.size;return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"audio-name"},t),g.a.createElement("div",{className:"audio-size"},n?r.FileUtils.getFileSize(n):""))}},{key:"renderStatus",value:function(){var e=this.props,t=e.status,n=e.uiStatus;return g.a.createElement("div",{className:"upload-progress"},g.a.createElement("span",{className:"ne-card-audio-icon-loading"}),this._getText(t,n))}},{key:"_getText",value:function(e,t){return"transcoding"===t?Sn("转码中"):"uploading"===e?this.props.progress?"".concat(Sn("上传中")," ").concat(this.props.progress,"%"):Sn("上传中"):void 0}}]),n}();a()(Tn,"propTypes",{status:R.a.oneOf(["uploading","uploaded"]),uiStatus:R.a.oneOf(["transcoding"]),progress:R.a.number,name:R.a.string.isRequired,size:R.a.number});var Ln=["http:","https:","blob:","data:","dingtalk:","ftp:","mailto:","fleamarket:","alipays:"];function Dn(e){return function(e){return"string"==typeof e&&!(e=e.toLowerCase()).startsWith("data:text/html")&&(!!Ln.some((function(t){return e.startsWith(t)}))||!(!e.startsWith("./")&&!e.startsWith("/"))||e.indexOf(":")<0)}(e)?e:""}Pe('@keyframes neCardAudioLoading {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n.ne-card-audio-icon-loading {\n  display: inline-block;\n  margin-right: 10px;\n  width: 16px;\n  height: 16px;\n  background: url("https://gw.alipayobjects.com/zos/bmw-prod/0c4efcda-e4e5-4ed7-a83f-3618868d5f65.svg") no-repeat center center;\n  animation: neCardAudioLoading 1000ms linear infinite;\n}\nne-card[data-card-name="audio"] {\n  /* stylelint-disable-line */\n}\nne-card[data-card-name="audio"] .ne-card-container {\n  width: 100%;\n}\n.ne-card-audio-error {\n  width: 100%;\n  height: 88px;\n  padding: 24px 20px;\n  background-color: var(--yq-bg-tertiary);\n  border: 1px solid #d8d8d8;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  cursor: default;\n}\n.ne-card-audio-error[data-error-type="copyright"] {\n  justify-content: left;\n  background: var(--yq-bg-primary);\n}\n.ne-card-audio-error .error-icon {\n  width: 28px;\n  height: 28px;\n  color: var(--yq-text-body);\n  font-size: 28px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.ne-card-audio-error .error-icon .ne-card-audio-svg-icon {\n  width: 28px;\n  height: 28px;\n  background-size: 28px;\n}\n.ne-card-audio-error .error-icon .ne-card-audio-icon {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/b9d51288-551f-447e-930f-7e1132a4a90b.svg");\n}\n.ne-card-audio-error .error-icon .ne-card-audio-error-icon {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/dc01c10b-e433-4bb3-bf7e-8b679725b823.svg");\n}\n.ne-card-audio-error .error-message {\n  display: flex;\n  flex-direction: column;\n  line-height: 20px;\n  color: var(--yq-text-disable);\n  margin-left: 16px;\n  font-size: 14px;\n}\n.ne-card-audio-error .uploading-message {\n  display: block;\n  margin-left: 16px;\n  color: var(--yq-text-disable);\n}\n@media only screen and (max-width: 667px) {\n  .ne-card-audio-error .ne-card-audio-svg-icon {\n    width: 21px;\n    height: 21px;\n    background-size: 21px 21px;\n  }\n}\n');var Pn=function(e){d()(n,v.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return g.a.createElement("div",{className:"ne-card-audio-error","data-error-type":this.props.status},this.renderBody())}},{key:"renderBody",value:function(){var e=this.props,t=e.status,n=e.message,r=e.errorMessage;return"copyright"===t?this.renderDeniedTip():g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"error-icon"},g.a.createElement("span",{className:"ne-card-audio-svg-icon ne-card-audio-error-icon"})),g.a.createElement("div",{className:"error-message"},r||n.cantPlay))}},{key:"renderDeniedTip",value:function(){var e=this.props,t=e.audio,n=e.audioURL,r=e.message,o=e.progress;if(!t.id&&!n)return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"error-icon"},g.a.createElement("span",{className:"ne-card-audio-svg-icon ne-card-audio-icon"})),g.a.createElement("div",{className:"uploading-message"},g.a.createElement("span",{className:"ne-card-audio-icon-loading"}),o?"".concat(r.uploading," ").concat(o,"%"):r.uploading));var a;return a=n?g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"audio-info"},g.a.createElement("a",{href:Dn(n),target:"_blank"},t.fileName||r.copyright))):g.a.createElement("div",{className:"query"},g.a.createElement("span",{className:"ne-card-audio-icon-loading"}),r.query),g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"error-icon"},g.a.createElement("span",{className:"ne-card-audio-svg-icon ne-card-audio-icon"})),g.a.createElement("div",{className:"error-message"},a))}}]),n}();a()(Pn,"propTypes",{status:R.a.oneOf(["copyright","error"]).isRequired,message:R.a.object.isRequired,audio:R.a.object,audioURL:R.a.string,progress:R.a.number,errorMessage:R.a.string}),Pe('@keyframes neCardAudioLoading {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n.ne-card-audio-icon-loading {\n  display: inline-block;\n  margin-right: 10px;\n  width: 16px;\n  height: 16px;\n  background: url("https://gw.alipayobjects.com/zos/bmw-prod/0c4efcda-e4e5-4ed7-a83f-3618868d5f65.svg") no-repeat center center;\n  animation: neCardAudioLoading 1000ms linear infinite;\n}\nne-card[data-card-name="audio"] {\n  /* stylelint-disable-line */\n}\nne-card[data-card-name="audio"] .ne-card-container {\n  width: 100%;\n}\n.ne-card-audio {\n  height: 88px;\n  background-color: var(--yq-bg-primary);\n}\n.ne-card-audio audio {\n  display: none;\n}\n');var Mn=function(e){d()(n,v.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return g.a.createElement("div",{className:"ne-card-audio","data-testid":"ne-card-audio"},this.renderBody())}},{key:"renderBody",value:function(){var e=this.props,t=e.status,n=e.uiStatus,r=e.progress,o=e.audioInfo;return"uploading"===t||"transcoding"===n?this.renderLoading(t,o,r,n):"uploaded"===t?this.renderPlayer(this.props.audioInfo):this.renderError()}},{key:"renderError",value:function(){return g.a.createElement(Pn,{status:"error",message:this.props.message,errorMessage:this.props.errorMessage})}},{key:"renderLoading",value:function(e,t,n,r){return g.a.createElement(Tn,{status:e,progress:n,name:t.fileName,url:t.url,uiStatus:r,size:t.fileSize})}},{key:"renderPlayer",value:function(e){return e=e||{},g.a.createElement(An,{key:"url: ".concat(e.url),message:this.props.message,name:e.fileName,url:e.url,size:e.fileSize})}}]),n}();a()(Mn,"propTypes",{status:R.a.oneOf(["error","pending","uploading","transcoding","uploaded"]).isRequired,uiStatus:R.a.oneOf(["transcoding","transcoded"]),progress:R.a.number,audioInfo:R.a.shape({fileName:R.a.string.isRequired,fileSize:R.a.number,url:R.a.string}),message:R.a.object.isRequired,errorMessage:R.a.string});var Nn,In=["abort","canPlay","canPlayThrough","durationChange","emptied","encrypted","ended","error","loadedData","loadedMetadata","loadStart","pause","play","playing","progress","rateChange","seeked","seeking","stalled","suspend","timeUpdate","volumeChange","waiting","enterpictureinpicture","leavepictureinpicture"],Fn=["change","addTrack","removeTrack"],Bn=["audioTracks","autoPlay","buffered","controller","controls","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","videoTracks","volume"],Vn={"zh-cn":{play:"播放",pause:"暂停",mute:"静音",unmute:"关闭静音",volume:"音量",fullscreen:"全屏",seek:"查找进度",captions:"字幕",pictureInPicture:"画中画",playbackRates:"倍速",editorRejectMsg:"该视频疑似含有敏感信息被系统屏蔽，请修正后重新发布",readerRejectMsg:"该视频疑似含有敏感信息被系统屏蔽，无法查看"},en:{play:"Play video",pause:"Pause video",mute:"Mute video",unmute:"Unmute video",volume:"Change volume",fullscreen:"View video fullscreen",seek:"Seek video",captions:"Toggle captions",pictureInPicture:"picture in picture",playbackRates:"rates",editorRejectMsg:"This video may contain sensitive information and be blocked by the system, please modify it and post it inflated",readerRejectMsg:"The video is suspected of containing sensitive information and is blocked by the system and cannot be viewed"}},Hn=function(e){for(var t=e.textTracks,n=0;n<t.length;n++)t[n].mode=t[n].DISABLED||"disabled"},zn=function(e,t){var n=e.textTracks;Hn({textTracks:n}),t.mode=t.SHOWING||"showing"},qn={component:"Time-module_component__2c6Qh",current:"Time-module_current__3L46L",duration:"Time-module_duration__Cf7Hu"};function Un(e){var t=new Date(Date.UTC(1970,1,1,0,0,0,0));return e=isNaN(e)||e>86400?0:Math.floor(e),t.setSeconds(e),t.toISOString().substr(11,8).replace(/^0{1,2}:?0{0,1}/,"")}function Gn(e){var t=e.currentTime,n=e.duration,r=e.className;return g.a.createElement("div",{className:[qn.component,r].join(" "),"data-testid":"time"},g.a.createElement("span",{className:qn.current},Un(t)),"/",g.a.createElement("span",{className:qn.duration},Un(n)))}Pe(".Time-module_component__2c6Qh {\n  padding: 0 4px;\n  height: 24px;\n  color: #fff;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n}\n.Time-module_current__3L46L {\n  margin-right: 5px;\n}\n.Time-module_duration__Cf7Hu {\n  margin-left: 5px;\n}\n"),Gn.propTypes={currentTime:R.a.number,duration:R.a.number,className:R.a.string};var Wn={component:"Seek-module_component__3Jd8h",slider:"Seek-module_slider__2HlHX",track:"Seek-module_track__3HZv9",buffer:"Seek-module_buffer__1fXDL",fill:"Seek-module_fill__36we7",input:"Seek-module_input__3dRuU"};function Yn(e){var t=e.onChange,n=e.percentagePlayed,r=e.percentageBuffered,o=e.currentTime,a=e.className;return g.a.createElement("div",{className:[Wn.component,a].join(" "),"data-testid":"seek"},g.a.createElement("div",{className:Wn.track},g.a.createElement("div",{className:Wn.buffer,style:{width:"".concat(r||0,"%")}})),g.a.createElement(fe.a,{className:Wn.slider,min:0,max:100,step:.1,value:n,tipFormatter:function(){return Un(o)},onChange:t}))}Pe(".Seek-module_component__3Jd8h {\n  position: absolute;\n  top: 14px;\n  width: 100%;\n}\n.Seek-module_component__3Jd8h .Seek-module_slider__2HlHX {\n  margin: 0 24px;\n  width: auto;\n}\n.Seek-module_component__3Jd8h .Seek-module_slider__2HlHX:hover .ant-slider-track {\n  background-color: var(--yq-bg-primary);\n}\n.Seek-module_component__3Jd8h .Seek-module_slider__2HlHX:hover .ant-slider-handle {\n  display: block;\n}\n.Seek-module_component__3Jd8h .Seek-module_slider__2HlHX .ant-slider-rail {\n  display: none;\n}\n.Seek-module_component__3Jd8h .Seek-module_slider__2HlHX .ant-slider-track {\n  background-color: var(--yq-bg-primary);\n}\n.Seek-module_component__3Jd8h .Seek-module_slider__2HlHX .ant-slider-handle {\n  border: none;\n  display: none;\n}\n.Seek-module_track__3HZv9 {\n  position: absolute;\n  top: 50%;\n  left: 24px;\n  right: 24px;\n  height: 4px;\n  transform: translateY(-50%);\n  background-color: rgba(255, 255, 255, 0.3);\n  border-radius: 2px;\n}\n.Seek-module_buffer__1fXDL,\n.Seek-module_fill__36we7 {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  border-radius: 2px;\n}\n.Seek-module_fill__36we7:hover::after {\n  content: '';\n  position: absolute;\n  height: 12px;\n  width: 12px;\n  border-radius: 6px;\n  background-color: var(--yq-bg-primary);\n  top: -4px;\n  right: 0;\n}\n.Seek-module_input__3dRuU {\n  position: absolute;\n  left: 0;\n  bottom: -4px;\n  height: 16px;\n  width: 100%;\n  opacity: 0;\n  cursor: pointer;\n}\n.Seek-module_buffer__1fXDL {\n  background-color: rgba(255, 255, 255, 0.4);\n}\n.Seek-module_fill__36we7 {\n  background: var(--yq-bg-primary);\n}\n"),Yn.propTypes={onChange:R.a.func,percentagePlayed:R.a.number,percentageBuffered:R.a.number,className:R.a.string,currentTime:R.a.number};var $n={component:"Volume-module_component__1UMWx",button:"Volume-module_button__319kv",icon:"Volume-module_icon__38MtQ",slider:"Volume-module_slider__1-joC",track:"Volume-module_track__3i9nD",percent:"Volume-module_percent__3NfBs"};function Kn(e){var t=e.onChange,n=e.onClick,r=e.volume,o=e.muted,a=e.className,i=e.ariaLabelMute,l=e.ariaLabelUnmute,c=o||!r?0:+r,s=o||r<=0;return g.a.createElement("div",{className:[$n.component,a].join(" ")},g.a.createElement("button",{"aria-label":s?l:i,className:$n.button,onClick:n,type:"button"},s?g.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/dba77546-050e-4713-aaec-fb96ea71a3bd.svg",alt:"volumeOff"}):g.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/550c35db-8b72-44f1-84ff-098d1c8ca62c.svg",alt:"volumeUp"})),g.a.createElement("div",{className:$n.slider},g.a.createElement("div",{className:$n.percent},(100*c).toFixed(),"%"),g.a.createElement(fe.a,{className:$n.track,vertical:!0,tooltipVisible:!1,step:1,value:100*c,onChange:function(e){return t(e/100)}})))}Pe(".Volume-module_component__1UMWx {\n  position: relative;\n}\n.Volume-module_button__319kv {\n  width: 48px;\n  height: 24px;\n  background: none;\n  border: 0;\n  color: inherit;\n  font: inherit;\n  line-height: normal;\n  overflow: visible;\n  padding: 0;\n  cursor: pointer;\n}\n.Volume-module_button__319kv:focus {\n  outline: 0;\n}\n.Volume-module_icon__38MtQ {\n  padding: 7px;\n}\n.Volume-module_slider__1-joC {\n  display: none;\n  border-radius: 4px;\n  position: absolute;\n  left: 0;\n  width: 48px;\n  bottom: 100%;\n  height: 140px;\n  background-color: rgba(0, 0, 0, 0.75);\n}\n.Volume-module_component__1UMWx:hover .Volume-module_slider__1-joC {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.Volume-module_component__1UMWx .Volume-module_track__3i9nD {\n  margin-top: 8px;\n  margin-bottom: 12px;\n}\n.Volume-module_component__1UMWx .Volume-module_track__3i9nD:hover .ant-slider-track {\n  background-color: var(--yq-bg-primary);\n}\n.Volume-module_component__1UMWx .Volume-module_track__3i9nD:hover .ant-slider-rail {\n  background-color: #3e3e3e;\n}\n.Volume-module_component__1UMWx .Volume-module_track__3i9nD .ant-slider-track {\n  background-color: var(--yq-bg-primary);\n}\n.Volume-module_component__1UMWx .Volume-module_track__3i9nD .ant-slider-rail {\n  background-color: #3e3e3e;\n}\n.Volume-module_component__1UMWx .Volume-module_track__3i9nD .ant-slider-handle {\n  border: none;\n}\n.Volume-module_percent__3NfBs {\n  padding-top: 8px;\n  text-align: center;\n  color: #fff;\n  height: 28px;\n  line-height: 1;\n}\n@media only screen and (max-width: 360px) {\n  .Volume-module_button__319kv {\n    width: 36px;\n  }\n}\n"),Kn.propTypes={onChange:R.a.func,onClick:R.a.func,volume:R.a.number,muted:R.a.bool,className:R.a.string,ariaLabelMute:R.a.string,ariaLabelUnmute:R.a.string};var Xn={component:"Captions-module_component__1MNq9",button:"Captions-module_button__2Rlyi",icon:"Captions-module_icon__3ZnKs",trackList:"Captions-module_trackList__1-PCs",trackItem:"Captions-module_trackItem__sXDj8",activeTrackItem:"Captions-module_activeTrackItem__Rnmco"};function Zn(e){var t=this,n=e.textTracks,r=e.onClick,o=e.onItemClick,a=e.className,i=e.ariaLabel;return g.a.createElement("div",{className:[Xn.component,a].join(" ")},g.a.createElement("button",{type:"button",onClick:r,"aria-label":i,className:Xn.button},"caption"),g.a.createElement("ul",{className:Xn.trackList},n&&Q()(n).map((function(e){return g.a.createElement("li",{key:e.language,className:e.mode===e.SHOWING||"showing"===e.mode?Xn.activeTrackItem:Xn.trackItem,onClick:o.bind(t,e)},e.label)}))))}Pe(".Captions-module_component__1MNq9 {\n  position: relative;\n}\n.Captions-module_button__2Rlyi {\n  width: 48px;\n  height: 34px;\n  background: none;\n  border: 0;\n  color: inherit;\n  font: inherit;\n  line-height: normal;\n  overflow: visible;\n  padding: 0;\n  cursor: pointer;\n}\n.Captions-module_button__2Rlyi:focus {\n  outline: 0;\n}\n.Captions-module_icon__3ZnKs {\n  padding: 5px;\n}\n.Captions-module_trackList__1-PCs {\n  position: absolute;\n  right: 0;\n  bottom: 100%;\n  display: none;\n  background-color: rgba(0, 0, 0, 0.7);\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  color: #fff;\n}\n.Captions-module_component__1MNq9:hover .Captions-module_trackList__1-PCs {\n  display: block;\n}\n.Captions-module_trackItem__sXDj8 {\n  padding: 7px;\n  cursor: pointer;\n}\n.Captions-module_activeTrackItem__Rnmco,\n.Captions-module_trackItem__sXDj8:hover {\n  background: #000;\n}\n.Captions-module_activeTrackItem__Rnmco {\n  text-decoration: underline;\n}\n"),Zn.propTypes={textTracks:R.a.array,onClick:R.a.func,onItemClick:R.a.func,className:R.a.string,ariaLabel:R.a.string};var Qn={button:"PlayPause-module_button__piYaH",icon:"PlayPause-module_icon__fExKX",tooltip:"PlayPause-module_tooltip__1GIe0"};function Jn(e){var t=e.onClick,n=e.paused,r=e.className,o=e.ariaLabelPlay,a=e.ariaLabelPause,i=e.locale,l=n?g.a.createElement(_.a,{placement:"top",title:g.a.createElement("div",{className:Qn.tooltip},g.a.createElement("div",null,i.play),g.a.createElement("div",null,"space"))},g.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/b805f4eb-90d6-4436-83c9-db779654f71a.svg",alt:"play"})):g.a.createElement(_.a,{placement:"top",title:g.a.createElement("div",{className:Qn.tooltip},g.a.createElement("div",null,i.pause),g.a.createElement("div",null,"space"))},g.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/2ceba78b-7278-4a8b-810b-c4e96a135790.svg",alt:"pause"}));return window.h5&&(l=n?g.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/b805f4eb-90d6-4436-83c9-db779654f71a.svg",alt:"play"}):g.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/2ceba78b-7278-4a8b-810b-c4e96a135790.svg",alt:"pause"})),g.a.createElement("div",{className:[Qn.component,r].join(" "),"data-testid":"playPause"},g.a.createElement("button",{className:Qn.button,onClick:t,"aria-label":n?o:a,type:"button","data-testid":"playPauseButton"},l))}Pe(".PlayPause-module_button__piYaH {\n  width: 48px;\n  height: 24px;\n  background: none;\n  border: 0;\n  color: inherit;\n  font: inherit;\n  line-height: normal;\n  overflow: visible;\n  padding: 0;\n  cursor: pointer;\n}\n.PlayPause-module_button__piYaH:focus {\n  outline: 0;\n}\n.PlayPause-module_icon__fExKX {\n  padding: 5px;\n}\n.PlayPause-module_tooltip__1GIe0 {\n  text-align: center;\n}\n@media only screen and (max-width: 360px) {\n  .PlayPause-module_button__piYaH {\n    width: 36px;\n  }\n}\n"),Jn.propTypes={onClick:R.a.func,paused:R.a.bool,className:R.a.string,ariaLabelPlay:R.a.string,ariaLabelPause:R.a.string,locale:R.a.object};var er={button:"Fullscreen-module_button__U65g3",icon:"Fullscreen-module_icon__1RaUT"};function tr(e){var t=e.onClick,n=e.className,r=e.ariaLabel,o=e.locale;return g.a.createElement("div",{className:[er.component,n].join(" "),"data-testid":"fullscreen"},window.h5?g.a.createElement("button",{type:"button",onClick:t,"aria-label":r,className:er.button},g.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/a7574efd-0464-4f4b-8584-2a88eed310fb.svg",alt:"fullscreen"})):g.a.createElement(_.a,{title:o.fullscreen},g.a.createElement("button",{type:"button",onClick:t,"aria-label":r,className:er.button},g.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/a7574efd-0464-4f4b-8584-2a88eed310fb.svg",alt:"fullscreen"}))))}Pe(".Fullscreen-module_button__U65g3 {\n  width: 48px;\n  height: 24px;\n  background: none;\n  border: 0;\n  color: inherit;\n  font: inherit;\n  line-height: normal;\n  overflow: visible;\n  padding: 0;\n  cursor: pointer;\n}\n.Fullscreen-module_button__U65g3:focus {\n  outline: 0;\n}\n.Fullscreen-module_icon__1RaUT {\n  padding: 5px;\n}\n@media only screen and (max-width: 360px) {\n  .Fullscreen-module_button__U65g3 {\n    width: 36px;\n  }\n}\n"),tr.propTypes={onClick:R.a.func,className:R.a.string,ariaLabel:R.a.string,locale:R.a.object};var nr={component:"Overlay-module_component__11R_9",withBg:"Overlay-module_withBg__1cVst",inner:"Overlay-module_inner__2wc0A",icon:"Overlay-module_icon__1a4aX",auditMessage:"Overlay-module_auditMessage__kzAiC"};function rr(e){var t,n=e.className,r=e.onClick,o=e.error,a=e.paused,i=e.loading,l=e.auditState,c=e.locale,s=window.appData||{},u=s.doc,d=(void 0===u?{}:u).abilities,f=s.me,p=(null==f?void 0:f.isAdmin)||(null==d?void 0:d.update);return 5===l&&(t=p?c.editorRejectMsg:c.readerRejectMsg),g.a.createElement("div",{className:[nr.component,t?nr.withBg:"",n].join(" "),onClick:r,"data-testid":"overlay"},o?g.a.createElement("div",{className:nr.inner},g.a.createElement("img",{className:nr.icon,src:"https://gw.alipayobjects.com/zos/bmw-prod/c327042d-1896-4e99-90a8-6ac99da23f8b.svg",alt:"error"}),t&&g.a.createElement("span",{className:nr.auditMessage,"data-testid":"auditMessage"},t)):i?g.a.createElement("span",{className:nr.inner},g.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/96af2a2a-4bdc-40cc-b1fa-1f72a1e8991e.svg",alt:"loading"})):a?null:void 0)}Pe(".Overlay-module_component__11R_9 {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  color: #fff;\n  text-align: center;\n  cursor: pointer;\n  background-color: rgba(0, 0, 0, 0);\n}\n.Overlay-module_component__11R_9.Overlay-module_withBg__1cVst {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.Overlay-module_inner__2wc0A {\n  display: inline-block;\n  position: absolute;\n  top: 50%;\n  right: 0;\n  left: 50%;\n  width: 60px;\n  height: 60px;\n  transform: translateY(-50%);\n  margin-left: -30px;\n  background-color: rgba(0, 0, 0, 0.7);\n  border-radius: 10px;\n}\n.Overlay-module_icon__1a4aX {\n  position: absolute;\n  top: 50%;\n  right: 0;\n  left: 50%;\n  margin-left: -20px;\n  transform: translateY(-50%);\n  width: 40px;\n  height: 40px;\n}\n.Overlay-module_auditMessage__kzAiC {\n  position: absolute;\n  top: 64px;\n  left: 30px;\n  width: 400px;\n  transform: translateX(-50%);\n  font-size: 14px;\n  text-align: center;\n  line-height: 1.3;\n}\n"),rr.propTypes={className:R.a.string,onClick:R.a.func,error:R.a.bool,paused:R.a.bool,loading:R.a.bool,auditState:R.a.number,locale:R.a.object};var or={button:"PictureInPicture-module_button__oDgxi",icon:"PictureInPicture-module_icon__2-87S"};function ar(e){var t=e.onClick,n=e.className,r=e.ariaLabel,o=e.locale;return g.a.createElement("div",{className:[or.component,n].join(" ")},g.a.createElement(_.a,{title:o.pictureInPicture},g.a.createElement("button",{type:"button",onClick:t,"aria-label":r,className:or.button},g.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/a687e835-ae61-4f61-92da-cc7d09273133.svg",alt:"fullscreen"}))))}Pe(".PictureInPicture-module_button__oDgxi {\n  width: 48px;\n  height: 24px;\n  background: none;\n  border: 0;\n  color: inherit;\n  font: inherit;\n  line-height: normal;\n  overflow: visible;\n  padding: 0;\n  cursor: pointer;\n}\n.PictureInPicture-module_button__oDgxi:focus {\n  outline: 0;\n}\n.PictureInPicture-module_icon__2-87S {\n  padding: 5px;\n}\n@media only screen and (max-width: 360px) {\n  .PictureInPicture-module_button__oDgxi {\n    width: 36px;\n  }\n}\n"),ar.propTypes={onClick:R.a.func,className:R.a.string,ariaLabel:R.a.string,locale:R.a.object};var ir={component:"PlaybackRates-module_component__3rglH",select:"PlaybackRates-module_select__gkSnL",button:"PlaybackRates-module_button__3m5qv",rate:"PlaybackRates-module_rate__1m3QE",selected:"PlaybackRates-module_selected__3r8-j",icon:"PlaybackRates-module_icon__3A4TQ",selections:"PlaybackRates-module_selections__339iE"};Pe(".PlaybackRates-module_component__3rglH {\n  position: relative;\n}\n.PlaybackRates-module_component__3rglH:hover .PlaybackRates-module_select__gkSnL {\n  display: block;\n}\n.PlaybackRates-module_select__gkSnL {\n  display: none;\n  border-radius: 4px;\n  position: absolute;\n  left: -4px;\n  width: 56px;\n  bottom: 100%;\n  padding: 10px;\n  background-color: rgba(0, 0, 0, 0.75);\n}\n.PlaybackRates-module_button__3m5qv {\n  width: 48px;\n  height: 24px;\n  background: none;\n  border: 0;\n  color: #fff;\n  font: inherit;\n  line-height: normal;\n  overflow: visible;\n  padding: 0;\n  cursor: pointer;\n  text-align: center;\n  font-size: 14px;\n}\n.PlaybackRates-module_button__3m5qv.PlaybackRates-module_rate__1m3QE {\n  font-size: 12px;\n  text-align: left;\n}\n.PlaybackRates-module_button__3m5qv.PlaybackRates-module_selected__3r8-j {\n  color: var(--yq-text-link);\n}\n.PlaybackRates-module_button__3m5qv:focus {\n  outline: 0;\n}\n.PlaybackRates-module_icon__3A4TQ {\n  padding: 7px;\n}\n.PlaybackRates-module_selections__339iE {\n  display: flex;\n  flex-direction: column;\n}\n.PlaybackRates-module_selections__339iE .PlaybackRates-module_button__3m5qv {\n  height: 32px;\n}\n@media only screen and (max-width: 360px) {\n  .PlaybackRates-module_button__3m5qv {\n    width: 36px;\n  }\n}\n");var lr=[2,1.5,1.25,1,.75,.5];function cr(e){var t=e.onChange,n=e.playbackRate,r=e.className,o=e.ariaLabel,a=e.locale,i=1==+n,l=g.a.createElement("div",{className:ir.selections},lr.map((function(e){var r=e;return e&&1==="".concat(e).length&&(r="".concat(e,".0")),g.a.createElement("button",{key:e,type:"button",className:[ir.rate,ir.button,e===+n?ir.selected:""].join(" "),onClick:function(){return t(e)}},r,"X")})));return g.a.createElement("div",{className:[ir.component,r].join(" ")},g.a.createElement("button",{"aria-label":o,className:ir.button,type:"button"},i?a.playbackRates:"".concat(n,"X")),g.a.createElement("div",{className:ir.select},l))}cr.propTypes={playbackRate:R.a.number,onChange:R.a.func,className:R.a.string,ariaLabel:R.a.string,locale:R.a.object};var sr,ur,dr={component:"index-module_component__3oiw4",controls:"index-module_controls__1JsEA",paused:"index-module_paused__3p9hL",fadeOut:"index-module_fadeOut__1fhm0",bottom:"index-module_bottom__z1Gae",left:"index-module_left__1snMc",right:"index-module_right__2-8pY"};Pe(".index-module_component__3oiw4 {\n  position: relative;\n  width: 100%;\n  font-size: 0;\n}\n.index-module_controls__1JsEA {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  height: 62px;\n  display: flex;\n  background: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.6));\n  opacity: 0;\n  transition: opacity 0.2s;\n  font-size: 12px;\n}\n.index-module_controls__1JsEA.index-module_paused__3p9hL {\n  opacity: 1;\n}\n.index-module_component__3oiw4:hover .index-module_controls__1JsEA {\n  opacity: 1;\n}\n.index-module_component__3oiw4:hover .index-module_controls__1JsEA.index-module_fadeOut__1fhm0 {\n  opacity: 0;\n}\n.index-module_component__3oiw4:hover .index-module_controls__1JsEA.index-module_paused__3p9hL {\n  opacity: 1;\n}\n.index-module_bottom__z1Gae {\n  margin-top: 22px;\n  padding: 0 24px;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.index-module_bottom__z1Gae .index-module_left__1snMc,\n.index-module_bottom__z1Gae .index-module_right__2-8pY {\n  display: flex;\n  align-items: center;\n}\n.index-module_bottom__z1Gae .index-module_left__1snMc {\n  margin-left: -14px;\n}\n.index-module_bottom__z1Gae .index-module_right__2-8pY {\n  margin-right: -8px;\n}\n");var fr=["controls","children","className","style","lang","state"],pr=["networkState","readyState","error"];function hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hr(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vr(e){var t=Object(v.useState)({}),n=Y()(t,2),o=n[0],a=n[1],i=Object(v.useState)(!1),l=Y()(i,2),c=l[0],s=l[1],u=Object(v.useRef)(),d=Object(v.useRef)(),f=Object(v.useRef)(null),p=e.controls,h=e.children,m=e.className,b=e.style,y=e.lang,w=e.state,k=de()(e,fr),x=function(){document.webkitIsFullScreen&&(f.current&&clearTimeout(f.current),f.current=setTimeout((function(){s(!0)}),5e3))},E=function(){f.current&&clearTimeout(f.current),s(!1)};function C(){a(mr(mr({},o),Bn.reduce((function(e,t){return e[t]=d.current&&d.current[t],e}),{})))}function O(){In.forEach((function(e){d.current.removeEventListener(e.toLowerCase(),C)})),Fn.forEach((function(e){d.current.textTracks.removeEventListener&&d.current.textTracks.removeEventListener(e.toLowerCase(),C)}));var e=d.current.getElementsByTagName("source");e.length&&e[e.length-1].removeEventListener("error",C)}Object(v.useEffect)((function(){return function(){In.forEach((function(e){d.current.addEventListener(e.toLowerCase(),C)})),Fn.forEach((function(e){d.current.textTracks.addEventListener&&d.current.textTracks.addEventListener(e.toLowerCase(),C)}));var e=d.current.getElementsByTagName("source");e.length&&e[e.length-1].addEventListener("error",C)}(),O}),[]),Object(v.useEffect)((function(){d.current.parentElement.addEventListener("fullscreenchange",(function(){document.webkitIsFullScreen?x():(d.current.style.height=null,E())}))}),[]);var _,S,R,j,A=function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.requestFullScreen=e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen,document.exitFullscreen=document.exitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen;var n=document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;n===e?(document.exitFullscreen(),t.style.height=null):t.webkitEnterFullscreen&&(r.ua.ios||r.ua.safari)?t.webkitEnterFullscreen():(e.requestFullScreen(),t.style&&(t.style.cssText="height: 100% !important"))}(d.current.parentElement,d.current)},T=function(){return e=d.current,n=(t=o).volume,void(t.muted||n<=0?(n<=0&&(e.volume=1),e.muted=!1):e.muted=!0);var e,t,n},L=function(){return function(e){var t=e.textTracks,n=Q()(t).filter((function(e){return e.mode===e.SHOWING||"showing"===e.mode}))[0];n?(Hn({textTracks:t}),Nn=n):zn({textTracks:t},Nn||t[0])}(o)},D=function(){return e=d.current,void(o.paused?e.play():e.pause());var e},P=function(){return function(e){try{e!==document.pictureInPictureElement?e.requestPictureInPicture():document.exitPictureInPicture()}catch(e){console.error("toggle picture in picture error:",e)}}(d.current)},M=function(e){return zn(o,e)},N=function(e){return function(e,t){e.playbackRate=t}(d.current,e)},I=function(e){return function(e,t,n){e.muted=!1,e.volume=n}(d.current,0,e)},F=o.networkState,B=o.readyState,V=o.error,H=de()(o,pr),z=mr({readyState:B,networkState:F,error:V||3===F,loading:B<(/iPad|iPhone|iPod/.test(navigator.userAgent)?1:4),percentagePlayed:(j=H,j.currentTime/j.duration*100),percentageBuffered:(_=H,S=_.buffered,R=_.duration,S&&S.length&&S.end(S.length-1)/R*100||0)},H),q=y&&y.startsWith("en")?Vn.en:Vn["zh-cn"];function U(e){return e&&e.map?e.map((function(e,t){switch(e){case"PlayPause":return g.a.createElement(Jn,ie()({key:t,ariaLabelPlay:q.play,ariaLabelPause:q.pause,locale:q,onClick:D},z));case"Fullscreen":return g.a.createElement(tr,ie()({key:t,ariaLabel:q.fullscreen,onClick:A,locale:q},z));case"Time":return g.a.createElement(Gn,ie()({key:t},z));case"Volume":return window.h5?null:g.a.createElement(Kn,ie()({key:t,onClick:T,onChange:I,ariaLabelMute:q.mute,ariaLabelUnmute:q.unmute,ariaLabelVolume:q.volume},z));case"Captions":return o.textTracks&&o.textTracks.length?g.a.createElement(Zn,ie()({key:t,onClick:L,ariaLabel:q.captions,onItemClick:M},z)):null;case"PictureInPicture":return"pictureInPictureEnabled"in document?g.a.createElement(ar,ie()({key:t,onClick:P,ariaLabel:q.pip,locale:q},z)):null;case"PlaybackRates":return g.a.createElement(cr,ie()({key:t,onChange:N,ariaLabel:q.playbackRate},z,{locale:q}));default:return null}})):null}return g.a.createElement("div",{ref:u,className:[dr.component,m].join(" "),style:b},g.a.createElement("video",ie()({ref:d,className:dr.video},k),h),g.a.createElement(rr,ie()({onClick:D,auditState:w,locale:q},z)),p&&!z.error?g.a.createElement("div",{onMouseEnter:E,onMouseLeave:x,className:[dr.controls,o.paused?dr.paused:"",c?dr.fadeOut:""].join(" "),"data-testid":"controls"},g.a.createElement(Yn,ie()({ariaLabel:q.seek,className:dr.seek,onChange:function(e){return function(e,t,n){var r=Math.floor(+n*t.duration)/100;!isNaN(r)&&Number.isFinite(r)&&(e.currentTime=r)}(d.current,o,e)}},z)),g.a.createElement("div",{className:dr.bottom},g.a.createElement("div",{className:dr.left},U(p.left)),g.a.createElement("div",{className:dr.right},U(p.right)))):null)}function gr(e,t,n,r){for(var o=arguments.length,a=new Array(o>4?o-4:0),i=4;i<o;i++)a[i-4]=arguments[i];var l=e.destroy,c=function(){r.apply(void 0,arguments)};t.addEventListener.apply(t,[n,c].concat(a)),e.destroy=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];l.apply.apply(l,[e].concat(o)),t.removeEventListener.apply(t,[n,c].concat(a))}}vr.defaultProps={controls:{left:["PlayPause","Time"],right:["PlaybackRates","Volume","PictureInPicture","Fullscreen"]}},vr.defaultProps={lang:null===(sr=window)||void 0===sr||null===(ur=sr.appData)||void 0===ur?void 0:ur.locale},vr.propTypes={controls:R.a.object,children:R.a.node,className:R.a.string,style:R.a.object,lang:R.a.string,state:R.a.number},Pe(".lake-crop-box {\n  pointer-events: none;\n  touch-action: none;\n  z-index: 3;\n  position: absolute;\n  top: -4px;\n  left: -4px;\n  right: -4px;\n  bottom: -4px;\n}\n.lake-crop-box .ne-crop-mask {\n  fill: #000;\n  opacity: 0.4;\n  cursor: default;\n  pointer-events: all;\n  user-select: none;\n}\n.lake-crop-box .ne-crop-tools {\n  pointer-events: all;\n  fill: #1890ff;\n  stroke: #fff;\n}\n.lake-crop-box .ne-crop-mobile-tools {\n  pointer-events: all;\n  fill: none;\n}\n.lake-crop-box .ne-crop-move {\n  cursor: default;\n  fill: none;\n  stroke: #1890ff;\n  stroke-dasharray: 2px 2px;\n}\n.lake-crop-box .ne-crop-move.movable {\n  cursor: move;\n}\n.lake-crop-box .ne-crop-n {\n  cursor: ns-resize;\n}\n.lake-crop-box .ne-crop-s {\n  cursor: ns-resize;\n}\n.lake-crop-box .ne-crop-e {\n  cursor: ew-resize;\n}\n.lake-crop-box .ne-crop-w {\n  cursor: ew-resize;\n}\n.lake-crop-box .ne-crop-nw {\n  cursor: nwse-resize;\n}\n.lake-crop-box .ne-crop-ne {\n  cursor: nesw-resize;\n}\n.lake-crop-box .ne-crop-sw {\n  cursor: nesw-resize;\n}\n.lake-crop-box .ne-crop-se {\n  cursor: nwse-resize;\n}\n");var br=[0,0,1,1],yr={nw:[0,-1.5,-1.5,10.5,10.5],ne:[90,-19.5,-1.5,10.5,10.5],se:[180,-19.5,-19.5,10.5,10.5],sw:[270,-1.5,-19.5,10.5,10.5],n:[0,-17,-1.5,17,1.5],s:[0,-17,-1.5,17,1.5],w:[90,-17,-34,1.5,17],e:[90,-17,-34,1.5,17]},wr={nw:[0,1],ne:[2,1],se:[2,3],sw:[0,3],n:[-1,1],s:[-1,3],w:[0,-1],e:[2,-1]},kr=function(e){d()(n,v.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),a()(L()(e),"state",{crop:e.props.defaultCrop}),a()(L()(e),"_handleMoveMouseDown",(function(t){var n=(e.props.crop||e.state.crop).slice(0);Er(t,(function(t,r){e._moveByXY(n,t,r)}),e._handleEmitChange)})),a()(L()(e),"_handleCornerMouseDown",(function(t){var n=e.props,r=n.width,o=n.height,a=(n.crop||e.state.crop).slice(0),i=t.target,l=i.getAttribute("face"),c=Y()(yr[l],3),s=c[1],u=c[2],d=Y()(wr[l],2),f=d[0],p=d[1],h=+i.getAttribute("x"),m=+i.getAttribute("y");Er(t,(function(t,n){var i=a.slice(0),l=(i[2]-i[0])/(i[3]-i[1]);-1!==f&&(a[f]=_r((h+t-s)/r),(a[2]-a[0])*r<28&&(0===f?a[0]=_r(a[2]-28/r):a[2]=_r(a[0]+28/r))),-1!==p&&(a[p]=_r((m+n-u)/o),(a[3]-a[1])*o<28&&(1===p?a[1]=_r(a[3]-28/o):a[3]=_r(a[1]+28/o))),!e.props.shouldKeepRadio()||(a[2]-a[0])/(a[3]-a[1])===l||(Or(a,f,p,l),Cr(a,r,o))?e.props.onChange(a):i.forEach((function(e,t){a[t]=e}))}),e._handleEmitChange)})),e}return s()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,o=t.crop,a=t.className,i=t.style,l=o||this.state.crop,c=function(e){return[[e[0],e[1],"nw"],[e[0]/2+e[2]/2,e[1],"n"],[e[2],e[1],"ne"],[e[0],e[1]/2+e[3]/2,"w"],[e[2],e[1]/2+e[3]/2,"e"],[e[0],e[3],"sw"],[e[0]/2+e[2]/2,e[3],"s"],[e[2],e[3],"se"]]}(l),s=n*(l[2]-l[0])>76,u=r*(l[3]-l[1])>76;return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:P()("lake-crop-box",a),style:i},g.a.createElement("svg",{width:n+8,height:r+8},g.a.createElement("defs",null,g.a.createElement("g",{id:"corner"},g.a.createElement("path",{d:"M18.5,-0.5 C19.0522847,-0.5 19.5522847,-0.276142375 19.9142136,0.0857864376 C20.2761424,0.44771525 20.5,0.94771525 20.5,1.5 C20.5,2.05228475 20.2761424,2.55228475 19.9142136,2.91421356 C19.5522847,3.27614237 19.0522847,3.5 18.5,3.5 L18.5,3.5 L3.5,3.5 L3.5,18.5 C3.5,19.0522847 3.27614237,19.5522847 2.91421356,19.9142136 C2.55228475,20.2761424 2.05228475,20.5 1.5,20.5 C0.94771525,20.5 0.44771525,20.2761424 0.0857864376,19.9142136 C-0.276142375,19.5522847 -0.5,19.0522847 -0.5,18.5 L-0.5,18.5 L-0.5,3 C-0.5,2.07071993 -0.137819527,1.2260429 0.453035214,0.599369341 C1.05065491,-0.0344792808 1.88229773,-0.445093206 2.80972104,-0.494902783 L2.80972104,-0.494902783 Z"})),g.a.createElement("g",{id:"handle"},g.a.createElement("rect",{width:"34",height:"3",rx:"1.5"}))),g.a.createElement("g",{transform:"translate(".concat(4,", ").concat(4,")")},g.a.createElement("path",{className:"ne-crop-mask",fillRule:"nonzero",d:"M0,0 h".concat(n," v").concat(r," h").concat(-n," z\n            M").concat(n*l[0],",").concat(r*l[1]," v").concat(r*(l[3]-l[1]),"\n            h").concat(n*(l[2]-l[0])," v").concat(r*(l[1]-l[3])," z")}),g.a.createElement("path",{className:"ne-crop-tools ne-crop-move ".concat(xr(l)?"":"movable"),d:"M".concat(n*l[0],",").concat(r*l[1]," v").concat(r*(l[3]-l[1]),"\n            h").concat(n*(l[2]-l[0])," v").concat(r*(l[1]-l[3])," z"),onMouseDown:this._handleMoveMouseDown,onTouchStart:this._handleMoveMouseDown}),c.map((function(t){var o=Y()(t,3),a=o[0],i=o[1],l=o[2];if(!s&&["n","s"].includes(l))return null;if(!u&&["e","w"].includes(l))return null;var c=l.length<2?"#handle":"#corner",d=Y()(yr[l],5),f=d[0],p=d[1],h=d[2],m=d[3],v=d[4],b=n*a+p,y=r*i+h,w=g.a.createElement("use",{key:l,face:l,x:b,y:y,transform:"rotate(".concat(f," ").concat(b+m," ").concat(y+v,")"),xlinkHref:c,className:"ne-crop-tools ne-crop-".concat(l),onMouseDown:e._handleCornerMouseDown,onTouchStart:e._handleCornerMouseDown});return"#corner"===c?g.a.createElement(g.a.Fragment,null,g.a.createElement("rect",{key:"rect-"+l,className:"ne-crop-mobile-tools ne-crop-".concat(l),face:l,x:b,y:y,width:21,height:21,onMouseDown:e._handleCornerMouseDown,onTouchStart:e._handleCornerMouseDown}),w):w}))))))}},{key:"_handleCropChange",value:function(e){this.props.crop||this.setState({crop:e}),this.props.onChange(e)}},{key:"_moveByXY",value:function(e,t,n){var r=this.props,o=r.width,a=r.height,i=(r.crop||this.state.crop).slice(0),l=t/o,c=n/a;e[0]+l<0?l=-e[0]:e[2]+l>1&&(l=1-e[2]),e[1]+c<0?c=-e[1]:e[3]+c>1&&(c=1-e[3]),i[0]=e[0]+l,i[1]=e[1]+c,i[2]=e[2]+l,i[3]=e[3]+c,this.props.onChange(i)}}]),n}();function xr(e){return e.every((function(e,t){return e-br[t]<1e-7}))}function Er(e,t,n){e.preventDefault(),e.stopPropagation();var r=-1,o=e.clientX,a=e.clientY;e.changedTouches&&e.changedTouches[0]&&(o=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY,r=e.changedTouches[0].identifier);var i={destroy:function(){}},l=function(e){if(e.preventDefault(),e.stopPropagation(),-1===r)t(e.clientX-o,e.clientY-a);else for(var n=0;n<e.changedTouches.length;n++){var i=e.changedTouches[n];if(i.identifier===r){t(i.clientX-o,i.clientY-a);break}}},c=function(e){if(e.preventDefault(),e.stopPropagation(),-1!==r)for(var l=0;l<e.changedTouches.length;l++){var c=e.changedTouches[l];if(c.identifier===r){t(c.clientX-o,c.clientY-a);break}}else t(e.clientX-o,e.clientY-a);null==n||n(),i.destroy()};gr(i,document,"mousemove",l,!1),gr(i,document,"touchmove",l,{passive:!1}),gr(i,document,"mouseup",c,!1),gr(i,document,"touchend",c,{passive:!1})}function Cr(e,t,n){return!(e[0]<0||e[1]<0||e[2]>1||e[3]>1||(e[3]-e[1])*n<28||(e[2]-e[0])*t<28)}function Or(e,t,n,r){if(-1===t){var o=(e[0]+e[2])/2,a=(e[3]-e[1])/2;e[0]=o-a*r,e[2]=o+a*r;var i=Math.max(0-e[0],e[2]-1,0);return i>0&&(e[0]+=i,e[2]-=i,1===n?e[1]+=i/r*2:e[3]-=i/r*2),e}if(-1===n){var l=(e[1]+e[3])/2,c=(e[2]-e[0])/2;e[1]=l-c/r,e[3]=l+c/r;var s=Math.max(0-e[1],e[3]-1,0);return s>0&&(e[1]+=s,e[3]-=s,0===t?e[0]+=s*r*2:e[2]-=s*r*2),e}var u=e[3]-e[1],d=e[2]-e[0];return d>u*r?2===t?e[2]=e[0]+u*r:e[0]=e[2]-u*r:3===n?e[3]=e[1]+d/r:e[1]=e[3]-d/r,e}function _r(e){return Math.min(Math.max(0,e),1)}a()(kr,"propTypes",{width:R.a.number.isRequired,height:R.a.number.isRequired,defaultCrop:R.a.arrayOf(R.a.number),crop:R.a.arrayOf(R.a.number),className:R.a.string,style:R.a.object,shouldKeepRadio:R.a.func,onChange:R.a.func}),a()(kr,"defaultProps",{defaultCrop:br,onChange:function(){},shouldKeepRadio:function(){return!1}});var Sr=ve()("lake:outline"),Rr={sup:1,sub:1};function jr(e){if(e.nodeType!==Node.ELEMENT_NODE)return null;var t=e.nodeName.toLowerCase();return Rr[t]?t:null}var Ar={_validTags:{h1:1,h2:2,h3:3,h4:4,h5:5,h6:6,"ne-h1":1,"ne-h2":2,"ne-h3":3,"ne-h4":4,"ne-h5":5,"ne-h6":6},_isHeadingNode:function(e){if(1!==e.nodeType)return!1;if(!e.tagName)return!1;var t=e.tagName.toLocaleLowerCase();return!!this._validTags[t]},_findHeadingNodes:function(e){var t=e.childNodes;if(!t)return[];for(var n=[],r=0,o=t.length;r<o;r++){var a=t[r];this._isHeadingNode(a)&&n.push(a)}return n},_fixDuplicatedHeading:function(e){var t={};e.forEach((function(e){var n=e.id;if(t.hasOwnProperty(n)){var r=t[n];e.id+="-".concat(r),e.domNode.id=e.id,t[n]=r+1}else t[n]=1}))},_getLevel:function(e){return this._validTags[e.toLowerCase()]||-1},normalize:function(e){var t=this;if(0===(e=e||[]).length)return[];var n=new he.a,r=[];e.forEach((function(e){var o=function(e){var t=[],n=[],r=document.createElement("span");return function e(t,n,r){if(n=n||function(){return!0},t&&n(t)){var o=(r=r||{}).open||function(){},a=r.close||function(){};o(t);var i=t.childNodes;if(i)for(var l=0,c=i.length;l<c;l++)e(i[l],n,r);a(t)}}(e,(function(e){return!e.getAttribute||!e.getAttribute("data-lake-card")}),{open:function(e){if(e.nodeType===Node.TEXT_NODE){var o=e.textContent;t.push(o),r.innerText=o,n.push(r.innerHTML)}else{var a=jr(e);null!==a&&n.push("<".concat(a,">"))}},close:function(e){var t=jr(e);null!==t&&n.push("</".concat(t,">"))}}),{text:t.join(""),html:n.join("")}}(e),a=o.text,i=o.html;(a=a.trim())&&(e.id||(e.id=n.id(a)),r.push({id:e.id,text:a,html:i,level:t._getLevel(e.tagName),depth:-1,domNode:e}))}));var o=[];r.forEach((function(e){o.indexOf(e.level)<0&&o.push(e.level)})),o.sort();var a={};return o.forEach((function(e,t){a[e]=t+1})),r.forEach((function(e){e.depth=a[e.level]})),r},extractFromDocContent:function(e){if(!e)return[];var t=(new DOMParser).parseFromString(e,"text/html").body;if(!t)return[];try{var n=this._findHeadingNodes(t);Sr("headings:",n);var r=Ar.normalize(n);return this._fixDuplicatedHeading(r),r.forEach((function(e){delete e.domNode})),r}catch(e){return Sr("error",e),[]}}},Tr="ctoken",Lr=Array.isArray;function Dr(e){for(var t=e.document.cookie.split(/;\s/g),n=0,r=t.length;n<r;n++){var o=t[n].match(/([^=]+)=/i);if(o&&"yuque_ctoken"===o[1])return t[n].substring(o[1].length+1)}}function Pr(e,t,n,r){var o,a,i,l=/\[\]$/;if(Lr(t))for(a=0;t&&a<t.length;a++)i=t[a],n||l.test(e)?r(e,i):Pr(e+"["+("object"===O()(i)?a:"")+"]",i,n,r);else if(t&&"[object Object]"===t.toString())for(o in t)t.hasOwnProperty(o)&&Pr(e+"["+o+"]",t[o],n,r);else r(e,t)}function Mr(e,t){return e+(/\?/.test(e)?"&":"?")+t}function Nr(e,t){var n,r,o=t||!1,a=[],i=encodeURIComponent;function l(e,t){var n=t;"function"==typeof t?n=t():null==t&&(n=""),a[a.length]=i(e)+"="+i(n)}if(Lr(e))for(r=0;e&&r<e.length;r++)l(e[r].name,e[r].value);else for(n in e)e.hasOwnProperty(n)&&Pr(n,e[n],o,l);return a.join("&").replace(/%20/g,"+")}function Ir(e){return"undefined"!=typeof FormData&&e instanceof FormData}function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vr,Hr=window,zr=document,qr=document.head,Ur=/^http/,Gr=/(^\w+):\/\//,Wr=/^20\d$/,Yr="reqwest_"+ +new Date,$r=0;function Kr(){}var Xr={traditional:!1,contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",withCredentials:!0,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},dataFilter:function(e){return e}};function Zr(e){Vr=e}function Qr(e,t){var n=this.o,r=(n.method||"GET").toUpperCase(),o="string"==typeof n?n:n.url,a=!1!==n.processData&&n.data&&"string"!=typeof n.data&&!Ir(n.data)?Nr(n.data,n.traditional||Xr.traditional):n.data||null;if("jsonp"!==n.type&&"GET"!==r||!a||(o=Mr(o,a),a=null),"jsonp"===n.type)return function(e,t,n,r){var o=r,a=$r++,i=e.jsonpCallback||"callback",l=e.jsonpCallbackName||function(e){return Yr+"_"+e}(a),c=new RegExp("((^|\\?|&)"+i+")=([^&]+)"),s=o.match(c),u=zr.createElement("script"),d=0;return s?"?"===s[3]?o=o.replace(c,"$1="+l):l=s[3]:o=Mr(o,i+"="+l),Hr[l]=Zr,u.type="text/javascript",u.src=o,u.async=!0,u.onload=u.onreadystatechange=function(){if(u.readyState&&"complete"!==u.readyState&&"loaded"!==u.readyState||d)return!1;u.onload=u.onreadystatechange=null,u.onclick&&u.onclick(),t(Vr),Vr=void 0,qr.removeChild(u),d=1},qr.appendChild(u),{abort:function(){u.onload=u.onreadystatechange=null,n("Request is aborted: timeout"),Vr=void 0,qr.removeChild(u),d=1}}}(n,e,t,o);var i=n.xhr&&n.xhr(n)||function(e){var t=new XMLHttpRequest;if(!0===e.crossOrigin&&!("withCredentials"in t))throw new Error("Browser does not support cross-origin requests");return t}(n);return n.timeout&&(i.timeout=n.timeout),i.open(r,o,!1!==n.async),function(e,t){var n,r=t.headers||{};for(n in r.Accept=r.Accept||Xr.accept[t.type]||Xr.accept["*"],t.crossOrigin||r["X-Requested-With"]||(r["X-Requested-With"]=Xr.requestedWith),r["Content-Type"]||Ir(t.data)||(r["Content-Type"]=t.contentType||Xr.contentType),r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}(i,n),function(e,t){void 0!==t.withCredentials&&void 0!==e.withCredentials&&(e.withCredentials=!!t.withCredentials)}(i,n),i.onreadystatechange=function(e,t,n){return function(){return e._aborted?n("Request is aborted",e.request):e._timedOut?n("Request is aborted: timeout",e.request):void(e.request&&4===e.request.readyState&&(e.request.onreadystatechange=Kr,function(e){var t=Gr.exec(e.url),n="";return t&&(n=t[1]),n||(n=(e.o.context||Hr).location.protocol),Ur.test(n)?Wr.test(e.request.status):!!e.request.response}(e)?t(e.request):n(e.request.statusText,e.request)))}}(this,e,t),n.before&&n.before(i),i.send(a),i}function Jr(){this.initPromise()}function eo(){return new Jr}function to(e){var t=this;this.url="string"==typeof e?e:e.url,this.timeout&&clearTimeout(this.timeout),this.timeout=null,e.timeout&&(this.timeout=setTimeout((function(){t._timedOut=!0,t.request.abort()}),e.timeout)),this.request=Qr.call(this,(function(e){t.triggerSuccess(e)}),(function(e,n){t.triggerError(e,n)}))}function no(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Jr.prototype={triggerSuccess:function(e){var t=this.o,n=t.type,r=(t.dataFilter||Xr.dataFilter)(e.responseText,n);if(n||(n=e&&function(e){if(e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}(e.getResponseHeader("Content-Type"))),e="jsonp"!==n?this.request:e,r)switch(n){case"json":try{e=Hr.JSON.parse(r)}catch(t){return this.triggerError("Could not parse JSON in response",e)}break;case"html":e=r;break;case"xml":e=e.responseXML&&e.responseXML.parseError&&e.responseXML.parseError.errorCode&&e.responseXML.parseError.reason?null:e.responseXML}t.success&&t.success(e),this.triggerComplete(e),this.__resolve(e)},triggerError:function(e,t){var n=this.o,r=new Error(e);r.xhr=t,n.error&&n.error(r),this.triggerComplete(r),this.__reject(r)},triggerComplete:function(e){var t=this.o;t.timeout&&clearTimeout(this.timeout),this.timeout=null,t.complete&&t.complete(e)},initPromise:function(){var e=this;e.promise=new Promise((function(t,n){e.__resolve=t,e.__reject=n}))},abort:function(){this._aborted=!0,this.request.abort()},retry:function(){this.initPromise(),to.call(this,this.o)},then:function(e,t){return this.promise.then(e,t)},always:function(e){return this.promise.then(e,e)},fail:function(e){return this.promise.then(void 0,e)},catch:function(e){return this.fail(e)},setup:function(e){this.o=Br(Br({},Xr),e)},start:function(e){this.setup(e),to.call(this,this.o)}},eo.ajaxSetup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)e.hasOwnProperty(t)&&Xr.hasOwnProperty(t)&&(Xr[t]=e[t])};var oo="_input_charset",ao="utf-8",io=ro({withCToken:!0,withInputCharset:!0,cache:!0},window.__ajax_global_setup_options);function lo(e,t){var n;e=(n="string"==typeof e?{url:e,success:t}:e).url;var r=eo();return e.startsWith("//")&&(e=location.protocol+e),function(e){return!/^https?:\/\/\w+\.alipayobjects\.com\//g.test(e)}(e)&&(n=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=ro({},e),o=io.cache||"post"===r.method,i=Dr(n),l=io.withCToken,c=io.withInputCharset,s=io.withReferrerParam;if(r.data=r.data||{},Array.isArray(r.data)?(t=[],l&&i&&t.push({name:Tr,value:encodeURIComponent(i)}),c&&t.push({name:oo,value:ao}),o||t.push({name:"_ts",value:Date.now()}),r.data=r.data.concat(t)):"string"==typeof r.data?(c&&-1===r.data.indexOf(oo)&&(r.data+="&_input_charset=utf-8"),l&&i&&-1===r.data.indexOf(Tr)&&(r.data+="&ctoken="+encodeURIComponent(i)),o||(r.data+="&_ts="+Date.now())):Ir(r.data)?(c&&!r.data.get(oo)&&r.data.append(oo,ao),r.url&&l&&i&&(r.url=Mr(r.url,Nr(a()({},Tr,i))))):(c&&(r.data[oo]=ao),o||(r.data._ts=Date.now()),l&&i&&!r.data.ctoken&&(r.data.ctoken=i)),r.url){var u=navigator.userAgent;if(window.appData&&window.appData.isServicifyRequest){r.url.startsWith("/")&&(r.url=document.location.origin+r.url);var d=new URL(r.url);d.searchParams.append("sign_url",encodeURIComponent(window.appData.href)),r.url=d.toString()}else if(s&&u.includes("Safari")&&!u.includes("Chrome")){var f=new URL(r.url),p=new URL(document.location.href);f.origin!==p.origin&&(f.searchParams.set("referer",p.pathname+p.search),r.url=f.toString())}}return r}(n)),r.start(n),r}function co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?co(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}lo.ajaxSetup=function(e){for(var t in e)e.hasOwnProperty(t)&&io.hasOwnProperty(t)&&(io[t]=e[t]);eo.ajaxSetup(e)},lo.ajaxSetup({withInputCharset:!1});var uo=new(function(){function e(t){l()(this,e),this.options=so({ajaxOptions:{progress:function(){},error:function(){},success:function(){},data:{},method:"post",url:""}},t)}return s()(e,[{key:"ajax",value:function(e){var t=(e=so(so({},this.options.ajaxOptions),e)).success,n=e.error;if(!e.url)return!!n&&n(new Error("request options.url missing"));var r=new Promise((function(r){e.success=function(e){t(e),r(e)},e.error=function(e){n(e),r(e)}}));return{xhr:lo(e),promise:r}}}]),e}()),fo=function(e){return uo.ajax(e)},po=function(){function e(){l()(this,e)}return s()(e,null,[{key:"check",value:function(e,t){if(!window.__member_message_ref)return null;var n;switch(e){case"image":n="max_single_image_size";break;case"video":n="max_single_video_size";break;default:n="max_single_file_size"}try{var r=window.__member_message_ref.current.getMessageWithFile({filesize:t},n)||null;if(r)return{level:r.level||"error",msg:r.msg||"unknown error",alwaysOpen:!!r.alwaysOpen,callback:r.callback||function(){},result:r}}catch(e){return console.log(e),null}return null}},{key:"getMessageByCode",value:function(e,t){if(!window.__member_message_ref)return null;try{var n=window.__member_message_ref.current.getMessage(e,{},t)||null;if(n)return{level:n.level||"error",msg:n.msg||"unknown error",alwaysOpen:!!n.alwaysOpen,callback:n.callback||function(){}}}catch(e){return console.log(e),null}return null}}]),e}();function ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vo={parallel:5},go=function(e){d()(n,A.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this),a()(L()(r),"_options",{}),a()(L()(r),"_taskIds",new Set),a()(L()(r),"_completedTasks",[]),a()(L()(r),"_runningTasks",[]),a()(L()(r),"_pendingTasks",[]),a()(L()(r),"_failureTasks",[]),r._options=mo(mo({},vo),e),r}return s()(n,[{key:"hasTask",value:function(e){return this._taskIds.has(e)}},{key:"isCompleted",value:function(){return this._pendingTasks.length+this._runningTasks.length===0}},{key:"addTask",value:function(e){this._taskIds.add(e.id),this._pendingTasks.push(e),this._checkFinish()}},{key:"_checkFinish",value:function(){var e=this._pendingTasks.length,t=this._runningTasks.length;0!==e||0!==t?e>0&&t<this._options.parallel&&this._runTask(this._pendingTasks.shift()):this._finish()}},{key:"_runTask",value:function(e){var t=this;this._runningTasks.push(e),this._updateProgress(),ye()(ke.a.mark((function n(){return ke.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.run();case 2:n.sent.success?t._handleSuccess(e):t._handleFailure(e);case 4:case"end":return n.stop()}}),n)})))()}},{key:"_updateProgress",value:function(){var e=this._completedTasks.length,t=this._runningTasks.length,n=this._pendingTasks.length,r=this._failureTasks.length;this.emit("progress",{completed:e,running:t,pending:n,failure:r,total:e+t+n})}},{key:"_handleSuccess",value:function(e){var t=this._runningTasks.indexOf(e);-1!==t&&this._runningTasks.splice(t,1),this._completedTasks.push(e),this._updateProgress(),this._checkFinish()}},{key:"_handleFailure",value:function(e){var t=this._runningTasks.indexOf(e);-1!==t&&this._runningTasks.splice(t,1),this._failureTasks.push(e),this._updateProgress(),this._checkFinish()}},{key:"_finish",value:function(){this.emit("finished"),this._destroy()}},{key:"_destroy",value:function(){this.removeAllListeners()}}]),n}();var bo=function(e){d()(n,A.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this),a()(L()(r),"_thread",null),a()(L()(r),"_threadOptions",null),r._threadOptions=e,r}return s()(n,[{key:"hasTask",value:function(e){return!!this._thread&&this._thread.hasTask(e)}},{key:"addTask",value:function(e){var t=this;return this._thread||(this._thread=this._createThread()),Promise.resolve().then((function(){t._thread.addTask(e)})),e}},{key:"isCompleted",value:function(){return!this._thread||this._thread.isCompleted()}},{key:"_createThread",value:function(){var e=this,t=new go(this._threadOptions);return t.on("start",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["start"].concat(n))})),t.on("progress",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["progress"].concat(n))})),t.on("finished",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["finished"].concat(n)),e._thread=null})),t}}]),n}();var yo=function(e){d()(r,A.a);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(r);function r(){var e;l()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o)))._id=Ht(24),e}return s()(r,[{key:"run",value:(t=ye()(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),r}();function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xo=function(e){d()(r,yo);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}(r);function r(e,t){var o;return l()(this,r),o=n.call(this),a()(L()(o),"_id",null),a()(L()(o),"_remoteURL",null),a()(L()(o),"_file",null),o._remoteURL=e,o._file=t,o}return s()(r,[{key:"run",value:(t=ye()(ke.a.mark((function e(){var t,n,r=this;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._file,(n=new FormData).append("file",t,t.name),e.abrupt("return",new Promise((function(e){r.emit("start"),fo({method:"post",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var t=parseInt(e.loaded/e.total*100,10);r.emit("progress",t)}}),!1),e},url:r._remoteURL,data:n,dataType:"json",success:function(t){t=ko({success:!0},t),r.emit("success",t),e(t)},error:function(t){var n=t&&400===t.status&&t.code&&po.getMessageByCode(t.code,t);t=ko(ko({success:!1},t),{},{fileSizeCheckResult:n}),r.emit("error",t),e(t)},processData:!0})})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(),Eo=function(){function e(){l()(this,e),a()(this,"needCloseCount",0)}return s()(e,[{key:"show",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r||(this.needCloseCount++,!(this.needCloseCount>e.MaxCloseMessageCount)))return"error"===t||"warning"===t?ge.a[t](n,r?void 0:0):void 0}}]),e}();function Co(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,t=new URLSearchParams(e),n=document.cookie.match(/(?:^|; ?)lang=([^;]+)(?:;|$)/),r=n?n[1]:t.get("language");return"en-us"===r?"en-us":"zh-cn"}a()(Eo,"MaxCloseMessageCount",3);var Oo=Object.freeze({__proto__:null,getLocale:Co}),_o={locale:Co(),translations:{"en-us":{"图片上传失败":"Image upload failed","图片上传超时":"Image upload timed out","上传图片前置校验失败":"Upload image pre-verification failed","请设置文档 ID ！":"Please set the document ID!"}}};function So(e,t){if(!e)return e;var n=_o.locale,r=_o.translations[n]||{};return"zh-cn"!==n&&(e=r[e]||e),e.replace(/\{([^\}]+)\}/g,(function(e,n){return t[n]||n}))}function Ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ro(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ao=new Eo,To=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l()(this,e);var n=window.__global_uploader_options||{};this.searchParams=new URLSearchParams(window.location.search);var r=this._getCustom();if(Object.assign(this,jo(jo(jo({docId:null,host:"",imageBaseUrl:"/api/upload/attach",imageAction:null},n),r),t)),this.uploadManager=new bo,!this.docId)throw new Error(So("请设置文档 ID ！"))}return s()(e,[{key:"_getCustom",value:function(){var e=this.searchParams.get("upload_url"),t={};return e&&(t.imageBaseUrl=e),t}},{key:"_getCtokenField",value:function(){return this.searchParams.get("upload_csrf_token_field")||"ctoken"}},{key:"_getCtonkenValue",value:function(){var e=this.searchParams.get("upload_csrf_token_value")||Dr(window)||"";return e&&(e=encodeURIComponent(e)),e}},{key:"_addParams",value:function(e,t){var n=this.docId,r=this.docDomain,o=this.host,a=this._getCtokenField(),i=this._getCtonkenValue(),l="attachable_type=".concat(r||"Doc","&attachable_id=").concat(n,"&").concat(a,"=").concat(i,"&type=").concat(t);return(e=o+e).includes("?")?"".concat(e,"&").concat(l):"".concat(e,"?").concat(l)}},{key:"isCompleted",value:function(){return this.uploadManager.isCompleted()}},{key:"image",value:function(e){var t=this;return new Promise((function(n){if(e&&e.size){var r=po.check("image",e.size);null!==r&&(r.callback(Ao.show(r.level,r.msg,!r.alwaysOpen)),n())}var o=t.imageBaseUrl,a=t.uploadManager,i=t.imageAction||t._addParams(o,"image"),l=new xo(i,e),c=setTimeout((function(){ge.a.error(So("图片上传超时")),n()}),6e5);a.addTask(l),l.on("success",(function(e){if(clearTimeout(c),e&&e.success)n(e&&e.data&&e.data.url);else{if(e.fileSizeCheckResult){var t=e.fileSizeCheckResult,r=t.level,o=t.msg,a=t.alwaysOpen;ge.a[r](o,a?0:void 0)}else ge.a.error(e&&e.message||So("图片上传失败"));n()}})),l.on("error",(function(e){clearTimeout(c),ge.a.error(e&&e.message||So("图片上传失败")),n()}))}))}}]),e}();function Lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lo(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Po,Mo,No=function(){function e(t){if(l()(this,e),!t.container)throw new Error("please set a dom cantainer!");this.options=Do({container:null,limitHeight:5e3,canvasCache:[],canvasCount:0},t),t.container.style["line-height"]="0px"}return s()(e,[{key:"_removeCanvas",value:function(){var e=this.options;e.canvasCache.forEach((function(e){e.parentElement.removeChild(e)})),e.canvasCache=[]}},{key:"_getCanvas",value:function(e){return e=e>0?e-1:e,this.options.canvasCache[e]}},{key:"resize",value:function(e,t){var n=this.options,r=n.limitHeight,o=n.canvasCount,a=n.container,i=Math.ceil(t/r),l=n.canvasCache;if(i!==o){this._removeCanvas(),l=[];for(var c=0;c<i;c++){var s=document.createElement("canvas");s.style["vertical-align"]="bottom",s.setAttribute("width",e),c===i-1?s.setAttribute("height",t%r):s.setAttribute("height",r),a.appendChild(s),l.push(s)}n.canvasCache=l}else{var u=this._getCanvas(i);l.forEach((function(t){t.setAttribute("width",e)})),u&&u.setAttribute("height",t%r)}}},{key:"_handleSingleRect",value:function(e){var t=e.x,n=e.y,r=e.index,o=e.width,a=e.height,i=e.callback,l=this.options.limitHeight,c=this._getCanvas(r);c&&i({x:t,y:n-l*(r-1),width:o,height:a,context:c.getContext("2d")})}},{key:"_drawRect",value:function(e){var t=e.x,n=e.y,r=e.width,o=e.height,a=e.fill,i=void 0===a?"#FFEC3D":a,l=e.stroke,c=void 0===l?"#FFEC3D":l;this._handleRect({x:t,y:n,width:r,height:o,callback:function(e){var t=e.x,n=e.y,r=e.width,o=e.height,a=e.context;a.fillStyle=i,a.strokeStyle=c,a.fillRect(t,n,r,o)}})}},{key:"_handleRect",value:function(e){var t=e.x,n=e.y,r=e.width,o=e.height,a=e.callback,i=this.options.limitHeight,l={x:t,y:n},c=n+o,s=Math.ceil(l.y/i),u=Math.ceil(c/i);s===u?this._handleSingleRect(Do(Do({},l),{},{index:s,width:r,height:o,callback:a})):(this._handleSingleRect(Do(Do({},l),{},{index:s,width:r,height:o,callback:a})),this._handleSingleRect(Do(Do({},l),{},{index:u,width:r,height:o,callback:a})))}},{key:"getImageData",value:function(e){var t=e.x,n=e.y,r=e.width,o=e.height,a=this.options.limitHeight,i=Math.ceil(n/a);return this._getCanvas(i).getContext("2d").getImageData(t,n,r,o)}},{key:"draw",value:function(e,t){this["_draw"+e](t)}},{key:"clearRect",value:function(e){var t=e.x,n=e.y,r=e.width,o=e.height;this._handleRect({x:t,y:n,width:r,height:o,callback:function(e){var t=e.x,n=e.y,r=e.width,o=e.height;e.context.clearRect(t,n,r,o)}})}},{key:"clear",value:function(){this.options.canvasCache.forEach((function(e){var t=e.getContext("2d"),n=Number(e.getAttribute("width")),r=Number(e.getAttribute("height"));t.clearRect(0,0,n,r)}))}},{key:"destroy",value:function(){this._removeCanvas()}}]),e}();Pe('.lake-svg-icon {\n  width: 16px;\n  height: 16px;\n  display: inline-block;\n  vertical-align: -0.15em;\n  text-align: center;\n  text-transform: none;\n  line-height: 1;\n  text-rendering: auto;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.lake-svg-icon-helper-tips {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/45ba264b-0967-4439-9289-ee41b040a0c2.svg\');\n}\n.lake-svg-icon-alert {\n  width: 16px;\n  height: 16px;\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/be5b1e2a-b47e-479c-9217-430229bef84e.svg\');\n}\n.lake-svg-icon-file {\n  width: 14px;\n  height: 11px;\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/ecda03cc-fd8e-45d2-834c-c904048f9583.svg\');\n}\n.lake-svg-icon-image {\n  width: 14px;\n  height: 11px;\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/44718df0-a6d9-4b93-909d-8482f70476ab.svg\');\n}\n.lake-svg-icon-error-image {\n  width: 22px;\n  height: 18px;\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/2295f9e0-1cb2-4d63-86aa-e9799273b28d.svg\');\n}\n.lake-svg-icon-error-file {\n  width: 22px;\n  height: 18px;\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/42090c56-d17b-4cf0-be63-59e164e47ba6.svg\');\n}\n.lake-svg-icon-insert {\n  background-image: url("https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*o_5bR4s5I4QAAAAAAAAAAABjAQAAAQ/original");\n  width: 18px;\n  height: 18px;\n  margin-bottom: -1px;\n}\n.lake-svg-icon-label {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/20747dac-1cc8-49f6-a91a-0c8c501d189b.svg\');\n}\n.lake-svg-icon-new-card {\n  width: 30px;\n  height: 12px;\n  margin-top: 5px;\n  margin-left: 4px;\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/7e255d95-cbe3-4559-a4a3-dbe69cd3e38b.svg\');\n}\n.lake-svg-icon-puml {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/4d2be8de-b7b7-41df-a36f-77ff0b6a5b9f.svg\');\n}\n.lake-svg-icon-flowchart {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/c82343e1-60ab-4b62-8135-d71401191104.svg\');\n}\n.lake-svg-icon-graphviz {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/19178ae8-0b12-463e-b466-e927094e9ea0.svg\');\n}\n.lake-svg-icon-mermaid {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/a15d98ca-089f-4cc2-9c11-032cc56fcacb.svg\');\n}\n.lake-svg-icon-processon {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/5c0fa950-66ff-4a3b-a788-477ea178e6bb.svg\');\n}\n.lake-svg-icon-modao {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/04162a86-307b-409e-8f8c-71f2200891f5.svg\');\n}\n.lake-svg-icon-herbox {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/f6d5ceab-a3e0-413f-a1ab-3c9ded96d632.svg\');\n}\n.lake-svg-icon-deepinsight {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/69f6859c-220e-490c-8c8a-b3bdaa7cbcb3.svg\');\n}\n.lake-svg-icon-ali {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/25837bdf-8082-430b-a8ac-4168cd84e093.svg\');\n}\n.lake-svg-icon-codepen {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/29539843-153d-4c7b-af8f-4475e743398b.svg\');\n}\n.lake-svg-icon-riddle {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/f0328014-fe24-4690-90a4-82c8e150c5bf.svg\');\n}\n.lake-svg-icon-figma {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/d0b58b9f-0ac3-4d0f-958a-c0aa8a3265eb.svg\');\n}\n.lake-svg-icon-xiami {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/c71358bb-d7cc-45dc-96ae-19d28febbb03.svg\');\n}\n.lake-svg-icon-music163 {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/e3416ec0-a688-4160-8772-9bbecad88d28.svg\');\n}\n.lake-svg-icon-gaode {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/02def0ac-858f-4f90-886c-295290725024.svg\');\n}\n.lake-svg-icon-taobao {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/57a7cb99-7f36-4869-8f94-d9c87d069cd6.svg\');\n}\n.lake-svg-icon-preview {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/95b6cdec-29f5-495f-8f1b-8835bcd2c541.svg\');\n}\n.lake-svg-icon-youku {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/4825b4b8-96a3-463f-8e6a-c28ae8b792b0.svg\');\n}\n.lake-svg-icon-bilibili {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/93d6bda1-2ab6-4b20-97e5-c0a73f2a42cd.svg\');\n}\n.lake-svg-icon-mmad {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/5e8132a4-5ec0-4c4e-95c4-7f5b19f23c19.svg\');\n}\n.lake-svg-icon-psd {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/df8dd01c-ecb1-4d33-99f6-8079591bb46c.svg\');\n}\n.lake-svg-icon-sketch {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/ef845454-388c-47b3-8066-298e335a2741.svg\');\n}\n.lake-svg-icon-xmind {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/46f6c8fc-5d56-41d7-b419-a89335f82dfc.svg\');\n}\n.lake-svg-icon-rp {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/f8f40533-79d9-4a3c-8051-31c34390f96d.svg\');\n}\n.lake-svg-icon-key {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/73dc752c-3f7b-4b0b-ada9-eb7e208d9b34.svg\');\n}\n.lake-svg-icon-mindnode {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/3fbedc10-029c-4670-a343-8b224ab0978e.svg\');\n}\n.lake-svg-icon-keynote {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/73dc752c-3f7b-4b0b-ada9-eb7e208d9b34.svg\');\n}\n.lake-svg-icon-xd {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/139561c7-309c-4669-882b-1107e217179c.svg\');\n}\n.lake-svg-icon-numbers {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/1eecfe2b-d250-4575-b3b4-78de3503007c.svg\');\n}\n.lake-svg-icon-pages {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/60e30d6d-9ee0-47b7-8955-cdd4aff6b2ac.svg\');\n}\n.lake-svg-icon-ppt,\n.lake-svg-icon-pptx,\n.lake-svg-icon-potx {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/d62af37c-9f13-4ca2-8861-f2b18c98f3a9.svg\');\n}\n.lake-svg-icon-xls {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/1874c8cc-a103-429b-8465-bb3adfe78d43.svg\');\n}\n.lake-svg-icon-xlsx {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/1874c8cc-a103-429b-8465-bb3adfe78d43.svg\');\n}\n.lake-svg-icon-doc {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/d98a673f-ef0f-46a6-83e3-ba6d01a4ec9d.svg\');\n}\n.lake-svg-icon-docx {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/d98a673f-ef0f-46a6-83e3-ba6d01a4ec9d.svg\');\n}\n.lake-svg-icon-pdf {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/02e0700b-d617-4afb-b4de-a4ea4c9bf7e7.svg\');\n}\n.lake-svg-icon-eddx {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/e1c51c39-f5b6-4e14-9ba9-0102d3579b9a.svg\');\n}\n.lake-svg-icon-eps {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/84b8024a-c65c-44e3-9be8-269af985af54.svg\');\n}\n.lake-svg-icon-insert-local-doc {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/f54a24bd-f973-4945-978c-abb923e20090.svg\');\n}\n.lake-svg-icon-insert-yuque {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/99e327dd-1cfe-40dd-b3e5-28c9d88d182d.svg\');\n}\n.lake-svg-icon-insert-table {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/a9cf6f64-3741-493b-a112-8952baedd1f6.svg\');\n}\n.lake-svg-icon-insert-image {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/dcf2220d-9226-41c9-b1f6-cc0c0a110dc1.svg\');\n}\n.lake-svg-icon-insert-file {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/2c7fe359-ac3d-493e-998d-f285305d28bd.svg\');\n}\n.lake-svg-icon-insert-video {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/1ef56c12-3adc-42c6-bb7c-9cb13111d8e2.svg\');\n}\n.lake-svg-icon-insert-thirdparty {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/e3ebe9af-b207-4d94-8dc4-2fdf5469f5e7.svg\');\n}\n.lake-svg-icon-insert-youku {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/4825b4b8-96a3-463f-8e6a-c28ae8b792b0.svg\');\n}\n.lake-svg-icon-insert-codeblock {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/7fd18334-db2e-49d0-ba80-b92689b81b3f.svg\');\n}\n.lake-svg-icon-insert-math {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/762f00b4-45d7-47b8-8c7b-2c9f886612b5.svg\');\n}\n.lake-svg-icon-insert-mindmap {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/f6510a5f-33d9-4bcb-8b54-5dc30bd89e79.svg\');\n}\n.lake-svg-icon-insert-puml {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/10a9cc50-3a01-4a5c-8335-9a194fdcb614.svg\');\n}\n.lake-svg-icon-insert-flowchart {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/0e0309c1-2b5c-433c-b9d7-e0d2486ce885.svg\');\n}\n.lake-svg-icon-insert-graphviz {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/44e449b2-9756-4de6-b227-bf4205964d20.svg\');\n}\n.lake-svg-icon-insert-mermaid {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/59cb287f-06f2-4712-a206-e1c4d173830b.svg\');\n}\n.lake-svg-icon-insert-lockedtext {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/bc8adb5a-18d2-4385-8ca4-710b57ad1664.svg\');\n}\n.lake-svg-icon-insert-calendar {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/2dd842ba-ea59-4cd1-994e-c5f31bd1ead2.svg\');\n}\n.lake-svg-icon-check-success {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/4c17d1ec-bd3f-4b86-a77b-dfd91e9c9626.svg\');\n}\n.lake-svg-icon-calendar-arrow-left {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/2f3e5fca-16d2-48b3-a5d2-fff2328df92c.svg\');\n}\n.lake-svg-icon-calendar-arrow-right {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/a03bff1a-3aef-4871-bc74-de2a3f81e3ff.svg\');\n}\n.lake-svg-icon-desc {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/a085f457-6982-434a-808d-372cac6624e7.svg\');\n}\n.lake-svg-icon-error {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/8f8fcc17-b080-421e-b733-7772d62be204.svg\');\n}\n.lake-svg-icon-warning {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/d1b4c5f6-8dcd-4d10-ab31-265abdbb9579.svg\');\n}\n.lake-svg-insert-yuan {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/b1c64e6e-3787-408c-bc49-dd0f9d9b2ebc.svg\');\n}\n.lake-svg-icon-yuan {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/6145eac0-5d9d-4b9b-84be-7ed8bfde32c7.svg\');\n}\n.lake-svg-icon-line-height {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/40d4fb04-d3c2-43e8-a99d-7f68345f7f0a.svg\');\n}\n.lake-svg-icon-yuque-doc {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/11d695b4-30c1-478f-940a-e20095ccb2fe.svg\');\n}\n.lake-svg-icon-yuque-thread {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/1f4ca629-5760-465a-9207-7a7f49d01ca6.svg\');\n}\n.lake-svg-icon-yuque-design {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/f0eded1a-a849-44f6-a5e2-3d8f5724ebef.svg\');\n}\n.lake-svg-icon-yuque-sheet {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/34c09a2c-3c80-44c8-a49a-20fa92774b34.svg\');\n}\n.lake-svg-icon-yuque-table {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/0d0a1799-c870-4f66-8164-3b6a788e0f89.svg\');\n}\n.lake-svg-icon-yuque-board {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/d62043aa-bdc3-4d0c-b68c-a771108516a3.svg\');\n}\n.lake-svg-icon-yuque-mind {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/b74e7bab-1935-48ae-80f8-82ea648697e5.svg\');\n}\n.lake-svg-icon-yuque-show {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/de70d404-fec2-4606-aa45-eb4d6560a1cc.svg\');\n}\n.lake-svg-icon-yuque-repo-mind {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/b74e7bab-1935-48ae-80f8-82ea648697e5.svg\');\n}\n.lake-svg-icon-yuque-repo-sheet {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/3be374af-05cc-4115-a9ac-477131b54212.svg\');\n}\n.lake-svg-icon-yuque-repo-doc {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/2a1ba540-5d0d-46a2-98fb-6753300d3749.svg\');\n}\n.lake-svg-icon-yuque-repo-thread {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/3f6aa5c3-e7b1-4d78-932e-b00379e8d38c.svg\');\n}\n.lake-svg-icon-yuque-repo-design {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/48e3d64b-aec0-4f3f-9838-d1f685781dfd.svg\');\n}\n.lake-svg-icon-search {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/086f31be-d7f0-4675-aa2c-8c8cf21c088b.svg\');\n}\n.lake-svg-icon-plus {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/fa994e91-3fa4-421d-b0fc-9823dc5cf330.svg");\n}\n.lake-svg-icon-video {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/31499aa4-1105-4a4b-a8c7-f33ceaf8e012.svg");\n}\n.lake-svg-icon-canva {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/c1678a81-2534-4fdd-b38b-a510d69a6661.svg");\n}\n.lake-svg-icon-yuque-for-embed {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/5dfd3248-3206-41dc-bc2c-1d7fb9847ecb.svg");\n}\n.lake-svg-icon-file-for-embed {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/6ac1386e-5c04-45a5-a351-7d94a61d7bba.svg");\n}\n.lake-svg-icon-jinshuju {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/3f11de9a-3da8-402d-a8bc-81df6ec52d2c.svg");\n}\n.lake-svg-icon-vote {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/929ed4d4-a244-4d78-96e2-f472642daf2a.svg");\n}\n.lake-svg-icon-cloud {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/58c42f2b-cdf1-49c3-a77a-d5e63c561a36.svg");\n}\n.lake-svg-icon-folder {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/9890c046-6d10-4d2f-917a-b40a8e92ea7f.svg");\n}\n.lake-svg-icon-audio {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/4aa43d0f-2881-46ab-a894-afd617b08afc.svg");\n}\n.lake-svg-icon-audio-icon {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/b9d51288-551f-447e-930f-7e1132a4a90b.svg");\n}\n.lake-svg-icon-audio-error-icon {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/dc01c10b-e433-4bb3-bf7e-8b679725b823.svg");\n}\n.lake-svg-icon-regret {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/9436ba3b-352d-4dd2-a97b-b3c525390508.svg");\n}\n.lake-svg-icon-note-file {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/a8cab1ab-68dd-48be-82ab-c667e0c43556.svg");\n}\n.lake-svg-icon-note-image {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/6efcc064-f6e7-4823-983e-a09d449fcf55.svg");\n}\n.lake-svg-icon-note-tasklist {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/32d03522-996b-4c48-bd08-274a2ed15204.svg");\n}\n.lake-svg-icon-note-link {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/a232cebb-7862-420f-a220-31eff086e997.svg");\n}\n.lake-svg-icon-emoji {\n  width: 16px;\n  height: 16px;\n  margin-bottom: 1px;\n  background-size: contain;\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/72fc758e-01ca-4317-b9c9-1d25e9b3a577.svg");\n}\n/* stylelint-disable */\n@font-face {\n  font-family: \'lake-icon\';\n  /* project id 943843 */\n  src: url("https://at.alicdn.com/t/a/font_943843_4hllx7w8s1k.eot");\n  /* IE9*/\n  src: url("https://at.alicdn.com/t/a/font_943843_4hllx7w8s1k.eot?#iefix") format("embedded-opentype"), /* IE6-IE8 */ url("https://at.alicdn.com/t/a/font_943843_4hllx7w8s1k.woff2") format(\'woff2\'), url("https://at.alicdn.com/t/a/font_943843_4hllx7w8s1k.woff") format("woff"), /* chrome、firefox */ url("https://at.alicdn.com/t/a/font_943843_4hllx7w8s1k.ttf") format("truetype"), /* chrome、firefox、opera、Safari, Android, iOS 4.2+*/ url("https://at.alicdn.com/t/a/font_943843_4hllx7w8s1k.svg#iconfont") format("svg");\n  /* iOS 4.1- */\n}\n@font-face {\n  font-family: "Chinese Quote";\n  src: local("PingFang SC"), local("SimSun");\n  unicode-range: U+2018, U+2019, U+201c, U+201d;\n}\n@font-face {\n  font-family: "Tahoma For Number";\n  src: local("Tahoma");\n  unicode-range: U+30-39;\n}\n.lake-icon {\n  display: inline-block;\n  font-style: normal;\n  vertical-align: baseline;\n  text-align: center;\n  text-transform: none;\n  line-height: 1;\n  text-rendering: auto;\n}\n.lake-icon:before {\n  display: block;\n  font-family: "lake-icon" !important;\n}\n.lake-icon-svgs {\n  width: 16px;\n  height: 16px;\n}\n.lake-icon-alert:before {\n  content: "\\e724";\n}\n.lake-icon-h1:before {\n  content: "\\e610";\n}\n.lake-icon-h2:before {\n  content: "\\e611";\n}\n.lake-icon-h3:before {\n  content: "\\e60f";\n}\n.lake-icon-h4:before {\n  content: "\\e60c";\n}\n.lake-icon-h5:before {\n  content: "\\e60d";\n}\n.lake-icon-h6:before {\n  content: "\\e60e";\n}\n.lake-icon-bold:before {\n  content: "\\ea46";\n}\n.lake-icon-underline:before {\n  content: "\\ea45";\n}\n.lake-icon-code:before {\n  content: "\\ea49";\n}\n.lake-icon-italic:before {\n  content: "\\ea44";\n}\n.lake-icon-strikethrough:before {\n  content: "\\ea47";\n}\n.lake-icon-sub:before {\n  content: "\\ea4b";\n}\n.lake-icon-sup:before {\n  content: "\\ea4a";\n}\n.lake-icon-color:before {\n  content: "\\ea4d";\n}\n.lake-icon-background:before {\n  content: "\\ea4c";\n}\n.lake-icon-moremark:before {\n  content: "\\ea48";\n}\n.lake-icon-toolbar-check:before {\n  content: "\\e6d0";\n}\n.lake-icon-link:before {\n  content: "\\ea58";\n}\n.lake-icon-emoji:before {\n  content: "\\ea79";\n}\n.lake-icon-oList:before {\n  content: "\\ea53";\n}\n.lake-icon-uList:before {\n  content: "\\ea52";\n}\n.lake-icon-tList:before {\n  content: "\\ea56";\n}\n.lake-icon-quote:before {\n  content: "\\ea57";\n}\n.lake-icon-hr:before {\n  content: "\\ea59";\n}\n.lake-icon-left:before {\n  content: "\\ea4e";\n}\n.lake-icon-center:before {\n  content: "\\ea4f";\n}\n.lake-icon-right:before {\n  content: "\\ea50";\n}\n.lake-icon-justify:before {\n  content: "\\ea51";\n}\n.lake-icon-top:before {\n  content: "\\ea82";\n}\n.lake-icon-bottom:before {\n  content: "\\ea81";\n}\n.lake-icon-middle:before {\n  content: "\\ea80";\n}\n.lake-icon-horizontally:before {\n  content: "\\e66c";\n}\n.lake-icon-vertically:before {\n  content: "\\e66d";\n}\n.lake-icon-image:before {\n  content: "\\ea78";\n}\n.lake-icon-image-o:before {\n  content: "\\e61c";\n}\n.lake-icon-rotate-left:before {\n  content: "\\ea71";\n}\n.lake-icon-rotate-right:before {\n  content: "\\ea70";\n}\n.lake-icon-preferences:before {\n  content: "\\e810";\n}\n.lake-icon-indent-left:before {\n  content: "\\ea54";\n}\n.lake-icon-indent-right:before {\n  content: "\\ea55";\n}\n.lake-icon-arrow-up:before {\n  content: "\\ea1b";\n}\n.lake-icon-arrow-down:before {\n  content: "\\ea1a";\n}\n.lake-icon-arrow-left:before {\n  content: "\\ea1f";\n}\n.lake-icon-arrow-right:before {\n  content: "\\ea1e";\n}\n.lake-icon-insert-root:before {\n  content: "\\e61b";\n}\n.lake-icon-insert-sibling:before {\n  content: "\\ea72";\n}\n.lake-icon-insert-child:before {\n  content: "\\ea73";\n}\n.lake-icon-expand-subtree:before {\n  content: "\\ea74";\n}\n.lake-icon-collapse-subtree:before {\n  content: "\\ea75";\n}\n.lake-icon-properties:before {\n  content: "\\e618";\n}\n.lake-icon-collapse-node:before {\n  content: "\\e61d";\n}\n.lake-icon-line-curve:before {\n  content: "\\e636";\n}\n.lake-icon-line-curve-arrow:before {\n  content: "\\e635";\n}\n.lake-icon-diagram-cell-note:before {\n  content: "\\e638";\n}\n.lake-icon-diagram-toolbar-note:before {\n  content: "\\e637";\n}\n.lake-icon-mind-tree-edge-none:before {\n  content: "\\e69b";\n}\n.lake-icon-mind-tree-edge-polyline:before {\n  content: "\\e69d";\n}\n.lake-icon-insert-shape:before {\n  content: "\\e629";\n}\n.lake-icon-insert-text:before {\n  content: "\\e627";\n}\n.lake-icon-straight-line:before {\n  content: "\\e626";\n}\n.lake-icon-straight-line-arrow:before {\n  content: "\\e624";\n}\n.lake-icon-elbow-line:before {\n  content: "\\e625";\n}\n.lake-icon-elbow-line-arrow:before {\n  content: "\\e628";\n}\n.lake-icon-line-arrow-left:before {\n  content: "\\e62a";\n}\n.lake-icon-line-arrow-right:before {\n  content: "\\e62b";\n}\n.lake-icon-align-bottom:before {\n  content: "\\e6ab";\n}\n.lake-icon-align-right:before {\n  content: "\\e6b1";\n}\n.lake-icon-align-h-center:before {\n  content: "\\e6b3";\n}\n.lake-icon-align-left:before {\n  content: "\\e6b2";\n}\n.lake-icon-align-top:before {\n  content: "\\e6aa";\n}\n.lake-icon-align-v-center:before {\n  content: "\\e6ae";\n}\n.lake-icon-distribute-horizontally:before {\n  content: "\\e6f1";\n}\n.lake-icon-distribute-vertically:before {\n  content: "\\e6f0";\n}\n.lake-icon-to-back:before {\n  content: "\\e65f";\n}\n.lake-icon-forward:before {\n  content: "\\e660";\n}\n.lake-icon-to-front:before {\n  content: "\\e661";\n}\n.lake-icon-backward:before {\n  content: "\\e662";\n}\n.lake-icon-delete-lane:before {\n  content: "\\e6bf";\n}\n.lake-icon-zoom-to-fit:before {\n  content: "\\e655";\n}\n.lake-icon-table-merge-cell:before {\n  content: "\\e6e1";\n}\n.lake-icon-table-split-cell:before {\n  content: "\\ea6b";\n}\n.lake-icon-table-clear:before {\n  content: "\\ea64";\n}\n.lake-icon-table-remove-col:before {\n  content: "\\ea67";\n}\n.lake-icon-table-remove-row:before {\n  content: "\\ea66";\n}\n.lake-icon-table-cut:before {\n  content: "\\ea65";\n}\n.lake-icon-table-copy:before {\n  content: "\\ea61";\n}\n.lake-icon-table-insert-col-left:before {\n  content: "\\ea60";\n}\n.lake-icon-table-insert-col-right:before {\n  content: "\\ea5f";\n}\n.lake-icon-table-insert-row-up:before {\n  content: "\\ea5d";\n}\n.lake-icon-table-insert-row-down:before {\n  content: "\\ea5e";\n}\n.lake-icon-table-remove-table:before {\n  content: "\\ea63";\n}\n.lake-icon-table-border:before {\n  content: "\\e633";\n}\n.lake-icon-table-delete-file:before {\n  content: "\\e711";\n}\n.lake-icon-table-download-file:before {\n  content: "\\e712";\n}\n.lake-icon-redo:before {\n  content: "\\e6e2";\n}\n.lake-icon-undo:before {\n  content: "\\e6dc";\n}\n.lake-icon-clean:before {\n  content: "\\e6d6";\n}\n.lake-icon-paintformat:before {\n  content: "\\ea42";\n}\n.lake-icon-close:before {\n  content: "\\e72d";\n}\n.lake-icon-save:before {\n  content: "\\e68c";\n}\n.lake-icon-edit:before {\n  content: "\\ea6c";\n}\n.lake-icon-edit-new:before {\n  content: "\\e63f";\n}\n.lake-icon-copy:before {\n  content: "\\ea61";\n}\n.lake-icon-copyContent:before {\n  content: "\\ea61";\n}\n.lake-icon-delete:before {\n  content: "\\ea63";\n}\n.lake-icon-openlink:before {\n  content: "\\ea76";\n}\n.lake-icon-drag:before {\n  content: "\\ea68";\n}\n.lake-icon-table-column-hidden:before {\n  content: "\\e6f5";\n}\n.lake-icon-table-column-show:before {\n  content: "\\e6f3";\n}\n.lake-icon-table-column-config:before {\n  content: "\\e6f4";\n}\n.lake-icon-table-x-delete:before {\n  content: "\\e71b";\n}\n.lake-icon-table-arrow-down:before {\n  content: "\\e6ef";\n}\n.lake-icon-board-iconfont:before {\n  content: "\\e731";\n}\n.lake-icon-board-viewport-autofit:before {\n  content: "\\e723";\n}\n.lake-icon-board-viewport-option-adapt:before {\n  content: "\\e710";\n}\n.lake-icon-board-viewport-option-wysiwyg:before {\n  content: "\\e70f";\n}\n.lake-icon-board-properties:before {\n  content: "\\e690";\n}\n.lake-icon-board-setting:before {\n  content: "\\e690";\n}\n.lake-icon-board-undo:before {\n  content: "\\e689";\n}\n.lake-icon-board-redo:before {\n  content: "\\e68b";\n}\n.lake-icon-board-save:before {\n  content: "\\e68c";\n}\n.lake-icon-board-zoom-out:before {\n  content: "\\e647";\n}\n.lake-icon-board-zoom-in:before {\n  content: "\\e646";\n}\n.lake-icon-board-hand:before {\n  content: "\\e648";\n}\n.lake-icon-board-insert-text:before {\n  content: "\\e685";\n}\n.lake-icon-board-mind:before {\n  content: "\\e67d";\n}\n.lake-icon-board-insert-shape:before {\n  content: "\\e64c";\n}\n.lake-icon-board-upload-image:before {\n  content: "\\e67c";\n}\n.lake-icon-board-straight-line-arrow:before {\n  content: "\\e64a";\n}\n.lake-icon-board-elbow-line-arrow:before {\n  content: "\\e649";\n}\n.lake-icon-board-curve-line-arrow:before {\n  content: "\\e67a";\n}\n.lake-icon-board-toolbar-hide:before {\n  content: "\\e6f6";\n}\n.lake-icon-board-toolbar-show:before {\n  content: "\\e6f7";\n}\n.lake-icon-board-toolbar-right:before {\n  content: "\\e713";\n}\n.lake-icon-board-toolbar-left:before {\n  content: "\\e714";\n}\n.lake-icon-board-toolbar-free-hand:before {\n  content: "\\e72c";\n}\n.lake-icon-board-toolbar-pencil:before {\n  content: "\\e72a";\n}\n.lake-icon-board-toolbar-pen:before {\n  content: "\\e732";\n}\n.lake-icon-board-toolbar-mark-pencil:before {\n  content: "\\e72b";\n}\n.lake-icon-board-toolbar-eraser:before {\n  content: "\\e72e";\n}\n.lake-icon-board-toolbar-select:before {\n  content: "\\e730";\n}\n.lake-icon-board-toolbar-theme:before {\n  content: "\\e722";\n}\n.lake-icon-board-question:before {\n  content: "\\e734";\n}\n.lake-icon-contextual-align:before {\n  content: "\\e6ee";\n}\n.lake-icon-contextual-group:before {\n  content: "\\e6eb";\n}\n.lake-icon-contextual-ungroup:before {\n  content: "\\e6ec";\n}\n.lake-icon-contextual-text:before {\n  content: "\\e691";\n}\n.lake-icon-contextual-shape:before {\n  content: "\\e69e";\n}\n.lake-icon-contextual-link:before {\n  content: "\\e68e";\n}\n.lake-icon-contextual-stroke-none:before {\n  content: "\\e696";\n}\n.lake-icon-contextual-stroke-dash:before {\n  content: "\\e698";\n}\n.lake-icon-contextual-curve-line:before {\n  content: "\\e697";\n}\n.lake-icon-contextual-straight-line:before {\n  content: "\\e694";\n}\n.lake-icon-contextual-elbow-line:before {\n  content: "\\e692";\n}\n.lake-icon-contextual-left-arrow:before {\n  content: "\\e695";\n}\n.lake-icon-contextual-right-arrow:before {\n  content: "\\e693";\n}\n.lake-icon-contextual-line-swap-endpoint:before {\n  content: "\\e721";\n}\n.lake-icon-contextual-abstract:before {\n  content: "\\e71f";\n}\n.lake-icon-contextual-mindmap-icon:before {\n  content: "\\e72f";\n}\n.lake-icon-contextual-dsl-edit:before {\n  content: "\\e68f";\n}\n.lake-icon-contextual-none:before {\n  content: "\\e6f8";\n}\n.lake-icon-contextual-open-triangle:before {\n  content: "\\e6f9";\n}\n.lake-icon-contextual-one-side-up:before {\n  content: "\\e6fa";\n}\n.lake-icon-contextual-one-side-down:before {\n  content: "\\e6fb";\n}\n.lake-icon-contextual-arrow:before {\n  content: "\\e6fc";\n}\n.lake-icon-contextual-hollow-triangle:before {\n  content: "\\e704";\n}\n.lake-icon-contextual-sharp-solid-square:before {\n  content: "\\e703";\n}\n.lake-icon-contextual-sharp-hollow-square:before {\n  content: "\\e705";\n}\n.lake-icon-contextual-flat-solid-square:before {\n  content: "\\e6fe";\n}\n.lake-icon-contextual-flat-hollow-square:before {\n  content: "\\e6ff";\n}\n.lake-icon-contextual-solid-circle:before {\n  content: "\\e6fd";\n}\n.lake-icon-contextual-hollow-circle:before {\n  content: "\\e702";\n}\n.lake-icon-contextual-cross-circle:before {\n  content: "\\e701";\n}\n.lake-icon-contextual-half-open-circle:before {\n  content: "\\e700";\n}\n.lake-icon-contextual-end-vertical-line:before {\n  content: "\\e706";\n}\n.lake-icon-contextual-middle-vertical-line:before {\n  content: "\\e708";\n}\n.lake-icon-contextual-three-line:before {\n  content: "\\e707";\n}\n.lake-icon-contextual-three-line-plus-vertical:before {\n  content: "\\e70a";\n}\n.lake-icon-contextual-double-vertical-line:before {\n  content: "\\e709";\n}\n.lake-icon-contextual-single-slash:before {\n  content: "\\e70c";\n}\n.lake-icon-contextual-three-line-plus-circle:before {\n  content: "\\e70b";\n}\n.lake-icon-contextual-circle-vertical:before {\n  content: "\\e70d";\n}\n.lake-icon-mindmap-capsule:before {\n  content: "\\e699";\n}\n.lake-icon-mindmap-line:before {\n  content: "\\e696";\n}\n.lake-icon-mindmap-rect:before {\n  content: "\\e69e";\n}\n.lake-icon-zoom-out:before {\n  content: "\\ea7e";\n}\n.lake-icon-zoom-in:before {\n  content: "\\ea7f";\n}\n.lake-icon-attachment:before {\n  content: "\\ea7a";\n}\n.lake-icon-download:before {\n  content: "\\ea6e";\n}\n.lake-icon-upload:before {\n  content: "\\ea7d";\n}\n.lake-icon-preview:before {\n  content: "\\ea6d";\n}\n.lake-icon-full-screen:before {\n  content: "\\ea7c";\n}\n.lake-icon-maximize:before {\n  content: "\\ea7c";\n}\n.lake-icon-exit-full-screen:before {\n  content: "\\ea8b";\n}\n.lake-icon-full-screen-mini:before {\n  content: "\\e6c9";\n}\n.lake-icon-exit-full-screen-mini:before {\n  content: "\\e6ca";\n}\n.lake-icon-toc:before {\n  content: "\\ea5c";\n}\n.lake-icon-question:before {\n  content: "\\e81d";\n}\n.lake-icon-more:before {\n  content: "\\e60b";\n}\n.lake-icon-lock:before {\n  content: "\\e86a";\n}\n.lake-icon-unlock:before {\n  content: "\\e86b";\n}\n.lake-icon-embedded-preview:before {\n  content: "\\e686";\n}\n.lake-icon-compact-display:before {\n  content: "\\e684";\n}\n.lake-icon-loading:before {\n  content: "\\e64d";\n}\n.lake-icon-confirm:before {\n  content: "\\e729";\n}\n.lake-icon-warning:before {\n  content: "\\e7df";\n}\n.lake-icon-plus:before {\n  content: "\\e612";\n}\n.lake-icon-unlink:before {\n  content: "\\e613";\n}\n.lake-icon-calendar-arrow-right:before {\n  content: "\\e617";\n}\n.lake-icon-calendar-arrow-left:before {\n  content: "\\e619";\n}\n.lake-icon-yuan:before {\n  content: "\\e68a";\n}\n.lake-icon-line-height:before {\n  content: "\\e61a";\n}\n.lake-icon-doc-title:before {\n  content: "\\e620";\n}\n.lake-icon-doc-card:before {\n  content: "\\e621";\n}\n.lake-icon-doc-embed:before {\n  content: "\\e61f";\n}\n.lake-icon-searchreplace:before {\n  content: "\\ea5b";\n}\n.lake-icon-translate:before {\n  content: "\\ea5a";\n}\n.lake-icon-reload:before {\n  content: "\\ea6f";\n}\n.lake-icon-gotolink:before {\n  content: "\\ea76";\n}\n.lake-icon-height-mode-default:before {\n  content: "\\e622";\n}\n.lake-icon-height-mode-adaptive:before {\n  content: "\\e623";\n}\n.lake-icon-dropdown-arrow:before {\n  content: "\\e616";\n}\n.lake-icon-save-folder:before {\n  content: "\\e62c";\n}\n.lake-icon-desc:before {\n  content: "\\e6e7";\n}\n.lake-icon-asc:before {\n  content: "\\e6e4";\n}\n.lake-icon-formula:before {\n  content: "\\e6de";\n}\n.lake-icon-filter:before {\n  content: "\\e6db";\n}\n.lake-icon-clip:before {\n  content: "\\e604";\n}\n.lake-icon-overflow:before {\n  content: "\\e603";\n}\n.lake-icon-wrap:before {\n  content: "\\e602";\n}\n.lake-icon-select:before {\n  content: "\\e609";\n}\n.lake-icon-plus-o:before {\n  content: "\\e837";\n}\n.lake-icon-success:before {\n  content: "\\e60a";\n}\n.lake-icon-decimal-inc:before {\n  content: "\\e6e3";\n}\n.lake-icon-decimal-dec:before {\n  content: "\\e6e0";\n}\n.lake-icon-frozen-cell:before {\n  content: "\\e6da";\n}\n.lake-icon-frozen-col:before {\n  content: "\\ea88";\n}\n.lake-icon-frozen-row:before {\n  content: "\\ea87";\n}\n.lake-icon-cancel-frozen:before {\n  content: "\\e656";\n}\n.lake-icon-border-all:before {\n  content: "\\e6d9";\n}\n.lake-icon-border-style:before {\n  content: "\\e64b";\n}\n.lake-icon-protect:before {\n  content: "\\e6d5";\n}\n.lake-icon-chart:before {\n  content: "\\e6df";\n}\n.lake-icon-chart-menu:before {\n  content: "\\e64e";\n}\n.lake-icon-range:before {\n  content: "\\e64f";\n}\n.lake-icon-dropdown-list:before {\n  content: "\\e650";\n}\n.lake-icon-draggable:before {\n  content: "\\e651";\n}\n.lake-icon-keyboard:before {\n  content: "\\ea86";\n}\n.lake-icon-line-break:before {\n  content: "\\e652";\n}\n.lake-icon-sheet-list:before {\n  content: "\\e653";\n}\n.lake-icon-invisible:before {\n  content: "\\e654";\n}\n.lake-icon-selections:before {\n  content: "\\e61e";\n}\n.lake-icon-conditionformat:before {\n  content: "\\e6dd";\n}\n.lake-icon-up-arrow:before {\n  content: "\\e664";\n}\n.lake-icon-down-arrow:before {\n  content: "\\e663";\n}\n.lake-icon-left-arrow:before {\n  content: "\\e666";\n}\n.lake-icon-right-arrow:before {\n  content: "\\e665";\n}\n.lake-icon-col-width:before {\n  content: "\\e667";\n}\n.lake-icon-row-height:before {\n  content: "\\e668";\n}\n.lake-icon-note:before {\n  content: "\\e669";\n}\n.lake-icon-highlight-area:before {\n  content: "\\e66a";\n}\n.lake-icon-sheet-arrow:before {\n  content: "\\e66b";\n}\n.lake-icon-filtered:before {\n  content: "\\e66e";\n}\n.lake-icon-search-len:before {\n  content: "\\e719";\n}\n.lake-icon-sheet:before {\n  content: "\\e678";\n}\n.lake-icon-circle-remove:before {\n  content: "\\e834";\n}\n.lake-icon-update-form:before {\n  content: "\\e674";\n}\n.lake-icon-move-up:before {\n  content: "\\e676";\n}\n.lake-icon-move-down:before {\n  content: "\\e675";\n}\n.lake-icon-repository:before {\n  content: "\\e63e";\n}\n.lake-icon-no-border:before {\n  content: "\\e63d";\n}\n.lake-icon-table:before {\n  content: "\\e679";\n}\n.lake-icon-grid-filter:before {\n  content: "\\e672";\n}\n.lake-icon-add-filter:before {\n  content: "\\e71a";\n}\n.lake-icon-grid-sort:before {\n  content: "\\e671";\n}\n.lake-icon-grid-form:before {\n  content: "\\e670";\n}\n.lake-icon-col-input:before {\n  content: "\\e67e";\n}\n.lake-icon-col-textarea:before {\n  content: "\\e673";\n}\n.lake-icon-col-number:before {\n  content: "\\e6ea";\n}\n.lake-icon-col-select:before {\n  content: "\\e67f";\n}\n.lake-icon-col-multiselect:before {\n  content: "\\e683";\n}\n.lake-icon-col-date:before {\n  content: "\\e682";\n}\n.lake-icon-col-createdat:before {\n  content: "\\e67b";\n}\n.lake-icon-col-updatedat:before {\n  content: "\\e717";\n}\n.lake-icon-col-modifierid:before {\n  content: "\\e716";\n}\n.lake-icon-col-userid:before {\n  content: "\\e715";\n}\n.lake-icon-col-checkbox:before {\n  content: "\\e681";\n}\n.lake-icon-col-image:before {\n  content: "\\e643";\n}\n.lake-icon-col-mention:before {\n  content: "\\e644";\n}\n.lake-icon-col-file:before {\n  content: "\\e642";\n}\n.lake-icon-col-link:before {\n  content: "\\e641";\n}\n.lake-icon-col-email:before {\n  content: "\\e645";\n}\n.lake-icon-col-phone:before {\n  content: "\\e640";\n}\n.lake-icon-sheet:before {\n  content: "\\e678";\n}\n.lake-icon-grid-filter:before {\n  content: "\\e672";\n}\n.lake-icon-table:before {\n  content: "\\e679";\n}\n.lake-icon-circle-remove:before {\n  content: "\\e834";\n}\n.lake-icon-grid-sort:before {\n  content: "\\e671";\n}\n.lake-icon-grid-form:before {\n  content: "\\e670";\n}\n.lake-icon-update-form:before {\n  content: "\\e674";\n}\n.lake-icon-move-up:before {\n  content: "\\e676";\n}\n.lake-icon-move-down:before {\n  content: "\\e675";\n}\n.lake-icon-repository:before {\n  content: "\\e63e";\n}\n.lake-icon-no-border:before {\n  content: "\\e63d";\n}\n.lake-icon-group:before {\n  content: "\\e677";\n}\n.lake-icon-to-right:before {\n  content: "\\e693";\n}\n.lake-icon-to-left:before {\n  content: "\\e695";\n}\n.lake-icon-card-toolbar-full-screen:before {\n  content: "\\e6e6";\n}\n.lake-icon-row-height-check:before {\n  content: "\\e6d0";\n}\n.lake-icon-thumb-up:before {\n  content: "\\e6b5";\n}\n.lake-icon-manage-catalog:before {\n  content: "\\e6b6";\n}\n.lake-icon-open-book:before {\n  content: "\\e6b7";\n}\n.lake-icon-catalog-switcher:before {\n  content: "\\e6b8";\n}\n.lake-icon-author:before {\n  content: "\\e6ad";\n}\n.lake-icon-timer:before {\n  content: "\\e6af";\n}\n.lake-icon-more-actions:before {\n  content: "\\e6ac";\n}\n.lake-icon-star:before {\n  content: "\\e6b0";\n}\n.lake-icon-star-outlined:before {\n  content: "\\e6b1";\n}\n.lake-icon-table-expand:before {\n  content: "\\e6b9";\n}\n.lake-icon-table-collpse:before {\n  content: "\\e6bb";\n}\n.lake-icon-rowheight-low:before {\n  content: "\\e6ba";\n}\n.lake-icon-rowheight-middle:before {\n  content: "\\e6bc";\n}\n.lake-icon-rowheight-high:before {\n  content: "\\e6bd";\n}\n.lake-icon-stop:before {\n  content: "\\e6c7";\n}\n.lake-icon-view:before {\n  content: "\\e6f3";\n}\n.lake-icon-arrow-down-mini:before {\n  content: "\\e718";\n}\n.lake-icon-table-arrow-down-view:before {\n  content: "\\e71c";\n}\n.lake-icon-table-expand:before {\n  content: "\\e6b9";\n}\n.lake-icon-table-collpse:before {\n  content: "\\e6bb";\n}\n.lake-icon-table-up:before {\n  content: "\\e6c3";\n}\n.lake-icon-table-down:before {\n  content: "\\e6c2";\n}\n.lake-icon-table-lock:before {\n  content: "\\e6c0";\n}\n.lake-icon-table-delete:before {\n  content: "\\e6bf";\n}\n.lake-icon-table-close:before {\n  content: "\\e71e";\n}\n.lake-icon-table-new-delete:before {\n  content: "\\e71d";\n}\n.lake-icon-table-grid-view:before {\n  content: "\\e6d3";\n}\n.lake-icon-table-card-view:before {\n  content: "\\e6d4";\n}\n.lake-icon-table-kanban-view:before {\n  content: "\\e6d1";\n}\n.lake-icon-table-plus:before {\n  content: "\\e646";\n}\n.lake-icon-table-dropdown:before {\n  content: "\\e6c4";\n}\n.lake-icon-table-dot:before {\n  content: "\\e64e";\n}\n.lake-icon-table-arrow-right:before {\n  content: "\\e6c5";\n}\n.lake-icon-table-drag:before {\n  content: "\\e6c8";\n}\n.lake-icon-table-setting:before {\n  content: "\\e6e8";\n}\n.lake-icon-table-edit:before {\n  content: "\\e68f";\n}\n.lake-icon-material-library:before {\n  content: "\\e6c6";\n}\n.lake-icon-pin-tilted:before {\n  content: "\\e6cb";\n}\n.lake-icon-pin:before {\n  content: "\\e6d2";\n}\n.lake-icon-width-mode-unfold:before {\n  content: "\\e6cd";\n}\n.lake-icon-width-mode-fold:before {\n  content: "\\e6cc";\n}\n.lake-icon-card-check-in:before {\n  content: "\\e6e9";\n}\n.lake-icon-export:before {\n  content: "\\e6ed";\n}\n.lake-icon-arrow-right:before {\n  content: "\\e6f2";\n}\n.lake-icon-arrow-down:before {\n  content: "\\e6ef";\n}\n.lake-icon-table-paste:before {\n  content: "\\e720";\n}\n');var Io="undefined"!=typeof navigator?navigator.userAgent:"",Fo=/edge/i.test(Io),Bo=!Fo&&/chrome/i.test(Io),Vo=/firefox/i.test(Io),Ho=!Fo&&!Bo&&/safari/i.test(Io);/dingtalk/i.test(Io);var zo=/mobile/i.test(Io),qo=/yuque-desktop\/[\d.]+/i.test(Io),Uo=/os [\.\_\d]+ like mac os/i.test(Io),Go={edge:Fo,chrome:Bo,firefox:Vo,safari:Ho,mobile:zo,desktop:qo,ios:Uo,android:/android/i.test(Io),macos:!Uo&&/mac os x/i.test(Io),windows:/windows\s*(?:nt)?\s*[\.\_\d]+/i.test(Io),ipad:/ipad/i.test(Io)||"MacIntel"===(null===(Po=navigator)||void 0===Po?void 0:Po.platform)&&(null===(Mo=navigator)||void 0===Mo?void 0:Mo.maxTouchPoints)>1,app:/YuqueMobileApp/i.test(Io)},Wo={compareVersion:function(e,t){if(!e||!t)return!1;if(e===t)return!1;for(var n=e.split("."),r=t.split("."),o=0;o<n.length;o++){if(Number(n[o])>Number(r[o]))return!0;if(Number(n[o]<Number(r[o])))return!1;if(n.length<r.length)return!1}return!1},getMobileAppVersion:function(){var e=navigator.userAgent.match(/\sYuqueMobileApp\/([0-9|.]+)/);if(e&&e.length>=2)return e[1]}};function Yo(){return Math.ceil("undefined"!=typeof window&&window.devicePixelRatio||1)}var $o=Object.freeze({__proto__:null,getDevicePixelRatio:Yo}),Ko=[/^.*?\.yuque\.com$/i,"cdn.nlark.com","yuque.antfin.com","yuque.antfin-inc.com","aliyuque.antfin.com","yuque.alibaba-inc.com","intranetproxy.alipay.com","lark-assets-dev-aliyun.oss-cn-hangzhou.aliyuncs.com","lark-assets-test-aliyun.oss-cn-hangzhou.aliyuncs.com"];function Xo(e,t,n){"string"==typeof e&&(e=new URL(e));var r=e.searchParams.get("x-oss-process");return r?r.includes("/".concat(t,","))||(r+="/".concat(t,",").concat(n)):r="image/".concat(t,",").concat(n),e.searchParams.set("x-oss-process",r),e.toString()}function Zo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ko;return Qo(e,t)}function Qo(e,t){var n=null;try{n=new URL(e).host}catch(e){}if(!n)return!1;for(var r=0,o=t.length;r<o;r++){var a=t[r];if("string"==typeof a){if(a===n)return!0}else if(a.test&&a.test(n))return!0}return!1}"undefined"!=typeof window&&void 0!==window.location&&Ko.push(window.location.host);var Jo=Object.freeze({__proto__:null,addImageProcess:Xo,isURLInOSS:Zo,tryAddWebpFormat:function(e,t,n){var r=null;try{r=new URL(e)}catch(e){}if(!r)return e;var o=r.pathname&&r.pathname.toLowerCase();return Zo(e,n)&&(o.endsWith(".heic")||o.endsWith(".heif"))?Xo(r,"format",t?"webp":"png"):!e.startsWith("http")||t?e:o.endsWith(".webp")?Zo(e,n)?Xo(r,"format","png"):null:e},resizeImage:function(e){var t=e.maxWidth,n=e.src,r=e.data,o=e.ossProcessDomains;if(!(r.width&&r.originWidth&&r.originHeight&&n&&n.startsWith("http")))return null;if(r.originWidth>3e4||r.originHeight>3e4)return null;var a=parseInt(r.width);a>t?a=t:a<300&&r.originWidth>300&&(a=300);var i=Yo();a=parseInt(a*i);var l=n.toLowerCase();if(!Qo(l,o||Ko))return null;var c=a*(r.originHeight/r.originWidth);return a>0&&a*c<16777216&&a<4096&&c<4096&&a<r.originWidth&&!/^https?:\/\/\w+\.alipayobjects\.com\//i.test(l)&&!l.endsWith(".gif")&&!l.endsWith(".svg")?Xo(n,"resize","w_".concat(a)):null}}),ea={codemirror:"https://gw.alipayobjects.com/as/g/larkgroup/lake-codemirror/7.1.2/CodeMirror.js",larksheet:"https://gw.alipayobjects.com/as/g/larkgroup/lark-sheet/11.0.20/lark-sheet.js"};function ta(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;return new Promise((function(n,r){var o=document.querySelector('script[src="'.concat(e,'"]'));o||((o=document.createElement("script")).src=e),o.getAttribute("loaded")?n():o.getAttribute("error")?r(new Error("load failed : ".concat(e))):(o.addEventListener("load",(function(){o.setAttribute("loaded","true"),n()}),!1),o.addEventListener("error",(function(){o.setAttribute("error"),r(new Error("load failed: ".concat(e)))}),!1),t.appendChild(o))}))}function na(e,t){return ta(ea[e]?ea[e]:e,t)}function ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ra(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aa(){return(aa=ye()(ke.a.mark((function e(t,n,r,o){var a,i,l,c,s,u,d,f,p,h,m,v,g,b,y,w,k,x=arguments;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>4&&void 0!==x[4]?x[4]:"/api/sts/upload",e.next=3,ta("https://gw.alipayobjects.com/os/lib/ali-oss/6.12.0/dist/aliyun-oss-sdk.min.js");case 3:return i={ext:t.ext||t.name.split(".").pop(),filename:t.name,filesize:t.size,attachable_id:n,attachable_type:r,type:o},e.next=6,fo({data:i,url:a}).promise;case 6:if(!((l=e.sent).xhr&&l.xhr.status>=400)){e.next=13;break}if(c=JSON.parse(l.xhr.response),s=window.__member_message_ref&&window.__member_message_ref.current.getMessage(c.code,{},c)||{},u=s.msg,d=s.alwaysOpen,f=s.level,p=s.callback,!u){e.next=13;break}return p(ge.a[f||"info"](u,d?0:void 0)),e.abrupt("return");case 13:return h=l.data,m=h.filekey,v=h.filekey_digest,g=h.bucket,b="test"===window.appData.env?"lark-assets-test-aliyun":"prod"===window.appData.env?"lark-assets-prod-aliyun":"lark-assets-dev-aliyun",y={},"prod"===window.appData.env&&(y.endpoint="https://oss-accelerate.aliyuncs.com"),w=oa({region:"oss-cn-hangzhou",accessKeyId:h.AccessKeyId,accessKeySecret:h.AccessKeySecret,stsToken:h.SecurityToken,bucket:g||("video"===o?"lark-video":b)},y),k=new window.OSS(w),e.abrupt("return",{ossClient:k,filekey:m,filekey_digest:v});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(){return(ia=ye()(ke.a.mark((function e(t,n,r,o){var a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.multipartUpload(r,t,{progress:function(e){o&&o(e)},meta:{uploadMethod:"directlyToOss"}});case 2:return a=e.sent,e.next=5,n.putACL(r,"private");case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var la=Object.freeze({__proto__:null,getOssClient:function(e,t,n,r){return aa.apply(this,arguments)},multipartUpload:function(e,t,n,r){return ia.apply(this,arguments)}}),ca=Object.freeze({__proto__:null,getItem:function(e){try{return localStorage.getItem(e)}catch(e){console.warn(e)}return null},setItem:function(e,t){try{return localStorage.setItem(e,t)}catch(e){console.warn(e)}}});function sa(e,t,n){return new Promise((function(r,o){t.onload=function(){var e=ye()(ke.a.mark((function e(t){var o;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=new Uint8Array(t.target.result),n.update(o),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.onerror=o,t.readAsArrayBuffer(e)}))}function ua(e){return da.apply(this,arguments)}function da(){return(da=ye()(ke.a.mark((function e(t){var n,r,o,a,i,l;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ta("https://gw.alipayobjects.com/os/lib/hash-wasm/4.7.0/dist/md5.umd.min.js");case 2:return e.next=4,window.hashwasm.createMD5();case 4:n=e.sent,r=FileReader&&new FileReader,o=Math.floor(t.size/67108864),a=0;case 8:if(!(a<=o)){e.next=15;break}return i=t.slice(67108864*a,Math.min(67108864*(a+1),t.size)),e.next=12,sa(i,r,n);case 12:a++,e.next=8;break;case 15:return l=n.digest(),e.abrupt("return",l);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fa(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ha(e,t){return function(n){if(!n)return null;var r=new RegExp('<meta name="'.concat(e,'" content="([\\s\\S]+?)"\\s*\\/>')).exec(n),o=r&&r[1];return t(o)}}var ma=ha("viewport",(function(e){return"fixed"!==e&&"adapt"!==e?"fixed":e})),va=ha("typography",(function(e){return"classic"!==e&&"traditional"!==e?"classic":e})),ga=ha("paragraphSpacing",(function(e){return"default"!==e&&"relax"!==e?"default":e})),ba=ha("defaultFontsize",(function(e){return Number(e)||null}));function ya(e){var t=function(e){try{return pa({},function(e){var t={};return e?(e.replace(/(<card\s+[^>]+>).*?<\/card>/gi,(function(e,n){var r=function(e){for(var t,n={},r=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g;t=r.exec(e);){var o=(t[1]||t[2]||t[4]||t[6]).toLowerCase(),a=(t[2]?t[3]:t[4]?t[5]:t[7])||"";n[o]=a}return n}(n),o=r.name;return"thirdparty"===o&&r.alias&&(o="thirdparty_"+r.alias),t[o]?t[o]++:t[o]=1,e})),t):t}(e))}catch(e){return console.warn("Doc statistic fail: "+e),{}}}(e),n="string"==typeof e?e.slice(0,10240):null;return pa({viewport:ma(n),typography:va(n),paragraphSpacing:ga(n),defaultFontsize:ba(n)},t)}r.FileUtils.isExt=function(e,t){return Array.isArray(e)?e.includes(t):e===t};var wa=function(e,t){var n;return r.FileUtils.isOffice("a.".concat(e))?n="previewOffice":r.FileUtils.isMacOffice("a.".concat(e))&&(n="previewMacOffice"),!!n&&r.FileUtils.isSizeLimit(n,t)};r.FileUtils.isFileCanPreview=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=wa(e,t),o=r.EXTS.MAC_OFFICE_EXT.concat(r.EXTS.OFFICE_EXT),a=["mp3","wav"],i=r.FileUtils.isImage(e)||r.FileUtils.isTextFile(e)||a.indexOf(e)>=0||o.indexOf(e)>=0&&n||r.FileUtils.isMMap(e)&&n;return!!i},r.FileUtils.getFileKeyByUrl=function(e){var t=e.replace(/^https?:\/\/[^/]+/,"").replace(/^\/attachments\//,"");return"/"===t.charAt(0)&&(t=t.substr(1)),t},r.FileUtils.getPreviewUrl=function(e){var t,n,o,a=r.FileUtils.getFileKeyByUrl(e),i=(null===(t=window)||void 0===t||null===(n=t.appData)||void 0===n||null===(o=n.space)||void 0===o?void 0:o.host)||origin;return r.FileUtils.isOffice(a)||r.FileUtils.isMacOffice(a)||"pdf"===r.FileUtils.getFileExtname(e)?"".concat(i,"/office/").concat(a):"".concat(i,"/preview/").concat(a)},r.FileUtils.getFileKey=function(e){var t=r.FileUtils.getFileExtname(e);return r.FileUtils.isImage(e)?"image":r.FileUtils.isVideo(e)?"video":r.FileUtils.isAudio(e)?"audio":["doc","docx","dot","dotx"].includes(t)?"word":r.FileUtils.isPdf(e)?"pdf":"txt"===t?"txt":["pages","md","markdown","rtf"].includes(t)?"doc":"numbers"===t?"numbers":["xls","xlsx","xlsm","xltx","xlt"].includes(t)?"excel":r.FileUtils.isSheet(e)?"sheet":"key"===e?"keynote":r.FileUtils.isPresentation(e)?"ppt":["xmind","xmind.zip"].includes(t)?"xmind":["mindnode","mindnode.zip"].includes(t)?"mindnote":r.FileUtils.isMMap(e)?"minimap":"sketch"===t?"sketch":["rp","rplib"].includes(t)?"axure":"psd"===t?"psd":"ai"===t?"ai":"graffle"===t?"graffle":"zip"===t?"rar":"lake"===t?"lake":"lakesheet"===t?"lakesheet":"default"},r.FileUtils.EXTS=r.EXTS;var ka="lake-codeblock";function xa(){var e=function(e){return"undefined"!=typeof localStorage&&localStorage?localStorage.getItem(e):null}(ka);if(e)try{var t=JSON.parse(e);t.theme&&delete t.theme,function(e,t){"undefined"!=typeof localStorage&&localStorage&&localStorage.setItem(e,t)}(ka,JSON.stringify(t))}catch(t){console.log("invalid data:",e)}}var Ea=function(e,t){return(Ea=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Ca(e,t){function n(){this.constructor=e}Ea(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Oa(e){return"function"==typeof e}var _a=!1,Sa={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,_a=e},get useDeprecatedSynchronousErrorHandling(){return _a}};function Ra(e){setTimeout((function(){throw e}),0)}var ja={closed:!0,next:function(e){},error:function(e){if(Sa.useDeprecatedSynchronousErrorHandling)throw e;Ra(e)},complete:function(){}},Aa=Array.isArray||function(e){return e&&"number"==typeof e.length},Ta=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),La=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n,r=this._parentOrParents,o=this._ctorUnsubscribe,a=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var l=0;l<r.length;++l)r[l].remove(this);if(Oa(a)){o&&(this._unsubscribe=void 0);try{a.call(this)}catch(e){t=e instanceof Ta?Da(e.errors):[e]}}if(Aa(i)){l=-1;for(var c=i.length;++l<c;){var s=i[l];if(null!==(n=s)&&"object"===O()(n))try{s.unsubscribe()}catch(e){t=t||[],e instanceof Ta?t=t.concat(Da(e.errors)):t.push(e)}}}if(t)throw new Ta(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(O()(t)){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=n._parentOrParents;if(null===o)n._parentOrParents=this;else if(o instanceof e){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function Da(e){return e.reduce((function(e,t){return e.concat(t instanceof Ta?t.errors:t)}),[])}var Pa="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),Ma=function(e){function t(n,r,o){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=ja;break;case 1:if(!n){a.destination=ja;break}if("object"===O()(n)){n instanceof t?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new Na(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new Na(a,n,r,o)}return a}return Ca(t,e),t.prototype[Pa]=function(){return this},t.create=function(e,n,r){var o=new t(e,n,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(La),Na=function(e){function t(t,n,r,o){var a,i=e.call(this)||this;i._parentSubscriber=t;var l=i;return Oa(n)?a=n:n&&(a=n.next,r=n.error,o=n.complete,n!==ja&&(Oa((l=Object.create(n)).unsubscribe)&&i.add(l.unsubscribe.bind(l)),l.unsubscribe=i.unsubscribe.bind(i))),i._context=l,i._next=a,i._error=r,i._complete=o,i}return Ca(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;Sa.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=Sa.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Ra(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Ra(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};Sa.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),Sa.useDeprecatedSynchronousErrorHandling)throw e;Ra(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!Sa.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return Sa.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(Ra(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Ma),Ia="function"==typeof Symbol&&Symbol.observable||"@@observable";function Fa(e){return e}function Ba(e){return 0===e.length?Fa:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Va=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=function(e,t,n){if(e){if(e instanceof Ma)return e;if(e[Pa])return e[Pa]()}return e||t||n?new Ma(e,t,n):new Ma(ja)}(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||Sa.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),Sa.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Sa.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,o=t.isStopped;if(n||o)return!1;e=r&&r instanceof Ma?r:null}return!0}(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Ha(t))((function(t,r){var o;o=n.subscribe((function(t){try{e(t)}catch(e){r(e),o&&o.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[Ia]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Ba(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Ha(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Ha(e){if(e||(e=Sa.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var za=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),qa=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return Ca(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(La),Ua=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return Ca(t,e),t}(Ma),Ga=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return Ca(t,e),t.prototype[Pa]=function(){return new Ua(this)},t.prototype.lift=function(e){var t=new Wa(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new za;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].next(e)},t.prototype.error=function(e){if(this.closed)throw new za;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new za;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new za;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new za;return this.hasError?(e.error(this.thrownError),La.EMPTY):this.isStopped?(e.complete(),La.EMPTY):(this.observers.push(e),new qa(this,e))},t.prototype.asObservable=function(){var e=new Va;return e.source=this,e},t.create=function(e,t){return new Wa(e,t)},t}(Va),Wa=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return Ca(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):La.EMPTY},t}(Ga),Ya=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new $a(e,this.project,this.thisArg))},e}(),$a=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return Ca(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Ma);function Ka(e,t,n,r){return Oa(n)&&(r=n,n=void 0),r?Ka(e,t,n).pipe((o=function(e){return Aa(e)?r.apply(void 0,e):r(e)},function(e){return e.lift(new Ya(o,undefined))})):new Va((function(r){!function e(t,n,r,o,a){var i;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var l=t;t.addEventListener(n,r,a),i=function(){return l.removeEventListener(n,r,a)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var c=t;t.on(n,r),i=function(){return c.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var s=t;t.addListener(n,r),i=function(){return s.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var u=0,d=t.length;u<d;u++)e(t[u],n,r,o,a)}o.add(i)}(e,t,(function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}));var o}var Xa=function(){return window.location.pathname.includes("/edit")},Za=function(){function e(){l()(this,e),a()(this,"_scrolled",new Ga),a()(this,"_globalSubscription",null),a()(this,"_scrolledCount",0)}return s()(e,[{key:"$scrollContainer",get:function(){return Xa()?document.querySelector(".".concat("ne-editor-wrap")):window.document}},{key:"scrolled",value:function(){var e=this;return new Va((function(t){e._globalSubscription||e._addGlobalListener();var n=e._scrolled.subscribe(t);return e._scrolledCount++,function(){e._scrolledCount--,n.unsubscribe(),e._scrolledCount||e._removeGlobalListener()}}))}},{key:"_addGlobalListener",value:function(){var e=this;this._globalSubscription=Ka(this.$scrollContainer,"scroll").subscribe(Ee()((function(){return e._scrolled.next()})))}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),e}(),Qa=function(){function e(){var t=this;l()(this,e),a()(this,"_scrollSubscription",null),a()(this,"_overlayRef",void 0),a()(this,"_scrollObserver",void 0),a()(this,"_detach",(function(){var e,n;t.disable(),null===(e=(n=t._overlayRef).detach)||void 0===e||e.call(n),t._overlayRef=null})),this._scrollObserver=new Za}return s()(e,[{key:"attach",value:function(e){this._overlayRef=e,this.enable()}},{key:"enable",value:function(){if(!this._scrollSubscription){var e=this._scrollObserver.scrolled();this._scrollSubscription=e.subscribe(this._detach)}}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}}]),e}(),Ja=function(){function e(){l()(this,e),a()(this,"_isEnabled",!1),a()(this,"_overlayRef",void 0),a()(this,"_previousBodyPaddingRight",void 0),a()(this,"_previousBodyOverflow",void 0)}return s()(e,[{key:"_scrollNode",get:function(){return Xa()?document.querySelector(".".concat("ne-editor-wrap")):window.document.body}},{key:"attach",value:function(e){this._overlayRef=e,this._previousBodyPaddingRight=void 0,this.enable()}},{key:"enable",value:function(){if(!this._isEnabled){if(this._isEnabled=!0,void 0===this._previousBodyPaddingRight){var e=window.innerWidth-this._scrollNode.clientWidth;if(e>0){var t=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10),n="".concat(t+e,"px");this._previousBodyPaddingRight=this._scrollNode.style.paddingRight,this._scrollNode.style.paddingRight=n}}this._previousBodyOverflow=this._scrollNode.style.overflow||"auto",this._scrollNode.style.overflow="hidden"}}},{key:"disable",value:function(){this._isEnabled&&(this._isEnabled=!1,void 0!==this._previousBodyPaddingRight&&(this._scrollNode.style.paddingRight=this._previousBodyPaddingRight,this._previousBodyPaddingRight=void 0),this._scrollNode.style.overflow=this._previousBodyOverflow)}}]),e}(),ei=r.HotKeyUtils.isHotkey;function ti(){return window.__imageBrowser||(window.__imageBrowser=new ze),window.__imageBrowser}},321:function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)o(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),o);else for(var a=0;a<r;a++)e[o+a]=t[n+a]},flattenChunks:function(e){var t,n,r,o,a,i;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(i=new Uint8Array(r),o=0,t=0,n=e.length;t<n;t++)a=e[t],i.set(a,o),o+=a.length;return i}},i={arraySet:function(e,t,n,r,o){for(var a=0;a<r;a++)e[o+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(r)},3222:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return y}));var r=n(0),o=n.n(r),a=n(36),i=n.n(a),l=n(3389);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===c(a)?a:String(a)),r)}var o,a}var u=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ref=o.a.createRef(),this.container=r,r instanceof HTMLElement?this.node=this.renderByDom(t,n):this.node=this.renderByNode(t,n)}var t,n,r;return t=e,r=[{key:"render",value:function(t,n,r){return new e(t,n,r)}}],(n=[{key:"renderByDom",value:function(e,t){var n=this;i.a.render(o.a.createElement(l.a,{component:e,props:t,ref:function(e){n.ref=e}}),this.container)}},{key:"renderByNode",value:function(e,t){var n=this;return o.a.createElement(l.a,{component:e,props:t,ref:function(e){n.ref=e}})}},{key:"update",value:function(e){if(!this.ref)return null;this.ref.update(e)}},{key:"dispose",value:function(){i.a.unmountComponentAtNode(this.container)}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===d(a)?a:String(a)),r)}var o,a}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t){var n=document.createElement("div");return document.body.appendChild(n),u.render(e,t,n)}function b(e,t){var n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(l,e);var n,r,a,i=h(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=i.call(this)).ref=o.a.createRef(),e}return n=l,(r=[{key:"componentDidMount",value:function(){t(this.ref)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{ref:function(t){e.ref=t}},this.props.children)}}])&&f(n.prototype,r),a&&f(n,a),Object.defineProperty(n,"prototype",{writable:!1}),l}(o.a.Component);return o.a.createElement(n,null,e)}function y(e,t,n){var r=u.render(e,t);return b(r.node,(function(){n(r)}))}},3225:function(e,t,n){"use strict";var r={contentToLakeTable:function(e){if(!e)return null;if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(e){return null}}};t.a=r},3249:function(e,t,n){"use strict";n(63);var r=n(23),o=n(0),a=n(106),i=n.n(a),l=n(2837),c=new i.a("hook:useLoadDoc");t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.requestData,a=e.dispatch,i=n.book_id,s=n.slug,u=n.query;Object(o.useEffect)((function(){c("load doc: ",n);var e=(new l.a).isExtremeMode();if(window.appData.isYuqueMobileApp&&window.__skeletonData&&window.__skeletonData.book_id===i&&window.__skeletonData.slug===s&&(window.__skeletonData=void 0,e=!0),!e){var t="doc_embed"!==u.view;return a({type:"doc/getDetail",payload:{book_id:i,slug:s,withData:{contributors:t,like:t,hits:t,pager:t,suggests:t}}}).then((function(e){c("doc init done, res: ",e)})).catch((function(e){c("doc init error",e),r.a.error(e.message||__("系统异常"))})),function(){window.scrollTo(0,0)}}a({type:"doc/update",payload:{loaded:!0}})}),t)}},3250:function(e,t,n){"use strict";n.d(t,"a",(function(){return Se})),n.d(t,"b",(function(){return N})),n.d(t,"c",(function(){return q})),n.d(t,"d",(function(){return X}));var r=n(15),o=n(572),a=n(0),i=n.n(a);const l={arr:Array.isArray,obj:e=>"[object Object]"===Object.prototype.toString.call(e),fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e,nul:e=>null===e,set:e=>e instanceof Set,map:e=>e instanceof Map,equ(e,t){if(typeof e!=typeof t)return!1;if(l.str(e)||l.num(e))return e===t;if(l.obj(e)&&l.obj(t)&&Object.keys(e).length+Object.keys(t).length===0)return!0;let n;for(n in e)if(!(n in t))return!1;for(n in t)if(e[n]!==t[n])return!1;return!l.und(n)||e===t}};function c(){const e=Object(a.useState)(!1)[1];return Object(a.useCallback)((()=>e((e=>!e))),[])}function s(e,t){return l.und(e)||l.nul(e)?t:e}function u(e){return l.und(e)?[]:l.arr(e)?e:[e]}function d(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return l.fun(e)?e(...n):e}function f(e){const t=function(e){return e.to,e.from,e.config,e.onStart,e.onRest,e.onFrame,e.children,e.reset,e.reverse,e.force,e.immediate,e.delay,e.attach,e.destroyed,e.interpolateTo,e.ref,e.lazy,Object(o.default)(e,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}(e);if(l.und(t))return Object(r.default)({to:t},e);const n=Object.keys(e).reduce(((n,o)=>l.und(t[o])?Object(r.default)({},n,{[o]:e[o]}):n),{});return Object(r.default)({to:t},n)}class p{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){0===this.children.length&&this.attach(),this.children.push(e)}removeChild(e){const t=this.children.indexOf(e);this.children.splice(t,1),0===this.children.length&&this.detach()}}class h extends p{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach((e=>e instanceof p&&e.addChild(this))),this.detach=()=>this.payload.forEach((e=>e instanceof p&&e.removeChild(this)))}}class m extends p{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach((e=>e instanceof p&&e.addChild(this))),this.detach=()=>Object.values(this.payload).forEach((e=>e instanceof p&&e.removeChild(this)))}getValue(e){void 0===e&&(e=!1);const t={};for(const n in this.payload){const r=this.payload[n];(!e||r instanceof p)&&(t[n]=r instanceof p?r[e?"getAnimatedValue":"getValue"]():r)}return t}getAnimatedValue(){return this.getValue(!0)}}let v,g;function b(e,t){v={fn:e,transform:t}}function y(e){g=e}let w,k=e=>"undefined"!=typeof window?window.requestAnimationFrame(e):-1;function x(e){w=e}let E,C=()=>Date.now();function O(e){E=e}let _,S,R=e=>e.current;function j(e){_=e}class A extends m{constructor(e,t){super(),this.update=void 0,this.payload=e.style?Object(r.default)({},e,{style:_(e.style)}):e,this.update=t,this.attach()}}let T=!1;const L=new Set,D=()=>{if(!T)return!1;let e=C();for(let t of L){let n=!1;for(let r=0;r<t.configs.length;r++){let o,a,i=t.configs[r];for(let t=0;t<i.animatedValues.length;t++){let r=i.animatedValues[t];if(r.done)continue;let l=i.fromValues[t],c=i.toValues[t],s=r.lastPosition,u=c instanceof p,d=Array.isArray(i.initialVelocity)?i.initialVelocity[t]:i.initialVelocity;if(u&&(c=c.getValue()),i.immediate)r.setValue(c),r.done=!0;else if("string"!=typeof l&&"string"!=typeof c){if(void 0!==i.duration)s=l+i.easing((e-r.startTime)/i.duration)*(c-l),o=e>=r.startTime+i.duration;else if(i.decay)s=l+d/(1-.998)*(1-Math.exp(-(1-.998)*(e-r.startTime))),o=Math.abs(r.lastPosition-s)<.1,o&&(c=s);else{a=void 0!==r.lastTime?r.lastTime:e,d=void 0!==r.lastVelocity?r.lastVelocity:i.initialVelocity,e>a+64&&(a=e);let t=Math.floor(e-a);for(let e=0;e<t;++e){d+=1*((-i.tension*(s-c)+-i.friction*d)/i.mass)/1e3,s+=1*d/1e3}let n=!(!i.clamp||0===i.tension)&&(l<c?s>c:s<c),u=Math.abs(d)<=i.precision,f=0===i.tension||Math.abs(c-s)<=i.precision;o=n||u&&f,r.lastVelocity=d,r.lastTime=e}u&&!i.toValues[t].done&&(o=!1),o?(r.value!==c&&(s=c),r.done=!0):n=!0,r.setValue(s),r.lastPosition=s}else r.setValue(c),r.done=!0}t.props.onFrame&&(t.values[i.name]=i.interpolation.getValue())}t.props.onFrame&&t.props.onFrame(t.values),n||(L.delete(t),t.stop(!0))}return L.size?S?S():k(D):T=!1,T};function P(e,t,n){if("function"==typeof e)return e;if(Array.isArray(e))return P({range:e,output:t,extrapolate:n});if(w&&"string"==typeof e.output[0])return w(e);const r=e,o=r.output,a=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",l=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,a);return function(e,t,n,r,o,a,i,l,c){let s=c?c(e):e;if(s<t){if("identity"===i)return s;"clamp"===i&&(s=t)}if(s>n){if("identity"===l)return s;"clamp"===l&&(s=n)}if(r===o)return r;if(t===n)return e<=t?r:o;t===-1/0?s=-s:n===1/0?s-=t:s=(s-t)/(n-t);s=a(s),r===-1/0?s=-s:o===1/0?s+=r:s=s*(o-r)+r;return s}(e,a[t],a[t+1],o[t],o[t+1],c,i,l,r.map)}}class M extends h{constructor(e,t,n,r){super(),this.calc=void 0,this.payload=e instanceof h&&!(e instanceof M)?e.getPayload():Array.isArray(e)?e:[e],this.calc=P(t,n,r)}getValue(){return this.calc(...this.payload.map((e=>e.getValue())))}updateConfig(e,t,n){this.calc=P(e,t,n)}interpolate(e,t,n){return new M(this,e,t,n)}}const N=(e,t,n)=>e&&new M(e,t,n);function I(e,t){"update"in e?t.add(e):e.getChildren().forEach((e=>I(e,t)))}class F extends p{constructor(e){var t;super(),t=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(e,n){void 0===n&&(n=!0),t.value=e,n&&t.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){0===this.animatedStyles.size&&I(this,this.animatedStyles),this.animatedStyles.forEach((e=>e.update()))}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,t,n){return new M(this,e,t,n)}}class B extends h{constructor(e){super(),this.payload=e.map((e=>new F(e)))}setValue(e,t){void 0===t&&(t=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach(((e,n)=>this.payload[n].setValue(e,t))):this.payload.forEach((n=>n.setValue(e,t)))}getValue(){return this.payload.map((e=>e.getValue()))}interpolate(e,t){return new M(this,e,t)}}let V=0;class H{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=V++}update(e){if(!e)return this;const t=f(e),n=t.delay,a=void 0===n?0:n,i=t.to,c=Object(o.default)(t,["delay","to"]);if(l.arr(i)||l.fun(i))this.queue.push(Object(r.default)({},c,{delay:a,to:i}));else if(i){let e={};Object.entries(i).forEach((t=>{let n=t[0],o=t[1];const i=Object(r.default)({to:{[n]:o},delay:d(a,n)},c),l=e[i.delay]&&e[i.delay].to;e[i.delay]=Object(r.default)({},e[i.delay],i,{to:Object(r.default)({},l,i.to)})})),this.queue=Object.values(e)}return this.queue=this.queue.sort(((e,t)=>e.delay-t.delay)),this.diff(c),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach((e=>{let t=e.from,n=void 0===t?{}:t,o=e.to,a=void 0===o?{}:o;l.obj(n)&&(this.merged=Object(r.default)({},n,this.merged)),l.obj(a)&&(this.merged=Object(r.default)({},this.merged,a))}));const t=this.local=++this.guid,n=this.localQueue=this.queue;this.queue=[],n.forEach(((r,a)=>{let i=r.delay,c=Object(o.default)(r,["delay"]);const s=r=>{a===n.length-1&&t===this.guid&&r&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let u=l.arr(c.to)||l.fun(c.to);i?setTimeout((()=>{t===this.guid&&(u?this.runAsync(c,s):this.diff(c).start(s))}),i):u?this.runAsync(c,s):this.diff(c).start(s)}))}else l.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),t=this,L.has(t)||L.add(t),T||(T=!0,k(S||D));var t;return this}stop(e){return this.listeners.forEach((t=>t(e))),this.listeners=[],this}pause(e){var t;return this.stop(!0),e&&(t=this,L.has(t)&&L.delete(t)),this}runAsync(e,t){var n=this;e.delay;let a=Object(o.default)(e,["delay"]);const i=this.local;let c=Promise.resolve(void 0);if(l.arr(a.to))for(let e=0;e<a.to.length;e++){const t=e,n=Object(r.default)({},a,f(a.to[t]));l.arr(n.config)&&(n.config=n.config[t]),c=c.then((()=>{if(i===this.guid)return new Promise((e=>this.diff(n).start(e)))}))}else if(l.fun(a.to)){let e,t=0;c=c.then((()=>a.to((n=>{const o=Object(r.default)({},a,f(n));if(l.arr(o.config)&&(o.config=o.config[t]),t++,i===this.guid)return e=new Promise((e=>this.diff(o).start(e)))}),(function(e){return void 0===e&&(e=!0),n.stop(e)})).then((()=>e))))}c.then(t)}diff(e){this.props=Object(r.default)({},this.props,e);let t=this.props,n=t.from,o=void 0===n?{}:n,a=t.to,i=void 0===a?{}:a,c=t.config,f=void 0===c?{}:c,p=t.reverse,h=t.attach,m=t.reset,v=t.immediate;if(p){var b=[i,o];o=b[0],i=b[1]}this.merged=Object(r.default)({},o,this.merged,i),this.hasChanged=!1;let y=h&&h(this);if(this.animations=Object.entries(this.merged).reduce(((e,t)=>{let n=t[0],a=t[1],i=e[n]||{};const c=l.num(a),p=l.str(a)&&!a.startsWith("#")&&!/\d/.test(a)&&!g[a],h=l.arr(a),b=!c&&!h&&!p;let k=l.und(o[n])?a:o[n],x=c||h||p?a:1,E=d(f,n);y&&(x=y.animations[n].parent);let O,_=i.parent,S=i.interpolation,R=u(y?x.getPayload():x),j=a;b&&(j=w({range:[0,1],output:[a,a]})(1));let A=S&&S.getValue();const T=!l.und(_)&&i.animatedValues.some((e=>!e.done)),L=!l.equ(j,A),D=!l.equ(j,i.previous),P=!l.equ(E,i.config);if(m||D&&L||P){if(c||p)_=S=i.parent||new F(k);else if(h)_=S=i.parent||new B(k);else if(b){let e=i.interpolation&&i.interpolation.calc(i.parent.value);e=void 0===e||m?k:e,i.parent?(_=i.parent,_.setValue(0,!1)):_=new F(0);const t={output:[e,a]};i.interpolation?(S=i.interpolation,i.interpolation.updateConfig(t)):S=_.interpolate(t)}return R=u(y?x.getPayload():x),O=u(_.getPayload()),m&&!b&&_.setValue(k,!1),this.hasChanged=!0,O.forEach((e=>{e.startPosition=e.value,e.lastPosition=e.value,e.lastVelocity=T?e.lastVelocity:void 0,e.lastTime=T?e.lastTime:void 0,e.startTime=C(),e.done=!1,e.animatedStyles.clear()})),d(v,n)&&_.setValue(b?x:a,!1),Object(r.default)({},e,{[n]:Object(r.default)({},i,{name:n,parent:_,interpolation:S,animatedValues:O,toValues:R,previous:j,config:E,fromValues:u(_.getValue()),immediate:d(v,n),initialVelocity:s(E.velocity,0),clamp:s(E.clamp,!1),precision:s(E.precision,.01),tension:s(E.tension,170),friction:s(E.friction,26),mass:s(E.mass,1),duration:E.duration,easing:s(E.easing,(e=>e)),decay:E.decay})})}return L?e:(b&&(_.setValue(1,!1),S.updateConfig({output:[j,j]})),_.done=!0,this.hasChanged=!0,Object(r.default)({},e,{[n]:Object(r.default)({},e[n],{previous:j})}))}),this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let e in this.animations)this.interpolations[e]=this.animations[e].interpolation,this.values[e]=this.animations[e].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}}const z=(e,t)=>{const n=Object(a.useRef)(!1),r=Object(a.useRef)(),o=l.fun(t),i=Object(a.useMemo)((()=>{let n;return r.current&&(r.current.map((e=>e.destroy())),r.current=void 0),[new Array(e).fill().map(((e,r)=>{const a=new H,i=o?d(t,r,a):t[r];return 0===r&&(n=i.ref),a.update(i),n||a.start(),a})),n]}),[e]),c=i[0],s=i[1];r.current=c;Object(a.useImperativeHandle)(s,(()=>({start:()=>Promise.all(r.current.map((e=>new Promise((t=>e.start(t)))))),stop:e=>r.current.forEach((t=>t.stop(e))),get controllers(){return r.current}})));const u=Object(a.useMemo)((()=>e=>r.current.map(((t,n)=>{t.update(o?d(e,n,t):e[n]),s||t.start()}))),[e]);Object(a.useEffect)((()=>{n.current?o||u(t):s||r.current.forEach((e=>e.start()))})),Object(a.useEffect)((()=>(n.current=!0,()=>r.current.forEach((e=>e.destroy())))),[]);const f=r.current.map((e=>e.getValues()));return o?[f,u,e=>r.current.forEach((t=>t.pause(e)))]:f},q=e=>{const t=l.fun(e),n=z(1,t?e:[e]),r=n[0],o=n[1],a=n[2];return t?[r[0],o,a]:r};let U=0;const G="enter",W="leave",Y="update",$=(e,t)=>("function"==typeof t?e.map(t):u(t)).map(String),K=e=>{let t=e.items,n=e.keys,a=void 0===n?e=>e:n,i=Object(o.default)(e,["items","keys"]);return t=u(void 0!==t?t:null),Object(r.default)({items:t,keys:$(t,a)},i)};function X(e,t,n){const i=Object(r.default)({items:e,keys:t||(e=>e)},n),l=K(i),s=l.lazy,u=void 0!==s&&s,f=(l.unique,l.reset),p=void 0!==f&&f,h=(l.enter,l.leave,l.update,l.onDestroyed),m=(l.keys,l.items,l.onFrame),v=l.onRest,g=l.onStart,b=l.ref,y=Object(o.default)(l,["lazy","unique","reset","enter","leave","update","onDestroyed","keys","items","onFrame","onRest","onStart","ref"]),w=c(),k=Object(a.useRef)(!1),x=Object(a.useRef)({mounted:!1,first:!0,deleted:[],current:{},transitions:[],prevProps:{},paused:!!i.ref,instances:!k.current&&new Map,forceUpdate:w});return Object(a.useImperativeHandle)(i.ref,(()=>({start:()=>Promise.all(Array.from(x.current.instances).map((e=>{let t=e[1];return new Promise((e=>t.start(e)))}))),stop:e=>Array.from(x.current.instances).forEach((t=>t[1].stop(e))),get controllers(){return Array.from(x.current.instances).map((e=>e[1]))}}))),x.current=function(e,t){let n=e.first,a=e.prevProps,i=Object(o.default)(e,["first","prevProps"]),l=K(t),c=l.items,s=l.keys,u=l.initial,f=l.from,p=l.enter,h=l.leave,m=l.update,v=l.trail,g=void 0===v?0:v,b=l.unique,y=l.config,w=l.order,k=void 0===w?[G,W,Y]:w,x=K(a),E=x.keys,C=x.items,O=Object(r.default)({},i.current),_=[...i.deleted],S=Object.keys(O),R=new Set(S),j=new Set(s),A=s.filter((e=>!R.has(e))),T=i.transitions.filter((e=>!e.destroyed&&!j.has(e.originalKey))).map((e=>e.originalKey)),L=s.filter((e=>R.has(e))),D=-g;for(;k.length;){switch(k.shift()){case G:A.forEach(((e,t)=>{b&&_.find((t=>t.originalKey===e))&&(_=_.filter((t=>t.originalKey!==e)));const r=s.indexOf(e),o=c[r],a=n&&void 0!==u?"initial":G;O[e]={slot:a,originalKey:e,key:b?String(e):U++,item:o,trail:D+=g,config:d(y,o,a),from:d(n&&void 0!==u?u||{}:f,o),to:d(p,o)}}));break;case W:T.forEach((e=>{const t=E.indexOf(e),n=C[t],o=W;_.unshift(Object(r.default)({},O[e],{slot:o,destroyed:!0,left:E[Math.max(0,t-1)],right:E[Math.min(E.length,t+1)],trail:D+=g,config:d(y,n,o),to:d(h,n)})),delete O[e]}));break;case Y:L.forEach((e=>{const t=s.indexOf(e),n=c[t],o=Y;O[e]=Object(r.default)({},O[e],{item:n,slot:o,trail:D+=g,config:d(y,n,o),to:d(m,n)})}))}}let P=s.map((e=>O[e]));return _.forEach((e=>{let t,n=e.left,r=(e.right,Object(o.default)(e,["left","right"]));-1!==(t=P.findIndex((e=>e.originalKey===n)))&&(t+=1),t=Math.max(0,t),P=[...P.slice(0,t),r,...P.slice(t)]})),Object(r.default)({},i,{changed:A.length||T.length||L.length,first:n&&0===A.length,transitions:P,current:O,deleted:_,prevProps:t})}(x.current,i),x.current.changed&&x.current.transitions.forEach((e=>{const t=e.slot,n=e.from,o=e.to,a=e.config,i=e.trail,l=e.key,c=e.item;x.current.instances.has(l)||x.current.instances.set(l,new H);const s=x.current.instances.get(l),d=Object(r.default)({},y,{to:o,from:n,config:a,ref:b,onRest:n=>{if(x.current.mounted){e.destroyed&&(b||u||Z(x,l),h&&h(c));!Array.from(x.current.instances).some((e=>!e[1].idle))&&(b||u)&&x.current.deleted.length>0&&Z(x),v&&v(c,t,n)}},onStart:g&&(()=>g(c,t)),onFrame:m&&(e=>m(c,t,e)),delay:i,reset:p&&t===G});s.update(d),x.current.paused||s.start()})),Object(a.useEffect)((()=>(x.current.mounted=k.current=!0,()=>{x.current.mounted=k.current=!1,Array.from(x.current.instances).map((e=>e[1].destroy())),x.current.instances.clear()})),[]),x.current.transitions.map((e=>{let t=e.item,n=e.slot,r=e.key;return{item:t,key:r,state:n,props:x.current.instances.get(r).getValues()}}))}function Z(e,t){const n=e.current.deleted;for(let r of n){let n=r.key;const o=e=>e.key!==n;(l.und(t)||t===n)&&(e.current.instances.delete(n),e.current.transitions=e.current.transitions.filter(o),e.current.deleted=e.current.deleted.filter(o))}e.current.forceUpdate()}class Q extends m{constructor(e){void 0===e&&(e={}),super(),!e.transform||e.transform instanceof p||(e=v.transform(e)),this.payload=e}}const J={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ee="[-+]?\\d*\\.?\\d+",te=ee+"%";function ne(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}const re=new RegExp("rgb"+ne(ee,ee,ee)),oe=new RegExp("rgba"+ne(ee,ee,ee,ee)),ae=new RegExp("hsl"+ne(ee,te,te)),ie=new RegExp("hsla"+ne(ee,te,te,ee)),le=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ce=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,se=/^#([0-9a-fA-F]{6})$/,ue=/^#([0-9a-fA-F]{8})$/;function de(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function fe(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r,a=de(o,r,e+1/3),i=de(o,r,e),l=de(o,r,e-1/3);return Math.round(255*a)<<24|Math.round(255*i)<<16|Math.round(255*l)<<8}function pe(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function he(e){return(parseFloat(e)%360+360)%360/360}function me(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function ve(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function ge(e){let t=function(e){let t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=se.exec(e))?parseInt(t[1]+"ff",16)>>>0:J.hasOwnProperty(e)?J[e]:(t=re.exec(e))?(pe(t[1])<<24|pe(t[2])<<16|pe(t[3])<<8|255)>>>0:(t=oe.exec(e))?(pe(t[1])<<24|pe(t[2])<<16|pe(t[3])<<8|me(t[4]))>>>0:(t=le.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=ue.exec(e))?parseInt(t[1],16)>>>0:(t=ce.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=ae.exec(e))?(255|fe(he(t[1]),ve(t[2]),ve(t[3])))>>>0:(t=ie.exec(e))?(fe(he(t[1]),ve(t[2]),ve(t[3]))|me(t[4]))>>>0:null}(e);return null===t?e:(t=t||0,`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`)}const be=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ye=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,we=new RegExp(`(${Object.keys(J).join("|")})`,"g");let ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const xe=["Webkit","Ms","Moz","O"];function Ee(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}ke=Object.keys(ke).reduce(((e,t)=>(xe.forEach((n=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(n,t)]=e[t])),e)),ke);const Ce={};j((e=>new Q(e))),O("div"),x((e=>{const t=e.output.map((e=>e.replace(ye,ge))).map((e=>e.replace(we,ge))),n=t[0].match(be).map((()=>[]));t.forEach((e=>{e.match(be).forEach(((e,t)=>n[t].push(+e)))}));const o=t[0].match(be).map(((t,o)=>P(Object(r.default)({},e,{output:n[o]}))));return e=>{let n=0;return t[0].replace(be,(()=>o[n++](e))).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,((e,t,n,r,o)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${o})`))}})),y(J),b(((e,t)=>{if(!e.nodeType||void 0===e.setAttribute)return!1;{const a=t.style,i=t.children,l=t.scrollTop,c=t.scrollLeft,s=Object(o.default)(t,["style","children","scrollTop","scrollLeft"]),u="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName;void 0!==l&&(e.scrollTop=l),void 0!==c&&(e.scrollLeft=c),void 0!==i&&(e.textContent=i);for(let t in a)if(a.hasOwnProperty(t)){var n=0===t.indexOf("--"),r=Ee(t,a[t],n);"float"===t&&(t="cssFloat"),n?e.style.setProperty(t,r):e.style[t]=r}for(let t in s){const n=u?t:Ce[t]||(Ce[t]=t.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())));void 0!==e.getAttribute(n)&&e.setAttribute(n,s[t])}}}),(e=>e));var Oe,_e;const Se=(Oe=e=>Object(a.forwardRef)(((t,n)=>{const s=c(),u=Object(a.useRef)(!0),d=Object(a.useRef)(null),f=Object(a.useRef)(null),p=Object(a.useCallback)((e=>{const t=d.current;d.current=new A(e,(()=>{let e=!1;f.current&&(e=v.fn(f.current,d.current.getAnimatedValue())),f.current&&!1!==e||s()})),t&&t.detach()}),[]);Object(a.useEffect)((()=>()=>{u.current=!1,d.current&&d.current.detach()}),[]),Object(a.useImperativeHandle)(n,(()=>R(f,u,s))),p(t);const h=d.current.getValue(),m=(h.scrollTop,h.scrollLeft,Object(o.default)(h,["scrollTop","scrollLeft"])),g=(b=e,!l.fun(b)||b.prototype instanceof i.a.Component?e=>f.current=function(e,t){return t&&(l.fun(t)?t(e):l.obj(t)&&(t.current=e)),e}(e,n):void 0);var b;return i.a.createElement(e,Object(r.default)({},m,{ref:g}))})),void 0===(_e=!1)&&(_e=!0),e=>(l.arr(e)?e:Object.keys(e)).reduce(((e,t)=>{const n=_e?t[0].toLowerCase()+t.substring(1):t;return e[n]=Oe(n),e}),Oe))(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"])},3361:function(e,t,n){"use strict";n(251);var r=n(116),o=n(0),a=n.n(o),i="DocLoadingView-module_wrapper_dVlCJ";t.a=function(e){return a.a.createElement("div",{className:i},a.a.createElement(r.a,{justify:"block"}))}},3379:function(e,t,n){"use strict";n.d(t,"a",(function(){return ee}));var r=n(0),o=n.n(r),a=n(3389);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function c(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}var u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_root",null),c(this,"rerender",(function(){n._root.forceUpdate(),n._renderHandler&&n._renderHandler()})),c(this,"createRef",(function(){return o.a.createRef()})),this._root=t,this._renderHandler=null,this._bindEvent()}var t,n,r;return t=e,n=[{key:"_bindEvent",value:function(){var e=this;this._root.UNSAFE_componentWillReceiveProps=function(t){e.onRootUpdate(t)},this._root.componentDidMount=function(){e.onRootDidMount()},this._root.componentWillUnmount=function(){e.onRootWillUnMount()}}},{key:"proxyElement",value:function(e,t){return o.a.createElement(a.a,{ref:e},t)}},{key:"createElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1?arguments[1]:void 0;return o.a.createElement(e,t)}},{key:"cloneElement",value:function(e,t){return o.a.cloneElement(e,t)}},{key:"registerRerenderHandler",value:function(e){this._renderHandler=e}}],n&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d=n(264),f=n(106),p=n.n(f),h=n(34),m=n.n(h);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function E(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(a,e);var t,n,r,o=y(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),E(k(t=o.call(this)),"_extendMethodMap",{}),E(k(t),"_extendCommandMap",{}),E(k(t),"onDidChange",(function(){})),E(k(t),"execCommand",(function(e){var n,r=t._extendCommandMap[e];if(!r)throw new Error("ctx.execCommand ".concat(e," not register."));for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];(n=t).emit.apply(n,["activePlugin",r].concat(a))})),E(k(t),"activePlugin",(function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(n=t).emit.apply(n,["activePlugin",e].concat(o))})),t.initData(e),t.debug=p()("doc:plugin"),t._pluginEvent=new m.a,t._optionEvent=new m.a,t}return t=a,n=[{key:"initData",value:function(e){this._options=e,this._group=e.group,this._book=e.book,this._doc=e.doc,this._me=e.me,this._version=e.version,this._note=e.note,this._organization=e.organization,this._history=e.history,this._location=e.location,this._match=e.match,this._dispatch=e.dispatch}},{key:"update",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],o=t._options[n];r!==o&&(t._optionEvent.emit("".concat(n,"Changed"),r,o),t.debug("option key change, new %j, old %j",r,o))})),this.initData(e),this._optionEvent.emit("changed")}},{key:"getOption",value:function(e){return this._options[e]}},{key:"doc",get:function(){return this._doc}},{key:"me",get:function(){return this._me}},{key:"book",get:function(){return this._book}},{key:"group",get:function(){return this._group}},{key:"organization",get:function(){return this._organization}},{key:"version",get:function(){return this._version}},{key:"note",get:function(){return this._note}},{key:"abilities",get:function(){return this._doc.abilities}},{key:"editable",get:function(){return!(this.doc.abilities&&!this.doc.abilities.update)&&(window.appData.matchCondition.editType||this.isRunAtRaw)}},{key:"isPublicCloud",get:function(){return window.appData.isPublicCloud}},{key:"isSharePage",get:function(){return window.appData.sharePage}},{key:"share",get:function(){return window.appData.share}},{key:"isAnonymous",get:function(){var e;return!(null!==(e=this.me)&&void 0!==e&&e.id)}},{key:"isRunAtRaw",get:function(){return d.a.isRunAtRaw(this.doc)}},{key:"history",get:function(){return this._history}},{key:"location",get:function(){return this._location}},{key:"match",get:function(){return this._match}},{key:"dispatch",get:function(){return this._dispatch}},{key:"registerCommand",value:function(e,t){if(this._extendCommandMap[t])throw new Error("command ".concat(t," has init before."));this._extendCommandMap[t]=e}},{key:"getCommand",value:function(e){for(var t=0,n=Object.values(this._extendCommandMap);t<n.length;t++){var r=n[t];if(this._extendCommandMap[r]===e)return r}return null}},{key:"extend",value:function(e,t){this[e]=t,this._extendMethodMap[e]=t}},{key:"onPluginEvent",value:function(e,t){this._pluginEvent.on(e,t)}},{key:"emitPluginEvent",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=this._pluginEvent).emit.apply(t,[e].concat(r))}},{key:"onOptionEvent",value:function(e,t){this._optionEvent.on(e,t)}}],n&&g(t.prototype,n),r&&g(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(m.a),_=n(75),S=n.n(_);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D(r.key),r)}}function L(e,t,n){return(t=D(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){var t=function(e,t){if("object"!==R(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===R(t)?t:String(t)}var P=["setState","getState","reset","on","emit","_event","defaultState","_event"],M=function(){function e(t){var n=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),L(this,"setState",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=S()(n._state);n._state=A(A({},t),e),Object.keys(e).forEach((function(r){t[r]!==e[r]&&n.emit("".concat(r,"Changed"))})),n.emit("changed")})),L(this,"getState",(function(e){return Array.isArray(e)?e.reduce((function(e,t){return e[t]=n._state[t],e}),{}):n._state[e]})),L(this,"reset",(function(){n._state=S()(n.defaultState)})),this.defaultState=S()(t.state),this._state=t.state||{},this._event=new m.a,new Proxy(this,{get:function(e,t,n){return e[t]&&P.includes(t)?Reflect.get(e,t,n):e._state[t]},set:function(e,t,n){return!P.includes(t)&&(e.setState(L({},t,n)),!0)}})}var t,n,r;return t=e,n=[{key:"on",value:function(){var e;(e=this._event).on.apply(e,arguments)}},{key:"emit",value:function(e){this._event.emit(e)}}],r=[{key:"init",value:function(t){return new e(t)}}],n&&T(t.prototype,n),r&&T(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),N=M,I=n(3222);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function B(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K(r.key),r)}}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var o=Y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return G(this,n)}}function G(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return W(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}function $(e,t,n){return(t=K(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){var t=function(e,t){if("object"!==F(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===F(t)?t:String(t)}var X=p()("doc:PluginLoader"),Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(a,e);var t,n,r,o=U(a);function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),$(W(r=o.call(this)),"_instance",new Map),$(W(r),"init",(function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=V(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(r._instance.values());try{for(t.s();!(e=t.n()).done;){e.value.init(),X("".concat(Plugin.name," has been inited."))}}catch(e){t.e(e)}finally{t.f()}})),r.ctx=e,r.renderCtx=t,r._extendContext(e),r.load(n),r.on("didMount",(function(){r.getAllPlugins().forEach((function(t){t.didMount(e)}))})),r.on("willUnMount",(function(){r.getAllPlugins().forEach((function(t){var n;null===(n=t.state)||void 0===n||n.reset(),t.willUnMount(e)}))})),r.ctx.on("activePlugin",(function(e){for(var t,n=r.getPlugin(e),o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];(t=r).activePlugin.apply(t,[n].concat(a))})),r}return t=a,n=[{key:"load",value:function(e){var t=this;e.filter((function(e){return!!e})).forEach((function(e){if(!e.pluginName)throw new Error("Plugin not valid ".concat(e));if("function"!=typeof e)throw new Error("Plugin is not a function ".concat(e));t.loadPlugin(e)}))}},{key:"loadPlugin",value:function(e){var t=new e(this.ctx,this.renderCtx);if(!(t=this._proxyInstance(t,this.ctx)).enable())return!1;this._extendPlugin(t),X("".concat(e.name," has been loaded.")),this._instance.set(e.pluginName,t)}},{key:"_extendPlugin",value:function(e){var t=this;if(e.state){var n=N.init(e);e.state=n,e.setState=n.setState.bind(n),e.getState=n.getState.bind(n),n.on("changed",(function(){t.renderCtx.rerender()}))}}},{key:"_extendContext",value:function(e){e.extend("render",(function(e,t){return function(n){return n._props=t,Object(I.a)(e,t,(function(e){n._proxy=e}))}}))}},{key:"getPlugin",value:function(e){return this._instance.get(e)}},{key:"getAllPlugins",value:function(){return B(this._instance.values())}},{key:"activePlugin",value:function(e){if("string"==typeof e&&(e=this.getPlugin(e)),!e)return console.warn("Plugin not found");if(e.active){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=e).active.apply(t,r)}}},{key:"_proxyInstance",value:function(e,t){return new Proxy(e,{get:function(n,r,o){return["init","mount","render","enable","active"].includes(r)?function(){if(!e[r])return null;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var i=e[r].apply(e,[t].concat(o));return"render"===r&&i&&"function"==typeof i?i(e):i}:Reflect.get(n,r,o)}})}}],n&&z(t.prototype,n),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(m.a);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==Q(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Q(a)?a:String(a)),r)}var o,a}var ee=function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,!t.entry)throw new Error("render ".concat(t.entry," argument missing."));this.renderCtx=new u(t.entry),this.renderCtx.onRootUpdate=function(e){n.update(e)},this.renderCtx.onRootDidMount=function(){n.didMount()},this.renderCtx.onRootWillUnMount=function(){n.willUnMount()},this.pluginCtx=new O(t),this.pluginLoader=new Z(this.pluginCtx,this.renderCtx,t.plugins)}var t,n,r;return t=e,(n=[{key:"render",value:function(){}},{key:"didMount",value:function(){this.pluginLoader.emit("didMount")}},{key:"willUnMount",value:function(){this.pluginLoader.emit("willUnMount")}},{key:"update",value:function(e){this.pluginCtx.update(e),this.options=e,this.renderCtx.rerender()}}])&&J(t.prototype,n),r&&J(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},3389:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(0),o=n.n(r);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(l,e);var t,n,r,a=p(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e))._props=e.props,t._ref=o.a.createRef(),t}return t=l,(n=[{key:"getRef",value:function(){return this._ref.current}},{key:"update",value:function(e){this._props=c(c({},this._props),e),this.forceUpdate()}},{key:"render",value:function(){var e=this.props.component;return"function"===e.type?o.a.createElement(e.type,i({},this._props,{ref:this._ref}),e.props.children):o.a.createElement(e,i({},this._props,{ref:this._ref}))}}])&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(o.a.Component)},353:function(e,t,n){e.exports={type:n(1455)}},3621:function(e,t,n){"use strict";t.a={viewWrap:"index-module_viewWrap_ac9qb",wrapper:"index-module_wrapper_2UYQ6",wrapperDragging:"index-module_wrapperDragging_1FAzp",docTypographyClassic:"index-module_docTypographyClassic_9e49d",content:"index-module_content_f71x+",center:"index-module_center_vTCTC",footer:"index-module_footer_Y-N3T",footerItem:"index-module_footerItem_WL9Si",quickContent:"index-module_quickContent_-hG7O"}},3646:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),l=n(106),c=n.n(l),s=n(2746),u=n(2774),d=n(3104),f=n(2766);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(){h=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new S(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function m(){}function v(){}var g={};c(g,a,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(R([])));y&&y!==t&&n.call(y,a)&&(g=y);var w=v.prototype=f.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==p(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=C(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return m.prototype=v,r(w,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:m,configurable:!0}),m.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(x.prototype),c(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(w),c(w,l,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function m(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,l,"next",e)}function l(e){m(a,r,o,i,l,"throw",e)}i(void 0)}))}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function C(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(i,e);var t,n,r,o,a=w(i);function i(){var e;g(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return C(x(e=a.call.apply(a,[this].concat(n))),"setContent",function(){var t=v(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.engine.setContent(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),C(x(e),"initCollab",(function(t){return e.engine.setOT(t)})),C(x(e),"getValue",(function(){return e.engine.getValue()})),C(x(e),"getPureContent",(function(){return e.engine.getValue()})),C(x(e),"getEditorContent",(function(t){return{content:e.engine.getValue(t),html:null,premium:null,premiumHtml:null}})),C(x(e),"getThumbnail",(function(){return d.a.canvasToThumbnail(e.engine.viewManager.getCanvas())})),C(x(e),"getDocMeta",(function(t){return e.engine.getMetaData()})),C(x(e),"isEmpty",(function(){return e.engine.isEmptyTable()})),C(x(e),"readonly",(function(t){t?e.engine.disable():e.engine.enable()})),C(x(e),"requestRecords",v(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.engine.requestRecords();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))),e}return t=i,n=[{key:"init",value:(o=v(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.content,t.onFocus,e.next=3,this.setContent(n);case 3:(r=f.a.getSheetStoredPosition(this.doc.id))&&this.engine.setPosition(r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"onCommandEnd",value:function(e){this.engine.on("commandEnd",(function(t,n){e(s.EDITOR_NAME.TABLE,t,n)}))}}],n&&b(t.prototype,n),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(u.a),S=_,R=n(297),j=n(605),A=(n(63),n(23)),T=n(2986),L=n(418),D=n(1417),P=n(3225),M=n(873),N=n(264),I=n(471),F=n(2803),B=n(147),V=n(33),H=n(1463),z="LakeTableEditor-module_wrap_zuf1R",q=new c.a("table:laketable.editor"),U=null;function G(e){var t=e.docId,n=e.content,a=function(){},i=e.onChange||a,l=e.onSave||a,c=Object(r.useRef)(!1);q("render lake table editor",e);var u=function(t){t.on("dataReady",(function(){c.current=!0})),t.on("save",(function(){c.current&&l(s.SAVE_TYPE.USER_SAVE)})),t.on("changed",(function(){c.current&&(q("table data change"),i())})),t.on("unSupportFileUpload",(function(e){A.a.warning(Object(D.a)(e.extName))})),t.kernel.on("recordSyncSaving",(function(t){c.current&&e.onRecordStatusChange&&e.onRecordStatusChange("saving")})),t.kernel.on("recordSyncSuccess",(function(t){c.current&&e.onRecordStatusChange&&e.onRecordStatusChange("success")})),t.kernel.on("recordSyncFailure",(function(t){c.current&&e.onRecordStatusChange&&e.onRecordStatusChange("failure")})),e.onLoad(t),U=t},d=V.a.tables,f=V.a.shares,p=V.a.users,h=Object(r.useMemo)((function(){q("build editor",n);var r=P.a.contentToLakeTable(n);return o.a.createElement("div",{className:z,"data-testid":"table-editor"},o.a.createElement(T.Editor,{docId:t,docType:e.docType,type:e.type,data:r,onLoad:u,abilities:e.abilities,webProxy:{tables:d,shares:f,users:p},webSdk:H.a,mention:e.mention,themeManager:window.appData.themeManager||new L.DefaultThemeManager,defaultPosition:e.defaultPosition,image:{uploadAction:e.imageUploadUrl||N.a.imageUploadUrl({docId:t,docDomain:e.docType}),quickUploadAction:N.a.imageUploadUrl({docId:t,docDomain:e.docType,isQuick:!0}),accept:Object(M.getImageAccept)()},file:{uploadAction:e.fileUploadUrl||N.a.fileUploadUrl({docId:t,docDomain:e.docType}),quickUploadAction:N.a.fileUploadUrl({docId:t,docDomain:e.docType,isQuick:!0}),accept:Object(M.getFileAccept)()},lang:I.a.localeToLakeLang(window.appData.locale),ot:e.ot,disableHotkeyMenu:e.disableHotkeyMenu}))}),[n]);return Object(r.useEffect)((function(){var t,n;(q("edit disable status change:",e.disabled),U)&&(e.disabled?null===(t=U)||void 0===t||t.disable():null===(n=U)||void 0===n||n.enable())}),[e.disabled]),Object(r.useEffect)((function(){F.a.epv({type:"Table",id:t})}),[]),h}G.propTypes={docId:i.a.number.isRequired,docType:i.a.string.isRequired,type:i.a.string.isRequierd,content:i.a.string,defaultPosition:i.a.object,mention:i.a.object,onSave:i.a.func,onChange:i.a.func,onLoad:i.a.func.isRequired,disabled:i.a.bool.isRequired,ot:i.a.bool,disableHotkeyMenu:i.a.bool,imageUploadUrl:i.a.string,fileUploadUrl:i.a.string};var W=Object(B.b)(G,!0,__("数据出错，请通过历史恢复到最近的正确版本，重新编辑"));function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=c()("editor:table.view");function X(e){var t=e.doc,n=e.openEditorConfig,a=function(){var e=function(){return document.body.clientHeight-60},t=Y(Object(r.useState)(e()),2),n=t[0],o=t[1];return Object(r.useEffect)((function(){var t=function(){o(e())};return window.addEventListener("resize",t,!1),function(){window.removeEventListener("resize",t)}})),{state:{viewHeight:n}}}(),i=a.state.viewHeight;return K("height:",i),"laketable"!==t.format?null:o.a.createElement("div",{style:{height:i}},o.a.createElement(W,{docId:t.id,docType:t.category?R.DOCLET:R.DOC,type:t.type,abilities:t.abilities,content:null,height:i,mention:{defaultList:e.getDefaultSuggestions},onSave:e.onSave,onChange:e.onContentChange,onLoad:function(n){var r=new S(t,n);n.kernel.on("connectionError",e.onConnnectError),e.onEditorLoaded({engine:r})},disabled:!e.editable,disableHotkeyMenu:n.isEmbedMode,onRecordStatusChange:e.onRecordStatusChange,maxRecordCount:j.MAX_RECORD_COUNT}))}X.defaultProps={onConnnectError:function(){}},X.propTypes={doc:i.a.object.isRequired,editable:i.a.bool,openEditorConfig:i.a.object.isRequired,onEditorLoaded:i.a.func,onSave:i.a.func,onRecordStatusChange:i.a.func,onContentChange:i.a.func,onConnnectError:i.a.func};t.a=X},3676:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(0),o=n.n(r),a=n(3379),i=n(3160),l=n(3361),c=n(3621);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function b(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(s,e);var t,n,r,a=h(s);function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),b(v(t=a.call(this,e)),"_resize",(function(){t._ref.current&&(t._ref.current.style.height="".concat(t._getViewHeight(),"px"))})),b(v(t),"_getViewHeight",(function(){return document.body.clientHeight-60})),t.headers=e.headers,t.bodys=e.bodys,t.footers=e.footers,t._ref=o.a.createRef();var n=[];return t._uiHeaderConfig={},t.pluginCtx.extend("registerUIHeader",(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t._uiHeaderConfig[e]=r,n.push(e)})),t._uiBodyConfig={},t.pluginCtx.extend("registerUIBody",(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t._uiBodyConfig[e]=r,n.push(e)})),t._uiFooterConfig={},t.pluginCtx.extend("registerUIFooter",(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t._uiFooterConfig[e]=r,n.push(e)})),t._uiDrawerConfig={},t.pluginCtx.extend("registerUIDrawer",(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t._uiDrawerConfig[e]=r,n.push(e)})),t.pluginLoader.init(),t.otherPlugins=t.options.plugins.filter((function(e){return!n.includes(e.pluginName)})),t}return t=s,(n=[{key:"didMount",value:function(){window.addEventListener("resize",this._resize,!1),d(g(s.prototype),"didMount",this).call(this)}},{key:"willUnMount",value:function(){window.removeEventListener("resize",this._resize,!1),d(g(s.prototype),"willUnMount",this).call(this)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,this.renderContainer(),this.otherPlugins.map((function(t){var n=e.pluginLoader.getPlugin(t.pluginName);return n?n.render():null})))}},{key:"getHeader",value:function(){var e=this.headers[0];return this.pluginLoader.getPlugin(e)}},{key:"renderContainer",value:function(){var e=this.options.doc;return e.error?o.a.createElement(i.a,{error:e.error}):e.loaded?o.a.createElement("div",{className:c.a.wrapper},this.renderBody(),this.renderDrawer(),this.renderFooter()):o.a.createElement(l.a,null)}},{key:"renderBody",value:function(){var e=this;return o.a.createElement("div",{className:c.a.content},o.a.createElement("div",{className:c.a.center,ref:this._ref,style:{height:this._getViewHeight()}},this.bodys.map((function(t){var n=e.pluginLoader.getPlugin(t);return n&&e._uiBodyConfig[t]?n.render():null}))))}},{key:"renderDrawer",value:function(){var e=this,t=Object.keys(this._uiDrawerConfig);return o.a.createElement("div",{className:c.a.drawer},t.map((function(t){var n=e.pluginLoader.getPlugin(t);return n?o.a.createElement("div",{className:c.a.drawerItem},n.render()):null})))}},{key:"renderFooter",value:function(){var e=this;return o.a.createElement("div",{className:c.a.footer},this.footers.map((function(t){var n=e.pluginLoader.getPlugin(t);return n?o.a.createElement("div",{className:c.a.footerItem},n.render()):null})))}}])&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(a.a)},3677:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(2942),o=n(3028),a=n(2770);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(){l=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),l=new S(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var p={};function h(){}function m(){}function v(){}var g={};u(g,a,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(R([])));y&&y!==t&&n.call(y,a)&&(g=y);var w=v.prototype=h.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(r,a,l,c){var s=f(e[r],e,a);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==i(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,l,c)}),(function(e){o("throw",e,l,c)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return o("throw",e,l,c)}))}c(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=C(i,n);if(l){if(l===p)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return m.prototype=v,r(w,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,c,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new x(d(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(w),u(w,s,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function c(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,l,"next",e)}function l(e){c(a,r,o,i,l,"throw",e)}i(void 0)}))}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(c,e);var t,n,r,i=p(c);function c(){var e;u(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(m(e=i.call.apply(i,[this].concat(n))),"_initWorkflow",(function(){var t=m(e).ctx;e.editWorkflow=new o.a({me:t.me,doc:t.doc,docDomain:t.getOption("docDomain"),book:t.book,group:t.group,dispatch:t.dispatch,mode:o.a.EDIT_MODE.COLLAB_CUSTOM,scene:o.a.EDIT_SCENE.WEB,disableAutoSave:!0})})),g(m(e),"_start",s(l().mark((function t(){var n,r,o,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=m(e),r=n.ctx,o=m(e),(i=o.editWorkflow).on(a.i.saveTitle,(function(e){r.debug("title change to:",e),"Doclet"!==r.getOption("docDomain")?r.dispatch({type:"doc/update",payload:{title:e}}):r.dispatch({type:"template/update",payload:{name:e}})})),t.next=5,i.start(r.doc);case 5:i.emit("editorInited");case 6:case"end":return t.stop()}}),t)})))),e}return t=c,(n=[{key:"init",value:function(e){this._initWorkflow(),e.extend("editWorkflow",this.editWorkflow)}},{key:"active",value:function(){this._start()}}])&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.a);g(y,"pluginName","editWorkflow")},3678:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n(0),n(36);var r=n(2942),o=n(2770),a=n(3030);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function h(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(d,e);var t,n,r,i=u(d);function d(){var e;l(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return h(f(e=i.call.apply(i,[this].concat(n))),"state",{error:null,wfMessage:null,docStatus:o.a.loading}),h(f(e),"_buildProps",(function(){var t=f(e).ctx;return{book:t.bok,doc:t.doc,error:e.state.error,wfMessage:e.state.wfMessage,docStatus:e.state.docStatus,onReload:function(){t.editWorkflow.cache(),t.editWorkflow.start()},onClear:function(){t.editWorkflow.clearError()}}})),e}return t=d,(n=[{key:"init",value:function(e){var t=this;e.editWorkflow.on(o.i.message,(function(e){t.setState({wfMessage:e})})),e.editWorkflow.on(o.i.error,(function(e){t.setState({error:e})})),e.editWorkflow.on(o.i.docStatusChange,(function(e){t.setState({docStatus:e})}))}},{key:"render",value:function(e){a.a,this._buildProps(),document.querySelector("body")}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),d}(r.a);h(v,"pluginName","status")},3679:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(63);var r=n(23),o=n(0),a=n.n(o),i=n(54),l=n.n(i),c=n(2942),s=n(2770),u=n(3646),d=n(33),f=n(2766);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(){h=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new S(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function m(){}function v(){}var g={};c(g,a,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(R([])));y&&y!==t&&n.call(y,a)&&(g=y);var w=v.prototype=f.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==p(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=C(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return m.prototype=v,r(w,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:m,configurable:!0}),m.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(x.prototype),c(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(w),c(w,l,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function m(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,l,"next",e)}function l(e){m(a,r,o,i,l,"throw",e)}i(void 0)}))}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function C(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(c,e);var t,n,o,i=w(c);function c(){var e;g(this,c);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return C(x(e=i.call.apply(i,[this].concat(n))),"state",{editable:!1}),C(x(e),"_buildProps",(function(){var t,n=x(e).ctx,r=window.appData&&window.appData.matchCondition&&window.appData.matchCondition.useEditorTileRendering,o=window.appData&&window.appData.matchCondition&&window.appData.matchCondition.useEditorTileRenderingForOT;return{key:n.doc.id,doc:n.doc,book:n.book,group:n.group,editable:e.state.editable,onSave:e._onSave,onRecordStatusChange:e._onRecordStatusChange,onEditorLoaded:e._onLoad,getDefaultSuggestions:(t=v(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.users.listDocContextUsers({id:n.doc.id});case 2:if(0!==(t=e.sent).length){e.next=5;break}return e.abrupt("return",[n.me]);case 5:return t.find((function(e){return e.login===n.me.login}))||t.unshift(n.me),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),onConnnectError:function(){n.editWorkflow.emit(s.i.netStatusChange,"offline")},onContentChange:e._onContentChange,isDefaultTitle:function(e){return n.editWorkflow.isDefaultTitle(e)},openEditorConfig:n.editWorkflow.getOpenEditorConfig(),onMiniEditorExpandChange:n.editWorkflow.onMiniEditorExpandChange,useEditorTileRendering:r,useEditorTileRenderingForOT:o,focusOnLoaded:!0}})),C(x(e),"_onLoad",(function(t){var n=t.engine,r=x(e).ctx,o=f.a.getSheetStoredPosition(r.doc.id);(o&&n.setPosition(o),r.editWorkflow.onEditorLoaded({engine:n}),r.activePlugin("editWorkflow"),r.activePlugin("collabOT"),r.collabOT)&&n.initCollab(r.collabOT).on("memberChange",(function(e){r.editWorkflow.emit(s.i.collabUsersChange,e)}));r.emitPluginEvent("editorLoaded",{engine:n})})),C(x(e),"_onContentChange",l()((function(t){var n=e.ctx.editWorkflow;n.save(s.h.AUTO),n.onContentChange(t)}),800)),C(x(e),"_onSave",(function(t){e.ctx.editWorkflow.save(s.h.USER_PUBLISH),r.a.destroy(),r.a.success(__("文档已保存"))})),C(x(e),"_onRecordStatusChange",(function(t){x(e).ctx.emitPluginEvent("recordStatusChanged",t)})),e}return t=c,(n=[{key:"init",value:function(e){e.registerUIBody(c.pluginName)}},{key:"render",value:function(e){return"Table"!==e.doc.type?null:a.a.createElement(u.a,this._buildProps())}},{key:"_bindEvent",value:function(){var e=this;this.ctx.editWorkflow.on(s.i.editableChange,(function(t){e.setState({editable:t})}))}}])&&b(t.prototype,n),o&&b(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(c.a);C(_,"pluginName","editor")},3680:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(2942),o=n(2770),a=n(633);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(){l=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),l=new S(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var p={};function h(){}function m(){}function v(){}var g={};u(g,a,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(R([])));y&&y!==t&&n.call(y,a)&&(g=y);var w=v.prototype=h.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(r,a,l,c){var s=f(e[r],e,a);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==i(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,l,c)}),(function(e){o("throw",e,l,c)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return o("throw",e,l,c)}))}c(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=C(i,n);if(l){if(l===p)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return m.prototype=v,r(w,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,c,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new x(d(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(w),u(w,s,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function c(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,l,"next",e)}function l(e){c(a,r,o,i,l,"throw",e)}i(void 0)}))}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}var y=Object(a.a)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(6),n.e(10),n.e(106)]).then(n.bind(null,3795))}}),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(i,e);var t,n,r,a=p(i);function i(){var e;u(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(m(e=a.call.apply(a,[this].concat(n))),"state",{editable:!1,error:null,collabUsers:[],docStatus:null,editMode:o.b.COLLAB_CUSTOM,netStatus:"",saving:!1,saved:null}),g(m(e),"_buildProps",(function(){var t=m(e).ctx;return{key:"doc-header-".concat(t.doc.id),pageReady:e.state.editable&&e.state.docStatus!==o.a.loading,editing:e.state.editable,publishing:e.state.docStatus===o.a.publishing||!!t.editWorkflow.publishing,saving:e.state.saving||!!t.editWorkflow.saving,savedAt:e.state.saved,collabUsers:e.state.editMode===o.b.COLLAB_CUSTOM?e.state.collabUsers:null,showTitle:!!t.doc.title,shortDocTitle:window.appData.isDocCollaborator,publish:e._onPublish,save:e._onSave,showHistory:"Table"!==t.doc.type&&function(){t.execCommand("history")},netStatus:e.state.netStatus,getSummary:t.editWorkflow.getSummary,getWordCount:t.editWorkflow.getWordCount,onDeleted:function(){t.editWorkflow.deleteDoc()},errorStatus:e.state.error}})),g(m(e),"_onPublish",function(){var t=s(l().mark((function t(n){var r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=m(e),(o=r.ctx).debug("on publish:",n),t.next=4,o.editWorkflow.publish(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),g(m(e),"_onSave",function(){var t=s(l().mark((function t(n){var r,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=m(e),a=r.ctx,t.next=3,a.editWorkflow.save(n||o.h.USER_SAVE);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}return t=i,(n=[{key:"init",value:function(e){e.registerUIHeader(i.pluginName),this._bindEvent()}},{key:"_bindEvent",value:function(){var e=this,t=this.ctx;t.editWorkflow.on(o.i.error,(function(t){e.setState({error:t})})),t.editWorkflow.on(o.i.editableChange,(function(t){e.setState({editable:t})})),t.editWorkflow.on(o.i.collabUsersChange,(function(t){e.setState({collabUsers:t})})),t.editWorkflow.on(o.i.docStatusChange,(function(t){e.setState({docStatus:t,saving:t===o.a.saving}),t===o.a.saved&&e.setState({saved:new Date})})),t.editWorkflow.on(o.i.editModeChange,(function(t){e.setState({editMode:t})})),t.editWorkflow.on(o.i.netStatusChange,(function(t){e.setState({netStatus:t})})),window.addEventListener("offline",(function(t){e.setState({netStatus:"offline"})})),window.addEventListener("online",(function(t){e.setState({netStatus:""})})),t.onPluginEvent("recordStatusChanged",(function(t){"saving"===t?e.setState({saving:!0}):"success"===t?e.setState({saving:!1,saved:new Date}):e.setState({saving:!1})}))}},{key:"getComponent",value:function(){return y}},{key:"getProps",value:function(){return this._buildProps()}}])&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.a);g(w,"pluginName","header")},3700:function(e,t,n){"use strict";n.d(t,"a",(function(){return It}));var r=n(0),o=n.n(r),a=n(2942),i=(n(279),n(136)),l=n(2975),c=n(2),s=n.n(c),u=n(570),d=(n(166),n(31)),f=n(30),p=n(3379),h={popover:"index-module_popover_1szDi",helperCenter:"index-module_helperCenter_BMZwL",helperCenterItem:"index-module_helperCenterItem_82dGJ",helperCenterIcon:"index-module_helperCenterIcon_pARUk"};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function x(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(i,e);var t,n,r,a=b(i);function i(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),n=w(t),o=function(e){var n=e.key,r=t.pluginLoader.getPlugin(n);if(r){var o=t.uiPlugins.find((function(e){return e.pluginName===n})).config;if(t.options.onMenuClick(r,o),o.link)return window.open(o.link,"_blank");r.active()}},(r=x(r="handleMenuClick"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.uiPlugins=[],t.pluginCtx.extend("registerUIHelperCenter",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.uiPlugins.push({pluginName:e,config:n})})),t.pluginLoader.init(),t}return t=i,(n=[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:h.helperCenter},o.a.createElement(d.a,{selectable:!1,onClick:this.handleMenuClick},this.uiPlugins.map((function(t){var n=t.pluginName,r=t.config,o=e.pluginLoader.getPlugin(n);return o?e.renderByItem(o,r):null}))))}},{key:"renderByItem",value:function(e,t){return o.a.createElement(d.a.Item,{key:e.constructor.pluginName},o.a.createElement("div",{className:h.helperCenterItem},o.a.createElement(f.b,{className:h.helperCenterIcon,name:t.iconName,width:14}),o.a.createElement("div",{className:h.helperCenterTitle},t.title)))}}])&&v(t.prototype,n),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(p.a),C=E,O=n(3222),_=(n(62),n(21)),S="index-module_notice_d2YIN",R="index-module_wrapper_Y3FXP",j="index-module_bg_Jw+xr",A="index-module_close_FEJiz",T="index-module_body_5eBPE",L="index-module_title_N280V",D="index-module_content_5iglo",P="index-module_footer_OSvQ5",M="index-module_docUrl_Nmrcd";function N(e){return o.a.createElement("div",{className:"".concat(S," ").concat(e.className),style:e.style},o.a.createElement("div",{className:R},o.a.createElement("div",null,e.bgImg&&o.a.createElement("div",{className:j,style:{backgroundImage:'url("'.concat(e.bgImg,'")')}}),o.a.createElement(f.b,{name:"close",size:14,className:A,onClick:e.onClose})),o.a.createElement("div",{className:T},o.a.createElement("h2",{className:L},e.title),o.a.createElement("p",{className:D},e.content),o.a.createElement("div",{className:P},e.docUrl&&o.a.createElement("a",{href:e.docUrl,className:M,target:"_blank",onClick:e.onClose},__("查看原文")),o.a.createElement(_.a,{type:"primary",onClick:e.onClose},__("知道了"))))))}N.propTypes={className:s.a.string,title:s.a.string,content:s.a.string,docUrl:s.a.string,bgImg:s.a.string,onClose:s.a.func};var I,F=N,B="index-module_showIn_c87hw",V="index-module_showOut_4vzs3";function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function z(){z=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new O(o||[]);return r(i,"_invoke",{value:k(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function p(){}function h(){}var m={};c(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(_([])));g&&g!==t&&n.call(g,a)&&(m=g);var b=h.prototype=f.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==H(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,r(b,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,l,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=_,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function q(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){q(a,r,o,i,l,"next",e)}function l(e){q(a,r,o,i,l,"throw",e)}i(void 0)}))}}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J(r.key),r)}}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var o=Z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return X(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}function Q(e,t,n){return(t=J(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){var t=function(e,t){if("object"!==H(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===H(t)?t:String(t)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(a,e);var t,n,r,o=$(a);function a(){var e;G(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Q(X(e=o.call.apply(o,[this].concat(n))),"_onClose",U(z().mark((function t(){return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:I.update({className:V}),setTimeout((function(){e._dispose(),localStorage.setItem("featurePreviewReaded-tableRaw","1")}),300);case 2:case"end":return t.stop()}}),t)})))),Q(X(e),"_dispose",(function(){I&&(I.dispose(),I=null)})),e}return t=a,(n=[{key:"init",value:function(e){e.registerUIHelperCenter&&e.registerUIHelperCenter(a.pluginName,{iconName:"feature-preview",title:__("新功能")})}},{key:"willUnMount",value:function(){this._dispose()}},{key:"active",value:function(e){I||(I=Object(O.b)(F,{title:"Hi, ".concat(e.me.name),content:"为了更顺畅的使用体验，数据表现已支持直接编辑，且内容实时更新，无需手动点击编辑/发布。",bgImg:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*czBqRpAWSM4AAAAAAAAAAAAAARQnAQ",docUrl:"https://www.yuque.com/yuque/cqb86p/edwqa5",onClose:this._onClose,style:{bottom:"90px"},className:B}))}}])&&W(t.prototype,n),r&&W(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.a);Q(ee,"pluginName","featurePreview");var te=n(3186);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,se(r.key),r)}}function ae(e,t){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ae(e,t)}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return le(this,n)}}function le(e,t){if(t&&("object"===ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function se(e){var t=function(e,t){if("object"!==ne(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ne(t)?t:String(t)}var ue,de,fe,pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ae(e,t)}(a,e);var t,n,r,o=ie(a);function a(){return re(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"init",value:function(e){e.registerUIHelperCenter(a.pluginName,{iconName:"download2",title:__("下载移动端")})}},{key:"active",value:function(e){this.model&&this.model.dispose(),this.model=Object(O.b)(te.default,{visible:!0,showCornerBubble:!1,bubbleStyle:{position:"static"}})}}])&&oe(t.prototype,n),r&&oe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.a);ue=pe,fe="appDownload",(de=se(de="pluginName"))in ue?Object.defineProperty(ue,de,{value:fe,enumerable:!0,configurable:!0,writable:!0}):ue[de]=fe;n(2655);var he=n(3046),me=n(25),ve=n(75),ge=n.n(ve),be={"↑":"Page Up","↓":"Page Down","←":"Home","→":"End",F2:"F2"};function ye(e){return e.map((function(e){var t=ge()(e.hotkeys);return{name:e.name,hotkeys:t.map((function(e){return me.ua.macos||(e.keys=function(e){for(var t=[],n=0;n<e.length;n++)"⌘"===e[n]?t.push("Ctrl"):"Option"===e[n]?t.push("Alt"):"Fn"===e[n]?(t.push(be[e[n+1]]),n++):t.push(e[n]);return t}(e.keys)),e}))}}))}function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_e(r.key),r)}}function xe(e,t){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xe(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oe(e);if(t){var o=Oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ce(this,n)}}function Ce(e,t){if(t&&("object"===we(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function _e(e){var t=function(e,t){if("object"!==we(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===we(t)?t:String(t)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(i,e);var t,n,r,a=Ee(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={visible:e.visible},t}return t=i,n=[{key:"render",value:function(){var e=this;if(!this.state.visible&&this.props.showKeyboard)return o.a.createElement("span",{className:"lake-icon lake-icon-keyboard",onClick:function(){e.setState({visible:!0})}});var t=ye(this.props.hotkeyConfig).map((function(e){var t=e.hotkeys.map((function(e){var t=[];return e.keys.forEach((function(e,n){0!==n&&t.push(o.a.createElement("span",{className:"lake-sheet-hotkey-plus"},"+")),/[a-zA-Z]/g.test(e)?t.push(o.a.createElement("kbd",null,e)):t.push(o.a.createElement("kbd",{className:"key"},e))})),o.a.createElement("div",{key:e.name,className:"lake-table-hotkey-row"},o.a.createElement("div",{className:"lake-table-hotkey-row-desc"},o.a.createElement("span",{className:e.className||"",style:{verticalAlign:"middle"}},e.name)),o.a.createElement("div",null,o.a.createElement("span",{className:"lake-table-hotkey-keys"},t)))}));return o.a.createElement("div",{key:e.name},o.a.createElement("div",{className:"lake-table-hotkey-desc"},e.name),t)}));return o.a.createElement(he.a,{visible:this.state.visible,className:"lake-table-hotkey-menubar",mask:!1,closable:!0,width:334,title:null,onClose:function(){e.setState({visible:!1})}},o.a.createElement("div",{className:"lake-table-hotkey"},o.a.createElement("div",{className:"lake-table-hotkey-title"},__("快捷键")),t))}}],n&&ke(t.prototype,n),r&&ke(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);!function(e,t,n){(t=_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Se,"defaultProps",{visible:!1,showKeyboard:!0});var Re=Se,je=[{name:__("全局通用"),hotkeys:[{name:__("撤销"),keys:["⌘","Z"]},{name:__("重做"),keys:["⌘","Shift","Z"]},{name:__("查找"),keys:["⌘","F"]},{name:__("左右滚动屏幕"),keys:["Shift",__("鼠标滚轮")]},{name:__("展开记录: 关闭"),keys:["Esc"]},{name:__("展开记录: 上一条"),keys:["⌘","Shift",","]},{name:__("展开记录: 下一条"),keys:["⌘","Shift","."]}]},{name:__("表格视图"),hotkeys:[{name:__("复制"),keys:["⌘","C"]},{name:__("粘贴"),keys:["⌘","V"]},{name:__("全选"),keys:["⌘","A"]},{name:__("多选单元格"),keys:["⌘",__("方向键")]},{name:__("清空单元格"),keys:["Backspace"]},{name:__("展开记录"),keys:["Space"]},{name:__("向上插入行"),keys:["⌘","Shift","Enter"]},{name:__("向下插入行"),keys:["Shift","Enter"]},{name:__("[多行文本] 换行"),keys:["Shift","Enter"]}]},{name:__("卡片视图"),hotkeys:[{name:__("向左插入记录"),keys:["鼠标右键"]},{name:__("向右插入记录"),keys:["鼠标右键"]}]},{name:__("看板视图"),hotkeys:[{name:__("向上插入记录"),keys:["鼠标右键"]},{name:__("向下插入记录"),keys:["鼠标右键"]}]}];function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ie(r.key),r)}}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},De(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ne(e);if(t){var o=Ne(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Me(this,n)}}function Me(e,t){if(t&&("object"===Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}function Ie(e){var t=function(e,t){if("object"!==Ae(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ae(t)?t:String(t)}var Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}(a,e);var t,n,r,o=Pe(a);function a(){return Te(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"init",value:function(e){e.registerUIHelperCenter(a.pluginName,{iconName:"hotkey",title:__("快捷键")})}},{key:"active",value:function(e){this.model&&this.model.dispose(),this.model=Object(O.b)(Re,{showKeyboard:!1,visible:!0,hotkeyConfig:je})}}])&&Le(t.prototype,n),r&&Le(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.a);function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,We(r.key),r)}}function ze(e,t){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ze(e,t)}function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ge(e);if(t){var o=Ge(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(e,t){if(t&&("object"===Be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}function We(e){var t=function(e,t){if("object"!==Be(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Be(t)?t:String(t)}!function(e,t,n){(t=Ie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fe,"pluginName","hotkey");var Ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ze(e,t)}(a,e);var t,n,r,o=qe(a);function a(){return Ve(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"init",value:function(e){e.registerUIHelperCenter(a.pluginName,{iconName:"changelog",title:__("更新日志"),link:"https://www.yuque.com/yuque/changelog"})}}])&&He(t.prototype,n),r&&He(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.a);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tt(r.key),r)}}function Ze(e,t){return Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ze(e,t)}function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=et(e);if(t){var o=et(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Je(this,n)}}function Je(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}function tt(e){var t=function(e,t){if("object"!==$e(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==$e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===$e(t)?t:String(t)}!function(e,t,n){(t=We(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ye,"pluginName","changelog");var nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ze(e,t)}(a,e);var t,n,r,o=Qe(a);function a(){return Ke(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"init",value:function(e){e.registerUIHelperCenter(a.pluginName,{iconName:"feedback2",title:__("反馈给语雀"),link:"/feedbacks/new"})}}])&&Xe(t.prototype,n),r&&Xe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.a);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ut(r.key),r)}}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},it(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=st(e);if(t){var o=st(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(e,t){if(t&&("object"===rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function st(e){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},st(e)}function ut(e){var t=function(e,t){if("object"!==rt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===rt(t)?t:String(t)}!function(e,t,n){(t=tt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(nt,"pluginName","feedback");var dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}(a,e);var t,n,r,o=lt(a);function a(){return ot(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"init",value:function(e){e.registerUIHelperCenter(a.pluginName,{iconName:"helper-center",title:__("帮助中心"),link:"https://www.yuque.com/about/help"})}}])&&at(t.prototype,n),r&&at(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.a);function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){mt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mt(e,t,n){return(t=gt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gt(r.key),r)}}function gt(e){var t=function(e,t){if("object"!==ft(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ft(t)?t:String(t)}function bt(e,t){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bt(e,t)}function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xt(e);if(t){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt(this,n)}}function wt(e,t){if(t&&("object"===ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kt(e)}function kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xt(e){return xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xt(e)}!function(e,t,n){(t=ut(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(dt,"pluginName","helperCenter");var Et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bt(e,t)}(a,e);var t,n,r,o=yt(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=ht(ht({entry:kt(t=o.call(this,e))},e),{},{plugins:[ee,Fe,pe,Ye,nt,dt]});return t.helperCenterView=new C(n),t}return t=a,(n=[{key:"render",value:function(){return this.helperCenterView.render()}}])&&vt(t.prototype,n),r&&vt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.a.Component);Et.defaultProps={onMenuClick:function(){}},Et.propTypes={doc:s.a.object.isRequired,hotkeyConfig:s.a.object,onMenuClick:s.a.func};var Ct=Object(u.d)((function(e){return{me:e.me,doc:e.doc}}))(Et);function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}var _t=function(e){var t=Object(r.useRef)(null);return o.a.createElement(i.a,{ref:t,trigger:"click",placement:"topRight",overlayClassName:h.popover,content:o.a.createElement("div",null,o.a.createElement(Ct,Ot({},e,{onMenuClick:function(){t.current.setPopupVisible(!1)}})))},o.a.createElement(l.a,{iconName:"site-tip",style:e.bubbleStyle,iconSize:18}))};function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}function Rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nt(r.key),r)}}function At(e,t){return At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},At(e,t)}function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pt(e);if(t){var o=Pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lt(this,n)}}function Lt(e,t){if(t&&("object"===St(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Dt(e)}function Dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pt(e){return Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pt(e)}function Mt(e,t,n){return(t=Nt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nt(e){var t=function(e,t){if("object"!==St(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==St(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===St(t)?t:String(t)}var It=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&At(e,t)}(i,e);var t,n,r,a=Tt(i);function i(){var e;Rt(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Mt(Dt(e=a.call.apply(a,[this].concat(n))),"state",{visible:!0,hotkeyConfig:null}),e}return t=i,(n=[{key:"init",value:function(e){var t=this;e.registerUIFooter(i.pluginName),e.onPluginEvent("docWizardVisible",(function(e){t.setState({visible:!e})}))}},{key:"render",value:function(e){return this.state.visible?o.a.createElement(_t,{hotkeyConfig:this.state.hotkeyConfig,bubbleStyle:{position:"static"}}):null}}])&&jt(t.prototype,n),r&&jt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.a);Mt(It,"pluginName","helperCenter")},3815:function(e,t,n){"use strict";n.r(t),n.d(t,"DocWizard",(function(){return ee}));var r=n(0),o=n.n(r),a=n(2),i=n.n(a),l=n(106),c=n.n(l),s=n(9),u=n.n(s),d=n(2944),f=n(3250),p=n(3016),h=n(345),m=n(147),v=n(964),g=n(2923),b=n(2929),y=n(2943),w=n(105),k=n(771),x=n(191);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function C(){C=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new S(o||[]);return r(i,"_invoke",{value:k(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function p(){}function h(){}var m={};c(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(R([])));g&&g!==t&&n.call(g,a)&&(m=g);var b=h.prototype=f.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==E(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return p.prototype=h,r(b,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,l,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=c()("doc:book.tpl"),L={Doc:x.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_DOC_CREATION,Board:x.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_BOARD_CREATION,Table:x.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_TABLE_CREATION,Sheet:x.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_SHEET_CREATION};function D(e,t){return Object(g.d)(e,t?3:4)}var P=function(e){var t=e.book,n=e.group,o=e.type,a=j(Object(r.useState)(!1),2),i=a[0],l=a[1],c=j(Object(r.useState)([]),2),s=c[0],u=c[1],d=j(Object(r.useState)([]),2),f=d[0],p=d[1],h=function(){var e,r=(e=C().mark((function e(){var r,a,i,c,s,d,f,h;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),a=x.TYPE_FORMAT_MAP[o],e.next=4,Promise.all([Object(k.j)(_(_({},Object(k.m)(t,n,!0)),{},{official_channel:L[o],limit:4,format:a})),null!==(r=t.abilities)&&void 0!==r&&r.read?w.webProxy.editor.recentlyUpdatedDocs({book_id:t.id,type:o}):[]]);case 4:i=e.sent,c=j(i,2),s=c[0],d=c[1],f=d.length>0,h=D(s,f),T("templates",h),u(h),p(d.reverse()),l(!1);case 14:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){R(a,r,o,i,l,"next",e)}function l(e){R(a,r,o,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return{state:{loading:i,templates:s,recentDocs:f},loadTemplates:h,loadTemplate:k.l,loadDoc:k.k,getCover:k.i}},M="DocWizard-module_wrap_uWnca",N="DocWizard-module_hasBackgroundImage_clPBy",I="DocWizard-module_main_8dwkO",F="DocWizard-module_templateItem_rI6+t",B="DocWizard-module_docs_UjeUs",V="DocWizard-module_container_bG+2W",H="DocWizard-module_head_jmuCc",z="DocWizard-module_boardHead_2pJDo",q="DocWizard-module_otherHead_FfJbj",U="DocWizard-module_templates_1neRY";function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}function Y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==G(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===G(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(){$=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new O(o||[]);return r(i,"_invoke",{value:k(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function p(){}function h(){}var m={};c(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(_([])));g&&g!==t&&n.call(g,a)&&(m=g);var b=h.prototype=f.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==G(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,r(b,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,l,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=_,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function K(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Q=new c.a("doc:wizard");function J(e){var t={bottom:0};if("Sheet"===e||"Table"===e)return t.bottom=32,t;var n=document.querySelector(".lake-content-editor");if(!n)return t;var r=n.getBoundingClientRect();return r.height+111<window.innerHeight&&(t.bottom=window.innerHeight-(r.height+111)),t}function ee(e){var t,n=e.currentDoc,a=e.book,i=e.group,l=n.type||"Doc",c=P({book:a,group:i,type:l}),s=c.state,f=s.templates,m=s.loading,w=s.recentDocs,k=Object(v.a)(),x=k.loadTemplateSelector,E=k.showTemplateSelector,C=k.contextHolder;Object(r.useEffect)((function(){x()}),[]),Object(r.useEffect)((function(){c.loadTemplates()}),[]);var O=function(){var t,n=(t=$().mark((function t(){var n;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E({book:a,group:i,format:h.TYPE_FORMAT_MAP[l]});case 2:(n=t.sent)&&e.useTemplate(n,!0);case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){K(a,r,o,i,l,"next",e)}function l(e){K(a,r,o,i,l,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();if(0===f.length)return null;return o.a.createElement("div",{className:"lake-doc-wizard"},o.a.createElement("div",{className:I},o.a.createElement("div",{className:"".concat(V," ").concat(e.containerClassName)},o.a.createElement("h2",{className:u()(H,(t={},Y(t,z,"Board"===l),Y(t,q,"Board"!==l),t))},__("直接开始编辑，或者选择一个模板")),!m&&f&&o.a.createElement("ul",{className:U,"data-testid":"doc-wizard-templates"},f.concat([{type:"all"},w.length?{type:"recent"}:null]).filter(Boolean).map((function(t,n){return function(t,n){var r=1e3*([0,.1,.2,.28,.33][n]||0);return o.a.createElement(d.Spring,{from:{bottom:-30,opacity:0},to:{bottom:0,opacity:1},config:{duration:200,easing:p.b,delay:r},key:n},(function(n){return"all"===t.type?o.a.createElement("li",{key:"all",className:u()(F,y.a.item),onClick:O,style:n},o.a.createElement(g.a,{title:__("更多模板"),imgSrc:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*Tt8DRr2oSUwAAAAAAAAAAAAAARQnAQ"})):"recent"===t.type?o.a.createElement("li",{key:"recent",className:u()(F,y.a.item),style:n},o.a.createElement(g.a,{title:__("最近编辑"),imgSrc:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*_ZfORoLU5ZAAAAAAAAAAAAAAARQnAQ"}),o.a.createElement("div",{className:B},o.a.createElement("ul",{id:"doc-wizard-".concat(t.type,"-docs")},w.map((function(t){return o.a.createElement(b.a,{key:t.id,doc:t,onClick:function(t){e.useTemplate(t,!1)}})}))))):o.a.createElement("li",{style:n,className:u()(F,y.a.item),onClick:function(){return e.useTemplate(t,!0)},"data-aspm-click":"b4693.c100045.d207095"},o.a.createElement(g.b,{key:t.id,template:t}))}))}(t,n)}))))),C)}function te(e){var t=e.currentDoc.type||"Doc",n=function(e){var t=X(Object(r.useState)(J(e)),2),n=t[0],o=t[1],a=function(){var t=J(e);t.bottom!==n.bottom&&o(t)};return Object(r.useEffect)((function(){if("Sheet"!==e&&"Table"!==e)return window.addEventListener("resize",a,!1),function(){window.removeEventListener("resize",a,!1)}}),[]),n}(t);return Object(f.d)(e.visible,null,{config:{duration:200,easing:p.b},update:{bottom:n.bottom},from:{opacity:1,bottom:n.bottom},leave:{opacity:0,bottom:n.bottom-314}}).map((function(n){Q("transition:",n);var r=["Board","Sheet"].includes(t);return n.item&&o.a.createElement(f.a.div,{className:u()(M,Y({},N,!r)),key:n.item,style:n.props},o.a.createElement(ee,W({key:n.key},e)))}))}ee.propTypes={currentDoc:i.a.object.isRequired,book:i.a.object.isRequired,group:i.a.object.isRequired,useTemplate:i.a.func.isRequired,containerClassName:i.a.string},te.propTypes={visible:i.a.bool,viewport:i.a.string,book:i.a.object.isRequired,group:i.a.object.isRequired,currentDoc:i.a.object.isRequired,useTemplate:i.a.func.isRequired,requestRecords:i.a.func};t.default=Object(m.b)(te,!1)},390:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r,o){var a=o.clientWidth,i=o.clientHeight,l="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,c="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,s=l-(o.getBoundingClientRect().left+window.pageXOffset),u=c-(o.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var d=void 0;if(d=u<0?0:u>i?1:Math.round(100*u/i)/100,t.a!==d)return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}else{var f=void 0;if(r!==(f=s<0?0:s>a?1:Math.round(100*s/a)/100))return{h:t.h,s:t.s,l:t.l,a:f,source:"rgb"}}return null}},391:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r){var o=r.clientWidth,a=r.clientHeight,i="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=i-(r.getBoundingClientRect().left+window.pageXOffset),s=l-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var u=void 0;if(s<0)u=359;else if(s>a)u=0;else{u=360*(-100*s/a+100)/100}if(n.h!==u)return{h:u,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var d=void 0;if(c<0)d=0;else if(c>o)d=359;else{d=360*(100*c/o)/100}if(n.h!==d)return{h:d,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null}},3914:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(2),i=n.n(a),l=n(570),c=n(57),s=n(9),u=n.n(s),d=n(3621),f=n(3676),p=n(2942),h=n(3249);function m(e){return Object(h.a)(e.data,e.deps),o.a.createElement("div",null)}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function E(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}var C,O,_,S="",R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(i,e);var t,n,r,a=w(i);function i(){return g(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(e){var t=e.isSharePage?"doc_slug":"doc",n=e.match.params[t];if(S!==n)return S=n,o.a.createElement(m,{data:{requestData:{query:e.location.query,book_id:e.book.id,slug:n},dispatch:e.dispatch,doc:e.doc},deps:[n]})}}])&&b(t.prototype,n),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(p.a);C=R,_="loadDoc",(O=E(O="pluginName"))in C?Object.defineProperty(C,O,{value:_,enumerable:!0,configurable:!0,writable:!0}):C[O]=_;var j=n(3677),A=n(264);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F(r.key),r)}}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function F(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===T(t)?t:String(t)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(a,e);var t,n,r,o=M(a);function a(){return L(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"init",value:function(e){var t=A.a.getEditorTheme(e.doc,e.book);e.extend("theme",t)}}])&&D(t.prototype,n),r&&D(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(p.a);!function(e,t,n){(t=F(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(B,"pluginName","theme");var V=n(3678),H=n(106),z=n.n(H),q=n(2770),U=n(2914),G=n(34),W=n.n(G);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,te(r.key),r)}}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var o=J(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}function ee(e,t,n){return(t=te(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e){var t=function(e,t){if("object"!==Y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Y(t)?t:String(t)}var ne=z()("editor:table:collab"),re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(a,e);var t,n,r,o=X(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),ee(Q(t=o.call(this)),"onMessage",(function(e){var n;try{n=JSON.parse(e.data)}catch(e){console.error(e)}if(!n)return null;switch(n.action&&ne("message, action: ",n.action,n.data),n.action){case"members":t.emit("member","members",n.data);break;case"join":t.emit("member","join",n.data);break;case"leave":t.emit("member","leave",n.data);break;case"ready":t.currentMember=n.data,t.emit("member","ready",n.data);break;case"broadcast":var r=n.data,o=r.body,i=r.type;o.user.uuid!==t.currentMember.uuid&&t.emit(q.i.message,i.replace("".concat(a.name,":"),""),o.data)}})),ee(Q(t),"send",(function(e,n){t.conn&&(e="".concat(a.name,":").concat(e),ne("send",e,n),t.conn.broadcast(e,{user:t.currentMember,data:n}))})),ee(Q(t),"dispose",(function(){t.disconnect()})),t.doc=e,t.collab=e.collab,t.conn=null,t.socket=null,t.connTime=null,t.currentMember=null,t.connect(),t}return t=a,(n=[{key:"connect",value:function(){var e=this;this.disconnect();var t=this.collab;if(t){var n="".concat(t.host,"/?id=").concat(t.id,"&token=").concat(t.token);ne("connect",n),this.conn=new U.a(n),this.conn.on("ready",(function(t){t&&(ne("connect ready",t),e.socket=t,e.socket.addEventListener("message",e.onMessage),e.connTime=+new Date)})),this.conn.on("close",(function(t){ne("collab server connection close",{event:t});var n=!!e.socket;e.disconnect(),!n||e.justConnect()?e.emit(q.i.error,{code:q.d.CONNECT_COLLAB_SERVER_FAILED}):e.emit(q.i.error,{code:q.d.DISCONNECTED})})),this.conn.on("congestion",(function(){e.emit(q.i.netStatusChange,"congestion")})),this.conn.on("congestionEnd",(function(){e.emit(q.i.netStatusChange,"congestionEnd")}))}}},{key:"justConnect",value:function(){return this.connTime&&+new Date-this.connTime<3e3}},{key:"disconnect",value:function(){try{this.socket&&(this.socket.removeEventListener("message",this.onMessage),this.socket=null),this.conn&&(this.conn.disconnect(),this.conn=null)}catch(e){}}}])&&$(t.prototype,n),r&&$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(W.a);function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,de(r.key),r)}}function le(e,t){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},le(e,t)}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ue(e);if(t){var o=ue(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return se(this,n)}}function se(e,t){if(t&&("object"===oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}function de(e){var t=function(e,t){if("object"!==oe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===oe(t)?t:String(t)}ee(re,"name","table-collab");var fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&le(e,t)}(a,e);var t,n,r,o=ce(a);function a(){return ae(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"enable",value:function(e){return e.editable}},{key:"active",value:function(e){this.collab&&this.collab.dispose(),this.collab=new re(e.doc),e.extend("collabOT",this.collab)}},{key:"willUnMount",value:function(){var e;null===(e=this.collab)||void 0===e||e.dispose()}}])&&ie(t.prototype,n),r&&ie(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(p.a);!function(e,t,n){(t=de(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(fe,"pluginName","collabOT");var pe=n(3680),he=n(3679),me=n(3700),ve=n(33),ge=n(1463),be=n(3815),ye=n(345),we=n(3739),ke=n(54),xe=n.n(ke),Ee="index-module_containerClassName_SWeBF";function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Oe(){Oe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new O(o||[]);return r(i,"_invoke",{value:k(e,n,l)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function p(){}function h(){}var m={};c(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(_([])));g&&g!==t&&n.call(g,a)&&(m=g);var b=h.prototype=f.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==Ce(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,r(b,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,l,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=_,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function _e(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Se(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_e(a,r,o,i,l,"next",e)}function l(e){_e(a,r,o,i,l,"throw",e)}i(void 0)}))}}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ne(r.key),r)}}function Ae(e,t){return Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ae(e,t)}function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pe(e);if(t){var o=Pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Le(this,n)}}function Le(e,t){if(t&&("object"===Ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return De(e)}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pe(e)}function Me(e,t,n){return(t=Ne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e){var t=function(e,t){if("object"!==Ce(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ce(t)?t:String(t)}var Ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ae(e,t)}(i,e);var t,n,r,a=Te(i);function i(){var e;Re(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Me(De(e=a.call.apply(a,[this].concat(n))),"state",{visible:!1}),Me(De(e),"_useTemplate",function(){var t=Se(Oe().mark((function t(n){var r,o,a,i,l,c;return Oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=De(e),o=r.ctx,t.next=3,e._copyContentFromDoc(n,o.doc,o.doc.title);case 3:a=t.sent,o.editWorkflow.useTemplate(a),e._canHandleTable(a.type)&&(null===(i=o.editWorkflow)||void 0===i||null===(l=i.engine)||void 0===l||null===(c=l.requestRecords)||void 0===c||c.call(l)),e.setState({visible:!1});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Me(De(e),"_checkEmpty",xe()((function(){var t=De(e).ctx,n=t.editWorkflow.isDocContentEmpty();t.debug("empty doc, show wizard view:",n),e._setVisible(n)}),300)),Me(De(e),"_canHandleTable",(function(e){return e===ye.FORMAT.LAKETABLE&&!window.appData.isDesktopApp})),Me(De(e),"_copyContentFromDoc",function(){var t=Se(Oe().mark((function t(n,r,o){var a,i,l;return Oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.id,i="Doc",n.doclet_id&&(a=n.doclet_id,i="Doclet"),"Table"===n.type&&(n.format=ye.FORMAT.LAKETABLE),!e._canHandleTable(n.format)){t.next=9;break}return t.next=7,ge.a.TableController.clone({docId:a,docType:i,targetDocId:r.id,targetDocType:"Doc"});case 7:return l=t.sent,t.abrupt("return",{title:o,content:l,type:ye.FORMAT.LAKETABLE});case 9:return t.next=11,ve.a.docs.findOne({book_id:n.book_id,id:n.slug});case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),e}return t=i,(n=[{key:"enable",value:function(e){return!Object(we.a)()}},{key:"init",value:function(e){var t=this;e.registerUIBody(i.pluginName);var n=e.editWorkflow;n.on("editorInited",this._checkEmpty),n.on(q.i.change,(function(){t._setVisible(!1)})),e.onPluginEvent("recordStatusChanged",(function(){t._setVisible(!1)}))}},{key:"render",value:function(e){return this.state.visible?o.a.createElement("div",null,o.a.createElement(be.DocWizard,{currentDoc:e.doc,viewport:e.theme.viewport,book:e.book,useTemplate:this._useTemplate,templateProxy:ve.a.templates,docProxy:ve.a.docs,requestRecords:e.editWorkflow.engine&&e.editWorkflow.engine.requestRecords,containerClassName:Ee})):null}},{key:"_setVisible",value:function(e){var t=this.ctx;this.setState({visible:e}),t.emitPluginEvent("docWizardVisible",e)}}])&&je(t.prototype,n),r&&je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(p.a);Me(Ie,"pluginName","docWizard");var Fe=n(287);function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$e(r.key),r)}}function ze(e,t){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ze(e,t)}function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=We(e);if(t){var o=We(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(e,t){if(t&&("object"===Be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ge(e)}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}function Ye(e,t,n){return(t=$e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e){var t=function(e,t){if("object"!==Be(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Be(t)?t:String(t)}var Ke=Object(Fe.b)((function(){return n.e(131).then(n.bind(null,3084))}),{suspense:!0}),Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ze(e,t)}(i,e);var t,n,r,a=qe(i);function i(){var e;Ve(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ye(Ge(e=a.call.apply(a,[this].concat(n))),"state",{visible:!0}),e}return t=i,(n=[{key:"init",value:function(e){var t=this;e.registerUIFooter(i.pluginName),e.onPluginEvent("docWizardVisible",(function(e){t.setState({visible:!e})}))}},{key:"render",value:function(e){return this.state.visible?o.a.createElement(Ke,{type:"Doc",targetId:e.doc.id,likeStatus:e.doc.like.actioned,likeCount:e.doc.like.count,size:"bubble",bubblePopover:!0,bubbleStyle:{position:"relative",bottom:"0px",left:"0px"}}):null}}])&&He(t.prototype,n),r&&He(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(p.a);Ye(Xe,"pluginName","like");var Ze=new Map,Qe=function(e){var t=e.pluginName;Ze.get(t)?console.error("the plugin already has: ".concat(t)):Ze.set(t,e)};function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t,n){return(t=at(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,at(r.key),r)}}function ot(e,t,n){return t&&rt(e.prototype,t),n&&rt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function at(e){var t=function(e,t){if("object"!==Je(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Je(t)?t:String(t)}Qe(R),Qe(j.a),Qe(B),Qe(V.a),Qe(fe),Qe(pe.a),Qe(he.a),Qe(me.a),Qe(Ie),Qe(Xe);var it={tablePage:{plugins:["loadDoc","editWorkflow","theme","status","collabOT","header","helperCenter","editor","docWizard","like"],headers:["header"],bodys:["editor","docWizard","status"],footers:["like","helperCenter"]},tableEditor:{plugins:["loadDoc","editWorkflow","theme","status","collabOT","editor"],headers:[],bodys:["editor"],footers:[]}},lt=ot((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=it[t.mode]||it.tablePage;return tt(tt({},n),{},{plugins:n.plugins.map((function(e){return function(e){if(Ze.get(e))return Ze.get(e);console.error("the plugin is not exist: ".concat(e))}(e)}))})}));function ct(e){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(e)}function st(){return st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},st.apply(this,arguments)}function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ft(e,t,n){return(t=ht(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ht(r.key),r)}}function ht(e){var t=function(e,t){if("object"!==ct(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ct(t)?t:String(t)}function mt(e,t){return mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mt(e,t)}function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yt(e);if(t){var o=yt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gt(this,n)}}function gt(e,t){if(t&&("object"===ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bt(e)}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yt(e){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yt(e)}var wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mt(e,t)}(i,e);var t,n,r,a=vt(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e);var n=new lt({mode:e.mode});return t.readWriteView=new f.a(dt(dt({},n),{},{entry:bt(t)},e)),t}return t=i,(n=[{key:"isStandardTable",get:function(){return"tablePage"===this.props.mode}},{key:"render",value:function(){return o.a.createElement("div",{className:u()("read-write-view",this.isStandardTable&&d.a.viewWrap)},this.readWriteView.render())}}])&&pt(t.prototype,n),r&&pt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);wt.propTypes={group:i.a.object.isRequired,book:i.a.object.isRequired,doc:i.a.object.isRequired,location:i.a.object,match:i.a.object,history:i.a.object,dispatch:i.a.func,mode:i.a.string},wt.defaultProps={mode:"tablePage"};var kt=Object(l.d)((function(e){return{me:e.me,group:e.group,book:e.book,doc:e.doc}}))(Object(c.withRouter)(wt)),xt=o.a.forwardRef((function(e,t){return Object(r.useEffect)((function(){var e=window.getComputedStyle(document.body).getPropertyValue("overflow-y");return document.body.style.overflowY="hidden",function(){document.body.style.overflowY=e}}),[]),o.a.createElement(kt,st({wrappedComponentRef:t},e))}));xt.propTypes={mode:i.a.string};t.default=xt},392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n){var r=n.getBoundingClientRect(),o=r.width,a=r.height,i="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=i-(n.getBoundingClientRect().left+window.pageXOffset),s=l-(n.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>o&&(c=o),s<0?s=0:s>a&&(s=a);var u=c/o,d=1-s/a;return{h:t.h,s:u,v:d,a:t.a,source:"hsv"}}},450:function(e,t,n){"use strict";var r={};(0,n(321).assign)(r,n(1446),n(1449),n(1095)),e.exports=r},58:function(e,t,n){"use strict";n(432);var r=n(150),o=n(0),a=n.n(o),i=n(2),l=n.n(i),c=n(9),s=n.n(c),u=n(69),d=n.n(u),f=(n(841),["className"]);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m={};var v=a.a.forwardRef((function(e,t){var n=e.className,o=h(e,f);return!0===m.disable?o.children:a.a.createElement(r.a,p({className:s()("larkui-tooltip",n),ref:t},o))}));v.propTypes={className:l.a.string},d()(v,r.a),v.config=function(e){void 0!==e.disable&&(m.disable=e.disable)},t.a=v},594:function(e,t,n){var r=n(568),o=n(224),a=n(582),i=Math.max,l=Math.min;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var s=c-1;return void 0!==n&&(s=a(n),s=n<0?i(c+s,0):l(s,c-1)),r(e,o(t,3),s,!0)}},597:function(e,t,n){"use strict";n(2201);var r=n(1109);n(1195);t.a=r.a},626:function(e,t,n){"use strict";n(895);var r=n(564);n(1197);t.a=r.a},66:function(e,t,n){var r=n(1257),o=n(602)((function(e,t,n){r(e,t,n)}));e.exports=o},779:function(e,t,n){var r=n(170),o=n(221);e.exports=function(e){return r(e,o(e))}},79:function(e,t,n){"use strict";n(447);var r=n(181);n(843);t.a=r.a},847:function(e,t,n){"use strict";n(1382);var r=n(848);n(989);t.a=r.a},873:function(e,t,n){"use strict";n.r(t),n.d(t,"getFileAccept",(function(){return k})),n.d(t,"getImageAccept",(function(){return x})),n.d(t,"EmbedButtonStatus",(function(){return E})),n.d(t,"getIsDiabledPreviewAndEmbed",(function(){return C})),n.d(t,"getLocalDocAcceptArr",(function(){return O})),n.d(t,"getFileAcceptArr",(function(){return _})),n.d(t,"getImageAcceptArr",(function(){return S})),n.d(t,"getVideoAcceptArr",(function(){return R})),n.d(t,"getAudioAcceptArr",(function(){return j}));var r=n(109),o=n(164),a=r.a.LOCAL_DOC_EXT,i=r.a.LOCAL_DOC_EXT_NORMAL,l=r.a.LOCAL_DOC_EXT_PAID,c=r.a.FILE_EXT,s=r.a.FILE_EXT_NORMAL,u=r.a.FILE_EXT_PAID,d=r.a.IMAGE_EXT,f=r.a.IMAGE_EXT_NORMAL,p=r.a.IMAGE_EXT_PAID,h=r.a.VIDEO_EXT,m=r.a.VIDEO_EXT_NORMAL,v=r.a.VIDEO_EXT_PAID,g=r.a.AUDIO_EXT,b=r.a.AUDIO_EXT_NORMAL,y=r.a.AUDIO_EXT_PAID,w=function(){var e="undefined"!=typeof navigator?navigator.userAgent:"";return/android/i.test(e)};function k(){return w()?"*/*":(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?u.join(","):s.join(","):c.join(",")}function x(){return w()?"image/*":(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?p.join(","):f.join(","):d.join(",")}var E={NORMAL:0,DISABLE:1,PREVENT:2};function C(){return!(window.appData||{}).isYuque||Object(o.isPaidCheckAll)()?E.NORMAL:E.PREVENT}function O(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?l:i:a}function _(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?u:s:c}function S(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?p:f:d}function R(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?v:m:h}function j(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?y:b:g}},886:function(e,t,n){var r=n(486),o=n(1086);e.exports=function(e,t){return e&&r(e,o(t))}},887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checkboard=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),a=c(o),i=c(n(129)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1426));function c(e){return e&&e.__esModule?e:{default:e}}var s=t.Checkboard=function(e){var t=e.white,n=e.grey,c=e.size,s=e.renderers,u=e.borderRadius,d=e.boxShadow,f=e.children,p=(0,i.default)({default:{grid:{borderRadius:u,boxShadow:d,absolute:"0px 0px 0px 0px",background:"url("+l.get(t,n,c,s.canvas)+") center left"}}});return(0,o.isValidElement)(f)?a.default.cloneElement(f,r({},f.props,{style:r({},f.props.style,p.grid)})):a.default.createElement("div",{style:p.grid})};s.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},t.default=s},889:function(e,t,n){var r=n(139),o=n(76),a=n(99);e.exports=function(e){return"string"==typeof e||!o(e)&&a(e)&&"[object String]"==r(e)}},891:function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},894:function(e,t,n){var r=n(399),o=n(480),a=n(1086),i=n(76);e.exports=function(e,t){return(i(e)?r:o)(e,a(t))}},924:function(e,t,n){var r=n(393),o=n(1412),a=n(445),i=n(434),l=a((function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])}));e.exports=l},925:function(e,t,n){"use strict";n(1084);var r=n(449);n(1083);t.a=r.a},926:function(e,t,n){"use strict";n(781);var r=n(184),o=n(0),a=n.n(o),i=n(2),l=n.n(i),c=n(9),s=n.n(c),u=n(69),d=n.n(u);n(1100);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var p=["className","justify"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var y=a.a.forwardRef((function(e,t){var n=e.className,o=e.justify,i=b(e,p);return a.a.createElement(r.a,g({className:s()("larkui-spin",n,{"larkui-spin-block":"block"===o}),indicator:a.a.createElement("div",{className:"larkui-spin-indicator"}),ref:t},i))}));y.propTypes=m(m({},r.a.SpinProps),{},{className:l.a.string,justify:l.a.oneOf(["block"])}),d()(y,r.a),t.a=y},927:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=/\{(\w*)\}/g,i=/\[(\w*):(\w*)\|(\w*)\]/g,l=/#\w*$/,c=window.__||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;n=n.replace(i,(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=t[n[1]],a=n[2],i=n[3];return o&&o>1?i:a})),n=n.replace(l,"");var r=[],c=!1,s=0,u=n.length,d=n;return n=n.replace(a,(function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];r.push(d.substring(s,n[2])),s=n[2]+n[0].length;var i=n[1].trim();if(!i)return"";i.match(/^\d+$/)&&(i=parseInt(i,10));var l=t[i];return void 0===l?(r.push(n[0]),n[0]):(r.push(l),o.a.isValidElement(l)?(c=!0,""):l)})),s<u&&r.push(d.substring(s)),c?r.map((function(e){return o.a.createElement(o.a.Fragment,null,e)})):n};t.a=c},957:function(e,t,n){"use strict";n.d(t,"useSpring",(function(){return ge}));var r=n(20);n.d(t,"Globals",(function(){return r.b}));var o=n(0),a=n(185);n(1329),n(1330);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function l(e,...t){return r.t.fun(e)?e(...t):e}const c=(e,t)=>!0===e||!!(t&&e&&(r.t.fun(e)?e(t):Object(r.B)(e).includes(t))),s=(e,t)=>r.t.obj(e)?t&&e[t]:e,u=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,d=e=>e,f=(e,t=d)=>{let n=p;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));const o={};for(const a of n){const n=t(e[a],a);r.t.und(n)||(o[a]=n)}return o},p=["config","onProps","onStart","onChange","onPause","onResume","onRest"],h={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function m(e){const t=function(e){const t={};let n=0;if(Object(r.l)(e,((e,r)=>{h[r]||(t[r]=e,n++)})),n)return t}(e);if(t){const n={to:t};return Object(r.l)(e,((e,r)=>r in t||(n[r]=e))),n}return i({},e)}function v(e){return e=Object(r.r)(e),r.t.arr(e)?e.map(v):Object(r.u)(e)?r.b.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function g(e){for(const t in e)return!0;return!1}function b(e){return r.t.fun(e)||r.t.arr(e)&&r.t.obj(e[0])}function y(e,t){var n;null==(n=e.ref)||n.delete(e),null==t||t.delete(e)}function w(e,t){var n;t&&e.ref!==t&&(null==(n=e.ref)||n.delete(e),t.add(e),e.ref=t)}const k=i({},{tension:170,friction:26},{mass:1,damping:1,easing:r.m.linear,clamp:!1});class x{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,k)}}function E(e,t){if(r.t.und(t.decay)){const n=!r.t.und(t.tension)||!r.t.und(t.friction);!n&&r.t.und(t.frequency)&&r.t.und(t.damping)&&r.t.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}const C=[];class O{constructor(){this.changed=!1,this.values=C,this.toValues=null,this.fromValues=C,this.to=void 0,this.from=void 0,this.config=new x,this.immediate=!1}}function _(e,{key:t,props:n,defaultProps:o,state:a,actions:s}){return new Promise(((u,d)=>{var f;let p,h,m=c(null!=(f=n.cancel)?f:null==o?void 0:o.cancel,t);if(m)b();else{r.t.und(n.pause)||(a.paused=c(n.pause,t));let e=null==o?void 0:o.pause;!0!==e&&(e=a.paused||c(e,t)),p=l(n.delay||0,t),e?(a.resumeQueue.add(g),s.pause()):(s.resume(),g())}function v(){a.resumeQueue.add(g),a.timeouts.delete(h),h.cancel(),p=h.time-r.z.now()}function g(){p>0&&!r.b.skipAnimation?(a.delayed=!0,h=r.z.setTimeout(b,p),a.pauseQueue.add(v),a.timeouts.add(h)):b()}function b(){a.delayed&&(a.delayed=!1),a.pauseQueue.delete(v),a.timeouts.delete(h),e<=(a.cancelId||0)&&(m=!0);try{s.start(i({},n,{callId:e,cancel:m}),u)}catch(e){d(e)}}}))}const S=(e,t)=>1==t.length?t[0]:t.some((e=>e.cancelled))?A(e.get()):t.every((e=>e.noop))?R(e.get()):j(e.get(),t.every((e=>e.finished))),R=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),j=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),A=e=>({value:e,cancelled:!0,finished:!1});function T(e,t,n,o){const{callId:a,parentId:l,onRest:c}=t,{asyncTo:s,promise:u}=n;return l||e!==s||t.reset?n.promise=(async()=>{n.asyncId=a,n.asyncTo=e;const d=f(t,((e,t)=>"onRest"===t?void 0:e));let p,h;const m=new Promise(((e,t)=>(p=e,h=t))),v=e=>{const t=a<=(n.cancelId||0)&&A(o)||a!==n.asyncId&&j(o,!1);if(t)throw e.result=t,h(e),e},g=(e,t)=>{const l=new D,c=new P;return(async()=>{if(r.b.skipAnimation)throw L(n),c.result=j(o,!1),h(c),c;v(l);const s=r.t.obj(e)?i({},e):i({},t,{to:e});s.parentId=a,Object(r.l)(d,((e,t)=>{r.t.und(s[t])&&(s[t]=e)}));const u=await o.start(s);return v(l),n.paused&&await new Promise((e=>{n.resumeQueue.add(e)})),u})()};let b;if(r.b.skipAnimation)return L(n),j(o,!1);try{let t;t=r.t.arr(e)?(async e=>{for(const t of e)await g(t)})(e):Promise.resolve(e(g,o.stop.bind(o))),await Promise.all([t.then(p),m]),b=j(o.get(),!0,!1)}catch(e){if(e instanceof D)b=e.result;else{if(!(e instanceof P))throw e;b=e.result}}finally{a==n.asyncId&&(n.asyncId=l,n.asyncTo=l?s:void 0,n.promise=l?u:void 0)}return r.t.fun(c)&&r.z.batchedUpdates((()=>{c(b,o,o.item)})),b})():u}function L(e,t){Object(r.n)(e.timeouts,(e=>e.cancel())),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}class D extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class P extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const M=e=>e instanceof I;let N=1;class I extends r.a{constructor(...e){super(...e),this.id=N++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Object(a.e)(this);return e&&e.getValue()}to(...e){return r.b.to(this,e)}interpolate(...e){return Object(r.j)(),r.b.to(this,e)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Object(r.d)(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||r.p.sort(this),Object(r.d)(this,{type:"priority",parent:this,priority:e})}}const F=Symbol.for("SpringPhase"),B=e=>(1&e[F])>0,V=e=>(2&e[F])>0,H=e=>(4&e[F])>0,z=(e,t)=>t?e[F]|=3:e[F]&=-3,q=(e,t)=>t?e[F]|=4:e[F]&=-5;class U extends I{constructor(e,t){if(super(),this.key=void 0,this.animation=new O,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!r.t.und(e)||!r.t.und(t)){const n=r.t.obj(e)?i({},e):i({},t,{from:e});r.t.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(V(this)||this._state.asyncTo)||H(this)}get goal(){return Object(r.r)(this.animation.to)}get velocity(){const e=Object(a.e)(this);return e instanceof a.c?e.lastVelocity||0:e.getPayload().map((e=>e.lastVelocity||0))}get hasAnimated(){return B(this)}get isAnimating(){return V(this)}get isPaused(){return H(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const o=this.animation;let{config:i,toValues:l}=o;const c=Object(a.g)(o.to);!c&&Object(r.s)(o.to)&&(l=Object(r.B)(Object(r.r)(o.to))),o.values.forEach(((s,u)=>{if(s.done)return;const d=s.constructor==a.b?1:c?c[u].lastPosition:l[u];let f=o.immediate,p=d;if(!f){if(p=s.lastPosition,i.tension<=0)return void(s.done=!0);let t=s.elapsedTime+=e;const n=o.fromValues[u],a=null!=s.v0?s.v0:s.v0=r.t.arr(i.velocity)?i.velocity[u]:i.velocity;let l;const c=i.precision||(n==d?.005:Math.min(1,.001*Math.abs(d-n)));if(r.t.und(i.duration))if(i.decay){const e=!0===i.decay?.998:i.decay,r=Math.exp(-(1-e)*t);p=n+a/(1-e)*(1-r),f=Math.abs(s.lastPosition-p)<=c,l=a*r}else{l=null==s.lastVelocity?a:s.lastVelocity;const t=i.restVelocity||c/10,o=i.clamp?0:i.bounce,u=!r.t.und(o),h=n==d?s.v0>0:n<d;let m,v=!1;const g=1,b=Math.ceil(e/g);for(let e=0;e<b&&(m=Math.abs(l)>t,m||(f=Math.abs(d-p)<=c,!f));++e){u&&(v=p==d||p>d==h,v&&(l=-l*o,p=d));l+=(1e-6*-i.tension*(p-d)+.001*-i.friction*l)/i.mass*g,p+=l*g}}else{let r=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,s.durationProgress>0&&(s.elapsedTime=i.duration*s.durationProgress,t=s.elapsedTime+=e)),r=(i.progress||0)+t/this._memoizedDuration,r=r>1?1:r<0?0:r,s.durationProgress=r),p=n+i.easing(r)*(d-n),l=(p-s.lastPosition)/e,f=1==r}s.lastVelocity=l,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),f=!0)}c&&!c[u].done&&(f=!1),f?s.done=!0:t=!1,s.setValue(p,i.round)&&(n=!0)}));const s=Object(a.e)(this),u=s.getValue();if(t){const e=Object(r.r)(o.to);u===e&&!n||i.decay?n&&i.decay&&this._onChange(u):(s.setValue(e),this._onChange(e)),this._stop()}else n&&this._onChange(u)}set(e){return r.z.batchedUpdates((()=>{this._stop(),this._focus(e),this._set(e)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(V(this)){const{to:e,config:t}=this.animation;r.z.batchedUpdates((()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()}))}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return r.t.und(e)?(n=this.queue||[],this.queue=[]):n=[r.t.obj(e)?e:i({},t,{to:e})],Promise.all(n.map((e=>this._update(e)))).then((e=>S(this,e)))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),L(this._state,e&&this._lastCallId),r.z.batchedUpdates((()=>this._stop(t,e))),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:o}=e;n=r.t.obj(n)?n[t]:n,(null==n||b(n))&&(n=void 0),o=r.t.obj(o)?o[t]:o,null==o&&(o=void 0);const i={to:n,from:o};return B(this)||(e.reverse&&([n,o]=[o,n]),o=Object(r.r)(o),r.t.und(o)?Object(a.e)(this)||this._set(n):this._set(o)),i}_update(e,t){let n=i({},e);const{key:o,defaultProps:a}=this;n.default&&Object.assign(a,f(n,((e,t)=>/^on/.test(t)?s(e,o):e))),Z(this,n,"onProps"),Q(this,"onProps",n,this);const l=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const c=this._state;return _(++this._lastCallId,{key:o,props:n,defaultProps:a,state:c,actions:{pause:()=>{H(this)||(q(this,!0),Object(r.o)(c.pauseQueue),Q(this,"onPause",j(this,G(this,this.animation.to)),this))},resume:()=>{H(this)&&(q(this,!1),V(this)&&this._resume(),Object(r.o)(c.resumeQueue),Q(this,"onResume",j(this,G(this,this.animation.to)),this))},start:this._merge.bind(this,l)}}).then((e=>{if(n.loop&&e.finished&&(!t||!e.noop)){const e=W(n);if(e)return this._update(e,!0)}return e}))}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(A(this));const o=!r.t.und(e.to),s=!r.t.und(e.from);if(o||s){if(!(t.callId>this._lastToId))return n(A(this));this._lastToId=t.callId}const{key:u,defaultProps:d,animation:f}=this,{to:p,from:h}=f;let{to:m=p,from:g=h}=e;!s||o||t.default&&!r.t.und(m)||(m=g),t.reverse&&([m,g]=[g,m]);const y=!Object(r.v)(g,h);y&&(f.from=g),g=Object(r.r)(g);const w=!Object(r.v)(m,p);w&&this._focus(m);const x=b(t.to),{config:C}=f,{decay:O,velocity:_}=C;(o||s)&&(C.velocity=0),t.config&&!x&&function(e,t,n){n&&(E(n=i({},n),t),t=i({},n,t)),E(e,t),Object.assign(e,t);for(const t in k)null==e[t]&&(e[t]=k[t]);let{mass:o,frequency:a,damping:l}=e;r.t.und(a)||(a<.01&&(a=.01),l<0&&(l=0),e.tension=Math.pow(2*Math.PI/a,2)*o,e.friction=4*Math.PI*l*o/a)}(C,l(t.config,u),t.config!==d.config?l(d.config,u):void 0);let S=Object(a.e)(this);if(!S||r.t.und(m))return n(j(this,!0));const L=r.t.und(t.reset)?s&&!t.default:!r.t.und(g)&&c(t.reset,u),D=L?g:this.get(),P=v(m),M=r.t.num(P)||r.t.arr(P)||Object(r.u)(P),N=!x&&(!M||c(d.immediate||t.immediate,u));if(w){const e=Object(a.f)(m);if(e!==S.constructor){if(!N)throw Error(`Cannot animate between ${S.constructor.name} and ${e.name}, as the "to" prop suggests`);S=this._set(P)}}const I=S.constructor;let F=Object(r.s)(m),H=!1;if(!F){const e=L||!B(this)&&y;(w||e)&&(H=Object(r.v)(v(D),P),F=!H),(Object(r.v)(f.immediate,N)||N)&&Object(r.v)(C.decay,O)&&Object(r.v)(C.velocity,_)||(F=!0)}if(H&&V(this)&&(f.changed&&!L?F=!0:F||this._stop(p)),!x&&((F||Object(r.s)(p))&&(f.values=S.getPayload(),f.toValues=Object(r.s)(m)?null:I==a.b?[1]:Object(r.B)(P)),f.immediate!=N&&(f.immediate=N,N||L||this._set(p)),F)){const{onRest:e}=f;Object(r.k)(X,(e=>Z(this,t,e)));const o=j(this,G(this,p));Object(r.o)(this._pendingCalls,o),this._pendingCalls.add(n),f.changed&&r.z.batchedUpdates((()=>{f.changed=!L,null==e||e(o,this),L?l(d.onRest,o):null==f.onStart||f.onStart(o,this)}))}L&&this._set(D),x?n(T(t.to,t,this._state,this)):F?this._start():V(this)&&!w?this._pendingCalls.add(n):n(R(D))}_focus(e){const t=this.animation;e!==t.to&&(Object(r.q)(this)&&this._detach(),t.to=e,Object(r.q)(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Object(r.s)(t)&&(Object(r.c)(t,this),M(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Object(r.s)(e)&&Object(r.A)(e,this)}_set(e,t=!0){const n=Object(r.r)(e);if(!r.t.und(n)){const e=Object(a.e)(this);if(!e||!Object(r.v)(n,e.getValue())){const o=Object(a.f)(n);e&&e.constructor==o?e.setValue(n):Object(a.h)(this,o.create(n)),e&&r.z.batchedUpdates((()=>{this._onChange(n,t)}))}}return Object(a.e)(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Q(this,"onStart",j(this,G(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),l(this.animation.onChange,e,this)),l(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Object(a.e)(this).reset(Object(r.r)(e.to)),e.immediate||(e.fromValues=e.values.map((e=>e.lastPosition))),V(this)||(z(this,!0),H(this)||this._resume())}_resume(){r.b.skipAnimation?this.finish():r.p.start(this)}_stop(e,t){if(V(this)){z(this,!1);const n=this.animation;Object(r.k)(n.values,(e=>{e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Object(r.d)(this,{type:"idle",parent:this});const o=t?A(this.get()):j(this.get(),G(this,null!=e?e:n.to));Object(r.o)(this._pendingCalls,o),n.changed&&(n.changed=!1,Q(this,"onRest",o,this))}}}function G(e,t){const n=v(t),o=v(e.get());return Object(r.v)(o,n)}function W(e,t=e.loop,n=e.to){let r=l(t);if(r){const o=!0!==r&&m(r),a=(o||e).reverse,l=!o||o.reset;return Y(i({},e,{loop:t,default:!1,pause:void 0,to:!a||b(n)?n:void 0,from:l?e.from:void 0,reset:l},o))}}function Y(e){const{to:t,from:n}=e=m(e),o=new Set;return r.t.obj(t)&&K(t,o),r.t.obj(n)&&K(n,o),e.keys=o.size?Array.from(o):null,e}function $(e){const t=Y(e);return r.t.und(t.default)&&(t.default=f(t)),t}function K(e,t){Object(r.l)(e,((e,n)=>null!=e&&t.add(n)))}const X=["onStart","onRest","onChange","onPause","onResume"];function Z(e,t,n){e.animation[n]=t[n]!==u(t,n)?s(t[n],e.key):void 0}function Q(e,t,...n){var r,o,a,i;null==(r=(o=e.animation)[t])||r.call(o,...n),null==(a=(i=e.defaultProps)[t])||a.call(i,...n)}const J=["onStart","onChange","onRest"];let ee=1;class te{constructor(e,t){this.id=ee++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start(i({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every((e=>e.idle&&!e.isDelayed&&!e.isPaused))}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each(((t,n)=>e[n]=t.get())),e}set(e){for(const t in e){const n=e[t];r.t.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(Y(e)),this}start(e){let{queue:t}=this;return e?t=Object(r.B)(e).map(Y):this.queue=[],this._flush?this._flush(this,t):(ce(this,t),ne(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;Object(r.k)(Object(r.B)(t),(t=>n[t].stop(!!e)))}else L(this._state,this._lastAsyncId),this.each((t=>t.stop(!!e)));return this}pause(e){if(r.t.und(e))this.start({pause:!0});else{const t=this.springs;Object(r.k)(Object(r.B)(e),(e=>t[e].pause()))}return this}resume(e){if(r.t.und(e))this.start({pause:!1});else{const t=this.springs;Object(r.k)(Object(r.B)(e),(e=>t[e].resume()))}return this}each(e){Object(r.l)(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,o=this._active.size>0,a=this._changed.size>0;(o&&!this._started||a&&!this._started)&&(this._started=!0,Object(r.n)(e,(([e,t])=>{t.value=this.get(),e(t,this,this._item)})));const i=!o&&this._started,l=a||i&&n.size?this.get():null;a&&t.size&&Object(r.n)(t,(([e,t])=>{t.value=l,e(t,this,this._item)})),i&&(this._started=!1,Object(r.n)(n,(([e,t])=>{t.value=l,e(t,this,this._item)})))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}r.z.onFrame(this._onFrame)}}function ne(e,t){return Promise.all(t.map((t=>re(e,t)))).then((t=>S(e,t)))}async function re(e,t,n){const{keys:o,to:a,from:i,loop:l,onRest:c,onResolve:s}=t,d=r.t.obj(t.default)&&t.default;l&&(t.loop=!1),!1===a&&(t.to=null),!1===i&&(t.from=null);const f=r.t.arr(a)||r.t.fun(a)?a:void 0;f?(t.to=void 0,t.onRest=void 0,d&&(d.onRest=void 0)):Object(r.k)(J,(n=>{const o=t[n];if(r.t.fun(o)){const r=e._events[n];t[n]=({finished:e,cancelled:t})=>{const n=r.get(o);n?(e||(n.finished=!1),t&&(n.cancelled=!0)):r.set(o,{value:null,finished:e||!1,cancelled:t||!1})},d&&(d[n]=t[n])}}));const p=e._state;t.pause===!p.paused?(p.paused=t.pause,Object(r.o)(t.pause?p.pauseQueue:p.resumeQueue)):p.paused&&(t.pause=!0);const h=(o||Object.keys(e.springs)).map((n=>e.springs[n].start(t))),m=!0===t.cancel||!0===u(t,"cancel");(f||m&&p.asyncId)&&h.push(_(++e._lastAsyncId,{props:t,state:p,actions:{pause:r.w,resume:r.w,start(t,n){m?(L(p,e._lastAsyncId),n(A(e))):(t.onRest=c,n(T(f,t,p,e)))}}})),p.paused&&await new Promise((e=>{p.resumeQueue.add(e)}));const v=S(e,await Promise.all(h));if(l&&v.finished&&(!n||!v.noop)){const n=W(t,l,a);if(n)return ce(e,[n]),re(e,n,!0)}return s&&r.z.batchedUpdates((()=>s(v,e,e.item))),v}function oe(e,t){const n=i({},e.springs);return t&&Object(r.k)(Object(r.B)(t),(e=>{r.t.und(e.keys)&&(e=Y(e)),r.t.obj(e.to)||(e=i({},e,{to:void 0})),le(n,e,(e=>ie(e)))})),ae(e,n),n}function ae(e,t){Object(r.l)(t,((t,n)=>{e.springs[n]||(e.springs[n]=t,Object(r.c)(t,e))}))}function ie(e,t){const n=new U;return n.key=e,t&&Object(r.c)(n,t),n}function le(e,t,n){t.keys&&Object(r.k)(t.keys,(r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)}))}function ce(e,t){Object(r.k)(t,(t=>{le(e.springs,t,(t=>ie(t,e)))}))}function se(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}const ue=["children"],de=e=>{let{children:t}=e,n=se(e,ue);const a=Object(o.useContext)(fe),i=n.pause||!!a.pause,l=n.immediate||!!a.immediate;n=Object(r.F)((()=>({pause:i,immediate:l})),[i,l]);const{Provider:c}=fe;return o.createElement(c,{value:n},t)},fe=(pe=de,he={},Object.assign(pe,o.createContext(he)),pe.Provider._context=pe,pe.Consumer._context=pe,pe);var pe,he;de.Provider=fe.Provider,de.Consumer=fe.Consumer;const me=()=>{const e=[],t=function(t){Object(r.i)();const o=[];return Object(r.k)(e,((e,a)=>{if(r.t.und(t))o.push(e.start());else{const r=n(t,e,a);r&&o.push(e.start(r))}})),o};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){const n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){return Object(r.k)(e,(e=>e.pause(...arguments))),this},t.resume=function(){return Object(r.k)(e,(e=>e.resume(...arguments))),this},t.set=function(t){Object(r.k)(e,(e=>e.set(t)))},t.start=function(t){const n=[];return Object(r.k)(e,((e,o)=>{if(r.t.und(t))n.push(e.start());else{const r=this._getProps(t,e,o);r&&n.push(e.start(r))}})),n},t.stop=function(){return Object(r.k)(e,(e=>e.stop(...arguments))),this},t.update=function(t){return Object(r.k)(e,((e,n)=>e.update(this._getProps(t,e,n)))),this};const n=function(e,t,n){return r.t.fun(e)?e(n,t):e};return t._getProps=n,t};function ve(e,t,n){const a=r.t.fun(t)&&t;a&&!n&&(n=[]);const l=Object(o.useMemo)((()=>a||3==arguments.length?me():void 0),[]),c=Object(o.useRef)(0),s=Object(r.D)(),u=Object(o.useMemo)((()=>({ctrls:[],queue:[],flush(e,t){const n=oe(e,t);return c.current>0&&!u.queue.length&&!Object.keys(n).some((t=>!e.springs[t]))?ne(e,t):new Promise((r=>{ae(e,n),u.queue.push((()=>{r(ne(e,t))})),s()}))}})),[]),d=Object(o.useRef)([...u.ctrls]),f=[],p=Object(r.H)(e)||0;function h(e,n){for(let r=e;r<n;r++){const e=d.current[r]||(d.current[r]=new te(null,u.flush)),n=a?a(r,e):t[r];n&&(f[r]=$(n))}}Object(o.useMemo)((()=>{Object(r.k)(d.current.slice(e,p),(e=>{y(e,l),e.stop(!0)})),d.current.length=e,h(p,e)}),[e]),Object(o.useMemo)((()=>{h(0,Math.min(p,e))}),n);const m=d.current.map(((e,t)=>oe(e,f[t]))),v=Object(o.useContext)(de),b=Object(r.H)(v),k=v!==b&&g(v);Object(r.E)((()=>{c.current++,u.ctrls=d.current;const{queue:e}=u;e.length&&(u.queue=[],Object(r.k)(e,(e=>e()))),Object(r.k)(d.current,((e,t)=>{null==l||l.add(e),k&&e.start({default:v});const n=f[t];n&&(w(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),Object(r.G)((()=>()=>{Object(r.k)(u.ctrls,(e=>e.stop(!0)))}));const x=m.map((e=>i({},e)));return l?[x,l]:x}function ge(e,t){const n=r.t.fun(e),[[o],a]=ve(1,n?e:[e],n?t||[]:t);return n||2==arguments.length?[o,a]:o}let be;!function(e){e.MOUNT="mount",e.ENTER="enter",e.UPDATE="update",e.LEAVE="leave"}(be||(be={}));class ye extends I{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=Object(r.f)(...t);const n=this._get(),o=Object(a.f)(n);Object(a.h)(this,o.create(n))}advance(e){const t=this._get(),n=this.get();Object(r.v)(t,n)||(Object(a.e)(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&ke(this._active)&&xe(this)}_get(){const e=r.t.arr(this.source)?this.source.map(r.r):Object(r.B)(Object(r.r)(this.source));return this.calc(...e)}_start(){this.idle&&!ke(this._active)&&(this.idle=!1,Object(r.k)(Object(a.g)(this),(e=>{e.done=!1})),r.b.skipAnimation?(r.z.batchedUpdates((()=>this.advance())),xe(this)):r.p.start(this))}_attach(){let e=1;Object(r.k)(Object(r.B)(this.source),(t=>{Object(r.s)(t)&&Object(r.c)(t,this),M(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))})),this.priority=e,this._start()}_detach(){Object(r.k)(Object(r.B)(this.source),(e=>{Object(r.s)(e)&&Object(r.A)(e,this)})),this._active.clear(),xe(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=Object(r.B)(this.source).reduce(((e,t)=>Math.max(e,(M(t)?t.priority:0)+1)),0))}}function we(e){return!1!==e.idle}function ke(e){return!e.size||Array.from(e).every(we)}function xe(e){e.idle||(e.idle=!0,Object(r.k)(Object(a.g)(e),(e=>{e.done=!0})),Object(r.d)(e,{type:"idle",parent:e}))}r.b.assign({createStringInterpolator:r.g,to:(e,t)=>new ye(e,t)});r.p.advance},96:function(e,t,n){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",o="second",a="minute",i="hour",l="day",c="week",s="month",u="quarter",d="year",f="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},b={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),o=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(o,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),o=t.clone().add(r,s),a=n-o<0,i=t.clone().add(r+(a?-1:1),s);return+(-(r+(n-o)/(a?o-i:i-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:s,y:d,w:c,d:l,D:f,h:i,m:a,s:o,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",w={};w[y]=v;var k=function(e){return e instanceof O},x=function e(t,n,r){var o;if(!t)return y;if("string"==typeof t){var a=t.toLowerCase();w[a]&&(o=a),n&&(w[a]=n,o=a);var i=t.split("-");if(!o&&i.length>1)return e(i[0])}else{var l=t.name;w[l]=t,o=l}return!r&&o&&(y=o),o||!r&&y},E=function(e,t){if(k(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new O(n)},C=b;C.l=x,C.i=k,C.w=function(e,t){return E(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var O=function(){function v(e){this.$L=x(e.locale,null,!0),this.parse(e)}var g=v.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var o=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return C},g.isValid=function(){return!(this.$d.toString()===p)},g.isSame=function(e,t){var n=E(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return E(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<E(e)},g.$g=function(e,t,n){return C.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,r=!!C.u(t)||t,u=C.p(e),p=function(e,t){var o=C.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?o:o.endOf(l)},h=function(e,t){return C.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,v=this.$M,g=this.$D,b="set"+(this.$u?"UTC":"");switch(u){case d:return r?p(1,0):p(31,11);case s:return r?p(1,v):p(0,v+1);case c:var y=this.$locale().weekStart||0,w=(m<y?m+7:m)-y;return p(r?g-w:g+(6-w),v);case l:case f:return h(b+"Hours",0);case i:return h(b+"Minutes",1);case a:return h(b+"Seconds",2);case o:return h(b+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var n,c=C.p(e),u="set"+(this.$u?"UTC":""),p=(n={},n[l]=u+"Date",n[f]=u+"Date",n[s]=u+"Month",n[d]=u+"FullYear",n[i]=u+"Hours",n[a]=u+"Minutes",n[o]=u+"Seconds",n[r]=u+"Milliseconds",n)[c],h=c===l?this.$D+(t-this.$W):t;if(c===s||c===d){var m=this.clone().set(f,1);m.$d[p](h),m.init(),this.$d=m.set(f,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[C.p(e)]()},g.add=function(r,u){var f,p=this;r=Number(r);var h=C.p(u),m=function(e){var t=E(p);return C.w(t.date(t.date()+Math.round(e*r)),p)};if(h===s)return this.set(s,this.$M+r);if(h===d)return this.set(d,this.$y+r);if(h===l)return m(1);if(h===c)return m(7);var v=(f={},f[a]=t,f[i]=n,f[o]=e,f)[h]||1,g=this.$d.getTime()+r*v;return C.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",o=C.z(this),a=this.$H,i=this.$m,l=this.$M,c=n.weekdays,s=n.months,u=function(e,n,o,a){return e&&(e[n]||e(t,r))||o[n].slice(0,a)},d=function(e){return C.s(a%12||12,e,"0")},f=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:l+1,MM:C.s(l+1,2,"0"),MMM:u(n.monthsShort,l,s,3),MMMM:u(s,l),D:this.$D,DD:C.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,c,2),ddd:u(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(a),HH:C.s(a,2,"0"),h:d(1),hh:d(2),a:f(a,i,!0),A:f(a,i,!1),m:String(i),mm:C.s(i,2,"0"),s:String(this.$s),ss:C.s(this.$s,2,"0"),SSS:C.s(this.$ms,3,"0"),Z:o};return r.replace(m,(function(e,t){return t||h[e]||o.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(r,f,p){var h,m=C.p(f),v=E(r),g=(v.utcOffset()-this.utcOffset())*t,b=this-v,y=C.m(this,v);return y=(h={},h[d]=y/12,h[s]=y,h[u]=y/3,h[c]=(b-g)/6048e5,h[l]=(b-g)/864e5,h[i]=b/n,h[a]=b/t,h[o]=b/e,h)[m]||b,p?y:C.a(y)},g.daysInMonth=function(){return this.endOf(s).$D},g.$locale=function(){return w[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=x(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return C.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},v}(),_=O.prototype;return E.prototype=_,[["$ms",r],["$s",o],["$m",a],["$H",i],["$W",l],["$M",s],["$y",d],["$D",f]].forEach((function(e){_[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),E.extend=function(e,t){return e.$i||(e(t,O,E),e.$i=!0),E},E.locale=x,E.isDayjs=k,E.unix=function(e){return E(1e3*e)},E.en=w[y],E.Ls=w,E.p={},E}()},965:function(e,t,n){e.exports=function(){"use strict";var e="day";return function(t,n,r){var o=function(t){return t.add(4-t.isoWeekday(),e)},a=n.prototype;a.isoWeekYear=function(){return o(this).year()},a.isoWeek=function(t){if(!this.$utils().u(t))return this.add(7*(t-this.isoWeek()),e);var n,a,i,l=o(this),c=(n=this.isoWeekYear(),i=4-(a=(this.$u?r.utc:r)().year(n).startOf("year")).isoWeekday(),a.isoWeekday()>4&&(i+=7),a.add(i,e));return l.diff(c,"week")+1},a.isoWeekday=function(e){return this.$utils().u(e)?this.day()||7:this.day(this.day()%7?e:e-7)};var i=a.startOf;a.startOf=function(e,t){var n=this.$utils(),r=!!n.u(t)||t;return"isoweek"===n.p(e)?r?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):i.bind(this)(e,t)}}}()},966:function(e,t,n){e.exports=function(){"use strict";return function(e,t){t.prototype.isoWeeksInYear=function(){var e=this.isLeapYear(),t=this.endOf("y").day();return 4===t||e&&5===t?53:52}}}()},967:function(e,t,n){e.exports=function(){"use strict";return function(e,t){t.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}}()},995:function(e,t,n){var r=n(933),o=n(434),a=n(582),i=Math.ceil,l=Math.max;e.exports=function(e,t,n){t=(n?o(e,t,n):void 0===t)?1:l(a(t),0);var c=null==e?0:e.length;if(!c||t<1)return[];for(var s=0,u=0,d=Array(i(c/t));s<c;)d[u++]=r(e,s,s+=t);return d}},997:function(e,t,n){"use strict";var r=n(1887);e.exports=function(e,t){return r(e,(function(e){return e()}),t)}}}]);